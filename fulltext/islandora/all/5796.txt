       
 USE OF WIFI SENSOR NETWORK  IN MEASURING  OCCUPANCY AND PEOPLE CIRCULATION IN BUILDINGS     By  Kam Ng  Master of Architecture  University of Michigan, 2008      A MRP  presented to Ryerson University      In partial fulfillment of the  requirements for the degree of    MASTER OF BUILDING SCIENCE    In the program of  Building Science      Toronto, Ontario, Canada, 2016  © Kam Ng, 2016

 

Author's declaration   
I hereby declare that I am the sole author of this thesis. This is a true copy of the MRP, including any  required final revisions, as accepted by my examiners.     I authorize Ryerson University to lend this MRP to other institutions or individuals for the purpose of  scholarly research.     I further authorize Ryerson University to reproduce this MRP by photocopying or by other means, in  total or in part, at the request of other institutions or individuals for the purpose of scholarly research.     I understand that my thesis may be made electronically available to the public.                                        
ii 

       

USE OF WIFI SENSOR NETWORK  IN MEASURING  OCCUPANCY AND PEOPLE CIRCULATION IN BUILDINGS  

 
Kam Ng  Master of Building Science  Program of Building Science  Ryerson University, Toronto, Ontario, Canada, 2016           

Abstract   
This research project investigated the potential in using a WiFi sensor network composed of Open Mesh  sensor nodes to measure both localized and nonlocalized occupants in the Architecture Building at  Ryerson University with two different sensor node configurations. It also experimented with the use of  Raspberry Pi, a lowcost infrared motion sensor, as a people counter. The results show that the  proposed sensor network is not capable of measuring nonlocalized (transient) occupants due to their  short duration of stay in the measurement area. The number of nonlocalized occupants and their  duration of stay can be more accurately measured by the people counter. As for localized  (in one  location for longer periods) occupants, the results find that while the proposed system cannot provide  an accurate occupant count, it can produce a fairly accurate overall occupancy pattern under both  perimeter node and single node configurations. 

   
iii 

Acknowledgements   
This MRP would not have been possible without the help of many people. First, I would like to thank my  supervisor Prof. (Dr.) Mark Gorgolewski for providing generous support, guidance and a great  opportunity to work with him. I would also like to thank Prof. Jennifer McArthur, Prof. Vincent Hui, and  Max Richter of Perkins and Will Canada for continuous help and involvement in this research project. To  Danilo Yu, Jaeduk Seo, Steniel Sy, Leo Roytman and Roya Nosrati, thank you for all the very technical  support in setting up this project.    I would like to acknowledge our project sponsor: The Natural Sciences and Engineering Research Council  of Canada (NSERC) and the support of Perkins and Will Canada. This project would not have taken place  without their support. 

                         

iv 

Contents   
Author's declaration.................................................................................................................................................................ii  Abstract.......................................................................................................................................................................................iii  Acknowledgements.................................................................................................................................................................iv  Contents........................................................................................................................................................................................v  List of Figures............................................................................................................................................................................vii  List of Tables.................................................................................................................................................................................x  1.  Introduction.....................................................................................................................................................................1 1.1  Indoor environmental quality...............................................................................................................1 1.2   Building energy use..................................................................................................................................2 1.3  Building usage............................................................................................................................................3 1.4  Building occupancy data.........................................................................................................................3 1.5  Finegrained occupancy information.................................................................................................4 1.6  Research objective...................................................................................................................................5 1.7  WiFi sensor technology.........................................................................................................................5  2.  Literature review............................................................................................................................................................8 2.1  Occupancy measurement approaches..............................................................................................8 2.1.1  CO2 based detection systems................................................................................................................9 2.1.2  Passive infrared (PIR) detection systems........................................................................................11 2.1.3  Ultrasonic detection systems..............................................................................................................13 2.1.4  Visionbased detection system..........................................................................................................15 2.1.5  Audible sound / passive acoustic detection systems..................................................................16 2.1.6  Energyrelated activities based detection systems.....................................................................18 2.1.7  RFID tags detection systems...............................................................................................................20 2.1.8  Indoor positioning system (IPS) based mobile application (app) systems...........................21 2.1.9  (Overhead) PIR people counter..........................................................................................................23 2.2  WiFi sensor network detection systems........................................................................................25 2.3  WiFi technology for location detection..........................................................................................27 2.4  Summary of major occupancy sensor detection systems.........................................................30  3.  WiFi sensor network experiment methodology...............................................................................................32 3.1  Selection of WiFi sensors....................................................................................................................33 3.2  Experiment description .........................................................................................................................34 3.3  Data acquisition.......................................................................................................................................37 3.4  Data structure of the downloaded files ...........................................................................................39 3.5  Experiment setup....................................................................................................................................41 3.6  Experiment with node configurations A & B ..................................................................................43 3.7  Configuration A: Nodes on perimeter of a defined area...........................................................43
v 

3.8  Configuration B: Central nodes at center of a defined area.....................................................47  4.  Evaluation of WiFi sensor network system performance.............................................................................50 4.1  Experiment phase 1: Comparison of configurations A & B on localized occupants..........50 4.1.1  Configuration A at MBSc Studio.........................................................................................................50 4.1.2  Configuration B at MBSc Studio.........................................................................................................57 4.1.3  Configuration B at extended MBSc Studio with an additional node......................................62 4.1.4  Configuration B at MArch Studio.......................................................................................................66 4.1.5  Configuration B at lecture room (Pit)...............................................................................................71 4.1.6  Configurations A & B analysis using ANOVA..................................................................................75 4.1.7  Evaluation of Accuware Analytics Dashboard with configuration B at MArch Studio.....77 4.1.8  Evaluation of Accuware Analytics Dashboard in a period of 9 days......................................82 4.2  Experiment phase 2: Comparison of configurations A & B on nonlocalized occupants .84 4.2.1  Configuration A at circulation area...................................................................................................84 4.2.2  Configuration B at second floor stairway ........................................................................................88  5.  Raspberry Pi Passive infrared (PIR) people counter experiment..................................................................91 5.1  Basic setup................................................................................................................................................91 5.2  Result..........................................................................................................................................................94  6.  Discussion.......................................................................................................................................................................95 6.1  WiFi sensor network in measurement of localized occupants...............................................95 6.2  General system limitations..................................................................................................................98 6.3  WiFi sensor network in measurement of nonlocalized occupants...................................101 6.4  Raspberry Pi PIR people counter in measurement of occupants.........................................104 6.5 Examples of WiFi sensor network's applications......................................................................105  7.  Conclusion...................................................................................................................................................................112 7.1  Result in response to research questions....................................................................................112 7.2  WiFi sensor network compared with other major occupant detection systems..........112 7.3  Contributions........................................................................................................................................113 7.4  Future work...........................................................................................................................................114  Appendix A Accuware dashboard...........................................................................................................................115  Appendix B Accuware Analytics dashboard........................................................................................................116  Appendix C Example result from Experiment phase 1: Configuration A at MBSc Studio.....................117  Appendix D Physical count from Raspberry Pi PIR people counter experiment......................................120  Appendix E Partial data recorded by Raspberry Pi PIR people counter.....................................................121  Appendix F Macro script for coordinates filter..................................................................................................122  References..............................................................................................................................................................................123    
vi 

List of Figures 
  Fig. 1.  Finegrained occupancy information.  Fig. 2.  Accuware Indoor Triangulation System (I.T.S.) Density Maps dashboard.  Fig. 3.   Ryerson University Architecture Building's second floor.  Fig. 4.   Second floor plan of the Architecture Building.  Fig. 5.   Front view of Open Mesh sensor node.  Fig. 6.   Back view of Open Mesh sensor node.  Fig. 7.   Flow diagram of Accuware Indoor Triangulation System (I.T.S.) (Accuware, 2015).  Fig. 8.   Nodes 5 & 6 as node gateways.  Fig. 9.  Typical node installation height.  Fig. 10.   Enlarged photo of node installation on a lighting fixture at MBSc Studio.  Fig. 11.   Enlarged photo of node installation on a water pipe at MBSc Studio.  Fig. 12.   Triangulation by sensor nodes at MBSc Studio.  Fig. 13.   RSS calibration at circulation area.  Fig. 14.   RSS calibration above circulation area.  Fig. 15.   Central node application at lecture room (Pit).  Fig. 16.   Perimeter node application at MBSc Studio.  Fig. 17.   RSS calibration at MBSc Studio.  Fig. 18.  RSS calibration on floor above MBSc Studio.  Fig. 19.   MAC detections vs. unique people in each 1hour time period (June 9).  Fig. 20.  MAC detections vs. unique people in each 1hour time period (June 13).  Fig. 21.  MAC detections vs. unique people in each 1hour time period (June 14).  Fig. 22.  Multiplier vs. time on June 9, 13 & 14.  Fig. 23.  Central nodes application at MBSc Studio.  Fig. 24.  RSS calibration at MBSc Studio.  Fig. 25.   RSS calibration on floor above MBSc Studio.  Fig. 26.  RSS calibration on floor below MBSc Studio.  Fig. 27.  MAC detections vs. unique people in each 1hour time period (June 17).  Fig. 28.  MAC detections vs. unique people in each 1hour time period (June 20).  Fig. 29.  MAC detections vs. unique people in each 1hour time period (June 21).  Fig. 30.  Multiplier vs. time on June 17, 20 & 21.  Fig. 31.  Central node application with an additional node at MBSc Studio.  Fig. 32.   RSS calibration for additional Node 8 at MBSc Studio.  Fig. 33.  MAC detections vs. unique people in each 1hour time period (June 27).  vii 

Fig. 34.  Multiplier vs. time on June 27.  Fig. 35.  Central node application at MArch Studio.  Fig. 36.  RSS calibration at MArch Studio.  Fig. 37.  MAC detections vs. unique people in each 1hour time period (June 17).  Fig. 38.  MAC detections vs. unique people in each 1hour time period (June 20).  Fig. 39.  MAC detections vs. unique people in each 1hour time period (June 21).  Fig. 40.  Multiplier vs. time on June 17, 20 & 21.  Fig. 41.   Lecture room (Pit).  Fig. 42.  Central node application at lecture room (Pit).  Fig. 43.  RSS calibration at lecture room.  Fig. 44.  RSS calibration on floor above lecture room.  Fig. 45.  MAC detections vs. unique people in each 1hour time period (June 2).  Fig. 46.  MAC detections vs. unique people in each 1hour time period (June 3).  Fig. 47.  Multiplier vs. time on June 2 & 3.  Fig. 48.  Central nodes application at MArch Studio.  Fig. 49.  MAC detections in a period of 1 day with RSS cutoff value >  41 dBm (June 17).   Fig. 50.  Analytics Dashboard result (inplace visitors) compared with result from CSV file analysis (June 17).  Fig. 51.  Analytics Dashboard result (unique visitors) compared with result from CSV file analysis (June 17).  Fig. 52.  MAC detections in a period of 1 day with RSS cutoff value >  41 dBm (June 20).  Fig. 53.  Analytics Dashboard result (inplace visitors) compared with result from CSV file analysis (June 20).  Fig. 54.  Analytics Dashboard result (unique visitors) compared with result from CSV file analysis (June 20).  Fig. 55.  MAC detections in a period of 1 day with RSS cutoff value >  41 dBm (June 21).  Fig. 56.  Analytics Dashboard result (inplace visitors) compared with result from CSV file analysis (June 21).  Fig. 57.  Analytics Dashboard result (unique visitors) compared with result from CSV file analysis (June 21).  Fig. 58.  MAC detections (inplace visitors) with RSS cutoff value >  41 dBm (June 18  26).  Fig. 59.  MAC detections (inplace visitors & unique visitors) with RSS cutoff value >  41 dBm (June 18  26).  Fig. 60.  Circulation area.  Fig. 61.   Perimeter node application at circulation area.  Fig. 62.  RSS calibration at circulation area.  Fig. 63.  RSS calibration on floor above circulation area.  Fig. 64.  Mac detections vs. unique people in each 30minute time period (June 9 & 13).  Fig. 65.  Multiplier vs. time on June 9 & 13.  Fig. 66.   Second floor stairway. Arrow indicates Node 10 installation location.  Fig. 67.  Central node application at stairway.  Fig. 68.  RSS calibration at Stairway. 

viii 

Fig. 69.  MAC detections vs. unique people in 3 consecutive 10minute time periods (May 31).  Fig. 70.   Perspective view of Raspberry Pi people counter with power cable plugged in.  Fig. 71.   Side view of Raspberry Pi people counter with power cable plugged in.  Fig. 72.   Sectional view of Raspberry Pi people counter.  Fig. 73.  Enlarged photo of adjustable PIR (motion) sensor.  Fig. 74.  Raspberry Pi people counter wiring diagram.  Fig. 75.   Entry lobby at SLC Building.  Fig. 76.  Raspberry Pi Sensor detecting a single travel.  Fig. 77.  Example of a group travel.  Fig. 78.  Experiment setup at SLC entry lobby.  Fig. 79.  Devices falsely detected as inside the measurement area.  Fig. 80.  Location proximity of node to existing WiFi access point.  Fig. 81.  Paul H. Cocker Gallery.  Fig. 82.   Second floor plan of the Architecture Building.  Fig. 83.   Single node application at Gallery.  Fig. 84.   1% CO2 + RH/T Data Logger of model# CM0018AA.  Fig. 85.  Number of MAC detections in each 1hour time frame at RSS >  40 dBm. Note: Time without daylight    saving. 

Fig. 86.  Temperature (0C), relative humidity (%) and CO2 concentration (ppm) measured at Gallery. Note: Time    without daylight saving. 

Fig. 87.  Number of MAC detections in each 1hour time frame at RSS >  40 dBm. Note: Time without daylight    saving. 

Fig. 88.  Temperature (0C), relative humidity (%) and CO2 concentration (ppm) measured at Gallery. Note: Time    without daylight saving. 

Fig. 89.  Single node application at lecture room.  Fig. 90.  Number of MAC detections in each 1hour time frame at RSS >  46 dBm. Note: Time without daylight    saving. 

Fig. 91.  Temperature (0C), relative humidity (%) and CO2 concentration (ppm) measured at lecture room. Note:                Time without daylight saving. 

ix 

List of Tables 
  Tab. 1.   Summary of major occupancy sensor detection systems.  Tab. 2.   CSV file format.  Tab. 1.   Summary of major occupancy sensor detection systems.  Tab. 2.   CSV file format.  Tab. 3.   CSV file converted to Excel file format.  Tab. 4.  Latitude and longitude of Nodes on Accuware dashboard.  Tab. 5.   Application of time filter "6/13/16 2:00  3:00 PM to the Excel file.  Tab. 6.   Unique MAC addresses identified by detection frequency filter of 100 times/hour.  Tab. 7.  Mean multiplier & range of multipliers on June 9, 13 & 14.  Tab. 8.  Average mean multiplier on June 9, 13 & 14.  Tab. 9.   Number of known devices detected by the WiFi sensor network.  Tab. 10.  Data input table for ANOVA.  Tab. 11.  ANOVA table for configuration A comparison at MBSc Studio on June 9, 13 & 14.  Tab. 12.  Mean multiplier, range of multipliers & average mean multiplier on June 17, 20 & 21.  Tab. 13.  Number of known devices detected on June 20 & 21.  Tab. 14.  Data input table for ANOVA.  Tab. 15.  ANOVA table for configuration B comparison at MBSc Studio on June 17 & 20 & 21.  Tab. 16.  Mean multiplier & range of multipliers on June 27.  Tab. 17.  Data input table for ANOVA.  Tab. 18.  ANOVA table for configuration B comparison (with and without an additional node) at MBSc Studio.  Tab. 19.  Mean multiplier, range of multipliers & average mean multiplier on June 17, 20 & 21.  Tab. 20.  Number of MAC addresses present in number of 1hr time period within twelve 1hr time period from    8:00 AM  20:00 PM. 

Tab. 21.  Data input table for ANOVA.  Tab. 22.  ANOVA table for configuration B comparison at MArch Studio on June 17, 20 & 21.  Tab. 23.  Mean multiplier and range of multipliers on June 2 & 3.  Tab. 24.  Data input table for ANOVA.  Tab. 25.  ANOV table for configuration B comparison at lecture room on June 2 & 3.  Tab. 26.  Data input table for ANOVA.  Tab. 27.  ANOV table for configurations A & B comparison at MBSc Studio.  Tab. 28.  Data input table for ANOVA.  Tab. 29.  ANOV table for configuration B comparison at MBSc & MArch studios.  Tab. 30.  Multiplier, range of multipliers & mean multiplier on June 9 & 13.   x 

Tab. 31.  Device A detected on floor above with a high detection frequency.  Tab. 32.  MAC address identification.  Tab. 33.  Result from Raspberry Pi people counter on July 12.  Tab. 34.  Fluctuation in RSS detections of Device M.  Tab. 35.  Low detection frequency of Macbooks and smartphones.  Tab. 36.  Number of MAC detections with RSS >  36 dBm and RSS >  26 dBm. 

xi 

1.   

 

Introduction 

Occupancy is an important factor that affects building performance. This research project looks at how  to best measure occupancy levels and patterns in a building. The project is carried out as the first part of  a twopart project. Part one examines the use of a WiFi sensor network to measure both localized and  nonlocalized occupancy. A proven WiFi sensor system has the potential to be integrated with an  existing WiFi infrastructure in order to economize its use in WiFiready buildings. Part two will examine  the possibility in using WiFi sensor systems to improve the building performance of Ryerson University's  future Daphne Cockwell Health Sciences Complex.    The following sections, namely indoor environmental quality (IEQ), building energy use, and building  usage, explain how building performance is affected by occupancy and why measuring occupancy is  crucial to improving building performance.    1.1    According to a survey conducted by the National Human Activity Pattern Survey (NHAPS), survey  respondents from the 48 states in the U.S. spend an average of 87% of their time in enclosed buildings  (Hern et al., 2001). People who are spending prolonged hours in an indoor environment are also  exposed to potential indoor air pollutant and thermal discomfort inside a building for longer periods of  time. Therefore, indoor environmental quality (IEQ) is important to the wellbeing of building occupants.    One major component in assessing IEQ is indoor air quality (IAQ). The US Environmental Protection  Agency (EPA) has repeatedly named indoor air pollution as one of the top five environmental public  health risks (EPA, 2003). Poor air quality can cause various health problems including shortterm  illnesses such as fatigue and nausea, and longterm diseases such as chronic respiratory diseases, heart  disease and lung cancer (EPA, 2003 & Spengler et al., 2001).    The other key component in assessing IEQ is thermal comfort (Huizenga et al., 2006). A study carried out  in 215 buildings across the Unites States, Canada and Finland shows that thermal comfort has the  second lowest satisfaction score among all the categories scored, with air quality having the third lowest  score. Thermal discomfort not only reduces work productivity, but it also increases potential health 
1 

 

Indoor environmental quality 

risks. Studies show that increased air temperatures are associated with increases in SBS (Sick Building  Syndrome) symptoms (Mendell, 1993).    Without changing the architecture of a building, one key and practical improvement to IEQ can be  achieved by appropriately adjusting the supply of HVAC (heating, ventilation and airconditioning)  systems according to need. For example, studies suggest that an increase in ventilation rate can  potentially decrease inhalation exposure to infectious aerosols by more than a factor of two, and lower  indexes of respiratory illness by 15% in schools and 76% in nursing homes (Mendell, 1993). In order to  provide a HVAC system responding to occupant's need, realtime occupancy information is required and  it can only be provided by an active occupancy measuring system. Therefore, occupancy is a crucial  factor in improving IEQ. Another study carried out in school classrooms by Wargocki & Wyon (2007) also  shows that an improvement in room temperature from slightly too warm to neutral and an increase of  outdoor air supply rate from 11.0 to 20.3 cfm per person help improve students' academic performance  on numeric exercises and languagebased tests. This proves that the wellbeing of building occupants is  affected by IEQ.    1.2     In developed countries, buildings are the primary source of nonrenewable energy consumption,  contributing to over 40% in the U.S.A. and over 37% in the E.U. in final energy consumption (Pérez Lombard et al., 2008). With the continuously diminishing fossil fuel reserve worldwide, a reduction in  energy consumption by the built environment is crucial to resolving the global energy demand on these  natural resources.    Amongst all the sources of energy consumption in buildings, space heating and cooling alone accounted  for more than 60% of energy enduse in both residential and commercial buildings in Canada in 2005  (Natural Resources Canada, 2016). According to a study by Aiello and Nguyen (2013), HVAC demand and  energy usage is heavily impacted by occupant presence and behavior in buildings. Compared to  occupant behavior which is difficult to regulate, occupant presence can be more easily monitored as a  means to control HVAC supply in a smart building system. By implementing building control approaches  more closely related to actual building occupancy patterns and numbers, energy savings of up to one third of building's energy usage may be achieved (Aiello and Nguyen, 2013). Therefore, occupancy 
2 

 

Building energy use 

information is essential in improving building energy use.    1.3    A building has a higher performance when it is actively used. According to the case studies carried out  by Sensible Building Science (2014), measuring actual building occupancy can reveal frequency and  intensity of usage in each space. This data is useful in quantifying the extent and cost of space  underutilization. Room schedules of the underutilized space can thus be reconfigured to maximize their  usage. In addition, occupancy data is also used as a major component in post occupancy evaluation (POE)  (Barlex, 2006). It can serve as the basis for evaluating how a building works for its intended use. The  information generated from POE can be used to finetune new buildings and improve building  operations.    1.4    As pointed out by Aiello and Nguyen (2013), energy savings of up to onethird of the building's HVAC  energy use may be possible when energyconscious decisions are being made in operating buildings.  One of these decisions is a HVAC control system driven by accurate occupancy information, which is also  a possible and practical means to improve IEQ and building water use. In order to provide such a system,  a collection of finegrained information on building occupancy data is required.    Unlike coarsegrained occupancy information in which occupancy profiles and schedules are assumed  and they remain static throughout the day, finegrained occupancy information is constantly changing  over 24 hours (Zhao et al., 2015). In addition to its dynamic nature, finegrained occupancy information  is capable of providing a realtime accurate occupant count and activity, which is important for  delivering effective control of the HVAC systems to improve building performance.     Studies conducted by Sensible Building Science (2014) regarding the use of realtime occupancy data on  energyandcost savings for facilities at the University of British Columbia shows that occupancy data  can be effectively used as a tool to correlate HVAC supply with the occupancy profile to reduce total  energy use. These studies further support that building occupancy data and measurements are valuable  tools with tremendous potential in improving various building performancerelated issues. 
3 

 

Building usage 

 

Building occupancy data 

  1.5    According to Teixeira et al. (n.d.), there are multiple spatialtemporal properties that can be used to  assess finegrained occupancy information provided by various kinds of sensing systems. This research  project will focus particularly on three spatialtemporal properties: presence, count and activity (see Fig.  1), which are all crucial to the effective control of an HVAC system.      Finegrained occupancy information 

 
Fig. 1.  Finegrained occupancy information. 

  1) Presence  This property indicates if an occupant is present in the measurement location. A positive  measurement will signal "where" HVAC supply is required. It is important to note that heating and  cooling to a comfort level is needed whether there is only one individual or more occupants, but only  the setback temperature is needed when the space is empty. In regards to this property, this research  project will examine if a sensor system has to be terminalbased (Lee et al., 2006), which means that a  device has to be carried by an occupant for the detection.    2) Count  This property indicates how many occupants are in the measurement location. The number  measured will signal "how much" HVAC supply is required. This is important because ventilation rate is  dependent on the number of people present. In regards to this property, this research project will  examine if a sensor system can produce a count that can effectively reflect number of occupants  present.    3) Activity  This property indicates what kind of activities the occupants are doing in the measurement  location. The activity level measured will signal "how much" and "to what extent the conditioned  supply" from the HVAC system is required. In regards to this property, this research project will examine  if a sensor system can accurately describe the metabolic activity (Dougan and Damiano, 2004) of  occupants. 
4 

  Other distinct properties that do not directly affect the effective control of a HVAC control system will  also be examined. This includes privacy issues and cost.    1.6    This research aims to determine whether WiFi sensor technology can be employed to measure both  localized and nonlocalized occupants in a building. Localized occupants are people who stay in the same  location for a longer period of time, for example 5  30 minutes. Nonlocalized occupants are people  who only stay in the same location for a very short period of time, for example 5  10 seconds, usually  these are people moving through a space. In particular, the aim is to first find out whether it is possible  to use WiFi network connections to measure the number of occupants inside a room, for example a  lecture room, and its accuracy. Secondly, this research aims to test if the system is also able to measure  how many people pass through a particular point at a circulation space, such as a stairway or an  elevator.    These two questions are important because a high accuracy in measuring people circulation and  occupancy in buildings would allow the WiFi sensor technology to potentially replace the current  conventional detection systems. The integration of WiFi sensor technology to an existing WiFi network  not only reduces the cost needed for the installation of additional equipment and infrastructure, it can  also improve building performance as mentioned earlier.    1.7    MAC address format    In order to identify each measured WiFi enabled device, a MAC address is used. MAC address stands for  Media Access Control address. It is frequently referred to as the physical address of a computer or a  network technology device. MAC addresses are used as a network address for most IEEE 802 network  technologies, including Ethernet and WiFi. All MAC addresses are unique, which mean that no two  network technology devices have the same MAC address. Therefore, MAC addresses are used by WiFi  sensor networks as a way to measure the presence of unique network devices. 
5 

 

Research objective 

 

WiFi sensor technology 

  Each MAC address number consists of 12 digits. The first 6 digits identify the manufacturer of the device  and are referred as the Organizationally Unique Identifier (OUI). The last 6 digits are referred as the  Network Interface Controller (NIC) and they designate the serial number for that device. It is important  to note that even two smartphones of the same model from the same factory can have a different OUI  because each manufacturer can register more than one OUI under their name. The resulting MAC  address is a random mix and match of OUI and NIC numbers. Their manufacturer can be found by  looking up the OUI in the OUI listing provided by The IEEE Registration Authority (IEEE Standards  Association, n.d.).    Received signal strength (RSS)    At the same time as when a MAC address is detected by the sensor network, the received signal  strength (RSS) associated with the detection of the WiFi device is also recorded. RSS, sometimes  referred to as RSSI (Received signal strength indicator), measures the power present in a radio signal  received by a sensor. The RSS values are measured in dBm and have typical negative values ranging  between 0 dBm (excellent signal) and 110 dBm (extremely poor signal) (Accuware, 2015). The unit dBm  is an abbreviation for the power ratio in decibels (dB) of the measured power referenced to one  milliwatt (mW). It is used in radio, microwave and fiber optic networks to define signal strength.  According to the Institute of Electrical and Electronics Engineers (IEEE), the difference between RSS and  RSSI is that RSS is an absolute number representing power levels in mW (milliwatts) while RSSI is an a  relative index only. The scale of RSSI depends on the maximum RSSI value set by the manufacturer of  each chipset. Since the RSS value decreases when the device is further away from the sensor, a distance  can be derived from the RSS value using mathematical equations (Osa et al., 2012). This derived distance  can then be used to estimate the distance between the sensor and the device. With one RSS value  measured by one sensor for one WiFi device, it is possible to estimate how far this device is from the  sensor. With three or more RSS values measured by three or more sensors for one WiFi device, it is  possible to estimate the location of the device using the triangulation of these RSS values. Using either  way, the location of the device can be approximated to reveal if the device is inside a specific  measurement area. A positive detection is counted as one occupant. With the use of MAC address and  RSS value, a WiFi sensor network can detect the presence and the approximate location of a WiFi  device. 
6 

 

7 

2.   

 

Literature review 

The literature review is divided into two sections. First, it will examine alternative occupancy detection  systems on their capabilities in providing finegrained occupancy information regarding presence, count  and activity. Second, it will review how other researchers have used WiFi networks to measure  occupancy and the use of WiFi technology on location detection.    2.1    Occupancy measurement systems can be classified into two different approaches, namely occupancy  detection and occupancy counting. In general, occupancy detection works more passively than  occupancy counting. It works as a response system that measures the presence of occupants only after  the occupants are already present in a space. On the other hand, occupant counting devices actively  measure at the moment people are egressing in and out of a space. A summary of the major occupancy  sensor detection systems is shown in Tab. 1 and are discussed below.   
Sensor  Systems    CO2  Presence  Terminal  Based  X  Count  Activity  Privacy  Issue  X  Cost  Other 

 

Occupancy measurement approaches 

 

 

 

Low 

PIR 

 

X 

X 

X 

X 

Low 

Ultrasonic 

 

X 

X 

X 

X 

Low 

Vision 

 

X 

 

 

 

High 

Audio 

 

X 

 

X 

X 

Low 

Energy 

 

X 

 

 

 

Low 

RFID tag 

 

 

 

X 

 

High 

IPS App 

 

 

 

X 

 

Low 

CO2 concentration can  be influenced by  environmental factors  PIR is susceptible to  falseOFFs    PIR is susceptible to  falseONs    Have major privacy  concern    Can count only when  sound is being made by  all occupants  Can only estimate  activity related to  metered equipment  Can only estimate  presence & count of  occupants with RFID tags  Can only estimate  presence & count of  occupants with app 

8 

PIR Counter 

 

X 

 

X 

X 

High 

WiFi 

 

 

 

X 

 

Low 

actively on  Can only estimate  presence & count by  counting occupants  going in and out  Can only estimate  presence & count of  devices with WiFi ON  

 
Tab. 1.  Summary of major occupancy sensor detection systems. 

  2.1.1      The two basic types of CO2 sensors for occupancy detection, namely photometric and photoacoustic  sensors, indirectly measure the concentration of CO2 in a space in partspermillion (ppm) (Emmerich  and Persily, 2001). Since the amount of CO2 tends to vary with the number of people present in a space.  Therefore, it is possible to estimate the number of occupants by measuring the concentration of CO2.    1) Presence  The strength of this system is that it can detect occupant presence without being terminal  based, which means there is no need for occupants to carry any devices in order to be tracked.    2) Count & 3) Activity  The system alone cannot provide accurate information regarding occupant count  or activity, since an increase in CO2 concentration can be a result of an increase in occupancy and/or an  increase in occupants' activity level. However, it is able to respond to a rise in CO2 levels by increasing  the ventilation supply. This is why CO2 systems have been a commonly used tool to control HVAC  systems and has been in use for over 20 years (Nassif, 2012).    The drawback of this system is that the CO2 level and thus the sensor accuracy can be easily affected in a  dynamic environment by external factors such as interference from other gases (e.g. water vapor), drift,  wind speed, and location of sensors (Emmerich and Persily, 2001).    Current research shows that the CO2 sensors can be used to measure occupancy quite accurately in  residential and office buildings. CO2 sensor systems can also be used to reduce energy use in buildings.  To experiment with the use of the CO2 sensor for detecting occupant presence and count, Mumma  (2004) carried out an experiment to estimate realtime occupancy by measuring the CO2 concentration  in a space, the supply air CO2 concentration, and the supply airflow rate. Occupancy was then computed 
9 

CO2 based detection systems 

using either a steady state or a transient equation. They found that, for a total occupant size of around  45 people inside a classroom facility, the estimated occupancy only varies from the actual occupancy by  two people. The estimated occupancy pattern also follows the actual pattern. It is important to note  that the occupants in this case had a similar activity rate since it is a classroom. This helps establish a  more direct and stable relationship between the CO2 concentration (ppm) and the number of occupants  for an easier calibration.    To further investigate the energy savings and comfort in an office building by the application of CO2  concentration sensor, Nassif (2012) carried out an experiment by comparing air supply based on 1)  occupancy measured by CO2 sensors and 2) assumption of full occupancy in a multizone VAV system. To  estimate occupancy in case one, a CO2 concentration sensor was installed at the air return duct and air  supply was modified based on the occupancy estimated by the sensor. And in case two, the sensor was  installed at the air supply duct to maintain the CO2 concentration at a (fixed) setpoint value based on  full occupancy at the building.     The results show that energy savings of up to 23% can be achieved depending on the location of the  rooms and the actual occupancy profile in case one. However, the author pointed out that in practice  there is difficulty in obtaining the actual occupancy in each individual zone in a multizone system  without installing a CO2 sensor in each zone at a "high and unjustified" cost. Without such accurate  occupancy data, both over or underventilation could result, thus wasting energy or causing occupant  discomfort.    Cali et al. (2015) further demonstrated that high accuracy in estimating occupancy could be achieved  under both mechanical and natural ventilation. In the experiment, an algorithm for the detection of  occupants in the indoor environment was employed in both residential and office buildings under both  types of ventilation. The results show that an accuracy of up to 95.8% was recorded for detecting  occupant presence and up to 80.6% for determining the exact number of occupants. The author pointed  out that knowledge on the status of windows and doors, and the airexchange rate were crucial in  achieving high measurement accuracy, since these parameters influence the concentration of CO2 inside  the room directly.     
10 

2.1.2     

Passive infrared (PIR) detection systems 

Passive infrared occupancy sensors are composed of a pyroelectric detector and a Fresnel lens. They  essentially detect a change in heat energy given off by objects including humans in its view (Guo et al.,  2010). The sensors are passive and they send out a signal whenever there is a change in the  temperature pattern in the sensed environment (Guo et al., 2010).    1) Presence  The strength of this system is that it can detect occupant presence without being terminal  based, as long as the occupants are within its line of sight and are in motion (Guo et al., 2010).    2) Count & 3) Activity  Since PIR sensors cannot distinguish between different amount of disturbance  triggered by different number of occupants, it cannot provide any accurate information on occupant  count or activity level. Therefore, its main drawback is that practically it can only be used to turn on and  off appliances. As a result, PIR sensors are mainly limited to occupant driven control of lighting systems  (Goyal et al., 2015).    Apart from false triggers due to nonhuman movement in the surroundings of the sensors, research by  Verein Deutscher Ingenieure (2003) shows that PIR sensors are also susceptible to falseONs due to heat  related events such as heat current given off by the HVAC system.    Current research shows that the use of PIR sensors to provide energy savings for HVAC systems is  feasible when they are applied in small occupancy areas with a proper time delay setting. Experiments  show that PIR sensors can be feasible in larger areas where advanced filter processing is applied to the  data collected by the sensors.    Despite the limitation of PIR sensors to only be able to detect occupant presence, Maniccia et al. (1999)  carried out an experiment to utilize PIR sensors to control lighting and HVAC system inside the smaller  offices within an office building. The experiment took place in 60 perimeter offices and 21 interior  personal offices in a building. Photosensors that were infraredbased were used to control both lighting  and HVAC through a building automation system. A time delay setting of 30 minutes was used. The  results show that energy savings of up to 43% could be achieved. It also found that throughout a typical  10hour workday, the offices were occupied for only around 30% of the time. This research has 
11 

supported the use of PIR sensors to effectively control HVAC system in small occupancy areas. The  author pointed out that the level of energy savings could be furthered increased by reducing the length  of time delay. However, a shorter time delay may result in more complaints from occupants whose work  is interrupted by the automatic turn off of systems such as lighting.    A recent experiment by Goyal et al. (2015) also achieved a similar result. The experiment took place in a  small office of 4.4 m x 3.8 m in a university building. An occupant number of three people was assigned  to each positive detection of occupant presence by the PIR sensor. The room was designed to have an  occupancy of two people. The number three was chosen in order to build in a safety factor in the case  the more than two people were present, but it was assumed that no more than two people would be  present most of the time. The HVAC system was then adjusted to provide a flow rate for three people  when presence was detected. Compared to the same room without PIR sensor, the results show that an  energy reduction of up to 40% can be achieved even with a more conservative safety factor of three.  This supports the potential use of PIR sensor alone to control the HVAC system. However, as the author  pointed out, this system may only be applicable to building zones with small occupancy, for example, an  office composed of many small rooms.    It is important to note that the above experiments mentioned were carried out in small areas. According  to Guo et al. (2010) and the National Lighting Product Information Program (1998), PIR sensors have  difficulty detecting small movement when the object is far away from the sensor. Most importantly, PIR  sensors require a clear line of sight in order to detect any movement. Even an open office with many  partition walls could prevent an occupant from being detected. These properties have made it difficult  to deploy PIR sensors to monitor a large space. Yokoishi et al. (2012) further pointed out that using PIR  sensors to cover a large room such as a university classroom is difficult because they are insensitive to  occupants who are motionless. Also, it is not easy to obtain full coverage even with the use of multiple  PIR sensors.    To solve this issue, Yokoishi et al. (2012 ) proposed the use of particle filtering that involves multiple  networked PIR sensor data to improve the accuracy of occupancy measurement. The experiment took  place in a room of around 6.4 m x 15.3 m using 4 PIR sensors. The results show that, with the use of a  particle filter, the occupancy measurement accuracy increases from 29.6% to 98.3% in the case involving  only one occupant with small movement in the room. In the case with an occupant going in and out the 
12 

room, the accuracy increases from 55.0% to 65.0%. In terms of energy savings, it was found that around  3.5 hours of lighting power per day could be saved by the application of the particle filter over a period  of 3 months.    2.1.3      Ultrasonic motion detectors used in commercial buildings are composed of an ultrasonic wave emitter  and a receiver. They actively emit ultrasonic sound waves and receive reflected sound energy to detect  the motion of occupants through the use of Doppler Effect (Guo et al., 2010).    1) Presence  Like PIR sensors, this system can detect occupant presence without being terminal based,  as long as motion is being made in the environment. The strength of this system over PIR sensors is that  a line of sight is not required as the reflection of ultrasonic sound waves can effectively cover all parts of  a room regardless of the shape of the space (Guo et al., 2010).    2) Count & 3) Activity  This system also shares the same drawbacks as the PIR sensors, as they cannot  provide occupant information regarding count and activity.    Additionally, ultrasonic motion detectors detect motion more effectively than PIR sensors which makes  it more vulnerable to false trigger by nonoccupant related movements in the environment (Guo et al.,  2010).    Previous research shows that the use of ultrasonic detection systems in buildings for energy savings is  feasible when they are carefully planned and commissioned with a proper time delay setting. However,  ultrasonic detection systems are rarely used for detection of occupant presence due to their  vulnerability to falseONs.    Because of their inability to measure occupant count, ultrasonic motion sensors are mostly used for  lighting control that only requires occupant information on presence. Earlier research on the  effectiveness of ultrasonic sensors also focused on energy savings from their application on lighting.  Richman et al. (1996) conducted an experiment on energy savings through the use of ultrasonic  occupancy sensors in 154 sample data periods with a total of 54,700 test hours. The experiment was 
13 

Ultrasonic detection systems 

carried out in various spaces in both offices and laboratory buildings. Lighting loggers were used to  measure how long the light was on and each logger was connected to an ultrasonic occupancy sensor.  The author pointed out that the sensor was not 100% accurate in detecting motion, especially when the  movement was very slow and the object was very small. Therefore, a time delay was applied prior to  turning off the light. The results shows that potential savings increase with a decrease in the time delay  in all types of space tested in the experiment. For a time delay setting of 10minutes, energy savings of  up to 79% and 59% were achieved in a restroom and a manager office, respectively. When the time  delay was changed from 2 minutes to 20 minutes in the manager offices, the potential savings dropped  by half from 84% to only 41%. This indicates that time delay is the key component in managing energy  savings by motion sensors such as ultrasonic sensors in lighting energy use.    Floyd et al. (1996) experimented with lighting energy savings by retrofitting occupancy sensors in one  office and two school buildings. Occupancy sensors which used either ultrasonic or PIR sensors, or a  combination of both were first installed on these buildings and monitored for 6 months. Afterwards, the  sensors were optimized by finetuning the time delay at different times of the day and of the week, and  by correcting false triggers. In one particular school building, negative energy savings were observed  both after sensor installation and after sensor optimization. It was found that falseONs and occupant  behaviors were the reasons. FalseONs due to paper printing and people momentarily stepping into a  room caused the lights to turn on and energy was further wasted due to the time delay setting. On the  other hand, occupants no longer turned off the lights when they left rooms which contributed to more  energy wastage than before. This example not only shows the drawbacks suffered by a typical motion  sensor system, but it also points out that potential energy savings through the use of motion sensors are  dependent on the room usage. As also pointed out by Richman et al. (1996), spaces such as classrooms  and storage spaces that are only temporarily used by the occupants usually have the lights turned off  when the occupants leave the room. However, in rooms such as a lunchroom or restroom which are  frequently used by every occupant, the occupants tend to leave the lights on even when no one is using  it. Energy savings potential is higher for rooms that are owned by everyone.    There is a lack of current literature that focuses on using ultrasonic technology in occupant detection. As  pointed out by Guo et al. (2010), ultrasonic detection systems inherit the drawbacks suffered from PIR  detection systems which make the use not viable in measuring occupancy. In addition to that, because  ultrasonic systems are more effective in detecting small movement without requiring a line of sight, the 
14 

resulting falseONs wasted energy especially during offbusiness hours. Therefore, the use of ultrasonic  devices as occupancy sensors has to be carefully planned and set up to provide energy savings.      2.1.4      This system makes use of image recording devices to capture occupant information based on the  changes in each image frame in a period of time.    1) Presence This system is nonterminal based since no devices need to be carried by occupants. The  system can detect occupant presence as long as they are moving.     2) Count & 3) Activity  This system can provide occupant count by identifying the human shapes on the  image. It can also estimate the level of activity by measuring how fast the images are changing.    The biggest drawback of this system is privacy. Since it is image based, the faces and actions of  occupants are being recorded. Therefore, this system has been widely used for security purposes. Also,  it requires comprehensive signal processing that involves costly equipment to produce an accurate  occupant count.    Previous research shows that the use of visionbased detection systems in measuring occupancy is  feasible with an advanced image processing system and a clear line of sight. To investigate the  effectiveness of the system in measuring occupancy, Benezeth et al. (2011) proposed an image  recording system using a static camera which was based on video analysis. The detection process first  identified the changes in the static images as foreground pixels. Then it tracked the movement of the  pixels and finally classified the isolated foreground into either human or nonhuman shapes. According  to Benezeth et al. (2011), the strength of this system is that it can provide both a fairly accurate  measurement of occupant count and level of activity in two distinctly different scenarios: meeting  rooms and hallways. By measuring the level of changes between images against a set number of time  frames, the level of activity can be deduced. The results show that it can achieve an occupant detection  rate of up to 97% in most scenarios. However, this image analysis based system has difficulty in  detecting static occupants. Occupants who have been inactive for a prolonged period of time could be  falsely recognized as part of the background which would subsequently affect later measurements when 
15 

Visionbased detection system 

the occupants move again.    In another similar experiment carried out by Liu et al. (2012), the author used video cameras to detect  occupants by identifying only their heads, instead of the whole body, as a way to further improve the  accuracy of measurements. The shape of heads was used because their elliptical shapes tended to be  fairly constant when viewed from different angles by the surveillance cameras. Body shapes tended to  change dramatically such as between standing and sitting positions, and when viewed from above or  afar. Another improvement to solve the difficulty in detecting static occupants as found by Benezeth et  al. (2011) was the use of motion analysis. Liu et al. (2012) demonstrated the use of a motion analysis  program to detect the slow movements of heads as a way to distinguish the head from other static  headlike objects such as handbags on a desk. The use of motion analysis was also shown to successfully  eliminate false detection when there was a change in lighting or contrast level, a concern in the  experiment by Benezeth et al. (2011). With less false detections, the visionbased detection system can  measure the movement of occupants more accurately. As a result, it can estimate the occupants'  activity level more correctly.    However, as pointed out by Liu et al. (2012) in his experiment which used video detectors to detect  occupants by identifying their heads, the requirement for a clear line of sight is still a main drawback in  an imagebased detection system and it can be difficult to achieve using only one camera in a room.  Therefore, this technology has not been widely used for the sole purpose of occupant detection (Aiello  and Nguyen, 2013).    2.1.5      This system makes use of microphones or audio sensors to detect noises. Like PIR sensors, this system is  passive as it only receives signals and does not emit any (Guo et al., 2010).     1) Presence  The strength of this system is that it can detect occupant presence easily as the majority of  human activities involve making noise (Uziel et al., 2013). It can also be applied conveniently as it is not  terminal based.    2) Count & 3) Activity  This system can indirectly estimate the count or activity of occupants by the 
16 

Audible sound / passive acoustic detection systems 

different level of noise detected. However, the numbers are not accurate due to the difficulty in finding  suitable audio signal descriptors to calibrate each interval in relationship to the number or activity of  occupants (Uziel et al., 2013).    Another drawback is that this system is highly susceptible to false ONs because of the variety of noise  made by nonhuman activities in the environment such as noise from vehicles on the street (Uziel et al.,  2013). Therefore, a sound detection system is usually used in combination with other sensors in  occupant detection applications (Guo et al., 2010).    Current research shows that the use of audio sound detection system alone in measuring occupancy is  limited due to the fact that it requires occupants to be actively making sound in order to produce an  accurate count. Research on audio sound detection systems mainly focus on improving estimations of  occupant count based on the sound waves received by the microphones. Uziel et al. (2013) and  (Kattanek, 2014) both experimented with a sound detection system that used an occupancy detection  algorithm to calculate the number of occupants present. Two approaches, namely acoustic localization  algorithm (ALG) and machine learning algorithms (MLG) were tested, using an array of microphones.  The ALG approach estimated an occupant number by localizing the sound source in a predefined, grid like map. The second approach (MLG) made use of a library of audio samples to estimate occupancy. It  was shown to have improved accuracy because it was able to distinguish between human and non human noise sources.    To provide an alternative to the systems proposed by Uziel et al. (2013) and Kattanek (2014), Huang et  al. (2016) proposed an occupancy estimation system that used speaker recognition and background  audio energy estimation to estimate the occupancy in a room. Their research focused on the human  speech produced from inside a room and only an insignificant amount of sound was transmitted from  other rooms. This experiment used an advanced audio signal processing program and an extensive  calibration of the experiment area that involved the geometry of the office, the location of the  microphone, and the relative locations of occupants with respect to the microphones. In the  experiment, speakers were used instead of real people. The results show varying degrees of accuracy  depending on the number of speakers. It was found that, for a speech measurement time of 5 seconds,  an accuracy of 8598% was achieved for 5, 40 and 80 speakers. The accuracy dropped to 6075% when  there were only 10 and 20 speakers. But overall, accuracy increased to over 90% when the speech 
17 

measurement time was increased to 15 seconds.    However, these studies are based on the assumption that occupants are actively making sound  simultaneously which is not realistic in a real life scenario. This renders the use of audio sensors alone  for occupancy measurement impractical. But their ability to measure sound shows great potential to be  used in combination with other types of sensors to improve the detection of occupant presence. In an  effort to solve the socalled "silent" presence, occupancy sensors were developed by Fernández et al.  (2012), combining audio and ultrasonic sensors. With the use of an audio sensor, "still" presence could  also be detected. The experiment took place in an office room with a ceilingmounted configuration.  Results showed that it was able to achieve zero false alarms with the use of the fusion sensors and a  careful calibration of the system. The research also showed that the probability of occupant detection  increased from within 35  70% to 88  96% when audio sensors were fused to ultrasonic sensors and the  probability of false alarms remained lower than 1%. However, a person who is silent and still would not  be detected by the fusion sensors.    2.1.6      This system makes use of metered equipment in detecting occupancy. By measuring the number of  equipment being used, an occupant count can be produced.    1) Presence  This system can detect occupant presence without being terminal based as the occupant  does not have to carry a device.    2) Count & 3) Activity  In an environment where most activities involve the use of equipment that can  be metered, this system can produce a fairly accurate occupant count. Since each piece of equipment is  associated with a certain use, occupant activity can also be identified.    This system still presents issues of privacy. For example, each computer and work desk is usually  associated with a particular occupant in an office setting.    Current research shows that the use of energyrelated activities based detection systems are limited to  officeuse environment where most activities involve equipment that can be metered. Also, the system 
18 

Energyrelated activities based detection systems 

requires dual technologies that are crucial for achieving the recorded high accuracy rates. With metered  devices alone, any office occupants who are not actively using any equipment may not be detected     Research on energyrelated activities based detection systems started as a response to the deficiency  experienced by PIR, ultrasonic, and CO2 sensors. Also, these commonly used sensors are required in  large numbers and involve installation costs. Patel et al. (2007) first proposed the use of a single plugin  sensor at any electrical outlet in a home to detect occupant presence by measuring a variety of electrical  events throughout the home. It was based on the fact that an electrical load was produced every time a  switch is turned on or off, and when the electrical equipment was operating. By carefully calibrating the  duration and magnitude of the transient noise produced by these actions, the presence of an occupant  was assumed. The results showed that up to 85  90% of occupant actions were detected.    However, this experiment presents some major defects for measuring occupancy. First, an operating  electrical device, such as a fan, is not necessarily associated with an occupant presence. Secondly, as  mentioned by the author, the heavy usage of mobile electronic devices such as smartphones could not  be detected at all by this system. In addition, there are many other activities that take place in a home  that do not involve any electrical equipment, such as reading a book during the daytime or sleeping.  Therefore, this technology may not even be applicable to a "homelike" environment.     To further improve the accuracy and applicability of the above system, Milenkovic and Amft (2013)  proposed a system mainly composed of perdesk passive infrared (PIR) sensors and power plug meters  for various equipment and appliances specifically used in office buildings. By measuring the change in  energy consumption levels of these devices, particularly a change in the device status from idle to  active, occupant detection was produced. PIR sensors were added to detect office work that did not  involve any metered equipment. An office setting was chosen for the research because most office work  involves electrical equipment that can be metered. This more refined experiment is also able to produce  an occupant count in an office as each person at work is usually assigned an office station. By detecting  how many stations are being actively used, the number of occupants can be obtained.    This research shows that the system is capable of producing a highly accurate measurement of occupant  count and the level of desk activities in office building types. It also found that the sensors achieve an  occupant count accuracy of 87% in singleperson office rooms and 78% in multiperson office rooms. It 
19 

can also distinguish between computer work and desk work at an accuracy of 99%. Although the level of  accuracy is influenced by the amount of training data available, only 30  50 training hours are required  for robust recognition.    There is other research on detection systems based on building activities and the use of appliances that  are also partly associated with energyrelated activities. This further shows the possibility of how this  system can be applied in combination with other sensor systems. Froehlich et al. (2009) proposed a  detection system which monitored the use of water that involved appliances such as dishwashers. Patel  et al (2008) proposed another detection system which measured differential pressure in HVAC systems  that involved appliances such as fans and air conditioning units. With the inclusion of a wider variety of  activities and other sensor systems, energyrelated detection systems can be more applicable to other  building types rather than solely in offices.    2.1.7      This system makes use of active radio frequency identification (RFID) tags carried by occupants and a  network of physical RFID sensors (readers) installed on site. The RSS (received signal strength) given out  by the tags are received by the surrounding sensors. By mapping out the relationship between the RSS  and the distance of the tag from each sensor, the location of the tag can be determined    1) Presence & 2) Count  The strength of the system is that it can provide occupant information on  presence and count at an average of roomlevel accuracy when a sufficient density of sensors is  employed (Weekly et al., 2014).    3) Activity  This system cannot provide any information on activity as the tag does not transmit any  other information.    Its strength over other terminalbased system is that, unlike mobile devices, the occupant does not need  to interact with or "turn on" the tags in order to be detected. All an occupant needs to do is carry a tag  that can easily fit into their pockets. The main drawback is that this system is terminal based which  means only occupants actively carrying a tag can be detected. The assignment of tags to each particular  user also raises concerns about privacy. In addition, this system cannot provide information on occupant 
20 

RFID tags detection systems 

activity.     Current research shows that the use of RFID tag detection systems can provide very high accuracy on  occupant presence and count. This technology has been widely used in building types such as hospitals,  offices and warehouses that need to keep track of the occupants and/or goods. However, the  infrastructural cost is high due to the need for expensive readers and a highdensity employment to  achieve such high accuracy. Also, the requirement of a tag restricts detection to only "closed"  environments such as offices with known occupants (Zhao et al., 2015). Khoury and Kamat (2009)  carried out an experiment with the use of ultrawideband (UWB) RFID tags. In this experiment, 4  receivers were positioned around the perimeter of a mazelike partition wall setting inside a room. A  UWB RFID tag was carried by a robot that was moving around the maze. The results show that a real time position accuracy of up to 50 cm was achieved. However, such high accuracy came with a high cost.  The 4 receivers and 1 processing hub with the associated accessories cost approximately USD $15,000.    A similarly high level of accuracy was also achieved in an experiment carried out by Weekly et al. (2014)  in an office area of 16.5 m × 13.2 m using a grid of 24 sensors embedded inside the false ceiling. The  sensors were arranged in a 6 x 4 configuration with spacing of 3.3 m and 4.4 m. RFID tags placed at  different locations were then detected by the sensors. The results show that an average of roomlevel  accuracy of 2  3 m was achieved. The author pointed out that a higher accuracy could be further  achieved if the 4.4 m spacing was decreased to 3 m.    The high level of realtime location accuracy makes it possible to track occupant locations in addition to  an accurate count. Rahman et al. (2012) carried out an experiment using RFID tags to track occupant  movements in a highrise building for evacuation planning. In the experiment, seven occupants were  each given a longrange RFID tag. Their locations in a 3storey building were tracked by the readers  strategically positioned to cover the entire floor area. The results show that the movement of all  occupants was correctly shown on the dashboard using the BEMS software. This further supports the  use of RFID technology in applications that require closeto 100% location accuracy.    2.1.8      Currently there is no scholarly literature on the review of applications of mobile apps for occupancy 
21 

Indoor positioning system (IPS) based mobile application (app) systems 

detection. This review is mainly based on the product literature by IndoorAtlas, which is one of the  leading providers of IPS based mobile application (app) systems for commercial and retail use. This  system makes use of the IPSbased application installed on mobile devices. When an occupant turns on  their app on their mobile device inside a location, such as a store that is precalibrated by the app, the  occupant's location can then be detected by the system.    1) Presence & 2) Count This system can detect occupant presence whenever the apps are turned on  from a mobile device (IndoorAtlas, n.d.). However, occupants who do not have the apps installed on  their mobile devices or do not have them running continuously will not be detected. Also if they leave  their device in one space and go to another space, they will not be measured either. Therefore, an  accurate count is not possible.     3) Activity  No occupant activity is measured as the system only detects the active status of the app.    This system is entirely terminal based. Each occupant is usually required to input personal information  when they sign up for the app. Therefore, privacy is a major issue as the device (terminal) is being  tracked constantly by the application when the app is on (Zhao, 2015).    While there is no current research on the actual performance of these app based detection systems,  their benefits and drawbacks are revealed in different product literature. According to IndoorAtlas (n.d.)  and Accuware Indoor Navigation, the location accuracy of the system is largely dependent on the  density of available WiFi or Beacon signals. They mention that a high location accuracy of 1  2 m can be  achieved. The roomlevel accuracy helps determine which room an occupant is present.    Compared with other detection systems where sensors are physically installed in each location, the  particular strength of the app system is that it requires less physical infrastructural devices. The major  platforms in this system make use of WiFi, beacons or a cloudbased control network which are  relatively less costly and easier to install (IndoorAtlas, n.d.).    However, this system has some major drawbacks. First, occupancy detection is passive because it  depends on whether the occupants choose to turn on the app. In addition, the mobile app has to be  continuously connected to the internet even after being activated (turned on) by the occupant in order 
22 

to be continuously detected (IndoorAtlas, n.d.). It is unlikely that occupants will have the app on during  their entire duration of stay in a retail location. Also, tracking of these devices is only possible when the  app is kept on the foreground for iOS devices. As for Android devices, the app can be shut off by the OS  when resources are needed for other applications (IndoorAtlas, n.d.). This further makes it difficult to  keep track of occupant presence and count during their stay. Because of its passive and occupantdriven  nature, this system currently is being used primarily for wayfinding and searching for pointofinterest,  as promoted on the IndoorAtlas website.    2.1.9      Unlike abovementioned occupancy detection systems, the PIR people counter is an occupancy counting  system. It makes use of pyroelectric infrared (PIR) sensors that can detect the movement of people and  their direction of travel when they interact with the sensor. They are usually installed at the overhead  position of each door or egress location of the measured space to actively detect infrared energy  bouncing off from the heads of the occupants walking underneath them (Infodev, 2014 & Irisys, 2015).  By counting how many people pass through an entrance in each direction, the system can count how  many people are inside a building.     1) Presence & 2) Count  This system can detect the occupant presence and count the occupant traffic  going in and out of each room. The level of accuracy is usually influenced by the number of sensors and  the extent of area coverage. An extremely accurate occupant number can be obtained when the sensors  are closely deployed. However, they tend to measure people passing by a particular location which  makes them less useful in counting the number of people in a room.    3) Activity  No occupant activity is measured as the system only counts.    The strength of this system is that it is nonterminal based and it can very accurately measure occupant  presence and count    Substantial research have been carried out on the use of PIR sensors with both digital and analog  outputs in detecting the movement and direction of people and the associated count in each direction.  This includes research by Hashimoto et al. (1997), Wahl et al. (2012) and Zappi et al. (2007). The results 
23 

(Overhead) PIR people counter 

show consistently high accuracy in both outputs.    For PIR digital outputs, Hashimoto et al. (1997) experimented with an overhead sensor module of this  sensing system consisting of a 1dimensional 8element detector array and an IRtransparent lens to  measure occupancy at a 200 cm width x 270 cm height door. A pattern recognition algorithm was  employed to analyze the number of people walking by and their directions of travel. The results show an  accuracy of 99% in detecting movement and 95% in detecting number of people walking by. Wahl et al.  (2012) experimented with a people counting system on several reallife, singleand multipleoccupancy  offices using pairs of PIR sensors and algorithms to analyze sensor data. The results show an error rate  of less than 1% in detecting people count using the hardware prototype sensor they developed.    For PIR analog outputs, Zappi et al. (2007) experimented with an array of lowcost pyroelectric sensors  with a wireless network based platform to measure the movement and directions of a group of 2  3  people walking in different configurations. These configurations included people walking in line and side  by side in both frontward and backward directions. The results show a 100% accuracy in measuring  movement direction. In measuring the number of people walking by, the accuracy dropped from 89%  for people walking in line to 75% for people walking side by side. Other similar experiments carried out  by Zappi et al. (2008, 2010) also showed 100% accuracy in detecting movement direction and 83% ­ 95%  accuracy in detecting distance intervals. A more recent study by Yun and Song (2014) using two  orthogonally aligned PIR sensors with modified lenses to measure the movement and directions of  people also showed a high accuracy of 98% correct detection. In addition to their high accuracy, these  sensors also come precalibrated and thus onsite adjustment is not required (Infodev, 2014 & Irisys,  2015). They are proven technologies that have been heavily used by occupancysensitive industries such  as shopping malls and casinos.    The major drawback of this system is its high infrastructure and maintenance cost. At the time of this  writing, each overhead PIR sensor costs around $500  $1000, with the less expensive ones requiring a  higher density of deployment. This cost does not include installation, central server (gateway), cost for  wiring power and data cables to each sensor and a subscription for system support. Because of the  complexity of this system, it requires substantial planning and design before its implementation. In  addition, this system cannot provide occupant information regarding activity.    
24 

2.2   

 

WiFi sensor network detection systems 

This system makes use of WiFi sensor nodes or a wireless network to detect the presence of WiFi  enabled devices, such as a smartphone or a laptop, in a space by measuring the wireless activeness  carried out on these devices. The number of occupants can then be estimated by counting how many  WiFi devices are present.    1) Presence & 2) Count  The system is able to detect presence and thus count each WiFi device when  the device is actively transmitting wireless signals. However, occupant count may only be obtained if  each occupant only has one WiFi device.    3) Activity  Since the system only detects WiFi enabled devices, no occupant activity can be revealed by  system.    Privacy issue is a big concern in this system as each WiFi device is usually associated with one particular  occupant. By monitoring the device, the location of the occupant can be tracked.    While there is considerable research on the use of WiFi sensor networks to measure occupancyrelated  parameters inside a building, very few actually use WiFi network to measure occupancy directly. One  particular study by Khoury and Kamat (2008) investigated the tracking and localization of indoor  occupants using a wireless local area network (WLAN), an indoor global position system (IGPS) and a  UWB RFID system. For the wireless network system, a WiFi enabled device was carried around the two  testing areas, namely a rectangular room and a mazelike partition wall arrangement in the other room.  By matching the received signal strengths (RSS) collected by the WiFi access points to a calibrated   RSS fingerprint of the location, the results show that a location accuracy of 1.5  2 m was achieved.  Although the wireless system has a lower accuracy than IGPS (1  2m) and RFID (0  0.5 m), its advantage  is that it does not require a clear line of sight and the cost is much lower than the other two systems.  The wireless network uses radio waves that can propagate through walls and obstructions, unlike  infrared, ultrasonic, and sound detection systems that are constrained by the enclosure of a room.  Another major strength is the overlapping coverage by the WiFi networks that allow continuous  tracking of the device when it moves from one area to another. It would not be possible with the use of  a PIR sensor. Therefore, this technology is suitable for measurements such as occupancy detection that 
25 

does not require precise location accuracy as long as it can achieve roomlevel accuracy.    Recent research by Ali et al. (2016), Abraham and Li (2014), Ferdoush and Li (2014) all made use of a  mesh WiFi network that further improved the connectivity between the sensors and reduced the  number of Ethernet cable connections. Instead of communicating to one base station, the sensor nodes  could transmit signals with neighboring nodes (Jang et al. 2008). This added flexibility allowed ease of  deployment for the sensors in terms of installation locations and expansion of the sensor area.    As mentioned by Khoury and Kamat (2008), the major disadvantage of such a system is the need for a  sitespecific calibration that is not needed for a RFID tag detection system. For a floor plan that has  many different rooms and configurations, this can be a labor and time consuming process. There are  also other difficulties in applying the WiFi sensor network to a specific occupancy. Vebree et al. (2013)  experimented with a commercial grade product (Libelium Meshlium Xtreme monitor) to measure the  number of WiFi enabled devices in its range as a way to track how many visitors are in a specific room  inside a museum. The Xtreme monitor acted as a WiFi sensor and measured the RSS associated with  each WiFi device. Since RSS is inversely proportional to distance, by measuring the RSS of a device it is  possible to find out how far away the device is from the sensor.    This experiment revealed several drawbacks of the WiFi detection system. First it is found that a device  that is asleep is harder to be scanned as they send out a WiFi signals (probe requests) at a much larger  time interval. Second, for nonlocalized visitors, the long interval between two successful scans was  found to be incapable of measuring their devices before these visitors moved to another room. Third,  the results show that the Xtreme monitor had to be constantly updated in order to be able to scan  newer devices.    In an effort to further reduce installation costs from adding a sensor system, Christensen et al. (2014)  experimented with the use of existing WiFi infrastructure to estimate building occupancy. The research  used the monitoring of IP and MAC addresses in existing WiFi access points and routers to estimate  occupancy. The results show that the estimated occupancy pattern is close to the actual occupancy  pattern observed. However, there is difficulty in obtaining an accurate occupant count. It was shown  that there is inconsistency in relating the number of the occupants to the number of measured WiFi  devices. The authors pointed out that some occupants could have several devices at one time, but this 
26 

number is not constant every day. The experiment also confirmed the drawbacks experienced by the  Xtreme scanner. To name a few, the unstable WiFi connectivity of smartphones to the network made  them fail to be detected. Also, a device on one floor could have connected to the access point on  another floor with a stronger signal, causing a false presence on that floor. These variables made it  difficult to simply extract data from the existing WiFi network for occupancy estimation.    In terms of strength, Khoury and Kamat (2008), Christensen et al. (2014) and Vebree et al. (2013) show  that the main advantage of a WiFi sensor network is that occupants do not need to install or carry any  applications in order to be detected by the WiFi monitors, assuming each occupant has a mobile device  like a smartphone and has the WiFi button on. There will actually be no additional infrastructural cost if  the existing WiFi network can be doubled as the sensor system. Also, because of the WiFi nature of the  detection system, any data collected can be accessed instantly online so realtime occupancy  information can be obtained.    2.3    The key in measuring building occupancy using a WiFi sensor network is to locate the WiFi devices  being used by the occupants. According to Osa et al. (2012) and Verbree et al. (2013), there are two  different ways in locating a user (WiFi device). The first one is to locate a user by estimating the  distance between the user and the sensor station. This is achieved by using a RSSderived distance  estimate. It is the distance calculated using the signal strength received from the device by the sensor (El  Amine et al., 2014). The second way is to estimate the exact location of the user. This is achieved by  using triangulation and database correlation (fingerprinting) (Osa et al., 2012). In both methods,  received signal strength (RSS) is used as a tool to measure the location of the user.     Triangulation    The device location is calculated using estimation of distances or angles from three or more sensor  locations. These estimated distances are converted from the received signal strength and/or  propagation time measured from the sensor locations (Osa et al., 2012). Propagation time refers to the  time of arrival of the signal received in different sensors or the difference of this time of arrival between  different sensors. Due to the influence of noise level in the RSS measured, the propagation time is used 
27 

 

WiFi technology for location detection 

to improve the precision of location estimation (Kaaranen et al., 2005). The limitation caused by high  noise level is explained later in this section.    Database correlation (Fingerprinting)    As for database correlation, the RSS values from a device collected by the sensor points are analyzed  against a database of calibrated values for that specific area to provide the twodimensional coordinates  of the device. It is different than an active triangulation process as the RSS analysis used in the database  correlation was more about matching the existing fingerprint of a location (Khoury and Kamat, 2008).  That is why this method is also referred to as fingerprinting. The set of calibrated values for a specific  area is referred to as a radio map and it is prepared during the offline phase using conventional drive  testing equipment or accurate prediction tools (Osa et al., 2012). During the online phase, the RSS  values measured from a device is then compared to the radio map and a location with the highest  probability is selected (Vebree et al., 2013).    RSS noise    The abovementioned location estimation methods primarily depend on RSS values. Although RSS can be  easily provided by sensor stations in a costeffective way, there is inherent deficiency in the  measurement RSS values. First, there is a lack of precision in RSS values. The RSS measured from two  devices at the same position could fluctuate up to 10 dBm (Osa et al., 2012). Second, RSS is affected by  environmental factors such as scattering and reflection of electromagnetic waves (Hashemi, 1993).  Obstacles can also affect RSS measured. These obstacles include the number of walls and other  obstructions, and the presence of water in proximity of the sensor (Accuware, 2015). In addition to  obstacles, the number of people also affects the RSS. According to Bahl et al. (2000), RSS can be reduced  by 3  5 dBm by the body of a person. Ground effects and echoes also affect the RSS (El Amine, 2014).  These interferences from the environment has consequently created a high level of noise in the RSS  measured (Mardini et al., 2014). The noise and interference could cause a high degree of uncertainty  that impacts localization mechanisms that are based on fingerprinting (Osa et al., 2012).        
28 

RSS noise reduction    Lotcher et al. (2005) pointed out that, even with the influence from the noise in the surrounding  environment, there is still a strong correlation between the distance of a sensor station and RSS  measured. As a result, considerable research has been carried out on filtering the noise in improving the  accuracy of the RSSderived distance for the positioning system. El Amine et al. (2014) developed three  algorithms based on the RSSI fingerprinting as a way to reduce the noise associated with the RSSI values.  These algorithms work similarly to the Kalman filter, which is a statistical tool that can reduce noise  collected in data to produce more precise estimates. The algorithms were applied on an indoor wireless  localization application using XBee wireless sensors. The results show that the resulting localization  application is able to locate a person inside a building with a location accuracy of 80 cm and an efficiency  of 90%. Another research by Mardini et al. (2014) experimented to improve accuracy of RSSIbased  localization techniques in ZigBee Networks using a twoState Markov model with moving average to  detect unpredictable RSSI values that negatively affect the location estimation. The results show that  the location inaccuracy was significantly reduced from 11.7 m to 3 m using the proposed model.    Unlike other research that focused on filtering out the RSS noise to calculate a device's current  coordinates, Locher et al. (2015) experimented with an approach that specifically operated with the high  fluctuation in the RSS to obtain the logical position of the device. Logical location refers to the general  location of the device, for example a room, a floor or area. During the experiment, measurements were  carried out at each logical location and the measured RSS patterns were recorded. A data map was  created using this information and was then used to infer the most probable logical location of the  device. The experiment shows that RSS values follow a normal distribution in a longer time period.  Therefore, the accuracy of the data map created can be increased to a confidence level when  measurements are collected for a long period of time. Overall, the experiment results show that a high  logical location accuracy can be achieved in the proposed methodology.    To conclude, previous research suggests that WiFi technology for location detection can provide a high  level of logical location accuracy. This level of accuracy can be further increased to obtain coordinates of  the device when RSS filter is applied to reduce the noise and interference from the environment.     
29 

2.4   

 

Summary of major occupancy sensor detection systems 

Overall, for singletechnology applications, RFID tags and PIR counter detection systems have the  highest accuracy in producing occupant presence and count. They are proven technologies which are  widely used in commercial and industrial applications. However, they are the most expensive in terms of  infrastructure costs. For dualtechnology applications, PIR sensors work particularly well when coupled  with other detection systems that can detect "still" presence which PIR sensors cannot detect. These  systems include energyrelated activities detection systems that can also provide occupant count, and  audio sensor systems that can detect "still" occupants and occupants not in the clear line of sight.  However, the two technologies have to be used at the same time.    As for ultrasonic detection systems, their high sensitivity makes them unsuitable to be used as a stand alone system. They are mainly used as substitutes for PIR sensors in areas where a clear line of sight  cannot be provided for the PIR sensors. For direct indoor environmental quality monitoring that can  affect occupant comfort, CO2 detection systems are the most effective as it measures the CO2  concentration inside the sensed area, which other systems cannot do. However, CO2 concentration can  be affected by indoor environment such as windows or doors that are opened to the exterior or another  space. Also, detection systems using measurement of indoor environmental data such as temperature  and relative humidity do not directly indicate the presence of occupants. An increasing temperature  may not be due to an increase in occupancy.     While visionbased detection systems can provide high accuracy in terms of presence and count, they  pose a major concern in privacy as both location and activities are being recorded. As a result, their use  is usually limited to security systems in places such as airports and casinos. Passive terminalbased  detection systems such as mobile appbased systems that rely on the occupants' interaction with their  devices for successful detection tend to produce a lower accuracy in terms of occupant count. They also  require an application to be installed and turned on in order for an occupant to be detected.    Compared to major occupancy detection systems, WiFi sensor networks have the advantage of being  lowcost and they require minimal infrastructural changes to support their installation. In most cases,  only power and Internet connections are required for the WiFi sensor networks. Also, WiFi sensor  networks do not require a clear line of sight. They are not affected by movement and noise in the 
30 

surroundings. They are also not susceptible to changes in indoor environment such as temperature or  relative humidity. Regarding privacy, unlike visionbased detection systems that record activities and  images of an occupant, WiFi sensor networks only record the MAC addresses of the devices detected.  Also, they do not require the installation of a specific mobile application for a device to be detected. As  long as the WiFi radio button is turned on, a device using WiFi activity can potentially be detected.  These advantages of WiFi sensor networks over other detection systems support their use to measure  occupancy in buildings.   

31 

3.   

 

WiFi sensor network experiment methodology 

Since WiFi sensor networks record the instances when each WiFi device is transmitting wireless signals  to the WiFi access points, this research proposes to measure how accurately such a network can  measure building occupant presence and count. The original intention of this project was to obtain the  data recorded by tapping into the WiFi network of a building at Ryerson University and using this data  to establish occupancy. However, due to technical difficulties and different constraints in obtaining such  data from the university, an independent WiFi sensor network was instead installed for this research  project.    There are commercial technologies available that can detect the presence of building occupants.  However, not many of them are capable of providing finegrained occupancy information, especially  occupant count as required to control HVAC systems (Zhao et al., 2015). This is because many of these  technologies, such as sound detection sensors, are not terminalbased and they tend to measure  occupancy by detecting the actions of the occupants instead of the occupants themselves. In a terminal based detection system, carrying a device is needed in order to be detected, and this helps establish a  direct relationship between the number of devices present and the number of people present.    A WiFi sensor network detection system that is entirely terminalbased is proposed for this research  project because of its potential ability in overcoming the difficulty to provide a realtime occupancy  count. There are not many specific studies detailing the experimental use of how a WiFi sensor network  can be set up for such a purpose. According to the case study carried out on a mixeduse building at the  University of British Columbia by Sensible Building Science, it is estimated that a 7% reduction in annual  energy usage can be achieved by extracting occupancy counts from the data on the existing WiFi  infrastructure and feeding it to the building automation system (BAS) to control ventilation. This shows  that energy reduction through the use of a WiFi network is possible. Also, WiFi sensor networks have  been increasingly used in combination with different types of sensors in collecting indoor environmental  data, such as temperature and CO2 concentration, because of its low cost and high scalability (Li and  Ferdoush, 2014). These features also support the proposed use of a WiFi network in measuring  occupancy.     
32 

3.1   

 

Selection of WiFi sensors 

Three different WiFi sensor detection systems were considered at the beginning of this research. The  first one is a lowcost buildityourself WiFi sensor, using a Raspberry Pi (RPi) computer and two WiFi  dongles. A program named Kismet would be installed in the RPi computer. The device, as a result, could  use one WiFi dongle to detect nearby WiFi enabled devices and use the second WiFi dongle to  transmit the collected data to the server to be downloaded later. However, the device constructed was  not able to function due to potential compatibility issues between the operating system on the RPi  computer, the Kismet software, and the WiFi dongles. Therefore, due to time limitations it was not  possible to experiment with the RPi WiFi sensor.    Another WiFi detection sensor system considered was the Meshlium Scanner AP. This is a commercial grade sensor that can detect any device that works with WiFi or Bluetooth interfaces within 15  30 m  depending on the line of sight (Libelium, n.d.). According to the manufacturer's literature, this scanner is  weatherproof and can be even placed outdoors. Its most recent version has an extremely short  scanning rate of 1 second, which means that more devices with less WiFi activity can be detected under  this setting. The biggest drawback of this scanner is its high cost. One Meshlium Scanner AP costs  around CAN $1,450 (1,000). In order to measure two rooms at the same time, at least two scanners  would be required depending on the sizes of the rooms. Therefore, it is an expensive piece of  equipment to deploy on a large scale to simply measure occupancy. Furthermore, since it has to be  imported from Europe, there is no technical support in North America should anything happen to this  equipment. As promoted, it is used more for measuring the traffic flow of people and vehicles on streets.  Therefore, it is not used in this research.    The third system considered and selected is a WiFi sensor network making use of Open Mesh sensor  nodes (Accuware, 2015). Unlike Meshlium scanners, each node costs only CAN $100 (US $75), which  makes it more financially economical to be deployed at a large scale to measure occupancy in different  rooms simultaneously. Like Meshlium scanners, they can form a mesh network that allows for flexible  configuration of the nodes (see Chapter 3.3 Data acquisition) and they are also capable of becoming Wi Fi access points. Open Mesh nodes are also simpler pieces of equipment that can be fixed easier by  amateurs. However, unlike the Meshlium scanner, Open Mesh nodes cannot directly provide the  collected data in a sorted and readytoberead format. Therefore, a subscription was made to a San 
33 

Diego based company called Accuware for its cloudbased server and application program interface (see  Appendix A) in order to monitor the nodes system online and to receive the processed data collected by  the nodes. The subscription fee is also around CAN $100 (US $75) per node per month. With the  subscription, Accuware provides an analytics dashboard service (see Appendix B) that can show real time and historical occupants (referred as "visitors" in Accuware dashboards) data. In addition, the  Accuware Indoor Triangulation System (I.T.S.) Density Maps dashboard, though still under development,  can provide some insight regarding the density of occupants for an entire day in 1hour increments (see  Fig. 2). These analytic tools may help provide useful information regarding the performance of the WiFi  sensor system.   

 
Fig. 2.  Accuware Indoor Triangulation System (I.T.S.) Density Maps dashboard. 

  3.2    A WiFi sensor network was set up using Open Mesh nodes in order to measure the number of unique  WiFi devices for two different types of occupants, namely localized and nonlocalized occupants, on the  second floor (main floor) in the Architecture Building at Ryerson University (See Fig. 3 & 4). Two  different node configurations, namely perimeter node configuration (configuration A) and central node 
34 

 

Experiment description 

configuration (configuration B), were tested. For the measurement of localized occupants, the  experiment aimed to find out how the sensor network would perform in detecting devices that would  be more actively used and connected to WiFi in the same location for a longer time period. This  measurement involved a variety of mobile devices including laptops, smartphones and tablet computers.  For the measurement of nonlocalized occupants in circulation space, the experiment aimed to examine  if the sensor system detected devices that were mostly in sleeping mode and were only in the  measurement range for a short time. Unlike the measurement of localized occupants, this primarily  involved detecting smartphone devices which most likely were carried around the building by occupants.  The results produced were compared with a physical count to check the accuracy of the system.    

 
Fig. 3 (left).  Fig. 4 (right).          Ryerson University Architecture Building's second floor.  Second floor plan of the Architecture Building. (1) Room ARC 200BD: Master of Building Science   (MBSc) Studio. (2) Room ARC 202: Lecture room (Pit). (3) Room ARC 200 GF: Master of     Architecture (MArch) Studio. (4) Circulation area. (5) Second floor stairway. 

  Experiment Layout    The experiment was carried out in two phases. In phase 1, configurations A & B were tested on localized  occupants in two studios (MBSc Studio and MArch Studio) and a lecture room. In phase 2, configuration  B was tested on nonlocalized occupants in the circulation area and the stairway between second and  third floor. Lastly, a lowcost people counter was constructed using a Raspberry Pi computer and a  passive infrared motion sensor to compare its occupant measurement accuracy with the WiFi network.  The intention was to primarily use the people counter to measure occupancy at locations such as  stairways and hallways that involve constantlymoving occupants.   
35 

Physical count    For the measurement of localized occupants, a physical count was carried out for time periods of several  hours in locationbased experiments to measure how many unique persons are present in each one hour time period. For the measurement of nonlocalized occupants, time periods of 10 minutes and 30  minutes were used for stairway and circulation space respectively. Only unique occupants at each time  period were counted as the sensor network only registers the unique MAC address from each device.  For example, if an occupant walks by the stairway three times in a measurement period of ten minutes,  this occupant would only be counted as one unique occupant. The physical count was carried out using  visual observation.    Mean multiplier (Mean detection ratio)    Since each occupant may have more than one WiFi device, such as a laptop as well as a smartphone,  connected to the WiFi system at any time, it would be incorrect to assume that the number of detected  MAC addresses is exactly equal to the number of occupants. Therefore, a mean multiplier using the  division of the number of MAC detections divided by the number of unique occupants counted was used  to estimate proportionally how many devices the WiFi sensor system detected when compared to  actual number of unique occupants present within each time period.     A multiplier ( M ) at each 1hour time period was used to estimate how many WiFi devices were carried  by each unique occupant in each time period. The mean of the multipliers on each day ( M mean ) was  used to estimate the extent of variation in the number of WiFi devices per person throughout the day.  The average of the mean multipliers ( Average M mean) measured at each experiment was used to  compare the variation in the number of WiFi devices per person on different measurement days. By  analyzing these multipliers, it is possible to evaluate the consistency and accuracy of the experimental  WiFi sensor network. The multiplier equations are shown below:    M = number of MAC detections / number of unique people at each 1hour time period    (1) 

M mean = sum of all multipliers at each 1hour time period on each day / number of multipliers  (2)  Average M mean = sum of all mean multipliers on each day / number of mean multipliers     
36 

(3) 

Accuware Analytics Dashboard    In addition to the CSV files provided by the Accuware server, the Accuware Analytics Dashboard  provides both realtime and historical data on the number of "unique visitors" and "inplace visitors"  detected by each node in a selected time period (number of days). This detection system is based on the  detection radius set by inputting a specific RSS cutoff value under the Settings toolbar. The dashboard  shows how many devices are inside the detection radius. This measuring mechanism theoretically works  the same way as a central node configuration. One major drawback of this analytical tool is that only  one RSS cutoff value can be set prior to the actual detection. Therefore, it is not possible to test the  data with different RSS cutoff values after the data is collected. In this research project, the  performance of this analytic tool was analyzed using a central node configuration in Phase 1.    3.3    WiFi sensor nodes are the main hardware of the proposed wireless sensor network. A sensor node is a  device that is capable of processing and gathering sensory information, and communicating with other  connected nodes in a sensor network. Nodes of "Model# OM2P  External Antenna, Long range" from  Open Mesh OM Series were used. Fig. 5 & 6 show images of the node. The node consists of a processor,  a radio and a longrange external antenna. For power options, each node has one lowvoltage power  supply injector and one Ethernet port for Power over Ethernet (PoE) injector. For internet connection,  each node is equipped with one dedicated Ethernet port.    Data acquisition 

 
Fig. 5 (left).  Fig. 6 (right).      Front view of Open Mesh sensor node.  Back view of Open Mesh sensor node. The black wire is power cable and the blue wire is     Ethernet cable. 

 

37 

The Open Mesh nodes (OM2P) are small radio transmitters that function in the same way as a wireless  router. The processor processes the analog signal received by the antenna and converts the raw data  into digital form and then transmits it to the gateway node through the radio transmitter. The nodes are  programmed to communicate with each other through hopping wirelessly from one node to another in  the shortest route. This process is known as dynamic routing.    In a WiFi sensor (mesh) network, only one node in a group of six to ten nodes needs to be physically  wired to a network connection like a DSL Internet modem. The number of wired nodes required  depends on the desired location accuracy of the WiFi detection. The wired node (gateway) shares its  Internet connection wirelessly with all other nodes (repeater) in its surroundings, which share the  connection wirelessly with the nodes closest to them. The nodes then form a sensor network that  detects WiFienabled devices in the vicinity (Jang et al., 2008). The main advantage of a mesh network  is that it is selfhealing, i.e. the network can still operate when some nodes are down because the  operating nodes can still communicate with the next closest node.    In the wireless sensor network, all nodes constantly detect the MAC addresses and the associated  received signal strengths (RSS) of WiFi devices at a scanning rate of every 5 seconds. This scanning rate  is fixed by Accuware. The data collected by both the repeater and the gateway node is then transmitted  to the gateway nodes through the mesh network. The gateway nodes periodically upload a list of MAC  addresses and the associated received signal strengths (RSS) to the cloud server provided by Cloudtrax  through internet connection. Data transmitted to Cloudtrax is also fed into the cloudbased server  provided by Accuware. With the monthly subscription to the Accuware Indoor Triangulation System  (I.T.S.), data on the various dashboards provided by Accuware can be accessed remotely through the  Internet. The data acquisition process is shown in Fig. 7. Accuware dashboards provide a different  website interface where data is shown in a graphical visualization (see Appendixes A & B). Collected data  in CSV (comma separated values) file format can be downloaded daily from the Accuware server for  data analysis. For the purpose of this research project, CSV files were used to investigate the  effectiveness of the wireless sensor network in measuring WiFi devices. 

38 

 
Fig. 7.  Flow diagram of Accuware indoor Triangulation System (I.T.S.) (Accuware, 2015). 

  3.4    CSV file format    Data inside the CSV (CommaSeparated Values) files are grouped by the MAC address of each WiFi  device, and the records for each MAC address are ordered by the Unix epoch timestamp. Each  downloaded CSV file contains the MAC addresses and the associated RSS values of the 10 nodes that  detected the 10 highest RSS values (see Tab. 2).   
1. Unix Epoch time-stamp Time 1465841045 1465841080 1465841225 1465841235 1465841430 1465841535 2. MAC address 3. Level ID 0 0 0 0 0 0 4. Latitude 5. Longitude 6. MAC address 7. (Highest) RSS -75 -78 -80 -80 -82 -82 8. MAC address 9. (2nd Highest) RSS -76 -81 -81

 

Data structure of the downloaded files 

XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0

43.659417 43.659364 43.659439 43.659529 43.659111 43.659111

-79.378336 -79.378585 -79.378504 -79.378446 -79.378599 -79.378599

AC86744E5090 AC86744E5090 AC86744E5150 AC86744E5150 AC86744E5150 AC86744E5150

AC86744E5150 AC86744E5088 AC86744E5088

 

Tab. 2.  CSV file format.  39 

Where the fields are (columns from left to right):    1.   2.   3.     4.   5.   6.   7.   8.   9.   10.   11.   12. ...    24. ...  25.     Excel file format    For the research project, each CSV file was saved in Excel (Macroenabled) Workbook format as shown  in Tab. 3. Titles were added to each column and a few fields were added for data processing and filtering.  In addition, the MAC address of each node was replaced by the name of each node for easier review.   
Unix Time 1465841045 1465841080 1465841225 1465841235 1465841430 1465841535 Toronto Time 6/13/16 2:04 PM 6/13/16 2:04 PM 6/13/16 2:07 PM 6/13/16 2:07 PM 6/13/16 2:10 PM 6/13/16 2:12 PM MAC Lvl Lat Lng X-axis Y-axis
Coordinates Filter or RSS Filter

Unix Epoch timestamp  MAC address of a WiFi device detected by the node(s)  Level ID of the MAC addresses detected. Since all the nodes are installed on level 0 (second  floor), all Mac detections are shown to be on level 0, regardless of where the devices are.  Latitude of the MAC address detection coordinates  Longitude of the MAC address detection coordinates  MAC address of the node that detects the highest RSS from the WiFi device in column (2)  (Highest) RSS detected by the node in column (6)  MAC address of the node that detects the 2nd highest RSS from the WiFi device in column (2)  (2nd Highest) RSS detected by the node in column (8)  MAC address of the node that detects the 3nd highest RSS from the WiFi device in column (2)  (3rd Highest) RSS detected by the node in column (10) 

(10th Highest) RSS detected by the node in column (24) 

Node

RSS
(Highest) / dBm

RSS Node
(2nd Highest) / dBm

XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0 XXXXXXE69BD0

0 0 0 0 0 0

43.659417 43.659364 43.659439 43.659529 43.659111 43.659111

-79.378336 -79.378585 -79.378504 -79.378446 -79.378599 -79.378599

79.378336 79.378585 79.378504 79.378446 79.378599 79.378599

43.659417 43.659364 43.659439 43.659529 43.659111 43.659111

0 0 1 0 1 1

Node 7 Node 7 Node 5 Node 5 Node 5 Node 5

-75 -78 -80 -80 -82 -82

Node 5 Node 3 Node 3

-76 -81 -81

 

Tab. 3.  CSV file converted to Excel file format. 

 
40 

The following fields are added:    1.   Toronto Time  An Excel formula was employed to convert the Unix Epoch timestamp into the 

Eastern Time Zone in which Toronto is located. Since the experiment took place when daylight savings  were in effect, n =  4, i.e. four hours behind Greenwich Mean Time, was applied to the formula.          2.   Coordinates Filter  When the nodes were applied in nodesonperimeter (configuration A)  The formula: (A1/86400) + 25569 + (n/24), where A1 = Unix Epoch timestamp, n = 5 for  Eastern Time or n =  4 for Eastern Time under daylight savings. 

application, the coordinates (Xaxis & Yaxis values) were then used in the coordinates filter to verify if  the detection was within the nodes perimeter. A positive detection was indicated by "1" and a false  detection was indicated by "0".    3.   RSS cutoff value  This cutoff value was used in central node (configuration B) application to 

indicate if a MAC address detected was within the measurement area. The filter first used the node  numbers of the nodes employed in the measurement area to select MAC detections by those nodes.  Then it used a RSS value based on the RSS calibration carried out in the room to eliminate the MAC  addresses detected to be outside the room. A positive detection was indicated by "1" and a false  detection was indicated by "0".    3.5    A maximum of 10 nodes were deployed simultaneously (see Fig. 8). Since Accuware's installation  literature (Accuware, 2015) recommends that 1 in every group of 6  7 nodes should be connected to  the Internet as the gateway node using a wired connection, 2 nodes, namely Nodes 5 & 6, were wired to  the Internet using Ethernet cables for the entire experiment. These two nodes were used as gateway  nodes because these two locations had the most direct access to an open Ethernet cable outlet. The rest  of the nodes not wired to the Internet were repeaters.      Experiment setup 

41 

 
Fig. 8.  Nodes 5 & 6 as node gateways (Highlighted in yellow). 

 

 
Fig. 9 (left).  Typical node installation height.  Fig. 10 (middle).  Enlarged photo of node installation on a lighting fixture at MBSc Studio.  Fig. 11 (right).  Enlarged photo of node installation on a water pipe at MBSc Studio. Node 6 shown is a gateway. 

  Accuware's installation literature (Accuware, 2015) recommends that nodes should be installed on the  ground for the best performance of measurement. It also states that mixed configurations of physical  installation locations should be avoided since the performance of the nodes will be negatively affected  due to a different propagation of the WiFi signal. For this experiment, it was desired for the WiFi  sensor network to be integrated with the WiFi access points installed on the ceiling of each room in the  future. Therefore, in order to create a scenario to imitate how nodes will perform when integrated with  WiFi access points, the nodes were installed close to the ceiling. For easy installation, the nodes were 

42 

fixed under the utility pipes and lighting fixtures as shown in Fig. 9  11. As recommended by Accuware,  all nodes were installed at a similar height, approximately 2.75 m above floor level and 500 mm  underneath the exposed concrete ceiling.    3.6    According to Accuware's installation literature, there are two types of node configurations (Accuware,  2015). Configuration A has the nodes installed along the perimeter of the measurement area with  additional nodes in the middle area to provide the spacing required. Configuration B has nodes installed  at the center of each room. Accuware suggests that configuration A should be used for measuring  occupancy in an area as it can provide a better localization accuracy of occupants. On the other hand,  configuration B is not recommended for such a purpose, but can be used to simply measure occupancy  in a more squaredshaped room. Both configurations were examined during the experiment.    3.7    According to the Accuware's Installation Literature (Accuware, 2015), with a node spacing of  approximately 12  15 m, the triangulation of the nodes will allow the WiFi devices within the nodes'  perimeter (see Fig. 12) to have a detected location accuracy of 23 m. This implies that a WiFi device  that is physically present within this perimeter will be very likely to have a detected location that is also  within this perimeter. By applying a coordinates filter, the devices suspected to be detected outside the  nodes' perimeter should be eliminated.       Configuration A: Nodes on perimeter of a defined area    Experiment with node configurations A & B 

 
Fig. 12.  Triangulation by sensor nodes at MBSc Studio.  43 

For this configuration, the following filters were applied in order to filter the MAC addresses of interest  from all those detected by the system. Filters are used by Accuware as a method to select the MAC  detections of interest. The details of the filters used are described below:    1.  2.   3.   4.     Coordinates (location) filter was used to eliminate any MAC address detections outside the  measurement area. Each node is a WiFi device and is thus detected by other nodes in the vicinity. The  coordinates of each node were provided by the triangulation of other nodes. The latitude and longitude  of the Architecture Building were inputted on the Accuware dashboard. The approximate locations of  each node were also positioned within the floor plan on the dashboard. Cloudtrax then used the relative  locations of the nodes with respect to the coordinates of the Architecture Building to calculate the  coordinates of each node. These coordinates were shown on both Cloudtrax's and Accuware's  dashboards (see Tab. 4).    Coordinates (location) filter  Received signal strength (RSS) cutoff value  Time filter  Detection frequency filter  

 
Tab. 4.  Latitude and longitude of Nodes on Accuware dashboard. 

  With the coordinates of the nodes, the points outlining each measurement area on the xy plane were  defined. A Macro program was created in Excel spreadsheets to eliminate any points outside the  defined polygon. This program is based on the concept of "points within a polygon" and the exact Macro  script is detailed in Appendix F. With the Macro command enabled on Excel, any points within the  polygon would register as "1" in the column and these coordinates were then selected.     
44 

Received signal strength (RSS) cutoff value was then used to eliminate the MAC address detection with  weaker RSS values on the floors above and below the measurement area. To determine the value to be  employed for the RSS cutoff value in each measurement area, a calibration was carried out to measure  the RSS values of a WiFi device detected by the concerned node. In the calibration process, the Apple  iPhone 5s & 6s smartphones were used. The WiFi and cellular networks on the smartphone were first  disconnected. The smartphone was then placed at each specific location at an approximate height of 80  cm. With the automatic lockscreen of the smartphone disabled, the WiFi connection was then turned  on to ensure that the smartphone was actively transmitting WiFi traffic to the Ryerson WiFi network  during the whole duration of the test. The RSS values were then obtained on the Accuware website by  entering the appropriate URL command in a web browser. The RSS values and the associated nodes for  the detection were returned on the browser as shown below:   
{"mac":"XXXX96DE052E","loc":{"lat":43.659591,"lng":79.377932,"levelId":0,"prec":4.29},  "lrrt":17,"rss":{"AC86744E5178":55,"AC86744E5088":67,"AC86744E51A8":66,"AC86744E5128": 64,"AC86744E51C8":73,"AC86744E50B0":52}} 

  The field "mac" indicates the MAC address of the WiFi device detected by the nodes. In this example,  the MAC is "XXXX96DE052E". "AC86744E5178" is the MAC address of the node that detected the  highest RSS value of "55" dBm. Similarly, " AC86744E5088" is the MAC address of the node that  detected the second RSS value of "67" dBm.    This process was repeated at least ten times until a stable RSS value was obtained. This is because RSS  values fluctuate in a range of approximately plusorminus (±) 10 dBm. The RSS cutoff value that will  eliminate most of the devices detected vertically above and below the floor being studied, and devices  outside the measurement area should be selected. According to Accuware, the selection of a RSS cutoff  value is a trialanderror process. Different cutoff values have to be tested to see which one is better  related to the number of unique occupants present.    In general, the calibration results show that the RSS detected on the floor above and below have a much  lower value (more negative) than on the nodes installation floor. The difference is around 10  20 dBm.  This is because the WiFi device tested was physically further away from the sensor node. The reinforced  concrete floor slab also further reduced the signal strength measured by the node. However, this 

45 

difference was reduced to 5  10 dBm when the detection was carried out at locations directly above or  below the node. It is because the WiFi device was closer to the node in terms of distance.    In Fig. 13 & 14, the red dot denotes the detection location at approximately 80 cm above floor level. The  number denotes the RSS value detected. All the values are negative which indicates that the signal  strength is decreasing from the node's physical location on the ceiling. The node responsible for the  largest RSS detections is indicated by Nx where x is the node number. For example, N2 indicates Node 2.  A maximum of 2 largest RSS values are shown on the calibration diagram. 

 
Fig. 13 (left).  Fig. 14 (right).    RSS calibration at circulation area.  RSS calibration above circulation area. 

Time filter was used to eliminate any MAC address detections outside the measurement time period. A  time filter was required in order to show the number of unique MAC addresses within each selected  time period for comparison. Tab. 5 illustrates a time filter of "6/13/16 2:00  2:59 PM" was applied to  the Excel file. The highlighted rows (in red) show all the instances that Device A was detected between  2:00 to 2:59 PM. 
Unix Time 1465841045 1465841080 1465841225 1465841235 1465841430 1465841535 1465841560 1465841580 1465841700 1465841740 1465841755 1465841405 1465841200 Toronto Time 6/13/16 2:04 PM 6/13/16 2:04 PM 6/13/16 2:07 PM 6/13/16 2:07 PM 6/13/16 2:10 PM 6/13/16 2:12 PM 6/13/16 2:12 PM 6/13/16 2:13 PM 6/13/16 2:15 PM 6/13/16 2:15 PM 6/13/16 2:15 PM 6/13/16 2:10 PM 6/13/16 2:06 PM MAC Device A Device A Device A Device A Device A Device A Device A Device A Device A Device A Device A Device B Device C Lvl 0 0 0 0 0 0 0 0 0 0 0 0 0 Lat 43.659417 43.659364 43.659439 43.659529 43.659111 43.659111 43.658985 43.658985 43.659744 43.659217 43.659217 43.659154 43.659634 Lng -79.378336 -79.378585 -79.378504 -79.378446 -79.378599 -79.378599 -79.377583 -79.377583 -79.378226 -79.378278 -79.378278 -79.378342 -79.377372 X-axis 79.378336 79.378585 79.378504 79.378446 79.378599 79.378599 79.377583 79.377583 79.378226 79.378278 79.378278 79.378342 79.377372 Y-axis 43.659417 43.659364 43.659439 43.659529 43.659111 43.659111 43.658985 43.658985 43.659744 43.659217 43.659217 43.659154 43.659634
Coordinates or RSS Filter

Node Node 7 Node 7 Node 5 Node 5 Node 5 Node 5 Node 5 Node 5 Node 1 Node 5 Node 5 Node 5 Node 3

RSS
(Highest) / dBm

RSS Node Node 5 Node 3 Node 3
(2nd Highest) / dBm

0 0 0 0 0 0 0 0 0 0 0 0 0

-75 -78 -80 -80 -82 -82 -80 -80 -77 -75 -75 -68 -70

-76 -81 -81

Node 4 Node 4 Node 5 Node 7 Node 7

-81 -81 -80 -76 -76

 

Tab. 5.  Application of time filter "6/13/16 2:00  3:00 PM to the Excel file.  46 

Detection frequency filter was used to eliminate any MAC addresses associated with permanently  installed WiFi devices inside the measurement area. A detection frequency filter was applied to the  data only when an 1hour time period was used For the measurement. Based on the experiment results,  MAC addresses of permanently installed WiFi devices such as WiFi access points tended to have a  constantly high detection frequency of more than 100 times/hour. The number of these permanent  devices becomes relatively significant when there is only a few occupants present in the measured area.  Therefore, a detection frequency filter of 100 times/hour was used to eliminate these permanent  devices. This filter was not used when the measurement time period was less than 1 hour as the  detection frequency of these devices became less significant. Two of these permanent devices, namely  083E8E18001B and 083E8E18003B, are shown in Tab. 6. By searching their OUI or the first 6 digits of  their MAC in the OUI Organization Company ID registry, it is revealed that their manufacturer is "Hon  Hai Precision Ind. Co., Ltd.", which is one of the manufacturers of the WiFi access points installed in the  Architecture Building.   
June 13 18:00 - 19:00 PM
Unique Wi-Fi devices detected Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 2 0 0 1 1 0 0 0 0 6 1 1 0 0 1 1 1 1 

Device I (Macbook) Device A 083E8E18001B 083E8E18003B Device J (Macbook) Device B Device E Device C

1 1 217 164 4 2 2 41

Tab. 6.  Unique MAC addresses identified by detection frequency filter of 100 times/hour. 

  Example results after application of the filters for configuration A are shown in Appendix C.    3.8    Since the RSS value for a WiFi device is inversely proportional to the distance between the device and  the node, by choosing a RSS cutoff value that corresponds to a certain detection radius (see Fig. 15), it  is possible to approximate how many devices are within the measurement area.    Configuration B: Central nodes at center of a defined area 

47 

 
Fig. 15.  Central node application at lecture room (Pit).   

For this configuration, the following filters were applied in order to filter the MAC addresses of interest  from all those detected by the system. The details are described below:    1.   2.   3.     Received signal strength (RSS) & Node numbers filter was used to eliminate any MAC address detections  not measured by the specific nodes installed inside the measurement area, and to eliminate any MAC  address detections outside the measurement area. The RSS values and the associated node numbers  were listed in the CSV file in the descending order of RSS values. In the experiment, there were  measurement areas adjacent to each other with nodes that were deployed in close proximity. As a  result, not all WiFi devices inside a particular measurement area, for example the lecture room (Pit),  had their largest RSS values detected by the designated node inside the lecture room. Therefore, it was  not possible to simply select the RSS values detected by that particular node inside the lecture room. To  solve that, an Excel formula was developed to select all the MAC addresses with RSS values that were  both greater than the selected RSS cutoff value and were detected by that particular node.    For example, if a WiFi device inside the lecture room has its largest or second largest RSS value  detected by Node 5 inside the room as Node 5 is the node closest to these devices, and a RSS cutoff  value of greater than or equal to  39 dBm is selected for Node 5, the formula shown below will be 
48 

Received signal strength (RSS) & Node numbers filter  Time filter  Detection frequency filter  

applied to the Excel file to select these RSS values:    =IF(OR(AND(H2=" Node 5",I2>40), AND(J2=" Node 5",K2>40)),1,0)    H2 is the name of the node that detects the highest RSS from the WiFi device; I2 is the highest RSS  detected by H2; J2 is the name of the node that detects the 2nd highest RSS from the WiFi device; K2 is  the second highest RSS detected by the J2. Any MAC addresses with RSS values measured by Node 5  that is greater than 40 dBm will register "1" in the Excel column and they can then be selected.    Time filter and detection frequency filters as per perimeter node configuration. 

49 

4.   

 

Evaluation of WiFi sensor network system performance 

The evaluation was divided into two phases. Phase 1 examined the performance of node configurations  A & B in measuring localized occupants in two studios and a lecture room. Phase 2 examined the  performance of node configurations A & B in measuring nonlocalized occupants in a circulation space  and a stairway.    4.1    Experiment phase 1 aimed to investigate which node configuration was more capable in producing  useful occupancy data on presence, count and activity for localized occupants.    4.1.1      This configuration aimed to examine a perimeter node arrangement with localized occupants using the  space for a longer period of time.    Location diagram  Configuration A at MBSc Studio    Experiment phase 1: Comparison of configurations A & B on localized occupants 

 
Fig. 16.  Perimeter node application at MBSc Studio.   

Setup  Nodes 1, 2, 6 & 3 were installed underneath the utility pipes about 500 mm away from the ceiling at the 
50 

perimeter of the MBSc studio from May 30 to June 15 (see Fig. 16). Node 6 was a gateway while Nodes 1,  2 & 3 were repeaters. The nodes were spaced between 8  12 m from each other.    RSS calibration 

 
Fig. 17.  RSS calibration at MBSc Studio.   

 
Fig. 18.  RSS calibration on floor above MBSc Studio. 

   
51 

Fig. 17 & 18 show that the RSS values detected at the center of the measurement area was  42 dBm,  which was the smallest within the measurement area. The RSS value detected immediately outside the  MBSc Studio in the hallway was  31dBm. The RSS values detected in the hallway (to the atrium), outside  the building and on the floor above, were all smaller than or equal to  50 dBm. Therefore, a RSS cutoff  value of greater than or equal to  42 dBm would eliminate any MAC detections from the floor above  and it would keep all the MAC detections inside the measurement area on the floor being studied.  Although the RSS measured right outside the studio was larger than 42dBm, this MAC detection would  possibly be eliminated by the coordinates filter since its latitude and longitude were outside the  measurement area.     Using a RSS cutoff value of greater than or equal to  42 dBm, the results show that the number of MAC  detections were at several instances double or even triple the number of unique occupants observed.  Therefore, a larger RSS cutoff value is required to produce a more accurate estimation. After several  tests, a RSS cutoff value of greater than or equal to  39 dBm was selected because the results show  that this did not eliminate any MAC detections of known devices (see Tab. 7). Although an even larger  (less negative) value would bring the number of MAC detections closer to the number of unique people  counted, it may risk eliminating devices that were present. Therefore, a number larger than  39 dBm  was not used.                             
52 

Results 

 
Fig. 19.  MAC detections vs. unique people in each 1hour time period (June 9). 

 

 
Fig. 20.  MAC detections vs. unique people in each 1hour time period (June 13). 

 

 
Fig. 21.  MAC detections vs. unique people in each 1hour time period (June 14).    53 

Fig. 22.  Multiplier vs. time on June 9, 13 & 14.      June 9  June 13    RSS >  43  RSS >  40  RSS >  43  RSS >  40  dBm  dBm  dBm  dBm  2.4  1.8  2.4  1.9  Mean  multiplier  Range of  multipliers  2.0  3.2  1.5  2.4  1.6  3.1  1.4  2.5 

  June 14  RSS >  40  RSS >  40  dBm  dBm  1.9  1.4  1.7  2.3  1.2  1.7 

Tab. 7.  Mean multiplier & range of multipliers on June 9, 13 & 14.      Overall result ( June 9, 13 & 14 )    RSS >  43 dBm  RSS >  40 dBm  Average mean multiplier  2.2  1.7  Tab. 8.  Average mean multiplier on June 9, 13 & 14. 

  In order to validate the results regarding: (1) Whether the WiFi sensor network was actually measuring  unique devices inside the studio, and (2) whether the use of a larger RSS value had only eliminated the  MAC addresses not associated with the unique devices (i.e. devices outside the node perimeter), it was  necessary to verify if the detected MAC addresses belonged to the devices inside the studio. Therefore,  the MAC addresses of some of the devices deployed inside the studio were checked. From the list of  unique devices detected by the WiFi sensor network, the number of known devices detected were  counted. This number was shown in columns labeled "Number of known devices detected" in Tab. 9.               

54 

June 13  RSS >  43 dBm  RSS >  40 dBm  Number of  Number of  Number of  Number of known  unique devices  known devices  unique devices  devices detected  detected  detected  detected  12:00 PM  17  13  15  13  13:00 PM  16  8  12  8  14:00 PM  21  15  19  15  15:00 PM  25  12  19  12  16:00 PM  16  10  13  10  17:00 PM  14  9  13  9  Tab. 9.  Number of known devices detected by the WiFi sensor network. 

Time   

  Tab. 9 shows that the number of known devices detected are the same under both RSS cutoff values.  This suggests that the use of a higher (less negative) RSS value (RSS >  40 dBm) in this case is capable of  eliminating MAC detections most likely not associated with the unique devices inside the measurement  area, while still keeping the MAC detections associated with the devices present.    According to Fig. 19  21, the general occupancy patterns exhibited by the number of MAC detections  tends to follow the same trend exhibited by the number of unique occupants present in all three cases,  meaning that the number of MAC detections tends to increase when the number of unique occupants  increases, and vice versa. This proximity of occupancy patterns was higher on June 9 & 13.     At a RSS cutoff value that is greater than or equal to  40 dBm, the mean multipliers range from 1.4 to  1.9 (see Fig. 22 & Tab. 7) and the average mean multiplier is 1.7 (see Tab. 8). This suggests that on  average, each occupant had between 1.4 and 1.9 devices. An ANOVA analysis was carried out to  conclusively determine whether there was significant variance between the multipliers measured on the  three different days. The multipliers from the three sets of data collected on the three days were used  to create an ANOVA table as shown in Tab. 11. The data input table for ANOVA is shown in Tab. 10.   
  Configuration A (perimeter node)  RSS > 40 dBm  Tab. 10.  Data input table for ANOVA.    Day 1  Multipliers on June 9  (n = 6)  Day 2  Multipliers on June  13 (n = 6)  Day 3  Multipliers on June  14 (n = 6) 

55 

Anova: Single Factor Alpha = 0.05 SUMMARY Groups Day 1 (Jun 9) Day 2 (Jun 13) Day 3 (Jun 14) ANOVA Source of Variation Between Groups Within Groups Total

Count 6 6 6 SS 0.94333 1.56167 2.505

Sum 11.10 11.80 8.60 df 2 15 17

Average Variance 1.85 0.09 1.97 0.19 1.43 0.03 MS 0.47 0.10 F 4.53 P-value 0.029 F crit 3.68

 

Tab. 11.  ANOVA table for configuration A comparison at MBSc Studio on June 9, 13 & 14. 

  June 9, 13, and 14 have multiplier averages of 1.85, 1.97 and 1.43 respectively. The null hypothesis in  this case states that these three multiplier averages are statistically equal. Since the pvalue calculated  (0.029) is less than the significance level of 0.05, the differences between the three multiplier averages  are statistically significant. Based on ANOVA results, configuration A has statistically unequal multiplier  averages within the three days. This finding is possibly due to sampling error, small sample size, or less  stable performance in detecting MAC addresses in this configuration.    To conclude, the perimeter node arrangement can detect presence and give some indication of count  with limited accuracy for localized occupants, however, it cannot provide any information on activity.  This arrangement also appears to be capable of estimating the overall occupancy pattern (general trend)  of these localized occupants, but not the absolute number of occupants.                                 
56 

4.1.2     

Configuration B at MBSc Studio 

This configuration aimed to examine a central node arrangement with localized occupants using the  space for a longer period of time.    Location diagram 

 
Fig. 23.  Central nodes application at MBSc Studio. 

  Setup  Nodes 1 & 2 were installed underneath the lighting fixtures about 500 mm away from the ceiling at the  center of the 2 bays which contain the MBSc studio from June 16 to June 30 (see Fig. 23). Both nodes  were repeaters.    RSS Calibration 

 
Fig. 24.  RSS calibration at MBSc Studio.  57 

 
Fig. 25.   RSS calibration on floor above MBSc Studio. 

 
Fig. 26.  RSS calibration on floor below MBSc Studio. 

  Fig. 24  26 show that the RSS values detected within the measurement area varied between  29 dBm to   45 dBm. The RSS values detected on the floors directly above and below Node 1 were smaller than or  equal to  48 dBm. The RSS value detected immediately outside the MBSc Studio in the hallway was  38  dBm. A RSS cutoff value of greater than or equal to  39 dBm was selected. Although this number was  greater than the RSS values detected at the top left and top right corners of the studio, the decision was  a compromise made to reduce the chance of MAC detections in the hallway. Since the results show that  the RSS values detected from a device fluctuated within plusorminus (±) 10 dBm within 1 hour, a RSS  cutoff value of greater than or equal to 39 dBm can capture the MAC addresses within the  measurement area, but also eliminate the detections that were only in the hallway briefly. 
58 

Results 

 
Fig. 27.  MAC detections vs. unique people in each 1hour time period (June 17). 
 

 
Fig. 28.  MAC detections vs. unique people in each 1hour time period (June 20). 
 

 
Fig. 29.  MAC detections vs. unique people in each 1hour time period (June 21).   

59 

Fig. 30.  Multiplier vs. time on June 17, 20 & 21.    June 17 June 20  June 21      RSS >  40 dBm  Mean multiplier  1.3  1.2  1.5  Range of multipliers  0.9  2.2  0.9  1.5  1.4  1.8  Average mean multiplier  1.3  Tab. 12.  Mean multiplier, range of multipliers & average mean multiplier on June 17, 20 & 21. 

 

  To verify if the MAC addresses detected were mostly within the measurement area, the MAC addresses  of some of the devices deployed inside the studio were checked. From the list of unique devices  detected by the WiFi sensor network, the number of detected known devices were counted. This  number is shown in the columns labeled "Number of known devices detected" in Tab. 13, which shows  that the majority of the "unique devices detected" are "known devices" on both days of the  measurement period. This implies that the WiFi network was able to detect the MAC addresses inside  the measurement area.   
June 21  RSS >  40 dBm  Number of  Number of  Number of  Number of known  unique devices  known devices  unique devices  devices detected  detected  detected  detected  12:00 PM  8  6  14  11  13:00 PM  11  9  12  10  14:00 PM  11  8  11  9  15:00 PM  11  8  10  7  16:00 PM  12  10  9  8  17:00 PM  10  8  11  10  Note: 12:00 PM = Time period of 11:00  12:00 PM    Tab. 13.  Number of known devices detected on June 20 & 21.    60  Time      June 20 

According to Fig. 27 & 29, the general occupancy patterns exhibited by the number of MAC detections  tends to follow the same trend exhibited by the number of unique occupants present. However, this  similarity is not indicated in Fig. 28. The mean multipliers range from 1.2 to 1.5 (see Fig. 30 & Tab. 12).  This suggests that on average,, each occupant had between 1.2 and 1.5 devices.     An ANOVA analysis was carried out to conclusively determine whether there was significant variance  between the multipliers measured on the three different days. The multipliers from the three sets of  data collected on the three days were used to create an ANOVA table as shown in Tab. 15. The data  input table for ANOVA is shown in Tab. 14.   
  Day 1  Configuration B  Multipliers on June 17  (perimeter node)  (n = 6)  Tab. 14.  Data input table for ANOVA.   
Anova: Single Factor Alpha = 0.05 SUMMARY Groups Day 1 (Jun 17) Day 2 (Jun 20) Day 3 (Jun 21) ANOVA Source of Variation Between Groups Within Groups Total

Day 2  Multipliers on June 20 (n  = 6) 

Day 3  Multipliers on June  21 (n = 6) 

Count 6 6 6 SS 0.30333 1.54167 1.845

Sum Average Variance 7.6 1.27 0.24 7.5 1.25 0.04 9.2 1.53 0.02 df 2 15 17 MS 0.15 0.10 F 1.48 P-value 0.26 F crit 3.68

 

Tab. 15.  ANOVA table for configuration B comparison at MBSc Studio on June 17, 20 & 21. 

  June 17, 20 and 21 have multiplier averages of 1.27, 1.25 and 1.53 respectively. The null hypothesis in  this case states that these three multiplier averages are statistically equal. Since the pvalue calculated  (0.26) is greater than the significance level of 0.05, the differences between the three multiplier  averages are statistically insignificant. Based on ANOVA results, configuration B has a statistically equal  multiplier averages within the three days.    To conclude, similar to the perimeter node configuration experiment carried out in the MBSc studio, the  central node arrangement can detect presence and give some indication of count with limited accuracy  for localized occupants, however, it cannot provide any information on activity. This arrangement also 
61 

appears to be capable of estimating the overall occupancy pattern (general trend) of these localized  occupants, but not the absolute number of occupants.    4.1.3      This configuration aimed to improve on the previous central node arrangement experiment with an  additional node for the full coverage of the studio room to measure localized occupants using the space  for a longer period of time.    Location diagram  Configuration B at extended MBSc Studio with an additional node 

 
Fig. 31.  Central node application with an additional node at MBSc Studio. 

  Setup  In addition to Nodes 1 & 2 that were installed inside the first two bays of the MBSc studio in the  previous experiment, another node (Node 8), was installed underneath the lighting fixtures about 500  mm away from the ceiling at the center of the third smaller bay to cover the remaining part of the MBSc  studio from June 27 to June 30 (see Fig. 31). All three nodes were repeaters. It was hoped that by  including the occupants on the other end of the MBSc studio with an additional sensor node, the  accuracy of the network could be increased.     
62 

RSS calibration for Node 8 

 
Fig. 32.   RSS calibration for additional Node 8 at MBSc Studio. 

  Fig. 32 shows that the RSS values detected at the works desk were greater than or equal to  36 dBm.  Therefore, a RSS cutoff value of greater than or equal to  36 dBm was used for Node 8 to detect  devices in the area around this node. For the areas covered by Nodes 1 & 2, since the calibration shows  that the previous RSS values measured were still the same. The same RSS cutoff value of greater than  or equal to  39 dBm was used for Node 1 & 2.    Results 

 
Fig. 33.  MAC detections vs. unique people in each 1hour time period (June 27).   

63 

  Fig. 34.  Multiplier vs. time on June 27.      June 27  Nodes 1 & 2 RSS >  40 dBm,  Node 8 RSS >  37 dBm  Mean multiplier  1.1  Range of multipliers  0.6  1.6  Tab. 16.  Mean multiplier & range of multipliers on June 27. 

  According to Fig. 33 & 34, the results show no similarity between the occupancy patterns (trend)  exhibited by the number of MAC detections and that exhibited by the number of unique occupants  present. The mean multiplier is 1.1 (see Tab. 16), which is lower than the average mean multiplier from  the previous experiment without the additional node. This suggests that on average, each occupant had  about 1.1 devices. The range of multipliers varies largely between 0.6 and 1.6 from hour to hour.  However, it was observed that most occupants have between 1 to 2 WiFi devices.    An ANOVA analysis was carried out to conclusively determine whether there was significant variance  between the multipliers measured in this configuration and the one without the additional node. The  multipliers from the two sets of data collected on the two experiments were used to create an ANOVA  table as shown in Tab. 18. The data input table for ANOVA is shown in Tab. 17.   
  With additional node  Configuration B  Multipliers on June 27 (n =  (perimeter node)  6)  Tab. 17.  Data input table for ANOVA.  Without additional node  Multipliers on June 17, 20 & 21 (n  = 18) 

64 

Anova: Single Factor Alpha = 0.05 SUMMARY Groups With additional node Without additional node ANOVA Source of Variation Between Groups Within Groups Total

Count 6 18 SS 0.36125 2.47833 2.83958

Sum 6.4 24.3 df 1 22 23

Average Variance 1.07 0.13 1.35 0.11 MS 0.36 0.11 F 3.21 P-value 0.087 F crit 4.30

 

Tab. 18.  ANOVA table for configuration B comparison (with and without an additional node) at MBSc Studio. 

  The two experiments, with an additional node and without an additional node, have multiplier averages  of 1.07 and 1.35 respectively. The null hypothesis in this case states that these two multiplier averages  are statistically equal. Since the pvalue calculated (0.087) is greater than the significance level of 0.05,  the differences between the three multiplier averages are statistically insignificant. Based on ANOVA  results, both configuration B, with and without an additional node, have a statistically equal multiplier  averages in the measurement periods.    To conclude, the central node arrangement with the additional node does not show any noticeable  difference from the previous experiment without the additional node. This arrangement can detect  presence and give some indication of count with limited accuracy. However, this arrangement cannot  provide any information on activity.                                     
65 

4.1.4     

Configuration B at MArch Studio 

This configuration aimed to examine a central node arrangement with a larger group of localized  occupants (10  20) occupying the space for a longer period of time.    Location diagram 

 
Fig. 35.  Central node application at MArch Studio.   

Setup  Nodes 3 & 4 were installed underneath the lighting fixtures about 500 mm away from the ceiling at the  center of the 2 bays which contain the MArch studio from June 16 to June 30 (see Fig. 35). Both nodes  were repeaters.                   

66 

RSS calibration 

 
Fig. 36.  RSS calibration at MArch Studio.   

The design and the construction of the MArch Studio is basically the same the MBSc Studio. As shown  previously in the RSS calibration at MBSc Studio, the RSS values detected directly on the floor above and  below the nodes were around 10 dBm smaller than the ones detected within the measurement area.  The RSS calibration for the MArch Studio was only carried out at MArch Studio. Fig. 36 shows that the  RSS values detected within the measurement area varied between  35 dBm and  45 dBm. However, the  value of  45 dBm was very close to the value of  46dBm taken in the middle of the hallway between the  two studios.    On the other hand, the RSS values measured at the four corners of the studio, which were the furthest  points measured from the nodes, varied only between  36 dBm and  39 dBm. In order to reduce the  chance of the MAC address detected in the hallway, a RSS cutoff value of greater than or equal to  40  dBm was used.         

67 

Results 

 
Fig. 37.  MAC detections vs. unique people in each 1hour time period (June 17).   
 

 
Fig. 38.  MAC detections vs. unique people in each 1hour time period (June 20).   

 

Fig. 39.  MAC detections vs. unique people in each 1hour time period (June 21).  68 

Fig. 40.  Multiplier vs. time on June 17, 20 & 21. 
 

 

June 20  June 21    RSS >  41 dBm  Mean multiplier  1.6  1.2  1.6  Range of multipliers  0.8  3.3  1.0  1.6  1.3  2.4  Average mean multiplier  1.5  Tab. 19.  Mean multiplier, range of multipliers & average mean multiplier on June 17, 20 & 21. 

 

June 17

 

Since not all the MAC addresses of the WiFi devices used in the experiment at the MArch studio were  available, the validity of the MAC detections was verified by comparing them against how many 1hour  time periods were they present throughout the 12hour measurement period. Tab. 20 shows that more  than half of the total MAC addresses detected were present in more than one 1hour time period. And  almost half of the MAC addresses detected were present for more than two 1hour time periods. The  results are consistent with the physical count as the number of unique occupants were only present all  at the same time in one 1hour time period in the studio. Therefore, it is possible that the WiFi sensor  network was mostly detecting MAC addresses within the measurement area. 
 

June 21  RSS >  40 dBm  MArch Studio  Total number of unique  % of MAC addresses  Number of 1hr time  Number of MAC  period presence within  addresses  MAC detection  within  12  from  total number of   1hr time period from  8:00 AM  20:00 PM  unique MAC detection  8:00 AM  20:00 PM    40  > 1  22  55%  > 2  19  48%  > 3  15  38%  > 4  13  33%  > 5  13  33%  Tab. 20.  Number of MAC addresses present in number of 1hr time period within twelve 1hr time period from 8:00    AM  20:00 PM  69 

The experiment results are very similar to the central node arrangement measured at the MBSc Studio.  According to Fig. 37 & 39, the general occupancy patterns exhibited by the number of MAC detections  tends to follow the same trend exhibited by the number of unique occupants present. The results from  Fig. 38, however, show no similarity in occupancy patterns between the two sets of data. The mean  multipliers range from 1.2 to 1.6 (see Fig. 40 & Tab. 19). This suggests that on average, each occupant  had between 1.2 and 1.6 devices.    An ANOVA analysis was carried out to conclusively determine whether there was significant variance  between the multipliers measured over the three different days. The multipliers from the three sets of  data collected on the three days were used to create an ANOVA table as shown in Tab. 22. The data  input table for ANOVA is shown in Tab. 21. 
 

  Day 1  Configuration B  Multipliers on June 17  (perimeter node)  (n = 5)  Tab. 21.  Data input table for ANOVA. 
 

Day 2  Multipliers on June 20 (n  = 6) 

Day 3  Multipliers on June  21 (n = 6) 

Anova: Single Factor Alpha = 0.05 SUMMARY Groups Day 1 (Jun 17) Day 2 (Jun 20) Day 3 (Jun 21) ANOVA Source of Variation Between Groups Within Groups Total

Count 5 6 6 SS 0.49716 4.98167 5.47882

Sum 8 7.4 9.5 df 2 14 16

Average Variance 1.60 0.96 1.23 0.05 1.58 0.18 MS 0.25 0.36 F 0.70 P-value 0.51 F crit 3.74

 

Tab. 22.  ANOVA table for configuration B comparison at MArch Studio on June 17, 20 & 21. 
 

June 17, 20 & 21 have multiplier averages of 1.60, 1.23 and 1.58 respectively. The null hypothesis in this  case states that these two multiplier averages are statistically equal. Since the pvalue calculated (0.51)  is greater than the significance level of 0.05, the differences between the three multiplier averages are  statistically insignificant. Based on ANOVA results, configuration B has a statistically equal multiplier  averages within the three days.    To conclude, similar to the central node arrangement measured at the MBSc Studio, the central node  arrangement can detect presence and give some indication of count with limited accuracy. However,  this arrangement cannot provide any information on activity. 
70 

4.1.5     

Configuration B at lecture room (Pit) 

This configuration aimed to examine a central node arrangement with localized occupants using the  space for a longer period of time.  

 
Fig. 41.   Lecture room (Pit).   

Location diagram 

 
Fig. 42.  Central node application at lecture room (Pit). 

  Setup  Node 5 was installed underneath the lighting power supply about 700 mm away from the ceiling inside  the lecture room from May 30 to August 31 (see Fig. 41 & 42). Node 5 was a gateway.     

71 

RSS calibration 

 
Fig. 43.  RSS calibration at lecture room. 

 

 
Fig. 44.  RSS calibration on floor above lecture room. 

  Fig. 43 & 44 show that the RSS values detected at the center of the lecture room were  33 dBm, which  was the largest (least negative) within the measurement area. The RSS values detected within the  lecture room were greater than or equal to  46 dBm, except for the RSS value of 57 dBm measured at  the top left corner. The RSS values detected on the floor above were greater than or equal to  48 dBm,  except for the RSS value of 42 dBm measured directly above Node 5. Therefore, a RSS cutoff value of  greater than or equal to  46 dBm was selected. 
72 

Results 

 
Fig. 45.  MAC detections vs. unique people in each 1hour time period (June 2). 

 
Fig. 46.  MAC detections vs. unique people in each 1hour time period (June 3).   

Fig. 47.  Multiplier vs. time on June 2 & 3. 

 

 
    Mean multiplier  June 2  June 3  RSS >  46 dBm  0.7  1.1 

Range of multipliers  0.5  0.9  0.8  1.8  Tab. 23.  Mean multiplier and range of multipliers on June 2 & 3. 

 
73 

The measurements were taken during a convention attended by visitors outside the university. It was  observed that most visitors did not have a laptop during their duration of stay in the lecture room. Fig.  45 & 46 shows that the number of MAC detections appears to increase when occupant numbers  increase, and vice versa. However, a direct relationship cannot be established. The mean multipliers  vary from 0.7 to 1.1 (see Fig. 47 & Tab. 23), which suggests that on average each occupant had between  0.7 and 1.1 devices. This number seems to correlate with the observation. However, the measurements  taken on the 2 different days show very different results. The number of MAC detections on June 3  appears to be much closer to the number of unique people than the results from June 2.    An ANOVA analysis was carried out to conclusively determine whether there was significant variance  between the multipliers measured in the lecture room on two different days using configuration B. The  multipliers from the two sets of data collected on the two days were used to create an ANOVA table as  shown in Tab. 25. The data input table for ANOVA is shown in Tab. 24.   
  lecture room, June 2  Configuration B  Multipliers on June 2 (n = 3)  (central node)  Tab. 24.  Data input table for ANOVA.   
Anova: Single Factor Alpha = 0.05 SUMMARY Groups Lecture room on Jun 2 (configuration B) Lecture room on Jun 3 (configuration B) ANOVA Source of Variation Between Groups Within Groups Total

lecture room, June 3  Multipliers on June 3 (n = 5) 

Count 3 5 SS 0.34 0.76 1.10

Sum 2.11 5.64 df 1 6 7

Average Variance 0.70 0.04 1.13 0.17 MS 0.34 0.13 F 2.69 P-value 0.15 F crit 5.99

  

Tab. 25.  ANOV table for configuration B comparison at lecture room on June 2 & 3.   

June 2 and June 3 have multiplier averages of 0.70 and 1.33 respectively. The null hypothesis in this case  states that these two multiplier averages are statistically equal. Since the pvalue calculated from  ANOVA (0.15) is greater than the significance level (alpha) of 0.05, there is not enough evidence to reject  this null hypothesis. This indicates that the differences between the two multiplier averages are  statistically insignificant. Based on ANOVA results, configuration B has a statistically equal multiplier  averages on both days. 
74 

To conclude, the central node arrangement can detect presence of localized occupants, however, it  cannot provide useful information on count. This arrangement also cannot provide any information on  activity.    4.1.6      Configurations A & B at MBSc Studio    ANOVA (analysis of variance) was used to conclusively determine whether there was significant variance  between the multipliers (detection ratio) measured in configurations A and B. The multipliers from the  two sets of data collected at MBSc Studio using node configurations A & B were used to create an  ANOVA table as shown in Tab. 27. The data input table for ANOVA is shown in Tab. 26. 
Configuration A  (perimeter node), RSS >  40 dBm  MBSc Studio  Multipliers from each of the repeated  measurements on June 9, 13 & 14 (n =  18)  Tab. 26.  Data input table for ANOVA. 
 

Configurations A & B analysis using ANOVA 

 

Configuration B  (central node), RSS >  40 dBm  Multipliers from each of the  repeated measurements on June  17, 20 & 21(n = 18) 

Anova: Single Factor Alpha = 0.05 SUMMARY Groups Configuration A (perimeter node) Configuration B (central node) ANOVA Source of Variation Between Groups Within Groups Total

Count 18 18 SS 1.44 4.35 5.79

Sum 31.5 24.3 df 1 34 35

Average Variance 1.75 0.15 1.35 0.11 MS 1.44 0.13 F 11.26 P-value 0.0020 F crit 4.13

  

Tab. 27.  ANOV table for configurations A & B comparison at MBSc Studio.   

Configuration A and B have multiplier averages of 1.75 and 1.35 respectively. The null hypothesis in this  case states that these two multiplier averages are statistically equal. Since the pvalue calculated  (0.0020) is less than the significance level of 0.05, the differences between the two multiplier averages  are statistically significant. Based on ANOVA results, configurations A and B have statistically different  multiplier averages with configuration A having a higher one. The results reflect the characteristics of  the multipliers rather than just a sampling error. However, ANOVA does not determine which  configuration has a higher accuracy in detecting occupant count or presence. Configuration A has a  higher detection ratio probably because it has a larger total detection area. The nodes were arranged 
75 

along the perimeter of the studio in configuration A, while the nodes in configuration B were arranged  along the centerline of the space. Since the RSS cutoff values used were the same in the two studios,  theoretically configuration A has double the detection area as configuration B. With occasional incorrect  triangulation (see Chapter 6. Discussion), more devices outside the perimeter were detected by the  sensor and therefore, the average multiplier is higher.    Configuration B at MBSc Studio & MArch Studio    ANOVA was used also to conclusively determine whether there was significant variance between the  multipliers measured in MBSc & MArch studios using configuration B. The multipliers from the two sets  of data collected at the two studios were used to create an ANOVA table as shown in Tab. 29. The data  input table for ANOVA is shown in Tab. 28. 
 

Location A  (MBSc Studio)  Configuration B  Multipliers from each of the repeated  measurements on June 17, 20 & 21(n =  (central node)  18)  Tab. 28.  Data input table for ANOVA. 
 

 

Location B  (MArch Studio)  Multipliers from each of the  repeated measurements on June  17, 20 & 21(n = 18) 

Anova: Single Factor Alpha = 0.05 SUMMARY Groups Location A (MBSc Studio) Location B (MArch Studio) ANOVA Source of Variation Between Groups Within Groups Total

Count 18 18 SS 1.21 26.75 27.96

Sum 24.3 30.9 df 1 34 35

Average Variance 1.35 0.11 1.72 1.47 MS 1.21 0.79 F 1.54 P-value 0.22 F crit 4.13

  

Tab. 29.  ANOV table for configuration B comparison at MBSc & MArch studios. 

  Locations A and B have multiplier averages of 1.35 and 1.72 respectively. The null hypothesis in this case  states that these two multiplier averages are statistically equal. Since the pvalue calculated from  ANOVA (0.22) is greater than the significance level (alpha) of 0.05, there is not enough evidence to reject  this null hypothesis. This means that the differences between the two multiplier averages are  statistically insignificant. Based on ANOVA results, configuration B has a statistically equal multiplier  averages at both studios. This finding is reasonable because both studios are very similar in terms of  occupant types and functions. 
76 

To conclude, configurations A & B have different multiplier averages. However, the results do not  determine which one has a higher performance in providing useful occupant information on count and  presence.     4.1.7          In addition, the performance of Accuware Analytics Dashboard in a central node arrangement with  localized occupants was analyzed. The Analytics Dashboard used the same CSV files, but presented the  number of MAC detections in a format different from what was demonstrated in the previous  experiments. This evaluation examined whether the Analytics Dashboard could provide more useful  occupancy data in its format. The node arrangement (location and setup) was the same as configuration  B at MArch Studio (see Fig. 48).    Location diagram  Evaluation of Accuware Analytics Dashboard with configuration B at MArch Studio   

 
Fig. 48.  Central nodes application at MArch Studio.   

According to Accuware, "unmc" refers to "unique visitors" and counts the number of unique MAC  addresses. If an occupant walks by any time between 10:00 AM and 10:59 AM, he or she is counted one  time, and if the same occupant walks by at 11:00 AM, he or she is counted again. On the other hand,  "idh3" refers to "Inplace visitors" and it represents for each hour, the number of unique occupants  detected in the previous three hours, and is used to measure "stationary visitors". This means that if a  visitor is in proximity of the node between 7:00 AM and 7:59 AM, 8:00 AM and 8:59 AM, 9:00 AM and  9:59 AM, then at 10.00 AM, the visitor will be counted as 1 "inplace visitor". 
77 

Results 

  Fig. 49.  MAC detections in a period of 1 day with RSS cutoff value >  41 dBm (June 17).  

 
Fig. 50.  Analytics Dashboard result (inplace visitors) compared with result from CSV file analysis (June 17). 

  Fig. 51.  Analytics Dashboard result (unique visitors) compared with result from CSV file analysis (June 17).  78 

 
Fig. 52.  MAC detections in a period of 1 day with RSS cutoff value >  41 dBm (June 20). 

 
Fig. 53.  Analytics Dashboard result (inplace visitors) compared with result from CSV file analysis (June 20). 

  Fig. 54.  Analytics Dashboard result (unique visitors) compared with result from CSV file analysis (June 20). 

79 

Fig. 55.  MAC detections in a period of 1 day with RSS cutoff value >  41 dBm (June 21).     
 

 
Fig. 56.  Analytics Dashboard result (inplace visitors) compared with result from CSV file analysis (June 21). 
 

  Fig. 57.  Analytics Dashboard result (unique visitors) compared with result from CSV file analysis (June 21).  80 

In terms of the number of MAC detections, Fig. 49, 52 & 55 show that the number of "inplace visitors"  detected by each node is much more relevant (closer) to the number of occupants counted than the  number of "unique visitors" detected by each node. The number of "unique visitors" detected is much  larger because each occupant only needs to be detected once in a 1hour time period in order to be  counted, while an occupant needs to be detected in 3 consecutive 1hour time periods in order to be  counted as 1 "inplace visitor".    Also, the numbers of "inplace visitors" measured by Node 3 and Node 4 were almost the same on all  three days. It appears that the occupants inside the MArch Studio were detected by both nodes at the  same time. Therefore, it is possible that the number of "inplace visitors" can be represented by either  of the two nodes. The number of "inplace visitors" detected was then superimposed with the number  of MAC detections generated previously from the CSV files, along with the number of unique occupants  counted in Fig. 50, 53 & 56. The results show that the general occupancy patterns exhibited by the  number of "inplace visitors" tends to follow the same trend exhibited by the number of MAC detections.  However, there is a difference of two hours when the curve is going up, i.e. the number of MAC  detections leads the number of "inplace visitors".    For example, the initial rise in the number of "inplace visitors" lags about 2 hours behind the rise in the  number of MAC detections in all 3 days. The number of MAC detections and the number of "inplace  visitors" started to increase at 9 AM and 11 AM respectively. This also applies to the peaks of the 2  occupant patterns on all 3 days. However, when the number of overall MAC detections decreases, the  number of "inplace visitors" decreases at a similar time. This is probably due to the fact that an  occupant needs to be detected in 3 consecutive 1hour time periods in order to be counted as 1 "in place visitor" in the third 1hour time period. This mechanism only has a timedelay effect on the  general occupancy pattern when the overall number of occupants is increasing. This is because the  system will detect one less occupant when the occupant is not present in that 1hour time period.  Therefore, there is no time delay for decreasing occupancy. As a result, as shown in Fig. 51, 54 & 57, the  number of "unique visitors" starts to rise about 2 hours before the number of "inplace visitors", but  both numbers start to drop at about the same time. In addition, there is no constant relationship  between the number of "inplace visitors" and the number of unique occupants counted.   In terms of occupancy pattern, the figures exhibited by the number of "unique visitors" detected by  each node aligns more in time with the number of MAC detections measured in realtime from the CSV 
81 

files. This is because both systems measure "unique visitors" in each 1hour time period. It could not be  determined why the number of "unique visitors" measured by each node is consistently many more  than the number of MAC detections obtained from filtering the CSV files. This could be due to  Accuware's settings. The unreasonably high number of "unique visitors" makes the Analytics Dashboard  not useful in distinguishing between the occupants who spend a longer period of time in the studio from  the ones who are only there briefly.    To conclude, the "inplace visitors" figures can show the number of MAC detections that is closer to the  number of unique occupants present with a twohour time delay when the number is rising. The  "unique visitors" figures can show a realtime occupancy trend, but with the number of MAC detections  much higher than the number of unique occupants present. However, analysis using CSV files can  provide the number of MAC detections that is closer to the number of unique occupants present in real  time. Therefore, the Analytics Dashboard does not provide more useful information in its format.    4.1.8   
 

Evaluation of Accuware Analytics Dashboard over a period of 9 days 

  The Accuware Analytics Dashboard can also display historical data for any time period longer than 1 day.  Therefore, it was possible to analyze the data from June 18 to June 26. 

  Fig. 58.  MAC detections (inplace visitors) with RSS cutoff value >  41 dBm (June 18  26). 

82 

  Fig. 59.  MAC detections (inplace visitors & unique visitors) with RSS cutoff value >  41 dBm (June 18  26).   

Fig. 58 above shows the number of "inplace visitors" detected over the course of 9 days. For Node 3,  the number of "inplace visitors" detected reached its peak around 2  5 PM from Monday to Friday  (June 20 to 24). With the adjustment of the 2 hours time delay, the number of "inplace visitors"  detected actually reached its peak around 12  3 PM, which was close to the observation at the studio.  The number of "inplace visitors" reached its minimum of 4  5 detections around 6  8 PM (with time  adjustment), which was also close to the observation as classes ended around 4 PM. This minimum of 4   5 detections was constant throughout the night until 8 AM (with time adjustment) from Monday to  Friday, and throughout Saturday and Sunday. Since there was no occupant inside the studio at those  hours, these detections were actually due to the permanent WiFi devices such as WiFi access points  installed around the studio. As the number of these permanent devices was constant, their detections  by Node 3 was also constant.    Comparing the data in Fig. 59 (showing number of "unique visitors") with the data in Fig. 58 (showing  number of "inplace visitors"), Fig. 58 shows a more stabilized curve throughout each day with a clear  indication of peak and minimum occupants. While the Accuware Analytics Dashboard may not be able  to correctly estimate the small changes between each 1hour time period as shown earlier, the figures  above indicate that it can be used to estimate the overall occupancy pattern over a longer time period.  The "unique visitors" setting is more capable in predicting when the overall occupancy pattern starts to  rise. The "inplace visitors" setting is more capable in predicting the peak (with 2hour time delay) and  the moment with no or minimal occupants. It also has a closer proximity to the actual number of MAC 
83 

detections.    To conclude, the Accuware Analytics Dashboard is capable of providing some indications of the overall  pattern of space use for localized occupants over a longer period of time, for example a day or a week.  The major advantage of using the Dashboard over analysis of the downloaded CSV files to estimate  occupancy is its ease of use.    4.2    Experiment phase 2 aimed to investigate which node configuration was more capable in producing  useful occupancy data on presence, count and activity for nonlocalized occupants.    4.2.1      This configuration aimed to examine a perimeter node arrangement with nonlocalized occupants using  the space for a shorter period of time.  Configuration A at circulation area    Experiment phase 2: Comparison of configurations A & B on nonlocalized occupants 

 
Fig. 60.  Circulation area 

               
84 

Location diagram 

 
Fig. 61.   Perimeter node application at circulation area. 

  Setup  Nodes 4, 7, 8 & 9 were installed underneath the utility pipes about 500 mm away from the ceiling at 4  points inside the circulation space from May 30 to June 15 (see Fig. 60 & 61). The nodes were spaced  between 6  14 m apart.    RSS calibration 

 
Fig. 62.  RSS calibration at circulation area.    85 

 
Fig. 63.  RSS calibration on floor above circulation area. 

  Fig. 62 & 63 show that the RSS values detected at the center of the measurement area was  38dBm,  which was the smallest within the measurement area. The RSS values detected on the floor above were  all smaller than or equal to  40dBm. Therefore, a RSS cutoff value that was greater than or equal to   38dBm was selected.    Results 

 
Data 1:  13:00  13:30 PM, June 9    Data 2:  11:30  12:00 PM, June 13  Data 3:   13:30  14:00 PM, June 13   Data 4:   15:30  16:00 PM, June 13    Fig. 64.  MAC detections vs. unique people in each 30minute time period (June 9 & 13).   

86 

Fig. 65.  Multiplier vs. time on June 9 & 13. 

 

 
      Multiplier  Range of multipliers  Mean multiplier    Tab. 30.  Multiplier, range of multipliers & mean multiplier on June 9 & 13.   June 9  13:00  13:30 PM  0.30  June 13 RSS >  39 dBm  11:30  12:00 PM  13:30  14:00 PM  0.45  0.40  0.15  0.45  0.33  June 13  June 13 15:30  16:00 PM  0.15 

  Even with a higher RSS cutoff value of greater than or equal to  38dBm, a device that was close to the  location on the floor directly above Node 8 was still detected by the sensor nodes in the circulation area.  This was demonstrated by the detection of Device A (smartphone) with a frequency of 11 times, as  shown in Tab. 31. The detection of a device from the floor above suggests that there were potentially  more MAC detections included in the circulation area than were present. 
 

June 9 RSS > - 39 dBm 13:00 - 13:30 PM Unique MAC addresses Device E Device F Device B Device C (smartphone) Device G Device H Device I Device J Device D (smartphone) Device K Device L Device A (smartphone) Device M Detection freq 3 2 2 2 2 2 2 1 1 1 1 11 6

 

Tab. 31.  Device A detected on floor above with a high detection frequency. 

87 

Fig. 64 shows that in all four different time periods, the number of MAC addresses detected was less  than half of the number of unique occupants counted. It suggests that the sensor network was not  capable of measuring half of the unique devices. More importantly, there was little consistency in the  results. The multipliers vary between 0.15 and 0.45 see (Fig. 65 & Tab. 30). This suggests that on average,  each occupant who passed through the circulation was carrying less than 1 device. This was unlikely  since site observations indicated that almost all of the occupants were carrying a smartphone.    To conclude, the perimeter node arrangement does not provide reliable data for measuring non localized occupants on presence or count. This arrangement also cannot provide any information on  activity.    4.2.2      This configuration aimed to examine a central node arrangement with nonlocalized occupants using the  space for a very short period of time.  Configuration B at second floor stairway 

 
Fig. 66.  Second floor stairway. Arrow indicates Node 10 installation location. 

     
88 

Location diagram 

 
Fig. 67.   Central node application at stairway. 

  Setup  Node 10 was installed underneath the concrete slab adjacent to the handrail at the midpoint of the  flight of open stairway from May 30 to June 8 (see Fig. 66 & 67). Node 10 was a repeater.   RSS calibration 

 
Fig. 68.   RSS calibration at Stairway. 

  Fig. 68 shows that the RSS values detected at one end of the stairway was  25 dBm. A smaller RSS cut off value would create a larger detection radius measured from the node and that may result in falsely  detecting MAC addresses on the floor above and below the stairway. Therefore, a RSS cutoff value of   25 dBm was used.    

89 

Results 

 
Fig. 69.  MAC detections vs. unique people in 3 consecutive 10minute time periods (May 31). 

  The results from Fig. 69 show that 3 identical devices were detected in all cases. The OUIs of the three  MAC addresses, as shown in Tab. 32, reveal that all three devices are permanent devices (2 WiFi access  points and 1 Raspberry Pi sensor), which means the sensor network did not detect any devices carried  by any of the unique occupants counted. The results show that the system is incapable of detecting any  WiFi devices moving along the stairway.  To conclude, the central node arrangement cannot provide any reliable data for measuring non localized occupants on presence or count. This arrangement also cannot provide any information on  activity.  
MAC Address  E84E0634F656  E84E0634F6BF  B827EBB709FD    Tab. 32.  MAC address identification.  Manufacturer  EDUP International  EDUP International  Raspberry Pi 

             

90 

5.   

 

Raspberry Pi Passive infrared (PIR) people counter experiment 

This experiment aimed to examine a lowcost PIR sensor people counter with nonlocalized occupants  passing through the space over a very short period of time   5.1      Basic setup 

 
Fig. 70 (left).  Perspective view of Raspberry Pi people counter with power cable plugged in.  Fig. 71 (middle).  Side view of Raspberry Pi people counter with power cable plugged in.  Fig. 72 (right).        Sectional view of Raspberry Pi people counter. (1) Raspberry Pi 3 Model B QuadCore 1.2 GHz 1   GB RA. (2) Adjustable PIR sensor (Product Code: RBIte116). Sentry distance: Max 7 m. 

 
Fig. 73.  Enlarged photo of adjustable PIR (motion) sensor. 

91 

  Fig. 74.  Raspberry Pi people counter wiring diagram. (1) is Raspberry Pi compute3. (2) adjustable PIR sensor.    (3) Breadboard.   

The Raspberry Pi 3 (RPi) computer is a creditcard sized computer. With a monitor, keyboard, and  mouse connected to it, the RPi computer runs as a regular computer. In this project, an operating  system called Ubuntu MATE was installed on the RPi. A Python Script was written to operate the PIR  sensor to passively detect any disturbance to the infrared signal in front of the sensor. Every increment  of change in the infrared energy received will trigger a positive register of one count. The sensitivity  level of the PIR sensor was calibrated to minimize false detection due to movement and changes in  illumination level. The calibration was carried out by adjusting the trimpot located on the back of the  sensor. The distance sensitivity which has a maximum of about 7 m, however, is not adjustable and  therefore, the sensor works the best when it is pointing toward a wall. The wiring diagram of the people  counter is shown in Fig. 74.   A long rectangular box , as shown in Fig. 70  72, was custommade to contain the device with the globe like sensor (see Fig. 73) recessed about 700 mm from the rectangularshaped opening. The results show  that this recess narrows down the more globelike detection range to one that is more beamlike and  directional. This enables the sensor to focus on detecting any disturbance in front of it, instead of the  movement on the two sides.   The experiment was carried out on July 12 at 7 PM inside the main entrance to the Student Learning  Center (SLC) at Ryerson University (Fig. 75). The device was positioned at about 80 cm above ground, 

92 

with the sensor positioned perpendicular to the direction of subjects' path of walking, as shown in Fig.  76. The device was held against the top of a chair to stabilize it. The three pairs of double doors did not  obstruct the sensor detection as they did not open in the range of the sensor.   A station was set up on the other side of the lobby and the sensor was connected to a monitor,  keyboard, mouse, and power outlet (Fig. 78). The measurement period lasted for 20 minutes and a  physical count was also carried out at the same time. A measurement period of 20 minutes was selected  because previous experiments carried out using the same people counter show that the counter started  to detect disturbance incorrectly after about 30 minutes. Fig. 76 & 77 illustrate an instance of single  travel and group travel respectively.  

 
Fig. 75 (left).  Entry lobby at SLC Building.  Fig. 76 (middle).  Raspberry Pi Sensor detecting a single travel.  Fig. 77 (right).  Example of a group travel. 

 

 
Fig. 78.  Experiment setup at SLC entry lobby. 

 
93 

5.2   

 

Results 

Experiment results show that the sensor is only able to detect and register one increment of disturbance  in front of the sensor at a time. This means that the system cannot distinguish between the movement  of one subject or a group of subjects. It was found, for example, that a group of nine occupants were  only registered as one disturbance. The problem of this particular sensor tested is that it requires a no disturbance period of 2  3 seconds before it can register another disturbance.   As shown in Table 33, in the test period of 20 minutes, the physical count shows that there were a total  of approximately 53 times travelers walked passed (see Appendix D), in which 20 times were of single  travelers and 33 times were group travelers. In terms of the number of people, there were 115  occupants in group travels and a total number of 135 occupants in all travels. Single travel means that  only one person is walking past the sensor at a time. Group travel means that more than one person is  walking past the sensor. The people can be following each other and/or traveling in opposite directions.  In addition, they can be walking side by side.  
Total number of people traveled =  136  Total number of travels (single + group) =  53 ( 20 + 33 )  Total number of detection by RPi people counter =  61  Tab. 33.  Results from Raspberry Pi people counter on July 12. 

  As for the people counter, it registered a total of 61 spaced travels (see Appendix E), which is close to  the actual number (53 times) counted. The difficulty in determining the number of group travels when  the occupants are not walking closely together may have contributed to the discrepancy between the  two numbers. However, this registered number of detections is far from the total occupant count of 135,  and there is no relationship between the two numbers.   To conclude, this Raspberry Pi PIR people counter can detect presence and level of activity for non localized occupants passing through a particular point. However, the counter cannot provide any useful  information on total occupant number.        
94 

6.   

 

Discussion 

For the measurement of localized occupants, the results show that the proposed WiFi sensor network  can detect presence and provide an estimate of count with limited accuracy in both configurations A  and B. The sensor network also appears to be capable of estimating the overall occupancy pattern  (general trend) of these localized occupants, but not the absolute number of occupants. However, the  network is unable to provide any useful occupant information for nonlocalized occupants. As for the  Raspberry Pi PIR people counter, it is capable of measuring the number of spaced travels, but cannot  distinguish and count the number of individual people passing by it.   6.1    Configuration A vs. configuration B    Overall, the results show that a WiFi sensor network is able to estimate the overall occupancy pattern  of localized occupants, which means that there are generally higher number of MAC detections when  there are more occupants present. However, both configurations appear to be incapable of measuring  correctly every small change in occupancy pattern between two 1hour intervals. The multipliers  (detection ratios) also appear to vary from hour to hour, and from day to day in both configurations. The  use of a multiplier is not particularly applicable in determining the accuracy of both configurations.   According to the ANOVA analysis, configurations A and B have statistically different multiplier averages.  However, the results do not indicate which configuration is more capable of estimating the overall  occupancy pattern or count. Although configuration A tends to detect a few devices outside the  measurement area, this inaccuracy does not appear to undermine configuration A's capability in  estimating the overall occupancy pattern. On the other hand, configuration B requires less nodes, and  this may suggest that configuration B is more efficiently organized and is thus more capable of deploying  the WiFi sensor network.   Incorrect triangulation of WiFi devices in configuration A    Results show that the perimeter node application is susceptible to giving incorrect data due to the  inaccurate triangulation of the WiFi devices. By verifying some of the MAC addresses of devices placed 
95 

 

WiFi sensor network in measurement of localized occupants 

outside the nodes' perimeter, it was found that some of these devices were mistaken by the system as  being physically inside the defined perimeter. This suggests that some of these devices have had their  coordinates detected as being inside the nodes' perimeter, and the associated RSS must be larger than  the RSS cutoff value. In order to verify some of these incorrect triangulations, device M was placed in  the office outside the nodes' perimeter, as shown on Fig. 75. The results show that, even though device  M's location was separated from the nodes by two layers of walls, Node 2 still detected it with a RSS  value ranging from  38 to  54 dBm throughout the day of June 14 (See Tab. 34). It also falsely detected  it to be inside the nodes' perimeter 30 times between 8:29 AM and 5:38 PM. However, the device was  never present inside the studio.  
Toronto Time 6/14/16 8:29 AM 6/14/16 8:29 AM 6/14/16 8:32 AM 6/14/16 8:32 AM 6/14/16 8:39 AM 6/14/16 8:44 AM 6/14/16 8:44 AM 6/14/16 8:49 AM 6/14/16 8:57 AM MAC Device M Device M Device M Device M Device M Device M Device M Device M Device M Lvl 0 0 0 0 0 0 0 0 0 Lat 43.659613 43.659616 43.659625 43.659626 43.659621 43.659619 43.659619 43.659585 43.659611 Lng -79.377867 -79.377869 -79.377852 -79.377853 -79.377868 -79.377885 -79.377886 -79.377831 -79.377831 x axis 79.377867 79.377869 79.377852 79.377853 79.377868 79.377885 79.377886 79.377831 79.377831 y axis 43.659613 43.659616 43.659625 43.659626 43.659621 43.659619 43.659619 43.659585 43.659611 Coordinates Filter 1 1 1 1 1 1 1 1 1 Node Node 2 Node 2 Node 2 Node 2 Node 2 Node 2 Node 2 Node 2 Node 1 RSS
(Highest)

-47 -46 -49 -49 -44 -38 -38 -54 -57

 

Tab. 34.  Fluctuation in RSS detections of Device M. 

  In addition, devices located right outside the measurement area and are not physically separated by a  wall are more easily detected to be inside because of their high RSS values. Other identified devices that  were shown falsely inside the nodes' perimeter were actually located on the other side of the MBSc  studio (see Fig. 79). Without any physical barrier between the two sides of the studio, these devices  were easily detected by Nodes 3 & 6 with high RSS values. This level of location inaccuracy is actually  larger than the range described in the Accuware's product literature. The project's node spacing of less  than 12 15 m is supposed to produce an average accuracy of 2  3 m. For a space with small occupancy,  this level of inaccuracy can include a proportionally significant number of occupants.    The high level of inaccuracy in this research is possibly due to the high amount of noise and interference  inside the test area. According to El Amine (2014) and Mardini et al. (2014), obstacles and walls can  contribute greatly to the environmental noise. The MBSc studio was filled with partitions, models, and  building materials during the measurement period. In addition, the presence of water inside the water 
96 

pipes that the sensors were attached to may also have created more noise in the RSS measured  (Accuware, 2015). Study by Osa et al. (2012) shows that the inaccuracy in the triangulation of devices is  much higher in an environment with a higher noise level.   Furthermore, a study by Tsai et al. (2012) indicates that a location accuracy level of no more than 6.2 m  was shown in 50 % of the developed applications for indoor localization. This number is much higher  than 2  3 m as stated by Accuware. The lower location accuracy level achieved in this research project is  possibly due to the high noise level in the studio. This high level of noise reduced the performance of the  perimeter node configuration to only be able to estimate devices at roomlevel accuracy. As Locher et al.  (2015) pointed out, the fluctuation of RSS values has a less significant impact for localization estimation  over a longer period of time when the required level of accuracy is reduced from location level to room  level. This suggests that a perimeter node arrangement can still achieve roomlevel accuracy with the  presence of noise for localized occupants. Therefore, perimeter node configuration performs similarly as  central node configuration on measuring occupant count and presence.  

 
Fig. 79.  Devices (denoted by blue dots) falsely detected as inside the measurement area.   

Nodes as WiFi access points    Although both node configurations appear to have similar performance in measuring occupancy , it  seems more desirable to locate the nodes at the center of each bay. This is because central node  arrangement is similar to the layout of WiFi access points in a space, allowing the sensors' nodes to be 
97 

integrated with WiFi access points to provide wireless network access. In fact, the current node  locations in the studio are fairly close to the existing WiFi access points, as shown in Fig. 80. It makes  sense because this arrangement provides the highest coverage area with the least number of access  points. Compared with configuration A with four nodes, configuration B only uses two nodes at the  MBSc Studio for occupancy measurement.  

 
Fig. 80.  Location proximity of node to existing WiFi access point. (1) Node. (2) Existing WiFi access point at MBSC    Studio. 

  6.2    Since the experiment at the MBSc Studio shows that devices outside the measurement area at the end  of the studio were constantly being detected by the nodes, an additional sensor node was added to  cover this area to try to improve the WiFi network's capability in estimating occupancy pattern and  count. The results show no noticeable improvement in either area. This is possibly due to the general  limitations of the WiFi sensor network, which limit the capability of the system to measure only the  overall occupancy pattern for localized occupants over a longer period of time. These limitations are  discussed below:   Difficulty in relating number of MAC detections to number of unique occupants    At the beginning of this research, it was hypothesized that an average student working inside an area,  like the Building Science Studio, would have approximately two active WiFi devices. Therefore, it was  expected that by detecting the number of these devices and dividing this number by two, it was possible  to obtain a fairly accurate count of occupants in the studio. However, the results show that the 
98 

 

General system limitations 

proposed strategy is not valid based on the reasons listed below. It was found that some shortterm  occupants used their WiFi devices, especially smartphones, quite intensively during their short duration  of stay, and their MAC addresses were registered by the nodes. On the other hand, there were  occupants working in the studio for the whole hour, but they were not detected by the system since  they were not using any WiFi devices.   In addition, the number of WiFi devices per student varies significantly even in the MBSc Studio and  would likely vary significantly for other spaces. These devices include smartphones, personal computers,  tablets, or iPods. There are also students who never turn on the WiFi buttons on their smartphones.  The variations in the number of WiFi devices per occupant and occupant's WiFi usage habit within the  same occupant type makes it difficult in directly relating the number of MAC detections and the number  of unique occupants. The association of multiple devices to one occupant is consistent with the findings  in the building occupancy estimation carried out by Christensen et al. (2014) and Martani (2012).  Christensen et al. (2014) further stated in the study that the number of devices per occupant varies on a  daily basis and there is no consistency at all.   For the measurements carried out in the Lecture Room during a lecture at a convention, all the  participants were from outside the university. Almost none of them were using a laptop. It was,  however, unknown how many of the smartphones had the WiFi buttons turned on. With an occupant  type different from university students, it is still difficult to relate the number of MAC detections with  the number of unique occupants.   Lack of consistency in MAC address detection frequency    The research shows that different WiFi devices have different ranges of detection frequency, regardless  of WiFi activities performed on the devices. First, it is found that a device can almost always be  detected when its WiFi radio button is turned on from an OFF mode, or when the device uses WiFi for  the first time in the measurement area. However, if the device stays idle, or is not using Internet services  actively, it may not be detected even once in the next hour.   Second, it is found that Mac laptops (MacBooks) manufactured by Apple show a consistently lower  detection frequency than laptops (PC) made by other companies. With normal Internet usage, Macs 
99 

showed a detection frequency of about 1  10/hour while PCs showed a frequency of about 190/hour in  the same experiment. Also, some PCs, for example the Alienware laptops, showed a consistently much  higher detection frequency of about 150  400/hour. In one particular case, an iPad constantly streaming  a TV show had only a detection frequency of 10  20/hour. As for smartphones, they showed a detection  frequency range of 1  20/hour. According to studies by Accuware (2015), it is more difficult to count or  track Apple devices installed with an operating system of 9 or newer. It is because the newer operating  systems are programmed to broadcast random MAC addresses, which are by default filtered out by the  Accuware server. This is implemented as a way to protect user privacy by preventing Apple devices from  being tracked. As a result, Mac laptop devices are harder to detect, and that is why they tend to have a  lower detection frequency. Tab. 35 shows that even an Apple MacBook actively using WiFi was only  detected once or twice by the WiFi sensor network within the period of an hour.  
June 13 15:00 - 16:00 PM
Unique Wi-Fi devices detected Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 4 0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 13 1 1 1 1 1 0 0 1 1 0 1 1 0 1 1 1 1 

Device I (Macbook) Device Q (smartphone) Device A Device B Device C Device D (Wi-Fi access point) Device E (Wi-Fi access point) Device J (Macbook) Device F Device G (PC) Device N (smartphone) Device O (smartphone) Device K Device L Device R (smartphone) Device P (PC) Device H (smartphone)

1 2 27 5 58 453 166 9 1 427 4 2 110 54 4 80 2

Tab. 35.  Low detection frequency of Macbooks and smartphones. 

  Difficulty in selecting a suitable RSS cutoff value    In both configurations A & B, the RSS cutoff value application is crucial in eliminating MAC addresses  possibly detected outside the concerned measurement area. Application of RSS cutoff value is more 

100 

important in configuration B as devices are detected entirely based on their associated RSS values. The  RSS calibrations performed for each experiment has revealed that RSS values are not always inversely  proportional to distance. It was found that in MBSc and MArch studios, both iPhones 5s and 6s situated  close to the corner windows were detected with higher RSS values by the node that was further away  from the window than a closer node. It suggests that the architecture of a space has influence over the  propagation of wireless signals, in addition to the fact that building materials affect RSS values (Davies et  al., 2008). As stated by El Amine (2014), Mardini et al. (2014), and Locher et al. (2015), the RSS noise is  heavily influenced by the indoor environment, which includes physical layout, construction materials,  and different obstacles present in the space between the devices and the sensors. These factors have  caused the RSS values measured to not be inversely proportional to distances. As a result, each  dissimilar space has to be individually calibrated.   In addition, the RSS values detected from a locationstatic device are not always constant. The values  fluctuate and they spread over a range of ± 10 dBm with the majority of the detected signal strengths  being inversely proportional to distances. These findings are consistent with the results in a study  carried out by Locher et al. (2015). Their study shows that RSS values not only fluctuate considerably  over a long period of time as a result of noise and interference, but they also follow a normal  distribution curve. Furthermore, Osa et al. (2012) pointed out in their research on triangulation of  wireless devices that "the measured RSS value can vary up to 10 dB from one device to another" for the  same position, which is consistent with RSS fluctuation range observed in this research project.   The limitations mentioned above were evident in the experiment at the MBSc Studio using a central  node arrangement with an additional node to cover the other end of the studio. It was thought that this  extra node could improve the system's performance in measuring occupancy by detecting the few  devices (1  3) on the other side that were previously mistakenly measured in the experiment. However,  the two experiments show no noticeable difference, which suggests that within a group of 10 to 20  devices, the ability to detect a few more devices correctly is not as significant as the influence of the Wi Fi sensor network's limitations. To conclude, the results suggest that the sensor network measures  occupancy at a macro scale, and its performance is unaffected by small changes in occupancy. This  finding is coherent with the overall observation that the system can only predict occupancy pattern over  a longer period of time for localized occupants.  
101 

6.3   

 

WiFi sensor network in measurement of nonlocalized occupants 

Configurations A & B    Overall, the results show that for both configurations A and B the WiFi sensor network is not able to  estimate neither the count nor the occupancy pattern of the measured areas with any useful level of  accuracy. While the system can detect less than a third of the occupants in the circulation area, it can  detect none at the stairway. Because of its inability to detect nonlocalized occupants, it is not suitable  to be used for determining occupant presence or movement through the space.   Long scanning rate    During the physical count, it was observed that the majority of occupants were not using their devices  while they were maneuvering up and down the stairway. The central node was placed at the middle of  the flight of stairs and the RSS cutoff value was set to 25 dBm for a corresponding detection distance of  about 2 m, which was the width of the stairway. It was observed that each occupant spent no more than  2  4 seconds in the middle of the flight of stairs. The results show that no devices were detected. To  ensure that the lack of WiFi device detections was not due to an overly high RSS cutoff value, a lower  RSS cutoff value of greater than or equal to  35 dBm, which corresponds to a detection distance of  about 4 m, was used to check if more devices could be detected. Tab. 36 shows that the results remain  about the same with only 2 more devices being detected in the range.   
May 31  RSS >  36 dBm  RSS >  26 dBm  Number of MAC  Number of MAC  detections (not including  detections (not including  permanent WiFi devices)  permanent WiFi devices)  16:00  16:10  10  2  0  16:10  16:20  7  0  0  16:20  16:30  8  0  0  Tab. 36.  Number of MAC detections with RSS >  36 dBm and RSS >  26 dBm.  Time  Number of unique  occupants counted 
 

As for the circulation area, some of the occupants used their smartphone devices while they were going  through the space. It was observed that an average occupant spent about 8  14 seconds in the area,  excluding those actually holding a conversation there. Still, the results show no or a small number of  MAC detection. According to Vebree et al. (2013), a long scanning rate is the major reason for the lack of 
102 

WiFi detections in the measurement of nonlocalized occupants. Although Accuware sets the Open  Mesh to scan WiFi devices every five seconds, in reality, the scanning time is much longer. Even with a  scanning rate of every five seconds, the interval between two scans can be as long as one to two  minutes (Vebree et al., 2013). This is because the active scanning has to coincide with the probe  requests sent out by the devices in order to produce a successful scan. When a device is asleep, a probe  request is only sent out every minute. When a device is on standby mode, a probe request is sent out  every 4  6 seconds. As a result, even a device that is actively sending out WiFi signal for five seconds  may not be scanned by the sensor successfully in 5 seconds. Vebree et al. (2013) further pointed out  that the performance of their experiment did not improve even with a shorter scanning rate, as it did  not alter the frequency of probe requests. Therefore, in the measurement of nonlocalized occupants,  their short duration of stay in the middle of the stairway and circulation area did not allow enough time  for their devices to be scanned even if the occupants were actively using their devices.   Incorrect triangulation due to openness of circulation area    The results show that the perimeter node arrangement is only able to detect some MAC addresses in  the 30minute time period. As mentioned previously, the inaccuracy in the triangulation of devices is  further amplified by the openness of the sensor environment. The circulation area is not enclosed by  any wall on the xy plane; it is also connected to the balcony above by two vertical atriums adjacent to it.  As pointed out by Davies et al. (2008), concrete wall and slab can reduce RSS by up to 15 dBm. Without  the concrete wall separation, the devices in the immediate open area were included in the  measurement from time to time. Therefore, the openness of a circulation space makes the sensor  system vulnerable to false detections.   Other issues / drawbacks    Although the WiFi sensor network is relatively easy and economical to install, the data processing  requires complex procedures and the development of an application program interface (API) (Zhao et al.,  2015) to produce meaningful occupancy information. This is one of the reasons why this project has  subscribed to Accuware's data processing and nodesmonitoring services. Also, the MAC detection  system is entirely terminalbased and occupants may feel that they are being monitored (Zhao et al.,  2015). In addition, the system is not as userfriendly as promoted in the Accuware product literature 
103 

(Accuware, 2015). It is observed that the sensor nodes do not always function properly. Malfunctions  can occur when the nodes fail to upgrade their firmware, and due to other unknown reasons. Unlike an  Internet router, there are no reset buttons on the nodes. They have to be physically taken down and  plugged into a computer through an Ethernet cable for a manual reset. This has proven to be time consuming and technically challenging for an average person. It also suggests that the system has to be  constantly monitored.   6.4    When used alone as a people counter, the Raspberry Pi passive infrared motion sensor is nonterminal  based and it can detect presence by sensing occupants going into a room or a building. Since the system  cannot count accurately, it is impossible to determine if all occupants have left the room. As a result, the  system is not capable of determining if a room is continuously occupied. Also, the sensor cannot provide  occupant information about their activity.   However, in a scenario involving nonlocalized occupants such as people walking up and down a  stairway, this system is able to determine when and whether such space is being traveled. With the  ability to provide occupant information regarding frequency of usage, this exceptionally lowcost device  (CAN $100 for a Raspberry Pi computer and CAN $5 for a passive infrared motion sensor) can be used  easily to compare the relative space usage among different circulation spaces and at different time  intervals. However, as a passive infrared sensor, the Raspberry Pi people counter is susceptible to false  detections due to the changes in illumination level or nonoccupant related movement in the measured  environment. The experiment at SLC was not affected by the changes in light level because the  measurement area faces south and the experiment was carried out at 7 PM when the influence from  the sun was on the west. Also, there were no other student activities in the vicinity and the sensor was  pointing to a wall.   Raspberry Pi passive infrared motion sensors are classified as an open source sensor, which means they  are nonproprietary commercial products that can be bought off the shelves. Their main advantage is  that they are affordable and can be modified by users to match special needs (Weekly et al., 2014).  However, the Raspberry Pi sensors also share some of the same main drawbacks suffered by other open  source devices. First, although the purchasing cost of the components is low, it does not include the    Raspberry Pi PIR people counter in measurement of occupants 

104 

time value of labour involved in constructing, programming, and calibrating the device (Weekly et al.,  2014). Second, there are many potential sources of errors from manually assembling the parts by the  users themselves who may not have the needed expertise (Weekly et al., 2014). In the construction of  the Raspberry Pi sensor for this research project, there were errors in the scripts and codes that were  freely downloaded from the Internet. These challenges make it difficult for average users to build their  own sensors.   6.5    The previous experiments show that a WiFi sensor network is capable of predicting the overall  occupancy pattern (trend) of localized occupants throughout the day. To demonstrate how the network  can potentially be used to improve building performance, reallife applications of the network were  carried out at the Gallery (see Fig. 81) and lecture room (Pit) in the Architecture Building (see Fig. 82).   Examples of WiFi sensor network's applications 

 
Fig. 81. (left)  Fig. 82. (right)  Paul H. Cocker Gallery.  Second floor plan of the Architecture Building. (1) Gallery. (2) Room ARC 202  Lecture room (Pit). 

  Example 1 at Gallery  MArch students' thesis presentation   This example aimed to demonstrate how the realtime MAC detections produced by the use of a WiFi  sensor network can be used to control an HVAC system more effectively and improve IAQ and thermal  comfort for localized occupants who use the space over a longer period of time. The experiment took  place when the students were having a sitdown thesis presentation.  
105 

Node 3 was installed underneath the lighting power supply track at about 500 mm away from the ceiling  at the center of the Gallery (see Fig. 83) from August 23 to August 24. A "1% CO2 + RH/T" Data Logger  (see Fig. 84) manufactured by CO2 Meter was also installed next to the sensor node underneath the  adjacent power supply track. A RSS cutoff value of greater than or equal to 39 dBm was chosen. It was  the same as the cutoff value used in the single node application in MArch studio as the nodes in both  the Gallery and MArch Studio were using a similar detection radius.  

 
Fig. 83. (left)  Fig. 84. (right)  Single node application at Gallery.  1% CO2 + RH/T Data Logger of model# CM0018AA. 

  The results from Fig. 86 show that room temperature, relative humidity and CO2 concentration all  reached their peak at around 3 PM. In terms of IEQ, at 3 PM, the room temperature increased from  28.50C to 30.20C; the relative humidity increased from 34% to 42%; the CO2 concentration increased by  more than 300% from 400 ppm to 1,400 ppm. At the same time, the WiFi sensor network also detected  the maximum number of MAC detections at 3 PM (see Fig. 85). The above three IEQ parameters and the  number of MAC detections reached their peak at the same because their increases were mainly due to  an increase in the number of occupants present. This further confirms that the sensor network is  capable of predicting realtime occupancy pattern.   In addition, similar measurement results were recorded on August 24 as shown in Fig. 87 & 88. The  results show that the room temperature and the CO2 concentration increased to their maximum levels  of about 19.70C and 900 ppm, respectively, between 1:30 PM and 6 PM. This trend aligned with the  occupancy pattern measured by the sensor network.  
106 

Results on August 23 

 
Fig. 85.  Number of MAC detections in each 1hour time frame at RSS >  40 dBm. Note: Time without daylight    saving.   

 
Fig. 86.  Temperature (0C), relative humidity (%) and CO2 concentration (ppm) measured at Gallery. Note: Time    without daylight saving. 

   
107 

Results on August 24 

 
Fig. 87.  Number of MAC detections in each 1hour time frame at RSS >  40 dBm. Note: Time without daylight    saving.   

 
Fig. 88.  Temperature ( C), relative humidity (%) and CO2 concentration (ppm) measured at Gallery. Note: Time    without daylight saving. 
0

108 

This example shows that it is possible to use the realtime occupancy trend exhibited by the changes in  the number of MAC detections to control the supply of conditioned and/or fresh air and thereby  improve the IAQ and thermal comfort in the Gallery. It was observed that the Gallery currently was not  connected to any HVAC systems and it simply relied on opening the doors for any air exchange with the  conditioned atrium to improve its IEQ. Interestingly, Fig. 85 & 86 also shows that temperatures  continued to remain above 29.50C between 4:00 PM and 6:00 PM while the number of MAC detections  was decreasing. In this case, a HVAC control system using a realtime occupancy trend can potentially  save electrical energy by reducing or cutting off its supply of conditioned air. This energy savings  approach due to decreasing or no occupancy may not be possible with the use of an IEQ data logger  alone, since an uncomfortable IEQ may not require conditioning.
 

Example 2 at lecture room (Pit)  Class of 2020 undergraduates orientation    A similar setup using Node 5 and an IEQ data logger was installed in the lecture room (see Fig. 89) on  August 30. The same RSS cutoff value of greater than or equal to 46 dBm, as previously employed for  the single node application, in the lecture room was used. The results (see Fig. 90 & 91) are similar to  the ones shown in the Gallery example. A HVAC control system using reallife occupancy data provided  by the sensor network has the potential to improve the temperature, relative humidity and CO2  concentration in the lecture room between 10:30 AM and 5:00 PM.   

 
Fig. 89.  Single node application at lecture room. 

   
109 

Results on August 30 

 
Fig. 90.  Number of MAC detections in each 1hour time frame at RSS >  46 dBm. Note: Time without daylight    saving. 

 
Fig. 91.  Temperature ( C), relative humidity (%) and CO2 concentration (ppm) measured at lecture room. Note:    Time without daylight saving. 
0

 
110 

Another advantage of using WiFi sensor networks is to more effectively control building systems such  as the HVAC system is that it detects WiFi devices (occupants) instead of indoor environmental  conditions. It is very likely that an increase in the number of MAC detections is due to an increase in the  number of occupants present. For example, the presence of an occupant in a lecture room can cause an  increase in the number of MAC detections. This can trigger the HVAC supply in this room. However, a  system using only CO2 concentration as the occupant detection system may not detect any change in  CO2 level due to the presence of one occupant. As a result, no HVAC will be supplied and this will result  in an uncomfortable indoor condition. 
 

Also, WiFi devices such as smartphones mostly belong to one individual. Therefore, it is possible to use  a WiFi device within a WiFi sensor network to control building systems to provide an individualized  comfort setting in a location that is occupied by one person, such as an office. When a WiFi sensor  network detects a specific MAC address in the preset detection range, it can theoretically operate  different building systems, such as lighting, heating, and fan, to their setpoints which are decided based  on predefined values to ensure personalized comfort. According to Sarkar (2015), this automatic  building system control to achieve less energy consumption is already possible using a smartphone  application.    In addition, WiFi sensor networks are able to provide information regarding space utilization. This  information is valuable in understanding how often a space is being used. According to Sensible Building  Science (2014), overall occupancy pattern obtained from the sensor network can be used as a reference  tool in space when planning for existing and new buildings to increase costefficiency in space utilization.  It is also possible to gain insight into how the usage of a space is affected by its architectural design  through measuring occupancy. This may assist architectural planners in designing buildings that can  function closer to what is intended in the building design.       

111 

7.    7.1   

   

Conclusion  Results in response to research questions 

The experiment shows that the proposed WiFi sensor network is not capable of accurately measuring  the number of occupants who occupy a room, for example a lecture room, for a longer time period. The  WiFi sensor network is also not capable of measuring how many people pass through a particular point  in a circulation space.    In the measurement of occupants who use a room for a longer time period, the WiFi sensor network, in  general, detects more MAC addresses when there is a larger group of occupants. However, there is no  consistent relationship between the number of MAC detections and the number of occupants. The  results show that the WiFi sensor network cannot always correctly estimate the small changes between  each 1hour interval, but it can estimate the overall occupancy pattern in the course of a day and in a  longer time period. The system can predict when there is occupant presence, and if the occupancy is  overall increasing, decreasing, at its peak or at its lowest point in the course of a day.     In measuring how many people pass through a particular point, the WiFi sensor network cannot detect  any WiFi devices that are only present for a very short period of time and are with no or limited WiFi  activities. Occupants have to be actively exchanging WiFi signals with the sensor network while the  device is being scanned for a successful detection. 
 

7.2 
 

 

WiFi sensor network compared with other major occupant detection systems 

In terms of finegrained occupancy information, the WiFi sensor network can detect occupant presence  and can estimate the general trend in occupancy pattern, but it cannot provide accurate information  regarding occupant count and activity.     Compared to other occupant detection systems, its major advantage is its easy deployment. The WiFi  sensor network installed had 10 nodes and it only took 4 hours to install them. The installation process  included connecting the power and Ethernet cables, and mounting the nodes to the ceiling. This process  did not require any particular knowledge in networking. The sensor network was fully operating within  24 hours after installation. Unlike PIR systems, WiFi sensor networks do not require a clear line of sight. 
112 

And unlike CO2, PIR, ultrasonic and audio based systems, WiFi sensors networks are not susceptible to  changes in environmental factors. The only factor to be calibrated in a WiFi sensor network is the RSS  cutoff value. For an openconcept office space, RSS calibration can be carried out simply using the slide  bar inside the Accuware Analytics dashboard. 
 

Its other major advantage is its low infrastructural cost. To install a system using Accuware services,  there is only the cost associated with the sensor nodes and the subscription services. And if occupant  data can be extracted from existing WiFi network, there will be no infrastructural cost at all. Other  detection systems such as visionbased systems, RFID tags systems and PIR people counters involve  expensive equipment and installation costs.    The major disadvantage of a WiFi sensor network system is that it cannot detect and deliver an  accurate occupant count. Also, the effectiveness of a WiFi sensor network in detecting occupancy  information is entirely based on how many active WiFi devices are present. Unlike CO2, PIR, and  ultrasonic audio and vision based systems, WiFi sensor networks do not detect any actions except the  WiFi activities carried out by the occupants. And unlike CO2 and audio based systems, which can be  calibrated to improve their accuracy in providing a count of all occupants, WiFi systems cannot be  further calibrated once a RSS cutoff value is set. Therefore, WiFi sensor networks cannot provide  occupant count, but only the general trend in occupancy pattern. In addition, the performance of WiFi  sensor networks is highly dependent on the user types and the functions of the spaces measured. WiFi  sensor networks are very likely to perform poorly in certain locations, for example a concert hall or a  gymnasium, where the use of any WiFi devices is minimal. 
 

To conclude, WiFi sensor networks can detect occupant presence and estimate overall occupancy  pattern for localized occupants. With its low infrastructural cost and ease of deployment, there is great  potential to develop more WiFi sensor networks to improve building performance in the future.    7.3    Unexpectedly, one important finding from the experiments carried out is that the central node  application seems to perform as well as the perimeter node application in measuring localized  occupants. This finding is contradictory to what is suggested in the Accuware's product literature. It is  possibly because the product literature is more concerned with the tracking of WiFi device locations, 
113 

 

Contributions 

which is dependent on the triangulation of devices. As a result, a perimeter node arrangement is  preferred. For the purpose of improving building performance, high location accuracy is not important  as long as the occupants are within the served area. This finding also economizes the number of sensor  nodes needed for estimating occupant count.    In addition, the limitations of the proposed WiFi sensor network were identified in this research project.  The proposed WiFi system is only capable of estimating the overall occupancy pattern of occupants  who use the space for a long time period. This system is incapable of estimating occupant count due to  the system's incapability in detecting all devices, and the lack of constant relationship between the  number of devices and the number of occupants.    7.4    It is recommended that the experiments be carried out with more occupants involved to further  investigate the level of accuracy in estimating occupant count and pattern. Unfortunately they were not  achieved by the proposed WiFi sensor network. Current experiments took place in the summer  semester when occupancy was relatively lower than when the university was built is in full session.    Also, there is potential to investigate the intensity of space usage by occupants at different locations  throughout the floor plan. This investigation will have to be carried out with the use of more nodes to  cover the complete floor. It will require a more developed heat density map tool by Accuware. Currently,  the tool is only in its developing stage and the results generated are not able to accurately represent the  changing occupant density throughout the day.      Future work 

114 

Appendix A 
 

Accuware dashboard 

1. 
 

Accuware dashboard showing MAC detections at the Architecture Building. 

    2.   

  Accuware dashboard showing details of each MAC detection at the Architecture Building. 

       
115 

 

Appendix B  Accuware Analytics dashboard    Accuware Analytics dashboard showing realtime site statistics at the Architecture Building.   

                                                     
116 

 

Appendix C   
 

Example result from Experiment phase 1: Configuration A at MBSc Studio  (Localized occupants), RSS >  40 dBm 
8:00 - 9:00 AM 9:00 - 10:00 AM
Physical count n. a. Device A (smartphone) Device E Device C (PC) Device AA Device AB Device AC Device D (PC) 4 1 3 3 2 2 217 Unique Wi-Fi devices detected No. of No. of devices devices Detection w/ w/ freq detection detection freq > 100 freq < 100 1 0 0 0 0 0 0 1 6 1 1 1 1 1 1 0 Physical count n. a. No. of No. of devices devices Detection w/ w/ freq detection detection freq > 100 freq < 100 2 1 1 2 2 3 7 0 0 0 0 0 0 0 0 7 1 1 1 1 1 1 1

 

Unique Wi-Fi devices detected

Device X Device A (smartphone) Device Y Device Z Device B (smartphone) Device C (PC) Device D (PC)

10:00 - 11:00 AM
Unique Wi-Fi devices detected No. of No. of devices devices Detection w/ w/ freq detection detection freq > 100 freq < 100 4 1 184 4 1 0 0 1 0 3 1 1 0 1 Physical count n. a. Device I (Macbook) Device A (smartphone) Device AD Device AE Device J (Macbook) Device K Device L (Macbook) Device G (PC) Device C (PC) Device M (PC) Device N (smartphone) Device O (smartphone) Device AF Device AG Device AH Device P (PC) Device H (smartphone) Unique Wi-Fi devices detected

11:00 - 12:00 PM
No. of No. of devices devices Detection w/ w/ freq detection detection freq > 100 freq < 100 5 1 1 1 5 1 3 397 6 126 3 1 76 1 28 42 5 2 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 0 15 1 1 1 1 1 1 1 0 1 0 1 1 1 1 1 1 1 Physical count 6

 

Device F (Macbook) Device B (smartphone) Device G (PC) Device H (smartphone)

             

 

117 

12:00 - 13:00 PM
Unique Wi-Fi devices detected No. of No. of devices devices Detection w/ w/ freq detection detection freq > 100 freq < 100 1 3 5 8 4 11 402 1 2 178 58 18 74 4 2 0 0 0 0 0 0 1 0 0 1 0 0 0 0 12 1 1 1 1 1 1 0 1 1 0 1 1 1 1 Physical count 6 Device I (Macbook) Device Q (smartphone) Device A (smartphone) Device AD Device AI Device AJ Device AK Device L (Macbook) Device G (PC) Device S (smartphone) Device T (smartphone) Device U (ipod) Device V (smartphone) Device N (smartphone) Device O (smartphone) Device AF Device AH Device R (smartphone) Device P (PC) Device W (smartphone) Device H (smartphone) Unique Wi-Fi devices detected

13:00 - 14:00 PM
Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 2 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 19 1 1 1 1 1 1 1 1 0 1 1 1 1 1 1 0 1 1 1 1 1 Physical count 10

Device I (Macbook) Device Q (smartphone) Device AD Device AI Device AJ Device AK Device G (PC) Device C (PC) 1C56FE188A1A Device AF Device AH Device R (smartphone) Device P (PC) Device H (smartphone)

3 3 1 1 16 10 53 4 135 6 1 2 1 3 1 141 50 7 75 1 6

14:00 - 15:00 PM
Unique Wi-Fi devices detected Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 4 0 0 0 0 0 0 1 1 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 19 1 1 1 1 1 1 0 0 1 0 1 1 1 1 1 1 1 0 1 1 1 1 1 Physical count 8 Device I (Macbook) Device Q (smartphone) Device AR Device AD Device AK Device AL Device AM Device J (Macbook) Device AS Device G (PC) Device N (smartphone) Device O (smartphone) Device AF Device AH Device R (smartphone) Device P (PC) Device H (smartphone) Unique Wi-Fi devices detected

15:00 - 16:00 PM
Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 4 0 0 0 0 0 1 1 0 0 1 0 0 1 0 0 0 0 13 1 1 1 1 1 0 0 1 1 0 1 1 0 1 1 1 1 Physical count 7

 

Device I (Macbook) Device Q (smartphone) Device A (smartphone) Device AI Device AJ Device AK Device AL Device AM Device E Device G (PC) Device S (smartphone) Device C (PC) Device T (smartphone) Device M (PC) Device AN Device AO Device O (smartphone) Device AF Device AH Device AP Device P (PC) Device AQ Device H (smartphone)

1 1 9 6 4 54 380 154 1 288 12 6 1 1 1 3 4 109 50 1 84 1 1

1 2 27 5 58 453 166 9 1 427 4 2 110 54 4 80 2

                   

 

118 

16:00 - 17:00 PM
Unique Wi-Fi devices detected No. of No. of Detection devices w/ devices w/ Physical freq detection detection count freq > 100 freq < 100 1 4 1 72 440 161 4 426 1 1 10 116 57 15 76 1 4 4 0 0 0 0 1 1 0 1 0 0 0 1 0 0 0 0 0 13 1 1 1 1 0 0 1 0 1 1 1 0 1 1 1 1 1 7 Device Q (smartphone) Device AD Device AJ Device AK Device AL Device AM Device AV Device AW Device L (Macbook) Device G (PC) Device AT Device AX Device N (smartphone) Device AY Device O (smartphone) Device AZ Device AF Device AH Device R (smartphone) Device P (PC) Device W (smartphone) Device H (smartphone) Unique Wi-Fi devices detected

17:00 - 18:00 PM
Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 3 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 19 1 1 1 1 0 0 1 1 1 1 1 1 1 1 1 1 0 1 1 1 1 1 Physical count 11

Device Q (smartphone) Device AR Device AD Device AK Device AL Device AM Device J (Macbook) Device G (PC) Device AT Device N (smartphone) Device O (smartphone) Device AF Device AH Device R (smartphone) Device P (PC) Device AU Device H (smartphone)

1 2 5 50 418 150 1 15 2 11 33 2 1 8 5 1 109 36 6 78 2 2

18:00 - 19:00 PM
Unique Wi-Fi devices detected Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 2 0 0 1 1 0 0 0 0 6 1 1 0 0 1 1 1 1 Physical count n. a. Device A (smartphone) Device AL Device AM Device B (smartphone) Device BC Device BD Device D (PC) Unique Wi-Fi devices detected

19:00 - 20:00 PM
Detection freq No. of No. of devices devices w/ w/ detection detection freq > 100 freq < 100 2 0 1 1 0 0 0 0 5 1 0 0 1 1 1 1 Physical count n. a.

 

Device I (Macbook) Device BA Device AL Device AM Device J (Macbook) Device BB Device E Device AF

1 1 217 164 4 2 2 41

1 159 256 4 1 2 5

                     
119 

 

Appendix D       

Physical count from Raspberry Pi PIR people counter experiment  (at Ryerson University Student Learning Centre on July 12, 2016) 
July 12 (Tuesday)  Physical count at Student Learning Center 

Time  19:00 PM                                                     

Single  travel          1    1  1    1      1        1    1      1    1  1  1  1 

Group  travel  2  2  4  2    3      2    5  3    2  2  4    5    3  5    3         

Time                                                    19:20 PM 

Single  travel          1      1              1  1          1    1    1  1 

Group  travel  2  2  2  4    3  3    3  3  5  8  2  3      3  9  2  8    3    4     

Total number of people traveled = 136  Total number of travels (single + group) = 53 ( 20 + 33 )  Total number of detection by RPi people counter = 61 

                   
120 

Appendix E     

Partial data recorded by Raspberry Pi PIR people counter   (at Ryerson University Student Learning Centre on July 12, 2016) 

  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:31.218780  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:32.220173  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:33.221542  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:34.222920  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:35.224317  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  Intruder detected Total number of people : 49    20160712 19:17:38.227722  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:39.229125  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:40.230518  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0    20160712 19:17:41.231918  20160712 19:20:25.051104 Five min  20160712 21:05:24.240268 Hours Plus  No intruders 0  121 

Appendix F 

Macro script for coordinates filter 

  Function PointInPolygon(rXY As Range, rpolyXY As Range) As Boolean   ' Function checks if X,Y given in rXY falls within complex _    polygon as defined by node list rpolyXY. _    rXY to be 2 cell range with one X and one Y value _    rpolyXY to be 2 column range with for each node on the polygon _    the X and the Y point      Dim i As Integer, j As Integer, polySides As Integer   Dim oddNodes As Boolean   Dim x As Double, y As Double   Dim aXY As Variant      oddNodes = False   x = rXY.Cells.Value2(1, 1)   y = rXY.Cells.Value2(1, 2)   aXY = rpolyXY.Value      polySides = rpolyXY.Rows.Count   j = polySides      For i = 1 To polySides    If (((aXY(i, 2) < y And aXY(j, 2) >= y) _     Or (aXY(j, 2) < y And aXY(i, 2) >= y)) _     And (aXY(i, 1) <= x Or aXY(j, 1) <= x)) Then     oddNodes = oddNodes Xor (aXY(i, 1) + (y  aXY(i, 2)) / (aXY(j, 2)  aXY(i, 2)) * (aXY(j, 1)  aXY(i, 1)) < x)    End If    j = i   Next i   PointInPolygon = oddNodes  End Function 

             

122 

References 
  Abraham, S., & Li, X. (2014).A costeffective wireless sensor network system for indoor air quality monitoring  applications. Procedia Computer Science, 34, 165171.doi:10.1016/j.procs.2014.07.090    Accuware. (2015). Accuware WiFi Location Monitor. Retrieved from  http://public.accuware.com/files/Accuware_WiFi_Location_Monitor_Fact_Sheet.pdf [Accessed 30 June 2016]    Accuware. (2015). Plan an installation. Retrieved from https://www.accuware.com/support/plananinstallation  [Accessed 30 June 2016]    Aiello, M., & Nguyen, T. A. (2013). Energy intelligent buildings based on user activity: A survey. Energy and  Buildings, 56, 244257.doi:10.1016/j.enbuild.2012.09.005    Ali, A. S., Zanzinger, Z., Debose, D., & Stephens, B. (2016). Open source building science sensors (OSBSS): A low cost arduinobased platform for longterm indoor environmental data collection. Building and Environment, 100,  114126. doi:10.1016/j.buildenv.2016.02.010    Amine, C., Mohamed, O., & Boualam, B. (2016). The implementation of indoor localization based on an  experimental study of RSSI using a wireless sensor network. PeertoPeer Networking and Applications, 9(4), 795 808. doi:10.1007/s1208301503729    Balaji, B., Xu J., Nwokafor, A., Gupta, R., & Agarwal, Y. (2013). Sentinel: occupancy based HVAC actuation using  existing WiFi infrastructure within commercial buildings. In: Proceedings of the 11th ACM conference on embedded  networked sensor systems, 17:1­17:14. doi:10.1145/2517351.2517370    Barlex, M. J. (2006). Guide to Post Occupancy Evaluation. London: HEFCE/AUDE.    Benezeth, Y., Laurent, H., Emile, B., & Rosenberger, C. (2011). Towards a sensor for detecting human presence and  characterizing activity. Energy & Buildings, 43(2), 305314.doi:10.1016/j.enbuild.2010.09.014    Calì, D., Matthes, P., Huchtemann, K., Streblow, R., & Müller, D. (2015). CO2 based occupancy detection algorithm:  Experimental analysis and validation for office and residential buildings. Building and Environment, 86, 3949.  doi:10.1016/j.buildenv.2014.12.011    Christensen, K., Melfi, R., Nordman, B., Rosenblum, B., & Viera, R. (2014).Using existing network infrastructure to  estimate building occupancy and control plugged in devices in user workspaces. Commun. Networks Distrib. Syst.  12 (1), 4­29.    Davies, J. N., Grout, V., & Picking, R. (2008).Chapter 3  Mobile and Wireless Networking Prediction of Wireless  Network Signal Strength within a Building. In Furnell, S. & Dowland, P. (Eds.), Proceedings of the Seventh  International Network Conference (INC 2008), 193207. U.K.: University of Plymouth.    Dougan, D. S., & Damiano, L. (2004). CO2based demand control ventilation: Do risks outweigh potential rewards?  ASHRAE Journal, 46(10), 47.    Emmerich, S., & Persily, A. (2001). Stateoftheart review of CO2 demand controlled ventilation technology and  application. National Institute of Standards and Technology. NISTIR 6729, Gaithersburg.    El Amine, C.M., Mohamed, O. & Boualam, B. (2016). PeertoPeer Netw. Appl. 9: 795. doi:10.1007/s12083015 03729   

123 

Ferdoush, S., & Li, X. (2014). Wireless sensor network system design using raspberry pi and arduino for  environmental monitoring applications. Procedia Computer Science, 34, 103110.doi:10.1016/j.procs.2014.07.059    Floyd, D. B., Parker, D. S., & Sherwin, J. R. (1996). Measured field performance and energy savings of occupancy  sensors: Three case studies. Florida Solar Energy Center, Cocoa (FL).    Froehlich, J. E., Larson, E., Campbell, T., Haggerty, C., Fogarty, J., & Patel, S. N. (2009). Hydrosense: infrastructure mediated singlepoint sensing of wholehome water activity. In Proceedings of the 11th international conference  on Ubiquitous computing, Ubicomp'09, ACM, New York, NY. 235­244.    Goyal, S., Barooah, P., & Middelkoop, T. (2015).Experimental study of occupancybased control of HVAC zones.  Applied Energy, 140, 7584.doi:10.1016/j.apenergy.2014.11.064    Guo, X., Tiller, D., Henze, G., & Waters, C. (2010). The performance of occupancybased lighting control systems: A  review. Lighting Research & Technology, 42(4), 415431. doi:10.1177/1477153510376225    Hashemi H. (1993). The indoor radiation propagation channel. Proceedings of the IEEE, 81(7): 943­968.    Hashimoto, K., Morinaka, K., Yoshiike, N., Kawaguchi, C., & Matsueda, S. (1997). People count system using multi sensing application. Paper presented at the , 2 12911294 vol.2. doi:10.1109/SENSOR.1997.635472    Hern, S. C., Tsang, A. M., Robinson, J. P., Klepeis, Neil E. Nelson, William C, Switzer, P., Engelmann, W. H.. . Behar, J.  V. (2001). The national human activity pattern survey (NHAPS): A resource for assessing exposure to  environmental pollutants. Journal of Exposure Analysis and Environmental Epidemiology, 11(3), 231252.  doi:10.1038/sj.jea.7500165    Huang, Q., Ge, Z., & Lu, C. (2016). Occupancy estimation in smart buildings using audioprocessing techniques.    Huizenga, C., Abbaszadeh S., Zagreus L., & Arens E. (2006). Air quality and thermal comfort in office buildings.  Results of a large indoor environmental quality survey. Proceedings, Healthy Buildings, Vol.III, 393397.    IEEE Standards Association. (n.d.). OUI/MAL Organization Company ID Organization. Retrieved from  http://standardsoui.ieee.org/oui/oui.txt [Accessed 5 July 2016]    IndoorAtlas. (n.d.). Use cases. Retrieved from https://www.indooratlas.com/usecases/ [Accessed 5 July 2016]    Infodev. (2014). Counting in Buildings: Products That Count Your Visitors or Customers Automatically. Retrieved  fromhttp://www.infodev.ca/buildings/productsandpeoplecounters.html [Accessed 5 July 2016]    Irisys. (2015). How does People Counting work? Retrieved from http://www.irisys.net/peoplecounting/howit works [Accessed 5 July 2016]    Jang, W., Healy, W. M., & Skibniewski, M. J. (2008). Wireless sensor networks as part of a webbased building  environmental monitoring system. Automation in Construction, 17(6), 729736.doi:10.1016/j.autcon.2008.02.001    Kaaranen, H., Ahtiainen, A., Laitinen, L., Naghian, S., & Niemi, V. (2005). UMTS networks: Architecture, mobility and  services. Amsterdam: Wiley.    Kattanek, W., Uziel, S., & Elste, T. (2014). Energyefficient high performance acoustic processing unit. IEEE Design,  Automation and Test in Europe.    Ke, Y., & Mumma, S. A.(1997). Using carbon dioxide measurements to determine occupancy for ventilation  controls. ASHRAE Transactions, 103(2), 365­374.  124 

Khoury, H. M., & Kamat, V. R. (2009). Evaluation of position tracking technologies for user localization in indoor  construction environments. Automation in Construction, 18(4), 444457.doi:10.1016/j.autcon.2008.10.011    Lee, S., Ha, K. N., & Lee, K. C. (2006). A pyroelectric infrared sensorbased indoor locationaware system for the  smart home.IEEE Transactions on Consumer Electronics, 52(4), 13111317.doi:10.1109/TCE.2006.273150    Libelium. (n.d.) Smartphone, Cellular, Mobile and Hand Phone Detection. Retrieved from  http://www.libelium.com/products/meshlium/smartphonedetection/[Accessed 5 July 2016]    Liu, D., Du, Y., Zhao, Q., & Guan, X. (2012). Visionbased indoor occupants detection system for intelligent  buildings. Paper presented at the 273278. doi:10.1109/IST.2012.6295489    Locher, T., Wattenhofer, R., & Zollinger, A. (2005). Receivedsignalstrengthbased logical positioning resilient to  signal fluctuation. Sixth International Conference on Software Engineering, Artificial Intelligence, Networking and  Parallel/Distributed Computing and First ACIS International Workshop on SelfAssembling Wireless Network, 396 402. doi: 10.1109/SNPDSAWN.2005.63    Maniccia, D., Rutledge, B., Rea, M. S., & Morrow, W. (1999). Occupant use of manual lighting controls in  private offices. Journal of the Illuminating Engineering Society, 28, 42­56.    Mendell, M. J. (1993). Nonspecific symptoms in office workers: A review and summary of the epidemiologic  literature. Indoor Air, 3(4), 227236.doi:10.1111/j.16000668.1993.00003.x    Mardini, W., Khamayseh, Y., Almodawar, A., & Elmallah, E. (2016). Adaptive RSSIbased localization scheme for  wireless sensor networks. PeertoPeer Networking and Applications, 9(6), 9911004. doi:10.1007/s12083015 0370y    Martani, C., Lee, D., Robinson, P., Britter, R., & Ratti C. (2012) ENERNET: studying the dynamic relationship  between building occupancy and energy consumption. Energy Build. 47, 584­659.    Milenkovic, M., & Amft, O. (2013). Recognizing energyrelated activities using sensors commonly installed in office  buildings. Procedia Computer Science, 19, 669677.doi:10.1016/j.procs.2013.06.089    Mumma, S. A. (2004).Transient Occupancy Ventilation By Monitoring CO2.ASHRAE IAQ Application, 5 (1), 2123.    Nassif, N. (2012). A robust CO2based demandcontrolled ventilation control strategy for multizone HVAC systems.  Energy and Buildings, 45, 7281.doi:10.1016/j.enbuild.2011.10.018    National Lighting Product Information Program. (1998). Occupancy Sensors: Motion Sensors for Lighting Control.  Troy, New York, NY.    Natural Resources Canada. (2016). HVAC & Energy Systems. Retrieved from  http://www.nrcan.gc.ca/energy/efficiency/housing/research/3937 [Accessed on July 24]    Nguyen, T. A., Raspitzu, A., & Aiello, M. (2014). Ontologybased office activity recognition with applications for  energy savings. Journal of Ambient Intelligence and Humanized Computing, 5(5), 667681.doi:10.1007/s12652013 02067    Open Mesh. (2016). OM2P 150 Mbps Access Point with External Antenna. Retrieved from http://www.open mesh.com/products/grpom2p.html [Accessed on July 2 2016)    Osa, V., Matamales, J., Monserrat, J., & López, J. (2013). Localization in wireless networks: The potential of  triangulation techniques. Wireless Personal Communications, 68(4), 15251538. doi:10.1007/s1127701205372  125 

Patel, S. N., Reynolds, M. S., & Abowd, G. D. (2008). Detecting human movement by differential air pressure  sensing in HVAC system ductwork: An exploration in infrastructure mediated sensing. In Proceedings of the 6th  International Conference on Pervasive Computing, Pervasive '08, SpringerVerlag, Berlin, Heidelberg, 1­18.    Patel, S. N., Robertson, T., Kientz, J. A., Reynolds, M. S., & Abowd, G. D. (2007). At the flick of a switch: Detecting  and classifying unique electrical events on the residential power line (nominated for the best paper award). (pp.  271288). Berlin, Heidelberg: Springer Berlin Heidelberg. doi:10.1007/9783540748533_16    PérezLombard, L., Ortiz, J., & Pout, C. (2008). A review on buildings energy consumption information. Energy &  Buildings, 40(3), 394398.doi:10.1016/j.enbuild.2007.03.007    Rahman, A., Devi, P., Partiwi, S. G., & Sudiarno, A. (2012). Occupant movement tracking in highrise building  evacuation planning using RFID technology and SMS gateway. Paper presented at the 16.  doi:10.1109/SEANES.2012.6299566    Richman, E. E., Dittmer, A. L., & Keller, J. M. (1996). Field Analysis of occupancy sensor operation: Parameters  affecting lighting energy savings. Journal of the Illuminating Engineering Society, 25,83­92    Sarkar, C., Nambi S.N., A. U., & Prasad, R. V. (2015). Poster Abstract: Learning Individual Preferences for Energy Efficiency and Comfortable Living. Proceeding BuildSys '15 Proceedings of the 2nd ACM International Conference on  Embedded Systems for EnergyEfficient Built Environments, 115116.    Sensible building science. (2014). Case study 1 ­ SchedulingOccupancy Analysis. Retrieved from  http://sensiblebuildingscience.com/wpcontent/uploads/2014/11/Casestudy1SchedulingOccupancy Analysis.pdf [Accessed 6 May 2016]    Sensible building science. (2014). Case Study 2 ­ EnergyOccupancy Analysis. Retrieved  fromhttp://sensiblebuildingscience.com/wpcontent/uploads/2014/11/CaseStudy2EnergyOccupancy Analysis.pdf [Accessed 6 May 2016]    Sensible building science. (2015). Case Study 3 ­ Pilot Study Results Summary. Retrieved  fromhttp://sensiblebuildingscience.com/wpcontent/uploads/2015/01/CaseStudy3UBCpilotstudyresults.pdf  [Accessed 6 May 2016]    Spengler, J. D., Samet, J. M., & McCarthy, J. F. (2001). Indoor Air Quality Handbook: Sick building syndrome studies  and the compilation of normative and comparative values. New York, NY: McGraw Hill.    Teixeira, T., Dublon, G., & Savvides, A. (n.d.). A Survey of Humansensing: Methods for Detecting Presence, Count,  Location, Track, and Identity. Retrieved from http://www.eng.yale.edu/enalab/publications/human sensing  enalabWIP.pdf [Accessed 12 July 2016]    Tsai, S., Lau, S., & Huang, P. (2012). BWSNbased RealTime Indoor Location System at the Taipei World Trade  Center: Implementation, Deployment, Measurement, and Experience Sensors, IEEE, 1 ­ 4, 28­31    United Nations Environment Programme (UNEP). (n.d.). Sustainable Buildings and Climate Initiative. Retrieved  from http://www.unep.org/sbci/AboutSBCI/Background.asp {Accessed on July 24 2016}    United States Environmental Protection (EPA). (2009). Water Sense. EPA 402K02008. Retrieved from  https://www3.epa.gov/watersense/commercial/types.html [Accessed 25 July 2016]       

126 

United States Environmental Protection Agency Office of Air and Radiation (EPA). (2003). Indoor air quality tools  for schools Communications guide. EPA 402K02008.Retrieved from  https://www.epa.gov/sites/production/files/201408/documents/communicationsguide.pdf [Accessed 12 July  2016]    Uziel, S., Elste, T., Kattanek, W., Hollosi, D., Gerlach, S., & Goetze, S. (2013). Networked embedded acoustic  processing system for smart building applications. Paper presented at the 349350.    Verein Deutscher Ingenieure. (2003). Building Automation and Control Systems (BACS). Points Lists and Functions ­  Examples (VDI3814). Dusseldorf: Verein Deutscher Ingenieure.    Wargocki, P., & Wyon, D. P. (2007). The effects of moderately raised classroom temperatures and classroom  ventilation rate on the performance of schoolwork by children (RP1257). HVAC&R Research, 13(2), 193220.  doi:10.1080/10789669.2007.10390951    Wahl, F., Milenkovic, M., & Amft, O. (2012). A distributed PIRbased approach for estimating people count in office  environments. Paper presented at the 640647. doi:10.1109/ICCSE.2012.92    Weekly, K., Zou, H., Xie, L., Jia, Q., & Bayen, A. M. (2014). Indoor occupant positioning system using active RFID  deployment and particle filters. Paper presented at the 3542. doi:10.1109/DCOSS.2014.53    Yun, J., & Song, M. (2014). Detecting direction of movement using pyroelectric infrared sensors. IEEE Sensors  Journal, 14(5), 14821489.doi:10.1109/JSEN.2013.2296601    Yokoishi, T., Mitsugi, J., Nakamura, O., & Murai, J. (2012). Room occupancy determination with particle filtering of  networked pyroelectric infrared (PIR) sensor data. Paper presented at the 14. doi:10.1109/ICSENS.2012.6411114    Zappi, P., Farella, E., & Benini, L. (2007). Enhancing the spatial resolution of presence detection in a PIR based  wireless surveillance network. In Proceedings of the IEEE Conference on Advanced Video and Signal Based  Surveillance, London, UK, 295­300.    Zappi, P., Farella, E. & Benini, L. (2008). Pyroelectric infrared sensors based distance estimation. In Proceedings of  the 7th IEEE Sensors Conference (IEEE Sensors' 08), Lecce, Italy, 716­719.    Zappi, P., Farella, E., & Benini, L. (2010). Tracking motion direction and distance with pyroelectric IR sensors. IEEE  Sens. J., 10, 1486­1494.    Zhao, Y. Y., Labeodan, T. T., Boxem, G. G., & Zeiler, W. W. (2015). Occupancy measurement in commercial office  buildings for demanddriven control applications: A survey and detection system evaluation. Energy and Buildings,  93, 303314.doi:10.1016/j.enbuild.2015.02.028. 

127 

