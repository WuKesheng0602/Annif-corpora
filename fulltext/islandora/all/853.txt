Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2003

3D modelling of industrial piping systems using digital photogrammetry and laser scanning
Jingook Hong
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Recommended Citation
Hong, Jingook, "3D modelling of industrial piping systems using digital photogrammetry and laser scanning" (2003). Theses and dissertations. Paper 183.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

NOTE TO USERS

This reproduction is the best copy available.

®

UMI
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3D MODELLING OF INDUSTRIAL PIPING SYSTEMS USING DIGITAL PHOTOGRAMMETRY AND LASER SCANNING

by Jingook Hong, B.Eng. Ryerson University, 2001

A thesis submitted to the School of Graduate Studies of Ryerson University

in partial fulfillment of the requirements for the degree of Master of Applied Science in Civil Engineering

Department of Civil Engineering Ryerson University Toronto, Ontario, Canada

© 2003 Jingook Hong

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

UMI Number: EC52884

INFORMATION TO USERS

The quality of this reproduction is dependent upon the quality of the copy submitted. Broken or indistinct print, colored or poor quality illustrations and photographs, print bleed-through, substandard margins, and improper alignment can adversely affect reproduction. In the unlikely event that the author did not send a complete manuscript and there are missing pages, these will be noted. Also, if unauthorized copyright material had to be removed, a note will indicate the deletion.

®

UMI
UMI Microform EC52884 Copyright 2008 by ProQuest LLC. All rights reserved. This microform edition is protected against unauthorized copying under Title 17, United States Code. ProQuest LLC 789 E. Eisenhower Parkway PO Box 1346 Ann Arbor, MI 48106-1346

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

BORROWER'S PAGE

Ryerson University requires the signatures of all persons using or photocopying this thesis. Please sign below, and give address and date.

NAME

ADDRESS

DATE

.

iii

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3D MODELLING OF INDUSTRIAL PIPING SYSTEMS USING DIGITAL PHOTOGRAMMETRY AND LASER SCANNING
Master of Applied Science, 2003 Jingook Hong, Department of Civil Engineering, Ryerson University

ABSTRACT
Industrial metrology is one of the fastest growing areas in advanced technologies, such as electronics and optics, computation speed, and it has been increased in recent years. There are several tools used in industrial metrology, such as total stations, digital photogrammetry, and laser scanning. Close range digital photogrammetry has been implemented for an industrial piping system in terms of installation, inspection, and replacement. Laser scanning is also used for industrial measurements to generate 3D coordinates points. In order to develop a 3D modelling strategy, this thesis focuses on the development, selection and design of photogrammetric procedures and project specific targets. This thesis also explores image-acquiring sensors such as digital cameras and laser scanners in terms of their capabilities and advantages. Based on experimental setup accuracy, measurements of-piping systems are compared for applications of two different sensors. Effects of different surface materials are examined in laser scanning applications and several different types of materials are used for acquiring point clouds data. Measurement of pipes' diameters and residual analyses are conducted with different surface materials, which are used for industrial pipes. Significant improvement in laser scanning data acquisition is examined in terms of data quality both quantitatively and qualitatively during the residual analyses.

.

iv

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

ACKNOWLEDGMENTS

I would like to give special thanks to Dr. Michael A. Chapman, my supervisor, who guided me throughout the production of this thesis. I would also like to thank my colleague, Artur Fidera who provided the residual analysis computer software package. Thanks also go to my wife, Jiyean, who always supports and encourages me.

v

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

TABLE OF CONTENTS
AUTHOR'S DECLARATION BORROWER'S PAGE ABSTRACT ............................................................ .
11
III

..

...................................................................... . .................................................................. ..

................................................................................... .

IV
V

ACKNOWLEDGMENTS

TABLE OF CONTENTS ..................................................................... . LIST OF FIGURES ............................................................................. . LIST OF TABLES

vi viii

x
1 1 3 3

1. Introduction .. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ..
1.1 Objectives and Scope . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ... . . . . . . . . . . . . . . . . . . . . . . . . . . 1.2 Scope of the Study ........................................................................ 1.3 Thesis Organization ...... . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2. Literature Review in Photogrammetric Targets and Image Acquiring Sensors for Industrial Piping Systems ................................................................
2.1 Background............................................................................... 2.2 Digital Close-Range Photogrammetry ............. :.................................. 2.2.1 Automation in Digital Close-Range Photogrammetry ...................... 2.2.2 3D Measurements in the Image Space ........................................ 2.2.3 Measurement of Straight Lines in the Image Space ........................ 2.2.4 The Reconstruction of Straight Pipes ........................................ 2.3 Light Detection And Ranging (LIDAR) Laser Scanners .......................... 2.3.1 Basic Concepts and Technologies of Laser Scanners ......... .............. 2.3.1.1 A Continuous Wave Laser and A Pulsed Laser ..................... 2.3.1.2 A Triangulation Scanner and Ranging Scanner ......................... 2.3.2 Observations in Laser Scanning Process ...................................... 2.3.3 3D Modelling and Data Process using Laser Scanner ..................... 2.4 Photogranunetric Targets .............................................................. 2.4.1 Natural Targets ... ........................... ...... .............................. 2.4.2 Artificial Targets ................................................................ 2.4.3 Target Locating Methods ......................................................

5
5 6 6 7

9
12 16 16 17 18 23 25 27 27 29 31

vi

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3. Formation of 3D CAD Models ............... '" . . . . .. . . .. .... . ... ......... .. . . . ..... . 3.1 CSG (Constructive Solid Geometry) Model....................................... 3.2 Reconstruction of Linear Features .................................................. 3.3 Edge Model Based Fitting Algorithms ............................................. 4. 3D Measurement and Modelling of Piping Systems ....................................... 4.1 Scope of Project and Testfield Setup .................................................. 4.2 Hardware and Software Configurations ............................................ ... 4.2.1 Digital Photogrammetry Systems ............................................ 4.2.2 Laser Scanning System ........................................................ 4.3 3D Measurement and Modelling of Piping Objects .................................. 4.3.1 3D Measurement in Digital Photogrammetry System ................. .... 4.3.2 3D Measurement in Laser Scanning System ............................... 4.3.3 3D Model and Measurement of Piping System ............................. S. Effect of Reflecting Surface Material on Laser Scanning Process .. . . . . ....... 5.1 Purpose of the Experiment ............................................................. 5.2 Experiment Setup ........................................................................ 5.3 Surface Roughness in 3D Laser Scanning ....... 1.................................. 5.4 Coverage Angles and Residual Analysis ............................................. 5.4.1 Observation of Coverage Angles on Different Surface Materials ....... 5.4.2 Application of Media to Increase Surface Roughness ..................... 5.4.3 Residual Analysis ........................................................ ...... 5.5 3D Modelling Proc~ss ................................................................ ...

33
33 36 38 40 40 42 42 46 47 47 50 53 55 55 57 60 65 65 69 74 80

6. Conclusions and Recommendations . . .. . ... . . ... . . . .. ... . ... .. . .. . ...... ... . .. .... 6.1 Conclusions ...................................................................... ..... .... 6.2 Recommendations References .. . ... . . . ... . .. ... .. . . . .. . . ... ... . .. . . . ... .. . .. . ... ..... . ...... . .. ..... . .. ...... ... ....

88 88 89 90

L

vii

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

LIST OF FIGURES

Figure 1.1 Figure 2.1 Figure 2.2 Figure 2.3 Figure 2.4 Figure 2.5 Figure 2.6 Figure 2.7 Figure 2.8 Figure 3.1 Figure 4.1 Figure 4.2 Figure 4.3 Figure 4.4 Figure 4.5 Figure 4.6 Figure 4.7 Figure 4.8 Figure 4.9 Figure 4.1 0 Figure 5.1 Figure 5.2

Phase Diagram of 3D Model Developing Process ............................ . Schematic Relationships of Camera and FOV .............................. . Elements of the normal and parametric representations of a straight line in the image space ............................................................ .. The Extension of Mulawa's Coplanarity Contraint ........................ . Measurement Principle of the Triangulation Laser Scanner .............. . Scanning Geometry Using the Time of Flight Based Scanner ............. . Example of Edges in a Simple Piping System .............................. . Retro Reflective Targets used in Photogrammetric Measurement ....... . Ellipse Parameters ............................................................ .. Primitives and their Parameter Descriptions ............................... .. Experimental Testfield Setup .............. : .................................. . AutoBar With a Default Coordinate System ............................... .. Coded Photogrammetric Targets ............................................ .. Location of Camera Stations and Circle Fits on the Pipes ., ............. .

2

9
11
13 19

24

28

29
32 34
40

43
44

45 46 47
50

Laser Scanning Point Clouds Mosaic from Three Stations ................. . Circle Fittings on the Pipes ..................................................... . Registration of Scanning Data Using Tie Points ............................ . Point Clouds of Pipe B (2" diameter) and D (4" diameter) ................ . Point Clouds of Pipe C (3" diameter) ........................................ . Final 3D Model of Piping Objects from Digital Photogrammetry ........ Test Field Setup for Reflectance Experiment ............................... Experiment Setup and Laser Scanner Stations ..............................

52
52

54 57 58

viii

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Figure 5.3 Figure 5.4 Figure 5.5 Figure 5.6 Figure 5.7 Figure 5.8 Figure 5.9 Figure 5.10 Figure 5.11 Figure 5.12 Figure 5.13 Figure 5.14 Figure 5.15 Figure 5.16 Figure 5.17 Figure 5.18 Figure 5.19

Different Types of Surface Geometry ....................................... Surface Roughness (Ra: Arithmetic Average) by Area ................... Diagram of Laser Scanner Operation ....................................... Observation of Coverage Angles on Point Clouds ........................ Diagram of Maximum Coverage Angles ................................... Point Cloud Data of PVC (Left) and Stainless Steel Pipes ............... Point Clouds Showing with and without an Application of Dulling Spray Scanning Point Clouds with and without a Masking Tape ................. Statistical Analysis of Point Clouds Data ...... ................... ............ Relationship between Rejected Points and Sigma during Iteration ....... Standard Deviations of Measurement Parameters ............... ............ Point Clouds Mosaic of Piping Objects ..................... ................. Point Clouds and a Constructed Cylinder (Aluminum Pipe) ............. . Point Clouds Data of Ceramic Pipe in So~are A (Ryerson) ........... . Relationships between Coverage Angles and Measurement Errors ...... . Surface Roughness (Ra) of Stainless Steels ............................... .. Final 3D mo~elling of Piping Objects .........................................

60 62 63 65 66 67 70 72 75 76 78 81 82 83 86 86 87

ix

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1
LIST OF TABLES
Table 2.1 Table 4.1 Table 4.2 Table 4.3 Table 4.4 Table 4.5 Table 5.1 Table 5.2 Table 5.3 Table 5.4 Table 5.5 Table 5.6 Table 5.7 Characteristics of Laser Scanners (Cyrax 2500 and Mensi S25) ......... . Diameter Measurements of Pipes ............................................. . Calibration Parameters of Digital Camera (Nikon Dlx) .................. . Coordinates of Center Points and Radius of Pipes from Circle Fits ...... . Piping Measurements Parameters from Laser scanning data ............. . Pipe Measurement Results by photogrammetry and laser scanning ..... . Description of Scanning Stations and Data Acquisition ................... . Coverage Angles and its Percentage for Various Surface Materials ...... . Observation of Coverage Angles with/without Dulling Spray Application Scanning Point Clouds Residual Analysis Results ......................... . Values and Standard Deviations of Major PaPaIlleters .................... . Results of Diameter Measurements by Two Different Software Packages Percentage Coverage Angles and Errors in 3D Pipe Measurements ., .... 22 40 43 49 51 53 59 67 71 74 77 84 85
!

t

I ,
I

f

1

x

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1. Introduction
1.1 Objectives of the Study

The purpose of this thesis is to study three-dimensional (3D) measurements and modelling procedures for industrial piping systems using digital photogrammetry and laser scanning techniques. Photogrammetry has been implemented in industrial piping applications such as nuclear power plants, chemical/pharmaceutical plants, and oil/gas processing facilities. Those industries employ complex networks of pipes and are frequently involved with installation, inspection, maintenance, and part replacement. The reconstruction of 3D piping systems using a 3D measurement procedure involves a critical process in which the locations and shapes of the components must be precisely known. To develop adequate 3D piping models from a 3D measurement process, the following questions might be considered: · · What kind of targets should be used? What sensors should be considered to acquire images or information in object space? · · What mathematical model should be applied? What types of media can be applied onto the surface in order to increase data accuracies?

The targets can be sub-divided into natural targets and artificial targets. Natural targets rely on distinctive features such as edges and comers, while artificial targets are manufactured and have retro-reflective surfaces on them. Two types of image acquiring

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1 ·
sensors, digital cameras and laser scanners, are examined in terms of their properties and applications. Based on experimental setup accuracies, measurement of piping systems are compared between applicatjons of two different sensors. Effects of different surface materials are examined in laser scanning applications and several different types of materials are used for acquiring point cloud data. Diameter measurements of pipes and residual analyses are conducted with various surface materials. As shown in Figure 1.1, each phase contains detailed subjects and integrates the entire process into a formation of 3D models of piping systems. The final results of the thesis will provide an efficient 3D modelling application using photogrammetry and laser scanning for reverse engineering of industrial piping systems.
e:

1

ir

P
b

a
Phase 1 Photogrammetric Targets (Natural/Artificial)

Phase 2 Image Acquiring Sensors (Digital cameralLaser scanner)

tl

r.

Phase 3 Effects of reflecting surfaces

s

FINAL
3D CAD Model Construction
Figure 1.1 Phase Diagram of 3D Model Developing Process

I

2

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1.2 Scope of the Study

The application of digital photogrammetry and laser scanning was focused on an industrial piping system although there are numerous different applications possible. Natural and artificial targets are compared with their applications and accuracy in an industrial environment. Two image sensors, a digital camera and a laser scanner, are introduced and used for piping measurements of 3D coordinates. Basic concepts of photogrammety are applied to both sensors (Le., geometry, triangulation, and resection). Photogrammetry and laser scanning process are tested with experimental piping objects and compared for accuracy and 3D modelling presentation. Further study in laser scanning, the examination in reflectance of surface materials is conducted based on different types of piping materials. Data accuracies and coverage angles are studied with different types of materials. Residual analyses are performed with laser scanning point clouds data and data sets are analyzed and compared in terms of data accuracies.

1.3 Thesis Organization

In Chapter 2, targets (natural and artificial targets) and image acquiring sensors (digital camera and laser scanner) for industrial piping systems are reviewed based on the published literatures. Formation of 3D CAD models is examined in terms of fitting algorithms in Chapter 3. In Chapter 4, 3D measurements of piping systems are performed with a digital photogrammetry system and laser scanning system. The measurements of

3

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

piping systems compared in terms of accuracies. The effect of reflecting surface material properties on the laser scanning process is studied in Chapter 5. The surface roughness of different types of materials seems to be a critical component of this project. The effects of spray application are studied in terms of data quality and accuracies based on coverage angles, observations and residual analyses.

4

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

2. Literature Review in Photogrammetric Targets and Image Acquiring Sensors for Industrial Piping Systems

2.1 Background
Digital photogrammetry has replaced film-based photogrammetry and is mainly based on processing of digital images. It has been widely used in industry because of its high accuracy and quick turn-around time,s. Two types of image sensors are being used in digital close range photogrammetry: digital cameras and laser scanners. Digital photogrammetry systems have been in use for about fifteen years while a laser scanning systems have only been widely used lately. The use of targets in a photogrammetry process is very important in order to achieve the best accuracy. There are two types of photogrammetric targets used in close-range photogrammetry: natural and artificial targets. Industrial plants containing a number of piping systems have several different types of repetitive objects such as cylinders, boxes, spheres, etc. The piping objects generally consist of straight or curved pipes (elbows), Tjunctions, flanges, and valves. Those kinds of characteristics can be advantageous for utilizing natural target strategies. On the other hand, artificial targets are, in many cases, retro-reflective and light-coloured on dark background or dark-colored on light background.

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

L

5

2.2 Digital Close-Range Photogrammetry

Three-dimensional (3D) coordinates measurement systems were introduced in precision engineering sectors in the early 1980s. Digital close-range photogrammetry is a rapidly evolving technology which covers high-precision and lower-precision

measurements, and machine vision. In digital close-range photogrammetry, a charged couple device (CCD) sensor is most widely used and has significantly improved over time

in terms of the size of the CCD array and its spatial resolution. During the last ten years,
CCD sensors have been developed to a stage where sensor resolution has been significantly increased. For instance, the Kodak DCS Prol4n digital camera has 13.89 mega pixels (Le., 4500 columns x 3000 rows of pixels). In order to use digital cameras properly, the following criteria should be considered: the size of the CCD array, the lighting and background contrast, effective International Standards Organization (ISO) numbers and shutter speed as well as the precise calibration of the camera. 2

2.2.1 Automation in Digital Close-Range Photogrammetry

Close-range digital photogammetric systems are generally employed in one of two ways: off-line systems or real-time measurements systems. The "off-line" designation implies a non real-time system where the final measurement results comes after a series of sequentially acquired images is recorded and a resulting multi-station photogrammetric

6

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

triangulation is performed. In the case of the off-line system, retro-reflective artificial targets are generally used. One of the benefits from the introduction of digital camera is the possibility of automated image measurements using techniques such as centroid method and template matching method. Image point measurement can be carried out for each image, based on point labeling to facilitate image point correspondence. If the object point coordinates are not available, a manual point identification process is necessary. On the other hand, if initial estimates of the XYZ object point coordinates are available, only four control points are needed. From the measurements, the exterior orientation of the camera station can be determined and the positions on the image of each target can be predicted.

2.2.2 3D Measurements in the Image Space

Photogrammetry is a 3D coordinate measuring technique that uses photographs and images as the fundamental medium for metrology. Triangulation is the fundamental principle in photogrammetry and "line of sight" can be developed from each camera station to points on the object. These rays
ar~

mathematically intersected to produce 3D

coordinates of the points of interest. The mathematical relationship between the object and the image is known as the principle of collinearity. The collinearity equations embrace the six degrees of freedom of the camera: three translations and three rotations, as shown in Equations (2.1a) and (2.1b).

7

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

x-x.+f [

=0

(2.1 a)

m21(X - Xc) + m22(Y - Yc) + m23(Z - Zc) m31(X - Xc) + m3;(Y - Yc) + m33(Z - Zc)

J

=0

(2.1 b)

where x, y : image coordinates,
"0, Yo : the image coordinates of the principal point,

f

: the focal length of the camera,

Xc, Yc, Zc : the perspective center of the camera,

x, Y, Z

: the location in object space point, and

mij : components of the rotation matrix (i = 1,2,3 andj

= 1,2,3).

In order to achieve high accuracy, it is essential to consider the field of view (FOV), exposure, and focusing. FOV defmes how much the camera "sees" and is a function of the focal length of the lens and the physical size of the digital sensor. The relationship between format size, lens focal length and field of view is shown in Figure 2.1.

8

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

I--~il-----------===~~------j CCO Format

~

Object

Lens

Figure 2.1 Schematic Relationships of Camera and FOV

The exposure setting is always critical in order to acqvire appropriate target images. The algorithm for automated acquiring targets is based on the gray value of pixels and the edges of the circle, which is usually a retro-reflective surface. The background exposure is largely controlled by the shutter ti!lle, while the target exposure is controlled by the illumination (e.g., flash). The focus of the lens is fixed at jnfinity which defines the depth offield.

2.2.3 Measurement of Straight Lines in the Image Space

Conventional photogramrnetric approaches rely on control points, using collinearity equations as introduced in Equations (2.1a) and (2.1b). However, control points do not exist in natural environments and they have to be depicted by using retro-reflective targets or field surveying techniques (Le., total station).
9

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Due to the increasing demands of automation and the robustness of line detection, line-based orientation of digital images has been interesting research area. The space resection method can solve the problem using control points, whose coordinates are known both in image and in object reference system. Several researchers presented some experiments using real data comparing their line-based method for calibration of radial lens distortion with the point based linear method. One of the major advantages of line photogrammetry is that no corresponding points need to be measured in a stereo pair, the observed points in the images only have to be on the same line. The basic idea of line photogrammetry is the definition of a direct relation between measured image points on a line, the unknown parameters of the 3D line and the known orientation parameters of the image (Tommaselli, A., 2000). The equation of straight line in the image space is given by Equation (2.2) and the parametric representation can be expressed in Equation (2.~). cosO x + sinO-p = 0 y=ax+b where, a = tana a = a clockwise oriented angle of line with respect to the x axis The following equations are well known as shown in Figure 2.2. tanO = -cotana, and a = -cotanO = tana, b = p/sinO = -p/cosa
(2.5)
1

(2.2)
(2.3)

tana = -cotanO

(2.4)

I

For near vertical straight lines a different equation can be defined with

10

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

x= a*y +b* The nonnal vector to the interpretation plane in the image space can be stated as

(2.6)

-----7 N=

(2.7)

where f = the camera focal length.

y

------1
P I

(XI - X2)

I (Yl - Y2)
I I

X

Figure 2.2 Elements of the nonnat and parametric representations of a straight line in the image space

The straight line in the image can be extracted by using image processing methods. The first step is the application of the edge preserving smoothing method, which is applied over the gray level image. After an edge detection algorithm is applied, segment lines can be

11

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

used. One of the approaches is to compute gradients in some predefined directions by convolving the image with a set of templates at equally spaced direction intervals. After edge detection, a suitable threshold must be determined in order to maintain only the significant edges. Several approaches can be used either setting an arbitrary value or using some automatic selection method, based on an objective criteria. The gradients with magnitude less than the computed threshold are automatically set to zero, and the remaining ones are assumed to be edges and their 'values are maintained.

v d

2.2.4 The Reconstruction of Straight Pipes The centre line of a pipe in an image can be regarded as the bisector of the two measured edges of the pipe. Two edges will not be exactly parallel because of the central projection. The estimated centre line can be used to compute the unknown 3D center line. This approach, however, has several major disadvantages: . · Due to the central projection of the camera system, the center line will not be exactly between the two edges in the image. · Due to occlusions or bad illumination, only one edge of a pipe can be measured in an image. (A single edge can not be u~ed in the adjustment.) · It is not possible to estimate the radius of the pipe.

To avoid these problems, a direct relation between points on the edge of a pipe and all the unknown parameters of a 3D pipe has to be defined. The disadvantages described above can be solved by constructing tangent planes to the pipe's surface. The distance of the tangent plane to the center line of the pipe is the radius RI of the pipe and the vector nj,l,p is the normal vector of this plane shown in Figure 2.3 (Veldhuis and Vosselman, 1998). The

12

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

)~'
~l'

vector is the normalized vector product of the observation vector ml,p and the direction vector
dl of the center line:

(2.8)
Di,l,p=

Ilml,p xdlll

A coplanarity constraint can then be developed as:
Fi,l,p =

I ml,p, dl, 51- Ci ± Rt Di,I,p I

(2.9)

z
y
""'----- X

Figure 2.3 The Extension of Mulawa's Coplanarity Contraint

13

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

The sign of the term R.

Di,l,p depends

on the edge of the pipe on which the image point

is measured. The consequences of introducing this term are a growth of the computational load for the coplanarity constraint and the partial derivatives, and the increased complexity of the computation of the approximate values for the unknown parameters. In order to ensure a rapidly converging solution, 'good' initial approximate values are necessary. Three tangent planes can be used for the computation of approximate values for the unknown parameters. Five observations are sufficient for computing approximate values for the five unknown parameters. The computation of the approximate values for a straight pipe can be divided in four phases: · First, two observations are used to compute a plane tangent to the pipe. The tangent plane is computed from those two observations in order to ensure stable approximate values. · The approximate values for the direction
ve~tor

l

1
1

(

s

I
i

I
I

dl of the center line can be

computed by averaging the direction vector of the intersecting lines of the tangent planes. · The position vector
51

should be perpendicular to the direction vector dl. A
inters~ction

triangle can be formed by the

of the three tangent planes and the plane,

which is orientated by the direction vector. The unique solution is defmed by the direction of the normal vectors of the tangent planes direction to the center line of the pipe. · The radius R. of the pipe can be computed using both the coordinates of three points formed by triangle and the position vector 51.

I

~

! I 1

14

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

-~rf
'1::_

The approximate values for the position and direction vector 51 and dl are described by Cartesian coordinates. These coordinates can be transformed to approximate values for the spherical coordinates, since the relation between these coordinate systems is known. Line photogrammetry has been applied for the 3D reconstruction pipe systems. Mulawa's coplanarity constraint with an additional unknown parameter (the radius of the pipe) can be extended to compute the center lines in the images before the reconstruction of the straight pipes. The influence of some factors on the least-squares adjustment can be determined using a set of images from a number of pipes. These factors are: the number of images, the number of measurements, the spatial distribution of the camera positions, and the distribution of measurements on the edge of the pipes (Mulawa, 1990).

15
i, J

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

2.3 Light Detection And Ranging (LIDAR) Laser Scanners

Another imaging tool that could be employed for 3D measurements is a laser scanner. There are two types of laser scanning technologies: triangulation scanners and Light Detection And Ranging (LIDAR) scanners. A laser scanner uses triangulation-based range data and photogrammetry methods (spatial resection) to calculate the relative position of the objects. The actual measurement geometry is based on triangulation as delivered through the lens. Data produced by a laser scanning system can be characterized as a subrandomly distributed 3D point cloud. Point clouds have more information than twodimensional or two-and-a half-dimensional surface models since there are three unique values in the x, y, and z directions. The associated modelling algorithms are affected by the following attributes: point density, registration of multiple echoes, and amplitude registration (reflectance).

2.3.1 Basic Concepts and T~chnologies of Laser Scanners The acronym laser stands for light amplification by stimulated emission of radiation. For laser radar, two acronyms are commonly used: LADAR (LAser Detection And Ranging) and LIDAR (Light Detection And Ranging). Laser scanners utilize opto-mechanical scanning assemblies just as many multispectral scanners like the spacebome scanner. All laser systems measure by some means the distance between the sensor and the illuminated spot on the ground or the objects. A typical scanner can be subdivided into the following units: laser ranging unit, opto-mechanical

16

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

scanner, control and processing unit. The ranging unit comprises the emitting laser and the electro-optical receiver. The transmitting and receiving apertures are mounted so that the transmitting and receiving paths share the same optical path. Therefore, the points on the object's surface illuminated by the laser are always in the field of view (FOV). The narrow divergence of the laser beam defines the instantaneous field of view (IFOV), typically ranges from 0.3 mrad to 2 mrad. The IFOV is a function of the transmitting aperture (D) and the wavelength of the laser light (A).

IFOVdiff

=

2.44

A
D

(2.10)

Laser triangulation, a precise method of 3D data acquisition, is an active stereoscopic technique, where the distance of the object is computed by means of a directional light source and a video camera. A laser beam is deflected from a mirror onto a scanning object. The object scatters the light, which is then collected by a video camera located at a known triangulation distance from the laser. Using trigonometry, the 3D spatial (X,Y,Z) coordinates of a surface point are calculated. The CCD camera's 2D array captures the surface profile's image and digitizes all d~ta points along the laser scan.

2.3.1.1 A Continuous Wave Laser and A Pulsed Laser There are two kinds of lasers used in LIDAR: a continuous wave laser and a pulsed laser. The continuous wave laser emits a continuous signal stream where the receiver captures the full return wave. Distances are determined from phase measurements and the return signal covers a wider footprint and contains the entire structure of the return signal.

17

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

On the other hand, the pulsed laser emits a narrow laser pulse in the near infrared region of the electromagnetic spectrum. Therefore, each discrete pulse is reflected from a surface of the objects and returned to the receiver. The scanner used for this project is a ground-based laser scanner using the pulse method. LIDAR scanners use a pulsed laser to measure the range to a point on an object's surface. Using the time between the emission of a pulse and the detection of the returning energy, the range to the object can be determined. The range (p) can be determined by the two-way flight time (At) of the pulse in the following equation: cAt
p=

2

(2.11)

where c is the velocity of light.

2.3.1.2 A Triangulation Scanner and Ranging Scanner There are several commercial laser scanners for industrial applications within the range of 1m to 1DDm. Commercial laser scanners employ digitizing tasks based on a synchronized scanning technology. In a triangulation scanner, a double-sided scanning mirror is used to provide synchronization between projection and detection, as shown in Figure 2.4. The CCD is used to record the displacement of a stripe of laser light projected onto an object. The geometry between the laser and CCD is known and allows triangulation to be used to determine a point measurement. A laser beam is directed by the scanning mirror onto the scanned surface. Then the diffuse laser rays from the scanned surface reflect off the rear

I

18

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

\

';~~

surface of the scanning mirror and are focused onto a CCO. As the scanning mirror rotates, the incident laser beam sweeps out the scanning plane that intersects with the scanned object surface. From the focused laser image point P on the CCO array and the instantaneous orientation of the scanning mirror, the 20 coordinate of the corresponding scanned point on the object surface in the scanning plane can be determined. A full XYZ position can be calculated if the location and orientation of the scanner is known.

CCOArra??

9
I

+
law

r. I k-----~---_T_

Scanning

~ir~
/

Fixed Mirror /

~

/

/Oiffuse Laser Light

Laser Source

fi
Scanner Body

NOT TO SCALE

Figure 2.4 Measurement Principle of the Triangulation Laser Scanner

19

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

On the other hand, in the time of flight of a laser scanner, the laser, receiver, and time measurement units are all in the same enclosure. A laser pulse is sent to the object and the distance between the transmitter and reflecting surface is computed from the travel time. Electronic tacheometers are used with motor-driven axes as a scanning device. This type of scanner uses small rotating devices for the angular deflection of the laser beam. The Cyrax 2500 uses mirrors to deflect the beam in the both the horizontal and vertical axes giving a 400 x 400 field of view. The system offers a precision of ± 6mm for the measurement of a single point. The resolution of the scan is one of the parameters usually set before scanning. Resolution controls the number of points recorded in a scene and the level of detail visible in a scan. This parameter must be set for a particular range. The point density is dependent on the distance between a laser platform to the object, field of view, and sampling frequency. The point density sl}.ould be adjusted based on the specific application. Multiple echoes can be found at the edges of the object. Reflectance (amplitude) registration gives radiometric information and the reflectance can be used in classification algorithms. The advantages and disadvantages of a summarized in the following: Advantages: · · · · Does not need high contrast between the features on the object and background, Can be used in poor light conditions - even dark area without any light, Faster data acquisition - automated algorithm, Easy to build 3D models (export to Computer Aided Design (CAD) format, i.e., Drawing eXchange Format (DXF) format),
l~er

2

scanner can be

I ·
l

1

t
I
[

20

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

· · · · · · ·

Portable (weight IS to 20 Kg), No need to move the object to be scanned, Non-contact, non-destructive scanning method, Virtually, no size restrictions on objects to be scanned, Can be used on soft materials such as clay without causing damage, Accurate output of 3D digitization data, Support for mesh reduction and model compression,

Disadvantages: · · · Limited to amount of surface which can be viewed at the station, Requires sufficient surface texture to generate a return signal, accuracy: not appropriate tool for precise measurement (Le. sub-millimetre level of precision). Characteristics of the Cyra2500 and Mensi S25 laser scanners are compared in Table 2.1. Single-point accuracy of Cyra2S00 is 6mm for ranges between I.Sm to SOm
an~

the

horizontal and vertical field of view is 40' in both cases. It is able to acquire thousands of

.

points in a few seconds. The orientation

~f scanner

is calculated using a 3D space resection

method and the local coordinate system can be established by employing surveyed control points.

21

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Cyrax2500 Range Standard Deviation Field of View Spot Size Scanning Speed
1.5-100m 6mm 2-25m* 0.6mm

MensiS2S

H : 40 0 , V : 40 0 < 6mm from 0 to SOm
1 column/sec.@ 1000 pts/column @fullFOV 2 column/sec @ 200 pts/column @ fullFOV

H : 46 0 , V : 3200
0.7mm Up to 100 points/sec·

Weight Dimensions

20.5Kg 40.1cm x 33.7cm x 42.9cm

14Kg 39.4cm x 7.8cm x IS.8cm

NOTE: ·Limitations may apply. (by Mensi®) Table 2.1 Characteristics of Laser Scanners (Cyrax 2500 and Mensi S25) (Cyra Technologies, Inc. 2002 and Mensi Corp. 2002)

22
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

2.3.2 Observations in the Laser Scanning Process

There are several reasons for possible errors of acquiring points: · · · · reflections from the background, reflections from the foreground such as moving traffic, dust or rain, multiple reflections of the beam, reflections from unwanted light sources such as sunlight or other light sources.

A registration process is 'necessary to combine multiple point clouds taken from different observation locations. Tie points might be certain features of objects (e.g. edge or comers) or special targets (e.g. spheres or flat reflective targets). These targets may be surveyed by terrestrial surveying using close range photogrammetry if a global coordinate system is used. When the laser scanner operates, the surveyed points can be referenced to a scanner's internal coordinate system. In the case of a complex object or when a single scan cannot cover the entire object, a series of scans are necessary and each scan has its own spatial reference system. To reconstruct a 3D model, the process of registration can be performed and multiple scanning data sets can be incorporated into a single local reference system. Without using control targets and conventional surveying (total station) points, the georeferencing process can be conducted using the homologous points within overlapping scans. From each scan, a minimum of three are selected (e.g. comers or edge) and a simple sixparameter transformation can be estimated. As a result, all the points can be transformed into the local coordinate system.

.

23

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

)
Small overlapping areas within adjacent scans may lead to systematic errors, and this can be minimized by selecting wider overlapping areas or performing terrestrial surveying of tie points. The reflective targets are normally used for tie points and at least three targets must be found in the overlapping portion of two adjacent scans. Once two adjacent scan sets are acquired, two spherical coordinates (range and elevation) of the points are determined. By iteration, the coordinates of points are determined using all of the selected points. Three parameters, scan depth, incident angle, and projected angle, are considered to have major contributions to the systematic errors. The incident angle is the angle between the incident laser rays and the projected surface normal to the scanned point on the scanning plane. The projected angle is the normal angle between the surface normal of the scanned points and the scanning plane. Each scanned point corresponds to a unique set of values: scan depth, incident angle, and projected angle according to the scanned surface geometry. The scanning geometry and basic principles of time-of-flight 2.5.
l~er
Ii

,
~
~

. "
~
j.

~

2

j
~
~ ~

1
.~

~

.~

i
·1

"i* :'\It

..,
ill

..~

..
..
I~,

,

~
"~

.. ~

" ~
.~

;~

~r

"

scanner are shown in Figure

Rotating Mirror

r;'--------Y

Laser Source
Receiver

Time Measurement Unit

Scanner Body

Figure 2.5 Scanning Geometry using the Time of Flight based Laser Scanner
24

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

2.3.3 3D Modelling and Data Process using Laser Scanner

The process of creating 3D models from real world can be represented by a series of steps: data collection, data registration, and modeling (geometry, texture, and lighting). Each step depends on the laser scanner and the data collection procedure. The one of the major advantages of laser scanners is that laser scanners can automatically acquire dense 3D set of points. They also produce organized points, which are appropriate for automatic modeling. However, the laser scanners are very expensive and are affected by surface properties such as reflectance and textures. Also, a range sensor is usually designed for a specific range. Therefore, a sensor designed for a long range cannot be used for a short range and vice versa. Many researchers have found that laser scanners are suitable for relatively simple objects and structures such as buildings. Laser scanners record 3D (x,y,z) data and the
in~ensity

of the returned pulse. The

Cyrax 2500 is based on the sensing of active energy, intensity data is also collected in areas of shadow, or darkness. The first procedure in scanning data processing is registration. When the scanner moves between scans, the scans need to put into a common coordinate system. This can be completed by the matching of tie points within scans. The use of discrete points requires some method of point identification. The Cyrax system uses sphere and reflective targets, which can be used as tie point, thus the sets of scans can be registered. The most common registration method in close range scanning is based on the matching of surfaces, although this technique is also used in large object scanning. Using this method, the overlapping scan areas can be matched together. Fitting CAD primitives to

25

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

points clouds is a popular approach in industrial applications such as piping industry. Cyra's Cyclone software is capable of completing this process.

26

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

'~.
\ -:. r, ·,. .. t
,';'

I

2.4 Photogrammetric Targets
2.4.1 Natural Targets

I

To achieve an acceptable level of accuracy in a photogrammetric process, the geometry and number of targets are important considerations, along with the location of the exposure stations. In many cases, circular retro-reflective targets are used. However, they have certain disadvantages:

a) The angle of the reflectance: the degree of the retro-reflectivity is only reliable within an angle of 45° to 50° from the perpendicular to the surface, which means the exposure location of the camera is restricted. b) The lighting conditions: in the case of indoor situations, an artificial lighting system is likely used, and the reflectance relies on the
di~tance.

In some cases, it might not be

possible to employ a light source due to obstacles or shading effects.

As such, two main reasons can be introduced why natural targets are preferred in industry applications: one is to overcome access problems at the site and to minimize the effort associated with installing the targets. In many places, such as chemical plants, nuclear power plants, and other piping industries, accessibility is limited. The advantages of using natural targets are that they can: (a) minimize the effort and time required to set artificial targets, and (b) minimize the cost of purchasing the targets. The edges and the comers are distinctive areas to reference multiple photos as shown in Figure 2.6.

27

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Figure 2.6 Example of Edges in a Simple Piping System

As of September 2002, point registration was introduced in laser scanning (Cyra Technologies, Inc., 2002). A cloud constraint is a constraint that the user creates between two different scanning point cloud sets. To create the cloud registration, three or more matching points picked in the clouds are necessary. The accuracy of this registration is being tested to compare control target registration.

I
I'I
!
'I I'

28

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

2.4.2 Artificial T;ugets

The most frequently used photogrammetric target in practice is a circular retroreflective target with a black background, as shown in Figure 2.7. This is due to the fact that the sharpness of image edges is important when applying a centroid or least squares method in order to achieve a sub-pixel positioning accuracy. Retro-reflective surfaces provide a high degree of reflectance and reflects light directly back to its source. The size of the targets are in the range of 1/8" to 2", and the application of target size depends upon the size of the objects and distances from camera stations. Diffuse materials are better for photogrammetry since they give more uniform target contrast from different angles relative to the objects.

Unilluminated Target

Illuminated Target

Figure 2.7 Retro Reflective Targets used in Photogrammetric Measurement

l

I

In order to precisely locate the pipes in 3D, the centerline of the pipe has to be determined. A plane can be formed from three 3D points and the equation of the centerline of the pipe can be found from the plane, which is perpendicular to the line. Since the radius of the pipe is often known, the formation of 3D modelling is relatively simple. However, finding the exact location of pipes is not a trivial problem. For some situations, such as

I

I

l I

29

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

piping systems in nuclear power plants, complex configurations of pipes and parts exist. They are close to each other (less than O.2m) and combined in multiple layers. Under these circumstances, the design of targets and/or target holders is necessary to overcome this situation. There are several aspects that should be considered such as the following: 1) the size and shape of the target holders, 2) lighting on targets, 3) adequate number of camera positions and targets, and 4) 'good' geometry (Le., network design).

30

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

2.4.3 Target Locating Methods

In a close-range photogrammetry, target locating methods represent significant factors in acquiring high precision photogrammetric measurements. The precision of target location is based on the target centroid computation and image coordinate quality can be varied by target size, pixel size, quantisation level, and noise. There are several matching techniques used to locate targets. The most widely used techniques are: 1) target location by least-squares template matching and 2) target location by edge extraction and feature based matching. Based on the study by Trinder et at. (1995), the highest precision that the template matching method can achieve is between 0.02 and 0.04 pixels. In practice, the target size is an important parameter, which significantly influences the quality of poiIit location, since all point location methods use the edges of the target more or less directly. Edge detection is a powerful tool for extracting edges that are usually on the physical boundaries of objects. A circular target on the flat surface is the most used photogrammetric target and it can be approximated by a rotated ellipse on the image plane. The rotated ellipse equation is expressed by:

+ [

&YCOS:-AX sin 9

J

2 =1

(2.12)

I
...·......

.

~\".
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

~

\

31

where, x, y : edge coordinates (pixels)
i.·

Xc, Y c : center of ellipse (pixels)

a, b : horizontal and vertical ellipse axes (pixels)

e : rotation (radians)
The parameters of a rotated ellipse are its rotation angle ( e), ellipse axes (a and b), and the center of the ellipse (Xc, Yc) as shown in Figure 2.8. Among these five parameters
Xc, Yc are of interest in photogrammetric processes (Co sandier and Chapman, 1992)

\

a

Figure 2.8 Ellipse Parameters

32

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3. Formation of 3D CAD Models
Photogrammetry is a measurement tool and can be used for the as-built reconstruction of piping installations. A Constructive Solid Geometry (CSG) model is one of the commonly used method in photogarmmetric measurements. In this chapter, the interactive measurements of CSG models are introduced and edge-based fitting algorithm is discussed.

3.1 Constructive Solid Geometry Model

A CSG model has a tree-like structure in which primitive shapes can be combined by Boolean operations such as union, intersection, and subtraction. These operations form more complex shapes from simple primitives, which contain, for example, boxes, spheres, cylinders, toruses, etc. Most man-made objects can be modeled using CSG and each primitive can be parameterized by its 3D position, orientation, and shape. The reconstruction of complex objects is based on a single primitive, data structure, and the modelling method. CSG can represent a complex object, which is constructed by transformations and Boolean operations of primitives. Each primitive is an enclosed polyhedral solid, whose surfaces have three elements (vertex, edge, and face). The primitives and their parameters are described in Figure 3.1. The representation of primitives is distinct; however, their topological relations are not. Therefore, a boundary representation (B-Rep) is to be computed and the B-Rep can provide the geometry and topology of points, edges, and surfaces (Ermes,
2000).

.

Under 3D modelling process, in general, these primitives are used for constructing 3D (. .. features based on data points in both photogrammetry and laser scanning process. Currently,

33

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

the measurement system is capable of doing semi-automatic measurements of CAD models.

An operator can select a CAD model from a database and aligns the model approximately to
the images.

Primit;.- e Name Location Element

Size Element

Shape

Origin.1 Coordin.t.

Cube

(Xo. Yo.Zo)

Length(L) Width (IN) Height(H)

x

~
)(

Origin.1 CoordirYIt.

CyHnder

(XO. Yo.Zo)

Radius(r) Height(H)

,

·rrh-v
x~v
~~~ C)
)(

z

Sphere

Origin.1 Coordin.t.
(XO. Yo.Zo)

R.dius(r)

1

Original Coordinat.

Torus

(XO. Yo.Zo)

Big R.. dius (R) Sm..nR old ius: (r)

'iv

Figure 3.1 Primitives and their Parameter Descriptions

Piping installations are generally very complex and images of these installation can show many elements with occlusions, reflections, and shadows. The measurement of a model

34

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

,
!.

'

involves the following steps: (1) an operator interprets the images and decides the objects, (2) the model is selected from a database with templates, (3) use the manually aligned model as
(

I
1

a starting position for an automated fitting procedure.

I,

35

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3.2 Reconstruction Principle of Linear Features

The image vector can be expressed as a = [(x - xo)(y - yo)(- t)]T in an image coordinate system and the object vector

(3.1)

A = [(X - XC)(Y - YC)(Z - ZC)]T .
Since a and A are collinear,

(3.2)

a=kA.
These relationships can be written in a matrix form:

(3.3)

=kM

[~-=-~cJ
Z-Zc

(3.4)

Where, M is the 3D orientation matrix defined to rotate the object system to become parallel to the image system, and k is a scale factor. By dividing the first and second rows by the third row, the fundamental collinearity equations in photogrammetry can be written:

x-Xo+f

[

m.,(X-Xc)+ m,,(Y - Yc).+m,,(Z-Zc)
m31(X - Xc) + m32(Y - Yc) + m33(Z - Zc)

] ]

=0

(3.5a)

Y-Yo+ f

[

m2I(X - Xc) + m22(Y - Yc) + m23(Z - Zc) m31(X -Xc) + m32(Y - Yc)+ m33(Z-ZC)

(3.Sb)
=0

where x,y : image coordinates of point
, I

36

I

)

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

"0, Yo

: the image coordinates of the principal point
: the focal length of the camera

f

Xc, Yc, Zc : the perspective center of the camera X, Y, Z : the location in object space mij : components of the rotation matrix (i = 1, 2, 3 and j = 1, 2, 3).

Three coordinate systems are used for constructing object points: the camera coordinate system (Xc, Yc, Zc), the object coordinate system (X, Y, Z), and the primitive coordinate system (Xp, Yp, Zp). Assume point P is on the linear feature M and the coordinates of the point are Xp, Yp, and Zp, which can be described as:

Xp = X(s) Yp=Y(s) Zp = Z(s) (3.6)

where, s denotes primitive parameters. The mathematical model can be f<:>rmulated by substituting Equation (3.6) into the collinearity Equation (3.5), as follows:

I
IDII(Xp - Xc) + IDI2(Yp - Yc) + IDI3(Zp [ ID31(Xp - Xc) + ID32(Yp - Yc) + ID33(Zp -

zc~
zc~

=0

(3.7a)

=0

(3.7b)

37

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3.3 Edge Model based Fitting Algorithms

The fitting procedure consists of a pixel based fitting stage and an edge-model based fitting stage. Lowe (1991) presented a general technique for solving for viewpoint and model parameters using Newton's method for nonlinear least-squares minimization. He introduced an observation equation for each pixel under the following conditions: (1) the gray value gradient should be above some threshold and (2) the pixel should be within some range of a projected edge. The fitting algorithm can be realized by the equation for each edge pixel j.
(3.8)

Where, llu j : the observed perpendicular distance of edge pixel j to the nearest edge of the wire frame,

Pi : the object parameters,
dUj : derivatives of U j,

dpi : derivatives ofPi,
Ilpi : the changes to be estimated, and

K : the number of parameters. Since the position of a pixel in the image is not stochastic, a covariance matrix cannot be specified for the observed distances. A noise-free Gaussian smoothed step edge can be
introduced for the gray value transition at the object edge. The distance lluj from Equation

(3.8) can be related to the gray value gradient (dg/du)j perpendicular to the edge. Therefore, the step edge model can be expressed as:
llgj = [ dg/du ] j
lluj

(3.9)

38

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

From Equations (3.6) and (3.7), the following equation can be obtained.
(3.10)
(

I

From the above equation, the gray value difference is used as an observation to estimate the changes in the pose and shape parameters of the CSG-model. The smoothed step edge function can be described by the following parameters: the minimum and maximum gray value and the sigma of the Gaussian smoothing.

(
I
:~

·!

39

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4. 3D Measurement and Modelling of Piping System

To examme and compare 3D measurements of plpmg system m digital photogrammetry and laser scanning, the testfield was set up at the private facility. Under same conditions, the process of each measurement are examined and the final results of piping measurements are compared in terms of its accuary.

4.1 Scope of Project and Testfield Setup

The test field was set within a room of dimensions of 7m (L) x 7m (W) x 9m (H). The approximate model space area was 2m x 3m x 2m. To simulate an industrial piping system in
a limited space, three sets of PVC pipes were used. They were connected by elbows and

flanges as shown in Figure 4.1. For photogrammetric measurements, retro-reflective targets

Figure 4.1 Experimental Testfield Setup
40

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

were attached along the pipes and an auto bar, two scale bars, and eighteen coded targets were used for photogrammetric measurements.

To combine scanning data from ".:t.rec different stations, three control targets were set on the tripod and six tie points targets were attached around the model space. Pipe B has a diameter of 2" as defined by a manufacturer's designation and connected to Pipe D (diameter = 4"). Pipe C is a diameter 3" pipe with elbows at the both end. The descriptions of pipes are shown in Table 4.1.

Table 4.1 Diameter Measurements of Pipes Unit: inches Pipe Pipe B PipeC Pipe D Inner Diameter (Defined by Manufacturer) 2" Thickness of Pipes (Measured by Digital Caliber) 0.18" 0.25" 0.25" Outside Diameter 2.36" 3.50" 4.50"

3"
4"

41

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.2 Hardware and Software Configurations
4.2.1 Digital Photogrammetry Systems

The camera used for the photogrammetric measurement was a Nikon D 1x digital camera and its CCD dimensions are 4028 horizontal pixels and 1324 vertical pixels. Pixel sizes are 0.006mm(horizontal) and 0.012mm (vertical). The auto focus function was locked and focus was set at infinity. The camera was precisely calibrated at Geodetic Services, Incorporated (GSI, Florida, USA) in 2002 and the camera calibration parameters and their data are in Table 4.2.

Table 4.2 Calibration Parameters of Digital Camera (Nikon Dlx) Parameters Descriptions Focal Length (mm) Principal Point X (pixels) Principal Point Y (pixels) Affine Transformation Value 18.1691 -0.2358 -0.2605 -0.0019 -0.0014 0.5853 Coefficient of R~dial Lens Distortion Coefficient of Decentering Lens Distortion -0.1413 -0.0066 0.4375 0.0153 -0.0150 Std. Dev. 0.0006 0.0009 0.0008 0.0001 0.0001 0.0011 0.0032 0.0026 0.0006 0.0004 0.0004

e
Xp Yp API AP2 KI K2 K3 K Total PI P2

(

l
42 Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

l

Lighting:
Photogrammetric retro-reflective targets reflect light directly back towards their source within 1°. Therefore, the location of light source is very important in order to acquire
, 1

i

targets on images. To accomplish this the synchronized SunpakTM System was used. The ring light is attached around the tip of the lens and is designed to minimize a reflect angle from the surface of retro-reflective targets.

AutoBar:
The AutoBar is detected automatically by the V-STARS software system (GSI) and sets an initial coordinate system and scale. The automatic exterior orientation process can be carried out by closed form space resection. The AutoBar was attached on the object and a highly visible location is necessary. It should appear in all of the images for proper processing. The orientation of X, Y, Z coordinate system is shown as a default mode in Figure 4.2, and it can be altered by a simple operation.

Figure 4.2 AutoBar with a default coordinate system

43

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Scale Bars:
Two invar scale bars were used and calibrated by Brunson Instrument (MO, USA). At temperature: 68.2 FO, Humidity: 32% Scale bar 1 (l0" rod) : 10.0001 " Scale bar 2 (20" rod) : 20.0001"

Coded Targets:
Coded photogrammetric targets are automatically detected, identified, and measured through straightforward image processing techniques. As shown in Figure 4.3, for these measurements 18 coded targets were used, which can be automatically detected by software
(V-STARS) and help to determine the location and orientation of the camera stations at the

time of exposure.

6mm

12mm

Figure 4.3 Coded Photogrammetric Targets

44

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

:1
I
I

"It·
I'"
· I

I tI
." ;;;

. II ,

I

~

J

.,.

-

. ·

1:-

··

Figure 4.4 Location of Camera Stations and Circle Fits on the Pipes

Photogrammetric Retro Reflective Targets:

A strip of retro reflective targets, 0.25" in diameter and 0.50" in spacing, were used for measuring the pipe surfaces. Based on the circle fit, the center point of the pipe can be determined, and by joining these points, the centre line of the pipes can be established.

45

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.2.2 Laser Scanning System

Data acquisition by a laser scanner is quite a powerful and fast process, since it creates millions of points to form point clouds. A laser scanner, Cyrax 2500, manufactured by Cyra Technologies was used and point clouds were generated and processed using a commercial software package (Cyclone).

Targets for Tie Points:
Three control points and six tie points were used and a non-reflective circle (white) is placed on the reflective rectangular surface (blue). The points were selected based on a prescanning process and these tie points were used for combining data from different scanning stations. These targets are appeared in blue as shown in scanning point clouds data.

Figure 4.5 Laser Scanning Point Clouds Mosaic from Three Stations

46

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.3 3D Measurements and Modelling of Piping Objects
4.3.1 3D Measurements in Photogrammetry Process

In order to represent a 'good' geometry, 18 different exposure stations were selected by changing camera positions. It is recommended to take more images in case of missing information on digital images such as obscured targets. First, based on 18 digital photos, a bundle adjustment was processed. The bundle adjustment is the program that processes the photographic measurements to generate 3D coordinates of the measured points. During the adjustment process, triangulation of points, resection of pictures, and camera self-calibration processes are completed. Points around pipes are considered to be on the same circle and the locations of center points are calculated using circle fittings. The constructed circles are shown in ellipse and two scale bars appear as horizontal lines in Figure 4.6. -

,,,
·

··----·

· , ,

I ,~

· , ...

-

.~

....
:

",.

Figure 4.6 Circle Fittings on the Pipes

47
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Each center point was calculated from photogrammetric target points and its x,y,z coordinates, radius, and RMS errors are shown in Table 4.3. The coordinate system was generated from AutoBar, which set an initial coordinate system at 0 (X,Y,Z) during a photogrammetric process. Based on circle fitting the center points of pipes were determined and the center lines of pipes were established by joining these points. The radius of each circle and its RMS errors are shown in Table 4.3. According to observations an average RMS of radius measurement is 0.0149 inches. Some of the bigger radii on the same pipes indicates the area of elbows or pipe connectors. Therefore, they are excluded from the measurement of pipes for the purpose of this project. However, it is necessary to have all shapes and

dimensions in order to complete the 3D modelling process.

I

l
(

( I

l
(

l

48

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 4.3 Coordinates of center points and Radius of Pipes from Circle Fits
Unit· inches RMS Radius 1.3802 0.0063 1.1755 0.0099 0.0108 1.1697 0.0108 1.2159 0.0104 1.1833 0.0197 1.1994 0.0041 1.1999 0.0062 1.2172 0.0259 1.3049 0.0121 1.1964 0.0038 1.1771 0.0146 1.1782 0.0185 1.6850 0.0147 1.8532 0.0016 1.7792 0.0106 1.7771 0.0000 2.3564 1.7445 0.0018 0.0064 1.7605 0.0224 2.5801 0.0083 1.9165 0.0143 1.6906 0.0070 1.8000 0.0331 1.3485 0.0480 1.3232 0.0408 1.2298 0.0284 1.1967 0.0031 1.2319 0.0213 1.3399 0.0052 1.1388 0.0342 1.3785 0.0060 2.5234 0.0197 2.5306 0.0091 2.2800 0.0087 2.2580 0.0428 2.6463 0.0121 2.2408 0.0125 2.1297 0.0149 Average:

Points 10 b1 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 b12 c2 c3 c4 c5 c6 c7 c8 c9 c12 c13 c14 d2 d3 d4 d5 d6 d7 d8 d9 d12 d13 d14 d15 d16 d17 d18

X 5.3135 4.2322 4.3786 4.4349 4.4994 4.7403 4.9476 5.5866 2.5405 -0.9558 -0.6526 -0.3860 -5.2395 -5.3020 -5.2145 -5.1855 -4.6735 -5.1223 -5.1237 -4.8181 -5.2155 -5.0597 -5.3294 8.4881 9.7797 10.8199 11.8307 12.2765 12.1281 11.9838 10.4713 11.2859 7.1576 6.3053 4.1373 2.5379 0.7915 1.2244

y

-70.3947 -66.1766 -58.3173 -54.0910 -52.6979 -42.3180 -32.4116 -24.0266 -55.8965 -53.4350 -42.0853 -31.2158 -34.8039 -32.7638 -30.1306 -21.5882 -18.1790 -15.3496 5.0163 7.9231 22.7657 24.7756 25.9488 -22.2037 -22.2640 -22.2523 -21.8971 -20.9209 -20.4452 -20.1826 -17.7712 -15.8875 -15.8276 -15.8157 -15.7707 -15.7400 -15.1822 -15.0538

Z -0.0178 -3.1803 -3.2529 -3.2784 -3.2852 -3.3281 -3.3796 -3.6636 -2.5682 -0.9214 -0.9369 -1.0199 12.0094 10.6543 10.5103 10.4573 10.6698 10.4065 10.2428 10.0830 10.3443 11.4929 13.5454 -4.9484 -5.4371 -6.0839 -7.2193 -9.2511 -9.9579 -10.2923 -14.1196 -17.9183 -15.9630 -15.5912 -14.5282 -13.9485 -7.9059 -7.0010

I"

49

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.3.2 3D Measurements in Laser Scanning Process

Point clouds data from three different scanrung stations were combined by a registration process. Control and tie points were assigned during pre-scanning (point density of 25mm). The purpose of pre-scanning is to identify control/tie points within a short period oftime (Le., less than a minute). Each scan is called a 'ScanWorld' and three scanning data sets were acquired from different stations, which appear as Scanworlds 3, 4, and 5 in Figure 4.7. The constraints list is shown in Figure 4.7 and the errors are shown on the last column. Each tie point is assigned with the same weight and RMS errors are less than 3 mm, which is in the acceptable range (under the manufacturer's specifications).

T_goIID, conlrol2 T.goIID:wl T.getlD: I>K T.getlD:ti03 T.goIID:1io5 T.goIID·oonI!oI1
T~D:conlrol2

T_goIID.1io1 T.getlD:1io2 T.getlD:loo4 T.goIID:1io5 T.goIID",.....n T_goIID' <_012
T~D:1io1

$c_..td3 Sc_orId3 Sc_orId3 5. .""..1d3 Sc...worldJ Sc:on"'..IdJ Sc.."'..IdJ Sc_..IdJ Sc_orId3 5c_a1d3 ScaW..1d4 ScaW..Id4 ScaW..Id4

T.goIID.1io2 T.getlD:1io5

s.,.,w..td 4 Scon"'0IId4 S.,.,wOlkl4 5caW0IId4 scaW..IdS ScaW..Id5 S_orId5 S.,.,w..ld5 S_orId5 S_OIkiS ScaW0IId5 ScaW..Id5 S_..Id5 S.,.,world 5

Concidenl V.lu:VerteM
~Vert8l(..vert.

Coinc:idett Vert8IC-VelteM Coi'w::identV.e:ex·V.teM Coir>cident.V....,·V_

Co01CIdent V.......V....,
C_VOII...vortoM C_VOIIOMVortoM
~V"eH.velteM

Coincident Vertex-V.18M Coi'v::identVert.·Ver.. C _ V......·V.... C_VOll...v_ Coir>cident.VOII...vortoM

Dn Dn Dn On On On On On On On On On On On

1,000 1 000 1.000 1.000 1.000 1.000 1.000 1.000 1 000 1.000 1.000 1.000 1.000 1.000

1.4OG""" 1,748 ... 1.641 ...

U72 ....
1.2'1 mm 1.711 """ 0.971)""" 2.S31 """ 2.214 ...

Figure 4.7 Registration of Scanning Data using Tie Points

50

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Once registration is accepted, the bundle adjustment is applied to all of the valid points. After point clouds data were combined from three different scanning stations, the final point clouds can be selected as shown in Figures 4.8 and 4.9. Each pipe was separated to measure its diameter, followed by creating objects. Using the constrained fit to cloud option, the cylinder was created based on point clouds. After that, crosssections of the cylinders were arbitrarily selected and the coordinates of two end points and diameter of the selected sections are measured as shown in Table 4.4. From the
,
i':
~
.~

data sets, the diameters of the pipes were determined by comparing average values.

. .

Table 4.4 Piping Measurements Parameters from Laser Scanning Data
PIPES Section End Points

1
1

1 2
Axis

2

1 2
Axis

B

3

1 2
Axis

4

1 2
Axis

5

1 2
Axis

1
C

1 2
Axis

2

1 2
Axis

I I
1

3

1 2
Axis

I

1

1

1 2
Axis

0

t P
It
)"

2

1 2
Axis

X -51.310 -46.869 0.783 -38.404 -30.773 0.789 -29.163 -22.519 0.774 -32.886 -26.502 0.784 -24.611 -21.172 0.747 -17.326 -12.317 0.779 -5.725 8.328 0.784 15.733 20.634 0.797 -17.533 -18.760 -0.522 -9.411 -9.994 0.199

.

y -12.538 -12.799 -0.046 -10.086 -10.491 -0.042 -10.595 -10.996 -0.047 -13.552 -13.885 -0.041 -13.981 -14.177 -0.043 0.265 -0.062 -0.051 -0.395 -1.272 -0.049 -1.704 -1.934 -0.037 -31.439 -32.492 -0.448 -22.629 -20.571 0.980

Z

Diameter (inches)

-198.450 -194.929 0.621 -194.565 -188.638 0.613 -187.589 -182.169 0.631 -183.969 -178.923 0.620 -177.234 -174.182 0.663 -183.902 -179.886 0.625 -174.604 -163.509 0.619 -157.88 -154.178 0.602 -163.273 -161.565 0.726 -172.376 -172.391 -0.007

2.068

2.012

2.248

2.221

2.129

3.408

3.429

3.416

4.497

4.436

J~

III

51

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Figure 4.8: Point clouds of Pipe B (2" diameter) and D (4" diameter)

Figure 4.8 Point Clouds of Pipe B (2" diameter) and D(4" diameter)

Figure 4.9 Point clouds of Pipe C (3" diameter)

52

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.3.3 3D Model and Measurement of Piping System

The final step of both photogrammetric and scanning processes can be exported into other CAD and commercial modelling software. To acquire the diameter of pipes, circle fits were performed based on bundle adjustments of data in the photogrammetric process. On the other hand, 3D reconstruction of pipes was necessary based on cylinder fitting algorithms using point cloud data in laser scanning process. The diameters of the pipes were measured by a digital caliper with a precision ofO.Ot inches. Measurements from the photogrammetry and laser scanning processes are shown in Table 4.5. The differences from the measurements by a caliper range from 0.01 to 0.03 inches using the photogrammetric process and 0.06 to 0.2 inches using the laser scanning process.

Table 4.5 Pipes Measurement Results by Photogrammetry and Laser Scanning (Unit: Inches)

Pipe Pipe B PipeC PipeD

Diameter (outSide)

Digital Ph9togrammetry

Laser Scanning

2.36 3.50 4.50

2.345 3.529 4.510

2.136 3.418 4.443

According to the results, it can be stated that the photogrammetric measurements are a more accurate application than laser scanner using this experiment setup. The size of objects, the distance to objects, geometry of measurements, and types of materials are all

S3
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

ignored in this experiment. However, they should be considered when the project is applied into real situations.

Figure 4.10 Final 3D Model of Piping Objects from Digital Photogrammetry

In Figure 4.10, a completed 3D model of a piping system can provide information of the pipes' locations and geometry. Reconstruction of a final 3D model can be used in design and reverse engineering applications. This as-built digital information is growing in demand for the piping industry, such as chemical process plants and nuclear power plants. The major issues in these industries are deformations, cracks, or fractures, which can occur during the transport of liquids and gases. Application of 3D measurements by photogrammetry or laser scanning can reduce the time and effort required for the design and planning processes.

l(
I

54

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5. Effect of Reflecting Surface Material Properties on Laser Scanning Process 5.1 Purpose of the Experiment

The purpose of this experiment is to examine the effects of reflecting surface materials on laser scanning measurements. Reflectance of material is an issue for scanning, and data capture is impossible without sufficient reflection of the laser beam, which is sensed by a photo-detector in a scanner head. One of the major factors in acquisition of field data is the reflectance of materials. Therefore, it is worthwhile to examine reflectance properties in order to acquire appropriate laser scanning data. The scanner (Cyrax 2500) uses a pulsed time of flight (TOF) laser with wavelength of 532nm and the energy of the returned laser signal mainly depends on physical and geometric factors. Physical factors can be included in the material's magnetic permeability and electric permittivity. Geometric factors include the angle of incidence and roughness of the surface. In this experiment, geometric factors were examined by coverage angle observation and alteration of physical factors was studied by application of different media on the surfaces. For this project, the study of various materials are limited to specific materials, which are being used in industrial piping systems such as brass, cast iron, aluminum, stainless steel, and pvc. However, the extended studies of different materials can be conducted for
other applications such as bricks, concrete, and wooden objects, which are major

components of buildings and urban structures. Observation of coverage angles and residual analysis are carried for different materials based on their point-cloud data. Dulling spray and masking tape are applied on

55

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

surfaces as a medium and the before-and-after applications were studied to determine if there were any changes in quantity and quality of point-clouds data. The results of the study can improve an overall accuracy of a measurement process in the application of industrial piping systems.

l
(
56

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5.2 Experiment Set Up

The test field was set up in an enclosed area and the model space area was approximately 2m x 2m x 2m. The test field was under normal fluorescent lighting without a natural light source. The lighting condition was uniform for the entire test and the temperature and humidity were constant in the room. There was no turbulence in the air, such as wind or dust, during the measurement process. Different types of circular-cylindrical materials were mounted on the table: aluminum, brass, cast iron, galvanized iron, stainless steel, glass, and PVC. The diameters of objects were measured by a digital caliper with a precision ofO.Olmm. The model space and testing objects are shown in Figure 5.1.

Pipes A B C 0

Surface Materials Brass PVC Stainless Steel Galvanized Iron Steel CeramiC Aluminum

E
F
G

Figure 5.1 Test Field Setup for Reflectance Experiment

57

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

To quantify and analyze the effect of reflectance on different surface materials, the scanner stations were set up approximately 2.9m to 3m from the model space. The distance from the laser scanner to the scanning objects was between 2.5m and 3.3m. The maximum coverage angle between two ,tangent points on a cylinder can be between 176 and 178
0 0

(theoretically) on a diameter of 30mm to 100mm, for a distance of 2.9m. The scanning resolution was approximately 1.7mrad (i.e., 5mm spacing at a range of 3m) and the number of points was between 30,000 and 220,000. The first set of scanning data was acquired from Stations 1, 2, and 3 and the second set of scanning (Stations 4, 5, and 6), which is shown in Figure 5.2, was conducted by applying dulling spray on the surfaces.

I
A B C
PIPES

D E" F

G

I
I
Single Point Accuracy Position: :l:6mm G 1.5m - 50m
Angle : :1:60 micro-radians

M

E

~

II II II II II II

OO/OQoqo / I II
,I ,I
,!

\

I
(

\

Station 3{4)

Laser Scanner Station 2(5)

~

,I

I'

'\ '\ \

f

I
\

Station 1(6)

~

I
I
I

I
I
I
I

I
Figure 5.2 Experiment Setup and Laser Scanner Stations
(

l

58

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 5.1 Description of Scanning Stations and Data Acquisition Scanner Stations 1 2 3 4 5 6 Scan 1 2 1 2 1 2 1 2 1 2 1 2 Scene Range (mm) 2884.11 2726.57 3287.49 3249.63 2561.68 2910.12 Sample Space(mm) Hor. X Vert. 5.015 X 5.021 2.001 X 2.002 5.020 X 5.003 2.003 X 2.002 5.009 X 5.023 2.002 X 2.004 5.012 X 5.048 2.003 X 2.001 5.011 X 5.027 2.001 X 2.000 5.020 X 5.021 2.002 X 2.001 No. of Points Sampling Time Hor. X Vert. 224 X 147 44 sec 2 min. 20sec. 564 X 369 204 X147 40 sec 2 min. 30sec. 512 X 367 219 X 154 40 sec 2 min. 50sec 548 X 386 221 X 149 38 sec 2 min. 47sec. 554 X 376 212 X148 38 sec 2 min. 44sec. 531 X 372 41 sec 225 X 155 564 X 389 2 min. 53sec

The size of a sampling space should be decided prior to acquiring scanning data as well as considering the size of the project and the achievable accuracy level. Laser scanning with a small spacing in a large model area can be time consuming. This experiment was conducted in a small area with stable conditions (i.e., without vibration, no high temperature). Therefore, a small sampling space was used (i.e., 5mm and 2mm). Two sets of scans were captured at each scanner station; the first scan data was captured at an approximate sample spacing of5.0 mm x 5.0mm and the second was 2.0mm x 2.0mm. The first scan was a sparse and fast procedure to examine if point clouds data
I

,
f f

were reliable. It also took only less than a minute as shown in Table 5.1. For this experiment, the second data set, a sample spacing of 2.0mm x 2.0mm, was used and it was dense and data acquisition time was less than three minutes for each scan.

!
! ,
t

r

I

i i
f

f ~

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

i

59

5.3 Surface Roughness in 3D Laser Scanning
Surface roughness is the quantified surface geometry since there is no perfectly smooth surface. Surface topography is a very important factor to specify the function of a surface. A significant proportion of component failure starts at the surface due to either an isolated manufacturing discontinuity or gradual deterioration of the surface quality. The most important parameter describing surface integrity is surface roughness. Surface texture can be difficult to quantitatively analyze. Recent developments in production techniques, and metrology equipment have made it possible to specify and measure surface quality. Surface quality is important when dealing with: · lubrication - small indentations can hold lubricant, · corrosion - smoother surfaces are easier to clean, · resistant to wear - smoother surfaces wear less, · noise reduction - smooth surfaces make less noise when rubbing. In reality, surfaces are rarely perfectly flat, or smooth. Surface geometry can be quantified in several ways as shown in Figure 5.3.
Perfectly Flat and Smooth

I
I

I
l
(

I

I
\

1

I
l
\

(

I

1__________N_o_tF_I_M_an_d_s-m~
Rough (Flat)

( I

I
I
I
(

I
(

Figure 5.3 Different types of Surface Geometry

l

60

I _,

,

'''\
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Surface roughness can be measured in different ways, which can be classified into three categories: · statistical descriptors that gives average behavior of the surface height. For instance, average roughness

Ra; the root mean square roughness Rq; the

skewness Sk and the kurtosis K. · Extreme value descriptors that depend on isolated events. For example, the maximum peak height Rp, the maximum valley height Rv, and the maximum peak to valley height Rmax. · Texture descriptors that describe variations of the surface based on multiple events such as the correlation length.

From those above categories, the measurement of Ra is one of the most effective surface roughness measures commonly adopted in general engineering practice. The

Ra is

defined as a roughness average that is the arithmetic average of the absolute values of the measure profile height deviations taken within the sampling length and measured from the graphical centerline (ANSI B 46.1, 1985). The

Ra can be measured by taking the average

area per unit length that is off the centerline (mean). This method is called the Centre Line Average (CLA), or Arithmetic Average

(Ra) as shown in Figure 5.4, which is calculated by

area, and the units are micro-inches or micro-meters.

61

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Ra =(AJ + A2 + A3 + A4 + AS + A6) / I

I
l

Figure 5.4 Surface Roughness (Ra: Arithmetic Average) by area

I
I
(

(
There are a number of useful techniques for measuring surface roughness, · · · Observation and touch - the human finger is very perceptive to surface roughness Stylus based equipment - very common Interferometry - uses light wave interference patterns.

I

I
I

I
All of the materials used in this experiment except ceramic were processed by mold casting or polishing. Based on data [defined in ANSI B46.1-1962], the range of roughness height is between 1 to 4 J.lll1 with a casting process.

I
I

I
I
I

(

I
(

l
62

)Ji"
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

"

I .. II L
1

I;
./'
./'

1
/"
Sample Spacing: 2mm X 2mm

./'
Field of View H: 40', V: 40' ./'

./'
Loser Scanner ./'

./'

./'

-

--

· · ··· ··· · ··· · ··· · · ··· ···
_

··· · ··· · ···

----

Measurement Surface

Figure 5.5 Diagram of Laser Scanner Operation

The laser scanner used in the experiment uses a Class 2 green laser and the central wavelength is 532nm. The operation oflaser scanner is shown in Figure 5.5. The wavelength is the distance between points of corresponding phase of two consecutive cycles of a wave. Beam diameter is smaller where the wavelength is shorter. Therefore, the angular spatial resolution is higher. Beam divergence usually refers to a beam of circular cross section and a beam might have an elliptical cross section. Beam diameter is used to characterize electromagnetic beams in the optical regime and it intersects the beam axis and lies in any specified plane normal to the beam axis. According to the manufacturer's specification, beam divergence is less than 6mm at 50m in object distance. Angular resolution is O.25mm at 50m in object distance. The spatial resolution is equal to the angular resolution (in radians) times the distance between the object

63

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

and the scanner head. According to the manufacturer, the scanning (angular) resolution is

f,
5~ad,

which is based on a minimum O.25mm laser spot size at a range of 50m.

I
I

I
I

!

I I

I I
i

t
I

(

I

I
I
I

I
\ {

I

64

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5.4 Coverage Angles and Residual Analysis
5.4.1 Observation of Coverage Angles on different surface materials

Point-clouds data from scanning Stations 1 to 6 were selected to observe coverage angles on the different surfaces. From the scanning data, each cylindrical object was closely examined and unnecessary points were eliminated for cylinder fitting. By use of the 'fit-to-cloud' option, cylinders were formed for each object and its diameter was determined. Point clouds data were exported into TXT and DXF CAD file formats to observe a coverage angle and conduct residual analysis.

Figure 5.6 Observation of Coverage Angles on Point Clouds

Based on a diameter measurement by a digital caliper, a circle was drawn and fit into the imported point clouds data. Two lines were constructed by connecting the center of

;

J

65

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

circle and one of the points, which represents the point on the surface. The coverage angle was observed by intersecting two lines. As shown in Figure 5.6, small dots in red and yellow (appears as lighter dots in a BlacklWhite image) are represented points on the surface, and circles and lines are drawn in blue and three locations were arbitrarily selected. Then, coverage angles were measured. From three observations, the maximum value was selected and calculated as a percentage of total coverage (Le., 360° is the total coverage of cylindrical object). The diagram of maximum coverage angles for each object is schematically shown in Figure 5.7 and the coverage angles and their percentages for each object are in Table 5.2. In the case of PVC and stainless steel, the coverage angles are 62.19° and 59.63°, respectively, which represents a very poor percentage coverage of 17.3% and 16.6%, respectively. The cylinder fitting process with these point-clouds was not possible due to insufficient coverage areas. On the other hand, in the case of brass and ceramic, the coverage angles were observed at 165.13° (45.9%) and 126.49° (35.1%), respectively. From the experiment, it can be concluded that the percentage of coverage angle should be at least 20%, but 30% is .recommended, in order to fit cylinder model properly to pointclouds.

A

B

9Q

Figure 5.7: Diagram of maximum coverage angles
66

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 5.2: Coverage Angles and its Percentage for Various Surface Materials
Diameter (mm) Pipes Surface Materials A Brass 38.02 B PVC 38.05 31.69 Stainless Steel C 0 Galvanized Iron 80.90 E Steel 63.45 F Ceramic 111.40 G Aluminum 113.25 Angles (0) 165.13 62.19 59.63 83.08 86.46 126.49 98.64 Coverage

(%)
45.9 17.3 16.6 23.1 24.0 35.1 27.4

The coverage angles of point clouds in PVC and stainless steel pipes were less than 20°, which was not sufficient to model objects properly due to the poor data point distribution as shown in Figure 5.8. In the case of the PVC pipe, the surface color, which was

Figure 5.8: Point Cloud Data of PVC (left) and Stainless Steel (right) Pipes

67

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

black, was also one of the factors that decreased the number of point cloud data. The laser energy is absorbed by the black surface. As a result, the captured points appeared in red, which can result in a range delay. In the case of aluminum, the surface acquired points were scattered and the point clouds was poorly distributed. With a small incidence angle (Le., < 20°) the reflected energy was strong enough to be detected at the scanner head. However, a very small number of data points covered the surface. This can be a result of laser energy being refracted into the air. Therefore, a return signal was not detected on a photo-detector.

68

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5.4.2 Application of Media to Increase Surface Roughness

A strong reflection signal is a key factor to capture sufficient point data from field measurements. Since the energy of the reflected pulse depends on physical properties of surface material, it is worthwhile investigating if any types of media could improve surface reflectance without degrading data accuracy. An application of chalk dust and a light coat of emulsion have been introduced to increase the reflectance of the material. In this pilot experiment, a dulling spray and masking tape were applied as a medium of altering surface properties.

Surface Roughness
Surface roughness is one of the major factors which affect point clouds data, and is usually expressed with an arithmetic average roughness (Ra). .Those values are within 10-3
pm to several pm and depend on the treatment processes. However, the surface roughness

of metals covers a wide range of its value due to various surface treatments, grinding, polishing, and coating. During this experiment, unfortunately, it was unable to measure the roughness values, which would have offered a great opportunity to compare within various materials. Instead, surface roughness values previously tabulated were used. Although the surface roughness of rough ceramic was not available, it is assumed that surface roughness is much higher than other materials by visual observation.

Application of Dulling Spray
In order to acquire point-cloud coverage with reliable accuracy, increasing surface roughness was the first method tested. A dulling spray was applied on the area of the surface,

69

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

except on brass and ceramic objects, which already had enough coverage angles. The thin clear coat was formed on the surface and the coat was transparent. The advantages of this application are (1) relatively easy and fast application, (2) easily removable by rubbing with or without water, (3) no effect or damage on most of material, (4) no effect on measurement due to its thin clear coating. Dulling spray was applied on the lower half of the objects to compare the differences with "as-is" condition. The short time period was necessary for the spray to completely dry. The scanning process was continued under the same laboratory conditions as described in the experiment setup. From the point clouds, three observations were made to measure a coverage angle within distribution of points on surfaces. The impact of spray was quite extensive in terms of a coverage angle, which is critical to fit objects during 3D modelling processes. The reflectance difference after applying dulling spray, as clearly shown in Figure 5.9, can be observed visually in the point cloud data. The lower half bQttom of the area was coated with a

Aluminum

Sprayed

I Figure 5.9 Point Clouds showing with and without an Application of Dulling Spray
70

I
i

l

/l,\
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

i

I

dulling spray and had a wider coverage angle than without spray by 61%. As shown in Table 5.3, the percentage increases of coverage angles were between 60% and 154% and the modelling process was possible with PVC and stainless steel, which had less than the critical 20% coverage angle without spray.

Table 5.3 Observation of Coverage Angles with/without Dulling Spray Application Coverage Angle Observations (degree)
1 2 165.13 57.14 98.94 59.63 151.16 67.95 126.65 86.46 153.32 126.49 98.64 161.66

Pipe Surface Materials

A B C
D
E

Brass PVC Stainless Steel Galvanized Iron Steel Ceramic Aluminum

F

G

As Is As Is Sprayed As Is Sprayed As Is Sprayed As Is Sprayed As Is As Is Sprayed

158.20 62.19 115.12 56.17 134.91 83.08 134.79 82.47 145.50 123.71 93.11 156.91

3 153.15 52.79 123.51 45.22 140.59 69.55 136.62 81.45 149.94 124.01 95.24 153.08

Coverage Increase (%) (%) MAX. Angle
165.13 62.19 123.51 59.63 151.16 83.08 136.62 86.46 153.32 126.49 98.64 161.66 45.87 N/A 17.28 98.6 34.31 16.56 153.6 41.99 23.08 64.4 37.95 24.02 77.31 42.59 35.14 N/A 27.40 63.91 44.91

The thin sprayed coat was easily removed by rubbing it with a cloth two days after the spray application was made, and no indication of a surface change was observed. However, heat and high temperature of piping surfaces might be problematic and risky in practical field applications such as with pipes in industrial process plants. It should be handled carefully where open flame or spark may exist. The effects of heat and high temperature on spray coating have not been studied at this time.

71

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Application of Masking Tapes Masking taping around pipe surface can be another method to increase coverage angle on certain surfaces such as aluminum or steel. The use of masking tape can alter the geometric factors, such as surface roughness and the angle of incidence. To increase surface roughness on the aluminum surface, masking tape was wrapped around the top half of the cylinder and scanning points were acquired as shown in Figure 5.10. Many scattered red points appeared on the left side of the (untapped) aluminum surface and most of area is blacked out, which can also be seen as shadow effects in other areas. The result indicates that the laser beam did not return to the scanner head, which means the laser energy was scattered into the air due to a very shinny and smooth (texture) surface.

I
j j

I
I I

I
I
I

Masking Tape

Aluminum

Figure 5.10 Scanning Point Clouds with and without a masking tape

72

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

The point-clouds on masking taped areas are shown with yellow and green colors, while it is mainly red in aluminum surface areas. Aluminum or galvanized steel is widely used for insulation of piping system and the application of masking tape is feasible where the surface of the pipe is smooth and of a low temperature. It is relatively simple to apply a masking tape. However, high temperatures or surface roughness (e.g., rusted surfaces) might be a barrier to applying this technique.

73

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5.4.3 Residual Analysis

Point-clouds data were exported to a text file fonnat, which has x, y, and z coordinates. A residual analysis was perfonned by fit-cylinder algorithm. Two sets of data from as-is surfaces and dulling spray-coated surfaces were analyzed and compared in tenns of data precision and distribution. The total number of points processed with residual analysis were 19899 for sprayed surfaces and 12175 for as-is surfaces. The application of dulling spray on the surfaces dramatically increased the number of captured laser samples especially in the case of PVC and aluminum as shown in the Table 5.4. As a result, the number of points was greater in scanning data of sprayed surfaces than as-is surfaces.

Table 5.4: Scanning Point Clouds Residual Analysis Results

I
I

I
[ (

I
I
(

The residual analysis was perfonned with software packages, which was provided by Fidera and Chapman (2003). This software uses a cylinder fitting algorithm. Residual analysis was perfonned and data points were rejected at 2 times sigma and 3 times sigma. Points that have less than three times standard deviation of data sets are retained for further analysis. The number of rejected points with data sets from sprayed surfaces, in general, are less than on as-is surfaces. Thus, the application of dulling spray on the pipes brought significant improvement on laser scanning data acquisition quantitatively and qualitatively.

I,

74

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

According to the residual analysis, the number of point clouds above the 'actual' surface is 2.3 times more than the points below the surface. In addition to the data volume improvement for point clouds, the quality of points was also improved in terms of 3D measurements. Skewness of point distributions shows with 'negative skew', which is skewed to the left in both with spray and without spray coating. However, under the assumption of normally distributed data, those points had a 'tendency' of a normal distribution in the case of spray-coated surfaces. Kurtosis shows the size of the tail in distribution curves. The point clouds of PVC pipe have the largest positive value in Kurtosis; the data points are poorly

r

distributed as shown in Figure 5.11. During the running residual analysis program, the magnitude of sigma was being changed between two to three and the iteration process was stopped at the assigned value

Histogram of Point Clouds Constraints

without spray

Histogram of Point Clouds Constraints Dulling spray c:oated
~,------.------------~

5
~
II.

o + W 2 1500 o +o ----1000 + - - - - -

~

2500 , - - - - - - - - - - - - - - - - - ,

~

~

a

W ::»
~
II.

z

3000

t----------=

2500
2000 1500+----

+------

500+---0

+-r-.-.,........

:
RESIOUAL(mm)

1000

500 +-------t.
o+---...-~~ ~ ~

i

·

~

4 4

~

0 1 234 5

e

7 8 9

RESIOUAL(mm)

J

I

t I
I.

I

SKEWNESS

KURTOSIS
0.8
0.6

I I
I

I

r
I'

0.2 0.0 U) -0.2 fa -0.4 -0.6 :iii:: -0.8 U) -1.0 -1.2
PIPE 10

,

... , '.
2

:
I
I

I

0.4

.
"3

ill
~

<II

~ :I

0.2

0.0 -0.2 -0.4 -0.8

.,

,

~ t-··~

'v.' '1

8

/.~~

J~

PlPEID

I~AI~' ·· ,a.·· 'Sprayed

I

Figure 5.11 Statistical Analysis of Point Clouds Data
75

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

where residuals and standard deviation were computed. The changes in the percentage of rejected points by changing magnitude of sigma (Standard Deviation) are plotted for each pipe as shown in Figure 5.12. According to the figures, the percentage of rejected points are decreasing while increasing the magnitude of sigma.

Rejected Pointe u.. std. Deu. (Ae-Ie)
30

Rejected Point. V·· std. Deu.(Sprll/lld)
_30~----------------~

g25

.!:2O

·
CI
II

__ 1

a. 15

1\ f\.\

. __ 2
.~

~25+-----------------~

3

.e o

·
GI

-+-1

~~----------------~
15~~--------------~ 10+-~.~~----------~

--2
'"

" !

l'~,.\.

-4

10

ii' 5
1:1:

i'--..~~1...
~

-5

.,.
2.6

..
2.8 3

--6 --+-7

" !

a.

__ 5

_
..

,
3

--6

o
2

i ~ t:::::~~~_~·~-;:-···~·-l
2

_7

22

2.4

22

2.4

2.6

2.8

3

times Sigma

time. Sigma

Figure 5.12 Relationship between rejected points and sigma during iteration

I
r

In order to verify the quality of the data standard deviations of measurement parameters are taken from the running data analyses. The parameter, g, is a distance between the origin and the cylinder surface measured along the perpendicular from the cylinder axis. The unit of"g" is based on input data from the field measurement, which is mm in this experiment. Three parameters, u, v, and a, are angles in degrees and each refers to three different orientations form the origin (Le., X, Y, and Z axis followed by right hand Cartesian coordinate system). These parameters of standard deviation for each pipe with two different conditions, as-is and dulling sprayed, are in Table 5.5.

I
I,

I
I

I
l
I

I

I
I
I
\

l

I

76

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 5.5 Values and Standard Deviations of Major Parameters
Actual Values of Major Parameters
PIPE g (mm) As-Is Sprayed u (degrees) As-Is Sprayed v (degrees) As-Is Sprayed a (degrees) As-Is Sprayed

k (1/mm)
As-Is Sprayed

1 2 3 4 5 6 7

-1.08 5.24 3.32 -5.74 -3.56 -27.81 -20.26

-1.11 2.67 2.55 -12.31 -3.36 -28.64 -25.2a

-0.24 -0.9 89.99 90.01 87.87 -1.19 -0.8 89.96 90.00 88.1-4 -1.04 -1.3 89.97 89.99 88.42 -0.90 90.00 88.65 -0.8 89.9a 90.0C 87.99 -0.40 -0.8 89.99 -0.39 -0.3 90.00 90.01 89.58 90.10 87.92 -6.27 -3.3 89.77 . . Standard Deviation of Major Parameters
u(degree) As-Is Sprayed 0.09 N/A v(degree) As-Is Sprayed N/A 0.46

90.4 90.1 89.4 90.3 90.2 91.8 91.7

0.09 0.21 0.15 0.06 0.07 0.03 0.03 k(1/mm)
As-Is

0.09 0.1-4 0.13 0.04 0.07 0.03 0.03

PIPES

As-Is

1 2 3 4 5 6 7

g(mm) Sprayed 0.06 N/A

a(degree) As-Is Sprayed 0.08 N/A

Sprayed

0.23 0.07 0.06 0.03 0.02 0.06

0.09 0.09 0.05 0.03
N/A

0.02

0.14 0.02 0.01 0.01 0.05 0.04

0.05 0.02 0.03 0.01
N/A

0.03

1.01 0.28 0.34 0.22 0.05 0.16

0.45 0.35 0.23 0.17
N/A

0.06

0.13 0.02 0.01 0.01 0.05 0.06

0.04 0.02 0.02 0.01
N/A

0.02

0.00028 0.00529 0.00169 0.00011 0.00011 0.00002 0.00007

0.00030
0.0006~

0.0004C 0.00010 0.00008 0.00002 0.00002

According to the data, the standard deviations of all the parameters in sprayed condition are less than those in as-is conditions, as shown in Figure 5.13. Standard deviations from measurements of sprayed pipes are within a small range while those from as-is pipes are in a wider range with abrupt peak at Pipe 2, which is a PVC pipe.

77

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

I
(
I

Std. Dey. of g
0.25 0.20 0.15

Std. Dey. of angle u
0.25 - r - - - - - - - - - - - - - ,

I 1

0.20 + - - - - - + - \ - - - - - - - - - - - - 1
~ 0.15

t
I
r

i' S-

0.10

I

0.10

++---..._---'10..__---------1

0.05 0.00

0.05"1"-------..,;;:---------:7"""

II \

2

3

..
PlPEID

2
5
8 7 -----....- AS-IS
- - . - -SPRAYED

3

.
PIPEID

5

8

7

i

-----....-AS-IS - - . - -SPRAYED

I

I I
,

Sid. Dev. of ang.. v

Std. Dey. of angle a
0.14 ,-,- - - - - - - - - - -

::"'---1-- - 0.80 + - - 1 - - - \ - - - - - - - - - - - 1

0.12 + - - - - - + - + - - - - - - - - - - - - 1
0.10 + - , 1 - - - - + - - - - - - - - - - - 1

i f

.f

0.80
0.40 ~--'=--"'__<_c\=_----------j

! .f

o.~
0.08 +-'-;----\----------:;;>""""1" 0.04

+---1_--\--------rJ"--

0.20 +-------I.."..--d~-----.l.
0.00 +--~-~-~-~~~--=r

0.02 +-----'-iP"...-I-=----fr----'i'
0.00
+--_-~-~

_ _~-687 _ _ _ _ AS-IS

234 PIPE ID

- -.- - SPRAYED

Figure 5.13 Standard Deviations of Measurement Parameters The effects of dulling spray coating can be summarized in the following: a) surface roughness is increased by spray coating, and as a result of this b) the coverage angle of point clouds was increased c) the total number of point clouds was increased d) overall, the accuracy of measurements on pipes was improved,

I
I
I,.

:1

78

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

and from these results, 3D modelling of piping objects can be improved measurements.

In

their

79

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5.5 3D Modelling Process
3D modelling is considered as the final product of photogrammetry or laser scanning process and CAD models are usually built up from simple parts such as straight pipes, elbows, and T-joints. The developed CAD based reconstruction method uses primitive CAD models such as cylinders, boxes, and spheres. The primary model used in this project was a cylinder, since industrial piping objects were measured as major objects. Three sets of scanning data were joined using a cloud-based registration method, which was recently introduced (Fall, 2002). Unlike with control tie point based registration, the registration can be done with points and without setting of control targets around model space. This application can not only eliminate the time and cost for setting artificial targets but also reduces the difficulties of setting up targets on or around areas with difficult accessibility. Each scan set is registered with a minimum of three common points. These points can be located anywhere, but an edge of an object or very distinctive points should be chosen to track them easily in successive scan data set. The resulting scan cloud mosaic, shown in Figure 5.14, captures a part of the table and piping objects.

I
I

I

I

!

80

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Figme 5.14 Point clouds mosaic of piping objects

The standard deviation of the point cloud noise is 6mrtl according to manufacturer's stated precision. For each model, each point cloud was separated by selecting a window and subsequent "points cleaning" was necessary to eliminate unnecessary points, which can

be mainly due to noise and. points of adjacent object such as the table top in this
experiment.

81

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Observation and Measurements of 3D Modelling Objects

After point-clouds were selected from 'point clouds cleaning' the cylinder was constructed by using manufacturer's modelling software and fitting algorithms. The piping object was fonned based on the cylinder fittings and the 3D model of the aluminum pipe with point clouds data appearing in Figure 5.15. The diameters of the cylinders were detennined based on fitting object to point clouds. The diameter of each object is compared with a 'true' diameter, measured by a caliper with precision ofO.Olmm.

Figure 5.15 Point clouds and a constructed cylinder (Aluminum Pipe)

The errors in measurements of pipes' diameters are shown in Table 5.6, and the actual measurements by a digital caliper are compared with measurements by software A (Figure 5.16) and manufacturer's software B (Cyclone by Cyra). The column Errors A is the

82
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

differences between the caliper measurements and Software A; the column Errors B is differences between the caliper measurements and Cyclone software. The range of differences in the case of brass, stainless steel, and steel was between 4mm to 9mm for both software A and B. The error values appearing in Errors A correspond to those values in Errors B.

\
... POint

l.can1 pIPe6.t

[loud Data 3-0 AdJuster and Analvser

'

Yl~;'!![t

Zoom In
Scale
lactor:

I I
Zoom Out

1" v

rt5
393.601'

143.788'

tesl

-..-.. .) i [8 t.... ....!
8111!

~

fxit

Figure 5.16 Point Clouds data of Ceramic Pipe in Software A (Fidera and Chapman. 2003)

According to the table, the cases involving galvanized iron, ceramic, and aluminum, the values measured from modelling using manufacturer's Cyclone software were within 2 to 4 mm when compared to the 'true' diameter. On the other hand, with Software A the
83

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

errors in the case of ceramic and aluminum are - O.81mm and 0.16mm, respectively, which are considered to be quite small given this type of measurement.

Table 5.6 Results of Diameter Measurements by Two Different Software Packages (Unit: mm)

PIPEID 1 2 3 4 5 6 7

Materials Brass
PVC ~tainless Steel ~alvanized Iron

Steel
~eramic ~Iuminum

Actual Diameter 38.02 38.05 31.69 80.9 . 63.45 111.4 113.25

Software B Software A (Cyra) Errors B Errors A (Ryerson) 29.99 8.03 4.21 33.81 21.04 17.01 16.31 21.74 8.06 7.09 23.63 24.60 77.28 3.62 6.26 74.64 7.89 55.56 54.35 9.10 2.17 -0.81 109.23 112.21 2.48 113.09 0.16 110.77

The error in PVC pipe, with a diameter of 38mm, was 16.31mm and 17.01mm with Software A and B, respectively, and shows a larger error which is unacceptable in any case. The number of point clouds (946 after sprayed) and the size of coverage angle (17.3°) on PVC pipe were the smallest values compared to other pipes. As stated by the manufacturer, the modelling errors are within 2mm with 6mm of single point accuracy. The range of errors appeared in the table are reasonable, except for the measurement of the PVC pipe.

Relationship between Coverage angles and Measurement Errors
From Section 5.4.2, the coverage angles within various surface materials and the changes with dulling spray application were studied. In Table 5.7, the values of the

84
Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

percentage coverage angle in each pipe are measured with point clouds from scanning data. with pipes' surfaces were applied by a dulling spray. To correlate the coverage angles and measurement errors, weighted coverage angles are introduced. The percentage coverage angle was calculated based on the size of the pipes. Therefore, to normalize the data the values are to be weighted by their pipe size. The weighting values were calculated by multiplying of the ratio of the diameter to coverage angle.

Table 5.7 Percentage Coverage Angles and Errors in 3D pipe measurements
Actual Coverage Weighted Diameter(mm) Angles (%) Coverage Angles(%) Error A 38.02 45.87 17.4 4.21 38.05 13.1 16.31 34.31 7.09 31.69 13.3 41.99 80.9 6.26 37.95 30.7 63.45 9.10 42.59 27.0 111.4 35.14 0.81 39.1 113.25 44.91 50.9 0.16

Pipe

Error B

A
B C 0 E F
G

8.03 17.01 8.06 3.62 7.89 2.17 2.48

In the plot, as shown in Figure 5.17, each percentage coverage angle corresponds to measurement errors, which were generated from both software A and B. The constructed trend lines are showing that the percentage coverage angle is reverse proportional and can be expressed with the following:

Errors = K (II a )
where, K is a constant and a is a percentage coverage angle.

85

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Coverage angles and Errors
20

w

E 15

.

E r! 10

·
0 20

2

5

Ot40
Coverage Angle (%)

---~ 60

A

·
I

Error A Error 8

A

Linear ( Error A) · · · · · Linear ( Error 8)

I

I

Figure 5.17 : Relationships between Coverage Angles and Measurement Errors

The surface roughness of these two materials are in very small range, where the value of Ra is between lJ.lm to 5J.lm based on the Figure 5.18 from the ASM Metals Handbook Volume 5 (Surface Finishing). Point clouds from the edge effects were eliminated during the editing process. As a

Correlation of Surface Roughness
8.---~~--~----~~--r----,

to Grit Finish

s

:i ...

'i

E a. .

ISO

.:
II)

..
II
:::I

:I

2

~

·
o
~

0

100

I"

200 2" :100 Abrasive Grit II

:I"

.. 00

.. "

Figure 5.18: Surface Roughness (Ra) of Stainless Steels
86

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

result, the diameters measured by a scanner were slightly less than the measurements by a caliper. Final 3D models of pipes are shown in Figure 5.19 and the modeled surface precision can be varied by the modelling methodology.

+

"
Figure 5.19 Final 3D modelling of Piping Objects by Laser Scanning

87

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

6~

Conclusions and Recommendations

6.1 Conclusions

Digital close range photogrammetry and laser scanning using LIDAR are attractive technologies for industrial metrology and precise measurements. To acquire the diameter of pipes, circle fits were performed based on bundle adjustment of data in photogrammetric process. On the other hand, the 3D reconstruction of pipes was based on a cylinder fitting algorithm using point cloud data in the laser scanning process. The differences from the measurements by a caliper were the range of 0.01 to 0.03 inches and 0.06 to 0.2 inches in photogrammetric process and laser scanning process, respectively. Based on lab testing results, it can be concluded that the digital photogrammetry method
IS

more precise than laser scanning with 1m to 3m object

distances under laboratory conditions. However, laser scanning can be applied to measurements which has the greater level of accuracy (Le., 5mm) and also has advantages such as great accessibility and employs a target-less procedure. According to the observation of coverage angles, which relate to distribution of point clouds, the results show that PVC and stainless steel have small coverage angles (i.e., 62° and 59°), while brass and ceramic pipes have wide coverage angles (i.e., 165° and 126°). In order to properly form a model a coverage angle of at least 20 to 25% (approximately 70° to 90°) is recommended. The effects of dulling spray application were quite distinguishable and the results showed 60% to 154% increases in coverage angles of point clouds compare to "as-is" conditions. Masking tape was tested on the aluminum surface and the area of scanning

88

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

point clouds increased. As a result, the accuracy of the measurement of the object improved. The procedure of the applying these media was relatively simple and efficient in industrial environments, and their results were reliable for object measurements and modelling process. The diameter measurements of piping objects based on 3D fitting model showed the measurements were close to the 'true value' in the case of ceramic, aluminum, and galvanized iron. However, measurements on some materials such as PVC and stainless steel had significantly large errors. The contributions from the study can be summarized in the following: · The possible combination techniques using digital photogrammetry and laser scanning in industrial measurements were introduced. · Surface reflectance properties in various piping materials are examined. · Application of media such as a dulling spray and a masking tape was introduced in order to improve data collection and data accuracy.

6.2 Recommendations
The reflectance experiment in various piping materials can provide a pre-analysis of laser scanning projects and avoid unnecessary scanning or time spending. Furthermore, the application of dulling spray can be useful to maximize covering angles and the density of point clouds with a simple procedure. Investigation of detecting deformation area on the surfaces and displacement of pipes can be the valuable further studies. It is also worthwhile to study different types of surfacing agents or media in order to improve the quality of point clouds data.

89

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

References
Anderson, J. M. and Mikhail, E. M., 1998. Surveying: Theory and Practice. 7 Edition. The McGraw-Hill Companies, pp. 762-763.
th

ANSI B.46.1-85, "Surface Texture (Surface Roughness, Waviness, and Lay)," American Standards Association, 1985

Axelsson, P., 1999. Processing of laser scanner data-algorithms and applications. ISPRS Journal of Photogrammetry & Remote Sensing, 54: 138-147.

Beyer, H., 1995. Automated dimensional inspection with real-time photogrammetry. ISPRS Journal of Photogrammetry & Remote Sensing, 50(3): 20-26.

Beraldin, J.A., Cournoyer, L., Rioux, M., Blais F., El-Hakim. S.F. and Godin, G., 1997.

Object model creation from multiple range images: acquisition, calibration, model building and verification. International Conference on Recent Advances in 3D Digital
Imaging and Modeling, Ottawa, Canada: 326-333.

Boehler, W. and Marbs, A., 2002. 3D Scanning Instruments. Symposium, Sept. 2002, Greece.

ISPRS Commission V,

Co sandier, D. and Chapman, M.A., 1992. "High Precision Target Location/or Industrial

Metrology", Presented at Videometrics, SPIE OE/Technology, Boston, November 1992.

90

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Cyra Technologies, Inc., 2002.

URL:

http://www.cyra.com

Ermes, P., 2000. Constraints in CAD Models for Reverse Engineering Using Photogrammetry. International Archives of Photogrammetry and Remote Sensing, Amsterdam, 33(B5): 838-845.

Feng, H-Y, Liu, Y., and Xi, F., 2001. Analysis of digitizing errors of a laser scanning system. Precision Engineering, Journal of the International Societies for Precision

Engineering and Nanotechnology, 25: 185-191.

Fidera, A. and Chapman, M.A., 2003. Point Cloud Analyzer (Software Package), Department of Civil Engineering, Ryerson University.

Lichti, D.D., Gordon, S.J., and Stewart, M.P., 2002. Ground-Based Laser Scanners: Operation, Systems and Applications. Geomatica, 56(1): 21-33.

Lowe, D. G., 1991. Fitting Parameterized Three-Dimensional Models to Images. IEEE Trans. on Pattern Analysis and Machine Intelligence, 13(5): 441-450.

Mason, S., 1995. Expert system-based design of close-range photogrammetric networks. ISPRS Journal of Photogrammetry & Remote Sensing, 50(5): 13-24.

91

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Mulawa, D.C., 1990. Estimation and Photogrammetric Treatment of Linear Features. Ph.D. Thesis. Purdue University, Department of Civil Engineering, University Microfilms International, Michigan

Mensi Corporation. 2002.

URL:

http://www.mensi.com

Tommaselli, A., 2000. Orientation and Reconstruction of Close-Range Images Using Lines. International Archives of Photogrammetry and Remote Sensing, Amsterdam, 33(B5): 838-845.

Trinder, J.C., Jansa, J., and Huang, Y., 1995. An assessment of the precision and accuracy of methods of digital target location. ISPRS Journal of Photogrammetry and Remote Sensing, 50(2): 12-20.

van den Heuvel, F. A., 1999. A line-photogrammetric mathematical model for the reconstruction ofpolyhedral objects. Videometrics VI, Proceedings of SPIE, Vol. 3641: 60-71.

Veldhuis, H. and Vosselman, G., 1998. The 3D reconstruction of straight and curved pipes using digital line photogrammetry. ISPRS Journal of Photogrammetry and Remote Sensing, 53: 6-16.

92

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Vosselman, G., 1999. 3D Measurements in Images using CAD Models. ASCI'99 Conference, Heijden, June 1999.

93

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

