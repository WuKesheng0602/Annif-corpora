A 100 MHz - 1 GHz ON-CHIPPROGRAMMABLE PHASE-LOCKED· LOOP
by

, Haleh Vahedi BSc. Isfahan University of Technology, Isfahan, Iran, 1985

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the program of Electrical and Computer Engineering'

Toronto, Ontario, Canada, 2004 © Haleh Vahedi, 2004

PROPERTY OF RYERSON lA'ltVfMfTY lBWm

>

. .
. I hereby declare that I am the sole author of this thesis. I authorize the Ryerson University to lend this thesis to other institutions or : individuals for the purpose of scholarly research. .

Signature

j

I .

I further :authorize the Ryerson Univejity to reproduce this thesis by pho;ocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

.Signature

,

I

j

ii

The Ryerson University requires the signatures of all persons using or photocopying this . . thesis. Please sign below, and give address and date.

\

. .,

..

;

"

t

..

t..

_.

u'

,

.

: :.

iii

Acknowledgements
.. Doing this research project would be impossible without the helps of many people. I would

:like t~ express my profound gratitude to some of them without forgetting that I have learnt
from arid inspired by all my instructors at Ryerson University. Special thank goes to my .
s:upervisor~' professor Kaamran Raahemifar, who from day one brought his insight, vision,

exPerience, thoughtfulness, arid full support to this project. Dr. Ayal Shoval's kindness to be
,

.

present whenever I needed him arid to generously provide insightful arid vital suggestions arid .' ., directions was far beyond one can imagine about a friend. My full-hearted thanks can.not . express how .indebted I feel myself to him. I· would also like to thank The Canadian Microelectronics Corporation (CMC) for their .support that made the fabrication of the chip possible.

Many thanks to Kasra Ardalan and Mehrdad Asmani who kindly took their time to
p~ovide me their invaluable experience in. answering my questions. I learned a lot

from my classmates, specially I thank Arnir Khatibzadeh and Shahab Ardalan for their kindness and help. Last,' but not least, I thank my husband Majid and my daughter Mitra for all their kindness and priceless support which made all this possible.

IV

I would like to dedicate this thesis to my mother Jaleh Vahedi whose unlimited love, caring, and compassion never left-me alone.

\

:

..

.,

v .~

Abstract·
A 100 MHz - 1 GHz On-Chip- Programmable Phase-Locked-Loop Master of Applied Science, 2004 Haleh Vahedi The Department Electrical and Computer Engineering Ryerson University

A programmable wide-range PLL has been designed that can provide 100-MHz to 1-GHz rail-to-rail digital clock signal from a 50-MHz reference clock. The architecture is appropriate for low-power design and is also power-efficient. The system is robust against temperature changes so that the stability of the system is guaranteed. Because of the differential configuration of the sub-blocks and using a voltage-controlled oscillator with a 1Ow. gain and a linear transfer function the system has an acceptable noise rejection.

vi

. Table of Contents
Acknowledgment ................'.......'...... '... ,............. ; ..... : .................. .iv Abstract ............................ '" ........................... ,.: ................. ; ...... : ..... ,:vi List of Figures ..................,.......... : ...... : ........ : .. ~ ........,..............'....'........ .ix· . List of Tables ..... : ............................................... :.......... ·... ~·..............·:xi
'0'0' ' " ·

Ch~pter 1; Introd'uction ... :: ............. : ..'.................... '... '........ : . : .. ~ ........ 1 .: .
"

1.1 Applications ........... , ....... '" .......................... ~':'::.: ..... , ......... ~ ........·...2 1.1.1 Jitter Reduction ............ , ..... , ..... '" ... '" .........':: .., ............ :., ........ 3 . 1.1.2 Skew Suppression ....... : .......... : ........ : .................. : ................. :;.3 . 1.1.3 Frequency Synthesis .............. '............................. : .................. .4 1.1.4 Clock Recovery ................. : ............ , ................................ ; ..... 4 1.2 Main FeaturesAchieved in the Designed PLL ....................................... 6· 1.3 Outline of the Thesis ................................................................... : .. 8 '
.',

Chapter 2: Basic Concepts of PLL .. : .: .......................... :..... ;. : : ...... " :; ... 9' 2.1 Introduction .............. ~ ............... ,.. ; .. , .: .................. :: ... : ..... : .... ~ ......... 9 2.2 System operation ...............................,., ............................." ............... 9· .. 2.3 Terms and Definitions ..... : ...... : ........... : .................................. ;...... 10 2.4 Loop Dynamics ..... : ...... ; ................................. :................ 1. : : '. . . . . . . 10 ' '~, . 2.5 Phase-Frequency Detector and Charge-Pump PLL .................. ; ..'.... ;:.. ;. :.14'" 2.6 Dynamics of the Charge-Pump PLL ......................." .... : ..... ~' ...... ;......... 18 {;~
· .. >

~

,

'

~

Chapter 3: Literature Review .......................................................... 22
w... ,.
l" ."

3.0'-A Summary of Previous Works .... :: : .. : ......... : ....... ::: .....'................. ; .. 22 3.1 Different Methods for Getting Wider Rarige ..... :; ....... '.. : ............'....... : .. 23 3.2 Different Architectures for Delay Cell ..................... ;."..... ::............:....... ~.~ 26' ~,,~ . . . 3.2.1 Architectures with the External Control .................. : ...... ; ......~~.... 27; ;-~-.? .J 3.2.2 Architectures' with Internal Control..: ......................: .. ~: ...... : ..~ ..... :.29' '.. 3.2.2.1 Load controL ........................ .' .............................. 31 '. 3.2.2.1.1 Resistive Load .............. ; .... :.................' .. '.31 ,. 3.2.2.1.2 Symmetric Load ................................ " ":. .31 3 .2.2.2 Current ControL: ............... : .... ; ........................... 34 3.2.2.2.1 Diode-Connected Load ..... , '" .... " ............... 34 3.2.2.2 Modified-Current-Control Cell ....................... 35
10 . . . . . . . . . . : " . . . ····

Chapter 4: The Proposed PLL .' .: ... : ........ , ........ , .. , ... : ......·................ :.39
~
· I . ·

.r

4.1 System Level of the Design .: ...... :................... : .. : .. :.: ...................... 39 , 4.1.1 The Operation of the System : .............................................. .40 4.2 Circuit-Level Design ofPLL Block s ............................................... .42 . , 4.2.1 VCO Delay Cell·.. : ............... : .......................................... 43 '~ 4.2.2 VCO : ........................ : ........... ~ .................................... :49 :-- 4.2.3 Charge-Pump :: ... : .............................. :........................... 52 4.2.4 Phase-Frequency.Detector ....................................... ; .:....... 56
V1I "
.l' ,

4.2.5 Low-Pass Filter ~ .............................';'.: ............................. 57 4.3 Programmability and Utility Devices ............... ~ ............................. , .. 59 4.3.1 Divlder.~ ........................................................................ 59 , . 4.3.1.1 Asynchronous Divider ........................... : .......... , ... 60· 4.3.1.2 Synchronous Divider............... ~ ........................... 60 4.3.2 Logic Circuit. ........... ; ................................... ~ ................ 61 4.3.3 Comparator................... : ...................................... : ........ 62 4.3.4 Band-Gap Circuit .................................. ; ......................... 65 4.3.5 Voltage Reference Circuit ........................................ :: .. :., ... 68 4.3.6 Current Reference Circuit ........................ : ....................... 70 '. 4~3. 7 Aligning Delay Blocks ....................... : : ........ " . : ............... 71 '4.4 Testability of the Chip ......................................... : ................ : ~ ... ::. 72 4.5 Extra Features of the Design ........................ ~. 73
0 ..... : ............. : ·· :," .......

Chapter 5: Simulation Results and Layout ......... : .... : ..... : ....... :.·.c~

.... .' ... 74

5.1 Simulation Results for Some Major Blocks ................ : .......' ............... 74 5. L 1 VCO Simulation......................... :.... , ............................74 5 J .2 Phase-Frequency Detector.: ................................................ 76 5.2 MAlLAB Simulation Result ......................................................... 77 5.3 PLL Loop Simulation .......................................... : ................... '.. :.81. 5.4 Layout Considerations ................................................ , ............. : .. 88 5.5 Pads, Package and Chip Size.: ............................................... :'......... 89 5.6 PLL Specification.................... : .................. : ... : .......... ',: ..... .'... : ... 90

Chapter 6: Conclusion .;: ................... ~ .................... :........: .. ~:: .. ~. ~ .. 92
6. Features of the Designed PLL. ..................... ~. ~ ..... :. ": . .'.; ............ ,:~ .. '.... 6.2 Layout and Post-Layout Simulation ........ : .......................... :~ .. ~ .. _, ...93 6.4 Comparison ..... , ........... ~ ..................... ~ .... _ ...... ~ .........'........ :. ~~: .. :.93 ~ 6.5 SuggeStions for Future Works.:.................. ,. .. ~ ...... ~,. :,........'........ : .... 94 .

i

92 .
-

.

.

'

'

,.

~.»'

.-

·

, :

References ....... : ........... : ................................. ~. ~ :~.~ ............ :............. 96
"

"" ., ,.
'".,'

· ,1>-

"er
~~

...

..

,.1 ·

.'

..
'

. ,.

viii ;

List of Figures
I1T"" . . , · ImlngJltter ............. : ..... :..........·......... :............... : .. : .... 3 .' -.. F19ure. Figure 1.2 Clock skew in a digital system ..............·..... ~ ............ '....... ': .4' ., Figure 2.1 Basic architecture ofPLL ......... ·............................·.......·.. 9 Figure 2.2 Linear model of basic PLL ............................................... 12 . Figure 2.3 Gonceptual operation ofPFD .......................................... :.. 15 - '.' Figure 2.4 Basic implementation of PFD ...........................·....... ; ...... 15· . Figure 2.5 PFD with charge-pump : ............ :............ ;...:.. ::.... :....... ;... 16 ~ '~. Figure 2.6 Basic charge pump PLL '... " ... : ........... ; .: .......... ,: ............. 17· " Figure 2.7 Step response ofPFD/CPILPF combination .,..... ~ .......... ~ ..· ·.... 18 ". Fig.2.8 Linear model of basic charge-pump PLL ............................... ~ ... 19 . Figure 2.9 The charge-pump PLL architecture used a resistor in series with Cp and second capacitor . " ............... :....... :...... , ........... , .................... ; . ;: .. 21 ; Fig.3.1 Ring oscillator with least number of delay cells ~ .. ~ ..................... ;27 Fig.3.2 Configurations with capacitance tuning load ..................... ~.........28 Fig. 3.3 External control ......................... , ....... '" ........................ ;.29 Fig.3.4 Differential configuration with internal control '.......... :... , ........;...30 Fig. 3.5 Symmetric load idea .., .............................................. ~ ........ 32 Fig. 3.6 Resultant current of the symmetric load architecture' .... :. ,............. 33 i Fig. 3.7 Noise cancellation in symmetric load architecture ..... :; .............. .34 t Fig. 3.8 Current control architecture with diode-connected load ...........: .. ~.35
· .... ,"_t· '; _' _ ... .

,
.

-,

Fig. 3.9 Modified-control-current cell ................ :..............· : ....... ~ ......36 Figure 4.1 The block diagram of the proposed PLL ..... : ......................... 40 Figure 4.2 Implementation of the top-level system with AHDL blocks ........ .42 . Fig.4.3 Delay cell architecture with upper and lower controlled resistor ...... 44 Fig. 4.4 Two single-ended delay-cells bound together with two inverters in order to make a pseudo-differential configuration ............................... .45 . Fig.4.5 The circuit of mapper .................................................. : ~ .... .46 Figure 4.6 A partial schematic of the mapper accompanied by the transistor which acts as a resistive load ...... :.: ................................... :'.. , ......... ;.47 Figure 4.7 Partial schematic of mapper and delay cell -: ........ ,................~ ..49 Figure 4.8 Basic architecture of the VCO .......................................... 50 Figure 4.9 The schematic diagram of circuits inside each of the blocks of figure 4.8 ....................................................... 51 Figure 4.10 Tap architecture 7 ························································ 51 Figure 4.11 The Basic architecture of the chosen charge-pump .................. 53 Figure 4.12 The CMFB circuit for the charge-pump ....... :.... , .. ~ ............... 54 Figure 4.13 Dummy circuit added to the charge-pump ............................. 55 . Figure 4:14 Basic 'architecture of the phase-frequency detector ................. 56 Figure 4.15 The low-pass filter architecture ........................ ~ .............. 58 Figure 4.16 Combination of two dividers . . (synchronous and asynchronous) ............ ~ ....................................... 59 Figure 4.17 Asynchronous divider ............................ : ........... ;........... 60 Figure 4.18 Synchronous divider .~: .................................................. 61 Figure 4.19 Core oflogic circu.it ........... ~ ......................................... 62
IX "

.~-

.--

.Figure 4.20 Basic architecture of the comparator. ..... ; ..: ......................... 62 Figure 4.21 Pre-amplifier configuration ............. , .......................·...... 63 . ,Figure 4.22 Track-and-Iatch stage .; ............ : ........... :.... '.~' .................. 64 Figure 4.23. R-S latch of the comparator .. ~ ........................... :'.. :: ....... 65 · Figure 4.24 Generation of positive temperature coefficient ... : ..·............. 66 · Figure 4.25 Core of the band-gap circuit ................ : .. : ................ '....... 68 Figure 4.26 Top-level of the voltage reference block ............'....... ;: ... ~ ... 69 . Figure 4.27 Top-level circuit of the cum;ntreference block' ....'..... : ......... 70 ~ figure 4.28 Aligning delay block for asynchronous divider .; ................. :71 '. Figure 4.29 Aligning delay block for synchronous divider, .............. : ...... 72 · Figure 5~1 Transfer function of the VCO over the whole range .:.~ .. :'......... 75 · Figure 5.2 Brynjolfson and Zilic VCO transfer function .............. :' .... : .... 75, Figure 5.3 Phase-frequency detector simulation :..'..... :'.:.. .:'. :;: .........·: ..... 77 . · Figure 5.4 System level schematic in Simulink ...... ; ....... ,.'........,,,.: .... ;...78 .. : Figure 5.5 loop behavior in Simulink for the dividing factor N=4 .... :... :.... 79 , ' Figure 5.6 Frequency response of the PLL fordividirig factorN=4 .; .. ;...... 80" , , Figure 5.7 Frequency response of the PLL for dividingfactorN=20 ' ......... 81 'Figure 5.8 veo output signal ...,: .............................. : ........:............ 83 Figure 5.9 The output of the charge-pump and the low-pass, filter, :".. :, .. : ... 84 ! ;'.:' Figure 5.10 The output signal ofPLL for IGHz ................................. 85 Figure 5: II The dividers response ..... : ................ :.. ;........... :.... I .. ~ .... 86 Figure 5.12 The jitter of the, system for lOmVrms random supply noise ,.:':; .. 87" Figure 5.13 The phase' difference betweeri input and output, '. . · signals in the ~ock condition ' .. _._ .. ." ............ ::...... _ :-... ~ .............. ~ ."..... .' ............... >.88. '; .. Figure 5.14 Layout of the PLL core ................................ ~ ... " ...... : ... 90
i .'
r

.

,
.1
'

. , .
"
.. ;
;

: "

r

... '

..' - ',..
...'
~

"

.
,
~

,

,''''

..:,.

,..

.
, .'

..-1:

,

,

....

,1

,"-

,.

t

"

'" t

:'.~.

·

.· '
.

.

~

~

.. :

".?
~

t __ ,

~

.

"

.

",

.. -'

·

'ii-.

<.

x

List of Tables .'
Table 3.1 Features ofrnairiworks on wide-range and lor programmable PLLs ...... 22 Table 3.2 Comparison of the features of different methods for VCO with wide-range frequency ...... "... :.................... , ~ ......................... :........25 Table 3.3 Comparison of different delay cells for VCO ..... · ............................ 37 Table 5.1 Main figures in the specification of the designed PLL ....................... 91 . Table 6.1 ¥ain works on wide-range and lor programmable PLLs and the proposed PLL. ............................ , ... ~ .. : ............... ~ ............. 94 .. ,

, ;

.

.:

.
t

.,

"

",

l

!'"

.

..
·

.
·

"-'

.

'~t

·

;

t

"

xi

"

Chapterl , Introduction

Microelectronics advances has led to numerous, 'circuits in a single chip .working at :.high clock ~equency to provide different capabilities, such as computation and communication.' The' demand for high performance .and. low costs in electronic systems dictated the use of on-chip phase locked loops (PLLs) and clock recovery circuits (CRC). 'Advances of integrated -circuit (IC) technologies in terms of speed and complexity made this dream possible. These blocks fmd wide application in areas such as· communication, wireless systems, and digital circuits and disk drive electronics [1]. Research on the topic goes back to as early as 1919 [24]. Vincent [24] and Appelton [25] experimentally researched
and

\

analyzed,

respectively,

the

practical

synchronization of oscillators. After these initial papers, re~arch and development continued up until 1940s. In 1935, Travis published a pap,er entitled "Automatic Frequency Control", [26] which suggested two reasons for controlling ,the local oscillator of a receiver. "Oscillator drift, if not corrected by more or less frequency manual readjustment, is . capable of mistunirig the signal by' many channels in the course of a few hours run"[23, p.l] .· His second reason for oscillator control is more interesting: it seems
U

to be quite true that the average listener does not tune his set well enough to obtain the
,
'

, best' quality it is capable of giving, partly from negligence, and partly fro~ lack of the necessary skill, in which case the mechanical design of the set is a possible contributing factor" [23, p.2]. I

, In, 1939, Vincent' Rideout described a servo-mechanical aut,omatic frequency control, circuit' [27]. 'At this time the DC stabi~ity of amplifiers was poor~ and maintaining a constant control voltage was difficult. About 1953, phase-locked loop designers began studying the nonlinear operation of
\

the circuits. Color television would not have been possible without the advancement, of phase-locked loop technology [23]. ,In the early 1950s, a "good" phase-locked loop would adjust the television's color , within a second. A ','fair" phase-locked loop would adjust the color within 10 seconds. The phase-locked loop in the color, sub-carrier circuit 'was originally to replace a
,
'

phase-control "knob" that the consunierwould adjust manually as a new station was , tuned [23]. By 1959, analog phase-locked loop theory and design was approaching ~turity. The. wider, applicability of the phase-locked loops resulted from the acceptanc~ of the PLL . as a low pass filter for FM inputs and a high-pass filter to the output oscillator.
,

McAk?er [18] wrote that there were three uses for ph3se-:lock~d loop~: 1) in a receiver
;,< .. ,

to increase the power level and attenuate the noise of a weak FM signal, 2) can be
,
)
~.

.

used to reduce the jitter or freq~en~y noiSe of a high-powered oscilla,tor, 3) as a
· ·: " J _.\

narrow band-width filter [23].
J, .,.;',
,., , <

While the concept of phase locking has been in' use for more than half a century,
"

,

monolithic implementation of PLLs and CRCs has become possible only in the iasi
.. . ;
'~

).

.l<':

.

~

·

'twenty-five years, and popular in the last fifteen years [1].' ,

1..1 Applications '
PLLs are used for jitter reduction, skew suppression, frequency synthesis and Clock
, ,

'recovery. In the following, a brief explanation will be provided for each of these functions.
2

1.1.1 Jitter Reduction ,Any variation in the period of a periodic signal is calJed jitter. Signals often ·experience timing jitter as they travel through a communication channel or as they are retrieved from a storage medium. This type of corruption cannot be removed by
·

. ~lification

and clipping even if the signal is binary. A PLL can be used to reduce

'the jitter. Timing jitter is shown in Fig. 1.1 [1] .

.

~--~~---.-~i.I-~===~.+I.~--------~.~1--~----------~.
T

t

Fig. 1.1 Timing jitter..

,1.1.2 Skew Supp'ression .
Skew suppression is a critical problem in high-speed digital systems. Fig. 1.2 shows this p~oblem. In these' circuits a clock, CLKref. enters 'a chip from outside and is bUffered (in several stages) to sharpen its edges in order" to drive the capacitance load with miIrlmal delay. The problem is that ~ on-~hip clock, CL~~, typi~ally'd.rives several nano-farads of capacitive loads, exhibiting significant delay with respect to the'
,

,

·reference clock The resuhing skew reduces the timing budget' for on-chip 3nd inter-, l;

chip operation [1 l. In order to reduce,the skew, CLKref~nd CLKin' could be aligned through a PLL.

3

c

.

I

\

'T
Fig. 1.2 Clock skew in a digital system.

1.1.3 Frequency Synthesis In many systems we need frequency multiplication of periodic signals. For example, sometimes the bandwidth limitation of PC (printed circuits) boards constrains the reference
cloc~

that is

CL~ef

, . while ! the on-chip clock frequency may need to ,be " '
~

much higher. Frequency multiplication can be implemented by PLLs [1]. 1.1.4 Clock Recovery ,
It is a common practice in communication systems to embed clock informa~ion into

the· transmitted data signal to make data, transfer more efficient and economical. .
.,

" " .

~.

"

.~}

"::

-.

'-~,

;,

Therefore, at the receiver end there must be ,a

~eans

for recovering the, timing

'information and synchronizing the data with theinco~g data. Most ,clock r~covery circuits employ phase loc~ing [1].
"

In additioi~" increased integration and cloc~ rates in 8.ystems-o?--a-chip (SOC) create a,
"

demand for special management of clock distnoution networks, primarily based on-,
· .' · " · : : : Y' , ·

f -

:',

~

4'

·

·

~

"'~.-:;,

,

""~'

phase-locked, loops., , With, the" additi.on
. ' . , ,,'-'
. . . ' ., · '. ~.
,,~: · ~.'

~

of clock
·. - " ':f
<,
~

,~

dividers
'. ~ ·. ) -:

._ . . s·' - /.

and in-circuit
· ,:'

. ~,

-

programmability, clock, manag~rs ,are ,capable of performing funct~ons beyond simple
· .' .:' . .';.

,

clock skew reduction or static clock multiplication. In' matty Cases, managers for_ cl?ck distributi?n net~ork:s are capable of adjusting phase rlnd duty cycle, synchronizing s~veral components in ~ system, reducing skew

.'

4

and synthesizing Variable frequencies. These qualities are favorable when several .' independent .elements .are integrated into a sYstem-on-a-chip. .An SOC can incorporate a microprocessor, a system bus, compact flash interface, a universal serial bus host controller. serial data ports. and digital to analog converters. Each element operates independently, thus creating a demand for a wide range of clock rates. With the advancement of multi-speed' microprocessors and higher operating frequencies. this operating range expands [8].
. .

.

.'

Also, programmability offers a dimension to clock managers that expands its .applications to areas such as power nianagement. By ~ing clock' frequency a function of the demand on the system, the direct relationship between power and
'"
~

,

,

.

'

frequency can be exploited to reduce the power consumption [8]. As PLL ~l'continue to be one of the main 'blocks of many chips; the pulpose of this study is to build a general-purpose wide-range (for order often, that is lOOMHz to 1GHz) pr~Srammable PLL' which can be used in both analog and digital chips. It benefits . from a voltage-controlled oscillator (VCO)' with a lo~ 'gain and linear!
t .
~

,

.

. operation. The architecture ,is power efficient and suitable for low power design. It is robust against te~rature c~es and has good noise rejection.
."
,

:

Mabr outstanding PLLs have

been designed to date.

Someof~em: have used GaAs' .

is' . . ~w dominant'~ de~'ignof~ovel·hlgh~fr~u~ncyPLLs. CMOSteChn~logyha~'the'
8dvuntages of low .coSt, low power ~DSumption, and th~ ability to integrat~ digit'll
!

and.' bipOIaItransist~r (BJT)"t~c~~logies~ However, s~~~cr~n CMOS techIlology

and- artalog circuits together on the same chip. For an these reasonS CMOS technOlogy' . .
has been used for ~ design.
....
,
"

'..,

: ..

~.,

~''''~,

~ ~

. f

"

"

·

,

.' .

5

.

.

1.2, Main Features Achieved in the Designed PLL · One of the main issues in PLL design is noise, which comes from many
,
,

different sources. They could be thermal and flicker noises of the devices or the' noise' induced through supply and ground of the system. Some of them, such as
\
"

thermal and flicker noises are inevitable, however normally they are not dominant~ The dominant one is the supply noise, which could be severe in aPLL becauSe of, the mixed mode nature of the design (i.e~ both digital and analog blocks are used in this system). Some of the blocks that work with switching logic 'could induce switching noise on the supply. As the differential architecture. has' common-mode nois~ rejection feature, ..
different~l

architecture has been used for all sub-blocks of the PLL. Also,by

separating the supply of the sensitive blocks from the supply of the switching :', . blocks, attempt is done to minimize the effect of supply noise on sensitive blocks. ' In addition, in the method used for programmability, the requiTed wide frequency range (that is order of 'ten) is partitioned into several smaller ranges so that, as it will be shown 'later, the system is less prone to noise and also it is,appropriate for
low~power design.

·

The high-performance of the proposed PLL is because of a new archite~tur~ proposed for one of its main block; that is VCO (voltage controlled oscillator). As it will be shown later, the proposed architecture uses filst switching in order to ,. reduce noise. Also~ it has low gain, which helps better noise rejection. The transfer . function is lhiear, and robust . against temperature changes and guarantIes the

, stability of the system. · ; Also, the. reliable performance' of proposed PLL is due to a method, ~ (or. &ing the conunon-mode problem of ano~r sub-block of the PLL: charge.-p~p. ;

6

'

With this' featUre, when' the ,system is locked; there wOn't be any undesired deviation of this condition. · ,In the method used for programmability an extra feature is added to the system: in smaller partitioned ranges twenty percent overlap has been considered between, two successive ranges in order to make the system even more robust agairist temperature change. · ,The design is suitable for system level programmability. This is achieved with, a

veo capable of shifting operating ranges by automatically changing the dri~g

capability. This adds a coarse control feature to the V~O architecture, which has , also the fine control feature of a conventional veo. · The method used for progiammability is power efficient and all sub-blocks are ' suitable for low power design. · The method is also expandabl~ and the range could be even wider. Also the range could be shifted ~o the upper part of the frequency range or the lower part of , the frequency range with changing the driving capabilities
"

'

· . The proposed PLLproduces a rail-to-~ail clock' output, whlch makes it
.
\--'

appropriate as a general-purpOse PLL that could be used iIi all applications. Also, . six clocks with different phases are brought clock recovery circuits.
~
"
': "1;'; ,

as outputs in order to be used in data~'
.. "" ~
,

· 'As our goal is to build a PLL that could be, accoinpanied with both digital and
, ,

, : aiiaiog

proCess technologies,' all capacitors required are-built With transistors and,

no MIM (metal-insulation-metal) capacitor is used hithis design. ;', :',
· As a

general-p~ose PLL, buffers are c6ttSidered at the output to sharpen the

PLt outptits~' In this' case PLL could dtive higher output capacitive load, and can .. be,used for skew reduction.,
J ,

7

ii

·

The proposed PLL

IS' a

pro~ble wide-~ange PLL that can be provided

lOO-MHz to I-GHz rail-to-rail digital clock signal' from a

50-MHZ reference

clock. The architecture is appropriate for low-power design and it is also power
\ ,

efficient. The system is robust against temperature changes so that the stability of . -. . . the system is guaranteed. Because of the differential configuration of the sub.

.

blocks and using a voltage- controlled oscillator with a low gain and linear transfer function the system has a good noise rejection.
1.3 Outline of the Thesis
. '

.

In' the Chapter 2 the basic concepts of the PLL will be discussed, linear models are . . .. introduced. for basic PLL and C~ge~pump PLL and the advantage~ of charge-pump PLL are described. Also, the closed -loop transfer function of the basicPLL'~d the charge-pump PLL will be covered in Chapter 2.
. . Chapter 3 is a literature review oli PLL design. This chapter shows advantages of the
.~

",

"

,

previous works and improvements achieved in the proposed design. In Chapter 4 the top level design of the system is the circuit . introduced. Next, . . design' of sub--blocks is introduced at transistor

.leve~ and discussed in-detail. After getting
~~

familiar with the whole blocks, the transfer function of the proposed PLL is' derived.
/

,

Chapter 5 is dedicated to the simulation results and the procedures used for calculating the required results. Layout challenges and sizes of different blocks iIi the- "
,

,,'

,...

layout are also discussed. Finally, Chapter 6deals with conclusions and suggestions for the future works."
,
'

'. '

..

.

8

. Chapter 2 Basic Concepts of PLL

2.1 Introduction

A phaSe-locked loop (PLL) is basically an oscillator whose frequency is locked onto some frequency component of an input signal. It is a feedback system that operates on : . the excess phase of nominally periodic signals. The basic architecture of a PLL is shown in Fig. 2.1 [1]. It consists of a phase detector (PD), a low-pass filter (LPF), and a voltage-controlled oscillator (YCO). Phase detector is a circuit that shows th~ phase difference . between two input signals and produces a . voltage based on this phase .
,

difference;. i.e. the output ofPD is linearly proportional to the phase difference. The low-pass filter smoothes the output pulses of the phase detector and the resulting DC coinponent is the input for voltage7controlled oscillator. Finally, VCO is an osCillator whose output frequency is a function of a control input, usually a voltage.

x~
Fig. 2.1 Basic architecture ofPLL.
. 2.2 System Operation ,
.

Phase detector (PD) has an output voltage with an average value proportional to the
. ' , r , .. , , :
'\'
I

.

.' .

. .

phase difference between the input signal and the output of the VCO. The low~pass
~
" .

~.

::'

· ;

·

~

_

-(

~

,i

;...;.

...

1

. filter removes high-frequency components in the PD output and is used to extract the
av.er~e value from the output of the PD. This average vaiue is used to drive the VCO.
"

9 :

The negative feedback of the loop' results synchronized with the input signaL It should be mentioned ihatPLL is a dytia~ic

In

the

o~tput

of the veo being,

system,i.e.~ its response dep~nds on the ,

past ' values of the input and output. 'Therefore, an understanding of the loop dynamics
'l';

IS

necessary.

2.3 Terms and Definitions
,It is timely to give a brief description of some of the terms which are vastly used

hereafter in this work in order to clarify the concepts.

'\

l

.:.

<

Phase Locking: The task of aligning the output phase ofVeO withthe phase of the reference input., When the loop is locked, CPout - CPal (that is the difference between output and input' phases) does not change with time. Therefore, dcpootldt -dcpnJdt is equalto zero which means roin - roout = O. ' " Jitter: Any random variation in the period of a periodic signal. Acquisition Time: The amount of time a PLL takes to converge with a certain"phase error of the input signal. Acquisition Range: The frequency range that PLL can acqu:ire lo~k; 2.4 Loop Dynamics Transient response of a phase-locked loop is nonlinear and cannot be easily
~

,
-1

,

,

formulated. However, a linear approximation can be used for gaining an intuition and
"

..

~;,

.

understanding trade-offs in PLL design.
,
'

We can introduce the veo characteristic aS,a linear function of the veo frequency,

roo, with 'respect to the control voltag~, v~t. The lin~ar model is ·

Kvco is the veo gain, roo and

0)1

are output and input frequency respectively. I~

simple examples, Kvco has a weli-defined value because the veo characteristic has
10'

been linear. In practice, this is only an approximation at best. There is obviously a . ,tradeoff between range and linearity' [19]. By considering the last equation, the excess phase is C?ou.{t) = Kvco /vcont dt: So, the transfer function of the linear model of the VCO will be: C?ou.{s)/vcon.{s) = Kvcofs. The linear model for PD is Vcont = (000 - friJ)/Kvco = KpD.ge· where KrD is the PD gain and ge is the phase error of the. VCO output relative to the input signal. As Vcom is inversely proportional to Kvco in order to min~ the phase error, KroKvco should be ~d. Also, note that the phase error is 'a function of outpUt frequency [2]. Fig. 2.2 [2] shows a linear.model of the PLL with the transfer function C?f each block. The goal is to derive the overall transfer function for the phase, tPout (s) I tPin (s). The PD is represented by' a subtractor ,:whose output is amplified by K pD · The low-pass
"

..

Vin varies

r~pidly,

Vout ~~ot fully, track the inp~t variations. Note that~;F denotes

the 3-48 bandwidth. Therefore, the open-loop transfer function of the PLL is

.~.:.!

,..' ,(

(2.1)

,

"

"1

' r ....

11

veo
+ ... - I
in

I

,+,/
.~

I

-

V'

~

.
j

1/(I1h(sltoLPF» I ... ..
I I

..

Kvcds

-

---I

I

Fig. 2.2 Linear model of basic PLL. Equation (2.1) shows that the system is of second order, with one pole contributed by the veo and another by the LPF. loop transfer as . The closed . - function .. can be written . ,
'

(2.2)
The frequency of a waveform is the tune'derivative of the phase: OJ"= dt; I dt · SiIlce

th~' frequenCy and the pha~ are related by ~-line~ operator, the above transfer
. function also applies to the input and output frequencies,
'

OJout (s)1 OJjn(s) = (KpD.KVOO)/(s I OJUF, + s + KpD.KVCO )·
The familiar form of the .second order sYstem in control theory is .
>. "

.

' -

'2

",.

.

(2.3)

It: the transfer function is coinpared with this familiar form used in control theory, ~, . the "daniping ratio" and OJn , the natural frequency, are' ,. ,

(2.4) '".

..

12

(2.5) The two poles of the system are

Thus, if

~

>1, both poles are real. The system is over-damped and the transient

"response contains two exponentials with time constants lISI and lIS~. On the other

hand, if ~<1~ the poles are complex and the response to a unit step input roin= /).00 u(t)

is equal to: '

([}out:(~) ={1":'e'-'ID.'[cOs(COn~1-q2t) + (q I~1_q2 )sm(co1f~I-q2t)]}/).lVU(h,
([}()fIt(t) '= [1-(1/ ~1_q2 )e-{lD,,1 sin«([}n~1-q2t + 8)]/).mu(t) ,

,

where

COout

denotes the change in the output frequency ~d 8
,
'

=sin -1 ~1_q2 . Thus,

the step response contains' a sinusoidal component that decays with it time constant
.
' "

(~
,

roJ-1, which determines the settling speed ofPLL. The system exhibits the same

response ifa phase step is applied to the input and the output phase is observed.
t · · '\" '"

The settling speed ofPLL is important and should be maximized.
.

.

,

"

This result reveals a critical trade':offbetween the settling speed and the ripple on the

veo

control line: when we decrease COUF in ord~r to have bett~ suppression of the

high..ftequency 'corllponents produced by the PD, the settling time conStant (whl,?h determines the acquisition time) will ~ longer~_, The value of ~ is also important. For a stable second-order system ~ should be greater .
· · A,'
.~

~

,than,p.. 5, preferably Jil2 or even 1 to avoid excessive ringing. With these limitations we will have more trade-offs. Eq. (2.5) ,shows that ~ ([}UF is reduced tt? 13

minimize the' ripple of the control voltage, the stability degrades. Also, as mentioned, .
,
,

,

'

earlier phase error . is inversely proportional to KVcol{pD. Since

~ is inversely'

proportionru to KvcoKPD, lowering the phase error makes the system less stable~ Moreover, this tyPe of the :[>LL has another' drawback, namely a limited acquisition
..

.

range. The acquisition range is on the order of(t)LPF; that is" the loop locks only if the , difference ',between
,

min

and

OOout

is less than roughly (t) LPF " So if
.

m LPF is red~ced in
'

order to suppress the ripple on the control voltage, the acquisition range will be decreased 12]. These problems encourage designers to Use phase-frequency detector, accompanied with a charge-pump PLL. 2.5 Phase-Frequency Detector and Charge-Pump PLL For resolving acquisition problem, in new designs ofPLLs designers uSe a phasefrequency detector (PFD): ',a circuit that can ,detect, both frequency. an~ phase differences. Three-state PFD, with one realization suggested by Shahriary et. al. [18] is, widely used by designers~ because it is simple and has a linear range of ±2xradians. The conceptual operation of this PFD is shown in Fig. 2.3. The circuit creates three
,

<

<

,
'

states and responds to the rising (or falling); edges of the . two inputs. If initially ,
,

QA=QB=O, then a rising transition onA leads tOQA =1 and QB remains zero. This
{
~

,

-.

.

'

state, will remain until the rising edge of B appears. At this point both QA' and Qa return to 'l£,ro.

~

...
f ..

:'

·
B .... ...

..
..
PFD -

.. ,...,
... QB
r"

B
I .

--

~--~

I_ _ _ _~~------

Fig. 2.3 Conceptual operation ofPFD.. Fig. 2.4 ~hows a baSic implement~tion for PFD. The inputs, A and B, are the c1oc~ of the Flip-Flops. If QA = QB =0 and A goes high, QA rises. This state is remained until . the rising transition on B appears. At this moment Qs goes high and the AND gate resets both Flip-Flops. .,

D A

CK

Q

QA
.,
qJ.

t::

;

. '.

Reset

B

CK
D

Q I----:Q::::--e
B

Fig. 2.4 Basic implementation ofPFD.

15

h

For using the PFD in a phase-locked loop, normally a ~'charge':'pump", is inserted . between. the PFD and the loop filter. Charge-pump consists of two switched current sources which source or sink charge into or out of the loop filter according to the.two . outputs of the PFD. Fig.2.S shows a charge-pump which is driven by a PFD and drives a capacitor. If '

QA =Qa =0, then the switches are off and the output remains constant. If QA is high
'and Qa is low, II charges Cp and the output will increase. If QA is low and Q8 is high, then 12 discharges C p and the output will decrease.
VDD

I----4D

A __--t CK

Q
. '

Reset

CPT
} !

~~~~:L....C__:___ Q:--=Q-B---... -Icp::. Fig. 2.5 PFD with charge-p1llIip.

.· ,

This circuit has an interesting property. For example, if A leads B by a finite amount, then Q.i produces pulses indefinitely, allowing. the charge pump to ~jectIl
..
~
: w

~~:.

L

,>

into Cp and forcing . VOIIt to rise· steadily. 'In other words, for a finite input error the . ' . output event':"llly goes to + <X> or <x>.

It means the gain of the circuit is infmity.

16

Fig. 2.6 shows a basic charge-pump PLL. When the loop is activated,(J)oul may be far
.'

.

:from(J)tn.

The' PFD, and the charge-pump change the control voltage' such that
.
'

. (J)out

approaches(J)/n' When the input and the output frequencies are sufficiently close,

the PFD acts, as

aphase detector. The loop locks when the phase error is zero and in

',this case the charge pump doesn't work any more. 'As 'observed here, the gain of the PFD/CP combination is infmite. On the other hand : '. when the loop is locked Vout is finite, and th~ input phase error should be zero. This'is in contrast to baSic PLLin which the p~e error is a function of the output frequency~

VDD

I----tD

A_--I CK

Q

Reset

....
VCO'

Vout

,

.
- f
L

.'

,"

-.

'-

Filt"2.(j Basic charge pump PLL

17

.'

2.6 Dynamics of the Charge-Pump PLL For deriving the dynamics of charge-pump PLL a linear for . model should be derived .
,
'~

the PFD, the charge pump. and the low.' pass,<filter~ In fact, the combination of

PFDICPILPF, is not a linear system. Actually, the output of this combination is .
" . .1
"

discrete because' while the QA = QB = 0, the output isc~nstant and increases o~ decrease if there is any phase difference. However, '~e output waveforln is

Ilt/J . In a sense, our approximated by a ramp, a . linear. relationship between Vout and . ' .
""

\

,discrete,:"time system is approximated by a continuous-time model.
, , '4

For deriving the transfer function of this combination, a phase difference impulse, Js .
~

,

applied and Vout is calculated. As a p~-difference i1npu1se is difficult to visualize, a· phase difference step is applied, Vout is obtained and the result is differentiated with respect to time. Fig. 2.7 showsa step response ofPFD/CPILPF combination.

VOIl.t-_..J/ .

t
:.. '" · __
~, ~..

.
.'

.;

Fig. 2.7 Step response ofPFD/CPILPF combination [2].
,_ " '.
~ ~

"

,".

.·

,r

~

,

QA continues . ~. produce pulses

that"

~~ t/JoTIn 127r seconds wi~e, r~ing the o~~.

voltage· by (l pICp)(t/Jo.T1n 127r) in every period. Approximated by a' ramp~, Vour exhibits a slope of (lpICp )(t/Jo 127r) and can be expressed as
". f

..

i

18,

'

VOid (I) = (/p 1(21t.Cp »J.IAu(/) .

The impulse response is therefore given by , ,
h(/) = (/p I 21t.Cp)U(/).

Therefore, the transf~r functi~n will be

-

Now we construct a fulear model of charge-pump PLL. This linear model is shown in ,the Fig. 2.8. The open-loop transfer function of the model is
~ou.(s)/~in(s)lopen
,

= (IpI(21tCp»(Kvcols ).

.

2

-

This loop 'gain has two poles at the origin. The closed-loop transfer functio~ R(s) is

PFD/CPILPF
«Din

~,

VCO

....

+ ..

".

+
H.

(IpI(21tCp»(l/s)
',.

I
J

,

Kvcds
;

-

.
'

;

..

.

~~T"~

-

. Fig.2.S Linear model of basic charge-pump PLL. This result shows the system is not stable because the Closed-loop system contains, . . . .
'

two imaginary poles.. In order to stabilize the system, the transfer function should be modified.' That is, a zero sh~uld be add~d in the l~~p gain to keep the p~e margin in the saIe nmge' for stability~ This will be'~eauzed by adding a resistor in series with the ,.',

loop filter capacitor (Fig. 2.9). It can be shown [2] that the PFD/CPILPF,transfer.: function is
VO~,(s)1 A¢(s)
,
~:

.

=(Ip I 21f)(R p + (l/(C p.s»).
19

The PLL open-loop transfer function is

and

.'

;

If this transfer function is compared with the familiar form of second order system, transfer function shown in Eq. (2.3)~ the natwal frequency and the damping factor are respectively
Wn

=~(Ip.Kvco)/(21r.Cp) ~

~ = (Rp 12)~(lp.Cp.KJlCo)/21r ·
This architecture has - a drawback: since the charge-pump drives a capacitor and a '
resistor in series, each time a current is injected into the loop filter the con~lvo~~ge ' ' experiences a large jump [2]. This may produce a ripple in con~lling voltage. To fix, this problem, a second capacitor is usually, added in parallel with - R~ and Cp . : to '. -".
'

~:.

_,

..

suppress the initial step. Fig.. 2.9 shows this modified configuration. Now the loop ftlter is of second order. However, in order to keep the transfer function unchange~" .
"'"
,.
~.

the capacitance ofth~ second capacitor is about one-ft1;lh to one,-tenth of Cp ·

"

20

VOD

I-----iD.

A

-----I

CK'

.Q
. V out
VCO

. Reset

CK

Q

QB

D

Fig. '2.9 The ch8rge-pump PLL architecture used a resistor in se~ies with Cp and the second capacitor.

'(
\

By ~mpaiing the l~op dynamics of basic p'LLs (sectio~ 2.4) and charge:"pump PLLs,
it is clear that interrelated attributes such as noise suppression, acquisition time, phase
error' and stability,' as well as limited acquisition range are disadvantages of the basic PLL over the chaige-pump PLL and thisjustifies'ourchoice of charge-pump type for. the proposed PLL. . .'

,

z ··

,

I

Chapter 3 Literature Review
3.0 A Sum~ary of Previous Works
The result of an investigation in the recent works on wide-range and/or programmable PLL has been summarized in the Table 3.1 and shows the various features of the major works.

Author

Programming
style

On..chip Program mability
No

VCO Frequency range S4M-IO

veo
VCOgain 430MIV

transfer function Linear ,but " variable nonlinear Linear and constant noolinear

Power dissipation

Supply V

Process

Rbee[S]
(VCO

only)
Sutob[lO

Programming loading capacitors Programming NO. of inverter stages Using circuitry Programming

worst case(Diagr am)

3.5mW,1 (VCO 2.5 only) 13.7mW

0.35

]

yes

SM-400M

2

. 0.25

0.14

Suog[4]

Yes

75M·lO

430MIV

92mW

3.3

0.6

1.05

Cheo[20]

driving

No

103M·

capabilities
Brynjolfs

1.020
1.5M-I.80 ,. '
;: 150M·' 740M

271MIV;

4.S2mW
~

'1.8'

0.351

0.16

0.00[8]
Joe-shio

Programming nwnberof inverters' Using circuitry

yes

. . Linear, . 8.9mw MlVc!'~st but . @330M ,".,,, diagrarO ) , variable .
. 370

.

1.8

0.18

Lee [9]

yes

.~460MN
(diagram)

linear ,

53mW

2.5
..

0.25

Table 3.1 Features of main works on wide-range and lor programmable PLLs.
~

.:.'

,
·".t,;r· . . -,-,' :, ...

22

t,~.

3.1 Different Methods for Getting Wider Range .. ' Looking at' the 'system-level desigIl; the ftrst major question is h()w to reach a wide range PLL. Normally, in getting a wide-range frequency output in the PLL the bottleneck is yeo. Therefore, the main block to be considered" isVeO (voltage ,controlled oscillator). Ring oscillators are the most popular architecture

,:used

for wide-range andlor
'

'<,'

programmable PLL's [1,5,6]. However, as observed later, the range of frequency that , a ring oscillator could cover is at most of order of two to three. This range is hardly , enough fortemperature and process change coverage. So, the ftrst issue in the systemlevel design is how to increase the frequency range of the veo."

,

.

'

: Researchers have tried to increase the frequency range of an oscillator by increasing , , ·the linearity of the veo tr~fer function [4,9], programming the driving capabilities·

.

,I

. f

-

.

",

. " : ,

: '

,.,)( :

: [3], progranucing l~ading capacitors' in
,

it.

relaxation oscillator [5], or num~r .of
,
'

!

",'t

, inverter stages for changing the delays [8, 10].
i

Sung et. al.
:
".

[4j~d Joe Shin Lee et. al. [9] tri~d t~ reach to a wide-range PLL: They.
'
,

,

,

~

" ' tried to make the transfer, function of the veo linear and getting wider frequency
, ,....'. -f ' .. ....,. -~~ -'" - ,- t
,~. ~ ...-...
,,--

~

--

~

,.

: range by 'adding some circuitry. However, since the wide-ra:nge frequency should be;
. . ! ' . . ·

:,' " "
~
< ,

achieved
1 '

within a' voltage
...., , ' '0' " . , ",

range
~

t~t
,

supply voltage permits (Le.
_ ~' ' 4 ;

maxim~ s~g'
.
) . . . , , ' ..... "'. .,'

"""'-

1

~tween gr~und
"

and supply),

the',r~~lting
',".,
, ·

veo
,,::: . .- .

g~' :i~
..... . - , '

hlgh'andthei,,'system is l
.:: :'

\ !q.:'~
" ", ,

'~"-"

,

:

.... h

..... _ " " "

.. , ,

. susceptible, to noise and hence the jitter performance is not 'good. Also, the design is. ~ .'~ 1": ; :;".. 1 " ""' , :. ','. not appropriate for low supply voltage.,
· , . · t ., · ·
r," :

Rhee [5] tried to reach to a wide range veo by programming floating capacitor iIi a
'. · ;t ': ·

j..:

" '",'

-/

~...

~ <," l i .

7 ' : .'",

~

-t

<.

'4-'"

relaxation yeo. He'reached a linet:U' transfer function for yeo. However, this d~sign ".- , also suffers from high veo gain problem and it is susceptible to noise leading to a

23

worse jitter perfonriance. Also, .in this method a good area occupied by the capacitors. ..

of the chip

will be .

Although these two methods could increase the output frequency range of the V~O and achieve linear transfer function for the veo, the gain of the VeOshouldbe large.. Large veo gain makes the veo sensitive to noise, therefore the jitter performance . will not be acceptable. . In the designs' proposed, by Sutoh et. al. [6] and. Brynjolfson et. ·al [8], the' programmable wide.frequency range of the veo is achieved by changing the number of inverters.· Therefore, the total delay of. all inverter stages, which determines the output frequency ,of the veo, inverter stages utilized,

will change.

In this case, the larger the number of,
frequ~ncy

j ··

implies_th~

smaller output

ofVeO. Therefore,

more hardware is required for .wider range. ' Brinjolfson et al [8] have suggested a logic circuit for on-chip progrannimbility and they tried to use the

fuiear part ofthe veo transfer function. However, their diagra'm

shows that the veo gain is no~ constant for different ranges. In other words, for high freq':1e:r:cies, w~en one in~ert~~ or two inverters ,ar.e used,. the gain ~"high (about \ .370MlV) .and there is ~ problem for achieving the required ov~lapping while for th~" .
, : ... ". i< f

lower ranges the veo gain is low and there is too muc~ overlapping., " Oscal et

~

':.

-'

.

~l.

[20] also have tried to ~'1de ~the ~~~e -~quency ~ge into ~y sma~l
' . , " "

'.~_~,
~ J ~

.

portions that ,are individuaJly controlled by the control voltages.,.The

pro~sed":';''','

: approach uses many parallel inverter chains that can ~ viewed as programming the . ~'.~

drivfu~ '~~;abilities
: ;_."

of

m:~erter chains. In this ~, a fairly low hardware cotilplexity',~
, ' .. 'w_

"_
..

_~,'

r

_

l

'

'

'

··~

: .

· , .. '~'

; is ne~:d. ~n, p~cul~, t~e .~~er consumpt~on_c~ be ,r~~ced when veo operates at . '.

a low. oscillation frequency. The proposed range-programmable yeo can ~ applied . .
II< _ , " ' ·

>'

~

-,

~.

·

,,' ,

'.

~

... c

·

· ~ ·

·

·

:-

,,:;. ~ '"" . . ""

. in low supply voltage applicatio~s with a power efficient operation.
24
1"

.".

:

'

-

However, in, this paper there was. no emphasis on linearity ofVCO transfer function. . ,Also, no logic has been considered for on-chip programmability. Therefore, the problems of on-chip programming of partitioning the wide range into smaller ranges have not been investigated. One of the problems is the temperature change effect. If 't\le temperature changes the frequency of the 'system will also change. So, if the

.

,

.

system works· in upper' or lower part of a particular range (determined with the

Dumber· of chains), the system may leave that particular range due ~o temperature change and come back to that range again and this may happen frequently. So, the 'system is no' longer stable. Overlapping of different, ranges

may ftx the problem;
,

however,for proper operation of the PLL, the veo should .withstand temperature" changes..
, ,

,

,

These problems had to be in mind while designing a new PLL. Table 3.2 summarizes the comparison between with wide range frequency.

.

,

differen~

methods for getting veo
-,, ,

:'

Method'

Using circuitry , For making the veo transfer function linear and getting wider range' high
"

Programming, loading capacitor -,

Programming the number of inverter stages
,<"

.'-,>,

progianuillIlg' " driving , capabilities

VCOgain , Suitable for low supply voltage Area Power dissipation
,

variable

variable

"

,

low .. 'yes,

.
"

'

.
no large ,large .' yes large medium - ..

. yes medium

..

.

..

.

medium

,

-

4

. medium - ..
"

."

SmaIVmedium ,
"

Table '3.2 Comp~ison

ofthe f~atures of different methods for veo with wide-range
," frequency. " 25

3.2 DilJerent Architectures for Delay Cell VCO has the main role in jitter performance of the PLL and 'is the most power
, '

,

consuming circuit. Therefore, from the' circuit design point of view, the most criti~' block in' a PLL is the voltage-controlled oscillator (VCO). The following parameters
I'

are important in investigating VCO blocks performance:

1. Tuning range, that is the range between the, minimum and maximum values of
the VCO frequencies. Taking into account frequency changes due to process, temperature and supply variation, frequency range.
'.
'.

this range should cover the required,

2. Output amplitude over the range, which should not have large variatioll; 3. Supply and substrate noise rejection should be kept at acceptable levels. Since these blocks are normally built along with other digital circuit and share the same substrate, noise is always an important issue. 4. VCO gain variation, which is undesirable across the tuning range. 5. Power dissipation is also very important because VCO is most current starving block in the PLL. In thiS survey the most common architectures were cot;t.sidered and the performance of
,

.

each architecture was investigated by simulation. Finally, the performances of the simulated architectures are compared. As mentioned before, ring-oscillator - type VCO~' ar~ widely ~ed in PLLs, t>ecause .-they occupy a sma.ll chip area and could produce high-frequency sig~ls with Iafge' amplitude scltable for digital sy~ems. I~'the 'ring oscillator ~chltecture a chain ofN ' delay 3.1).

c~il~: with a total phase shift of 180 dew.ees, ;~ placed ina feedback loop (Fig. :, .~
ry

~e

simplest d;ia~ cell 'is ~'in~e~er block.
.
~

' .
· · ',.

& 'each inverter h~ approxnnatelY
'

90 degrees phase shift at its 'unity-gain frequency, if there ar~ at least three inverters in
26 ','

t

·

f~

the loop, it .is guaranteed that the loop gain will still be greater than unity when the : ",phase shift around the loop becomes greater than 180 degree~. Therefore, the circuit is . unstable and will oscillate. In each half period, the signal will propagate around the loop with an inversion. So if the delay of each inverter is shown with ,have n inverters, we can write [3]: TI2 = nTin"., Therefore, we have
Tinv '

and we

'where T is the period and

lose is frequency of oscillation.

11.------[>_, ~_[>_>-------I. _[?:]-----I,.,.'
, Fig. 3.1 Ring oscillator with least number of delay cells
Therefore, by changing the delay of the delay cell we can change the frequency of the oscillator. The delay could be controlled in two different ways: external ~d internal techniques

(

3.2.1 Architectures with the External Control
In the external control type, the control is done outside the delay cell. Therefore the delay cell could, be a simpie inverter and the control of' the oscillator can be ,implemented by varying the capacitance or the resistance seen at the output node. ,
'f

In capacitance tuning method, shown in Fig. 3.2a, a voltage-dependent capacitor (e.g.
-

, a reverse-biased p-n junction diode) loads the output node and its capacitance is adjusted by Vcont. The drawback. 'of this circuit is that the minimum value ofth~'
,
~,

'

·

~

'!

,

.

'

capacit~r ~~ load,S the circuit, limiting the maximum frequency of operation.
· · _"I ,~>_

.
~

27

Another circuit used for capacitance tuning is shown in Fig. 3.2b. In this circuit the . capacitor is constant, but aMOS device operates as a voltage-dependent resistor
. .

and

. thereby changes the effective capacitance seen at the output node.

V

out

'

Vin

V out

v~

I
(a) (b)

Fig. 3.2 Configurations with capacitance ~g load. The second configuration was simulated. The schematic of the cn:cuit is shown in Fig.
3.3.~ This delay, cell is, very fast and the output swing is rail to !ail. However, as the .

transistor. can't be kept in . the triode region for a wi~e range, we don't have a linear resistor for a wide· tuning range and the tuning range will be limited. Also, since the
1: -. ...

inverter is not immuniz~d against supply voltage no~e, some designers haye tried to fIx this problem by adding a regulator [17, 11,12].liJut, since the regulator limits the
,~!

headroom, this modffication could not be a good choice when the supply voltage is _" . low. This architecture is fast and has a rail to rail output swing, but the tuning range is limited and it has supply noise issue.
.'

.

28

VDD,
33'h6m'

VIN.
,

.

---A 1 Vf194 , I ,
i,

N°>oz._.
"vss
! .',

HINV2XA
"
'.J

3~'nor-y-, !
_ '

"

I ' .';:)

Iv·,',s,,,-,

V.'p, "

"l

!

II

I~,'L

. ').,

· ' , I_
I

vou:

~--..-:--!i

! I.~.
~,

i '-

·
i

I

·! v 0'16 ' )

"1'

~'""1D' '\..r.,., .

'

'ISS!
, Fig. 3.3 External controL

·

i i,

..

I \

3.2.2 Architectures with Internal Control
In this type of control, the control of the frequency takes p1ace inside the delay cell." Although the architectures used with this type of control could be both single-ended and differential,' as the diffe~entia1 architectw:.e'is immunized against supply noise we '
,

"

'

'

only discuss the differential configurations here. Consider the differential pair shown

in Fig. 3.4.

"

~

"

I ,
IL~

J

'

33norr,., ~",j''''' U~Lf" fjU 'r-' I=lt..i
'It '.

..
.
.

VTN ... -..----...,---------..,jj

"

· !
i

m"'4~';

,

.

:; vss.'

'I

Fig. 3.4 'Differential configuration with internal control . As it is ,shown in the circuit, the control in the delay cell (VTN) could be applied to
-.

~

,"

'~~~«.

-'~.'

~

"'."""/'

;.

~

~~.,~"~

·

"":

"

the load, or to the current So, we.can categorize this type of control to load control ,'"
,,~.

,

~"

'.

.

arid current control.

"

30

.' 3.2.2.1 Load Control, In this category two architectures will be discussed: resistive load and symmetric load.

3.2.2.1.1 Resistive Load The basic architecture of this type of control is a tunable resistive load. This resistor

Can be implemented by a transistor in the triode region so that its resistance is
controlled by changing the bias voltage. As shown iii Fig. 3.4, when'Vcont becom~s more positive the resistance of the load transistors increases thus the time constant at the output increases and the
c

lose

will decrease.

If we can keep the resistor of the resistive load linear in a reasonable range, these linear resistor loads are desirable for dynamic supply noise rejection. As they provide differential-mode resistanCe that, is independent of common-mode voltage carrying the supply nOIse, the delay of buffer is not affected by this commoll-mode noise. However, with MOS tninsistors these devices cannot maintain linearity while. , generating a broad :freq~ency range [13]. In other words, the transistors cannot be kept , in the triode region for a wide range. The oth~r problem is that the output voltage level is small and varies with the control voltage. Therefore the output should be amplified and converted for the full-swing output in order to be able to drive the next
, stage [14].
"
.~.
/.

(

3.2.2.1.2 Symmetric Load Maneatis: aDd Horowitz [13] tried'to fix the problem o,f range limii~tio~ in the resistive' load· architecture'
~chitecture

'"

by: devising a s~etric load. A 'half 'circuit' of a block of their ,:
.J ,.,
'''0'
!._

is shown in Fig. 3.5.

l

31

J

'Os.

I'

Vc>VCOqt Vth, , M4 rsin triodeondM22 'is off Vc<Vcont+Vth, M4 is!r,. soturation and M22 is on.
fig;3.5 Symmetric load idea [13]. : :
In this architecture a . diode-connected transistor will be connected in series with the resistive load. These transistors operate as follows: when Vc > V cont +Vth tr~istor Mt operates in triode region and transistor M22 is off. When Vc < Vcont+ Vth transistor Mt operates in saturation region and transistor voltage is shown in Fig. 3.6.
Ml2

is on. The resulting current versus "

32. '

(
Fig. 3.6 Current of the symmetric load architecture.

As it can be seen in Fig. 3.6, the resulting resistor will be symmetric around the:
common mode. As the cUrrent in the two legs of Fig. 3.7 are symmetric and the load [ .- , shows symmetric resistance around the' common mode, the resistors seen at the two ' output nodes will have the same value. So, as shown in the curve of Fig. 3.7, the terms of outputs related to the noise will be cancelled. Ku Kang [14] aiid Lee [15 ] have used the cell of Fig. 3.7 in their PLLs.

,

"

j___
:'al= (1"
*/111

IfC\')<

·
VpNn

·
Vp= vp+ Inblse{RJF<+R) Vn= vn+ Inoise(R/R+R) V;:rVn=vp-vn

Fig. 3.7 Noise cancellation in symmetric load architectun~..
.:. .,
~

"3

3.2.2.2 Current Control
In this category tWo' ~airi &~hiteciures' are .discuSsed:' diode-co~ected Io.ad and mo.dified cuIT~nt contro.l ~ell.

3.2.2.2.1 Diode-Conneded Load

,

....

Diode-Co.nnected Io.ad is the basic 'architecture of this catego.ry. The circuit is Sho.Wn in . : Fig. 3.8. In this circuit two. dio.de-Co.nnected transisto.rs ar~ used

as Io.ads and tli~:-$: '

freq~e~cy is co.ntrolled by th~ -tail current. The linear tuning range ~f this circuit is; !

limited,
"

becauSe the frequency is determined by the gm ~f the differential pair and the

~ is prOPortio.nal'tO the sq~e root' ~r"the c~nt.

, 34

(
Fig. 3.8 Current control architecture with diode-connected load. . Also, the output swing is limited here. This architecture has been modified to have a
.
'. " . '. '.

'

.
' . !

better. output swing [2]. But the main problem is that the nature of the differential pair . doesn't allow both fast response and rail to rail swing. That is because changing the .
,
.~,

'

)

,

situation in each leg results in going through a linear transition. Therefore, a modified
~ ~
''''

<f

·

~

0

"

~

_

,

...

,.,~._

cell, as explained next, is adopted in the proposed technique ...
· , · '1" '_ , . ' , ' " .. ·

l

.3.2.2.2 Modified·Current·Control Cell
~

.

,

r

-'

'''";

"

'.,''''
1,~ ~:

In the modified cell the differential pair is replaced by two inverters. The circuit is
> ..... ' " .
v '. , , _ ,

shown in Fig. 3.9.' As the transition between "on" and "off' conditions in the ; inverter ¥.. . . ,.' · ". ' .. '';' .. :"' .;
i ' · "', . .

~

.J\<'

is much faster than :the transition in a differential pair, this cell could reach higher
· -. _

~

'.'

,,.

,

~

.~

" ,

~ ·· 1

_~~.

,;'

c'"

frequencies. Another advantage of this cell is its almost rail to rail output. The circuIt can Cover a wide linear range. The supply noise rejection of the circuit is very good

35

because the circuit is isolated from the supply and substrate through the current. sources. Djemouai et al. [16 ] have used this cell in their PLL. . ' .'

!

; .
·

~

,

.I(lN~

!

T

· C, -L~-!>.

I

·
i i

I i
-..

.
': .

,

Fig. 3.9 Modified-cOntrol-current cell

The characteristics of the discussed delay cells are compared in the Table 3.3. Through.this comparison it can be ~ncluded that,: · SYmmetric load configuration is recommended .when a limited output sWing is t?
.c;

~.

.,',

\.

~

·

·

"

·'

~

required or the output swing variations could be fixed in the .next stage. .
, ~

,

~

."

,

·

The modified current control configuration is recommended if a rail to rail fast swing is. reqllired~o .

·

0

The architectures of these two configurations ,allow working 'Yith 1.8V supply.
I' .. , - " ' . ' . ' ' ' ' . ,

~ ~

.'

. '

.~

~

OJ, '0
l.··

·

'Power dissipation for these two cells .are close to each other and the circ~t, .· ' consumes around lmA in lOO:MlIz. .

0

36

·
,Table 3.3 COWparison of different delay cellS for VCO.

, Architecture

Range

Output - , Noise swing rejection Variable with Controlling voltage Variable with controlling voltage

Power dissipation

Comments
;

.
, Less than Resistive load, factor of 1.5

Weak

1.39mA at200MHz

-Weak supply noise rejection .·Variable output swing ~Limited ~ear range, -Good ~pply noise rejection ' -Wide swing -Variable output swing -\Veak supply noise rejection ' -Limited output s~ ' -Limited range\
. I

Symmetric load Differential pair with diode connected "load Differential inverters with two current sources

Factorof3

Good'

975u' at 150MHz

Factorof2

Limited swing

Weak ,

6.25mA at400MHz

Factorof3' Rail to Rail
:
'

,

,
"

Good .

2.1mA at 450MHZ
I

-Good supply noise rejection -Wide swing - Rail to rail output swing

The last structure, i.e. modifie~ current contrOl cell, has some limitation on'the speed. ' due 'to the upper and lower curr~t ·so~ces. The challenge could be going for a'higher -'

,

.

speed delay cell' by letting the upper and lo'wer transistors work in the triode region.:'" .. : However,' at the same time tIle supply noise issue should be resolved becauSe with the ; ~

.

transistors'working in the triode region the delay cell is not immunized against noise: "; The 'goal is to hav~ 'a fast delay-cell

With a,linear characteristic, while opt~ing the' '
'.

jitter performance and ha~ing a robust delay-cell against temperature ·change.:: "

.. ,

..
37

All these reasons led us to devise a new architecture for VCO which is fast enough to . work in GHz area and at the same time provides a symmetric rail-to-rail output. Due to the pseudo-differential arrangement and using fast sWitching

am non-clipping

method, this block has a good supply noise power rejection. A compensating block will be accompanied with this VCO, which helps us have a linear transfer function for. the

yeo.

Also, the compensating circuit helps have a

veo which is robust against

temperature changes. In addition the compensating circuit adds a mechanism for . ' . rejecting the supply noise up to certain frequencies. These attributes are elaborated in Chapter 4 which gives a somewhat detailed description of the delay celL

., ' , : -

,.

,

.

:: ...

,

.

:.
>

~

· ·/

"

, ..
'

'-

.

\

. Chapter 4 The Proposed PLL
. In this Chapter the designed PLL will be described in two different levels: system
".level and circuit level.

'4.1 System Level of the ~esign
.

_ The folloWing decisions were made in order to implement the top-level system. First, due to the advantages mentioned in Cbapter 2, a charge-pump configuration. has been chosen for achieving a programmable wide-range frequency, i.e. 100MHz to 1GHz, by a 50 MHz reference clock. Programmable driving capability method [20] is _used for achieving the wide :frequency range. As described. in Chapter -3, the :frequency range is partitioned into smaller ranges and adding the driving capability of the VC.o will provide us with different ranges. Also attempt has been niade to use the idea of the method that uses some cirCuitry [9] to make the VCO transfer function more linear in order. to have a wider range frequency. For this purpose, a novel compensating circuit has been added to the VCO block. As the reference :frequency is much
l~wer

than the output

:frequency, a divider is used for bringing down the output signal frequency in order to be compared with the input frequency.

_In addition to the basic sub-blocks used in a conventional charge-pump PLL - i.e..
phase frequency detector (PFD),· charge pump (CP), low-pass filter (LPF), voltage,,:
. '" .< .

· controlled oscillator. (VCO). - a pro~able di,,!der, two c?mparators, a reference voltage block and a logic circuit are added to provide the programmability capability. The top level of the design is shown in Fig. 4.1. 39

,"

"

'I'

+N

Variable ~ chain VCO

VCO Chain Control

t
Fig. 4.1 The block diagram of the proposed PLL.

4.1.1 The Operation of the System The output of the PLL (divided by N) is compared to the reference clock in a phasefrequen~y

detector. The, output of the phase frequency detector is fed to the charge.

pump followed by a low-pass The latter combination provides a control voltage . .filter. . . . for the VCO . .using a voltage·reference block, two thresholds are specified for this control voltage. Two comparators compare the control voltage with these two
, ·· v · "
.->

,~

·

·

'

thresholds. The outputs of the comparators are fed to a logic circuit. If the . .
~

,

comparators sh~w the. control .voltage exceeds, one of these. thresh~lds, the' logic circuit will decide to change the driving capability of the VCO by changing the
40
c'

number of chains. This change will be transferred to the veo using a translator called
",~'MUX"

block. "The, ,"MUX" block, which is a combination of several multiplexers,

'determines the drivitig capability of the veo accordirlg to what the logic circuit has dictated. This is ho'Y the 'range ofveo is changed. The top level of the design has been built usirig AHDL blocks and the functionality of the
~ystein

was verified. These are the blocks that are designed with Analog Hardware

Design Language (AHDL) to implement the desired functions. Fig. 4.2 shows the'top level of the system -using AHDL blocks. Also, the system level was implemented in
, I

MATLABby SIMULINK. This was done.in order' to check the dynamics of the
,
,

system and the stability of the loop. This implementation will be shown later..

i
, .

\
\

'

,

"

",

{

,;

"

'

< .

,-,',

>

,~ ~j:'

:

--

41 . ,-

-1-

~ll

$~.~

I

,

;

.;.r ·

~

Fig. 4.2 Implementation of the top-level system with AHDL blocks.
.· , > " · , '

4.2 Circuit-Level Design of PLL Blocks Design and simulations have been done 'using CADENCE tool and HSPICE simulator. In this section the circuits designed for the delay cell, VCO, charge-pump, frequency.phase' detector, and iow-pass ftlter - are described.,,: The blocks. that

~plement the programmability. are covered in the next section. The most imPOltant
block in, this PLL is the veo which is a ring oscillator which has three delay cells in

its chain.
42

4.2.1 VCO Delay Cell

A new fast delay-cell with a linear transfer function and suitable for high speed, widerange applications is used for the VCO. The proposed delay-cell is shown in Fig. 4.3. , . . The trend for designing a fast delay-cell is an inverter based one [20,11,12]. A modified inverter-based delay cell is used. The following are the modifications made to improve the performance of the delay cell. · Normally, the frequency ofVCO is controlled outside of the delay-cell. It was decided to control the frequency inside the delay cell in order to reduce the noise. For this purpose, two transistors

(MO and Ml in Fig. 4.3) were

added at the top and bottom ofthe inverter. These transistors work in triode region and act as resistor. By changing the value of these resistors the VCO frequency is fme-tuned. In this case we have a rail to rail output and the symmetry of the circuit helps get undistorted output wavefonn.
c ·

·

As seen in Chapter 3, the differential configuration makes the delay-cell slow. Therefor~, the single-ended connguration was cho·sen. Howeve;, to take advantage of a pseudo-differential configuration, two single-ended legs (i.e the circuit of Fig. 4.3) are bound through two inverters in order to be synchronized .. as, if they are· differential (Fig. 4.4). In this pseudo-differential configuration the common-mode' noise is rejected: It can be seen that if the IN+ and IN- are ' . increased, Vout+ and Vout- will decrease while the inverters which bind the two outputs. dictate . opposite' directions for two outputs.·This fight keeps. the. common ~ mode constant. They keep the zero crossing at mid-supply and cause the two outputs to be symmetric. 43
,j
{;

··-t

VDD

41...-------.

I
!
I

SP

~--II-I

~!
.
I

~~Ch3.t
w=4u

i=30Q.l.Q.in

,....---111-1

~
~
i

M4' , " pch3"
w=4u

'.

,

, 1=300.Cn

. Vinp-

·~VQutm
I
-M5
.. nch3H
1=360.00n ',v=2u

,I
,

.I I
\

,

:

,

,

.

~

'W,,"

;; ..

~,SN·
~ ~ ~

-,..$ ·· ,

':

.~;

·

, vss
,

" '

Fig. ,4.3 D,elay ceg archit~~.w?-.~ upper and lower contr~lled resistor:
...

.;..

-.

~

'.

,.,

~

.

VOD~

~--

__"vDD .

,

lr---I.H
I

v.~~
'-'-

1~
;

~h3"
w=4u

1=30tl.0n

.......

SN IlIDto--Jl.H

1~
!

~!:h3U
.,...z.u

1 .. 380.000

,

I
VSS 41. __

--....J1

Fig. 4.4 Two single-ended delay-cells bound tOgether with two inverters in order to make a pseudo- differential configuration. · The transfer function of the veo built with the inverter-based delay-cell is not linear. Another modification bad to be made to make this transfer function linear. The problem of nonlinear

veo

gain has been fixed here by changing the

'controlling voltage in such a way that it compensates the nonlinearlity of the veo gain. This circuit, shown in Fig. A.S, is called mapper and consists ofa VII (voltage to c~ent)' converter ~d

an' IN (~~nt to v~ltag~) cori~erter. Here is'

h~w mapper works: the differential outputs of the' charge-pump are fed to this

45

, circuit. First, these outputs are converted to current thr<?ugh the VII block. Then , the current is converted to two controlling voltages" but now the controlling voltages are reshaped so that they Compensate the non-linearity of the delay-cell: - , gain and therefore the VCO transfer function will be lrnear.
i
!
I

a

i

I

I

::r
·

I'

·

I

I .
!
,

Fig. 4.5 The circuit of mapper. For the method of programmability utilized in this design, the VCO should be

..

insensitive to the temperature change. This function is also realized in'the mapper. The voltages provided in mapper are insensitive to temperature chaDges: Fig.4.6
,
'

is a partial schematic of the mapper accompanied ~y the transistor which acts as a
<

resistive load in the delay cell (transistor M2). Here is hmv gds oftransistor M2 is calculated. The transistor works in triode region. As Vos << 2(VGS·V uJ, we have:
.~w
·

;,;~

t,,~;

,~,!"1

.. ",

l'

"': --:.

-

~-,.'

;;

I

·

'"

·

',,-'-'

~

·

~: ~,,:,\

g&2= dlo!dVos=

[JlnCox(W21L2 )(VGS2· Vtn )]~1I[JlnCox(W21L2 )VGS2] .

(4.1)"

, On the other hand, for the transistors in the deep triode region, ie. transistors M4
and M5, we have:
· } _f __ ' ...

VDss=Io! [Jln Cox(Ws ILs )(Voo· Yt;n)] :flo! [Jln Cox(Ws ILs )(Voo)]. From Fig. 4.6 we have
:

(4.2)

;

VOS2= 2VDSS

+ VOSII

,(4.3)

,

But tranSistor Mil is' a level shifter and VOSl is mainly determined by VDSS. Combining equations (4.1), (4.2) and (4.3) will yield,
"

~s2~JlD Cox(W2 1L'i )[(2 In! (Jln Cox(Ws ILs )(VDD»],
~(2 IDW2 iL2

(4.4) ,

)/«Ws ILs )(VDD» .
, \100.

vDD

VB

L Iq - ,
.

!

,I,
I
I

I'

-!~"
r.CNIolOS
11

Sf"

It-

-Iq~ '
t I '

I'
vDO

I
!

-I

\1)0

,,_I

"~.'
I~
, "1

~,
i I

it

\

-I
' ~ 'l

"..
.

<" r\ . =. "'I I
"
,

,~ <~
,
t, .
,

,
~

.-i

. i

;

:I:

I
...~S
'':J.

,I

'~

,

'

-I '. <~
~ ~

, I~ ,'
.

.

.J\

". I

f,.

. ..

r

.

,

-,

~. ~

'.'

"

,·f
I

-;

..
:

'-'. L - .l

,',

.,

.,.>;J ·.

1
e

"SS.
f

I

~ I:' :-

.,
"
,

··

}

Fig. 4.6 A partial schematic of the mapper accomParued by the transistor which'acts
. .! :'{ " " ,'"

-< . ;,

;. . .

~~

.. !

. . . ~'" '.".,~.

as a resistive load.

If VDD is considered constant:.

where K is a constant and Ibias is insensitive to temperature.'

,

'

·

The other imPortant point, in the delay-cell is the supply noise rejection. The mapper provides good supply noise rejection for c,ertain frequencies, that is up to

'around 200MHz: In Fig. 4.7, which is a partial schematic of the ~apper and the delay Cell" we can write for transistor MO
,

,

VO=VDD-2VDS-VOS9.

From this equation;, when VDD changes,' this change will appear in Va" There~ore, we can write: '
"ll.Vo= ll.VDD.
,

On the other band we can see from Fig. 2~ 7 that the change in VDD directly appears 'on source of Transistor MO and we can write

.

Therefore, Vas of transistor MO is independent of VDD change, and hence insensitive to supply noise. Researchers have shown that the ulvet1er-based delay~ 'cells have good supply noise rejection because of the fast switching [6] .
. ",

,., 7 '

... ,',
· '. ~,I,

....

..

,

'

"t

.

.~.

"

VDD

I
VSS'
'

vDD ·--------.1 ·

.I

I

I·

4_-..,-.4-___

CPMOS

,va

.1-1---~- - - - - - . I.I~ ..
.

jM19

.

~
'4

.

SN . m . . - - _......

I(
, I

)
I
I t
,
,.

i! ,.

\ISS 1--_---.:;..._.---,-...I

.

.

:. VSS · __ · -------1

Fig. 4.7 Partial schematic of mapper and delay cell.

4.2.2 veo The proposed veo is a ring oscillator which has three delay cells in its chain. Fig. 4.8 shows the basic architecture of the yeo. Seven parallel chains have been provided For providing programmable driving capability.

49

.

I

I
I

0 011
$4
,;".l'

011 0 OELAYC£LL ,
)

~

f

'--, :
iO
t)
Q

\/D!}

DB
';iN

c >

·
ON 0

'16 0 De, S'l

,
~
ON

l--__ .. .. I ,I
j

i'

voutn

"7

,
I

0

DEV.'lCtl.l
51'

PELAYCELL

I I

SH<6:0) SP<!l:0~

t-i<6:e> SP<&'''~

5r

~
\'5S

I

\~S

t

·

SN<6:fi>

SF<8!lI~

~J

I

,

Fig. 4.8 Basic architecture of the yeo.

"

.

'

.

'~".'

,

Fig. 4.9 shows the schematic diagram of circuits inside each of the blocks of Fig. 4.8 (for simplicity only four c~ out of the ~ev~n chams have been shown.) As' mentioned in Chapter 3, the frequency range of the ring oscillator veo is at most a factor of three, which is hardly enough for the temperature and process variation coverage. In order to attain the desired frequency range, seven chains of such a ring have been put in parallel so that we can split our wide range into seven different smaller ranges. The ranges have about 20% overlap and a proper number' of chains will be in operation in any desired range. A logic circuit will decide the number of
"
'

required chains.

Wh~n

a chain is not in operation, it is turned off so that the power

dissipation is optimized.
,
,

In order to have enough driving: capability at the output of the consisting of a ch81n of inverterS is used

yeO, a block to bring out the output of the yeo. TIiis

block, called TAft ,is S1J:itable for,. driving 2pF, c~p~i?ve load at the output of the

yeo. Fig. 4.10 shows 'the TAP architecture.

so

~

__

~~~ ~~--~~----------------------------~-------4--------------a

.

Fig. 4.9 The schematic diagram of circuits inside each of the blocks of Fig. 4.8~

~

.

,

, .

.

,
DB ~----*------t.t--------It-I

_. '.
, .

,~~f>~
~

;"~ ...... l'!"!

I

-

\it'D

,j

I
DB!

t

I

iVf<;""

Fig. 4.10 TAP arChitecture:
· !

1. ~ ..

51

4.2.3 Charge-Pump
For choosing the appropriate charge-pump 3rchitec~, different charge-pumps were studied. A simplified version of the fmal architecture is shown in Fig. 4.i 1. In this arChitecture the switches M8 and M12 control the current flow to the charge-plmlp's . .
-;-~

,

output. Theseswitches are placed on the source side of the current-source devices, i.e. M7 and M13, in order to attenuate any switching errors that may appear at the sensitive output node. In other words the output nodes are isolated from the switches in order to avoid switching ripples appear on outputs. The dummy devices M49-M52 are employed to reduce both charge injection and clock feed-through errors [3]. These transistors introduce capacitors that cancel the switches
Cgd

effects [11]. Transistors M41 and M44 are used to ensure a fast turn-off

of the current sources.

,

'

52

mo.

T
I=JI'lIiU'. ...=3u

VDO

I I ' s "Pd1~" !-rf r--

UP

-I
, i

( ,
'

/

, ,

,

"

\ISS.

Fig. 4.11 The Basic architecture of the chosen charge-pump.

The challenge in' charge-pump design was to make the. common-mode voltage constant' Usually, a conventional' ~ommon-mode' feedback' (CMFB) circuit

. accompanies the charge-pump. In the CMFB circuit; Fig. 4.12, the difference of the· differential outputs of the. charge-pump is compared with the reference voltage in a differential pair and a bias current is made which forces the common-mode voltage to be constant.' However,'. when the charge-pump doesn't sink or source charges,' e.g. when it is in locked condition, the switches are open and the bias current cannot keep the common-mode voltage constant To resolve this issue; a dummy circUit was added to have constant common-mode voltage at all time, see Fig. 4.13.

-e,
.
_

----r;~".

~v

.1

I

'I:."'''' _ .. .... ~

:~
I
I ,

L-,

;.~~

*S~_"'~1i

Fig. 4.12 The CMFB circuit for the charge-pump.

.,voo

F
M8~
_8_N2_.

I.

(
\

I
I

?-H-j ..........'_ _-II-I.I~
M42

.

'M21

\/558 _\

'M22~ .. fl,.vSS8
"

I
I
I

vss"

.I

Fig. 4.13 Dummy circuit added to the charge-pump.

S5

4.2.4 Phast>Frequency Detector The phase, frequency detector (PFD). is a robust tri-state detector. The basic configuration of the PFD is shown in Fig. 4.14. The configuration

is close to ~e one'

described in ,Chapter 2. Two main signals are fed to two Flip-Flops as clock signals; . ~- . . When the rising edge of the leading signal, appears, the output of the relevant Flit: ' Flop wili be logic ~ne

and thi~ output will be maintained in logic one until the rising

edge of the other signal' ~ppears. 'At this both outputs will go to logic zero.

time the ~set sigruu will be logic one'and

IREF

VDD

I
L---------~--~A~~mD~
8 \ISS

~

,./", ~'~M

\lDO .· :

I
__ I.'...;,.OD_--1D

o

S?

0 1 - - + - - - - - - -...

1

lose
"

.

: VDff

'.::>~" ,

;'

"I

L..:....... . DN ··. _,

<!

,,

Fig. 4.14 Basic archi~ecture oftlieph~-frequency deteCtor:' " The simulation result shows that this circuit functions properly up to 200MHz.

56

,r

No challenge' has" been made for removing the narrow pulses appearing in reset tinle . , ,in both outputs, because these small outputs assures that there is no dead zone in the , charge pump [2] .. The phase difference coUid be as sinall as zero. '
4.2.5 Low-Pass Filter

',As discussed in Chapter 2 and shown in Fig. 2.9, a proper low-pass filter is a resistor

.

.-

~

'and a capacitor in series, in parallel with a small capacitor. The bandwidth of the low" pass, filter has an important role in stability of the whole loop. The sizes of the resistor
.

and capacitors are chosen as follows. As we have a charge-pump architecture, the 'damping factor of the system is

stability dictates to have a damping factor greater than 0.5 and not much bigger one for both extreme of the, frequency range. In this

than \
"

fo~u1a,' the only unknown

'

parameters are Rp and Cpo These values are chosen in a way to fulfill this~equirement. The second capacitors is chosen to be one tenth of the main capacitor to maintain the second order configuration.
F~t,

,,.

the transfer function of whole loop was calculated using the formulas of chapter
,

.

'

2. Then using a system level simulation, done in Simulink, the stability of the 'system

vvas optiInized by choosing proper values for the elements of the low-pass filter.
Fig. 4J5 shows the low-pass filter architecture.
I '"

"

The Simulink system level simulation helped in automating the optimization process.
~
*

_~.,

,_ .. ,.._..

~.:;

~:

".

-

....

.
~

,

57.

VP
..

';

y:
~
L

II

Fig. 4.15 The low-pass fil~r architecture.

,...
~

58

,: 4.3 Programina~ility and Utility Devices
,

'

In this section the blocks used for achieving on-chip programmability, such as programmable divider, logic circuit, comparator are described. The circuits for . ,voltage reference block (to set the threshold for programmability) and bandgap, and .current reference block (utility devices) are covered here.
, ,

, '4.3.1 Divider " "The divider used in this system was a challenging one, because we needed a fast divider which could function up to

i GHz. Theref'ore, the divider was split ,to tWo

blocks, an, asynchronous and a synchronous one. In the asynchronous block, or the fast part of division,' we are only concerned With the delay ofD-Flip-Flop which is '
,

' .
"

.

very small [about,20Ops]. The synchronous block follows the, asynchronous one, . (. where the frequency has been reduced' by the asynchronous divider. In the asynchronous block the signal is divided by an even number, say 2,4,8, and in the synchronous part the signal, is divided by an odd number, say 3,5,7. The divider is
,,'
~.

programniable and any combination of the even and odd numbers can be chosen. Fig. 4.16 shows the combination of the two dividers

r----.....,o!-----f70
CLKOUT . .
I

CLKOUT

~
CLl(~2N

a----tt-lIlST .-----__II,.-tOfV2NSEl.0
,.-.---IHOlV2NSELl

~

DlVSEU}

DlVSELl __- - '

DNSEL2'~

'I,;'","

,,".':"

'j~'

Fig. 4.16 Combination of two dividers (synchronous and asynchronous).

4.3.1.1 Asynchronous Divider 'The asynchronoUS divider is a combination of D Flip~Flops. The main signal to be . ' .
.
'~-,

divided is fed as a clock signal to the fIrst Flip-Flop. The output of each Flip-Flop, i.e..: Q, is fed as a clock to the following Flip-Flop and the inverted output of each Flip, <::' . ' , , " ..

Flop is fed as an input to itself. Fig. 4.17, shows the architecture of the asynchronous divider. The output of the fIrst Flip-Flop is a divided-by-two signal, the output of the second Flip-Flop is a divided-by-four signal and the output of the third Flip-¥lop isa divided-by-eight signal. ,
!

~

vOD

I

,

"'DO

-,

,I

o
D,

~

Q

\lOfT CUUH

eLI< \;i
" fiST" RSj'

VO~

a

--t-

IO!.fT_e.

I

II}

08

"

"

~

g? "

~vss

Fig. 4.17 AsYnchronous divider.

4.3.1.2 Synchronous Divid~r Fig. 4.18 shows the synchronous divider. In this circuit the signal to be divided is the input of the fIrst flip-flop. All the flip-flops have the s~e clock and the output-of each

ili~: fl~p i~ the ~p~t ~fth~ "s~~ceeding stitge. When the'division by N is done, the
res~t.
The

-

system is
. ,.J .

~al~~' '~f N,' ~hich

coUId be' 3~5,7

~d
~.

9; isdetermiI1e~ by a .,

decoder.
"

,:t

't'r"

,

~

>"'.;..

'.

.
.,J .

_~

~

. to..

4

. '"

.

~. ~

~ti ... '..)

"

;

,

:

.

, ..;

,""

-:,

60

-

voo,
I

r-;;:

"'"q)j)

re

, V!JO

\I[)O

r17

VDD

~
VOW

Q

~
'YOFF

0

03

l)

'" ~
IJOFF '

0

0

~

,.

0

OS

VDFF

CLkti

'!:,lli!
tt.!!2

OS

DJa

059

~'
RS11
',,!}[)

'ISS

~VS'!l

r--.'
OS
0
,,~

\fro!)

.;6D
,,:5

. '..00

1~

0

5i!

0

Q

I>

~.

Q

(,>7

Q

D

~
\'OFF

0'

0

[J9

\'OfF

\'OFF
CIJ(

VeFF
lJ~8

Ol~

8'" as
I ~·ss

~ '"
a:.~

D7Fi
08

, II: '"

~
flST1

~

CLK..1l'1

rVDD

\Il'\p

/

(

I'

liST

Fig. 4.18 Synchronous divider.

,'
· :t
.<,

4.3.2 Logic Circuit '

The logic circuit is a digital circuit that decides how many chains of delay-cells are in
· ,;. "' · ...; · .,: .

~ .J. ~ """ .~! .

~

~ " :,~

~"

operation. This decision is made by using the outputs of two comparators. Fig. 4.19
" , · £_

'v

,.. k

"

-~ ,

"

"

:_!~

"

shows the core of logic circuit. When the output of one of the comparators changes to. logic one, it shows that the controlling voltage has exceeded the absolute value of threshold. Therefore, the number of delay-cell chains should be changed accordingly.
"

.

Then, the logic circuit checks the number of ((xistihg chain and brings in or takes out a
c~

At this moment a ~t signal is built which brings the controlling voltage to its 61,'

common~niode

value. Also, a feature has been provided that overrides the number of '

, ,chains manUally~This feature could be used at start·up or for testing the chip.
VL:O '
UPDNB

I~UP:::[~'N=-8---.fA'voo....
~J

.:;;jtr~"(i

I

Or.
<,100
o v,

:;:::·Yf(..f"'1

UP ...:.-.'V~P:"-..----,fA:-;~.'

r-3J<v.l'n
A

Onl- ·· ~-----t~~

va

G:s

VOO

~~VoR1XA. ~
II

r;;.7

On

I ISS

t-~'

VOR1XA

..

Fig. ,4.19 Core oflogic circuit.

4.3.3 Comparator
Two comparators are used for detennining the po~ts ~here the controllitlg voltage
',.

exceeds the upper or lower thres~olds. Fig. 4.20 shows the basic to~level archltecture of the comparator~ It ,consists of a bias circuit, a pre-amplification stage, a track and latch stage and anR-S latch.

::

':Fig.4~20 &sic architecture of the cotitpamtor. :

,

'

,',

'.
Shown in Fig. 4~2I, is the pre-amplifier configuration. The input signal is fed , differentially. The pre~amplifier is used to obtain higher resolution and to minimize the effects of kickback. Kickback referS to the charge transfer either into or out of the inputs when the track and latch stage goes from track mode to latch mode [3]. The output of the pre-amplifier, although larger than the comparator input, is still much smaller than the voltage required to drive digit8l circuitry. The track and latch
,
,

stage further amplifies it again during the latch phase, when' positive feedback is
,

,

enabled

Fig. 4.21 Pre-amplifier configuration. ,',

The track-and-Iatch stage circuitry is shown in Fig. 4~22. The dynamic operation of this circuit is divided into reset and compari~on interv~s. Ai the reset interval, the '
..
,
'
~

clock ("inc" signal) is low, transfer gates M25 and M24 are "off" and p-charinel pre,
,

charge transistors MI8 and' M2I, are "on". Therefore,_ both the p-charinel flip-flop
( <

~

-

)

~

#

. "

·

... '

,",

nodes1 formed by M19 and M20, are charged ~p to power-supply voltage level and n-

63

channel Flip-Flop nodes, formed by· M24 and M25, are discharged to ground level .. through n-channel discharge transistors. When the clock goes high, charging current starts, to flow from the p-channel side to the'n-channel Flip-Flop. A part ofth~ current . is 'disc~ged through discharge transistors M26 and M27, whose gates are controlled

by

the differential amplifier. Since these tWo discharge transistors have, different

currents,a large voltage difference is obtained when the n-channel flip-flop drain voltages exceed the threshold voltage. The amplified difference is transferred to the p.'

channel flip-flop, and is amplified to a voltage swing ~early equal to the power supply voltage [21].
.
.

The output of the track-and-Iatch circuit is fed to the R-S latch during the clock , period. Fig~ 4.23 shows the R-S latch.

r

_ ,; .'~ ~

,. Fig. 4.22 Track-and-Iatch stage.
!." " , , ·. - , .;: "" -.. :, :-,;. _.~ "

, <.'

64

VDD R

VDD

:
';"::':'f10rn

os
vss

\/DO
11
I

. 5

:

Q

..
I

)
Fig. 4.23 R-S latch of the comparator.

4.3.4 Band-Gap Circuit The purpose of reference voltage circuit is to establish a DC voltage o'r current that is independent of the supply and process and has a well-defined behavior . with. temperature. Since most . process parameters vary with temperature, if a reference. is
~

.>

.' temperature-independent, then it is usually process independent as well [3]. The Underlying .idea is to have two quantities having opposite temperature coefficients (TC) and add them with proper weighting. 'The result will show a zero temperature coefficient.
. .... .. ,> ...... " j
.

.

Bipolar transistors have proven to provide f;he most reproducible and well-defmed quantities that can provide positive and negative TCs. Even though many parameters 65

of MOS devices have been considered for the task of reference generation, bipolar operation still forms the core of such circuits [3]. The base-emitter voltage of bipolar transistors or, more generally, the forward voltage of a pn-junction diode exhibits a negative Te. For a bipolar device we can write:

.

.

'wh~re

V,.=KT/q.
.
,

,

It can be shown that with VBE~750mV and T=300° K, dVBwdf":t -1.5mVr K [3].
,

. . ,

,

<

,

It was recognized that if two bipolar transistors operate at unequal current densities, then the difference between their base-emitter voltages is directly proportional to the absolute temperature [3]. As shown in Fig. 4.24, if two identical transistors (lsI = I s2 )
:

,

"

are biased at collector currents' of nIo and 10 and their base currents are negligible, then:
)

"

i

.'

AVBE= Vr In (nIo/ISI)- Vr In (loI1s2),

.

"

, . ·:.t

}

". .

" .) _, .

Therefore, the VBE difference has a positive temperature coefficient;
dVBWdf = K/q In (n).,
.
~

.
~..

~

.:

\ y'"

,i'.

Vo
.~
, >
~

"...
,
~

",:.

?VBIi >/ .

Fig. 4.24 Generation 'of positive. temperature coefficient [3].
66 '.;"

, The core of the band-gap circuit is shown in Fig. 4.25 [22]. The low-temperature coefficient of the bandgap voltage is obtained by additio~ of a negative temperature coefficient (TC), base-emitter voltage of a bipolar transistor, with a positive

TC

voltage obtained' from, the difference of two base-emitter voltages biased at different current densities., The supply independence as well as the temperature independence are achieved by a feedback mechanism that forces node 2 in Fig. 4.25 to be at the same potential as node L This simultaneously ensures that 1M2 is an accurate copy OfIMl . From Fig. 4.25 we can write (4.1) Since nodes 1 and 2 are at the same potential, we can write: VBEI + I*R. = VBm,
·· t

VT In (I/(M*lo» + I*RI = VTIn «N+ 1)llIo), VT In (lI(M*(N+l» = -I*Rl. Deriving "I" from Eq.(4.2) and substituting it in Eq. (4.1) yields
·

(4.2)

. VBG = VBEl + N*VT .In [1I(M*(N+l»*(R21R 1)]. ..
,:
".

'

,

VBEl has a temperature coefficient of -2.2mV? C at 250 C, while. VT has a temperature coefficient of +0.085 mV? C. By proper choice of R21RI, M and N, temperature coefficient ofVBG can be compensated to be zero. ,
.
.

The band-gap core circuit is accompanied with an op-anip which is uSed to force node , 1 to be at the same potential as node 2.

.

;

67

:0

1:N .

HI

:

.

~

Fig. 4.25 Core of the band-gap circuit [22].

4.3.5 Voltage Reference Circuit In or~er to provide thresholds of controlliIig voltages of the VCO a voltage reference bloclc is needed. These threshold vohages are fed to the comparators. Fig. 4.26 shows the top-level circuit of the vohage reference block.

.

~

'.;

/"

,-

..

\

:

,

'~.'

.

"

"

68

R;'.

;;a
1'14110
.. n451i1

W40C
1 ..

"P4-Ek]
-.;~

n5(!le
"''liS

\1

,"

'is!IV~EFJlE9558
.

~-

~

liDO

vOO

nOOIil nasi! "706

lif'61iXJ

','P650

B

. n7511

~.

~,

.. .I;

g
VSS .

n'151i1

n70ij .1'1650

I2Sl
Ii ..;

VS~~EF-lIElIss0
"008 n45e
1'1411111
N

n601l

VIH"'.J3

'IN40il

;

B

~S.

'.

"

Fig. 4.26 Top-level of the voltage reference block. This block is made of a bias circuit, a folded-cascode op-amp, and a string of the resistors. The reference voltage built in the band-gap circuit is fed to the positive input of the folded-cascode . . op-ainp. A negative feedback dictates a Constant voltage at the . ' . . resistor based voltage divider. This voltage divider, the sl!ing of the resistors, allows us to have specified quantized reference voltages,

'.

69

.1

A combination of
,

a multiplexer and a decoder is used to add programmability to the
,

threshold voltages, in, ()rder to be able to check the functionality of the system with different threshold voltages during the test mode oftlie chip.

4.3.6 Current R~ferenee Circuit
. We need a precise 2S-uA current for different parts of the circuit, such as bias circuits.

Thi~current is made available'in a current reference block. Fig. 4.27 shows the topl~vel circuit of this block. , '
.',

:

This block is self biased and consists of a two-stage op-amp (a p-type differentialopamp followed' by a common-source outPut stage) and feedback loop whi~h forces a constant current to' flow in' an e~emal resistor,' This constant current is mirrored in several branches to be used in different parts of the system.
"
'

a

~~----------~~-------~-----~

PD

-It-----,

,

'.

VS!l _ _--~---'

Fig. 4.27 Top-level circuit of the ,current reference block.

4.3.7 Aligning Delay Blocks
.
.

As. the output' frequency is divided byN iiI the divider, before being compared with the input reference clock, we have to consider the delay resulted from this division in
.

.

order to' align the input reference dock and the output. For this purpose, two delay' cells have been built, in order to copy the delays applied by the asynchronous and the .
1 · , ·

~.,

·

, synchronous dividers.'. Figs. 4.28 and 4.29 show" the circuits which copy the delay applied by the asynchronous divider and the synchronous divider respectively. This block, titled "mNDELAY" in the diagram, copies the delay of a Flip-Flop.;
VDD

rN-«N~Eevt
~

a

0

DEU

r-11
0 0

VDD

VDD
~

12
o o

IN

JNilNgEeM- ~-_Hlt.fiINB;~f
Vl

DEL4

>

(/)

>

,V5S I

·

VDD
0 0

r-14

VDO

\lDD

1tfi1~lf
>
(/)

Fig. 4.28 Aligning delay block for asynchronous divider. '

"~

<' ..

71

r10

VOD

IN ......

_.....-.tINH[N~Ebb'fI-lJ-___ A-I
:>
'i
I

a

z

VSS

Fig. 4.29 Aligning delay block for synchronous divider. 4.4 Testability of the Chip . In order to. improve the te~bility of the, design, it is required to be able to force
t ' .

~'

.

'.'

'

,

,

different blocks from outside and look at the output of different nod,es. In this way, in the test mode we c~ se~ h~w ~he performance of each ?lock in the re,al chip measures up with the desired spedficat~ons defined in the design, . The following features have been added to the system to facilitate the testability of the
~

,..

· *

.

1.' F?rcing signals from outside to the inputs of the PFD,: It is possible to feed the
PFD from outside: Therefore, if there is any problem in the loop, the loop can
,~
, l '·

~

be broken and, two inputs will be forced from outside to the PFD and the
,:, ..

'.~

>.

"

,'! ·

.

,,;

".' :

"

· .

.

,:',

~;

.

·

'

functionality of a part of the loop will be checked.
.
~/

.

' .
~

.

-

.'.

.,.

}

~ .(~."' ;-'}

2. Manual control on the number of delay cell 'chains: The number of delay cell
·'

.:~.;."

",.,: .

·

r,

·

'". " , , ' .

·

.~.'

,

·

'

'"' chains can be~, determined from outside the chip. This feature is used either at
· .( '<
~

;.; the initial point of operation or for the test purposes.
-

.

"

~.'.

,,'.

- .~;

.

(

~'

~.

,

.

'
:
~'''"

3.' Forcing signals from outside to the inputs of the 'charge-pump.,
--; .",><

~

~

iI_

'"

..:)

~

-,

<-,,~',

..':/;

4. Forcing the controlling voltage «;lfthe yeo fro~ ~utside.
L, " ' ',' . ,,,: : '. " ,", .,;. ". ,

5.;, Bri?~ing out the output ~fthe ~harge pump . 6. Bringing out the six clocks with different phases. 7. Bringing out the clock and the inverted clock.

'. ,

, 8. Power down feature for the whole loop. 4.5 Extra Features of the Design ' The foll~wings are some extra' featur~s provided in making the desig~ed PLL as' general-purpose ~d as testable. 1. Since no MIM capacitor has been considered in digital technology, all capacitors , . . required in the design for low-pass filter and for Compensation of different op-amps
.
"

"'.

have been built with transistors and no MIM capacitors has, been' uSed. This is consistent with our goal to build a PLL that can be fabricated with bOth digital ~d mixed-mode technology. 2. 'An option has been provided so thai the chip could also use the 25uA current built by the band-gap as the reference-current. By using this option the system doesn't need any external component. This i~ also Mother feature that makes the PLL appropriate for any design when there is no chance for adding external component. 3. As already mentioned in Section' 4.3.5, four optionS have been consider~d for the . controlling voltage thresholds.
' , . . 4. There are three options for the resistors used fn: the low-pass filter. The default'is
, ,
~

· -1.

"

"

,

,

f"'

,

·

R=4K.. However, we have two other options: we can make the resistor half size 'or double it in order to test the functionality of the circuit in different situationS.
. ,
,

5. Three options have been considered for providing the reference DC current (25uA): (a) The precise current generated by our reference ~rrent circuit, (b) The current generated by the band-gap' ref~r~nce~' or third option is

(~) A'r~fe~en'ce ~Urrent fro~ outside. The '
PLL comes along with anothe; block ~t
!

f~

the situation 'that

th~

already has a reference current. Therefore,'fue that the other block does.
L

PLL ~;m~' th~ ~e r~fe~en~e 'c~ent "

73

Chapter 5 Simulation Results and Layout

The results of simulation for some ~{the major blocks of the chip are shown and ?iscussed in this chapter. Layout issues of the chip are also explained.

5.1 Simulation Results for Some Major Blocks 5.1.1 veo Simulation'

veo

was the first block to be designed.

veo transfer function ,?ver the whole range ,

is shown in Fig. 5.L It can be, seen that there is 20% overlap between each two successive sub-ranges. ' The threshold, voltages "are considered to be '-500mv to +600mv (th~ugh it is programmable and can be changed during testing) so that only the linear part of the range will be used. As it can be seen in the Fig. 5.1 the gain is constant for all sub, ranges.

Let us

compare this result with the result that Brynjolfson and Zilic [8] have

reported (Fig. 5.2) for progr3mmabil~ty by ch3.nging ~e num~r of inverters. One can see that in their diagram the veo gain doesn't re~ constant when the number of inverters is changed. This' change in veo gain will affect the dynalnics of the loop.
~... ~'?,
' ··· :'

,Moreover; for high frequen~ies the veo ga~'is high and the'systeni is'prone to ~o~:~: . . - -. . '" .
~;

The proposed design, therefore, has advantage in this respect ~'yer th~irs. "

,'

74

=.1o.00G

, !.800U

1-----.-,...::;;.;;..--~=---~

__4 S _ -

;§"~
1~\4
" ,,,,J'

.1"1;1
'"t,,' ·
r

Fig. 5.1 Transfer function of the veo over the whole range (frequency versus controlling voltage in mV).

: .~

.

..··

·
t
'

o---o,-----c~--v~t~1-----t-2---,-'-.C----1-.-'-v.·:--t~tl ~trol Voll#Olt (V) TH

· · :
·

,

i . '..
:

· ·

Fig. 5.2 The transfer function of the veo suggested by Brynjolfson and Zilic[8].

75

5.1.2 Phase-Frequency Detector .

. Fig. 5.3 shows the result of the simulation for p~e-fre<juency detector circuit. ThiS
. . . .

.

.

result is for the, situation that the oscillator frequency is ahead of the reference' frequency. Therefore, at the rising edge of this signal the "DOWN" signal becomes
. .
,

IQgic one' and shows that the output frequency should be lowered to match the reference frequency.' This signal will stay high until the rising-edge of the reference .
'

frequency appears. At this time both " DOWN". and "UP" signal will reset., "

','

,

'.

l'

·

t

~

: .

~ .... I~ ~

" . -. ,.. · ~-,

. · · .-.:

~.;

~..

"

.......

76

i"i~:i~.·tII.l~if':~~~¥i ,.~ ( .....~,~
t..",, _ _
~,

~~, ~~t~,

:;,''1""
~
~

~~~~----~~~----~~----~~----~~~----~.~~~--~"
.....··Vft

'L "
,

£~ l."
U

~~,~.--~~~--~~~~~~~~-.-~~~~~~~~~~~ 4Ji ,-Fvt~"

~

~ U r~~~--~--+---+---r-~~-;-------+--~--~--~--+-:~ l:.!
~ ~~~~~--~~~--~~~~--~--~~~--~~~--~~
U

Fig. 5.3 Phase-frequency detector simulation.

5.2 MATLAB Simulation Result After simulating each single block the whole loop was simulated in MATLAB with Simulink in order to optimize the filter components and check the stability of the loop for both extremes of the ranges. Fig. 5.4 shows the diagram ofthe system in Simulink. Shown in Fig. 5.5 is the loop behavior for dividing factor N=4. Calculations based on the loop transfer function derived ill Chapter 2 shows that for N=4 and with charg~ pump current of 50 uA the damping ratio is equal to 1.1 and hence the system is stable. The, number of rings' in the simulation result of Fig. 5.5 confirms the stability of the designed system.
"

~

.'

77

The frequency response of the PLL was derived in MATLAB. Figs. 5.6 and 5.7 show the transfer function of the PLL for N=4' and N=20. respectively. The
CO.3dB

and,

hence~ the bandwidth of the PLL for these ~o dividing factors are 3* 106 and 6* 106

Fig~

5.4 System level schematic in Simulink.

..

,

,

78

.,..

,,-

O~~--~~~---'I----~~I-------'-I------\~.------'1-------,'-------,

.0.11-' ' : :

,-

'-

'OAt-.. · .. · ......... .

.

N.....-... · '---, . . .---' .._ . . .'., ---------; . . . . .- · * - - ; * : ~ · ~ . . . . . . * · · · · · · ·: . ·

.'

....

-

.0.7 -.:: ...... ..

.-

.o~~--__--~i·-------~I------~I------~I------~~----~l--------j~----~

o

0.6

1.S

l/.

2.5

3

:U

4

.

v;n"

Fig. 5.5 Loop behavior in Simulink for the dividing factor N=4 Low-pass output . voltage (V) versus time (us).

79

.. ...
~

,'

. ..'

, 10-0·1

,

i

~ ::i 10.0.2 ... .. :
~

'"
.:
.'.;

.. , ..

p,· · · · +

" : ..

'

'.

""0,

10-O~b-~~~~~~~~~~~~~·~'~··~~~~~~~~~~~~~~~

,d

,if

1~

,t

1~

1~

Frequency (radla)

-20

..
~

....

'

. ..
~"

~

,...

.. ."

-80
.100L---~~~~~~L---~~·-·;·~~~----~-h~~WU~~~~~--~~~~~--~~~~~~~--~~~~

1~

,~

1~!

~1~

1~

1~

Frequency (radls)

Fig. 5.6 Frequency response of the PLL for dividing factor N=4. ~

.:

<

· ·)

,
'.<

;

"

, '

'.'

.,

80

, ,

: ;.::::;:
: . :- !
~

*

...... .

..

! ..; -:.::: . :.

.. .: :.::::
~ ~

, "w

.. ,. ~

.

· ...... . ... ,". ·...
· · · · · . ',*

: . ; ;:::: · ... .. " ".. · ..,..
~.~.~.~~

>.

10~~~~~~_"~-~':~:~':~::~::'__~·,·~~~~~~~~~~~~-~·~~
101

· . . ...

· ...... .
~.

1(f'

103

10

4

Frequency (red/e)
Or---~.~~.~~--~~~--~~~.-~~--~~~~~~~~

:::.:.::: · . . ... . · . ......... .. . . .... " ... . .
~.
~

.. .. ..

:::::':::
..
."
~

::::::':

::~::~::

· · · I · . · ' · '.- · ·

.

.

· · · ·

· . . .... ....
~ ~

,
. . ~ ." ~
~ ~

~ '.' "

.. ..
~

I J ··

~...

...... ...... . . ..... . .... .

. . . . . . . Ow,"
~... ~

· ......... . ..... . · . · . . ..... · .. . · ... ..... · . -" ........ . . '. '. ...... ."
~

.. : : : :-:.: ~:
"

'

.
.

~.

· · ·

... .. .. . .... ....... ..
~

~

,

",

~

"

....

. ...

'

......

~ ~

.150 ~-,--"""""''''''''''''&J--'-''''''''''.u..;.;iw--..L-i....i...i..i..i..i..i.L.----i..-i.....iu....wu.i.L--i.--'-.i.....i...i..i.i.i.I..---''--i...'',.i... .......
101
'

· · t · .··· · . . .. .. ,: : : :::::
~

'

...... ....... . -.. .
~

. .... ,..... : : : ::':::

'i..i..i.iJ' *.

~.

102

,

103

10· . Frequency (radls)

lOS

108

, Fig. 5.7 Frequency response of the PLL for dividing factor N=20. 5.3 PLL Loop Simulation
,
"

The whole loop was simulated in CADENCE environment for both extremes of the range and for the frequencies in between. A 2pF capacitive load has been considered

.

at the output of the PLL in order to consider the output load effects in the simulation.
Al~fF

capacitor has been added for simulating the routing capacitance effect. The

results of the simulation are discussed next. Figure 5.8. shows the VCO output. We can see that the output, as expected, is a rail-torail signal Figure 5.9 is the output of the charge-pump and the low-pass filter. This voltage is the base of comparison. We can see that the system decides on the number of deiay-cells chains twice before the system reached to a lock condition. Fig. 5.1 0 shows, the output signal ofPLL for 1GHz frequency. Shown in Fig. 5.11 is the dividers response. One can see that the duty cycle of the synchronous divider 81 ,','

output is riot 50%. However, as" the PFD responds to the rising edge this imperfect "duty cycle doesn't cause any problem. "Fig. ~.12 shows" the jitter of the system for IOmV (rms) random supply noise. It is attained by sweeping the output by a sawtooth signal generator. For 1GHz frequency

.

tl;1e amount of jitter is seen to be Ips peak-to-peak. "
"

Finally, Fig~ 5.13 shows the phase difference between input and output signals in the lock condition. It should be mentioned that the input pad delay has not been

considered in this measurement.

82

3.0

\

>

....

,~ I \

/\

I\ \ j' \ / \ ) \.
1\
I
\.
.

/

J\

"'/ "-./

\

-.../

\ . ..
'--.

\ I \\ I \' I \ \ JI \ . J\.)I \ ."
\ \
'-

\

i

1'\

~I

...-I

\

'-../

"'--.,

'-./

I

9. i420v

Fig. 5.8 VCO output signal.

83

"

t.

Fig. 5.9 The output of the charge-pump and the low-pass filter.

84

·

- t.0

.~~~---'--l........~~_ _ _~:::,-,---,--,="=,~~,"",,---::,-:~,----,-=-=,~~ 7,64!)~h~ 7.&460u '1,f,'4-7(J:u ! 7:'6~e0'\/ '. ':(.6490v'! 1.6S00u! , 7.6510\) 1.~~:>i3u
;,', 'tim,e.{s) .

Fig. 5.10 The output signal ofPLL for 10Hz.
.
;

85 ;.,

I!l ,

3.<9
2.0

'.
I

r----'
J \
-

--l
I
I
.~.

r

V

1
(
n:

1.0

f).a

t.

I

-I.e

' - - - - - - . l . . j - - _ - - J . . . ._ _ _'-t--_ _.....I.-_ _- - L -_ _ _L . . . - - _ - - - - I

-1..0
.,0

'---.-.............----"-.I.....1-j---..;-~--I...."____..............."_'__'-+'-'-_"_'__"'"'"'--"-'_'__"_...................:-r...........i._l._~~.'___'__~____'_'

.' V:( ../10NC01~!l'·)

Fig. 5.11 The dividers response.

1.

;

86

.,

r
I I

r

!
! !
~

I I i ,
~

t
i-

-

f
, ·
!

iii

I I .

r
!

~

"

I !

~

!
f

t

,
~.

I !
i : 1,2
I

t

..
-1.~
I

----'

~Uij

1,O

2.0

JJ~

>!t,g

!;.

Fig. 5.12 The jitter of the system for lOmV (rms) random supply noise.

87

{.,

Trcnsient i((iSI)OnSe

$,0

(

\

,

tI

\
2,0

\
\

I \
I \

J

J

\

I

{
f

I\
\ !
'I

\

I \: ,,~
, "
, I

I \

I
I

f

1,~

\
,

,

\I
'

\

I ,J
~,

.\\
:;.

'

.\
,

1
...

I
't".

I
"j .....

:\."~

,

,\.,
;

,

'"

1,
- 1.0 .'===_..........-":'"'-.:""".~'.;--_~~....I.,..l...-'-'"-'..... ' ';:-;;"'.:':'A---'-~'~';-;;-'--'-----;;-;:;'.;'.....r..............-'-'...... .";.~'=---;:-.~.;;-::--.........~-:::-::I'. 5.578~1.! !?5.190,1J o.5808u 5,5~n0\.1 fl.5820u 5,5SJ0U5'5840u 5,.5.,850L.1 5.586911

~mrr~~_~~~~~~~_________~I:m~e,l-5~'}~_______________________________

Fig. 5.i3 The phase difference between input and output signals in the lock condition.

5.4 Layout Considerations

PLL has been'laid out in 0.18u technology. In layout design following aspects have
been considered: - In floor planning stage the blocks were arranged in such a way that the routings between different blocks were minimized. 88 ,'"

- Analog blocks and digital blocks were separated and two different supplies were, ,used for them.
.

.

' .

- In choosing the width of the routings of signals and supplies the maximum current (or the worst case) was considered. - Shielding was considered for the VCO and PFD in ord~ to immune these blocks to the noise of other blocks (especially digital blocks). In order to minimize mismatching between the transistors that should be matched, dummy devices were added to isolate, matched transistors.

5.5 Pads, Package and Chip Size
- I/O buffers and Pads ofTSMC library "tpz973g':' have been used for connecting the core to the output. Package no. 68PGA was used for the chip.
.

The chip has 52 pins (13 pins in each side) ,and its total area (including pads)

)

is1.5mm X1.5 mm. The core of the chip occupies O.6X0.6 um2 from which 9% belongs to logic circuit and utilities. VCO layout occupies 0.2%, chafge pump layout occupies 8%, Low-pass filter occupies 10% and PFD and dividers and delay blocks occupies 7%. Comp3:l'ators and reference voltage block occupy 13% and PLL bias circuit occupies 16% of the chip area. TeStability and programmability blocks have - .. occupied the remaining space. Figure 2.10 shows the layout of the chip.
,
,

"

,

"

.

~

89· .

Fig. 5.14 Layout of the PLL core.

5.6 PLL Specifications

The noise of devices has been measured using RF Spectre analysis. The analysis shows the noise is 0.56% p-p An AHDL block power meter inserted in the route of the main supply has measured power dissipation. The simulation shows 11 m W power dissipation for lOOMHz and 17 mW power dissipation for IGHz. Main figures in specification of the PLL are summarized in Table 5.1

Table 5.1 Main figures in the specification of the designed PLL. Supply Frequency Tuning IOOMHz-IGHz Range Less than 1. 5 ps p.p (with lOmVrms
I

3.3V

Jitter random noise) Power Consumption Output Signal VCOGain Extra Outputs for Data 6 Clock Taps with different Phase Offsets Recovery 17mW for IGHz at V DD= 3.3 V Rail-to-Rail digital clock 250MHzJV

Chapter 6
Conclusion
Phase-locked-loops are one of the main blocks in many system on-a chip (SOC)
~ommunication

and lor computation blocks. They are used for jitter reduction, skew

reduction, data recovery and frequency synthesis. Programmable PLLs could be used for clock management in the chips which include many independent elements with different clock rates. The goal was to build a general-purpose wide-range (lOO.MHz - 1GHz) on-chip programmable CMOS PLL which is power-efficient, suitable for low-power design, robust against temperature changes and has a good noise rejection. 6.1 Features of the Designed PLL A simple and robust method was chosen for programmability. In this method the wide-range frequency is partitioned to smaller ranges and these smaller ranges are achieved by changing the driving capability of the voltage-controlled oscillator (VCO). For making the system stable against any temperature change twenty percent
ov~rlap

has been considered between different partitioned ranges. Any sub-circuit that

is not in use will be disabled in order to make the .system power-efficient. The design is suitable for low-power applications when there is limitation on supply voltage. A logic circuit has been added for providing on-chip programmability. Using this method, the system could decide how much driving capability is required for the desired frequency. Quality performance of the system is due to the novel architecture chosen for the

yeo.

This architecture along with a compensating circuit (mapper) provides a VCO

with a linear transfer function with a constant low-gain for all frequency ranges. This

92

makes the system less prone to noise. Also, this architecture benefits from fast switching for reducing the noise [6]. The compensating circuit adds an extra

advantage which makes the system more robust against temperature changes. Choosing differential architectures for all sub-blocks (except for the VCO which has a pseudo-differential architecture) provided better noise rejection. The designed system is a general-purpose PLL which provides a rail-to-rail digital clock signal from a 50-MHz reference clock. The design is implemented with 3.3V supply, while the system is capable of handling 1.8V. The output jitter came out to be 1ps P-P for 1GHz output when 10mVrms random noise was injected in the supply line. The power consumption was 11mW for lOOMHz and 17mW for IGHz. This PLL is suitable for both analog and digital technology because the required capacitors were built with transistors and no MIM: capacitor has been used. The supply of the digital sub-blocks is separated from the supply of the analog subblocks in order to block the switching noise to the analog circuits.

6.2 Layout and Post-Layout Simulation
The PLL was laid out in CMOS O.18u technology and was verified for design rules and matching with schematics. The total area was O.6X 0.6 um2 out of which 48% was for programmability and utility blocks. The results of post-layout simulations were in reasonable consistency with those found in the design process.

6.3 Comparison
Table 6.1 shows the simulation results of the implemented PLL along with the results reported for some of the recent wide-range and/or programmable PLLs. The table shows the advantages of the proposed PLL over its counterparts: VCO low gain which is constant over the whole range, VCO linear transfer function, on-chip

programmability and small area.
93

Author

Programming style Programming loading capacitors Programming NO. of inverter stages Enlarging driving capability Programming driving capabilities Programming number of inverters Enlarging Driving capabilities

On-chip Program -mability

VCO Frequency
range

VCOgain

VCO transfer function Linear .but variable

Power Dissipati on mW 3.5 (yCO only)

Supply

Process um

Chip Area mm2

Rhee [5] (yCO only) , Sutoh [10] ,

430MN
No 54M-IG worst case(Diagr
am)

2.5V

0.35

-----

yes

5M-400M

400MN (diagram)

nonlinear Linear

13.7

2V

0.25
i

0.14

I
and
constant 92 3.3V 0.6

Sung [4]

Yes

75M-IG

430MN

1.05

Cben [20] Brynjolfs -on [8]

No

103M1.02G

271MN
370 (worst case)

nonlinear Linear, but variable

4.52

1.8V

0.35

0.16

yes

1.5M-1.8G

8.9 @330M

1.8V

0.18

---

Joe-sbin Lee [9]

yes

150M740M

460MN
(diagram)

linear

53

2.5V

0.25

--0.18

+
Proposed PLL Programming driving capabilities yes

IOOMHzIGHz

Linear 250MHIV

and
constant

17@ IGHz

3.3V

0.18

0.18 (program mability

and
testabilit v)

Table 6.1 Main works on wide-range and lor programmable PLLs and the proposed PLL.

6.4 Suggestions for Future Works The following suggestion could be considered for the next version of the chip. · A band-gap could be designed for 1.8 volt so that the whole system could be implemented with 1.8V supply.

94

·

A regulator could be added to the veo architecture~ as shown in Ingino and Von Koenel work (17], in order to have a better noise rejection.

·

Investigation should be carried out to see if it is possible to have less power consumption without losing the frequency range.

95

References [1] B. Razavi, "Design of Monolithic Phase-Locked Loops and Clock Recovery Circuits - A Tutorial," in Monolithic Phase-Locked Loops and Clock Recovery Circuits, IEEE Press, 1996. [2] B. Razavi Design ofAnalog CMOS Integrated Circuits, McGraw-Hall, 2000.

[3] D. Jones and K. Martin, Analog Integrated Circuit Design, John Wiley and . Sons, 1996. '[4] Hyuk-Jun Sung, Kwang Sub Yoon, Hong Ki Min " A 3.3V High Speed Dual Looped CMOS PLL with Wide Input Locking Range" Proceedings of IEEE Midwest Symposium on Circuits and Systems 9-12 August 1998, pp. 476-479, 1998. [5] W. Rhee, "A Low Power, Wide Linear-Range CMOS Voltage-Controlled Oscillator", Proceedings of the 1998 IEEE International Symposium on Circuits and Systems, 31 May-3 June 1998, Volume 2, pp. 85-88, 1998. [6] L. Dai and R Harjani, "Design of Low-Phase-Noise CMOS Ring Oscillators", IEEE Transactions on Circuits and Systems, 49 (5), May 2002, pp.328-338. [7] I. A.Young, J. K. Greason, and K. L. Wong, "A PLL Clock Generator with 5 to ·110 MHz of Lock Range for Microprocessors", IEEE Journal of Solid-State Circuits, 27 (11), pp. 1599-1607, November 1992. [8] I. BrynJolfson, and Z. Zilic, " A New PLL Design for Clock Management Applications", Proceedings of The 2001 IEEElntemational Symposium on Circuits and Systems, Volume 4, pp. 814-817. [9] J. S. Lee, W. K. Jin, K. S. Lee, M. K. Kim, and Suki, Kim, "A Wide Range PLL for 64X CD-ROM & lOX Speed DVD-ROMs ': IEEE Transactions on Consumer Electronics,46 (3), pp. 487-493, August 2000. [IO} H. Sutoh, K. Yamakoshi, and M. Ino, "A 0.25 urn CMOS/SIMOX PLL Clock Generator Embeded in a Gate Array LSI with 5 to 400 MHz Clock Range", IEEE 1997 Custom Integrated Circuits Conference Proceedings, pp. 41-44, 1997. [11] J. Ingino and V. von Kaenel, "A 4-GHz clock system for a high-performance system-on-a-chip design," IEEE Joumal ofSo lid-State Circuits, 36, (11), pp. 16931698, November 200 1. [12] S. Sidiropoulos, D. Liu, J. Kim, G. Wei, and M. Horowitz, "Adaptive Bandwidth DLLs and PLLs Using Regulated Supply CMOS Buffers" 2000 IEEE Symposium on VLSI Circuits Proceedings, pp. 124-127, June 2000.

96

[13] 1. G. Maneatis and M. A. Horowitz, "Precise Delay Generation Using Coupled Oscillators", IEEE Journal o/Solid-State Circuits, 28 (12), pp. 1273-1282, December 1993. [14] J. Kang and D.-H. Kim, "A CMOS Clock and Data Recovery with Two-XOR Phase-Frequency Detector Circuit", Proceedings o/The 2001 IEEE International Symposium on Circuits and Systems, Volume 4/ pp. 266-269.

[15] C. Lee, K.McClellan, and 1. Choma, A Supply-Noise-Insensitive CMOS PLL with a Voltage Regulator Using DC-DC Capacitive Converter, IEEE Journal 0/ SolidState Circuits, 36, (10), pp.1453-1463, October 2001. [16] A. Djemouai, M. A. Sawall, and M. Slamani, "New Frequency-Locked-Loop Based on CMOS Frequency-to-Voltage Converter: Design and Implementation", IEEE Transactions on Circuits and Systems, 48 (5), May 2001. [17] Y. Moon, D. Jeong, G. Abn, A 0.6-2.5 Gbaud CMOS Tracked 3X OverSampling Transceiver with Dead-Zone Phase Detection for Robust ClocklData Recovery, IEEE, Journal a/Solid-State Circuits, 36 (12), December 2001. [18]] I. Shahriary, G. Des Brisay, S. Avery, and P, Gibson, "GaAs Monolithic PhaselFrequency Discriminator" IEEE GaAs Symposium, pp. 183-86, 1989. [19] D. H. Wolaver, Phase-Locked Loop Circuit Design, Prentice Hall, 1991. [20] O. T.-C. Chen and R R-B. Sheen, "A Power-Efficient Wide-Range PhaseJocked Loop", IEEE Journal 0/ Solid-State Circuits, 37 (1), pp. 51-62, January, 2002. . [21] A. Yukawa, "A CMOS 8-Bit High-Speed NO Converter IC", IEEE Journal 0/ Solid-State Circuits, 8C-20 (3), pp. 775-779, June, 1985. [22] K.-M. Tham and K. Nagaraj, "A Low Supply High PSRR Voltage Reference in C:MOS Process", IEEE Journal 0/ Solid-State Circuits, 30 (5), pp. 586-590, May, 1995. [23] D. R Stephan, Phase-Locked Loops/or Wireless Communications: Digital, Analog and Optical Implementations, Second Edition, Kluwer Academic Publishers, 1998. [24] 1. H. Vincent, "On Some Experiments in Which Two neighboring Oscillatory Circuits Affect a Resonating Circuit, Proceedings of Royal Society, 32, part 2, pp. 8491, 1919-1920, Cited in [23]. [25] E. V. Appleton, "The Automatic Synchronization of Triode Oscillators", Proc. Camb. Phil. Soc. Vol. 21, pp. 231-248, 1922-1923. Cited in [23].

97

[26] C. Travis, "Automatic Frequency Control", Proceedings of the IRE, 23 (10), pp. 1125-1141. Cited in [23].
[27] V. C. Rideout, "Automatic Frequency Control of Microwave Oscillators", Proceedings of the .IRE, 35(12), pp. 767-771, March 1939. Cited in [23].

98

