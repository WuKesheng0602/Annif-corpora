Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2011

Current-mode techniques for UWB frequency synthesizers
Dominic DiClemente
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
DiClemente, Dominic, "Current-mode techniques for UWB frequency synthesizers" (2011). Theses and dissertations. Paper 878.

This Dissertation is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

CURRENT-MODE TECHNIQUES FOR UWB FREQUENCY SYNTHESIZERS

by Dominic DiClemente Bachelor of Engineering, Ryerson University, 2005 A dissertation presented to Ryerson University in partial fulfillment of the requirements for the degree of DOCTOR OF PHILOSOPHY in the Program of ELECTRICAL AND COMPUTER ENGINEERING

Toronto, Ontario, Canada 2011 c Dominic DiClemente 2011

I hereby declare that I am the sole author of this dissertation.

I authorize Ryerson University to lend this dissertation to other institutions or individuals for the pupose of scholarly research.

Dominic DiClemente I further authorize Ryerson University to reproduce this dissertation by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the pupose of scholarly research.

Dominic DiClemente

ii

Abstract
Dominic DiClemente Current-Mode Techniques for UWB Frequency Synthesizers Doctor of Philosophy, Electrical and Computer Engineering, Ryerson University, 2011

This thesis deals with current-mode techniques for ultra-wide band applications. An overview of ultra-wide band (UWB) wireless communications is presented. Two standards for UWB data communications, namely direct-synthesis UWB (DS-UWB) and Multi-band orthogonal frequency division multiplexing (MB-OFDM) UWB are presented. MB-OFDM UWB devices must hop among 14 UWB channels within 9.5 ns, imposing stringent constraints on design of frequency synthesizers. A review of the state-of-the-art frequency synthesizers for MB-OFDM UWB applications is provided. Current-mode phase-locked loops with active inductors and active transformers employed in both loop filters and voltage-controlled oscillators are proposed and their performance is analyzed. Current-mode phase-locked loops decouple the PLL dynamic range from the scaling down of the supply voltage. An active-inductor VCO with both coarse and fine frequency adjustment, a hybrid VCO with a step-down passive transformer loaded with an active inductor, and a hybrid VCO with a step-up passive transformer loaded with a varactor are proposed and their performances are analyzed. These VCOs obtain wide frequency tuning ranges without relying on iii

switched back networks. To meet the timing constraint of UWB frequency synthesizers, Current-mode techniques are further developed for UWB frequency synthesizers. An active inductor with a bank of switched capacitors is proposed to provide fast locking. The bank of switched capacitors eliminates the frequency acquisition locking time of the frequency synthesizer, allowing 9.5 ns phase locking time. The proposed current-mode phase-locked loops, active-inductors oscillators and hybrid oscillators were designed and implemented in TSMC-0.18µm and IBM-0.13µm CMOS technologies.

iv

Acknowledgments
First and foremost I would like to thank my advisor Dr. Fei Yuan for his guidance and inspiration during my tenure at Ryerson. His professionalism and enthusiasm during our weekly meetings always spurred me on to improve my work and provide inspiration to my research. I would also like to thank him for providing me with the freedom and atmosphere that allowed me to flourish and to take many tangents in my studies. I also thank Dr. Raahemifar for providing an unequaled enthusiasm for teaching and education during my undergraduate studies and Professor Mike Kassam for providing me with an opportunity to grow and mature as an educator. I am also indebted to support staff Jason Naughton, Dan Giannitelli and Jim Koch. They had always been a source of last minute technical support, all too often being called upon to solve software problems with looming deadlines. Their light hearted attitudes and expertise have always been reassuring during panicked moments. I would also like to take the opportunity to thank my fellow students in the MCS group and other students who shared ENG313 lab with us. A special thank goes to Adrian Tang who has always been a wealth of knowledge and uncontainable energy, Nima Soltani, for being a valuable friend during long hours in the lab, and Tarek Khan, for his correspondence with CMC and MOSIS, as well as being a friend and valued colleague. Most importantly, I thank my family, their love and support provided me the opportunity to continue my education for as long as I wanted. v

Contents
Abstract . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Acknowledgments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 Introduction 1.1 1.2 1.3 1.4 Ultra Wide-Band . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Objectives . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Contributions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Thesis Organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii v 1 1 7 7 9 11

2 Frequency Synthesizers for Ultra WideBand devices 2.1 2.2 2.3 2.4 2.5 2.6 2.7

Multi-Band OFDM UWB . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 Lock Time and Bandwidth Requirements of UWB . . . . . . . . . . . . . . 16 Delay-Locked Loop Frequency Synthesizer . . . . . . . . . . . . . . . . . 18 Miller Divider Based Frequency Synthesizer . . . . . . . . . . . . . . . . . 19 Direct Synthesis Frequency Synthesizers . . . . . . . . . . . . . . . . . . . 21 Performance Comparison . . . . . . . . . . . . . . . . . . . . . . . . . . . 23 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24 27

3 Current-Mode Phase Locked Loops 3.1

Low-Voltage Voltage-Mode PLLs . . . . . . . . . . . . . . . . . . . . . . 29 vi

3.2

Current-Mode Filtering . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31 3.2.1 3.2.2 Current-Mode Loop Filter . . . . . . . . . . . . . . . . . . . . . . 31 Gyrator-C Floating Active Inductors . . . . . . . . . . . . . . . . . 33

3.3

Current-Controlled Oscillator . . . . . . . . . . . . . . . . . . . . . . . . . 35 3.3.1 Replica Bias for Active Inductor VCOs . . . . . . . . . . . . . . . 36

3.4

Loop Dynamics of Active-Inductor based Current-Mode PLL . . . . . . . . 39 3.4.1 3.4.2 3.4.3 Type I Current-Mode PLLs . . . . . . . . . . . . . . . . . . . . . . 40 Type II Current-Mode PLLs . . . . . . . . . . . . . . . . . . . . . 41 Non-ideal Cases . . . . . . . . . . . . . . . . . . . . . . . . . . . 42

3.5 3.6 3.7

Phase Noise of Current-Mode Active Inductor PLLs . . . . . . . . . . . . . 44 Simulation Results of Active-Inductor Current-mode PLL . . . . . . . . . . 45 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49 51

4 Current-Mode Phase Locked Loops with Active Transformers 4.1

Current-Mode Filtering . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51 4.1.1 Current-Mode Loop Filter with Transformers . . . . . . . . . . . . 51

4.2

CMOS Active Transformers . . . . . . . . . . . . . . . . . . . . . . . . . 53 4.2.1 4.2.2 4.2.3 4.2.4 4.2.5 4.2.6 4.2.7 Self-inductance of Primary Winding . . . . . . . . . . . . . . . . . 53 Self-inductance of Secondary Winding . . . . . . . . . . . . . . . 54 Mutual inductance from primary to secondary windings . . . . . . 55 Current-Mode Loop Filter Using Active Transformers . . . . . . . 56 Quality Factors . . . . . . . . . . . . . . . . . . . . . . . . . . . . 58 Noise of Active transformers . . . . . . . . . . . . . . . . . . . . . 59 Active Transformers with Multiple Windings . . . . . . . . . . . . 61

4.3 4.4

Loop Dynamics of Transformer Based Current-Mode PLLs . . . . . . . . . 61 Phase Noise of Current-Mode Active Transformer PLLs . . . . . . . . . . 63 vii

4.5 4.6

Simulation Results of Active-Transformer Current-Mode PLL . . . . . . . 64 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 68

5 Wide-Band VCOs for Frequency Synthesizers 5.1 5.2 5.3 5.4 5.5 5.6

Wide-band VCOs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69 Active-Inductor Ultra Wide-band VCO . . . . . . . . . . . . . . . . . . . . 71 Wide-Band Hybrid VCO with Active-Inductor Load . . . . . . . . . . . . . 79 Wide-Band Hybrid VCO with Varactor Load . . . . . . . . . . . . . . . . 86 Performance Comparison . . . . . . . . . . . . . . . . . . . . . . . . . . . 94 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97 99

6 UWB Current-Mode Frequency Synthesizer 6.1 6.2 6.3 6.4 6.5 6.6

Quick Hopping for UWB Frequency Synthesizer . . . . . . . . . . . . . . 100 Wide-Band VCO . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103 Bang-Bang Phase Detector . . . . . . . . . . . . . . . . . . . . . . . . . . 104 Injection locked Oscillator for Frequency Division . . . . . . . . . . . . . . 105 Simulation Results . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 107 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109 111

7 Conclusions 7.1 7.2

Thesis Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111 FUTURE RESEARCH . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113

Appendix A Publications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114 Appendix B Glossary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116 viii

Bibliography

118

ix

List of Tables
1.1 2.1 2.2 2.3 2.4 3.1 Parameters of commercially available wireless networks [2]. . . . . . . . . 2

Subcarriers of MB-OFDM UWB. . . . . . . . . . . . . . . . . . . . . . . 13 Data-rates of MB-OFDM. . . . . . . . . . . . . . . . . . . . . . . . . . . 13 Time-Frequency Codes for a Group 1 MB-OFDM hopping sequence. . . . 14 Comparison of state-of-the-art UWB frequency synthesizers. . . . . . . . . 25 Effect of VDD fluctuation on the inductance of active inductors with and without replica biasing. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40

3.2 5.1 6.1 6.2

Corner analysis results of the PLL (post-layout). . . . . . . . . . . . . . . . 49 Comparison of wide band VCOs . . . . . . . . . . . . . . . . . . . . . . . 98 Locking range of ILO harmonics . . . . . . . . . . . . . . . . . . . . . . . 107 Comparison of state-of-the-art UWB frequency synthesizers. . . . . . . . . 110

x

List of Figures
1.1 1.2 An example of an UWB wireless personal area network. . . . . . . . . . . Spectral allocations showing the proposed UWB and existing narrow-band interferers. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.3 FCC specified spectral mask for indoor UWB commercial devices, severely limiting the output spectrum outside of 3.7-10.3 GHz. . . . . . . . . . . . . 2.1 Time-frequency kernel example code used for multiple user access as well as high channel efficiency. . . . . . . . . . . . . . . . . . . . . . . . . . . 15 2.2 2.3 DLL based frequency synthesizer [14]. . . . . . . . . . . . . . . . . . . . . 18 Architecture of [15] showing a fixed synthesizer and modified Miller frequency divider. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20 2.4 2.5 2.6 Miller frequency divider. . . . . . . . . . . . . . . . . . . . . . . . . . . . 20 Modified Miller divider [15]. . . . . . . . . . . . . . . . . . . . . . . . . . 21 UWB receiver using multiple RF paths tuned to each of their respective bands [26]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22 2.7 2.8 3.1 3.2 MB-OFDM frequency synthesizer based on direct synthesis [28]. . . . . . 23 6 5 4

The output spectrum of [22] showing spurs . . . . . . . . . . . . . . . . . 24 Configuration of type II voltage-mode PLLs. . . . . . . . . . . . . . . . . . 27 Configuration of current-mode phase-locked loops. . . . . . . . . . . . . . 28 xi

3.3 3.4 3.5 3.6 3.7

Configuration of a supply regulated PLL. . . . . . . . . . . . . . . . . . . 29 Configuration of a supply regulated VCO. . . . . . . . . . . . . . . . . . . 30 Configuration of a differentially tuned PLL. . . . . . . . . . . . . . . . . . 31 Characteristics of current-mode loop filter. . . . . . . . . . . . . . . . . . . 32 (a) Configuration of floating gyrator-C active inductors. Go1 and C1 are the output conductance of transconductor 1 and the input capacitance of transconductor 2, respectively. (b) Bod´ e plots of gyrator-C active inductors. 34

3.8

Fully differential gyrator-C active inductor circuit. Circuit parameters : W1,6 = 5µm, W2,3,7,8 = 0.5µm, W4,5 = 100µm, and W9,10 = 0.5µm. L = 0.18µm for all transistors. - Dependency of the inductance of the

floating active inductor on the biasing voltage Vb2 at 3 GHz.  - Largesignal behavior of the floating active inductor at 3 GHz. . . . . . . . . . . . 35 3.9 (a) Current-controlled oscillator with current reuse active inductors. Circuit parameters : W1 = 10µm,W2 = 3µm, W34 = 10µm,W56 = 5µm,W7 = 5µm,Ib = 1 mA,Ib2 = 100µA,Vb = 1 V,Vb2 = 0.2 V. (b) Frequency tuning range of the current-controlled oscillator . . . . . . . . . . . . . . . . . . . 36 3.10 Fully differential gyrator-C active inductor with replica biasing. . . . . . . 37 3.11 Distribution of the inductance of the active inductor without replica biasing due to process variations (500 samples in Monte Carlo simulation) . . . . . 38 3.12 Distribution of the inductance of the active inductor with replica biasing due to process variations (500 samples in Monte Carlo simulation) . . . . . 39 3.13 Current-mode filters for type I and type II current-mode PLLs. . . . . . . . 40 3.14 Phase diagram for type I current-mode PLLs. . . . . . . . . . . . . . . . . 41 3.15 Phase diagram for type II current-mode PLLs. . . . . . . . . . . . . . . . . 41 3.16 Phase diagram for type II current-mode PLLs with additional inductor. . . . 42 3.17 Phase noise analysis of Type I current-mode PLLs in the lock state. . . . . . 44 xii

3.18 Simplified schematic of the proposed current-mode PLL. . . . . . . . . . . 45 3.19 Layout of the proposed current-mode PLL. . . . . . . . . . . . . . . . . . 46 3.20 Dependence of the output current of current-mode loop filter on the duty cycle of the input voltage (post-layout). . . . . . . . . . . . . . . . . . . . 46 3.21 Effect of the fluctuation of supply voltage on the cut-off frequency of the current-mode loop filter (post-layout). . . . . . . . . . . . . . . . . . . . . 47 3.22 Effect of the fluctuation of the supply voltage on the oscillation frequency of CCO (post-layout). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48 3.23 Control current of the proposed current-mode PLL (post-layout). . . . . . . 48 3.24 Simulated Phase noise of the proposed current-mode PLL (post-layout). . . 49 3.25 Effect of VDD fluctuation on the phase noise of the proposed current-mode PLL at 1MHz frequency offset (post-layout). . . . . . . . . . . . . . . . . 50 4.1 Configuration of current-mode phase-locked loops using transformer filtering. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52 4.2 4.3 Current-mode loop filter using passive transformers. . . . . . . . . . . . . . 53 (a) Wu's current-reuse active inductors. (b) Proposed CMOS active transformers. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54 4.4 Simulated self-inductance of the primary and secondary windings and mutual inductance from the primary winding to the secondary winding of the active transformer. Circuit parameters : W = 50µm, L = 0.18µm for all transistors, Jp , Js = 150µA, Vb1 = 0.8 V, and Vb2 = 0.2 V. . . . . . . . . . 56 4.5 Current-mode loop filter. pMOS active transformer: Vb1 = 1.2 V, Vb2 = 1.2 V, Vb3 = 1.3 V. nMOS active transformer: Vb1 = 0.7 V, Vb2 = 0.7 V, Vb3 = 0.5 V. R = 6k . L = 0.18µm for all transistors. The numbers in the figures are transistor width. . . . . . . . . . . . . . . . . . . . . . . . . 57 xiii

4.6

Simulated dependence of the output current of active-transformer loop filter on the duty cycle of the input voltage. . . . . . . . . . . . . . . . . . . . . 58

4.7

Simulated sensitivity of the bandwidth of active-transformer loop filter to supply voltage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59

4.8

The dependence of loop filter bandwidth on replica bias reference voltage at process corners and in nominal conditions. . . . . . . . . . . . . . . . . 60

4.9

Noise equivalent circuit of active transformer. . . . . . . . . . . . . . . . . 61

4.10 Active transformers with multiple windings. . . . . . . . . . . . . . . . . . 62 4.11 Block diagram with noise sources of the PLL in lock state. . . . . . . . . . 62 4.12 Layout of the PLL. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 4.13 Simulated control current of the PLL (post-layout). . . . . . . . . . . . . . 66 4.14 Simulated phase noise of the PLL. . . . . . . . . . . . . . . . . . . . . . . 67 5.1 5.2 5.3 5.4 5.5 Schematic of a wide-band VCO using a switched capacitor bank [66]. . . . 70 Schematic of a wide-band VCO using a switched inductor bank [68]. . . . . 71 VCO tuning curves of a 1-bit switched capacitor bank [69]. . . . . . . . . . 72 Schematic of Lu at. al active inductor VCO. . . . . . . . . . . . . . . . . . 73 Schematic of the proposed ultra wide-band VCO with dual tuning mechanisms. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74 5.6 5.7 5.8 5.9 Dependence of the oscillation frequency of VCO on Vb1 . . . . . . . . . . . 75 Dependence of the oscillation frequency of VCO on Vb2 . . . . . . . . . . . 76 Dependence of the phase noise of VCO on Vb2 and nMOS size. . . . . . . . 77 Layout of VCO. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78

5.10 Waveform of the output voltage of VCO. . . . . . . . . . . . . . . . . . . . 78 5.11 Simulated phase noise of VCO. . . . . . . . . . . . . . . . . . . . . . . . . 79 5.12 Ideal transformer loaded with an active inductor. . . . . . . . . . . . . . . . 80 xiv

5.13 Noise analysis of noiseless passive transformer loaded with a noisy active inductor. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82 5.14 Quality factor analysis of passive transformer loaded with an active inductor. 84 5.15 (a) Proposed VCO. (b) Spiral inductor VCO. (c) Active inductor VCO. . . . 85 5.16 Simulated frequency tuning of proposed VCO. . . . . . . . . . . . . . . . 86 5.17 Simulated phase noise of spiral inductor VCO, active inductor VCO, and proposed VCO (labeled Hybrid VCO). . . . . . . . . . . . . . . . . . . . . 87 5.18 Layout of proposed VCO. . . . . . . . . . . . . . . . . . . . . . . . . . . . 88 5.19 Ideal transformer loaded with a varactor. . . . . . . . . . . . . . . . . . . . 90 5.20 Noise analysis of noiseless passive transformer loaded with a noisy secondary circuit. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91 5.21 Quality factor analysis of transformer loaded with varactor. . . . . . . . . . 92 5.22 Schematic of transformer VCO with reflected capacitance frequency tuning. Circuit parameters : W1,2 = 60µm, W3,4 = 80µm, tail current source : nMOS transistor with W = 250µm L = 2µm, V=1V. The buffer is a differential pair with a balun load, the nMOS transistors are the same size as the core ones, and the balun is 9.8 nH. Varactor : L = 2µm, W = 64µm. 5.23 Simulated frequency tuning of VCO with varactor loading the secondary and primary windings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94 5.24 Phase noise of VCO with varactor loading the secondary and primary windings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95 5.25 Power consumption of VCO with varactor loading the secondary and primary windings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 95 5.26 Phase noise plot of the proposed VCO. . . . . . . . . . . . . . . . . . . . . 96 5.27 Layout of proposed VCO. . . . . . . . . . . . . . . . . . . . . . . . . . . . 96 5.28 Configuration of the transformer used in the hybrid VCO. . . . . . . . . . . 97 xv 93

5.29 Die photo of the transformer used in the hybrid VCO. . . . . . . . . . . . . 97 6.1 6.2 6.3 Architecture of a frequency synthesizer utilizing the quick hopping scheme. 100 Schematic of proposed Mixer for frequency translation. . . . . . . . . . . . 101 CCO tuning curve showing the UWB sub-channels including the locking range of the ILO. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102 6.4 6.5 Final topology of the current-mode UWB frequency synthesizer. . . . . . . 103 Schematic of transformer VCO with reflected capacitance frequency tuning. Circuit parameters : W1,2 = 60µm, W3,4 = 80µm, tail current source : nMOS transistor with W = 250µm L = 2µm, V=1V. The buffer is a differential pair with a balun load, the nMOS transistors are the same size as the core ones, and the balun is 9.8 nH. Varactor : L = 2µm, W = 64µm. 104 6.6 Simulated frequency tuning of VCO with varactor loading the secondary and primary windings. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105 6.7 6.8 6.9 Phase noise plot of the Wide-Band Hybrid VCO with Varactor Load. . . . . 105 Schematic of bang-bang phase detector. . . . . . . . . . . . . . . . . . . . 106 Output voltage of Bang-Bang phase detector. . . . . . . . . . . . . . . . . 106

6.10 Schematic of proposed ILO. . . . . . . . . . . . . . . . . . . . . . . . . . 107 6.11 Locking transient of ILO. . . . . . . . . . . . . . . . . . . . . . . . . . . . 108 6.12 Layout of proposed ILO. . . . . . . . . . . . . . . . . . . . . . . . . . . . 108 6.13 Locking characteristics of the proposed UWB Current-mode frequency synthesizer. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 109

xvi

Chapter 1 Introduction
With the explosive growth of the popularity in the unlicensed 2.4 GHz Industrial, Scientific and Medical (ISM) band, the demand for wireless connectivity in electronic devices is ever increasing. High quality multimedia require high data rates in addition to a better Quality of Service (QoS). When the Federal Communications Commission (FCC) created the ISM band they allocated 80 MHz centered at 2.4 GHz allowing for data rates up to 100 Mb/s. The continuous demand for better video and audio quality requires higher data rates than the ISM band can provide. With the advent of digital televisions on the horizon, existing wireless standards become inadequate for the required data rate of 25 to 935 Mb/s [1]. Current wireless standards cannot support the data rates of real-time high-definition videos due to limited bandwidth. Table 1.1 tabulates existing wireless standards and their data rate parameters.

1.1 Ultra Wide-Band
The maximum capacity of a channel is defined by the Shannon-Hartley theorem, 1

Table 1.1: Parameters of commercially available wireless networks [2].

Protocol Frequency (GHz) 802.11a 5 802.11b 2.4 802.11g 2.4 802.11n 2.4/5 802.11y 3.7

Data Rate (Mb/s) 54 11 25.8 54 54

Throughput (Mb/s) 23 4.3 19 74 23

Range (m) 35 38 38 70 50

C = W log2 (1 + SNR),

(1.1)

where C is the theoretical channel capacity limit, W is the bandwidth of the channel, and SNR is the signal-to-noise ratio of the channel. To increase the channel capacity two options exist. The first is to increase SNR, but this is limited by the noise of electronic circuits and propagation media. The second option is to increase the channel bandwidth. In 2002, the FCC approved the operation of certain types of wireless devices utilizing ultra wide-band technologies for commercial use. Ultra wide-band systems differ from traditional narrow-band systems by employing low-power high-bandwidth signals in place of high-power low-bandwidth signals. The reduction in the signal power reduces the SNR, but the channel capacity is increased due to the substantial bandwidth increase. The first transmission of an ultra wide-band signal was in fact the first wireless transmission and dates back to Marconi in 1890 with a spark gap generator. The spark gap generator produces a very narrow pulse that has a very large bandwidth due to the timefrequency duality (a narrow pulse in the time domain translates to a large bandwidth in 2

the frequency domain). Ultra wide-band systems continued to be developed in radar systems where narrow pulses allow for the accurate distance measurement of aircrafts. Ultra wide-band systems also found use in military communications due to the difficulty in the detection and reception of very narrow pulses. Meanwhile narrow-band systems prospered in the commercial market due to their lower cost and ease of implementation. With the narrow bandwidth used in traditional systems the data rates were severely limited. This gave rise to a renewed interest in ultra wide-band technology for commercial applications. The FCC proposed the largest frequency allocation spanning from 3.1 GHz to 10.6 GHz to be called 802.15.3 UWB. The applications of UWB include [3]: · Wireless Personal Area Networks (WPANs) - Wireless personal area networks allow the high-speed transmission of signals up to a maximum distance of two meters. An example of WPAN is shown in Fig.1.1, consisting of a multi-media system that allows HDTV signals to be shared between cable/sat set top boxes, HD ready televisions, audio systems, Blu-ray DVD players, and personal computers all without wires. · Sensor Networks - The desired characteristics of any UWB device are a low fabrication cost, low complexity and low power consumption. With these three attributes it is advantageous to create an array of transceivers that allow for accurate positioning. A transducer or other sensors can be included in the transceiver to allow for an array of measurements to be taken. An example of an UWB sensor network is the tracking of participants in an endurance race, which allows automatic time tracking and remote heart beat monitoring of participants. · Imaging Systems - Similar to sensor networks the ultra short pulses that define the UWB can be used for imaging due to a large penetration depth at UWB wavelengths. 3

Figure 1.1: An example of an UWB wireless personal area network.

Imaging systems can allow rescuers at the scene of a natural disaster to locate victims without wasting time to dig or endanger the rescuers themselves.

· Vehicular Radar Systems - A leading cause of death in North America is car collisions. By using UWB devices as an automated radar warning system a warning tone can be emitted whenever a car or an object approaches the vehicle alerting or applying the breaks automatically.

UWB was the first frequency allocation to span over existing wireless standards. The proposed frequency spectrum of UWB and the existing standards are shown in Fig. 1.2. Since the existing standards cannot be changed, the FCC placed stringent restrictions on UWB devices. Any UWB "device may not cause harmful interference, and must accept 4

PCS Band Marine Radar 802.11a 5.47-5.725

ISM Band

WiMax 3.4-3.8

UWB
900MHz 2.4GHz 3.1GHz 10.1GHz

Figure 1.2: Spectral allocations showing the proposed UWB and existing narrow-band interferers.

any interference received, including interference that may cause undesired operation."1 A harmful interference is defined as "interference that ... seriously degrade, obstruct or repeatedly interrupts a radio communication service."2 To ensure that UWB devices do not interfere with existing networks under any circumstance UWB devices have severely limited power to transmit. The spectral mask defined by the FFC is shown in Fig. 1.3 [4]. Outside of the UWB spectrum the power must not be greater than -75 dBm/MHz. The small signal power of the GPS signal places perhaps the most stringent power restriction on UWB devices in this spectrum. GPS is a network consisting of many satellites used to send time signals to receivers for accurate positioning. The attenuation caused by traveling through the atmosphere results in small signal power that is easily corrupted by other devices. The UWB spectral mask allows for power transmission of -41.3 dBm/MHz in-band, this low power spectrum ensures that it will not cause interference to existing narrow-band systems sharing part of the same spectrum (In-band interferers). In-band interferers can

1 2

FCC 47 C.F.R. Sec 15.5(b). FCC 47 C.F.R. 1.907, Sec 2.1.

5

-40

-45

-50

UWB EIRP Emission Level in (dBr)

-55

-60

-65

-70

-75

2

4

6

8

10

12

Frequency in (Ghz)

Figure 1.3: FCC specified spectral mask for indoor UWB commercial devices, severely limiting the output spectrum outside of 3.7-10.3 GHz.

cause interference in UWB devices due to their large signal that may saturate amplifiers and other RF components. As a comparison, cellphones operate at transmission power of +30 dBm/MHz, which is ten million times greater than that of UWB signals. The small signal power of UWB will mean a very low SNR ratio. Recalling from the Shannon-Hartley capacity theorem, a low SNR can be compensated by large bandwidth to maintain the same channel capacity. Out-of-band interferers can also cause interference even though they do not share the same spectrum. This is due to the common practice of using non-linear power amplifiers that create harmonic components inside the UWB spectrum [5] . 6

1.2 Objectives
The objective of this thesis is to develop current-mode techniques and circuits for application in ultra wideband. The current-mode techniques will be applied to PLLs and frequency synthesizers to combat the following challanges: · Integrability: The proposed current-mode techniques should have less reliance on on-chip passive components. On-chip passive components add additional masking layers and expense. Passive components also have high tolerances which require digitally assisted analog blocks. · Wide frequency Tuning range: VCOs should have a frequency tuning range over 30% without relying on switched bank networks. With a large frequency tuning range the current-mode frequency synthesizer can be applied to new wireless standards that rely on spread spectrum techniques or multi-standard radios. · Quick Hopping: The MB-OFDM UWB quick channel hopping scheme has a 9.5 ns guard time. This short quard time makes it impractical to use integer frequency synthesizers, because it would require a closed loop bandwidth of several gigahertz. The proposed current-mode frequency synthesizer should be able to lock in under 9.5 ns without resorting to direct frequency synthesis.

1.3 Contributions
In this thesis, several current-mode techniques for wideband applications are proposed, and implemented to conform to the objectives stated above. The major contributions of this thesis are: 7

· Current-mode phase-locked loop - The proposed current-mode phase-locked loop decouples control signal dynamic range from the scaling of the supply voltage of CMOS technologies. In voltage-mode PLLs the dynamic range of the control signal is limited to the supply voltage, a reduction in the dynamic range will require a higher VCO gain. The increased VCO gain will result in a higher tolerance and increased noise response.

· Active Inductor and active transformer current-mode filtering - The inductance required for current-mode PLLs makes passive on-chip spiral inductors impractical, requiring active circuits to mimic inductance. Active inductors and active transformers previously used for bandwidth enhancement are used for current-mode filters.

· Wideband Oscillators - This thesis will propose three wideband oscillators. The three oscillators are capable of frequency tuning ranges of over 30% without using switched bank networks. Without relying on switched bank networks, along with the complexity and problems associated with a discontinuous frequency tuning curve are avoided.

· Quick hopping scheme - The 9.5 ns locking time of the MB-OFDM UWB channel hopping scheme makes it impossible to use traditional PLL based frequency synthesizers. This thesis proposes using a deterministic frequency hopping scheme to allow a PLL to lock in the required time. The quick hopping scheme eliminates the frequency acquisition time required by PLL based frequency synthesizers. By only requiring a phase lock the proposed frequency synthesizer is able to lock frequency and phase in the required time. 8

1.4 Thesis Organization
Chapter 2 (Frequency Synthesizers for Ultra WideBand devices) provides a brief introduction to Multiple-Band OFDM UWB devices. The locking time challenges of MB-OFDM UWB frequency synthesizers are explored. State-of-the-art UWB frequency synthesizers including a DLL based frequency synthesizer, a modified miller frequency divider and direct synthesis are introduced. Performance comparison of published MB-OFDM frequency synthesizers is included at the end of the chapter. Chapter 3 (Current-Mode Phase Locked Loops) introduces modern techniques for battling the problem of supply scaling in voltage-mode PLLs. Current-mode filtering will be used to replace voltage-mode filtering. The inductance of the current-mode filter will be implemented using active inductors. A detailed analysis of active inductors will follow. Closed-loop expressions for current-mode PLLs are derived. The phase noise of current-mode PLLs is investigated. The simulation results of an active inductor based current-mode PLL are provided. Chapter 4 (Current-Mode Phase Locked Loops with Transformers): introduces the concept of current-mode filtering using transformers. The inductance of the transformer will be implemented using active inductors. A detailed analysis of the winding inductance, mutual inductance, noise, and multiple windings is provided in the chapter. Closed-loop expressions for the active transformer based current-mode PLLs are derived. The phase noise of current-mode PLLs is also investigated. The simulation results of the transformer current-mode are presented. Chapter 5 (Wide-Band VCOs for Frequency Synthesizers) starts with a brief introduction to the existing wide band VCOs that utilize switched banks to increase the frequency tuning range. This chapter introduces three new wideband VCOs that do not 9

use switched networks. An active inductor that provides large frequency tuning range is investigated. A hybrid oscillator that utilizes the superior phase noise performance of a passive transformer and the wide frequency tuning range of an active inductor is developed. A modified hybrid oscillator that uses the impedance scaling property of a passive transformer to increase the frequency tuning range of varactors is created. A comparison of the three presented wide band oscillators and existing wide band oscillators that use switched banks is provided. Chapter 6 (Current-Mode Frequency Synthesizer UWB) introduces a current-mode frequency synthesizer for MB-OFDM UWB. A quick hopping scheme that will enable the frequency synthesizer to hop within 9.5 ns is developed. The frequency synthesizer will utilize an ILO as the frequency divider. By forcing the CCO's oscillation frequency to the different regions of the frequency tuning curve the ILO will lock to different UWB channels. Simulation results and a comparison to existing UWB frequency synthesizers are provided. Chapter 7 (Conclusions) Summarizes the contributions of this research and suggests the future directions of research on wideband devices.

10

Chapter 2 Frequency Synthesizers for Ultra WideBand devices
This chapter starts with a brief introduction of Multiple-Band OFDM UWB. Section 2 describes the locking time challenges of MB-OFDM UWB frequency synthesizers. Section 3 introduces DLL based frequency synthesizer for UWB devices. Section 4 introduces a modified miller frequency divider used as an UWB frequency synthesizer. Section 5 introduces direct synthesis, including both parallel synthesis and single side-band mixing. Section 6 is a performance comparison of published MB-OFDM frequency synthesizers. The chapter is concluded in Section 7. Two proposals for the adoption of an UWB standard were presented in [6] [7]. The first is called Direct Sequencing Ultra Wide-band (DS-UWB) and uses classical ultra wideband techniques. DS-UWB is a carrier-less modulation scheme. Unlike traditional narrow-band wireless standards that modulate a base-band signal by a carrier, the base-band is applied to shaped pulses. Time and frequency have an inversely proportional nature, i.e. the narrower a pulse in the time domain the larger the bandwidth it will occupy in the frequency domain. 11

By taking the advantage of UWB's large bandwidth the resulting pulses are ultra narrow in width, allowing for a high data-rate. The pulses can be modulated using traditional modulation techniques such as pulse position modulation or pulse amplitude modulation. DS-UWB devices have the advantage of simple RF front ends due to the absence of a carrier. Synchronization, however, is difficult due to the requirement of near perfect phase alignment with the receiver's correlators. The second proposal is called Multi-Band Orthogonal Frequency Division Multiplexing Ultra WideBand (MB-OFDM UWB). An ultra wide-band signal is defined as a signal with fractional bandwidth greater than 0.2. Fractional bandwidth is defined as [8] FH - FL
F H +F L 2

Fractional Bandwidth =

,

(2.1)

where FH and FL are the upper and lower boundaries of the frequency range over which 90% of the signal energy is contained, respectively. An UWB fractional bandwidth of 0.2 translates into a bandwidth of 500 MHz. Instead of trying to utilize the entire UWB band for a single device, MB-OFDM UWB divides the UWB band into 14 bands with equal channel width of 528 MHz. MB-OFDM UWB uses more traditional wireless techniques to effectively combat multipathing.

2.1 Multi-Band OFDM UWB
Multi-Band OFDM UWB consists of 14 bands, each has 528 MHz bandwidth. Each band has 128 OFDM subcarriers. The characteristics of 128 subcarriers are shown in Table. 2.1. Only 100 of the 128 carriers are used to carry data. 12 of the subcarriers are called pilots and used for synchronization and channel estimation. An additional 10 subcarriers are used as guard carriers. The guard carriers are used on either sides of the data carrying subcarriers 12

Table 2.1: Subcarriers of MB-OFDM UWB.

Number of data subcarriers Number of defined pilot carriers Number of guard carriers Null subcarriers Number of total subcarriers used Subcarrier frequency spacing IFFT/FFT period

100 12 10 6 122 4.125 MHz 242.42 ns

to prevent ICI with other UWB devices. The null carriers are used beside the guard carriers and used to relax the filter requirements. A subcarrier frequency spacing of 4.125 MHz is used. An IFFT/FFT sampling period of 242.42 ns ensures subcarrier orthogonality. Table. 2.2 shows the data rates of MB-OFDM.

Table 2.2: Data-rates of MB-OFDM.

Data Rate (Mb/s) 53.3 80 110 160 200 320 400 480

Modulation Scheme QPSK QPSK QPSK QPSK QPSK QPSK QPSK QPSK

Code Rate 1/3 1/2 11/32 1/2 5/8 1/2 5/8 3/4

Conjugate Time Spreading Yes 2 Yes 2 No 2 No 2 No 2 No 1 No 1 No 1

Coded Bits Per Symbol 100 100 200 200 200 200 200 200

The code rate is the convolutional encoder rate that introduces memory into the system to allow for error detection and correction. At lower data rates the last 50 subcarriers are 13

the conjugate of the upper 50 subcarriers. The use of conjugate subcarriers introduces redundancy that allows for error correction by sending the same bits sequence twice in every OFDM frame. The use of conjugate rather than a simple duplication of the baseband data results in an output signal having no imaginary component. An output signal without an imaginary component reduces the hardware requirement of the transmitter, as only a Q path is required.

Table 2.3: Time-Frequency Codes for a Group 1 MB-OFDM hopping sequence.

TFC 1 2 3 4 5 6

Hopping Sequence 1, 2, 3, 1, 2, 3 1, 3, 2, 1, 3, 2 1, 1, 2, 2, 3, 3 1, 1, 3, 3, 2, 2 1, 2, 1, 2, 1, 2 1, 1, 1, 2, 2, 2

To provide multi-user access and channel diversity an UWB device will hop among multiple channels. Since each mode is composed of 3 channels, a pico-net of UWB devices will hop around using one of the Time Frequency Codes (TFC) shown in Table. 2.3, allowing for three UWB devices to co-exist in the same space. Fig. 2.1 shows an example of an UWB device hopping around using the first TFC code from the Table. 2.3. There is a 9.5 ns interval between hopping from one channel to another during which the transmitter and receiver must be ready to send and receive MB-OFDM signals. After the guard interval there is a 60 ns cycle prefix and finally a 312.5 ns ODFM signal consisting of 128 subcarriers. Due to the ultra wide-band nature of the signals present in MB-OFDM UWB devices 14

Frequency (MHz)

9.5 ns Guard Interval For Tx/Rx

Band #1 3432 MHz Band #2 3960 MHz Band #3 4488 MHz Period 937.5 ns 312.5 ns

Cyclic Prefix 60.0 ns

Time

Figure 2.1: Time-frequency kernel example code used for multiple user access as well as high channel efficiency.

there are unique design challenges that are not encountered in traditional narrow-band wireless systems [9]. Traditionally, phase noise, which is a measure of signal purity is the most important design parameter for frequency synthesizers. With the tight spacing between channels the spectrum of the carrier outside of the channel bandwidth must be sufficiently attenuated. A less important design constraint is the settling time, the time required to hop from one frequency to another. The design constraints of MB-OFDM UWB frequency synthesizers are different from those of frequency synthesizers for narrow-band RF systems. Due to the wide bandwidth of each channel (subcarrier generation is done in the digital domain), phase noise requirement is greatly relaxed. Phase noise requirement for a MB-OFDM UWB frequency synthesizer is only -105 dBc/Hz (plateau) while typical phase noise of narrow-band synthesizers is below -110 dBc/Hz at 1 MHz offset. Unlike traditional phase noise measurements that 15

specify the phase noise at some offset from the carrier such as 100 KHz or 1 MHz, UWB phase noise requirement is based on a plateau. This is because phase noise has a flat profile within the loop bandwidth, and MB-OFDM UWB has a large loop bandwidth. The cutoff point of a phase noise plot where the phase noise is no longer corrected by the closed loop is equal to the closed loop bandwidth of the PLL. A wide bandwidth is required for UWB synthesizers in order to have a short lock time

2.2 Lock Time and Bandwidth Requirements of UWB
MB-OFDM UWB uses spread spectrum by means of an ultra-fast frequency hopping scheme [10][11][12]. In MB-OFDM UWB there is only a 9.5 ns guard period in which the transmitter/receiver must quit transmitting in one channel and be ready to begin transmission in another. The 9.5 ns guard period places a strict constraint on the synthesizer. The setting time, which is the time required for the synthesizer to hop to one frequency, is governed by the synthesizer's 2nd order closed loop expression and is given by [13] ln(tolerance) , n

Ts = -

(2.2)

where  is the damping factor, n is the loop bandwidth, and tolerance is the allowed steady-state error. If we assume a 1% tolerance, a damping ratio
2  , 2

and a loop bandwidth

50 MHz, the required settling time is at least 100 ns. Eq.(2.2) shows that an increase in the loop bandwidth will decrease the settling time. One may wonder whether it is possible to increase the bandwidth until the synthesizer meets the settling time requirement. Unfortunately there is an upper limit on the bandwidth of the synthesizer that will limit the settling time to well above what is required by MB-OFDM UWB. This limit is due to a 528 MHz channel spacing mandating a maximum loop bandwidth of 52.8 MHz. Frequency 16

synthesizers are almost exclusively composed of charge-pump type-II PLLs that use a frequency/phase detector for a quick phase and frequency acquisition. Due to the sampling nature of the frequency/phase detector the system becomes unstable if the loop bandwidth approaches the reference frequency. Garder defined the upper limit of stability [13] (c 2 )2 2 1-a b-1 )  (1 + c  1+a b

K2 =

(2.3)

2b where a = exp( - ), c is the reference frequency of the synthesizer, b is the ratio of the c 2

pole frequency to that of the zero frequency, and 2 is the time constant of the stabilizing zero added by the resistor of the loop filter. With K =
c 10

the gain margin is 10 dB, resulting

in a minimally stable closed-loop response of the PLL. With the reference frequency of the UWB synthesizer being 528 MHz (a 528 MHz reference frequency was chosen to allow for an integer frequency synthesizer to be used), the upper limit of the loop bandwidth is approximately 50 MHz. The inability of narrow-band frequency synthesizers to lock in 9.5 ns sparks the search for new techniques, which include: · A delay-locked loop with an edge combiner [14] - Instead of using a high-frequency oscillator to generate the output signal, a low frequency DLL is used and the outputs of the individual delay cells are summed by an edge combiner. By selecting how many delay cells are used in the feedback loop, the desired frequency multiplication factor can be obtained. · A high frequency PLL with a frequency divider at the output [15] - By having a fixed frequency synthesizer with a programmable frequency divider, multiple output frequencies can be generated. The synthesizer only needs to lock to the fixed frequency at power-up, resulting in fast locking. 17

· Direct synthesis utilizes the frequency translation function of single side band mixing [16] [17] [18] [19] [20] [21] [22] [23] [24]. By multiplying multiple fixed frequency synthesizers the sum or difference of their output frequencies is generated. By having one of the fixed frequency synthesizers set to the middle carrier of mode-1 and the second fixed frequency synthesizer set to 528 MHz, we can generate all 3 of the mode-1 carriers. Because the fixed frequency synthesizers only need to achieve frequency and phase lock at the power-up the channel hopping of a direct synthesis frequency synthesizer has a short lock time.

2.3 Delay-Locked Loop Frequency Synthesizer

Figure 2.2: DLL based frequency synthesizer [14].

18

The basic DLL frequency synthesizer is shown in Fig. 2.2. It consists of a phase detector, a charge pump, a loop filter, delay line, and edge combiner. In the place of the voltage controlled oscillator in a PLL, a DLL uses a voltage controlled delay line driven by a reference oscillator. The DLL is a first-order system, yet still capable of fast locking. The short locking time makes DLL-based frequency synthesizers attractive for MB-OFDM UWB. No frequency multiplication occurs in the loop of a DLL because the frequency of the reference oscillator is fixed and the delay line cannot alter the frequency of the signal . The multiplication of the reference frequency is obtained by using an edge combiner. When the DLL is locked the reference oscillator and the output of the delay line are shifted by 180 degrees. The 180 degree phase shift is equally divided among the delay cells of the delay line. Each delay cell has a phase shift of
 , N

where N is the number delay cells in the delay

line. When the edges of the delay cell of the DLL are combined the resulting frequency is multiplied by a factor of N . Mismatches in the delay times and layouts of the delay cells and edge combiner will cause spurs in the output spectrum and can cause ISI.

2.4 Miller Divider Based Frequency Synthesizer
The reason classical frequency synthesizers cannot lock in 9.5 ns guard period is due to a finite closed-loop bandwidth. As described previously, the closed-loop bandwidth is limited to a 10th of the reference oscillator's frequency. Instead of having frequency hopping occurring inside the closed loop of the PLL, the frequency divider can be placed outside the loop therefore not requiring the PLL to re-acquire phase and frequency lock during channel hopping [25]. A classical PLL locks to a fixed frequency at the start-up. It is followed by a programmable frequency divider [15]. The architecture of the frequency synthesizer is 19

BPF 7.92 GHz Frequency Synthesizer f0 f out Channel Sel.

7.5

f

Figure 2.3: Architecture of [15] showing a fixed synthesizer and modified Miller frequency divider.

shown in Fig. 2.3. It consists of a fixed frequency synthesizer producing a 7.92 GHz reference signal, which is used to drive a divided-by-7.5 frequency divider and a programmable Miller frequency divider.

LPF f0 f out

Figure 2.4: Miller frequency divider.

Miller frequency divider shown in Fig. 2.4 consists of a mixer and a bandpass filter. The mixer mixes the output of the reference oscillator with its own output. The output of the mixer is given by 20

BPF f0 f out

f

Figure 2.5: Modified Miller divider [15].

fo - fout = fout ,

fout =

fo . 2

(2.4)

Eq.(2.4) shows that once the Miller divider has reached an equilibrium state, its output will be half the reference frequency. The modified Miller frequency divider presented in [15] is shown in Fig. 2.5. The feedback mixer modifies (2.4) into fo f ± . 2 2

fo - (fout ± f ) = fout ,

fout =

(2.5)

By using the modified Miller frequency divider in the architecture presented in [15] the first 3 channels of UWB can be synthesized. The modification to the Miller frequency divider that allowed the additional 2 UWB channels also resulted in spurs in the output spectrum.

2.5 Direct Synthesis Frequency Synthesizers
The most common method for generating carrier signals of MB-OFDM is direct synthesis [16] [17] [18] [19] [20] [21] [22] [23] [24]. Direct synthesis modifies the output of a fixed frequency synthesizer but doesn't require a carrier twice that of the desired output 21

frequency. Direct synthesis falls into two categories: (i) Parallel synthesis shown in Fig. 2.6 [26] [27], and (ii) single side band mixing. For parallel synthesis no locking is required by using a separate RF path for all the required channels. The drawback of this architecture is the high silicon area and power consumption. The need for a synthesizer and a mixer in every channel is difficult for mandatory mode-1 devices and impractical for a UWB with all 14 channels.

Figure 2.6: UWB receiver using multiple RF paths tuned to each of their respective bands [26].

A more common architecture for direct synthesis is by means of single side band (SSB) mixing. By using a SSB mixer a high frequency carrier can be frequency translated by the channel frequency offset of 528 MHz. An example of a SSB mixer-based frequency synthesizer is shown in Fig. 2.7. 22

Figure 2.7: MB-OFDM frequency synthesizer based on direct synthesis [28].

While SSB allows for the creation of all 14 channels of MB-OFDM with settling time well under 1 ns, SSB mixers create sidebands located at the center of the adjacent channels that might cause ISI. These spurs are due to the non-linearities of the SSB mixer, and I/Q mismatch from the oscillators. An example of the generated spurs is shown in Fig. 2.8.

2.6 Performance Comparison
Table. 2.4 compares the performance of published MB-OFDM UWB frequency synthesizers. Several trends are observed: · Most of the frequency synthesizers are fabricated on low cost CMOS processes, with 0.18 µm CMOS the most widely used. · All of the MB-OFDM UWB frequency synthesizers suffer from the generation of spurs, with the largest spurs occurring directly ontop of adjacent channels. These 23

Figure 2.8: The output spectrum of [22] showing spurs

spurs are due to the open-loop architectures being used to generate the UWB carrier with lock time under 9.5 ns. These spurs will reduce the sensitivity of the receiver. · MB-OFDM UWB frequency synthesizes have an average power consumption of 11.2 mW per channel. These power consumption figures are a result the necessity of multiple PLLs and SSB mixers, both require large power consumption for proper performance.

2.7 Chapter Summary
An overview of UWB for wireless communications has been presented. The two standards for UWB transmission namely DS-UWB and MB-OFDM have been discussed. DS-UWB uses the direct modulation of narrow pulses to represent the base-band data. It is difficult 24

Table 2.4: Comparison of state-of-the-art UWB frequency synthesizers.

Ref.

Technology

[14] [15] [25] [16] [17] [19] [21] [29] [28] [22] [23] [24]

0.18um CMOS 0.18um CMOS 90nm CMOS 0.18um CMOS 0.18um CMOS 0.18um CMOS 0.18um CMOS 0.18um SiGe 0.18um CMOS 65nm CMOS 0.18um CMOS 0.18um CMOS

Lock time [ns] 8 4 9 2 1 2.4 2 3 1 6 3 3

Spur Level [dBc] -35 -25 -32 -40 -37 -20 -26 -40 -37 -43 -30 -33

Phase Noise [dBc/Hz] -120 -109 -120 -103 -98 -130 -110 -128 -98

Total Power [mW] 54 47 55 65 48 34 68 88 43 45 117

Power per Band [mW] 18 15.6 3.9 16.25 6.85 11.3 22.6 12.6 4.8 3.2 8.3

to synchronize the transmitter and receiver. MB-OFDM uses more traditional narrow-band techniques by sub-dividing the ultra wide-band into small bands of bandwidth 528 MHz. MB-OFDM uses orthogonal frequency division multiplexing for high channel efficiency. A state-of-the-art review of existing MB-OFDM UWB frequency synthesizers has been presented. MB-OFDM places a greater constraint on lock time and less constraint on phase noise. We have shown that the lock time is the greatest challenge for MB-OFDM UWB frequency synthesizers. A guard time of 9.5 ns requires loop bandwidth larger than that set by the stability of PLL based frequency synthesizers. The common approaches to perform frequency synthesis for MB-OFDM UWB have been investigated. The first approach is DLL based frequency synthesis. A DLL is incapable of frequency multiplication, with the addition of an edge combiner, frequency multiplication can be performed. By controlling the number of the delay cells in the delay line a programmable DLL 25

based frequency synthesizer can be created. Low-frequency DLLs are able to establish a very quick lock because only phase lock is required. DLL frequency synthesizers generate spurs due to mismatching in the delay cells and edge combiner. The second approach is the fixed frequency synthesizer with a programmable frequency divider. By having the programmable frequency divider at the output of the VCO and not in the VCO feedback loop phase and frequency lock only needs to be established during power-up. The modification of the miller frequency divider also results in spurs at the output of the divider. The third and also most common frequency synthesis for MB-OFDM UWB is direct synthesis. There are two approaches for direct synthesis, namely parallel synthesis and SSB mixing. Parallel synthesis requires the generation of all UWB channels using multiple frequency synthesizers, resulting in a large silicon area and high power consumption. SSB mixing is the most common approach for MB-OFDM frequency synthesis. It suffers from spur generation due to the use of SSB mixing of multiple fixed frequency synthesizers. It is evident that existing MB-OFDM UWB frequency synthesizers suffer from the generation of spurs due to the use of open loop architectures. Direct synthesis frequency synthesizers suffer from high power consumption due to the use of multiple frequency synthesizers and single side band mixers.

26

Chapter 3 Current-Mode Phase Locked Loops

Charge pump

f in f vco PFD

J UP UP

Voltage-mode loop filter Vc C1 R C2

Voltage-controlled oscillator

DN J DN

Figure 3.1: Configuration of type II voltage-mode PLLs.

A typical configuration of conventional type II PLLs is shown in Fig. 3.1. We shall term these PLLs voltage-mode PLLs as the oscillation frequency of the oscillator is voltagecontrolled. Many new topologies of and design techniques for voltage-mode PLL, such as supply-regulated PLLs [30], PLLs with dual-slope phase-frequency detectors [31], PLLs 27

with frequency tracing circuits [32], [33], PLLs with adaptive loop dynamics for fast locking [34], a half-duty sampled feed-forward loop filter for reference spur suppression [35], calibrated phase/frequency detectors [36], and glitch-free charge pumps [37], to name a few, emerged. One of the main drawbacks of voltage-mode PLLs is the limited dynamic range of the control voltage. The current-mode PLLs proposed in this chapter and shown in Fig. 3.2 replaces the conventional voltage-mode RC loop filter with a current-mode RL loop filter. Using current as a control signal the dynamic range of the control signal is no longer limited by the supply voltage. The magnitude of the control signal is not limited by the output of the active inductor gyrators.
Current-mode loop filter

f in f vco PFD

L

R

Ic

Current-controlled oscillator

Figure 3.2: Configuration of current-mode phase-locked loops.

Section 1 of this chapter introduces modern techniques for battling the problem of supply scaling in voltage-mode PLLs. Section 2 introduces the concept of current-mode filtering that will be used to replace voltage-mode filtering. The inductance of the current-mode filter will be implemented using active inductors. A detailed analysis of active inductors will follow. Current-controlled oscillators are studied in Section 3. Section 4 develops closed-loop expressions for current-mode PLLs. The phase noise of current-mode PLLs is investigated in Section 5. Section 6 provides the simulation results of an active inductor based current-mode PLL. The chapter is summarized in Section 7. 28

3.1 Low-Voltage Voltage-Mode PLLs
The different scaling factors of the supply and threshold voltages reduces the control voltage range. The noise present on the control signal remains unchanged. To compensate for the drop of supply voltage, VCO sensitivity has to increase in order to maintain the same frequency tuning range. The increase in VCO gain makes the VCO more susceptible to noise. Two techniques for combating the reduction of the dynamic range of the control signal are supply regulated PLLs [38, 39, 40, 41, 42, 43] and differentially tuned PLLs [44, 45, 46, 47].

Figure 3.3: Configuration of a supply regulated PLL.

A supply regulated PLL is shown in Fig. 3.3. The VCO's supply voltage is a buffered replica of the control signal. By using the control signal as the VCO's supply voltage the VCO is decoupled from the noisy VDD of the system. Using a regulator to supply the VCO limits the topology of the VCO to ring oscillators. One of the challanges in the design of a supply regulated PLL is highlighted in Fig. 3.4. The regulator consists of an op-amp and a large pMOS Mp . A large decoupling capacitor Cd is usually added to filter the VDD of the VCO. The addition of the decoupling capacitor and large pMOS creates two poles a and o . Both poles a and o must be an order of magnitude higher than the loop bandwidth of 29

the PLL. If the bandwidth of the regulator is not sufficiently higher than the loop bandwidth they will degrade the phase margin. To have o higher than the loop bandwidth and still effectively filter the VDD of the VCO, an op-amp is required.

Figure 3.4: Configuration of a supply regulated VCO.

A differentially tuned PLL is shown in Fig. 3.5. The differentially tuned PLL uses a differential control signal. By having a differential control signal the dynamic range is effectively doubled. To generate the differential control signal the PLL must have two PFDs and two charge pumps, and a differential loop filter, doubling power and silicon consumption. Having two charge pumps also creates a problem of matching, a mismatch between the two charge pumps generates considerable spurs in differentially tuned PLLs. Another challenge with a differentially tuned PLL is that the VCO must be differentially tuned, requiring a unique VCO topology. Supply regulated PLLs are not suitable for UWB frequency synthesizers due to power consumption. The large loop bandwidth of a UWB frequency synthesizer will require a high powered op-amp with an output pole of tens of gigahertz. Differentially tuned PLLs 30

Figure 3.5: Configuration of a differentially tuned PLL.

are also not suitable for UWB frequency synthesizers. This chapter explores current-mode techniques for frequency synthesizers.

3.2 Current-Mode Filtering
3.2.1 Current-Mode Loop Filter
Current-mode filtering is widely used in power electronics for dc-dc conversion where a constant output current is required. Current-mode filtering differs fundamentally from voltage-mode filtering where sustaining a constant output voltage is the objective. A typical current-mode low-pass filter consists of an inductor and a resistor in series, as shown in Fig. 3.6. Let the input voltage source vin (t) be a square-wave generator with amplitude Vm and 31

duty cycle ton /T , where T is the period and ton is the ON time. The inductor current is given by  

iL (t) =

Vm (1 R

where  =

L R

is the time constant, iL (0- ) and iL (t- on ) are the initial current of the inductor
t

 i (t- )e-(t-ton )/ , L on

- e-t/ ) + iL (0- )e-t/ , 0tton , ton tT,

(3.1)

at t = 0 and t = ton , respectively. If  is sufficiently large, we have e-  1 - is simplified to  

t 

and (3.1)

iL (t)

Vm t R 

t + iL (0- )(1 -  ), 0tton , t-ton ), 

(3.2)

 i (t- )(1 - L on

ton tT.

Figure 3.6: Characteristics of current-mode loop filter.

For fixed Vm , the dc component of the inductor current is a function of the duty cycle. 32

3.2.2 Gyrator-C Floating Active Inductors
Active inductors synthesized using active devices offer the advantages of a large and tunable inductance and virtually no silicon area requirement over their spiral counterparts [48, 49, 50, 51]. Two back-to-back connected transconductors, known as gyrators, with one port terminated with a capacitive load, as shown in Fig. 3.7(a), exhibit an inductive characteristic at the other port. In the ideal case where the input impedance of the transconductors is infinite, the admittance looking into port 1 of the gyrator is given by 1 s
C1 gm1 gm2

Y (s) = sC2 + Go2 +

+

Go 1 gm1 gm2

.

(3.3)

Eq.(3.3) can be represented equivalently by the RLC network shown in Fig.3.7 with

Rp =

1 , Go 2

Rs =

Go 1 , gm1 gm2

Cp = C2 , L =

C1 . gm1 gm2

(3.4)

To find out the effective frequency range over which the gyrator is inductive, we examine the impedance of the inductor: Rs C p L s2 + s
L sR +1 s 1 Rp Cp

Z (s ) =

+

Rs L

+

Rp +Rs Rp Cp L

.

(3.5)

When complex conjugate poles are encountered, the impedance has its resonant frequency  gm1,2 1 is the cut-off fre= t1 t2 , where Rp Rs was utilized and t1,2 = C o  LC p 1,2 quency of the transconductors. Observe that Z (s) has a zero at the frequency z =
Go 1 . C1 Rs L

=

The Bod´ e plots of Z (j ) are sketched in Fig. 3.7(b). It is evident that the gyrator is

resistive when  < z , inductive when z <  < o , and capacitive when  > o . Fig.3.8 shows the inductance of the active inductor measured at 3 GHz with the dc voltage of the input node of the active inductor swept. Most published work on active 33

Figure 3.7: (a) Configuration of floating gyrator-C active inductors. Go1 and C1 are the output conductance of transconductor 1 and the input capacitance of transconductor 2, respectively. (b) Bod´ e plots of gyrator-C active inductors.

inductors assumes that the transistors of the two transconductors are in saturation. When the devices are biased near the pinch-off, gm is reduced. Further, when the devices are in the triode, they behave as a conductor with its nearly constant conductance gds < gm . The preceding analysis reveals that even when the transistors of the active inductors enter the triode region, they still behave as an inductor, except with a larger inductance. It should also be noted that although the output voltage of the preceding phase detector could be rail-to-rail swing, the resistor preceding the active inductor in the loop filter and the gate capacitance of the transistors forming the active inductor limit the swing of the voltage at the input of the active inductor to a rather small range. 34

Figure 3.8: Fully differential gyrator-C active inductor circuit. Circuit parameters : W1,6 = 5µm, W2,3,7,8 = 0.5µm, W4,5 = 100µm, and W9,10 = 0.5µm. L = 0.18µm for all transistors. - Dependency of the inductance of the floating active inductor on the biasing voltage Vb2 at 3 GHz.  - Large-signal behavior of the floating active inductor at 3 GHz.

3.3 Current-Controlled Oscillator
Unlike voltage-mode phase-locked loops, the phase/frequency adjustment of current-mode phase-locked loop is achieved by a current-controlled oscillator with its control signal being the output current of the preceding current-mode loop filter. The schematic of a CCO is shown in Fig. 3.9a. It is an LC -tank oscillator with active inductors proposed by Ismail et al. in [52, 53, 54]. The tuning of the self-resonant frequency of the tank is achieved by tuning the bias current of M3,6 . M7,8 form the trans-impedance amplifier that converts the 35

H

control current Ic to a control voltage. The use of M8 is to reduce the capacitance seen by Ic . Without M8 , a large capacitance will exist at the input of the CCO. This capacitance will form an LC network with the large inductor of the preceding current-mode loop filter. The low resonant frequency of the LC network given by o =
1 LC

results in low-frequency

ripples on the control line of the CCO. These low-frequency ripples are then up-converted to the high-frequency carrier output of the CCO, resulting in systematic phase noise. Fig. 3.9b shows the frequency tuning range of the current-controlled oscillator.
3.6

M1 M2 M3 Vb1 Vb1

M4 Vb2 M5 M8 M7 M6

J2 IC

3.4

3.2

Frequency (GHz)

3

2.8

2.6

M9

M10
2.4

J1

2.2 0

50

100

150

Control current (uA)

(a)

(b)

Figure 3.9: (a) Current-controlled oscillator with current reuse active inductors. Circuit parameters : W1 = 10µm,W2 = 3µm, W34 = 10µm,W56 = 5µm,W7 = 5µm,Ib = 1 mA,Ib2 = 100µA,Vb = 1 V,Vb2 = 0.2 V. (b) Frequency tuning range of the current-controlled oscillator

3.3.1 Replica Bias for Active Inductor VCOs
One of the major disadvantages of using active circuits to synthesize the behavior of passive components is the voltage dependency of the transconductance on the supply voltage. To 36

reduce the effect of this dependency, a technique known as replica bias was employed in design of the loop filter [55]. The replica bias circuit applied to the active loop filter is shown in Fig.3.10. The active loop filter is formed by M1-10 , the half replica is formed by M11-13 and the op-amp is realized by M14-18 .

Figure 3.10: Fully differential gyrator-C active inductor with replica biasing.

The half replica circuit replicates the DC bias condition of the circuit to be used as a reference to minimize the effect of VDD fluctuation on the circuit. With the replica circuit being equally affected by VDD fluctuation Vgs of the load transistors is the same. By comparing Vgs to the reference voltage the error can be used to adjust the bias so as to maintain 37

50

Occurrence

30

10

90

110

130

150

170

Inductance (mH)

Figure 3.11: Distribution of the inductance of the active inductor without replica biasing due to process variations (500 samples in Monte Carlo simulation)

a constant Vgs . The constant Vgs maintains a constant load, a constant gain, subsequently a constant inductance. Table 3.1 compares the effect of the fluctuation of the supply voltage on the inductance of the active inductor with and without replica biasing. It is seen that the inductance of the active inductor without replica biasing is sensitive to VDD fluctuation with a sensitivity of 0.167 nH/mV. It is reduced to 0.0235 nH/mV when replica biasing is used. The effect of process spread on the inductance of the active inductor is investigated using Monte Carlo simulation. The non-replica bias and replica bias inductances are shown in Fig.3.11 and 3.12 respectively. It is clear that the replica bias gives a more constant inductance. It is seen that a large degree of the spread of the inductance of the active inductor without replica 38

90

70

Occurrence

50

30

10

150

170

190

210

Inductance (mH)

Figure 3.12: Distribution of the inductance of the active inductor with replica biasing due to process variations (500 samples in Monte Carlo simulation)

biasing exists. When replica biasing is employed, the feedback mechanism significantly reduces the effect of process spread on the spread of the inductance of the active inductors.

3.4 Loop Dynamics of Active-Inductor based Current-Mode PLL
Fig.3.13 shows the basic configurations of current-mode loop filters for types I and II current-mode PLLs. In the vicinity of the lock state, because the phase variation is small, PLLs can be considered as linear systems and conventional s-domain approaches can be used to analyze PLLs. 39

Table 3.1: Effect of VDD fluctuation on the inductance of active inductors with and without replica biasing.

VDD (V) 1.70 1.74 1.78 1.82 1.86 1.90

Inductance with replica (nH) 193.2 193.7 192.8 191.4 189.8 188.5

Inductance without replica (nH) 154.2 146.6 139.6 133.4 126.9 120.7

Figure 3.13: Current-mode filters for type I and type II current-mode PLLs.

3.4.1 Type I Current-Mode PLLs
Consider type I current-mode PLLs shown in Fig.3.14. Let us neglect the series resistor R for the time being. The closed-loop transfer function of the PLL is given o (s) Kpd Kcco 1 = , K K in (s) L s2 + pd cco
L

H c (s ) =

(3.6)

where Kpd and Kcco are the gain of the phase detector and that of CCO, respectively. It is 40



V

out

Figure 3.14: Phase diagram for type I current-mode PLLs.

seen that the system has two purely imaginary poles and is, therefore, marginally stable. To stabilize the system, a resistor can be added in series with the inductor. The closed-loop transfer function becomes 1 Kpd Kcco R L s2 + s L +

H c (s ) =

Kpd Kcco L

.

(3.7)

The added resistor moves the poles from the imaginary axis to the left half of s-plane and stabilize the PLL. The system is now a Type I PLL. The loop bandwidth n and damping factor  are given by n =
Kpd Kcco L R2 . 4Kpd Kcco L

and  =

The damping factor  can be

tuned by varying R without affecting the loop bandwidth.

3.4.2 Type II Current-Mode PLLs

Figure 3.15: Phase diagram for type II current-mode PLLs.

41

The loop can also be stabilized by adding a resistor in parallel with the inductor, as shown in Fig. 3.15. The closed-loop transfer function in this case is given by Kpd Kcco sL + R K RL s2 + s pd Kcco +
R

H c (s ) =

Kpd Kcco L

.

(3.8)

The system is now a type II PLL with loop bandwidth n and damping factor  given by n =
Kpd Kcco L

and  =

Kpd Kcco L . 4R2

It should be noted that the resistor R provides a direct

path for high-frequency disturbances from the phase detector to bypass the loop-filtering inductor, deteriorating the phase noise. To eliminate this drawback, an inductor with a small inductance (L1 ) can be added in series with the resistor as to block high-frequency ripple currents passing through the resistor shown in Fig. 3.16. It is evident that these configurations bear a strong resemblance to their voltage-mode counterparts.

1

Figure 3.16: Phase diagram for type II current-mode PLLs with additional inductor.

3.4.3 Non-ideal Cases
As shown earlier that active inductors have parasitics (Rp , Rs , Cp ). In this section, we investigate the effect of these parasitics on the loop dynamics of current-mode PLLs. Consider type I current-mode PLLs first. Because typically Rp R and RRs hold, Rs can be neglected. It can be shown that the phase transfer function with Cp neglected is given by 42

H c (s ) =

sL + Rp Kpd Kcco LRp s2 + s( R + Kpd Kcco ) + L Rp

Kpd Kcco L

.

(3.9)

The loop bandwidth and the damping factor are given by Kpd Kcco L Rp , Rp + R

n =

(3.10)

=

R 2

1 1 + Kpd Kcco L 2Rp

Kpd Kcco L.

(3.11)

The loop bandwidth is approximately the same as that of the ideal case and the damping factor is increased slightly. When Cp is considered, because it is in parallel with Rp , the
1 phase transfer function in this case is given by (3.9) with Rp replaced with Zp = Rp || sC . p

The results of both the loop bandwidth and damping factors remain nearly the same as the case when Cp is neglected. Let us now consider type II cases. Neglect Rp as Rp R. The phase transfer function when Cp is neglected is given by
Hc (s) = Kpd Kcco sL + (R + Rs ) R LRp s2 + s( s + Kpd Kcco ) + Kpd Kcco (1 + L R L .

Rs R )

(3.12)

The loop bandwidth and the damping factor are given by Kpd Kcco L Rs , R

n =

1+

(3.13)

=

R 2

1 1 + Kpd Kcco L 2

LKpd Kcco . R2

(3.14)

It is seen that the bandwidth remains approximately unchanged and the damping factor is increased slightly. When Cp is considered, it can be shown that both the loop bandwidth 43

and damping factors remain nearly unchanged.

3.5 Phase Noise of Current-Mode Active Inductor PLLs
To analyze the phase noise of the current-mode PLLs in the lock state, consider the type I current-mode PLL of Fig. 3.17 where the noise from the input, the noise of the active loop filter and that of the CCO are considered. The phase noise at the output of the PLL is given by
Kpd Kcco Kcco s(sL + R) Ncco (s) + Nin (s) + NLP (s),   

No (s) =

where  = s2 L + sR + KpdKcco . It is seen that noise from the input and that from the loop filter to the output of the PLL have a low-pass characteristic whereas that from the CCO to the output of the PLL has a band-pass characteristic. These noise transfer characteristics bear a strong resemblance to those of voltage-mode PLLs. The phase noise of type II current-mode PLLs can be analyzed in a similar way.

Figure 3.17: Phase noise analysis of Type I current-mode PLLs in the lock state.

44

3.6 Simulation Results of Active-Inductor Current-mode PLL
A current-mode PLL has been implemented in TSMC-0.18µm 1.8V 6-metal 1-poly CMOS technology and analyzed using SpectreRF from Cadence Design Systems with BIM3.3v device models. The simplified schematic of the PLL is shown in Fig. 3.18. A differential voltage buffer is inserted between the CCO and phase detector to restore the voltage swing. The PLL is designed to operate at 3 GHz. The current-mode loop filter consists of a 3 µH active inductor with an output current capability exceeding the required 46 µA to achieve lock. Each side of the inductor is connected to a 2.25 k poly resistor. The parasitic series resistance of the active inductor Rs whose value is usually much smaller than 2.25k  has a negligible impact on the loop dynamics of the PLL. The parasitic parallel resistor Rp and capacitor Cp of the synthesized inductor, however, provide direct paths from the phase detector to the CCO for high-frequency disturbances to bypass the loop filter, deteriorating the phase noise of the PLL. The layout of the PLL is shown in Fig. 3.19.

Figure 3.18: Simplified schematic of the proposed current-mode PLL.

Fig. 3.20 shows the output current of the current-mode loop filter with various duty cycles of the input voltage. It is seen that the dc component of the output current of the loop filter varies with the duty cycle of the input voltage. Fig. 3.21 shows the effect of the fluctuation of the supply voltage on the cut-off frequency of the loop filter. It is seen that the cut-off frequency is sensitive to VDD fluctuation, calling for replica biasing. This differs from RL loop filters employing spiral inductors whose cut-off frequency is independent of supply voltage fluctuation. Fig. 3.22 compares

45

Figure 3.19: Layout of the proposed current-mode PLL.

Figure 3.20: Dependence of the output current of current-mode loop filter on the duty cycle of the input voltage (post-layout).

46

Figure 3.21: Effect of the fluctuation of supply voltage on the cut-off frequency of the current-mode loop filter (post-layout).

the effect of VDD fluctuation on the oscillation frequency of CCOs with (i) passive inductors and (ii) active inductors. It is observed that LC-tank CCOs with active inductors are more sensitive to VDD fluctuation, revealing that the minimization of switching noise is critical to the operation of active inductor-based LC-tank CCOs. Fig. 3.23 plots the control current of the current-mode PLL. The PLL reaches the lock state in 50 ns approximately. The phase noise plot is shown in Fig. 3.24. The phase noise of the PLL is -84.5 dBc at 1 MHz frequency offset and -70 dBc reference spurs at 125 MHz. The effect of process variations on the performance of the proposed PLL is investigated using corner analysis and the results are tabulated in Table 3.2. Fig. 3.25 shows the effect of VDD fluctuations on the phase noise of the proposed current-mode PLL. The power consumption of the phase detector, the current-mode loop filter, and the CCO are 90.5 µW, 100.1 µW, 12.2 mW, respectively. The power consumption of the current-mode loop filter is negligible, mainly due to its small dc biasing current required for obtaining a large inductance. The layout area of the PLL is 2800 µm2 .

47

Figure 3.22: Effect of the fluctuation of the supply voltage on the oscillation frequency of CCO (post-layout).

170

160

Control Current

150

140

130 10 30 50 70

Time (nsec)

Figure 3.23: Control current of the proposed current-mode PLL (post-layout).

48

Figure 3.24: Simulated Phase noise of the proposed current-mode PLL (post-layout).

Table 3.2: Corner analysis results of the PLL (post-layout).

Process corner TT FF SS FS SF

Phase noise at 1MHz frequency offset (dBc) -84.5 -76.5 -93 -90.8 -72.9

Loop bandwidth (MHz) 125 220 117 140 85

Lock time (nsec) 50 63 116 46 150

3.7 Chapter Summary
An in-depth examination of the principle of current-mode filtering and its application to PLLs have been presented. Current-mode PLLs use currents as control signals. By using currents as control

49

Figure 3.25: Effect of VDD fluctuation on the phase noise of the proposed current-mode PLL at 1MHz frequency offset (post-layout).

signals instead of voltage the dynamic range of the control signals is decoupled from the voltage supply scaling. We have shown that using current-mode filtering to replace voltage-mode filtering yields currentmode PLLs. The oscillator of the PLLs must also be changed from a voltage controlled oscillator to a current controlled oscillator. We have shown that current-mode filtering can be implemented using inductors. An RL filter effectively filters the signal from the phase detector and controls the oscillation of the CCO. We have also shown that the current filtering inductors can be implemented using active inductors. The second part of this chapter focused on the use of active inductors current-mode filtering in PLLs. We have shown that type I and type II current-mode PLLs have the same loop bandwidth and damping parameters as those of their voltage-mode counterpart. We have also shown that the phase noise performance of current-mode PLLs bears a strong resemblance to that of voltage-mode PLL.

50

Chapter 4 Current-Mode Phase Locked Loops with Active Transformers
One of the drawbacks of inductor-based current-mode PLLs is the need for a large inductor in the loop filter. This chapter proposes the use of transformers in the loop filter of current-mode PLLs to utilize the mutual inductances of the transformer to improve the performance of the loop filter. The transformers are implemented using coupled active inductors. Section 1 introduces current-mode filtering using transformers. A detailed analysis of the self-inductances, mutual inductances, and noise of active transformers is provided in Section 2. Section 3 develops the closed-loop expression of active transformer current-mode PLLs. The phase noise of Section 5 provides the simulation results of active-transformer current-mode PLLs. The chapter is summarized in Section 6.

4.1 Current-Mode Filtering
4.1.1 Current-Mode Loop Filter with Transformers
A transformer-based current-mode low-pass filter can be constructed by connecting a resistor in series with the primary winding of a transformer, as shown in Fig. 4.2. For current-mode circuits,

51

Figure 4.1: Configuration of current-mode phase-locked loops using transformer filtering.

the load of the secondary winding R2 is ideally zero, this leads to V2 (s) = 0. Because

Vin (s) = R1 I1 (s) + V1 (s), V1 (s) = sL11 I1 (s) + sM12 I2 (s), V2 (s) = sL22 I2 (s) + sM21 I1 (s), where L11 and L22 are the self-inductance of the primary and secondary windings, respectively, M21 and M12 are the mutual inductance from the primary winding to the secondary winding and that from the secondary winding to the primary winding, respectively, we arrive at 1 M21 I2 (s) =- . -M12 M21 Vin (s) R1 L22 s( L11 L22 )+1 R L
1 22

(4.1)

(4.2)

It is evident that the filter is a low-pass with its cutoff frequency given by

-3dB =

1 R1 . L11 1 - M12 M21 L11 L22

(4.3)

52

Figure 4.2: Current-mode loop filter using passive transformers.

4.2 CMOS Active Transformers
The active transformer proposed in this chapter evolves from Wu's current-reuse active inductors of Fig.4.3(a) [56] and consists of two coupled active inductors, as shown in Fig.4.3(b). Active transformers are two-port networks depicted by V1 = Z11 (s)I1 + Z12 (s)I2 , V2 = Z21 (s)I1 + Z22 (s)I2 , where Z11 (s) and Z22 (s) are the self-impedances, Z12 (s) and Z21 (s) are the transimpedances.

(4.4)

4.2.1 Self-inductance of Primary Winding
The input impedance of the primary winding with M1 and M2 identical is given by +1 s ggs go o Z11 (s) = 2 2 . Cgs s2 + s gm + gm Cgs C2
gs

C

(4.5)

The frequency of the zero and the self-resonant frequency of the primary winding are given by z,11 =
go Cgs

and o,11 =

gm Cgs ,

respectively. The primary winding is inductive when z,11 <  <

o,11 . The self-inductance, parasitic series and parallel resistances, and the parallel capacitance of the primary winding, denoted by L11 , R11,s , R11,p , and C11,p , respectively, are obtained from the

53

admittance of the primary winding : R11,p 

1 gm ,

2 . The preceding results show that a gm go was utilized. Also note Z11 (0) = R11,s ||R11,p go /gm

R11,s 

go 2 , gm

C11,p = Cgs , and L11 

Cgs 2 . gm

Note

small dc biasing current is needed in order to obtain a large self-inductance of the primary winding. It should be noted that when Cgd is considered, C11,p and L11 increase slightly while Rp and Rs remain unchanged.

Figure 4.3: (a) Wu's current-reuse active inductors. (b) Proposed CMOS active transformers.

4.2.2 Self-inductance of Secondary Winding
The impedance looking into the secondary winding is given by s ggs +1 go o . gm m go 2 2 Cgs s + s Cgs + gC 2
gs

C

Z22 (s) =

(4.6)

54

It has a zero at frequency z,22 =

go Cgs

and the self-resonant frequency o,22 =



gm go Cgs .

The sec-

ondary winding is inductive when z,22 <  < o,22 .The self-inductance, parasitic series and parallel resistances, and the parallel capacitance of the secondary winding, denoted by L22 , R22,s , R22,p , and C22,p , respectively, are given by R22,p  Also note Z22 (0) = R22,s ||R22,p 1/gm .
1 gm , 1 go , Cgs 2 . go

R22,s =

C22,p = Cgs , and L22 =

4.2.3 Mutual inductance from primary to secondary windings
The voltage at the secondary winding terminal is obtained from the small-signal equivalent circuit of the winding

V2 (s) 

2 (sC + g ) sCgs + go gm gs o V. I - 2 2 + sC g + g g 2 + sC g + g g ) c s2 Cgs (sCgs + gm )(s2 Cgs gs m m o gs m m o

The voltage at the coupling node C is obtained by solving the primary winding I1 gm gm 2 2 2Cgs s + s Cgs +

Vc (s)

gm go 2 Cgs

.

(4.7)

The transimpedance can be quantified by substituting (4.7) into (4.7) with I2 = 0
3 (sCgs + go ) gm . 2 + sC g + g g )2 2 (sCgs + gm )(s2 Cgs gs m m o  gm go Cgs

Z21 (s) = -

(4.8)

The cutoff frequency of the mutual inductance is given by o,21 =

approximately.

We comment on the preceding development : (i) z,22 = z,11 . The lower frequency bound of the inductive region of both the primary and secondary windings is the same. (ii) o,22 < o,11 . The primary winding has a higher upper frequency bound, as is evident in Fig.4.4. (iii) L22 > L11 . This agrees with the simulation results shown in Fig.4.4.

55

50 40 Secondary 30 Inductance (nH) Mutual

20 Primary 10 0 -10 -20 -30 100M

1G Frequency (Hz)

10G

Figure 4.4: Simulated self-inductance of the primary and secondary windings and mutual inductance from the primary winding to the secondary winding of the active transformer. Circuit parameters : W = 50µm, L = 0.18µm for all transistors, Jp , Js = 150µA, Vb1 = 0.8 V, and Vb2 = 0.2 V.

4.2.4 Current-Mode Loop Filter Using Active Transformers
The schematic of the current-mode loop filter is shown in Fig. 4.5. The transformer is replica biased to reduce its sensitivity to VDD . Fig. 4.6 shows the dependence of the output current of the loop filter on the duty cycle of the input voltage. Fig. 4.7 plots the dependence of the bandwidth of the loop filter on VDD . The loop filter with the replica-biased nMOS active transformer exhibits the lowest sensitivity and was chosen in this design. Fig. 4.8 shows the dependence of the bandwidth of the loop filter on the reference voltage Vb3 of the auxiliary amplifier of the replica-biasing circuit at all process corners (SS, SF, FS, FF) and in the nominal process conditions (TT). Vb3 is an external voltage that can be tuned manually. For each process corner, the following tuning range of the cutoff

56

frequency of the loop filter can be obtained by varying Vb3 from 0 to 0.6V : (i) FF : 50-900 MHz, (ii) SS : 1-300 MHz, (iii) TT : 3-600 MHz, (iv) SF : 2-400 MHz, and (v) FS : 27-770 MHz. The location of the poles of the proposed PLL can be changed by varying the bandwidth of the loop filter. This allows us to tune the loop bandwidth n and loop dynamics of the PLL. The tunability of the bandwidth of the loop filter provides an effective and economic way to offset the effect of process variation.

Figure 4.5: Current-mode loop filter. pMOS active transformer: Vb1 = 1.2 V, Vb2 = 1.2 V, Vb3 = 1.3 V. nMOS active transformer: Vb1 = 0.7 V, Vb2 = 0.7 V, Vb3 = 0.5 V. R = 6k . L = 0.18µm for all transistors. The numbers in the figures are transistor width.

The inductances of the active transformer are inversely proportional to the transconductance of the gyrators. Normally the transistors of the gyrators are biased in the saturation. When the transistors are in the triode, they behave as a transconductor with its transconductance gds < gm .

57

Figure 4.6: Simulated dependence of the output current of active-transformer loop filter on the duty cycle of the input voltage.

In this case, an inductive characteristic exists with a larger inductance. It should be noted that the resistor and the input capacitance of the primary winding of the active transformer limit the swing of the voltage at the input of the transformer to a rather small range, ensuring that transistors connected to the primary winding node remain in the saturation.

4.2.5 Quality Factors
The quality factor of the primary winding is obtained from [57] Q1 ( ) = L  = , Rs z (4.9)

Q2 ( ) =

Rp = 2 Rp + Rs 1 + ( L 1+ Rs )

Rs Rp

1 , 1 + Q2 1 ( )

(4.10)

58

Figure 4.7: Simulated sensitivity of the bandwidth of active-transformer loop filter to supply voltage.

Q3 ( ) = 1 -

2C Rs  p -  2 LCp = 1 - L o

2

-

z o

2

.

(4.11)

Q1 ( ) quantifies the quality factor at low frequencies, Q2 ( ) accounts for the effect of the finite output impedance of MOSFETs, and Q3 ( ) shows that the quality factor vanishes when approachRs ing o . To boost Q( ), should be reduced. Rp

4.2.6 Noise of Active transformers
The thermal noise and flicker noise of transistor j are represented by an equivalent noise current source with its power i2 nj = 4kT gm  +
Kf Ij f

f , where K is Boltzmann constant, T is the

temperature of the semiconductor junction, gm is the transconductance of the semiconductor device,

59

Figure 4.8: The dependence of loop filter bandwidth on replica bias reference voltage at process corners and in nominal conditions.

Kf is the flicker-noise coefficient, Ij is the junction current, and f is frequency. To quantify the
2 and a noise-current generator i2 at total noise of the active transformer, a noise-voltage generator vn n

the input of the primary winding are employed, as shown in Fig. 4.9. At low frequencies the noise current and noise voltage are given by
2 2 2 i2 n = in1 + in3 + in5 +

go gm

2

2 i2 n2 + in4

(4.12)

and

60

2 = vn

go gm

2

1 go 2 2 i2 n2 + in3 + in5 + 2 gm gm

2 2 in4

.

(4.13)

i2 n1
P M1 M3
2 i n3 2 i n4

P

v2 n

M1

M3

M2
2 i n2

Vb1 Vb2 JP

M4

S M5

M2

Vb1 Vb2 JP JS

M4 S M5

i2 n

i2 n5

JS

Figure 4.9: Noise equivalent circuit of active transformer.

4.2.7 Active Transformers with Multiple Windings
The configurations of active transformers with multiple windings are shown in Fig.4.10.

4.3 Loop Dynamics of Transformer Based Current-Mode PLLs
From Fig.4.11, we have

Vpd (s) = RI1 (s) + sL11 I1 (s) + sM12 I2 (s).

(4.14)

Because the active transformer is uni-directional, M12 = 0. For the secondary winding, V2 (s) =

61

Figure 4.10: Active transformers with multiple windings.

f in

R K pd V pd V1

I1 L 11

M 21

I2 L 22 Ic V2

K cco s

fo

M 12

(a) N LP N in K pd M 21 L 22 (sL11 +R) N cco K cco s No

(b)

Figure 4.11: Block diagram with noise sources of the PLL in lock state.

sL22 I2 (s)+sM21 I1 (s). Because the load of the secondary winding is a CCO whose input impedance is zero ideally, we have V2 (s) = 0. Further noting Ic (s) = -I2 (s), we arrive at Ic (s) = M21 Vpd (s). L22 (sL11 + R) (4.15)

62

The cutoff frequency of the current-mode loop filter is obtained from (4.15) : LF = transfer function of the PLL is given by Kpd Kcco M21 o (s) = , i (s) 

R . The L11

(4.16)

where  = s2 L11 L22 + sRL22 + Kpd Kcco M21 . The loop gain-bandwidth product n and damping factor  of the PLL are given by Kpd Kcco M21 , L11 L22 L22 . Kpd Kcco L11 M21

n =

(4.17)

=

R 2

(4.18)

We comment on the preceding development : (i) The PLL is type I. (ii) The damping factor  can be tuned by varying R without affecting the loop bandwidth. (iii) n  = LF /2. (iv) The higher the self inductances, the smaller the loop bandwidth, the better the suppression of the transient disturbances encountered at the input. (v) The larger the mutual inductance, the larger the loop bandwidth, the weaker the suppression of transient disturbances at the input because large M21 allows these disturbances to couple to CCO more easily.

4.4 Phase Noise of Current-Mode Active Transformer PLLs
To analyze the phase noise of the PLL in the lock state, consider Fig. 4.11 where the noise from the input, the noise of the loop filter, and the noise of the CCO are considered. The phase noise of the PLL is given by

No (s) =

Kcco Kpd M21 Kcco L22 (sL11 + R) sL22 (sL11 + R) Ncco (s) + NLP (s) + Nin (s).   

63

It is seen that the noise from the input has a low-pass characteristic with the cutoff frequency n . No L22 R The noise from the loop filter has a band-pass characteristic with (j 0) = , low NLF KP D M21 R and the center frequency n . The noise from the CCO has a highcorner frequency z = L11 pass characteristic with the corner frequency n . These observations reveal that the contribution of the noise from the input to the phase noise of the PLL is mainly at frequencies below n . The contribution of the noise from the CCO to the phase noise of the PLL is mainly at frequencies beyond n . The contribution of the noise from the loop filter to the phase noise of the PLL is mainly in the vicinity of n .

4.5 Simulation Results of Active-Transformer Current-Mode PLL
A 3.0 GHz active transformer current-mode PLL with its building blocks presented earlier has been implemented in TSMC-0.18µm 1.8V 6-metal CMOS technology. The layout of the PLL is shown in Fig.4.12. Fig. 4.13 plots the control current of the PLL. The PLL reaches the lock state in 60 ns approximately. The phase noise of the PLL was analyzed using the time-domain behavioral simulation techniques proposed in [58, 59, 60], specifically, (i) the phase noise of the CCO was analyzed using Cadence's SpectreRF with the consideration of the fold-over of the broad-band noise sources. The amplitude of the timing jitter of the CCO was obtained from its phase noise. In Verilog-AMS time-domain simulation of the PLL, the oscillation period of the CCO was disturbed using the extracted timing jitter, together with a normally distributed random generator with zero mean and unity variance. (ii) The active transformer loop filter is modeled as a series RL network with the inductance, resistance, and noise extracted from its SpectreRF simulation results. (iii) The PFD was modeled using Verilog-AMS with delays extracted from its schematic-level SpectreRF simulation results. (iv) Time-domain analysis of the PLL was carried out and a large number of oscillation periods were recorded after the PLL reached the lock state. The phase noise of the

64

PLL was obtained from FFT analysis of the recorded period of the CCO with 512K samples and Hanning window using Matlab. The results are shown in Fig.4.14. The phase noise of the PLL is approximately -100 dBc/Hz at 1 MHz frequency offset, higher than that of the CCO at the same frequency offset. The power consumption of the CCO, the filter, and the PFD is 15 mW, 0.138 mW, and 0.864 mW, respectively.

Figure 4.12: Layout of the PLL.

4.6 Chapter Summary
An in-depth examination of the principle of active CMOS transformers has been presented. The primary winding self-inductance, secondary winding self-inductance, and mutual inductance have been derived. The application of the active transformer to current-mode filter has been highlighted. The quality factor and the noise of active transformers have been derived. It has been shown that active transformers can be used as current-mode filters for use in currentmode PLLs. The loop dynamics of the transformer based current-mode PLLs have been analyzed, clearly showing the addition of the mutual coupling factor in the loop bandwidth and damping. The phase noise of the transformer current-mode PLL has also been analyzed. The noise generated by the active transformer is bandpass filtered by the PLL's closed loop transfer function. Finally, the performance of an active transformer current-mode PLL has been presented.

65

Figure 4.13: Simulated control current of the PLL (post-layout).

66

Figure 4.14: Simulated phase noise of the PLL.

67

Chapter 5 Wide-Band VCOs for Frequency Synthesizers
VCOs for wireless communications are mainly passive LC tank oscillators due to their superior phase noise performance. These VCOs, however, suffer from the drawback of a small frequency tuning range. Several mechanisms exist to tune the oscillation frequency of passive LC-tank oscillators, with varactors being the most widely used. The frequency tuning range of LC oscillators with varactors is limited by the ratio of the capacitance of the varactor to the total capacitance at the node to which the varactors are connected. The typical frequency tuning range of varactor LC VCOs is less than 10%. This chapter starts with a brief introduction of existing wide band VCOs that utilize switched banks to increase the frequency tuning range. Section 2 describes an active inductor VCO that provides a large frequency tuning range. Section 3 introduces a hybrid oscillator that utilizes the superior phase noise performance of a passive transformer and the wide frequency tuning range of an active inductor. Section 4 introduces a modified hybrid oscillator that uses the impedance scaling property of a transformer to increase the frequency tuning range of varactors. Section 5 compares the performance of three aforementioned oscillators. The chapter is concluded in Section 6.

68

5.1 Wide-band VCOs
The most common method to increase the frequency tuning range of LC tank oscillators is to employ a switched capacitor bank [61][62][63][64][65]. An LC tank oscillator with a switched capacitor bank is shown in Fig. 5.1. The VCO uses a binary weighted capacitor bank. It is also common to use a grey encoded switched capacitor bank. The composition of the switches used to connect the switched capacitors to the LC tank network are also shown in the figure. The use of nMOS or transmission gate devices as switches introduces unwanted parasitic resistances and reduces the quality factor of the LC network. The tuning range of the switched capacitor bank is limited by two factors: switch capacitance, and varactor capacitance ratio. The switches used to connect the capacitors will introduce their source/drain-to-substrate capacitances to the LC tank and limit the highest frequency of oscillation. A large switch is required to reduce the series resistance. This, however, will result in high source/drain capacitances. The second limitation of the switched capacitor bank occurs when the fixed capacitors are introduced into the LC tank and reduce the varactor's fixed-to-variable capacitance ratio subsequently. To overcome the problem of limiting the varactor's frequency tuning range by the additional fixed capacitance to the LC tank is to switch passive inductors instead of capacitors [67]. By changing the inductance of the LC tank the fixed capacitance seen by the varactor is nearly constant resulting in a higher frequency tuning range than using switched capacitors. An example of inductor switching is shown in Fig. 5.2. The current alternating between the inductor and capacitors is the bias current of the VCO scaled up by the quality factor, requiring the switches to handle large current. The second disadvantage is the silicon area required to include multiple spiral inductors on chip. There are two very important design considerations when using switched banks on wide band VCOs. The first consideration is that there must be overlap of the tuning curves from each switched value. An example of a single bit switched capacitor bank's tuning curves are shown in fig. 5.3. The figure clearly shows two independent tuning curves, one for the capacitor switched in and the other

69

Figure 5.1: Schematic of a wide-band VCO using a switched capacitor bank [66].

capacitor switched out. The highest frequency of the lower curve must overlap the lowest frequency of the top curve to ensure continuous frequency tuning. The second consideration in the design of PLLs using bank switched VCO is the control circuit. The control circuit must automatically switch in the fixed capacitors or inductors when the required frequency is outside the range of the existing switch structure. When the PLL tunes from the highest frequency of a lowest curve to the bottom frequency value of a higher curve the PLL's control

70

Figure 5.2: Schematic of a wide-band VCO using a switched inductor bank [68].

voltage must cover the entire PLL's control range voltage. The worst case scenario is if the PLL must lock to a frequency that translates into a frequency near the transition between two switched curves. A normal property of a locking PLL is a 2nd order oscillation, and it is possible the overshooting can cause the control circuitry to switch between the two tuning curves.

5.2 Active-Inductor Ultra Wide-band VCO
An active inductor LC-tank voltage-controlled oscillators with an ultra wide frequency tuning range was investigated in [70] as an alternative to switched banks to achieve a large frequency tuning range . Two inductance tuning mechanisms, namely the wide-band tuning mechanism for coarse

71

Figure 5.3: VCO tuning curves of a 1-bit switched capacitor bank [69].

frequency adjustment over a large frequency range for band selection and the primary tuning mechanism for the fine frequency tuning in closed loop control systems are developed in this thesis for the proposed UWB frequency synthesizer VCO. The absence of spiral inductors significantly reduces the silicon consumption of the oscillator and the tunability of the quality factor of the active inductor using two negative resistors results in good phase noise performance. The proposed ultra wide-band VCO is a fully differential active inductor LC oscillator utilizing the active inductor proposed by Lu et. al [71]. Lu active inductor shown in Fig. 5.4 is a differentially configured gyrator-C active inductor. The input gyrator is a pair of pseudo-differential common-gate amplifiers composed of M1,3,4,6 and the output gyrator is a pair of source followers consisting of M2,5 . A negative resistor network is formed by cross-coupled M7,8 to compensate for the resistive

72

Vo+
7 8

Vo-

Figure 5.4: Schematic of Lu at. al active inductor VCO.

loss of the active inductor. Transistors M1,4 are biased in the triode and behave as a pair of voltagecontrolled resistors whose resistance is controlled by Vb1 . It was shown in [71] that the differential input impedance of the active inductor (looking into output Vo+ and Vo- ) is given by 2[s(Cgs3 + Cgs2 ) - gm3 + gds1 ] . gds1 [gm3 + gm2 + s(Cgs3 + Cgs2 )]

Zin =

(5.1)

The inductance of the active inductor is given by Leq = 2(Cgs3 + Cgs2 ) . gds1 (2gm3 + gm2 - gds1 ) (5.2)

It is evident that the inductance is dependent of gm2 , gm3 and gds1 . Although the inductance of the active inductor can be tuned by varying these parameters, the most convenient way is to vary Vb1 , which will in turn tunes gds1,4 .

73

Figure 5.5: Schematic of the proposed ultra wide-band VCO with dual tuning mechanisms.

The schematic of the proposed ultra wide-band VCO is shown in Fig.5.5 with the modification to Lu active inductor highlighted. Two frequency tuning mechanisms are utilized in the proposed VCO. The first tuning mechanism, called the wide-band tuning mechanism, tunes the oscillation frequency of the oscillator by varying Vb1 , which in turn tunes gds1,4 . It is seen that Vb1 provides a frequency range from 0.2  6.5 GHz as shown in Fig. 5.6. The modification to Lu active inductor adds an additional tuning element and will be called the primary frequency tuning mechanism. The primary frequency tuning element is composed of M7,8,9,10 . Vb2 controls the inductance of the active inductor by adjusting the current drawn by M7,8,9,10 subsequently the transconductances of M2,3,5,6 : 2(Cgs3 + Cgs2 )   , gds1 (3 IDS 3 + 2 IDS 2 - gds1 )

Leq =

(5.3)

74

Figure 5.6: Dependence of the oscillation frequency of VCO on Vb1 .

where 2 and 3 are the transconductance parameters of M2 and M3 and are given by W L

2,3 =

2µn Cox

2,3

.

(5.4)

Fig.5.7 shows the dependence of the oscillation frequency of VCO on Vb2 for different M7,8 sizes. The additional bias current from M7,8 does not flow through the negative resistance network of M11,12 . This will reduce the quality factor of the oscillator subsequently increase the phase noise performance. To reduce the dependence of the phase noise performance on the additional

75

6

Figure 5.7: Dependence of the oscillation frequency of VCO on Vb2 .

bias current a second negative resistance network M9,10 is added. As bias current is directed away from the negative resistance network of M11,12 its resistance value will be reduced. The redirected bias current will cause the negative resistance of M9,10 to increase. The sum total of the negative resistance formed by M11,12 and M9,10 networks will remain constant regardless of the tuning value. The quality factor of the active inductor is obtained from the ratio of the imaginary part of the impedance of the active inductor to the real part of the impedance.  (Cgs3 + Cgs2 )(2gm3 + gm2 - gds1 ) . (gm3 + gm2 )(gds1 - gm3 ) +  2 (Cgs3 + Cgs2 )2

Q=

(5.5)

It becomes evident that the quality factor of the active inductor is dependent of the biasing condition of the devices of the active inductor and the frequency tuning voltages Vb1,b2 . Fig. 5.8 shows the dependence of the phase noise of the oscillator on Vb2 . The proposed VCO has been designed and implemented in TSMC-0.18µm 1.8V 6-metal 1-poly CMOS technology. The layout of the VCO is shown in Fig. 5.9. The output is buffered with an open drain PMOS matched to 50  for wafer probe measurement. The oscillator is analyzed using

76

10um

-100

500nm

2um

Phase Noise (dBc/Hz)

-110

-120

0.6

1

1.4

Control Voltage (Volts)

Figure 5.8: Dependence of the phase noise of VCO on Vb2 and nMOS size.

SpectreRF from Cadence Design Systems with BSIM3V3 device models. The output of the VCO is shown in Fig. 5.10. The simulated phase noise of the VCO is shown in Fig. 5.11 with the VCO tuned to 1.6 GHz. It is seen that the phase noise is -118.5 dBc/Hz at 1 MHz frequency offset. The power consumption of the VCO is 45 mW.

77

Figure 5.9: Layout of VCO.

1.6

1.2

Voltage (V)

0.8

0.4

0

0.2

0.6

Time (ns)

Figure 5.10: Waveform of the output voltage of VCO.

78

110

Phase Noise (dBc/Hz)

114

118

122

100K

1M

10M

Frequency (Hz)

Figure 5.11: Simulated phase noise of VCO.

Active inductor VCOs are a viable option for UWB frequency synthesizers. They offer a large tuning range and meet the phase noise specification of UWB. The major problem using active inductor VCOs is high power consumption, mainly due to the large bias current. While a large bias current is not required for the operation of the VCO, it is, however, necessary for phase noise performance. If the signal swing is a large portion of the bias current then the active devices become highly non-linear and the inductance varies largely with the signal current, which shifts the resonance frequency of the LC tank. This shift causes the quality factor of the tank to drop at a low bias current. As a result, a high power consumption is required to ensure that the phase noise meets the specifications.

5.3 Wide-Band Hybrid VCO with Active-Inductor Load
The active inductor VCO presented in the previous section has a large frequency tuning range but suffers from high-power consumption. Large power consumption is required to reduce phase noise

79

performance. The active devices that compose the active inductor become highly non-linear when the VCO has a large output voltage swing. To minimize the phase noise reduction due to the large signal swing the bias current must be increased. With a low bias current the large frequency tuning range is still maintained, so a means to obtain both good phase noise performance and a large frequency tuning range, and low-power consumption will be explored.

Ip

Is

M
Vp Cp Lp Lp Vs La

Figure 5.12: Ideal transformer loaded with an active inductor.

Fig.5.12 shows a transformer loaded with an active inductor. To simplify the analysis of the total inductance, both the transformer and the active inductor are assumed to be ideal. Writing KCL for both the primary and secondary windings without considering the capacitors yields Vp = sLp Ip + sM Is , (5.6) Is = 0, sM Ip + sLs Is + sCv where Lp , Ls , and La are the self inductance of the primary winding, that of the secondary winding of the transformer, and the inductance of the active inductor, respectively, M is the mutual inductance of the transformer. Note that M = k of the secondary winding is obtained from (5.6) M Ip , La Lp Ls where k is the coupling factor. The current

Is 

(5.7)

80

where we have assumed La > Ls to simplify analysis. The equivalent inductance seen from the primary winding of the transformer is given by

2 Leq = Lp (1 + ka ),

(5.8)

where ka =  M

Cp La

is the effective coupling factor of the transformer loaded with the active induc-

tor. It is seen from (5.8) that the equivalent inductance Leq can be tuned by varying the inductance of the active inductor. The resonant frequency of the LC network formed by Cp and the inductance seen from the primary winding of the transformer is given by 1 Cp Lp 1
2 1 + ka

o =

.

(5.9)

The first term on the right hand side of (5.9) quantifies the self-resonant frequency of the transformer network without the active inductor while the second term specifies the amount of the shift of the resonant frequency when the active inductor is connected to the secondary winding of the transformer. The tuning range of the resonant frequency of the transformer loaded with the active inductor can be determined from the tuning range of Leq . Assuming that the inductance tuning range of the active inductor is given by La,min  La  La,max , Eq. (5.8) becomes Leq = Lp M2  La , La,min La,max Cp (5.10)

where Leq = Leq,max - Leq,min and La = La,max - La,min . Eq.(5.10) reveals that to increase the frequency tuning range, the mutual inductance M and inductance tuning range of the active inductor La should be maximized. Active inductors exhibit a high level of noise as compared with their spiral counterparts. The contribution of the noise of the active inductor connected to the secondary winding of the transformer to the noise seen at the primary winding of the transformer can be determined by assuming that the transformer is noiseless and representing the noise of the active inductor with its noise2 , as shown in Fig.5.13. Consider Fig.5.13 voltage generator Va2 and noise-current generator Ia

81

Ip

Is

Va Ca

M
Vp Cp Lp Ls Ia La

Figure 5.13: Noise analysis of noiseless passive transformer loaded with a noisy active inductor.

without the capacitance of the active inductor. We assume that Va and Ia are uncorrelated to simply analysis. The noise voltage on the primary as a result from noise sources on the secondary are given by M Va + sM Ia . L1

2 )+ Vp = sLp (1 + ka

(5.11)

The first term on the right hand side of (5.11) is the voltage of the primary winding without considering the noise of the active inductor while the remaining terms quantify the contribution of the noise of the active inductor to the noise seen at the primary winding of the transformer with its power given by M La

Vnp =

2. Va2 + (M )2 Ia

(5.12)

Eq.(5.12) reveals that the contribution of the noise of the active inductor can be reduced by lowering the mutual inductance. This, however, will also lower the frequency tuning range, providing a
2 . trade off between noise and tuning range. Also observed is that the larger La , the lower Vnp

To quantify the effect of the active inductor connected to the secondary winding of the transformer on the overall quality factor of the transformer network, we assume that the transformer is ideal and representing the active inductor is modeled with an ideal inductor La in series with a resistor Ra , as shown in Fig.5.13. We neglect Rp , the series resistance of the primary winding for

82

the time being. The impedance looking into the primary winding of the transformer is given by 1 s2 (La Lp - M 2 ) + sLp Ra , s Ra z + 1

Zp = where z =
Ra La

(5.13)

is the lower frequency bound of the active inductor. Since the active inductor is
s z

inductive only when z <  < a , (5.13) can be simplified by utilizing
2 Zp  sLp (1 + ka ) + n a Ra ,

+1

s z .

(5.14)

where na =

Lp La

is the effective turn ratio of the transformer. Eq.(5.14) reveals that the transformer

2 ) in series with a resistor network can be represented by an inductor of inductance Leq = Lp (1 + ka

of resistance Req = na Ra . The quality factor of the transformer network is obtained from Leq 2 = Qa (1 + ka ) Req

Q= where Qa =
La Ra

(5.15)

is the quality factor of the active inductor. Eq. (5.15) reveals that the quality factor

of the transformer network is better than that of the active inductor. It should be emphasized that the preceding results were derived without considering the loss of the windings of the transformer and the parallel parasitic resistance of the active inductor. When the series resistance of the primary winding is considered, the impedance looking into the primary winding of the transformer becomes Ra Rp . sLa

2 ) + (na Ra + Rp ) + Zp  sLp (1 + ka

(5.16)

Eq. (5.16) was derived by assuming La  Ls and Rp  Rs where Rs is the series resistance of the secondary winding. The quality factor of the transformer network in this case is estimated from
2 1 + ka Qa  Rp La 1 + Ra Lp

Q





.

(5.17)

83

Ip Rp

Is Ra Ls La

M
Vp Lp

Figure 5.14: Quality factor analysis of passive transformer loaded with an active inductor.

The schematic of the proposed passive transformer VCO with active inductor frequency tuning is shown in Fig. 5.15. The spiral transformer is stack-configured to maximize the coupling factor. Further, it is step-down configured with turn ratio
Np Ns

=

3 2

such that the voltage swing of the primary

winding can be large in order to cope with the large voltage swing of the oscillating nodes while the voltage swing of the secondary winding is kept small to minimize the nonlinear effect of voltage swing on the inductance of the active inductor. For the purpose of comparison, the spiral VCO shown in Fig. 5.15(b) and the active inductor VCO shown in Fig.5.15(c) have also been designed in IBM CMRF8SF-0.13m 1.2V CMOS technology. The oscillators are analyzed using Spectre from Cadence Design Systems with BSIM4 device models. Fig. 5.16 shows the frequency tuning curve of the proposed VCO. The frequency tuning range of the proposed VCO is approximately 6.5-10 GHz. The frequency tuning range of the active inductor VCO is found to be 0-7 GHz approximately. Fig. 5.17 shows the phase noise of these VCOs. The phase noise of the spiral inductor VCO and that of the proposed VCO are evaluated at 7.9 GHz whereas that of the active inductor VCO is evaluated at 4 GHz. It is seen that the phase noise of the proposed VCO is significantly lower as compared with that of the active inductor VCO. The phase noise of the active inductor VCO, the spiral inductor VCO, and the proposed VCO at 1 MHz frequency offset is -80.18 dBc/Hz, -106.9 dBc/Hz, and -100.5 dBc/Hz, respectively. The

84

M3 vovc

M4 vo+

M9 Vb M5 M3 voM1 M7 M2 M8 M6 M4

M10

M1

M2

vo+ (b) Vb1 M5 M3 M6 M4 M1 voM2 vo+

M11

M12

Vb2

(a)

(c)

Figure 5.15: (a) Proposed VCO. (b) Spiral inductor VCO. (c) Active inductor VCO.

layout of the transformer is shown in Fig. 5.18. The output of the VCO is buffered with two source followers that are loaded with spiral inductors to boost the amplitude of the output voltage. The power consumption of the passive VCO, active inductor VCO, and the proposed VCO is 4 mW, 25

85

mW, and 29 mW, respectively.

Figure 5.16: Simulated frequency tuning of proposed VCO.

5.4 Wide-Band Hybrid VCO with Varactor Load
Varactors are characterized by their high quality factor. The effective quality factor of an LC-tank constituted by a spiral inductor and a varactor is mainly determined by that of the spiral inductor. Various techniques such as pattern-shielding in the substrate and using thick metals for spirals have been proposed to increase the quality factor of spiral inductors. The former has limited improvement while the latter is typically not available in low-cost CMOS technologies. Spiral transformers have also been used as a viable means to improve the quality factor [72]. The increase of the quality factor is achieved by increasing the overall inductance of the winding by including the mutual inductance with a small increase in the winding resistance. This is known as transformer feedback [19, 73].

86

Proposed

Figure 5.17: Simulated phase noise of spiral inductor VCO, active inductor VCO, and proposed VCO (labeled Hybrid VCO).

Several design techniques have been proposed to increase the frequency tuning range of transformer VCOs [74, 75, 76]. In this thesis, we propose a new technique to increase the frequency tuning range of LC-tank oscillators without sacrificing phase noise performance [77]. The proposed technique employs a step-up transformer loaded with a varactor at the secondary winding. By placing the varactor at the secondary winding, its impedance is reflected to the primary winding, increasing the desired variable capacitance. Fig. 5.19 shows a transformer loaded with a varactor. To simplify the analysis, both the transformer and the varactor are assumed to be ideal. Writing KCL for both the primary and secondary windings without considering the winding capacitance yields

87

Figure 5.18: Layout of proposed VCO.

Vp = sLp Ip + sM Is , (5.18) Is = 0, sM Ip + sLs Is + sCv where Lp , Ls and Cv are the self inductance of the primary winding, that of the secondary winding, and the capacitance of the varactor, respectively, and M is the mutual inductance. The current of the secondary winding is obtained from (5.18) M Ip Ls 1 2 s2 + o,s

Is =

,

(5.19)

where o,s = 

1 is the self-resonate frequency of the secondary winding. The inductance Ls Cv

88

seen from the primary winding is given by k2 2 s2 + o,s

Leq = Lp 1 +

.

(5.20)

It is seen from (5.20) that Leq can be tuned by varying the capacitance of the varactor. The resonant frequency of the primary winding is given by  1  Cp Lp 

o,p =

1 1+
k2 2 s2 +o,s

.

(5.21)

The first term on the right hand side of (5.21) quantifies the self-resonant frequency of the primary winding without the varactor while the second term specifies the amount of the shift of the resonant frequency when the varactor is connected to the secondary winding. The tuning range of the resonant frequency of the primary winding of the transformer loaded with the varactor can be determined from the tuning range of Leq . Assuming that the capacitive tuning range of the varactor is given by Cv,min Cv Cv,max , (5.19) becomes Leq  M 2 o Cv , 2 )2 (s2 + o (5.22)

where Leq = Leq,max - Leq,min and Cv = Cv,max - Cv,min . Eq. (5.22) reveals that to increase the frequency tuning range, the mutual inductance M and capacitance tuning range of the varactor Cv should be maximized. The contribution of the noise of the varactor to the noise seen at the primary winding can be determined by assuming that the transformer is noiseless and representing the noise of the varactors
2 and noise-current generator I 2 , as shown in Fig. 5.20. If we with its noise-voltage generator Vn n

assume that Vn and In are uncorrelated to simply analysis the noise voltage on the primary resulting from a noise source on the secondary is given by M Vn + sM In , Ls

Vp = sLp (1 + ) +

(5.23)

89

Ip

Is

M
Vp Cp Lp Ls Vs Cv

Figure 5.19: Ideal transformer loaded with a varactor.

where = k2 . 2 s2 + o,s (5.24)

The first term on the right hand side of (5.23) is the voltage of the primary winding without considering the noise of the varactor while the remaining terms quantify the contribution of the noise of the varactor to the noise seen at the primary winding. The noise power at the primary winding is given by M Ls
2

2 = Vnp

2 + (M )2 I 2 . Vn n

(5.25)

Eq.(5.25) reveals that the contribution of the noise of the varactor can be reduced by lowering the mutual inductance. This, however, also lowers the frequency tuning range, providing a trade off between noise and frequency tuning range. Spiral inductors typically have a quality factor ranging from 5-15 while quality factors larger than 50 are common for varactors. The quality factor of an LC tank is therefore dominated by that of the spiral inductor. However, using the reflected impedance of the varactor to increase the tuning range no longer warrants neglecting of the quality factor of the varactor. To quantify the effect of the varactor connected to the secondary winding on the overall quality factor of the primary winding, we assume that the transformer is ideal and we represent the varactor with an ideal capacitor Cv in series with a resistor Rs , as shown in Fig. 5.21. By neglecting Rp the impedance looking into the

90

Ip

Is

Vs

M
Vp Cp Lp Ls Vs In Cv

Figure 5.20: Noise analysis of noiseless passive transformer loaded with a noisy secondary circuit.

primary winding is given by

Zp sLp (1 + ) + nRs , where the turn ratio n is Lp . Ls

(5.26)

n=

(5.27)

Eq. (5.26) reveals that the primary winding can be represented by an inductor of inductance Leq = Lp (1 + ) in series with a resistor of resistance Req = nRs . The quality factor of the primary winding is obtained from Leq = Qs (1 + ), Req

Qp =

(5.28)

where the quality factor of the secondary winding is given by Ls . Rs

Qs =

(5.29)

When the series resistance of the primary winding is considered, the impedance looking into the primary winding of the transformer becomes

91

Zp sLp (1 + ) + (nRs + Rp ) +

Rs Rp . sLs

(5.30)

Eq.(5.30) was derived by assuming Rp Rs where Rs is the series resistance of the secondary winding. The quality factor of the primary winding in this case is estimated by  1+  . R Ls 1 + Rp L s p 

Qp  Qs 

(5.31)

Ip

Is

Rp Vp Lp

Rs

M
Ls

Vs

Cv

Figure 5.21: Quality factor analysis of transformer loaded with varactor.

The schematic of the proposed transformer VCO with reflected capacitance frequency tuning is shown in Fig. 5.22. The output of the VCO is buffered with two source followers that are loaded with spiral inductors to boost the output voltage. The transformer is stack-configured to maximize Np 2 its coupling factor. Furthermore, it is step-up configured with a = turn ratio such that an upNs 3 scaling of the secondary winding impedance into the primary winding is obtained. This increases the frequency tuning range of the VCO. The self-inductance of the secondary winding functions to tune out the fixed capacitance of the varactor, preventing it from being multiplied back to the primary winding circuit and reducing the frequency tuning range of the oscillator. The proposed VCO has been designed in IBM CMRF8SF-0.13µm 1.2V CMOS technology and analyzed using

92

Spectre from Cadence Design Systems with BSIM4 models. For the purpose of comparison, another VCO utilizing the same transformer with the same varactor loading to the primary winding was also designed and analyzed.

M3

M4

Output buffer

Vc

Output buffer

v o+

v o-

M1

M2

J

Figure 5.22: Schematic of transformer VCO with reflected capacitance frequency tuning. Circuit parameters : W1,2 = 60µm, W3,4 = 80µm, tail current source : nMOS transistor with W = 250µm L = 2µm, V=1V. The buffer is a differential pair with a balun load, the nMOS transistors are the same size as the core ones, and the balun is 9.8 nH. Varactor : L = 2µm, W = 64µm.

Fig.5.23 shows the frequency tuning curve of the proposed VCO. The frequency range of the VCO with the varactor loading the primary winding is 8.2-10.1 GHz. The frequency tuning range of the proposed VCO with the varactor loading the secondary winding is 7.25-10.2 GHz. A 64% increase in the frequency tuning range is obtained. Fig.5.24 compares the phase noise of the two VCOs. It is seen that the phase noise of the

93

10.5 LC tank VCO

9.5 Frequency (GHz)

Reflected Varactor VCO 8.5

7.5

0.2

0.6 Tuning (V)

1

Figure 5.23: Simulated frequency tuning of VCO with varactor loading the secondary and primary windings.

proposed VCO is comparable to that with varactor loading the primary winding. The phase noise of the VCO with varactor loading the primary winding and that of the VCO with varactor loading the secondary winding are - 109 dBc/Hz and -111 dBc/Hz at 1 MHz frequency offset, respectively. The layout of the proposed VCO is shown in Fig. 5.28. The configuration of the stacked transformer is shown in Fig.5.28 and the micro photo of the fabricated chip in Fig. 5.29. The primary winding stacked on the top of the secondary winding.

5.5 Performance Comparison
Table. 5.1 tabulates the performance metrics of the three presented wide band oscillators and compares them to existing wide band VCOs. It is clear from the performance comparison that the active inductor is able to achieve a large frequency tuning range with good phase noise performance. The cost of high phase noise performance is high power consumption. The active inductor hybrid takes advantage of the large frequency tuning range of the active inductor and the phase noise performance of the passive transformer. The varactor loaded hybrid VCO is able to achieve good phase

94

Figure 5.24: Phase noise of VCO with varactor loading the secondary and primary windings.

4.8

Current Consumption (mA)

4.4

Reflected Varactor VCO

4

LC Tank VCO

3.6

0.2

0.6 Tuning Voltage

1

Figure 5.25: Power consumption of VCO with varactor loading the secondary and primary windings.

noise performance, low power consumption and still retains a wide frequency tuning. All of the

95

-50

Phase Noise (dBc/Hz)

-70

-90

-110

100k Frequency

1M

10M

Figure 5.26: Phase noise plot of the proposed VCO.

Figure 5.27: Layout of proposed VCO.

VCOs are capable of providing a large frequency tuning range without resorting to bank switching networks.

96

Figure 5.28: Configuration of the transformer used in the hybrid VCO.

Figure 5.29: Die photo of the transformer used in the hybrid VCO.

5.6 Chapter Summary
The development of wide frequency tuning range VCOs without switched bank networks has been presented. We have shown that active-inductor VCOs exhibit good phase noise performance and

97

Table 5.1: Comparison of wide band VCOs .

Ref.

Technology

[65] [78] [63] [67] [61] [62] [66] [68] [69] Active Inductor Active Inductor Hybrid Varactor Hybrid

0.13um CMOS 0.18um CMOS 0.18um CMOS 65nm CMOS 0.13um CMOS 0.13um CMOS 0.18um CMOS 0.13um CMOS 0.13um CMOS 0.18um CMOS 0.18um CMOS 0.13um CMOS

Center freq. [GHz] 4 5.6 1.12 11.45 4.28 4.8 3.71 3.2 5.2 1.6 8 8.73

Power [mW] 10.5 30.9 9 3.48 5 1.2 7.02 n/a 8 45 29 5.76

Phase Noise [dBc/Hz] -120 -75 -118 -99 -119 -113 -124 -124 -101 -118 -100 -111

Bit Select 9 n/a 6 6 3 3 3 2 3 n/a n/a n/a

Tuning Range [%] 37 64 64 126 39 37 39 87 69 69 43.7 33.8

provide a wide frequency tuning range, at the cost of high power consumption. Hybrid oscillators that utilize the wide frequency tuning of active inductors and the low noise of passive transformers have been proposed. Hybrid oscillators that employ a passive transformer loaded with a varactor have also been proposed. The impedance transformation of the transformer boosts the frequency tuning range of the oscillators while maintaining low phase noise. These hybrid VCOs meet the specifications of the first mode of UWB.

98

Chapter 6

UWB Current-Mode Frequency Synthesizer

This chapter proposes a frequency synthesizer for UWB. The proposed frequency synthesizer uses current-mode architecture investigated in Chapter 5. It introduces a new hopping scheme for fast locking. This chapter starts with an introduction of the fast hopping scheme that will be utilized for the MB-OFDM UWB current-mode frequency synthesizer. The quick hopping scheme will allow a traditional integer PLL based frequency synthesizer to lock in 9.5 ns, as required by MB-OFDM UWB. Section 6.2 discusses a wide frequency tuning range VCO that is suitable for current-mode MB-OFDM UWB frequency synthesizers. Section 6.3 studies a bang-bang phase detector for MBOFDM frequency synthesizers. Section 6.4 investigates an injection loxking frequency divider. Section 6.5 contains simulation results of the entire current-mode UWB frequency synthesizer, and comparisons to published works. The chapter concludes in Section 6.6

99

6.1 Quick Hopping for UWB Frequency Synthesizer
A fast-locking frequency synthesizer consists of a phase detector, a CCO, an ILO and a loop filter with a controllable switching current, as shown in Fig. 6.1. Usually an ILO pre-scaler is used to reduce the frequency and power consumption of the scheme the ILO acts as a programmable divider.
1 N

frequency divider, but in the quick hopping

CCO

I/V

Figure 6.1: Architecture of a frequency synthesizer utilizing the quick hopping scheme.

The loop filter is a typical current-mode loop filter, and can switch to a fixed current output. By switching to this prefixed current the CCO is instantly forced to oscillate at a pre-set frequency. By having multiple prefixed values to jump to, the CCO frequency can be rapidly shifted. The schematic of the fast-hopping current-mode loop filter is shown in Fig. 6.2. The filter differs from normal current-mode loop filters by adding a switched-capacitor bank. By switching in a capacitor with a pre-charged value and the old capacitor out a new loop filter current is generated. Each UWB sub-channel is assigned a capacitor and each capacitor is precharged with a specific voltage. As the capacitors are switched out of the circuit they can be slowly trickle charged or discharged

100

Figure 6.2: Schematic of proposed Mixer for frequency translation.

to the proper voltage. The prefixed value stored on the capacitor will cause the CCO to jump to a new frequency, which is approximately the frequency of a UWB sub-channel. Fig. 6.3 shows a typical tuning curve of a VCO transposed on top of the sub-harmonic lock range of the ILO. In the tuning range of the VCO there are three sub-harmonics in the ILO locking range. In the lower tuning range of the VCO there is the tuning range of the 6th subharmonic. As the control signal increases VCO frequency will exceed the lock range of the 6th sub-harmonic. As the control signal continues to increase VCO frequency will fall into the 7th sub-harmonic lock range. These sub-harmonics spread across the tuning range of the VCO. If the UWB frequency synthesizer is locked to the 6th sub-harmonic, a command will be sent to switch out the current capacitor and the 2nd capacitor will be switched in. The 2nd capacitor is pre-charged and causes the frequency synthesizer to shift VCO frequency. The new frequency will be within the lock range of the ILO's 7th sub-harmonic. The frequency synthesizer's feedback will cause the VCO to shift and lock to the 7th sub-harmonic of the reference frequency. This process is repeated and the UWB frequency synthesizer hops from one channel to another. Unfortunately, UWB sub-channels are not an integer multiple of any reference frequency. With a reference frequency of 528 MHz, the required division ratios for the first three UWB sub-channels are 6.5, 7.5 and 8.5. The 0.5 division ratio is difficult to realize. Instead of trying to add an additional 0.5 division in the feedback loop the proposed frequency synthesizer will operate at twice

101

4.50

ILO Locking Rang 8th Sub-harmonic

4.25

Dead-Zone/Open Loop

1st UWB sub-channel

4.00

ILO Locking Rang 7th Sub-harmonic

3.75

Dead-Zone/Open Loop

1st UWB sub-channel

3.50

ILO Locking Rang 6th Sub-harmonic

3.25
1st UWB sub-channel

Figure 6.3: CCO tuning curve showing the UWB sub-channels including the locking range of the ILO.

the required frequency. By doubling the reference frequency the division ratios become 6, 5, and 8. Doubling the frequency will require the CCO to have twice the frequency tuning range, requiring over 3 GHz frequency range for the first 3 UWB channels. Doubling the frequency has two key advantages, increased loop bandwidth and quadrature generation. By doubling the reference frequency we can double the loop bandwidth, which will decrease the lock time. The second advantage is that the output divide-by-2 will provide a quadrature output, eliminating the need for a phase shifter or quadrature VCO. The final frequency synthesizer topology is shown in Fig. 6.4.

102

6336 7392 8448

1056

/2

I Q

Figure 6.4: Final topology of the current-mode UWB frequency synthesizer.

6.2 Wide-Band VCO
The wide-band hybrid VCO with varactor load from chapter 5 will be used in the UWB CurrentMode Frequency Synthesizer and is redrawn in Fig. 6.5 for convenience. The VCO uses the impedance scaling properities of a passive spiral transformer to increase the capacitance tuning range of a varactor used to load the secondary winding. The increased capacitance tuning range results in a large frequency tuning range of the primary winding circuit. Additional varactors were added to the secondary winding from the VCO presented in chapter 5 to reduce the VCO's center oscillation frequency to the second UWB band. The re-tuned frequency tuning range is shown in Fig. 6.6. The VCO is able to span XX GHz, allowing it the ability to tune to all three of the lower UWB bands. The phase noise of the wide-band hybrid VCO with varactor load is shown in Fig. 6.7, the phase noise at 1 MHz is -108 dBc/Hz, which is lower than that required by the UWB specification.

103

M3

M4

Output buffer

Vc

Output buffer

v o+

v o-

M1

M2

J

Figure 6.5: Schematic of transformer VCO with reflected capacitance frequency tuning. Circuit parameters : W1,2 = 60µm, W3,4 = 80µm, tail current source : nMOS transistor with W = 250µm L = 2µm, V=1V. The buffer is a differential pair with a balun load, the nMOS transistors are the same size as the core ones, and the balun is 9.8 nH. Varactor : L = 2µm, W = 64µm.

6.3 Bang-Bang Phase Detector
The phase detector for the proposed current-mode frequency synthesizer is a bang-bang phase detector, with the schematic shown in Fig. 6.8. The bang-bang phase detector is composed of two back-to-back TSPC latches to form a D Flip-Flop. The transfer function of the bang-bang phase detector is shown in Fig. 6.9. The ouput is either high or low depending on which phase is leading. The bang-bang phase detector has a very large gain, resulting in a fast lock. When the frequency synthesizer is phase and frequency locked the output of the bang-bang phase detector output will toggle as the VCO and reference phase will alternate between leading and lagging.

104

9.25

8.25

7.25

6.25

Figure 6.6: Simulated frequency tuning of VCO with varactor loading the secondary and primary windings.

-50

Phase Noise (dBc/Hz)

-70

-90

-110

100k Frequency

1M

10M

Figure 6.7: Phase noise plot of the Wide-Band Hybrid VCO with Varactor Load.

6.4 Injection locked Oscillator for Frequency Division
The schematic of the ILO used for frequency division is shown in Fig. 6.10. It consists of a pseudodifferential pair. An RC relaxation oscillator is used instead of an LC -tank oscillator because the

105

Figure 6.8: Schematic of bang-bang phase detector.

1.4

Output Voltage (V)

1

0.6

0.2

-80

-40

0 Phase Difference (degrees)

40

80

Figure 6.9: Output voltage of Bang-Bang phase detector.

locking range of LC -tank ILOs is small. A large lock range is required for the proposed frequency divider ILO because the larger the lock range the lower the dead-zone in the VCO's tuning curve between the ILO's subharmonic lock ranges. When the VCO is inside the dead-zone, the frequency synthesizer is open loop and will drift to the channel above the dead-zone. To ensure that the VCO will not fall inside the dead-zone, the ILO's lock range must be maximized. The lock range of the proposed ILO is shown in Table. 6.1. As the frequency difference increases the ILO requires more time to lock. The locking time of the ILO can be increased by increasing the bias current of the ILO, at the cost of power consumption.

106

I

I I

= Even Sub-Harmonics = Odd Sub-Harmonics

Figure 6.10: Schematic of proposed ILO.

Table 6.1: Locking range of ILO harmonics

Harmonic Number 6 7 8

Lower Frequency (GHz) 6.145 7.152 8.310

Upper Frequency (GHz) 6.559 7.666 8.655

The locking transient of the ILO is shown in Fig. 6.11. The layout of the ILO is shown in Fig.6.12.

6.5 Simulation Results
A current-mode UWB frequency synthesizer has been implemented in TSMC-0.13µm 1.2V 8metal 1-poly CMOS technology and analyzed using SpectreRF from Cadence Design Systems with BIM3.3v device models. The frequency synthesizer is able to lock in the required 9.5 ns guard period. The locking transient is shown in Fig. 6.13, the synthesizer is switched between the first and third UWB bands. Due to the switching capacitor network the capacitances can be individually tuned to optimize the loop bandwidth and damping for each of the UWB bands.

107

1.09

Frequency (GHz)

1.07

1.05

20

40

60

80

100

Time (ns)

Figure 6.11: Locking transient of ILO.

Figure 6.12: Layout of proposed ILO.

Table. 6.2 compares the proposed current-mode UWB frequency synthesizer to published UWB frequency synthesizers. Several key advantages proposed frequency synthesizer over published

108

180

Control signal (uA)

140

100

60

20 10 30 50 70 90

Time (ns)

Figure 6.13: Locking characteristics of the proposed UWB Current-mode frequency synthesizer.

works becomes apparent: · Low power consumption - because the proposed UWB frequency synthesizer does not use multiple single side band mixers its power is much lower than direct synthesis based UWB frequency synthesizers. · No spur generation - because the proposed frequency synthesizer uses a closed loop PLL instead of frequency translation or non-linear frequency multiplication or division it does not generate significant spurs.

6.6 Chapter Summary
A current-mode frequency synthesizer for MB-OFDM UWB has been presented. It was shown that the proposed quick hopping scheme allowed the frequency synthesizer to hopping under 9.5 ns, meeting the MB-OFDM UWB requirement. The frequency synthesizer uses an ILO as its frequency divider. The frequency synthesizer doesn't contain a programmable divider to channel hop. Instead,

109

Table 6.2: Comparison of state-of-the-art UWB frequency synthesizers.

Ref.

Technology

[14] [15] [25] [16] [17] [19] [21] [29] [28] [22] [23] [24] This Work

0.18um CMOS 0.18um CMOS 90nm CMOS 0.18um CMOS 0.18um CMOS 0.18um CMOS 0.18um CMOS 0.18um SiGe 0.18um CMOS 65nm CMOS 0.18um CMOS 0.18um CMOS 0.13um CMOS

Lock time [ns] 8 4 9 2 1 2.4 2 3 1 6 3 3 9

Spur Level [dBc] -35 -25 -32 -40 -37 -20 -26 -40 -37 -43 -30 -33 n/a

Phase Noise [dBc/Hz] -120 -109 -120 n/a -103 n/a -98 -130 -110 -128 n/a -98 -108

Total Power [mW] 54 47 55 65 48 34 68 88 n/a 43 45 117 8.5

Power per Band [mW] 18 15.6 3.9 16.25 6.85 11.3 22.6 12.6 n/a 4.8 3.2 8.3 2.83

it uses the sub-harmonic injection locking of an ILO to lock to a select sub-harmonics of the CCO output. To select which sub-harmonic the ILO locks to the CCO's oscillation frequency is forced to a new region of the frequency tuning curve. By applying a pre-set control signal value onto the loop filter the CCO can be shifted close to the UWB band. Once the CCO is in the proximity of the UWB band the feedback mechanism will ensure fast phase lock.

110

Chapter 7 Conclusions
7.1 Thesis Summary
This thesis dealt with the design of current-mode techniques for ultra wideband applications. The FCC's two proposed standards for UWB transmission namely DS-UWB and MB-OFDM UWB had been discussed. DS-UWB uses the direct modulation of narrow pulses to represent the base-band data. It, however, is difficult to synchronize. MB-OFDM UWB uses more traditional narrow-band techniques by sub-dividing the ultra wide-band into a set of small bands of 528 MHz. A quick hopping protocol allows 9.5 ns guard time. The short guard time requires a loop bandwidth greater than the stability limit of PLL based frequency synthesizers. Three state-of-the-art UWB frequency synthesizers were presented: A DLL with edge combiner, a fixed frequency synthesizer with a programmable output frequency divider, and direct synthesis. All of the existing UWB frequency synthesizers suffer from output spurs. An in-depth examination of the principle of current-mode filtering and its applications to PLLs was presented. Current-mode PLLs use currents as the control signal. The use of a current-mode signal allowed the decoupling of the control signal dynamic range from supply voltage scaling. Current-mode filtering can be accomplished using active inductors or active transformers. Active

111

inductors and active transformers offer the advantages of a small silicon area and a tunable inductance. Active inductors and active transformer current-mode filtering for PLLs was examined in detail. Type I and type II current-mode PLLs were developed using active inductors and active transformer. Type I and type II current-mode PLLs have similar loop bandwidth and damping parameters as their voltage-mode counterparts. Active transformer current-mode PLLs also have additional mutual coupling parameters in the tuning of the loop bandwidth and damping. The phase noise shaping from the noise sources in the PLL of a current-mode PLL was analyzed. The simulation results of an active inductor current-mode PLL and an active transformer current-mode PLL were presented.

Three wide frequency tuning range VCOs for MB-OFDM UWB were developed. It was shown that active inductor VCOs exhibit good phase noise performance and provide a wide frequency tuning range, at the cost of high power consumption. A hybrid oscillator that utilized the wide frequency tuning of an active inductor and the low noise of a passive transformer was analyzed. Another hybrid oscillator that employed a passive transformer loaded with a varactor was also developed. It was shown that the impedance transformation of transformers can boost the frequency tuning range of the oscillator while maintaining low phase noise. All three wideband VCOs were capable of providing large frequency tuning ranges without restoring to switch banked networks.

A current-mode frequency synthesizer for MB-OFDM UWB was developed. The quick hopping scheme enabled the frequency synthesizer to hop within 9.5 ns. The frequency synthesizer used an ILO as the frequency divider. The frequency synthesizer doesn't contain a programmable divider to channel hop. It uses sub-harmonic injection locking of an ILO to lock to a selective sub-harmonics of the CCO output. The CCO's oscillation frequency is forced to a new region of the frequency tuning curve to accomplish channel hopping. By applying a pre-set control signal value to the loop filter the CCO was forced to the proximity of the UWB band in which the feedback mechanism will result in phase and frequency lock.

112

7.2 FUTURE RESEARCH
The work reported in this thesis can be extended in the following directions: 1. Extending the active inductors and active transformers to compensate for process spread and supply voltage variation. This will allow the inductance of the active components to be better defined, especially when a large input is encountered. 2. Extending the pre-set voltage concept to adjust the VCO frequency directly instead of changing the control signal value. A common technique to extend the frequency tuning range of VCO is to switch capacitors in the LC -tank circuit. This will increase the tuning range of the VCO while reducing the VCO sensitivity leading to better phase noise. 3. Improving the design flow of hybrid varactor loaded oscillators. The design of hybrid oscillators requires laying out the proposed transformer in Cadence Virtuoso. The layout is imported into ADS finite element solver to generate an equivalent circuit network. Once ADS creates the equivalent circuit network the network is then imported back into Cadence to simulate VCO's frequency tuning range. This design procedure is slow and required a great effort to fine tune the transformer to adjust the free running frequency.

113

Appendix A Publications
· D. DiClemente and F. Yuan, "A low phase noise large frequency tuning range CMOS voltagecontrolled oscillator using spiral transformer and active inductor," Analog Integrated Circuits and Signal Processing. Submitted in May 2011. · D. DiClemente, F. Yuan, and A. Tang, "Current-mode phase-locked loops with CMOS active transformers," IEEE Transactions on Circuits and Systems II - Express Briefs, Vol.55, No. 8, pp.771-775, August 2008. · D. DiClemente and F. Yuan, "Current-mode phase-locked loops : a new architecture," IEEE Transactions on Circuits and Systems II - Express Briefs, Vol. 54, No. 4, pp. 303 - 307, Apr. 2007 · D. DiClemente and F. Yuan, "A passive transformer voltage-controlled oscillator with reflected impedance frequency tuning," Proc. IEEE Mid-West Symp. on Circuits Syst., pp.8083, Seattle, August 2010. · D. DiClemente and F. Yuan, "A passive transformer voltage-controlled oscillator with active inductor frequency tuning for ultra wideband applications," Proc. 2nd Microsystems and Nanoelectronics Research Conf., pp.80-83, Ottawa, Oct. 2009.

114

· D. DiClemente and F. Yuan,"Ultra-wide tuning range voltage-controlled oscillator," Proc. IEEE Int'l Symp. on Circuits and Systems, pp.2097-2100, Taipei, May 2009. · D. DiClemente and F. Yuan, "Current-mode phase-locked loops," Presented at CMC Microsystems Annual Symp. Ottawa, Oct. 2007. · D. DiClements, F. Yuan, and A. Tang, "CMOS active transformer current-mode phase-locked loops," Proc. IEEE Mid-West Symp. Circuits and Systems, pp.1528-1531, Montreal, Aug. 2007. · D. DiClemente and F. Yuan, "Current-mode phase-locked loops with low supply voltage sensitivity," in Proc. IEEE Int'l Symp. Circuits Syst., pp. 2172 - 2175, New Orleans, May 2007. · D. DiClemente and F. Yuan, "Current-mode phase-locked loops," Presented at CMC Microsystems Annual Symposium, Ottawa, Oct. 2006. · D. DiClemente and F. Yuan, "An area-efficient CMOS current-mode phase-locked loop," Proc. IEEE MidWest Symp. on Circuits and Systems. Vol.2, pp.574-578, August 2006.

115

Appendix B Glossary
BER CCO CP DAC DS-UWB FCC GPS HDTV ICI IF IFFT IP3 ISM MB-OFDM PD PFD PLL Bit Error Rate Current-Controlled Oscillator Charge Pump Digital to Analog Convertor Direct Sequencing Ultra Wide-Band Federal Communication Commission Global Positioning System High Definition Television Inter-Channel Interference Immediate Frequency Inverse Fast Fourier Transform Third-order Intercept Point Instrument, Scientific, and Medical Multiple Band Orthogonal Frequency Division Multiplexing Phase Detector Phase/Frequency Detector Phase Locked Loop

116

QoS QPSK SSB SNR TFC TSPC WPAN VCO

Quality of Service Quadrature Phase Shift Keying Single Side Band mixing Signal to Noise Ratio Time Frequency Code True Single Phase Clocked Wide Personal Area Network Voltage-Controlled Oscillator

117

Bibliography
[1] B.Waggoner, "Understanding HD Formats," Windows Media Home, 2004. [2] H. Chan, "Comparing wireless data network standards," AFRICON 2007, pp. 1 ­15, Sep. 2007. [3] L. Yang and G. Giannakis, "Ultra-wideband communications: an idea whose time has come," IEEE Signal Processing Magazine, vol. 21, no. 6, pp. 26 ­ 54, Nov. 2004. [4] H. Xu and L. Yang, "Ultra-wideband technology: Yesterday, today, and tomorrow," Proc. IEEE Radio and Wireless Symp., pp. 715 ­718, Jan. 2008. [5] M. Ranjan, "Analysis and Design of CMOS Wideband Receivers," Ph.D. dissertation, University of California, San Diego, 2004. [6] H. Arlsan, Z. Chen, and M. D. Benedetto, Ultra WideBand Communication. John Wiley and Sons, 2006. [7] M. D. Benedetto and G. Giancola, Understanding Ultra Wide Band: Radio Fundamentals. Upper Saddle River, NJ: Prentice Hall, 2004. [8] J. Proakis, Digital Communications, 4th ed. New York: McGraw-Hill, 2001. Hoboken, NJ:

[9] H. Zheng, S. Lou, L. Leung, and H. Luong, "RF system architectures and circuit techniques for wideband transceivers," Proc. IEEE Radio-Frequency Integration Technology, pp. 30 ­ 37, Nov. 2005.

118

[10] C. Mishra, A. Valdes-Garcia, F. Bahmani, A. Batra, E. Sanchez-Sinencio, and J. SilvaMartinez, "Frequency planning and synthesizer architectures for multiband OFDM UWB radios," Proc. IEEE Microwave Theory and Techniques, vol. 53, no. 12, pp. 3744 ­ 3756, Dec. 2005. [11] J.-E. Lee, E.-C. Park, C.-Y. Cha, H.-S. Chae, C.-D. Suh, J. Koh, H. Lee, and H.-T. Kim, "A frequency synthesizer for UWB transceiver in 0.13 um CMOS technology," Proc. Int'l Symp. Silicon Monolithic Integrated Circuits in RF Systems, pp. 37 ­40., Jan. 2006. [12] M. Farazian, P. Gudem, and L. Larson, "Fast hopping carrier generation for 14-band multiband OFDM UWB in digital CMOS," Proc. Silicon Monolithic Integrated Circuits in RF Systems (SiRF), pp. 251 ­254, Jan. 2010. [13] F. Gardner, "Charge-Pump Phase-Lock Loops," Communications, IEEE Transactions on, vol. 28, no. 11, pp. 1849 ­ 1858, Nov. 1980. [14] T.-C. Lee and K.-J. Hsiao, "The design and analysis of a DLL-based frequency synthesizer for UWB application," IEEE J. Solid-State Circuits, vol. 41, no. 6, pp. 1245 ­ 1252, Jun. 2006. [15] T.-C. Lee and Y.-C. Huang, "The design and analysis of a Miller-divider-based clock generator for MBOA-UWB application," IEEE J. Solid-State Circuits, vol. 41, no. 6, pp. 1253 ­ 1261, Jun. 2006. [16] H. Zhang and G. Chen, "A monolithic fast-hopping frequency synthesizer for MB-OFDM UWB," Proc. Conf. Microwave Conference Proceedings, vol. 2, p. 4, Dec. 2005. [17] J. Lee, "A 3-to-8-GHz fast-hopping frequency synthesizer in 0.18um CMOS technology," IEEE J. Solid-State Circuits, vol. 41, no. 3, pp. 566 ­ 573, Mar. 2006. [18] R. van de Beek, D. Leenaerts, and G. van der Weide, "A fast-hopping single-PLL 3-band MBOFDM UWB synthesizer," IEEE J. Solid-State Circuits, vol. 41, no. 7, pp. 1522 ­1529, Jul. 2006.

119

[19] C. chih Lin and C.-K. Wang, "Subharmonic direct frequency synthesizer for mode-1 MBOFDM UWB system," VLSI Circuits, 2005. Digest of Technical Papers. 2005 Symposium on, pp. 38 ­ 41, Jun. 2005. [20] F. Lee and A. Chandrakasan, "A BiCMOS Ultra-Wideband 3.1 amp to 10.6-GHz Front-End," IEEE J. Solid-State Circuits, vol. 41, no. 8, pp. 1784 ­1791, Aug. 2006. [21] H.-S. Chae, E.-C. Park, C.-Y. Cha, J.-E. Lee, C.-D. Suh, J. Koh, H. Lee, and H.-T. Kim, "A Fast Hopping Frequency Synthesizer for UWB Systems in a CMOS Technology," Int'l. Symp. Wireless Communication Systems, pp. 370 ­374, Sep. 2005. [22] A. Mazzanti, M. Vahidfar, M. Sosio, and F. Svelto, "A Low Phase-Noise Multi-Phase LO Generator for Wideband Demodulators Based on Reconfigurable Sub-Harmonic Mixers," SolidState Circuits, IEEE Journal of, vol. 45, no. 10, pp. 2104 ­2115, Oct. 2010. [23] H. Zhang, Y. Niu, S. Tang, R. Zhang, and G. Chen, "A 3.1 - 10.6GHz frequency synthesizer for MB-OFDM UWB transceivers," Signals Systems and Electronics (ISSSE), 2010 International Symposium on, vol. 1, pp. 1 ­4, Sep. 2010. [24] T.-Y. Lu and W.-Z. Chen, "A 3-to-10GHz 14-Band CMOS Frequency Synthesizer with Spurs Reduction for MB-OFDM UWB System," Solid-State Circuits Conference, 2008. ISSCC 2008. Digest of Technical Papers. IEEE International, pp. 126 ­601, Feb. 2008. [25] M. Guermandi, E. Franchi, and A. Gnudi, "A CMOS 90 nm 55 mW 3.4-to-9.2 GHz 12 Band Frequency Synthesizer for MB-OFDM UWB," IEEE Microwave and Wireless Components Letters, vol. 19, no. 11, pp. 752 ­754, Nov. 2009. [26] B. Razavi, T. Aytur, C. Lam, F.-R. Yang, K.-Y. Li, R.-H. Yan, H.-C. Kang, C.-C. Hsu, and C.-C. Lee, "A UWB CMOS transceiver," IEEE J. Solid-State Circuits, vol. 40, no. 12, pp. 2555 ­ 2562, Dec. 2005.

120

[27] R. Blazquez, P. Newaskar, F. Lee, and A. Chandrakasan, "A baseband processor for pulsed ultra-wideband signals," IEEE Proc. Custom Integrated Circuits Conference, pp. 587 ­ 590, Oct. 2004. [28] J. Lee and D.-W. Chiu, "A 7-band 3-8 GHz frequency synthesizer with 1 ns band-switching time in 0.18 um CMOS technology," IEEE Int'l Tech. Dig. Solid-State Circuits Conference, pp. 204 ­593 Vol. 1, Feb. 2005. [29] A. Ismail and A. Abidi, "A 3.1- to 8.2-GHz zero-IF receiver and direct frequency synthesizer in 0.18- um SiGe BiCMOS for mode-2 MB-OFDM UWB communication," IEEE J. SolidState Circuits, vol. 40, no. 12, pp. 2573 ­ 2582, Dec. 2005. [30] E. Alon, J. Kim, S. Pamarti, K. Chang, and M. Horowitz, "Replica compensated linear regulators for supply-regulated phase-locked loops," IEEE J. Solid-State Circuits, vol. 41, no. 2, pp. 413 ­ 424, Feb. 2006. [31] K.-H. Cheng, W.-B. Yang, and C.-M. Ying, "A dual-slope phase frequency detector and charge pump architecture to achieve fast locking of phase-locked loop," IEEE J. Circuits and Systems II: Analog and Digital Signal Processing, vol. 50, no. 11, pp. 892 ­ 896, Nov. 2003. [32] R.-J. Yang, K.-H. Chao, S.-C. Hwu, C.-K. Liang, and S.-I. Liu, "A 155.52 mbps-3.125 gbps continuous-rate clock and data recovery circuit," IEEE J. Solid-State Circuits, vol. 41, no. 6, pp. 1380 ­ 1390, Jun. 2006. [33] R.-J. Yang, K.-H. Chao, and S.-I. Liu, "A 200-Mbps sim;2-Gbps continuous-rate clock-anddata-recovery circuit," IEEE Trans. Circuits and Systems I: Regular Papers, vol. 53, no. 4, pp. 842 ­ 847, Apr. 2006. [34] J. Kim, M. Horowitz, and G.-Y. Wei, "Design of CMOS adaptive-bandwidth PLL/DLLs: a general approach," IEEE Trans. Circuits and Systems II: Analog and Digital Signal Processing, vol. 50, no. 11, pp. 860 ­ 869, Nov. 2003.

121

[35] J. Kim, J.-K. Kim, B.-J. Lee, N. Kim, D.-K. Jeong, and W. Kim, "A 20-GHz phase-locked loop for 40-gb/s serializing transmitter in 0.13- um CMOS," IEEE J. Solid-State Circuits, vol. 41, no. 4, pp. 899 ­ 908, Apr. 2006. [36] C. Charles and D. Allstot, "A Calibrated Phase/Frequency Detector for Reference Spur Reduction in Charge-Pump PLLs," IEEE Trans. Circuits and Systems II: Express Briefs, vol. 53, no. 9, pp. 822 ­826, Sep. 2006. [37] S. Cheng, H. Tong, J. Silva-Martinez, and A. Karsilayan, "Design and Analysis of an Ultra high-Speed Glitch-Free Fully Differential Charge Pump With Minimum Output Current Variation and Accurate Matching," IEEE Trans. Circuits and Systems II: Express Briefs, vol. 53, no. 9, pp. 843 ­847, Sep. 2006. [38] K.-H. Cheng, Y.-C. Tsai, Y.-L. Lo, and J.-S. Huang, "A 0.5-v 0.4-v 2.24-ghz inductorless phase-locked loop in a system-on-chip," IEEE Trans. Circuits and Systems I: Regular Papers, vol. 58, no. 5, pp. 849 ­859, May 2011. [39] X. Liu and A. Wilson, "A low-supply pll with enhanced cascode compensation and a lowsupply-sensitivity cco," IEEE Custom Integrated Circuits Conference, pp. 1 ­4, 2010. [40] V. Gurumoorthy and S. Palermo, "Supply regulation techniques for phase-locked loops," IEEE Circuits and Systems Workshop, pp. 1 ­4, Oct. 2009. [41] A. Arakali, S. Gondi, and P. Hanumolu, "Low-power supply-regulation techniques for ring oscillators in phase-locked loops using a split-tuned architecture," IEEE J. Solid-State Circuits, vol. 44, no. 8, pp. 2169 ­2181, Aug. 2009. [42] ----, "A 0.5-to-2.5ghz supply-regulated pll with noise sensitivity of -28db," IEEE Custom Integrated Circuits Conference, pp. 443 ­446, Sep. 2008. [43] E. Alon, J. Kim, S. Pamarti, K. Chang, and M. Horowitz, "Replica compensated linear regulators for supply-regulated phase-locked loops," IEEE J. Solid-State Circuits, vol. 41, no. 2, pp. 413 ­ 424, Feb. 2006.

122

[44] S.-J. Yun, H. Lee, K.-D. Kim, and J.-K. Kwon, "Differentially-tuned low-spur pll using 65 nm cmos process," IET Electronics Letters, vol. 47, no. 6, pp. 369 ­371, 17 2011. [45] J. Shin, J. Park, B. Kim, J. Ryu, C. Kim, J. Kim, S.-H. Yang, H. Kim, and J. Kim, "A 65nm 3.4gbps hdmi tx phy with supply-regulated dual-tuning pll and blending multiplexer," IEEE Custom Integrated Circuits Conference, pp. 237 ­240, Sep. 2008. [46] A. Rao, M. Mansour, G. Singh, C.-H. Lim, R. Ahmed, and D. Johnson, "A 4 - 6.4 ghz lc pll with adaptive bandwidth control for a forwarded clock link," IEEE J.Solid-State Circuits, vol. 43, no. 9, pp. 2099 ­2108, 2008. [47] M. Brownlee, P. Hanumolu, K. Mayaram, and U.-K. Moon, "A 0.5 to 2.5ghz pll with fully differential supply-regulated tuning," pp. 2412 ­2421, Feb. 2006. [48] D. DiClemente and F. Yuan, "Current-mode phase-locked loops," Presented at CMC Microsystems Annual Symp, Oct. 2007. [49] D. DiClemente, F. Yuan, and A. Tang, "CMOS active transformer current-mode phase-locked loops," Proc. IEEE MidWest Symp. on Circuits and Systems, pp. 1528 ­1531, Aug. 2007. [50] D. DiClemente and F. Yuan, "Current-mode phase-locked loops," Presented at CMC Microsystems Annual Symp., Oct. 2006. [51] ----, "An Area-Efficient CMOS Current-Mode Phase-Locked Loop," Proc. IEEE MidWest Symp. on Circuits and Systems, vol. 2, pp. 574 ­578, Aug. 2006. [52] Y. Wu, M. Ismail, and H. Olsson, "CMOS VHF/RF CCO based on active inductors," IEE Electronics Letters, vol. 37, no. 8, pp. 472 ­473, Apr. 2001. [53] Y. Wu, X. Ding, M. Ismail, and H. Olsson, "Inductorless CMOS RF bandpass filter," IEE Electronics Letters, vol. 37, no. 16, pp. 1027 ­1029, Aug. 2001. [54] ----, "RF bandpass filter design based on CMOS active inductors," IEEE Trans. Circuits and Systems II, vol. 50, no. 12, pp. 942 ­ 949, Dec. 2003.

123

[55] D. DiClemente and F. Yuan, "Current-Mode Phase-Locked Loops with Low Supply Voltage Sensitivity," Proc. IEEE Int'l Symp. Circuits and Systems, pp. 2172 ­2175, May 2007. [56] M. Ismail, Y. Wu, X. Ding, and H. Olsson, "RF bandpass filter design based on CMOS active inductors," IEEE Trans. Circuits Syst. II: Analog Digit. Signal Process, pp. 942­949, Dec. 2003. [57] F. Yuan, CMOS Current-Mode Circuits for Data Communications. 2006. [58] A. Demir, E. Liu, A. Sangiovanni-Vincentelli, and I. Vassiliou, "Behavioral simulation techniques for phase/delay-locked systems," Proc. IEEE Custom Integrated Circuits Conference, 1994., pp. 453 ­456, May 1994. [59] M. Takahashi, K. Ogawa, and K. Kundert, "VCO jitter simulation and its comparison with measurement," Proc. Design Automation Conference, pp. 85 ­88 vol.1, Jan. 1999. [60] K. Kundert, "Predicting the phase noise and jitter of PLL-based frequency synthesizers," Designers Guide Consulting Inc., Los Altos, 2006. [61] C. Chun, H. Choi, Q. Bui, S. Kang, J. Jang, U. Lee, I. Oh, and C. Park, "Compact wideband LC VCO with active inductor harmonic filtering technique," IET Electronics Letters, vol. 47, no. 3, pp. 190 ­191, 3 2011. [62] J. Hu, Z. Li, and Z. Wang, "A 0.5-V 4.8GHz CMOS LC VCO with wide tuning range," Proc. IEEE International Conference on Ultra Wideband, vol. 2, pp. 1 ­4, Sep. 2010. [63] K. Fu, Z. Cheng, J. Li, Y. Zhou, and X. Zhou, "Design of wideband LC VCO with small Kvco fluctuation for RFID synthesizer application," Proc. IEEE International Conference on Communication technology, pp. 286 ­289, Nov. 2008. Springer, New York,

124

[64] Y. Ito, H. Sugawara, K. Okada, and K. Masu, "A 0.98 to 6.6 Hz Tunable Wideband VCO in a 180nm CMOS Technology for Reconfigurable Radio Transceiver," Proc. IEEE ASIC SolidState Circuits Asian, pp. 359 ­362, Nov. 2006. [65] S. Broussev, T. Lehtonen, and N. Tchamov, "A Wideband Low Phase-Noise LC-VCO With Programmable KVCO," IEEE Microwave and Wireless Components Letters, vol. 17, no. 4, pp. 274 ­276, Apr. 2007. [66] B. Q. Diep and C. S. Park, "All PMOS Wideband VCO for Multi-band Multi-standard Radios," International Conf. Advanced Communication Technology, vol. 3, pp. 1656 ­1659, Feb. 2007. [67] J. Kim, K.-H. Lee, J. Choi, Y. Park, K. Lim, and C.-H. Lee, "Ultra-wideband CMOS voltagecontrolled oscillator with reconfigurable tunable inductors," IET Electronics Letters, vol. 47, no. 4, pp. 249 ­250, 17 2011. [68] L. Qing, S. Jiangtao, S. Kurachi, N. Itoh, and T. Yoshimasu, "A switched-inductor based VCO with an ultra-wideband tuning range of 87.6 ," Proc. IEEE ASICON, pp. 355 ­358, Oct. 2009. [69] A. Bevilacqua, F. P. Pavan, C. Sandner, A. Gerosa, and A. Neviani, "A 3.4-7 GHz TransformerBased Dual-mode Wideband VCO," Solid-state circuit conf. European, pp. 440 ­443, Sep. 2006. [70] D. DiClemente and F. Yuan, "A wide frequency tuning range active-inductor voltagecontrolled oscillator for ultra wideband applications," Proc. IEEE Int'l Symp. Circuits Syst, pp. 2097 ­2100, May 2009. [71] L.-H. Lu, H.-H. Hsieh, and Y.-T. Liao, "A Wide Tuning-Range CMOS VCO With a Differential Tunable Active Inductor," IEEE Trans. Microwave Theory and Techniques, vol. 54, no. 9, pp. 3462 ­3468, Sep. 2006. [72] R. Duarte and J. Fernandes, "A comparative study on transformer and inductor based LC tanks for VCOs," Proc. Int'l Conf. Mixed Design of Integrated Circuits Systems, pp. 193 ­196, Jun. 2009.

125

[73] C.-K. Hsieh, K.-Y. Kao, and K.-Y. Lin, "An ultra-low-power CMOS complementary VCO using three-coil transformer feedback," Proc. IEEE Radio Frequency Integrated Circuits Symp., pp. 91 ­94, Jun. 2009. [74] G. Cusmai, M. Repossi, G. Albasini, A. Mazzanti, and F. Svelto, "A Magnetically Tuned Quadrature Oscillator," IEEE J. Solid-State Circuits, vol. 42, no. 12, pp. 2870 ­2877, Dec. 2007. [75] C. Tu and C. Yang, "A 6.5-GHz LC VCO with Integrated-Transformer Tuning," Proc. IEEE Asia Pacific Conf., pp. 510­513, Dec. 2006. [76] X. Geng and F. Dai, "An 8.7 to 13.8 GHz transformer-coupled varactor-less quadrature current-controlled oscillator RFIC," Proc. IEEE Bipolar BiCMOS Circuits and Technology Meeting, pp. 63 ­66, Oct. 2009. [77] D. DiClemente and F. Yuan, "A passive transformer voltage-controlled oscillator with reflected impedance frequency tuning," Pro. IEEE Mid-West Symp. on Circuits Syst., pp. 80 ­83, Aug. 2010. [78] M. Mehrabian, A. Nabavi, and N. Rashidi, "A 4 - 7GHz ultra wideband VCO with tunable active inductor," Proc. IEEE International Conference on ultra wudeband, vol. 2, pp. 21 ­24, Sep. 2008.

126


