Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2009

Leaky Feeder System Optimizations In Underground Mines And Tunnels
Wisam F. Farjow
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
Farjow, Wisam F., "Leaky Feeder System Optimizations In Underground Mines And Tunnels" (2009). Theses and dissertations. Paper 1132.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

]i'f
rF:>

/o1

1

LEAKY FEEDER SYSTEM OPTIMIZATIONS IN UNDERGROUND MINES AND TUNNELS

by

Wisam Faraj Farjow, P.Eng. B.Sc., University Of Technology, Baghdad, Iraq, 1992

A thesis presented for Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the Program of Electrical and Computer Engineering.

Toronto, Ontario, Canada, 2009 © Wisam Faraj Farjow, P.Eng.

PRO¥fiY OF

ftYtRSQN ~\~\~ITY UB

Author's Declarations
I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in whole or part, at the request of other institutions or individuals for the purpose of scholarly research.

11

Abstract
Leaky Feeder System Optimizations In Underground Mines and Tunnels

© Wisam Faraj Farjow, P.Eng.

Master of Applied Science Electrical and Computer Engineering Ryerson University 2009

There is an increasing demand for reliable communication systems in underground mines and tunnels. This is especially true when these systems need to ensure the safety of personnel involved in the mining operations and also to provide infrastructure for mine's communication networks.

Stability problems are among the challenges of providing reliable communications in the underground mines. This thesis has focused on analyzing the stability problems in the communication systems of the leaky cable technology.

Novel algorithms have been developed to provide Automatic Gain and Slope Controls for the leaky feeder communication systems in the underground mines. The new algorithms are based on predictions. The amplifiers in the system cascade will be able· to predict and compensate for losses yet to occur in the system. System stability will be improved as a result of applying these algorithms by controlling the gains and the slopes of the amplifiers in the systems.

111

Acknowledgments
I would like to express my sincere thanks to my supervisor Dr. Xavier Fernando for his valuable guidance, encouragement and patience. His valuable direction and friendly manner of supervising the work made this project a reality.

I would also like to acknowledge and thank the Department of Electrical and Computer Engineering at Ryerson University and all the professors who provided the theoretical courses for their exceptional efforts. It was all a great experience.

lV

Dedications

To Rasha for giving me the support

To Matthew for giving me the reason

v

Contents

Leaky Cable in Underground Communications ...................................................................... 1 1.1 1.2 1.3 1.4 2 Introduction .................................................................................................................... 1 The Challenges of Current Systems ............................................................................... 2 Contributions of the Thesis ............................................................................................ 5 Outline of the Thesis ...................................................................................................... 5

Automatic Gain and Slope Control Theories ........................................................................... 7 2.1 2.2 2.2.1 2.3 2.3 .1 2.3 .2 2.3.3 Introduction .................................................................................................................... 7 Automatic Gain Control Theories .................................................................................. 7 AGC Models .............................................................................................................. 9 Automatic Slope Control Theories ............................................................................... 16 Equalizer characteristics .......................................................................................... 17 Fixed Slope RF Equalizers ...................................................................................... 18 Variable Slope RF Equalizers .................................................................................. 20

3

System Stability Problems ..................................................................................................... 21 3. 1 3.2 3.3 3.4 3.5 3.6 Introduction .................................................................................................................. 21 AGC Transient Response ............................................................................................. 22 Cascades Transient Response .................................................................... ................... 23 Cascade Instability ....................................................................................................... 26 High Level Transients .................................................................................................. 27 Transfer Modulation ..................................................................................................... 28

4

AGC/ASC Algorithms ........................................................................................................... 29 4.1 4.2 4.3 4.3.1 4.3.2 4.4 4.5 Overview ...................................................................................................................... 29 Typical System Layout ................................................................................................ 30 System Algorithms ....................................................................................................... 32 AGC Algorithm ....................................................................................................... 33 ASC Algorithm ........................................................................................................ 42 Algorithms' Flowchart ................................................................................................. 44 Algorithms' Simulations .............................................................................................. 47

Vl

5

System 5. 1 5.2 5.2.1 5.2.2 5.2.3 5.2.4 5.3 5.3.1 5.3 .2 5.4 5.4.1 5.4.2

P~erformance

under Error ........................................................................................... 53

Introduction .................................................................................................................. 53 Pilot's Levels Precision Errors (LPE): ......................................................................... 54 Pilot Levels Averaging Technique ........................................................................... 55 Calculating Pilots' Mean Level ............................................................................... 55 Averaging Technique Simulations ........................................................................... 60 Ideal Number of Samples N ..................................................................................... 62 Components Tolerance Errors (CTE): ......................................................................... 63 CTE Simulation Analysis ........................................................................................ 64 CTE Corrections ...................................................................................................... 67 Gain Estimation Errors (GEE): .................................................................................... 71 GEE Simulation Analysis ........................................................................................ 72 GEE Errors Corrections ........................................................................................... 74

6

Conclusions and Future Work ............................................................................................... 77 6.1 6.2 Conclusions ............................................................................... ................................... 77 Future Works ................................................................................................................ 78

Vll

List of Tables

Table 4-1, System Frequency Plan ................................................................................................ 31 Table 4-2, Pilots Frequencies ........................................................................................................ 35 Table 4-3, Upstream Bands reference points-frequencies ............................................................. 40 Table 4-4, Typical System Simulation Results ....................... ....................................................... 49 Table 5-l, Samples Quantization List ........................................................................................... 59 Table 5-2, Random Variable Frequency of Occurrences .............................................................. 60

Vlll

List of Figures

Figure 1-1, Leaky Cable Structure ............................................................................................ ...... 1 Figure 1-2, AGC Multiple Reference Pilots System ....................................................................... 3 Figure 1-3, Closed Loop AGC Circuit ............................................................................................ 4 Figure 2-1, AGC block diagram ...................................................................................................... 8 Figure 2-2, Voltage-Transfer Characteristics of AGC System ........................................................ 9 Figure 2-3, Decibel-Based AGC System ....................................................................................... 10 Figure 2-4, AGC equivalent circuit block diagram ....................................................................... 12 Figure 2-5, Non linear AGC Block Diagram ................................................................................. 14 Figure 2-6, Simplified AGC model ............................................................................................... 15 Figure 2-7, Cable Tilt RF Response in logarithmic scale .............................................................. 16 Figure 2-8, Cable Tilt Equalization ............................................................................................... 17 Figure 2-9, T -Symmetrical Bridged Equalizer Schematics ........................................................... 18 Figure 2-10, Fixed Slope RF Equalizer ........................................................... .............................. 19 Figure 2-11, Variable Slope RF Equalizer ....................................... .................. ..... ....... ... ... ......... 20 Figure 3-1, AGC Amplifier Block Diagram ....................... .................... ....................................... 22 Figure 3-2, AGC Amplifier Waveforms .................................. ...................................................... 23 Figure 3-3, A Typical AGC Cascade Transient Response [14] ..................................................... 26 Figure 4-1, Leaky Feeder System Block Diagram ........................................................................ 31 Figure 4-2, System Bands Orientations Layout .......................... ................................................... 32 Figure 4-3, Downstream Digital AGC System Block Diagram ..... ............................................... 33 Figure 4-4, Graphical Representations of the Reference Pilots ............................... .................... .. 35 Figure 4-5, Leaky Cable Longitudinal Loss Chart ........................................................................ 37 Figure 4-6, Graphical Representations for the Reference Points .................................................. 39 Figure 4-7, Automatic Gain I Slope Control Circuit Block Diagram ............................................ 42 Figure 4-8, AGC/ASC Flowchart ....................................................................................... ........... 45 Figure 4-9, Typical Leaky Feeder System Layout ........................................................................ 4 7 Figure 5-1, Gaussian Distribution Function for the variations in pilot levels ............................... 54 Figure 5-2, Reference Pilots Averaging- Technique Flowchart ........................ ............................ 57 Figure 5-3, A Typical Pilot Signal. ................................................................................................ 58 Figure 5-4, Pilot Sampling .... .......... ............................................................................................... 59

lX

Figure 5-5, Pilot Signal Sampling Simulations ...................... ....................................................... 61 Figure 5-6, Pilot Levels' Histogram Simulations .......................................................................... 61 Figure 5-7, Number of Averaging Samples vs. Precision .. ..................................... ...................... 62 Figure 5-8, Multi-Cascaded Amplifiers Simulation Network ....................................................... 64 Figure 5-9, Downstream Voice Band CTE Simulations ............................................................... 65 Figure 5-10, Downstream Data Band CTE Simulations ............................ ................................... 66 Figure 5-11, Fixed CTE Simulations ....... .................................................. .................................... 67 Figure 5-12, Algorithm's Errors Corrections Block Diagram ............................................. .......... 68 Figure 5-13, Downstream Voice Band CTE Corrections .............................................................. 70 Figure 5-14, Downstream Data Band CTE Corrections ................................................................ 70 Figure 5-15, Upstream Data Band GEE Simulations .................................................................... 73 Figure 5-16, Upstream Voice Band GEE Simulations .................................................................. 74 Figure 5-17, Upstream Data Band GEE Corrections ..................................................................... 76 Figure 5-18, Upstream Voice Band GEE Corrections ................................................................... 76

X

List of Symbols
a
Amplifiers cascade attenuation characteristic Cable attenuation Attenuation of the equalizer Attenuation of the cable conductor materials Attenuation ofthe cable dielectric materials Relative dielectric constant Conductivity of the leaky cable inner conductor Conductivity of the leaky cable outer conductor

C(s)

Laplace transform of the output function Corrected gain of the amplifier Cabfe longitudinal loss Leaky Cable inner conductor diameter Leaky Cable outer conductor diameter Gain Correction Factor Amplifier's output in dBm Amplifier's input in dBm Errored- Gain of the Amplifier Laplace transform of the impulse response of the AGC amplifier Transfer function constant Gain of the envelope detector. DC gain ofthe filter Initial output level of the AGC amplifier Total system loss Insertion loss

CGm CLn,m
dl

d2

Dm

Xl

m n
N

Band number in the system The number of cable section in the system. Number of samples over one cycle of sampling time VGA transfer function High-Pilot level at the system Head-End High-Pilot level at the output stage of the amplifier Low-Pilot level at the system Head-End Low-Pilot level at the output stage of amplifier

p

PH0

PM0
POUTm PMAXm PMINm
R(s)

Midpoint -Pilot level at the system Head-End Wide-Band detector envelop power Maximum power output of the amplifier Minimum power output of the amplifier Laplace transform of the input function Cable's characteristic impedance Time Sampling time Control signal voltage Output signal voltage Reference signal voltage

Xll

List of Abbreviations
AGC AM ASC CMTS CTE CTE DC DOCS IS EQ GEE IL LFT LPE PDF PH PL PM
RF

Automatic Gain Control Amplitude Modulation Automatic Slope Control Cable Modem Termination Technology Components Tolerance Errors Components Tolerance Errors Direct Current Data Over Cable Service Interface Specification Equalizer Gain Estimation Errors Insertion Loss Leaky Feeder Technology Levels Precision Errors Probability Distribution Function High Pilot Low Pilot Midpoint Pilot Radio Frequency Receive Signal Level Variable Gain Amplifier

RSL VGA

Xlll

Chapter. I 1 Leaky Cable in Underground Communications

1.1

Introduction

Wireless and mobile communications in confined space environments, such as underground mines and tunnels, tend to have a different philosophy from that of open space wireless communications. Electromagnetic wave propagations in rough wall tunnels and caves are of interest from both theoretical and practical viewpoints since demands for deploying reliable wireless communication systems in such environments are increasing.

There are various methods available for providing radio frequency coverage in underground environments. The most versatile and reliable system is the "Leaky Feeder" system. The leaky feeder, also called "Radiating Cable", functions both as a transmission line and as an antenna [1]. RF energy is simultaneously transmitted down the radiating cables and radiated from all points into the surrounding space. Slots cut into the outer conductor of the coaxial cable allow controlled levels of electromagnetic energy to be radiated both out of and into the cable. The amount of radiation is quantified by the coupling loss.

Coupling loss is defined as the difference between the power transmitted into the cable and the power received by a AJ2-dipole antenna located at a distance of 2 m from the cable. The structure of a typical leaky cable is shown in Figure 1-1, Leaky Cable Structure.

1- Cable Support 2- Outer Conductor 3- Insulation Foam 4- Inner Conductor 5- Radiating Slots 6- Cable Jacket

Figure 1-1, Leaky Cable Structure

1

The Leaky Feeder Technology (LFT) is a combination of leaky feeder cables and amplifiers. Other components can be added, but the backbone of the system comprises of only these two elements. It is necessary to compensate for the inherent loss of the signal and this is achieved by the insertion of line amplifiers. Correct installation of the system ensures a consistent signal level is maintained throughout the network, and hence throughout the mine [2].

1.2

The Challenges of Current Systems

Existing wireless mobile communication systems face many challenges in offering reliable communications within the enclosed environments of underground mines. Some of these challenges and difficulties are due to the nature of the confined spaces environments [3].

Underground mine galleries can be considered as complex transmission lines in which signals' Reflections and Multi-Path channels affect the propagations and hence the performance and reliability of the communication systems. In addition to these environmental challenges, the existing underground infrastructures of the communication systems have limitations in providing reliable and stable communication services in the confined spaces of the mines and tunnels. The work of this thesis is mainly focused on analyzing, modeling and optimizing the designs of communication systems based on the utilization of the leaky cable technology.

The quality of the radio communications may vary with the level variations of the signals traveling through the cable. Variations in signal level can be caused by temperature variations that change the longitudinal loss characteristics of the cable. The level variations can also be caused by external noise generated by machinery in the mines. Underground mines are very dynamic in the way they develop and grow. There are daily expansions in underground mines as more cables and branches are added to the systems that require automatic methods of losses compensations. Therefore, Automatic Gain Control (AGC) circuits where introduced in the leaky feeder systems to compensate for the variations in the levels of RF signals.

Many Automatic Gain and Slope Control (AGC/ASC) algorithms and systems have been developed to overcome the problems of level variations and slope corrections in the leaky feeder systems; however, these approaches have not offered fully reliable system performance. The most

2

common

appr~ach

in deploying AGC/ASC is by utilizing reference RF carriers normally referred

to as "pilots". These reference pilots propagate throughout the entire system and are used by each amplifier as a measuring tool to correct the gain and slope of the amplifier.

Challenges exist in deploying AGC I ASC functions in the current leaky cable systems. From the system level point of view, the reliance on the reference pilots within the AGC/ASC circuits creates major problems, especially for multi-branched large leaky cable systems. In these types of systems, multiple reference pilot generators must be installed at the system head-end and at the end of each branch in the system as shown in Figure 1-2. In the case of the upstream direction, there are problems at the points of the system branching where the pilot carriers from each branch superimpose. The accuracy of detecting the reference pilots will be affected by the superimposition of mutable pilots. This, of course, will affect the operations of the AGC circuits in the subsequent amplifiers and will result in unstable system operations.

Underground Leaky Cable Network
Upstream Pilot Generator

: SystemHead-End ~

I I I I

;-___,.I....,.......K_
Downstream Pilot Generator
__J

Upstream Pilot Generator

_____

Branch Point Upstream Pilots Superimpositions

Upstream Pilot Generator

Figure 1-2, AGC Multiple Reference Pilots System

The other major problem in the existing systems is in the stability of the AGC circuits. Most of the systems utilize AGC/ASC circuits based on closed loop gain topology. The AGC loop, depicted in Figure 1-3 consists of a variable gain amplifier (VGA), a peak detector, and a loop filter. The AGC loop is generally a nonlinear system, having a gain acquisition settling time that is dependent on the input signal level [4].

3

Vour

Vc

Loop Filter

Peak
Detector

Figure 1-3, Closed Loop AGC Circuit

In most system applications, the time to adjust the gain in response to an input amplitude
change should remain constant, independent of the input amplitude level and hence the gain setting of the amplifier. Achieving a constant gain settling time permits the AGC loop's bandwidth to be maximized for fast signal acquisition while maintaining stability over all operating conditions. In actual practice, the AGC loop time constant of each amplifier differs, due to the tolerances in component values.

Overshoot is evident in cascaded amplifier systems. The magnitude of the overshoot increases with the number of amplifiers in the system. This implies that the stability of the cascade decreases as the number of AGC/ASC amplifiers used increases. As a result, signal levels in the cascade will exhibit random fluctuations. Transients that are repetitive to some degree will cause periodic variations in levels which affect the stability of the entire system.

4

1.3

Contributions of the Thesis
~.

A novel approach in deploying Automatic Gain Control, AGC, and Automatic Slope Control ASC circuits in underground leaky cable systems has been presented. System algorithms for the AGC/ASC have been developed and simulated to solve the instability problems encountered in underground leaky cable communication systems where legacy and conventional AGC circuits are used.

The developed algorithms are based on predictions. Within the scheme of these algorithms, amplifiers in the leaky cable system will be able to predict the losses before they occur and make adjustments to the gain and slope accordingly. The algorithms dictate reliable and stable operating conditions for the system. Amplifiers in the system will operate within their linear range of amplifications. System instability and AGC time settling issues are significantly improved by these algorithms.

System simulations have been conducted on a typical system layout. The outcomes ofthe simulations have demonstrated good and reliable results for the algorithms in adjusting the gain and slope of the system amplifiers.

In addition, the algorithms have been analyzed and evaluated under operating conditions
where errors exist and could affect the operation of the algorithms. Error corrections techniques have been suggested and simulated. The simulation results have demonstrated very promising and reliable outcomes for the algorithms.

1.4

Outline of the Thesis

Chapter 1: Leaky Cable in Underground Communications This chapter gives a general overview of the leaky feeder technology and the deployments of such systems in the confined spaces of the underground mines. The challenges encountered in providing reliable communications in these environments have been described.

5

Chapter 2: Automatic Gain and Slope Control Theories The theories of the Automatic Gain and Slope Controls (AGC/ASC) are described. Two AGC models are analyzed, namely, the Decibel-Based Linear and Non Linear models of the AGC circuits.

Chapter 3: System Stability Problems This chapter discusses the cascade behavior of AGC/ASC amplifiers and the aspects of system performance and reliability. The potential limitations to the cascading of such amplifiers are explained. It is shown that amplifications of transients and transfer modulation occur in
AGCIASC amplifier cascades and that extremely large amplitude transients are generated under

certain conditions.

Chapter 4: AGC/ASC Algorithms

In this chapter, new algorithms have been developed for deploying AGC/ASC in underground
leaky feeder systems. Simulation analyses have been conducted to evaluate the effectiveness of the algorithms in controlling the gains and the slopes of the systems.

Chapter 5: System Preference under Errors In this chapter, the preference of the system has been evaluated under operating conditions where errors can be generated and can affect the performance of the algorithms. Error correction analyses have introduced a number of solutions for the potential errors in the algorithms.

Chapter 6: Conclusions and Future Work This chapter summarizes the results and conclusions of the thesis work. Some suggested research activities are presented to carry on further work.

6

Chapter... 2 2 Automatic Gain and Slope Control Theories

2.1

Introduction

For typical underground communications, the leaky cable systems are widely used in providing communication coverage and expansions into the confined spaces of the underground mines. This coverage can be achieved by utilizing in-line Bi-Directional Amplifiers (BOA) distributed along the underground tunnels and galleries in a multi- cascaded typology. RF signals are amplified in both directions (upstream and downstream) to maintain adequate signal levels as compensation for fixed and dynamic system losses.

Maintaining consistent RF levels in any system requires methods of controlling the gain and slopes of the amplifiers. These requirements led to the design of circuits, which primary ideal function was to maintain a constant signal level at the output, regardless of the signal's variations at the input of the system.

2.2

Automatic Gain Control Theories

Many models and approaches have been attempted to fully describe AGC systems in terms of control system theory. The complexity of describing the AGC models ranges from the linear approximations to non-linear, multivariable systems. Each model has its advantages and disadvantages. First order models are easy to analyze and understand, but sometimes the final results show a high degree of inaccuracy when they are compared with practical results. On the other hand, non-linear and multi-variable systems show a relatively high degree of accuracy; however, the theory and physical implementation of the system can become really difficult.

The basic elements of an AGC system are illustrated in Figure 2-1, AGC Block Diagram. The input signal is amplified by a variable gain amplifier (VGA), whose gain depends on a control signal, Vc . The output from the VGA can be further amplified to produce the output signal, Va ur

7

Some parameters of the output signal, such as carrier amplitude, sideband power, or depth of modulation are detected and compared with a reference signal, VR . The difference between these two signals is then filtered and used to control the gain of the VGA [5,6].

Directional Coupler

V;

Detector

Figure 2-1, AGC block diagram

The AGC system can be described in terms of its transfer function. The idealized transfer function for an AGC system is illustrated in Figure 2-2. For low input signals, the AGC is disabled, and the output signal is a linear function of the input signal. When the level of the input signal is greater than,~ , the AGC circuit maintains the output level constant until the input level reaches,

v; .At this point, the AGC becomes inoperative again. Di,sabling the AGC action at very

high gain levels is often done in order to prevent system instability problems.

8

--------------------------------------1

V;

Figure 2-2, Voltage-Transfer Characteristics of AGC System

The requirements for the AGC loop filter depend upon the particular type of modulation of the input signal. The AGC requirements for the AM based type of modulations are generally more stringent than those for FM and pulse-modulated signals. If the input signals are amplitudemodulated, the AGC circuit must not respond to changes in amplitude modulation or the AGC loop will distort the modulated signals [7]. This distortion is prevented by restricting the AGC circuit bandwidth so that it does not respond to modulating frequencies; AGC can still compensate for signal fading or variations, which are relatively slow compared to the lowest modulating frequency.

2.2.1

AGC Models

The AGC systems are typically nonlinear systems. Therefore, it is a complicated task to derive general solutions that describe the AGC nonlinear dynamics. However, for most systems an approximate solution can be derived in terms of a small-signal model. In this section two AGC models are presented.

9

2.2.1.1

Decibel-Based Linear Model

The first model could be described as the decibel-based linear model. The block diagram for this model is show in Figure 2-3, Decibel Based AGC System. The loss of the directional coupler will be ignored to simplify the calculation.

V;

Envelope Detector

F(S)

Figure 2-3, Decibel-Based AGC System In this model the variable gain amplifier (VGA) has the following transfer function.

- K ,e+aVe PVa

(2-1)

= V; K 1 e+aVe

(2-2)

Where,

P
~, ~

is the VGA transfer function, represent the envelope amplitudes of input and output respectively, is a constant of the transfer function P. is a constant factor of the VGA.

K1

a

10

Following the signal path we find that the logarithmic amplifier output is:
(2-3)

Where K 2 is the gain of the envelope detector.

The output of the envelope detector is always positive; therefore, the output of the logarithmic amplifier is a real number. The control voltage becomes:
(2-4)

F(s) represents the filter transfer function.

Knowing that the VGA has an exponential transfer function, the logarithmic function can be applied to both sides of the equation.
(2-5)

The control voltage can be expressed as:
(2-6)

Using the expression for Vc that was determined earlier

ln ~ [1 + aF(s)] = ln V: + aF(s) VR + ln K 1 - aF(s) ln K 2
As K 1 , K 2 and a are constants , the response to the input signal is:

(2-7)

ln ~ [1 + a F (s)] = ln V: + a F (s) VR
If V0 and

(2-8)

V:

are expressed in decibels, we can use the following equivalence

ln Vo

= 2.3log ~
(2-9)

11

Where, eo and ei denote the output and input respectively, in decibels.

e =
o

ei

+---..;,..,..;._~

8. 7 a F (s) VR
l+aF(s)

I+aF(s)

(2-10)

This type of AGC system is described by a linear differential equation, as long as the input and output quantities are expressed in decibels. This system is represented by the linear negativefeedback system shown in Figure 2-4, AGC equivalent circuit block diagram [5 ,8].

e;

aF(S)

Figure 2-4, AGC equivalent circuit block diagram

The loop dynamics are described by the filter F(s) and the factor (a) of the variable gain amplifier. F(s) will normally be a low-pass filter, since the loop bandwidth must be limited so that it does not respond to any amplitude modulation presented on the input signal. The loop stability will depend on the order of the filter and loop gain. The steady state change in the output, in response to the input, is

(2-1 1)

Where, F (0) is the DC gain of the filter.

It is desirable to keep the change !1e0 as small as possible in response to the changes in the

input amplitude. This can be achieved by making the DC loop gain as large as possible.

12

The simplest F(s) block that can be used in the system is a first order low pass filter whose
'·

transfer function is defined as follows:

K F(s)=s -+1 B

(2-12)

Where K is the DC gain of the filter and B is the filter bandwidth. The DC characteristics is

(2-13)

The total DC output of the AGC system is given by;

e =
a

ei 8.7aKVR +--~ 1+aK 1+aK

(2-14)

The output amplitude in decibels is proportional to the reference voltage VR.

AGC loops containing a reference voltage are referred to as delayed AGC. This term does not imply that the gain control is delayed because of the bandwidth limitations; rather, the AGC loop contains a reference signal.

2.2.1.2

Non-Linear Model

Figure 2-5, Non Linear AGC Block Diagram, illustrates a block diagram model for an AGC system in which the variable-gain amplifier and the detector are nonlinear components in the AGC loop.

13

vi ...

-

VGA

v1

Vc
,lr

Detector

~rx:::;
...
Low-Pass Filter

VJ

Difference Amplifier

....

...

v2

I VR

Figure 2-5, Non linear AGC Block Diagram.

To simplify the notation, the gains of the detector, the difference amplifier, and the amplifier following the variable-gain amplifier are assumed to be unity. In this case, the system can be represented by the simplified block diagram of Figure 2-6 [5, 9] . and v; , now refer to envelope values and F is the frequency -dependent transfer

Here,

~

function of the low-pass filter and the amplifier combined. The output voltage Vo equals P v; , where the gain P of the variable-gain amplifier is a function of the control voltage Vc .

(2-15) Since we are interested in the change in the output voltage due to a change in the input voltage, we can take the derivative of
~

with respect to

v; , therefore:
(2-16)

14

The last derivative on the right side of the equation can be further developed by applying the
<,

chain rule and using the equation for the control voltage, thus:

dP
d~

=

dP dVc dVc d~

=

dP dVc d~ dVc d~ d~

=

dP (-F) dVo dVc d~

(2-17)

P(Vc)

Vc

F

Low-Pass Filter

Figure 2-6, Simplified AGC model

· &: d~ can be wntten . The expressiOn tor-as: d~

0 --

dV( 1 + F~ dP) d~ dVc

. = P , or alternatively

(2-18)

This is the small-signal differential equation for the AGC loop illustrated in Figure 2.5. It is valid for incremental changes about a particular control voltage.

15

The loop transmission

dP L=-F(s)V1dVc

(2-19)

It is clear that the loop gain is a function of the input signal, which translates into a relative degree of non-linearity and complicates the analysis of the transient response of the system.

2.3

Automatic Slope Control Theories

The frequency response of leaky-coaxial cable is called Cable Tilt. The Cable Tilt can be defined as an exponential increase in loss as frequency increases. The RF response curve for a typical leaky coaxial cable is illustrated in Figure 2-7, Cable Tilt RF Response in logarithmic scale.

Frequency (MHz)

Figure 2-7, Cable Tilt RF Response in logarithmic scale

Equalizations are required in communication systems based on the utilization of the leaky cable. The objective is to have a "flat" frequency response across all the bands of the system. An equalizer is a network that presents a mirror image of the cable frequency response curve, introducing greater loss at the lower frequencies and lower loss at the higher frequencies. These equalizers are often incorporated with an amplifier [ 11].

16

Equalizers are usually specified for a certain length of cable. The equalizers have values that

..

represent the attenuation loss at the highest frequency of interest measured in dB. Cable tilt equalization is illustrated in Figure 2-8, Cable Tilt Equalization.

~t
I
I

:3.
c:
U)

m0

Flat Response

+
Frequency (MHz) Frequency (MHz)

:;
c:
Q)

:I

<(

:t:

Frequency (MHz)

Figure 2-8, Cable Tilt Equalization

2.3.1

Equalizer characteristics

In an ideal case, the equalizer has an attenuation characteristic reciprocal to the cable attenuation
characteristic. The attenuation characteristic for a cascade connected coaxial cable and an amplitude equalizer has a constant value in a given frequency range. An equalizer has to fulfill the following conditions:

(2-20) Where,
a

is the cascade attenuation characteristic, is the cable attenuation, is the attenuation of the equalizer and is the given constant.

ac
aae

K

The input impedance of the equalizer is real and does not depend on the frequency. Typically, RF equalizers are based on the design of two-port network called, "T-Symmetrical Bridged". This

17

network is shown in Figure 2-9. This approach provides for a good circuit matching with the characteristic impedance of the cable [12].

Figure 2-9, T-Symmetrical Bridged Equalizer Schematics

Impedances Z 1 and Z 2 can have a different number of elements. Resistor R o represents the characteristic impedance of the cable. In order for the bridged "T" network to have real input impedance, it is important that

zl

and

z2

fulfill this duality principle

(2-21) Two types of RF equalizers can be recognized, these are the Fixed and Variable Slope Equalizers. The following sections briefly describe the theory of designing these two types of equalizers.

2.3.2

Fixed Slope RF Equalizers

A typical schematic for this type of equalizer is shown in Figure 2-10, Fixed Slope RF Equalizer. Attenuation in a coaxial cable occurs both in the conductors and in the dielectric materials.

18

Figure 2-10, Fixed Slope RF Equalizer The attenuation in the conductors is

and in the dielectric

The total attenuation for the coaxial cable of length l can be rewritten as

Where,

a cc
a cd

is the attenuation in the conductor materials is the attenuation in the dielectric materials is the diameter of the inner conductor, is the inner diameter of the outer conductor,

d1 d2

19

&r

is the relative dielectric constant,

tan 6 is the dielectric loss tangent,

o-1
o-2
2.3.3

is the conductivity of the inner conductor, is that of the outer conductor.

Variable Slope RF Equalizers

A typical schematic diagram for this type of equalizer is shown in Figure 2-11, Variable Slope RF Equalizer. The attenuation characteristic of the slope can be varied by changing the values of the two identical variable resistors R(x). These must be changed in a specific manner [12].

Figure 2-11, Variable Slope RF Equalizer The simple and practical solution for the resistive part of equalizer with variable resistors in exponential form is: (2-22)

Where, O:S x :S 1 and a, b are constants.

20

Chapter~.3

3 System Stability Problems

3.1

Introduction

Automatic gain and slope control amplifiers have been used for many years in communication systems like CATV and leaky cable systems. The idea of using the AGC is to maintain constant signal levels at the output of the amplifiers when the input levels attempt to change for any reason.

Typically, the AGC/ASC amplifier senses the level ofthe reference carriers and adjusts the gain and slope of the amplifier to compensate for levels changes. Unfortunately, this approach of deploying analogue AGC systems with a negative feedback loop is susceptible to potential instability degradations in system performance. The results of these degradations are usually manifested by periodic variations in system levels.

Many system design proposals using long cascades of AGC/ASC amplifiers have been developed during the past few years. The practical realization of these system designs may well feature unexpected behaviors, and in some cases, unacceptable performance, depending upon the characteristics of the particular amplifiers employed. This chapter describes the transient behavior of AGC amplifiers. In addition, this chapter examines some of undesirable effects on system performance [ 13]

A block diagram of a typical automatic gain control amplifier is shown in Figure 3-1, AGC Amplifier Block Diagram. The output of the amplifier is sampled by the directional coupler, and a single carrier (reference pilot), selected by the band pass filter, is amplified and detected. The output of the detector is compared to a DC reference voltage. If there is a difference between the two voltages, the attenuation of the gain control is adjusted in such a manner as to make the detector output and the reference voltages equal. A low pass filter is provided to prevent any high frequency signals from being applied to the gain control circuit. The low pass filter in the AGC loop plays a very critical role in determining the stability of the AGC function.

21

Directional Coupler RFin

LPF

Reference Voltage

Amp

Figure 3-1, AGC Amplifier Block Diagram

3.2

AGC Transient Response

If a step change in the pilot carrier input level is applied to the input of the AGC amplifier as shown in Figure 3-2, AGC Amplifier Waveforms, the output response will generally look like the signal of Figure 3-2-b. Since the voltage across the capacitor in the loop filter cannot change instantaneously, the leading edge of the output response is not affected. As the voltage across the capacitor begins to charge towards the new voltage, the increasing loss of the gain control circuit reduces the voltage to which this capacitor is charging. As time progresses, the RF amplifier output will approach its pre-transient level. Any difference between the final output and the initial output level constitutes the AGC loop steady state error. This error results from the finite gain of the overall AGC loop [14].

Although the AGC loop contains non-linear elements, namely the RF detector and the voltage controlled attenuator, it has been shown that the AGC loop approaches linear behavior if the input level change is relatively small.

22

A ------- - - - - -

L0 (final) ' - -- - - - - - - - -" ----- ""---

L0 (initial)

t (sec)
(a- Amplifier's Input) (b- Amplifier's Output)

.. -

... t

(sec)

Figure 3-2, AGC Amplifier Waveforms

When the loop filter is a single pole type, the change in the RF output level may be represented by a simple exponential decay. The step response of the AGC amplifier can be expressed as;

fort~

0

(3-1)

Where;

c(t)
A

is the output level of the amplifier is the amplitude of input step is the loop gain is the reciprocal of the AGC loop time constant is the time is the initial output level

G

a
t

L0

Since the steady state error is usually quite small, equation (3-1) can be approximated by:
fort~

0

(3-2)

3.3

Cascades Transient Response

In the previous section, only the step response of a single amplifier was considered. From the system levels point of view, the AGC step response for systems of cascaded amplifiers is an

23

important design issue that requires consideration. From Laplace transform theory it is known that [14, 15]:

C(s) = H(s) R(s)
Where;

(3-3)

R(s)

is Laplace transform of the input function

H(s) is Laplace transform ofthe impulse response of the AGC amplifier C(s)
is Laplace transform of the output function

By rearranging Equation (3-3) we obtain;

H(s)

= C(s)
R(s)

(3-4)

The Laplace transform of the step function is

A R(s) = s
The Laplace transform of the exponential function in equation (3-2) is

(3-5)

A C(s)=s+a
Substituting equation (3-5) and (3-6) into equation (3-4) gives

(3-6)

s H(s)=s+a

(3-7)

Consider a cascade of n AGC amplifiers where n is the number of amplifiers employed. If the delay introduced by the cable is negligible, it follows from Equation (3-3) that

24

(3-8) If all the amplifiers are identical, then equation (3-8) reduces to:

C(s) = Hn(s)R(s)
Substituting (3-5) and (3-7) in (3-9) the equation becomes:

(3-9)

C
n

=

A sn-1

(s+ar

(3-1 0)

Taking the inverse Laplace transform of equation (3-1 0)

c () t = A e-at[Ln
n
i=l

(n-1)! ( -at )i-1] + L 0 (n-i)![(i-l)!f

(3-ll)

Simulation results for this equation are shown in Figure 3-3 for several values of n, with A equal to 1 dB. Examination of the resulting family of curves reveals the following,

· · · ·

Overshoot and ringing are evident at the output of the

dh amplifier.

The output of the first amplifier does not exhibit any ringing or overshoot. The magnitude of the overshoot is directly proportional to n . The time required for the output of the n h amplifier to settle within± 2% of the final value is approximately constant with n .
1

25

1.0

~
0. 8

[
·:

I
~

\I
\

\

-

()

~

O.lt

i

c::

0. 2:

\ \
I

'
=10

..

' .K: "'
..

i

-D. l

I \ - ' >< \ \r I '> v v .\ AI / \\ J ~ \..

'

ll.

1\ .j

L
I

~

"' "' ---....
....

I
I

~

'
.......

I

I

.......;,;,

~-

I

~-~~

l'oo..

~

,..,.,.<-. .

--..;.

..___
.--...

__.
I

~

,/

:
!

v:-::;

-O.t. 0

0.$

"'

ill'"

1.0

l.. S

2.0

::! .S

}.0

~ .0

Time, t (ms)

Figure 3-3, A Typical AGC Cascade Transient Response [14]

3.4

Cascade Instability

Examination of Figure 3-3 reveals that the magnitude of the overshoot increases with n. This implies that the stability of the cascade decreases as the number of AGC/ASC amplifiers used increases. Any small level of instability is accentuated by succeeding AGC/ASC amplifiers.

Connector interfaces, "shot" noise in the amplifier control loop, common band distortion, high level simultaneous sweep signals, and amplifier power supply transients resulting from longitudinal sheath currents are some of the sources of small pilot level variations. As a result,

26

signal levels at the end of a cascade will exhibit random fluctuations. Transients that are to some " degree repetitive will cause periodic variations in signal levels.

Due to the low frequency nature of these signal level fluctuations, there will not be a direct affect on the subjective quality of the signals. However, these level chariges will change the system noise and distortion margins, especially at the extremities of long cascades where system performance is already marginal.

3.5

High Level Transients

Consider the situation where the first amplifier in a cascade of n AGC amplifiers fails or, alternatively, DC power to the amplifier is cut off. The succeeding amplifiers will respond to the absence of the pilot carrier by increasing their respective gains. When the defective amplifier is replaced or power is restored, the peak transient output level of the last amplifier will be, (3-12)

Where;

LP

is instantaneous peak output level of the amplifier. It is measured in dBm. is reserve gain of each AGC amplifier measured in dB is normal output level measured in dBm.

gr
L0

In contrast, the behavior of a cascade of open loop thermal control amplifiers when subjected to the above situation is entirely different. Since the gain of this type of amplifier is not controlled by a pilot carrier, the gain of the cascade will not increase when this carrier is absent. For this reason a cascade of manual gain control amplifiers will not generate a high level transient. These high level transients will have an effect on the system's reliability since the transistors used in the amplifier are not expected to operate at elevated RF levels [15, 16].

27

3.6

Transfer Modulation

Since the pilot filter in the AGC loop does not reject out of band signals completely, modulated signals will be demodulated by the RF detector. Any low frequency components within the passband of the loop filter will be present at the DC input to the gain control network in the amplifier. This will cause the gain to vary; thereby, modulating the amplitude of all RF amplifier signals

[14, 17].

Transfer modulation is a form of signal distortion with characteristics similar to hum modulation. If each amplifier generates the same amount of transfer modulation, and if the source of the low frequency components is the same, then the transfer modulation will add on a voltage basis:

(3-13)

Where;

TMn TMa

is transfer modulation ratio ofthe cascade (dB) is transfer modulation ratio of a single amplifier (dB)

Therefore, the length of an AGC/ASC amplifier cascade may be limited by the amount of transfer modulation that can be tolerated.

28

Chapter -4 4 AGC/ASC Algorithms

4.1

Overview

ln this chapter a new approach of implementing Automatic Gain Control and Automatic Slope

Control circuits in underground leaky cable communication systems is presented. ln general, this approach can be applied to any multi-cascaded repeaters systems where there are many bidirectional amplifiers in the system.

This approach is presented as a solution to the problems of the instability encountered in underground leaky cable communication systems, where legacy and conventional AGC circuits are used. The disadvantages and the unstable nature of the conventional AGC circuits were discussed in chapter 3. The new AGC/ACS system will add valuable benefits to the leaky cable communication systems. These benefits include,

·

System Loss Prediction: Amplifiers in the system will be able to predict the losses before they occur and adjust their gain accordingly. Algorithms have been developed to enable the prediction of system losses based on some predefined and measurable variables.

·

System Performance Optimization: The outputs of the developed algorithm will dictate reliable and stable operating conditions for the system. Amplifiers in the system will be controlled by the AGC/ACS algorithms to operate within their linear range of amplifications. System instability and AGC time settling issues are also contained within the scheme of the presented algorithm.

·

Ease of System Installations: The utilizations of the algorithms will help in reducing the complexity of system alignments and will save time. After installation, the amplifiers in the system will automatically adjust their gains and slopes. This approach will reduce the demand for highly trained technicians and special alignments tools, therefore reducing time and cost for systems deployment.

·

Expandability and Flexibility: Dynamic and automatic compensations for cable losses due to temperature variations or cable layout changes offer valuable flexibility in expanding underground systems.

29

4.2

Typical System Layout

Normally, the leaky feeder system consists of the surface portion and the underground portion. On the surface, the system head-end equipment is typically installed. This includes the radio repeaters for all communication channels and any other system peripherals.

The underground portion of the system consists of the leaky cable network and bi-directional amplifiers installed periodically at regular distances to act as repeaters boosting the RF signal in both directions of the communication system (upstream and downstream directions).

Traditionally, leaky feeder systems had only voice and low speed data communications. ln these systems, two bands of communications were required to enable full-duplex voice and data communications. Nowadays, the leaky feeder system can transport high speed data communications by utilizing DOCS IS standards to deliver Ethernet connectivity based on the Cable Modem Termination System (CMTS). Typically, there are four bands of amplifications in each amplifier to compensate for the system losses. In the CMTS system, there are two bands dedicated to providing full-duplex voice communication (upstream and downstream) and two bands to provide the CMTS high speed data commutations in the upstream and downstream directions. A typical layout for the leaky feeder communications system is shown in Figure 4-1.

The new AGC approach will be applied and demonstrated in the CMTS leaky cable system. The same algorithm can be applied to any communication system that is based on Bi-Directional cascaded amplifiers system.

30

System Head-End

Leaky Cable Underground Network

CH1 Voice Radio Repeater CH2 Voice Radio Repeater CH n Voice Radio Repeater

~)
Wireless Video Portable Rad io

c :.0
0 ()

Q)

E
Portable Rad io

CMTS

~----~ ------~Amp~---Portable Rad io

~

Figure 4-1 , Leaky Feeder System Block Diagram

There are four distinct RF bands in the system. These bands are required to provide RF paths for the voice and data communications. Table 4-1, System Frequency Plan, lists the four bands of the system and their frequency ranges. The upstream and downstream orientations of the system bands are shown in Figure 4-2, System Bands Orientations Layout.

Band No. 1 2 3 4

Band Name Upstream Data Downstream Voice Upstream Voice Downstream Data

Frequency, MHz. 5-42 MHz 155-158 MHz 172-175 MHz 220-232 MHz

Table 4-1, System Frequency Plan

31

System Head-End

Cable Section - 01 n=1

To the system Head-End direction

To the system underground direction

Figure 4-2, System Bands Orientations Layout

4.3

System Algorithms

The AGC/ASC algorithms are providing for two types of automatic controls, the Automatic Gain Control (AGC) and Automatic Slope Control (ASC). The philosophy of the AGC algorithm is based on having reference carrier pilots propagating through the leaky cable network in the downstream directions. These reference carriers are utilized in adjusting the gain of the system amplifiers in both directions. The general aspect of this mechanism is illustrated in Figure 4-3.

The levels of the pilots at each amplifier input stage are detected by the RF detector (or receiver chip). The output of the RF detector is a DC voltage with values corresponding to the RF levels of the detected signals. The detected levels are referred to as Received Signal Levels, RSL, of the downstream pilots. The RSL for each downstream pilot will be stored in the amplifier' s microcontroller memory. These values are used as input variables to the AGC/ASC algorithms.

32

Directional Coupler
,-----------.,

RFin

Digital Attenuator

RF out

Figure 4-3, Downstream Digital AGC System Block Diagram

The algorithms have been designed to enable the amplifiers in the system to predict the losses. The gains of all amplifiers are adjusted to compensate for the system losses before they even occur. The problems of gain settling-time and system stability that usually exist in conventional AGS systems will be much improved as the new approach has eliminated the need for the feedback loop which is one of the essential parts in traditional analogue AGC circuits.

The algorithms are also providing for Automatic Slope Control (ASC) for the wide data bands in the upstream and downstream directions of the system. In the downstream data direction, two reference pilots are utilized to calculate the proper equalization value required to adjust the slope in this band. For the upstream data band, the system slope can be estimated based on predictions. The AGC and ASC algorithms and their system equations are explained in the following sections.

4.3.1

AGC Algorithm

The System Loss, L, of each section in the system consists of two components. The first component is called the Cable Longitudinal Loss (CL), which is due to the loss of the leaky cable itself. The amount of this component is, in fact, a function of frequency and cable length. The second component of the system loss is called, the Insertion Loss, IL. This component is not frequency dependent, and it is mainly caused by the insertion loss of miscellaneous active and passive units installed on the system. The frequency response of these units is typically flat where the attenuations are almost the same over the entire frequency spectrum. Example of these units

33

are cable branch units (power dividers or splitters), and cable splice boxes for joining two sections of cables.

Within the scheme of the AGC algorithm, it is very important to differentiate between these two types of losses and to quantify their values in order to make the right decisions regarding the gains adjustments in other amplification bands of the system. Both components of the system loss will be calculated to ensure accurate gain compensations at each amplifier in the system.

The system loss in each cable section, Ln,m, can be calculated as the following:

(4-1)

Where,

Ln,m:

The total system loss in one section of the cable, n, at frequency band m. The longitudinal cable loss in one section. These losses are function of cable length, xn and the frequency,fm, for each frequency band. The total insertion loss of all units installed on one section, n, of the system.

n: m:

The number of cable sections in the system. The band number in the system.

According to this algorithm, three reference carriers, also called pilots, are generated at the system Head-End. These pilots can be referred to as Low-Pilot, PL, Midpoint Pilot, PM, and High-Pilot, PH. The frequencies of these pilots are selected to be within the downstream voice and data bands.

The PL propagates within the downstream voice band. The PM propagates at the lower end of the downstream data band and the PH propagates at the upper end of the downstream data band. A graphical representation of these reference pilots is shown in Figure 4-4, Graphical Representations of the Reference Pilots.

34

j~

upstream Data band
(

Downs ream Voice Band
~~

pst ream Voice Band

u

Downs ream Data band
~
~

.
I

. Figure 4-4, Graphical Representations of the Reference Pilots.

f

The amplitude of these pilots can be set at the system head-end to reference power level, PL0

, PM0 and PH0 , for the Low Pilot, Midpoint Pilot and High Pilot, respectively. The
frequencies of the reference pilots are as shown in Table 4-2, Pilots Frequencies.

-

Pilot

,,

Frequency (MHz)
157.325 219.5 232.5

j PL

! PM !P H
Table 4-2, Pilots Frequencies

Only two pilots, PL and PH, are required for the AGC circuit. However, all three pilots are required by the ASC circuit to adjust the system slopes.

For the AGC circuit operations, the two pilots, PL and PH, propagate through the cable and hence losses occur. As previously mentioned, the losses are of two components, the cable longitudinal loss and the insertion loss of units installed on the system. When these two carriers arrive at the first amplifier, the RF detector at the input stage will detect (measure) the levels of

35

these carriers. The measured levels, PL1 and PH 1 , (n= 1, for the first amplifier in the system), will be stored in the amplifier's microcontroller memory.

Thus far, the actual total system loss of the first cable section, n = 1, for the downstream voice, and the data bands can be calculated, form= 2 and m = 4 respectively. The system loss is essentially the difference in the pilots' levels at the Head-End and the measured levels of these pilots when they are detected (i.e. measured) at the amplifier's input stage.

The system loss at PL frequency, JPL, is

(4-2)

And the system loss at PH frequency, /PH, is

(4-3)

So far, only the total system loss of the first cable section has been measured. The values of

CLn ,m and !Ln are yet to be determined. Let's rewrite Equation 4-1 to define the total system
loss for any cable section, n, in downstream bands m= 2 and m= 4. (4-4)

(4-5)

It will be advantageous to define a relationship between the longitudinal losses of leaky cable

at the downstream frequency bands, m= 2 and m= 4. This relationship will help in defining the loss of PL in terms of PH loss or vice versa. We can define the Downstream Cable Loss Ratio, RD, to be the ratio between the cable losses at PL frequency (which represent the cable loss at m=2) to those at PH frequency (which represent the cable loss at m= 4):

RD

= Cable Loss@ JPL
Cable Loss@ !PH

36

-~ RD -

CL

'

(4-6)

CLn,4

Therefore,
(4-7)

Cable loss ratios for different frequencies and types of cables can be obtained from the cable manufacturer and are also available in many reference manuals. A sweep test ~as conducted on one type of leaky cable commonly used in underground communication systems. The result of this test is shown in Figure 4-5, Leaky Cable Loss Chart.

0.00 0 -5.00

·I\

so 00

10( .00

15( .00

20( .00 25( .00

3oJ .oo
I

35( .00 40( .00

45~ .00

-10.00

co
~
Vl Vl

""-

I

~

I

.9 -ro c
"'C
::::J

-15.00

.9

"60 c

-

-20.00

""'vv-

~

~

\

I

-25.00

1\J__
VI
I

I

-30.00

I

\'

-35.00
Frequency (MHz)

1

I
I

Figure 4-5, Leaky Cable Longitudinal Loss Chart

From this curve, RD was calculated to be RD = 0. 792. If different types of cable are used, the value of RD should be adjusted accordingly.

37

Substituting Equation (4-7) into (4-4) and rearranging the equation will arrive at:

(4-8)

Substituting Equation (4-8) into (4-5) and solving forCLn ,4 results in:

CL
n ,4

= Ln ,4 -Ln ,2
1- R
D

(4-9)

!Ln can be calculated by substituting equation ( 4-9) into ( 4-5) as follows:
(4-1 0)

The insertion loss, !Ln at any section in the system is the same for all frequency bands.

The Longitudinal loss, CLn ,2 , of the cable section, n, in the voice downstream band, m= 2 , can be easily calculated by using the Downstream Cable Loss Ratio defined in equation ( 4-7):

So far, both components of the system loss, the leaky cable longitudinal loss, CL, and insertion loss, IL, have been determined for the system bands m= 2 and m= 4. Therefore, the gains of these bands can be found and adjusted to compensate for the system losses incurred in system section, n, previous to the amplifier. (4-11)

Now we can proceed in calculating the losses, yet to occur, in the upstream bands and predict the required gains of the amplifiers in this direction.

38

Equation (4-1) can be used to define the system loss in the upstream voice and data bands, m = 1 and m= 3 respectively: (4-12)

(4-13)

Recall that the insertion loss component, !Ln , was already determined during the calculations of the downstream system losses.

Let's define some reference points in the upstream voice and data bands. These points will be used in calculating the predicted signals losses in these bands. A graphical representation of these reference points is shown in Figure 4-6.

Upstream Data band

Downs ream Voice Band
H.

Upstream Voice Band

Downs ream Data band

-;. f

Figure 4-6, Graphical Representations for the Reference Points

·

J;

represents the frequency of a reference point at the lower end of the upstream data band.

This point is not used in calculating the gain of the upstream data band. However, it is used by the Automatic Slope Control algorithm as will be shown in the next section.

·

J;

represents the frequency of a reference point at the upper end of the upstream data band.

This point is used by the AGC algorithm in calculating the gain of the upstream data band.

39

The loss at this frequency represents the loss at the upstream data band, m= 1. This is the point of maximum loss in this band.

J;

is also used by the Automatic Slope Control

algorithm to calculate the slope in the upstream data band as will be shown in the next section.

·

J;

represents the frequency of a reference point within the upstream voice band. This point

is used by the AGC algorithm in calculating the gain of the upstream voice band. The loss at this frequency represents the loss of the upstream voice band, m= 3.

42.00 172.325 Table 4-3, Upstream Bands reference points-frequencies

Similar to the Downstream Cable Loss Ratio, RD, that defined a relationship between the two downstream bands, m= 2 and m= 4, more cable loss ratios are required to define relationships between the cable longitudinal loss at m= 2 and m= 1 and between m= 2 and m= 3 as follows: Let Ru1be the Cable Loss Ratio between the cable loss at

JPL and the cable loss at J;

_ Cable Loss@ JPL RUl Cabfe Loss@!;

(4-14)

Let Ru2 be the Cable Loss Ratio between the cable loss at

JPL

and the cable loss at J;

.

40

_ Cable ifLoss@ JPL RU2Cable Loss@ J;

(4-15)

Let Ru3 be the Cable Loss Ratio between the cable loss at

JPL and the cable loss at!;.

R

_ Cable Loss@ JPL

U 3-

Cable Loss@!;

(4-16)

From Figure 4-5, Leaky Cable Longitude Loss Chart, the values of Ru1 , Ru2 and Ru3 were determined to be Ru1 = 4.999, Ru2 We know that, CLn,I = CLn J2
=

1.927, and Ru3 = 0.981

·

Substituting for CLn,I in equation ( 4-15) ,

CLn2 CLn ,I =CLn ,f 2 =R -'
U2

(4-17)

The total system loss in the upstream data band, Ln,I , can be calculated from equation (4-12)

CL Ln,l = --.!22:...+ ILn R
U2

(4-18)

Similarly, the total system loss in the upstream voice band, Ln, 3 , can be found as follows:

Ln ,3

= --.!22:...+ ILn R
U3

CL

(4-19)

At this point, all the components of the system loss have been determined for both upstream bands. Equation (4-11) can be used to calculate the gains ofthe upstream amplifiers in the system.

41

4.3.2

ASC Algorithm

The slope control is required only for the data bands as these bands have broad bandwidths, 12 MHz for the downstream data band and 3 7 MHz for the upstream data band. The RF response of any cable section has the shape of a negative slope (Tilt). The longitudinal loss in the cable at higher frequencies is greater than the loss at lower frequencies.

The cable sweep test has shown that for a cable length of 350 m, a negative slope of approximately 2 dB exists within the data downstream band (220- 232 MHz). In the upstream data band (5-42 MHz), the slope is 6 dB.

In order to measure the tilt in the data band, three reference carriers (pilots) are required: Low Pilot (PL), Midpoint Pilot (PM), and High Pilot (PH). These are the same reference pilots used by the AGS algorithm. Similar to what was described for the AGC downstream pilots, the three reference pilots are detected at each amplifier in the downstream direction as shown in Figure 47, Automatic Gain/ Slope Control Circuit Block Diagram. The levels of the pilots are fed to the ASC algorithm. The tilts in the data bands can be calculated and equalized by controlling the variable slope control circuit. This algorithm explains the methods of calculating the slope in both data bands.

Amp

Upstream RF out

Upstream RF out

Upstream RF in

Figure 4-7, Automatic Gain I Slope Control Circuit Block Diagram.

42

Although two reference carriers are enough to calculate the slope of the system for the data bands, a third reference pilot, Midpoint Pilot (PM), was added to increase the accuracy of the slope control for the downstream data band, m= 4. To calculate the slope in the downstream
H ) are required to be data band, the system loss at the frequencies of PM ( !PM ) and PH (/P

determined. The loss at J P H was calculated in equation (4-3).

The losses at J PM can be calculated as follows: (4-20) The Slope in the downstream data band can be calculated as follow: (4-21)

~

is the slope in the downstream data band, m= 4. Next we need to calculate I;_ , the slope in the upstream data band, m= 1. To calculate this

slope, the cable longitudinal losses CLn J I and CLn ,/ 2 at the two reference points, .h and J; respectively are required. From the Cable Loss Ratio equations RU1 and RU2 (equation 4-14 and 4-15)

,

CL
n ,f!

= ____.!!2_

CL 4.999

(4-22)

CLn,/ 2 = CLn ,I ; This was calculated in equation (4-17)
Finally the slope, I;_, in the upstream data band can be calculated as follows: (4-23)

43

4.4

Algorithms' Flowchart

Figure 4-8, shows the flowchart ofthe AGC/ASC algorithm. The steps ofthe algorithm are explained below:

·

Setting Variables: in this section of the flowchart, few variables are set, including the reference levels of the pilots at the system head-end and some other important parameters specific to the cable type used in the system.

·

Data Input: in this section, the levels of the reference pilots at the input stages of the amplifiers are detected and stored in the amplifier microcontroller memory

·

Downstream Bands System Losses Calculations: in this section of the flowchart, the system losses are calculated for the downstream frequency bands. These losses include the cable longitudinal loss, CLm and system insertion loss, IL , for the downstream voice and data bands.

·

Upstream Bands System Losses Calculations: based on the downstream system losses calculations, the losses in the upstream direction can be predicted. These losses include the cable longitudinal loss, CLm and system insertion loss, IL, for the upstream voice and data bands,

·

System Gain: in this section of the flowchart, the gains of the four bands of the amplifiers are calculated and stored in the memory.

·

System Slope: in this section of the flowchart, the slopes ofthe data bands in the upstream and downstream directions are calculated and stored in the memory.

·

Data Outputs: the calculated and stored gain and slope values can be used to control the variable attenuation and slope control circuits to adjust the gains and the slopes of the amplifiers in the system.

·

Repeat Function: this is a loop function to continuously repeat the AGC/ASC algorithm. As it is not expected to have rapid varying losses in the system, the algorithm is not required to repeat itself immediately after each cycle of gain and slope adjustments. The algorithm can pause for a short time, Refresh Time (Tr), before the repetition of the algorithm cycle. This will help reduce the power consumption of the amplifiers and increase system stability.

44

"
t:
~

=

(

Start

)

·
..,

= = 'E
'i:

::c

~

Piloh LeHio; at the Head- End PLo, PMo , PHo

;;;..
~

=.«)

·
Cable Loss Ratios

00

RD , Ru1 , Rw, Rw

-

.=
s
~

=
c.

=

I

lntJut Pilots Le\Cls PH, PM and PM are Measured (detected) by RF detectors

·· ·

tore J>'ilots levels in the Memol') PH, PM and PM

·
I
I

I

Calculate Band 2 System Lo ·sc L2 = PLo-PL

+

..,
~

= ....:l
~

u .., .., ..,
~

= = -;
e

= ·.::

=

Calculate Band 4 System Losses L-1 = PHo-PH Calculate Band 4 Cable Los

·

·

..,

CL-1 = (LrL;)/(1-RD )
Calculate ection Insertion Loss

00 "C

~

..,

·

= = = e = !::
~

IL = L4 - CL 4
Calculate Band 2 Cable Loss

= =
~

..,

~

·

CL2=RD · CL-1

®

0

·

Figure 4-8, AGC/ASC Flowchart.

45

"' .= ~
~

~

u
Q

= -;
~

Calculate Band I (able Loss

0 ·
·

CL, = CL2/RU2
Calculate Band 3 Cable Lo

e .... "' 00
~

"' "' "' ....l

CL3 = CL2/Rw
Calculate Band I Sy tern l osse

=
~
~

= e ::
~

~

"'

·

L1 = CL1+IL
Calculate Band 3 y tem Lo ··eo;

~

c. "'

·

L3 = CL3+/L

= ·;
e .... "' 00
~

"'

Co-'

Calculate Sy tern Gain G, = L,. G2 = L2

·

G3 = L3. G4 = L4

e .... "' 00
~

E=

~

Calculate l lpstream Data Band Cable Lo · CLfl = CL21Ru1 (@ f1) CLp = CL1 (@ t2)

·

System Lo e t \>lid point Pilot, P 11

·

LM= PMo-PM
Calculate Data Band Til ts T1 = -(CLa-CLn) T4 = -(L4 - L M)
I

·

= s0 .!
Q
~

:l

=

I I

...
Output to Variable \ttenuators \djust Gain G I, G2 , GJ and G4

...
Output to Variable Equalizer \dju t lop Tl and T-1

I I

= c.
~

·
Do Nothing Operation Wait for t = Tr Sec.
__j

~

"

Figure 4-8, AGC/ASC Flowchart (Part 2 of 2)

46

4.5

Algorit~ms'

Simulations

The AGC/ASC algorithm was simulated using MA TLAB simulation software. A typical leaky cable system layout with 10 amplifiers was assumed for the purpose of the simulations, as shown in Figure 4-9. The output results of the simulations are summarized in Table 4-4.

Branches

Branch 1

I

0
Portable Radio Pilots Generators

Figure 4-9, Typical Leaky Feeder System Layout

To evaluate the simulation results, the following system operating conditions were considered in the evaluations of the algorithms.

1.

Amplifier's Maximum Power Output.

Each of the four amplification bands of the amplifier has a maximum power output rating. A wrong gain or slope decision might result in higher output levels that could potentially saturate the amplifiers and generate unstable system behaviors. It is assumed that the maximum power rating for the downstream voice band, m=2, is(+ 5.00 dBm). The maximum power rating for the other three bands was assumed to be equal to (-10.00 dBm). The simulation analyses show acceptable results for the maximum power outputs.

47

2.

Actual System Losses vs. Calculated Amplifier' s Gains

The calculated gain of the amplifier should match the actual system loss for each section. The analyses have verified that the calculated gain is adequate to compensate for the system loss.

3.

Actual Cable Tilt vs. Calculated Amplifier's Slopes

The calculated slope should match the actual slope or title caused by the cable sections in the system. The analyses have verified that the calculated equalizations are adequate to correct the slopes in the system.

As per Figure 4-9, the AGC/ASC algorithms have aligned the system to produce the proper gain and slope for each amplifier in both directions of the communication. After the amplifiers are aligned by the algorithm, the actual RF traffics for the voice and data communication are applied to propagate though the system. These RF carriers need not be confused with the reference pilots used by the algorithms for the system gains and slopes alignments

For the downstream direction, the RF levels of the voice and data carrier start from the surface Head-End. Therefore, simulation output table should be followed from the top to the bottom. For the upstream direction, the RF levels of the voice and data carrier start from the end of the system. Therefore, the simulation table should be followed from the bottom to the top. In the simulation, the upstream RF carriers were injected at the output of amplifier# 8.

48

Band Name
-1';

DSTVoice DST Data USTVoice UST Data
'

'

'

Bands Number Head-End Channel's Level @ Head End, -dBm Head-Ed Filtering Loss, dB Channel's Level @ Head End, dBm Channel's Tilt @ Head End, dB Cable Length, m Actual Cable Loss, dB n=01 Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level @ Amplifier Input, dB Calculated Equalizer, dB Amp- 01 Calculated Gain, dB Measured Level@ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB Cable Length, m Actual Cable Loss, dB n=02
I

2 25.00 -20.00 5.00

4
-10.00 -10.00 -20.00 0.00

3 -60.00 -20 -40.00

1 -49.98 -10 -39.98 -0.01

300.00 -13.71 -3.50 -17.21

300.00 -17.31 -3.50 -20.81 -0.77

300.00 -13.97 -3.50 -17.47

300.00 -7.11 -3.50 -10.61 -4.37

-12.21

-40.81 0.77

-22.53

-29.37 4.37

17.21 5.00

20.81 -20.00 0.00

17.47 -40.00

10.62 -39.99 -0.01

200.00 -9.14 -7.00 -16.14

200.00 -11.54 -7.00 -18.54 -0.51

200.00 -9.31 -7.00 -16.31

200.00 -4.74 -7.00 -11.74 -2.91

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level @ Amplifier Input, dB Calculated Equalizer, dB

-11.14

-38.54 0.51

-23.69

-28.24 2.91

Amp-02

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB

16.14 5.00

18.54 -20.00 0.00

16.31 -40.00

11.74 -39.99 -0.01

I

''

Cable Length, m Actual Cable Loss, dB n=03 Actual Insertion Loss in the Section, dB Actual Section System Loss, dB

280.00 -12.80 -3.50 -16.30

280.00 -16.16 -3.50 -19.66 -0.72

280.00 -13.04 -3.50 -16.54

280.00 -6.64 -3.50 -10.14 -4.08

-

Actual Cable Tilt, dB Measured Channels Level@ Amplifier Input, dB Calculated Equalizer, dB -11 .30

-39.66 0.72

-23.46

-29.85 4.08

Amp-03

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB

16.30 5.00

19.66 -20.00 0.00

16.54 -40.00

10.14 -39.99 -0.01

Table 4-4, Typical System Simulation Results (Part 1 of 4)

49

,·

DST Voice DST Data 4 260.00 -15.01 -3.50 -18.51 -0.67 -10.38 -38.51 0.67 15.38 5.00 18.50 -20.00 0.00 260.00 -11 .88 0.00 -11 .88 260.00 -15.01 0.00 -15.01 -0.67 -6.88 -35.01 0.67 11 .88 5.00 15.00 -20.01 0.00 260.00 -11.88 -3.50 -15.38 260.00 -15.01 -3.50 -18.51 -0.67 -10.38 -38.51 0.67 15.38 5.00 18.50 -20.01 0.00

UST Voice 3 260.00 -12.11 -3.50 -15.61 UST Data 1 260.00 -6.17 -3.50 -9.67 -3.79 -24.39 -30.32 3.79 15.61 -40.00 9.67 -39.99 -0.01 260.00 -12.11 0.00 -12.11 260.00 -6.17 0.00 -6.17 -3.79 -27.89 -33.83 3.79 12.11 -40.00 6.17 -39.99 0.00 260.00 -12.11 -3.50 -15.61 260.00 -6.17 -3.50 -9.67 -3.79 -24.39 -30.33 3.79 15.61 -40.00 9.67 -40.00 0.00

Branch 1 Band Name Bands Number
Cable Length, m Actual Cable Loss, dB

2
260.00 -11 .88 -3.50 -15.38

n=04

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level@ Amplifier Input, dB Calculated Equalizer, dB

Amp- 04

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB Cable Length, m Actual Cable Loss, dB

n=05

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level@ Amplifier Input, dB Calculated Equalizer, dB

Amp-05

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt)@ Amplifier Output, dB Cable Length, m Actual Cable Loss, dB

n=06

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level @ Amplifier Input, dB Calculated Equalizer, dB

Amp-06

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB

Table 4-4, Typical System Simulation Results (Part 2 of 4)

50

Branch 1 (Continue)

DST Band Name
'

UST DST Data Voice UST Data 1 260.00 -6.17 0.00 -6.17 -3.79 -27.89 -33.83 3.79 12.11 -40.00 6.17 -40.00 0.00 260.00 -12.11 0.00 -12.11 260.00 -6.17 0.00 -6.17 -3.79 -27.89 -33.83 3.79 12.11 -40.00 6.17 -40.00 0.00

Voice
,,

.

Bands Number
,,,

2
260.00 -11.88 0.00 -11.88

4:
260.00 -15.01 0.00 -15.01 -0.67

3
260.00 -12.11 0.00 -12.11

Cable Length, m Actual Cable Loss, dB

n=07

Actual Insertion Loss in the Section , dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level@ Amplifier Input, dB Calculated Equalizer, dB

-6.88

-35.01 0.67

Amp- 07

Calculated Gain, dB Measured Level@ Amplifier Output, dBm Measured Flatness (Tilt)@ Amplifier Output, dB

11.88 5.00

15.00 -20.01 0.00

I

Cable Length, m Actual Cable Loss, dB

260.00 -11 .88 0.00 -11.88

260.00 -15.01 0.00 -15.01 -0.67

n=08

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level @Amplifier Input, dB Calculated Equalizer, dB

-6.88

-35.01 0.67

Amp- 08
I'

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB

11.88 5.00

15.00 -20.01 0.00

Table 4-4, Typical System Simulation Results (Part 3 of 4)

51

DST Branch 2 Band Name Bands Number
Cable Length, m Actual Cable Loss, dB

UST DST Data Voice UST Data 1 260.00 -6.17 -3.50 -9.67 -3.79

Voice 2 260.00 -11 .88 -3.50 -15.38

4
260.00 -15.01 -3.50 -18.51 -0.67

3
260.00 -12.11 -3.50 -15.61

n=09

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB Measured Channels Level@ Amplifier Input, dB Calculated Equalizer, dB

-10.38

-38.51 0.67 3.79 15.61 9.67

Amp- 09

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB

15.38 5.00

18.50 -20.00 0.00

'·

Cable Length, m Actual Cable Loss, dB

260.00 -11.88 0.00 -11.88

260.00 -15.01 0.00 -15.01 -0.67

260.00 -12.11 0.00 -12.11

260 -6.16571 0.00 -6.17 -3.79

n=10

Actual Insertion Loss in the Section, dB Actual Section System Loss, dB Actual Cable Tilt, dB

-

Measured Channels Level@ Amplifier Input, dB Calculated Equalizer, dB

-6.88

-35.01 0.67 3.79 12.11 6.17

Amp -10

Calculated Gain, dB Measured Level @ Amplifier Output, dBm Measured Flatness (Tilt) @ Amplifier Output, dB

11.88 5.00

15.00 -20.01 0.00

Table 4-4, Typical System Simulation Results (Part 4 of 4)

52

Chapter" 5 5 System Performance under Error

5.1

Introduction

Errors in calculating and predicting the gains and slopes might occur within the scheme of the proposed algorithm. There are many areas within the scheme where errors could be generated. From the system level point of view, errors could accumulate in cascaded amplifier systems. The accumulated errors could in some cases be of a significant magnitude that they would result in producing intolerable operating conditions. Therefore, the analyses of the accumulated errors are very important exercises that help in producing quantifiable figures required to evaluate the affects of the errors on the performance of the system. The scale of the system (i.e. the number of amplifiers in the system) will be an important contributing factor to the accumulation of errors.

This section highlights three distinct types of errors that could affect the accuracy of calculating the gains and slopes of the amplifiers in the system. In general, these errors are of a probabilistic nature. Therefore, the theories of Probability and Stochastic Processes will be used in defining proper probability distributions of errors in the system. The analyses will help in quantifying the magnitude of errors and estimate the accumulated effects of the errors on the systems.

System simulations have been conducted in analyzing the effects of errors on typical system's operations. Based on these error analyses, suggested remedies and modifications have been presented to help reduce the errors in the systems. Three types of errors were identified as factors potentially affecting the accuracy of the algorithms in calculating and predicting the gains and slopes of the amplifiers in the system.

53

5.2

Pilot's Levels Precision Errors (LPE):

At the inputs stages of the system amplifiers, the levels of the reference pilots are detected by the RF detectors. These levels are expected to be stable at the points where they are measured to provide stable and accurate inputs needed for the calculations of the system losses. However, this is not the case. There might be some variations in the pilots' levels over a short period of time. The variations in levels could be caused by instability in the operation of the RF generators producing the pilots at the system head-end. The variations in the pilots' levels could also be caused by external noise generated by mining machineries or any other types of external noise sources within the proximities of the leaky cable. As a result, the precision and accuracy of the detected levels might include some errors.

The errors or variations in pilot levels are random in magnitude. They can be modeled with a Normal (Gaussian) Distribution Function as shown in Figure 5-1. In probability theories and statistics, the Normal or Gaussian distribution is a continuous distribution which describes data clustering around a mean or average. The graph of the associated probability density function is bell-shaped, with a peak at the mean.

P(x)

0.4

0.2

-3a

-2a

-1a

J.l

1a

+2a

+3a

Figure 5-1, Gaussian Distribution Function for the variations in pilot levels

In our case, the average or the mean (p) of the Normal Distribution Function represents the
average level of the pilot (i.e. the average of PL, for example, when detecting the Low Pilot) .The Standard Deviation (a) of the Normal Distribution Function is the variation in the pilot levels away from the mean. In this algorithm, it is assumed that the first standard deviation ( 1a) is 1.0 dB far from the mean.

54

5.2.1

Pilot Levels Averaging Technique.

The Probability Density Function, PDF, for a normal distribution function is given by the formula

p(x)=

~exp(-(x-~) J a 2:r 2a

2

(5-1)

The Level-Averaging can be achieved by sampling the pilot levels over a period of time. The number of samples per sampling time cycle (t =Ts) can be detected by the RF detectors. The levels of these samples can then be stored in the memory of the microcontroller. The average value of the samples can be computed by calculating the means (JL) ofthe discrete Gaussian function.
N

JL

= Lxi. p(xJ
i=l

(5-2)

Where N is the number of samples over one cycle of sampling time, T s.

5.2.2

Calculating Pilots' Mean Level

To calculate the mean, the probabilities of each random variable are required to be determined. The following procedure can be used to calculate the means of the pilots' levels.

1.

Pilot Levels Sampling

N numbers of samples are obtained by sampling the received pilot signals over predefined sampling period Ts. The values of the samples are stored in the memory as one dimensional matrix, V(s). The sampling rate, Rs, can be defined as the ratio between the number of samples, N, to the time period of one sampling cycle, Ts.

(5-3)

The sampling rate, Rs, is a very critical ratio in determining the accuracy of the averaging technique. The accuracy increases with a greater number of samples taken per one sampling cycle.

55

2.

Samples Levelisations (Quantization)

In this process, the samples are grouped or classified into a number of levels (quantization), where samples' values, V(s), are approximated to certain level, J(s). Assuming an accuracy of I dB is acceptable, the quantization of the samples can be done with taking the integer of the sampled values V(s)

J(s)

= INT[V(s)]

(5-4)

3.

Defining random variables xi

The levels, J(s), can be considered as random variables, xi , with frequency of occurrences as F( xi ). The random variables can be listed in a table with their corresponding frequency of occurrences F( xi ). This list defines the Probability Distribution Function (PDF) of the pilots' levels.

4.

Calculating the probabilities of the random variables, p( xi)

The probability of each random variable listed in step 3 can be calculated as follows:

p(x) =

F::)

(5-5)

5.

Calculating the mean, (J.!) of the Gaussian function

The mean of the pilot levels can be calculated as follows:
N

JL

= Lxi . p(xJ
i=l

(5-6)

Adequate precision of less than 1 dB can be obtained in detecting the levels of the reference pilots. The Averaging Technique is explained in Figure 5-2, Reference Pilot Averaging Technique Flowchart.

56

00

..!

t:

(
rll

Start

)

T

; ·=
~

rz:, ;,

-=
0.0~ =~
l.o

a counter For the number of Sample' s =I

"'~t

-~
~

=

rll

I

~
Sampling V(s)
T

I

.!l
Q;

=

...

I .e \ elisation J(s)
_y_

.5
rz:,

-= = =
0.0

~

"S.

.'tore Samples Le' el , in the \licrocontroller's \ ·)emory
T

e

=

= .:
c.

..!
Q

Increment ( 'ounter s=s+l
T

=
----

No

s=N? Yes

...

-;

=
~

= = e
~

Defining Random Variables x(i)
_t_

...
~

...
~

f

0.0

Calculating the Probabilitie F(i) P(x;)= N

;

=
~

+
Calculate the mean
p=~x;
l

= = -;
Col

-~

0.0

P(i)

T

u

Store Pilots Means (u) in the Memory

I

-= =
~

(

:!
End

)

Figure 5-2, Reference Pilots Averaging- Technique Flowchart

57

The following example illustrates the steps for calculating the average (mean) of the PL level when it is received and detected by the amplifier's RF detector. Figure 5-3, shows the variations in the PL level as it is detected by the RF detector. Assume the sampling rate of 10 samples/ sec is used in the calculations.

PL(dBm)
9

8

t (sec)

Figure 5-3, A Typical Pilot Signal

·

Sampling; Figure 5-4, shows the received (detected) pilot levels sampled with a sampling rate of 10 samples I sec.

·

Samples Quantization; The values of the samples have been approximated to the value of the levels that they fall into, as shown in Table 5-1, Sample Quantization List.

·

Defining random variables x(i) ; the frequencies of each level are listed in Table 5-2, Random Variable Frequency of Occurrences. This list defines the random variables ofthe Gaussian distribution function.

58

f\(dBm)
9

8

2

t (sec)
S=1 S=2 S=3 S=4 S=5 S,;,6 S,;,? S=B S=9 S=10

Figure 5-4, Pilot Sampling

Sample Number (s)
1

Sample Value V(s)
5.90 6.80 5.10 6.25 4.50 5.20 6.50 5.50 4.75 5.75

Levels Value J(s)
5.00 6.00 5.00 6.00 4.00 5.00 6.00 5.00 4.00 5.00

2 3 4 5 6 7 8 9 10

Table 5-l, Samples Quantization List

59

4.00

2
5

0.2 0.5 0.3

2
3

5.00 6.00

3

Table 5-2, Random Variable Frequency of Occurrences

·

Calculating the Probabilities of the Random variables, p(xi ); the probability of each random variable can be calculated by using equation ( 5-5). For the first random variable, x( l )= 4.00, the probability is

p(xi )

2 =to= 0.2

The probabilities for the reset of the random variables can be calculated in a similar way as shown in Table 5-2.

·

Finding the as follows:

mean , (~)

ofthe Gaussian function: equation (4-6) can be used to find the mean

j.1

=4.00

X

0.2 + 5.00 X 0.5 + 6.00 X 0.4
~ , represents

=5.1

The mean,

the average value of the reference pilot level PL. (i.e. PL=5.l dBm)

5.2.3

Averaging Technique Simulations

Utilizing MA TLAB simulation software, the Level Averaging Technique was simulated to verify its effectiveness in reducing the Pilots Levels Precision Errors, LPE. In this analysis, the pilot signal is sampled 50 times over the sampling cycle of l 00 units. Figure 5-5, Pilot Signal Sampling Simulations, shows the hypothetical pilot signal and the samples taken for the signal. Figure 5-6, Pilot Levels Histogram Simulations, shows the signal levels' histograms and the PDF for the variation in the received signal levels. It was concluded that an accuracy of less than l dB can be obtained from this averaging technique.

60

-3 L . . . - - - - - - - L - _ . . _ - - ! - - - 1 - - . . . . L . . . - - - - - - J - - - L - - - - ' - - - - - 1 - - . . i - - - - - - l o 1J 20 30 40 so eo 7C · ao QC · wo Time

Figure 5-5, Pilot Signal Sampling Simulations.

IMean (~,;)=-3 .445

2

-2

-1

2

4

Figure 5-6, Pilot Levels' Histogram Simulations

61

5.2.4

Ideal Number of Samples N

The precision of calculating the average ( J.-L ) of the pilot levels generally improves by increasing the number of the samples N within the sampling time cycle Ts. The increase in the number of the samples also increases the calculation time needed by the microcontroller to obtain a result. Therefore, it is important to obtain an ideal number of samples to satisfy the precision requirements while not affecting the calculation speed.

Simulation analyses were conducted to evaluate the ideal number of sample vs. precisions in averaging the pilot levels, as shown in Figure 5-7. In the simulations, the expected (true) value of the pilot level at the input of the amplifier with no variations occurring was expected to be 0 dBm. However, errors occur with the variation in the pilot level. The averages of the detected signal were analyzed vs. the number of samples used in the averaging technique. It was found that the precision improves by increasing the number of samples, N. The simulations showed that the precision reach a certain limit of improvements with increasing the number of samples. An ideal number of samples could be determined. The simulation analysis shows an ideal number ofN = 20 samples when the precision of the pilot level reached a limit of a little or no further improvements.
0.9 .------r--1_-------,~r-----,!-----.1-----.~--------,
0.95 ..... · 1~ · ······ . · ·· · j.. ..... ... ...... .j... .. .. ..........j.. ....... .. .. ..
1 I
I

·l·...............j. .... .. . .. .... .·' '

: '
;

: '
;

: '
;

o.e. - -·· \.. · · · -·· ··· ~ -· · ·· ·· · ·· ·· · .. -~- ·· ·· ··· ·· · · · · · · ~ ·· ·· · .. · · ·· ·· ··· i · · · · · · · · · · · · · .. · ~ · · · · · · · · · · · · · · ·
II
I

;
;

;
;

;
;

:
;

.
'

0.75 1- ·.. . ~; . . . . . . .. -~ . . . .... . . . . .... -~- . ·.. .. . . ....·.. ~- ... . ·....... .. . : . . . . ........ . .. -~ .. . . .. . . ... . . . ·-

~
~
-

0.7 1- . . . . . ..... ... t ..... .. ... .. ... .1. .. .. .. ... .. ....
I

~\',

:
·

:
·

j:............... .:
. .

1................

:
·

~

. . . . .. . ... . . . . ·-

~ o.o5-·······\····· ·L··············i················1···············:······· ········t··············c .e~

: ···. ·· : ··- ·····. r ······- ···::·- ···- ·- ··- ··\
\· ··~,~: : :
· · 0

i· ·· ·· ··· ·· ·· ··· ·

: :

:

: ·· ·· ··· ·· ·· ·· ·· f

0.5E· 1- · · · · .. · .. · .. · · · ~- >~~~.. ··· ·.. · ·.. -~- ·· .. ··· ·· ·· ·....~ ·· ·.. .. ·· ·.. · ·..
I I I

i····.. ·.. ·····<· .. ·.. · ··......·· ·

I

I

0.5- ... . .. . ... . ...

-~ . . ... . ~:~~v-·~~~~:-:-:-:<~~~~>::-.-<·~ ~-:<-:-::->:-.,y~::·:~~-., ~-- ···:·--..:~:/:-:-.-:~-:<
·

. . . . 0.4E·....___ _ _....Ji....___ _ _......;_ _ _ _......i_ _ _ _
.
I I I I

.

·

·

·

....~..-_ _ _--'-i--------~

. '
I

0

J

5

10

15
t-1 umber of Samples , I'J

20

25

30

Figure 5-7, Number of Averaging Samples vs. Precision.

62

5.3

Components Tolerance Errors (CTE):

The accumulations of components tolerance in electronics circuits can cause parts of the circuits to operate outside their nominal operating range. This will, of course, affect the functionality and the outputs of the algorithms. The levels of the reference pilots at the output of the downstream amplifiers are required to be exactly the same as their levels at the Head-End. However, the CTE can affect the accuracy of these levels.

The errors related to the tolerances of the circuits components can be controlled and reduced to a good extent by properly calibrating the amplifiers during the manufacturing process. However, the tolerances of some components might change after the installation of the system or by the effects of temperature variations. These errors will result in imprecise reference pilots levels leaving the amplifiers (i.e. not equal to the level of the pilots at the system head-end). Mostly, these errors affect the operation of amplifiers in the downstream direction.

The Components Tolerance Errors factor ( EcrE ) can be defined as the percentage of errors in the gains of the amplifiers caused by the Components Tolerance Errors (CTE).
(5-7)

Where,

is the Errored-Gain of the amplifier. is the Nominal (error free) gain of the amplifier. is the Components Tolerance Errors factor (in± percentage figures)

The EcrE , can be either positive or negative. Positive EcrE makes the gain of the amplifier higher than the proper level of the error-free gain. Negative EcrE makes the amplifier's gain lower than the error-free gain.

63

For example if the expected nominal, error-free, gain of the downstream voice band, G2 , is 15.00 dB and EcrE is± 2.5 %, then EG2 can be calculated as follows:

EG2 EG2

= 15.00x (1 + 0.025) = 15.375 dB = 15.00x (1- 0.025) = 14.625 dB

for positive EcrE or, for negative EcrE

5.3.1

CTE Simulation Analysis

Obviously, CTE can affect the operation of the AGC/ASC algorithm and thereby generate inaccurate gain and slope figures. To evaluate the effects of the CTE, simulation analyses were conducted. In these analyses, the ( EcrE ) was assumed to be a Discrete Uniform Random Distribution Function of a maximum value of 5% (or± 2.5 %). The analyses were conducted on a system with 100 cascaded amplifiers, as shown in Figure 5-8.

Pilots Generators

Portable Radio

Figure 5-8, Multi-Cascaded Amplifiers Simulation Network.

For the downstream voice band (m=2), the voice carrier level leaving the system head-end was assumed to be 0 dBm. When this carrier propagates through the first section of the system, it will be attenuated by a factor equivalent to the losses of this section. Typically, the following amplifier in the system will compensate for the losses with a gain of (G 2= -L 2). This way the

64

signal level will be boosted to its level at the head-end. However, errors occur where the CTE affects the operation of the AGC algorithm in calculating the downstream system gain.

Figure 5-9, Downstream Voice Band CTE Simulations, shows the output ofthe simulation analyses of 100 amplifiers in cascaded configurations. The trace in gree·n shows the output levels of the downstream voice carrier with no error assumed by the CTE. The trace in red shows the output levels of the downstream voice carrier with 5% of uniformly distributed random CTE error affecting the gains of the system.
Components Tolerances Errors (CTE} Dm·mstream Voice Band

0 ·

0 0

- - 5% CTE

.. , .. .... .. .... .... . , .. ..... .. .. .... , . .. .
0 0

al
Qj
....J

E

"0

~

0

'5 0.. 'S
L..

~

~ -0.2 0.

-0.4 . . ..... . .. . .... . . ...... . . .
0
0 0 0 0 0

0

· 0 0 0 0

-0.6

. .... ....... .. ... .. ...... . .... .. .,. .... .. ...... . . . ,. ............ .... . ... .. .. ......... ..... . . . .... ............. ... . . .. . . ................ . .. . . .. .... ..... . . . . . . . . . .......... . . ................ ... . ... ...... .... ..... .. .... .. ....... .... . . . .. ................ ... .......... .. .... .... .. ... .... . .. ..... ......... ........ .. . .
0 I I I I I I I I I 0
t

-0.8

·

·

·

0

0

0

·

I I

. .
I

I

. .
I

.
0

I

. .
I

. .
I

. .
I

. .
I

.
I

Amplifier Number, n

Figure 5-9, Downstream Voice Band CTE Simulations

Figure 5- 10, Downstream Data Band CTE Simulations, shows the output of the simulation analyses for the downstream data carrier. The trace in green shows the output levels of the downstream data carrier with no error assumed by the CTE. The trace in red shows the output levels of the downstream data carrier with 5% of uniformly distributed random CTE error affecting the system gains.

65

Components Tolerances Errors (CTE) Downstream Data Band - - E rror Free

- - 5%CTE

· · : - -- ----· ·: ·
0 0 0 0

.

.

"if -14_ 8
·~

ID -o

E

>

_J

a.. ~

~ -15_2
0

'-

-15-4 -15_ 6
· ·· ---- ---- · · · ·· ----- - · · · - --- '"· -. .
0 ·

,,} 0
0 0
0

... .. ... ..·.
0 0 0
0

0

. .. . ....... .. . . .

. . , _______ ___ . ·· -------···· ·-----·-- -· · . .
0 0

0

0

----- ··· ·--- ----- ·· · ··- -- --0 0 0 0 0 0

. ... . .... . . .. . .
0 0 0

0

···

-

4

..

--

-

..

..

·

.

.. ..
I

- - - - - - - ··· ·
I

·

------

-·I

···· ---- -·--I

0

·

··

I

0

I
I

I
I

. . .
0

. . .
0

. . .
o

. . .
I

Amplifier Number. n

Figure 5-l 0, Downstream Data Band CTE Simulations

ln the previous simulation analyses for the CTE, we assumed uniformly distributed random
CTE error affecting the system gains. Alternatively, we could also assume a systematic fixed percentage of errors equally affecting all the amplifiers in the system. Figure 5-11 shows the simulation analysis for a system of 10 amplifiers when EcrE = 5% in all amplifies. The simulation shows very interesting results when the algorithm demonstrates a good self-healing mechanism by stabilizing the gain errors to a minimal value as shown in Figure 5-11.

66

0.9 1 .-------r~--.,.~----..~---,...-1.- - - r 1. - -.. ~----..!---.-1 . ---r·. - - . .

o.e.- . ..... .-<!:· ........ ~ .. . .. .... :... . ... .. ~- .. ... .. . ~· . ... .. .. ~- .. . .. .. . ~· .. .. .. .. ·:· ........ ·:· .. .. .. . ·-

.

.

.

.

.

.

~ O.I~~-·-··· · -~ - · -··· · ··1····· · ··-~·-···· · ··:· · · · · · · · · 1 · · ···· · · ·1···· · · · · ·: · · · ·· ·- · ··r· · · · · · ·· ·t · ·······0
~

:
;

;

; ;
;

:
;

;

:
;

;

:
'

;

; ;
;

;

; ;
;

:
;

;

...J

~ o.re. ~· · · · · · · ·j· · ·· · · · · · [· · · · · · · · ·j ·· · · · ·····1· · ··· ·· ···1· ··· · · ··· ·1· · ·· · · ··· ~ · ···· · ··· ·1·· · · · · ··· ·1····· ·· ··. . . .
. . .

~

~

~

~
:

~
;

~
;

~
:

~
; I

~
:

~
:

C l.77

- · - · · - ·- i- · -- · - ·- · ; · · - · .. ·- · - i ·- · - · - · -- .; - · - · - · · - · ~ · - · - · · - ·-.;- ·-- · - ·- · ~ · · - · - · - · - .;. - ·- ·- ·-- .;.. ·- ·- · · - ·-

·6 (' o.7e· ········: ···· ·····c}, · · · · · · · ·: · · · · · · · ·· :· · · · · · · · · . · · · · · · · · :· · ·· · · · · ·e;.· · · · · · · · '·' ·:· · · · · · · ·· ·:· · · · · · · · ·. . .: ; · ::0
~

.
I
· ·

.
I
· ·

.

.
I
· ·

(:; ~·
I
· 0

·~
.
I
· ·

~·

.
I
0 ·

.
I
· ·

.
I
· ·

I
· ·

.
I
I

.
I

. .
I I
I

.
I I

.

.
I I
I

.

.
I I
I

.

. .
I I
I

. .
I I
I

. .
I I
I

.
I I
I

.

I

O.?e. ~....--___._·
· :::1

_ _...~. · _ _-~,i_ _.....~.... · _ _..~...·_ _.,Li_ _...~. · _ _ _·~....-_ _ 2 3 4 5 B : a a
Amplifier Number, n

,_r · _

____,~

o

Figure 5-11, Fixed CTE Simulations

5.3.2

CTE Corrections

All amplifiers in the systems will be properly calibrated and tested during the manufacturing process. CTE is not expected to be more than± 2.5 %. However, to ensure higher levels of precision, additional RF detectors can be added at the output stages of the downstream amplifiers.

The output RF detectors will feed the algorithm with two additional inputs (entries) for the levels of downstream pilots at the outputs of the amplifiers. Based on these additional inputs, the AGC algorithm will be informed about any deviations in amplifiers' gains caused by CTE. Therefore, the algorithm will adjust the gain of the downstream amplifiers to keep the output levels of the pilots to their constant reference levels at the system head-end. This technique will offer high precision in controlling the levels of the pilots to exactly match the levels at the headend (100% corrections). This technique is shown in Figure 5-12, Algorithm's Errors Corrections Block Diagram.

67

Downstream

oc;·
t'D
I

""T'j

...., =

I

~-·RF·i·;~ ~ I

k

)

I I

I~H

Atte·~~;tor

tTtl

~·-

Control

....

-

r------1

A~

I k

)

I ~ ~ownstream rx. , RF out

p

Vl

ciQ
0 ....,

>
::r
~·

3

VJ

I

r-------1 ~ r-------i

'M '"'-"'- -"'--

I

.. I

Microcontroller

0\

00

0 ....,
VJ

=i
0

tr:l

n
t'D

=i

(')

o· ;:::3
VJ

.......

0 (')
0

t:C
;;o:::~·
~

~

3

I

Upstream RF out

------i rx. ~I ,

r)

I

~mpH

Slope Control

f+i-j

Digital ~ Attenuator V0

I

I ~ ~ Upstream rx. , RF in

Upstream Data Band m= 1

A correction factor, Dm, is introduced to the algorithm to obtain the deviation factor of the errored gain from the error free gain, as follows:

D ={ m PHo -PHout

PLo -PLa u t

for m=2 form =4
(5-8)

By adding the correction factor to the amplifier's Errored-Gain, the Corrected-Gain can be determined as below:
(5-9)

Where,

CGm

is the Corrected Gain. In the case of the CTE corrections, the corrected gain is only applicable to the downstream bands (m= 2 and m= 4).

Dm
EGm

is the gain Correction Factor is the Amplifier's Errored- Gain of band m is the Low-Pilot level at the system Head-End (i.e. the reference level) is the High-Pilot level at the system Head-End (i.e. the reference level) is the Low-Pilot level at the output stage of amplifier

PL0 PH0 PLout

PHout is the High-Pilot level at the output stage of the amplifier
Simulation analyses for the CTE corrections technique on a system of 100 amplifiers were conducted. The output results ofthese analyses are shown in Figure 5-13, Downstream Voice Band CTE Corrections and Figure 5-14, Downstream Data Band CTE. The analyses have demonstrated that the proposed correction technique is very effective in correcting errors caused by CTE to almost 100 %.

The blue traces in the figures indicate the corrected voice and data signals at the amplifiers output ports. The red traces show the output of the amplifiers with CTE components added as a uniform distribution function with a maximum value of 5 %. The green trace (behind the blue trace) is the original, error free, output levels. It is clear that the CTE has been corrected completely.

69

Correcting CTE Downstream Voice Band --Error Free - - 5%CTE - - Corrected CTE

0.8 0.6 ... . . . . . . .. .. ... . , . .. ..... . , .

-0.6 -0.8

···----·--- ·· ···" ·-- -- -····----- ·-- · ···· -------·- ·· · -- ---· --- ···· ··· · · -····· · .. ... . . .. ... ..

-1~--~--~--~~--~--~--~----~--~--~--~

0

10

20

30

40 50 60 Amplifier Number, 11

70

80

90

100

Figure 5-13, Downstream Voice Band CTE Corrections
Correcting CTE Do·wnstream Data Band

.. ; ........ . ; . ... . .. .. ; .... .... ,

. .
;

. .
.

. . . .

. . .
;

.
' '

. . .
' .

.. .. .
. .
· ·· · ·

--Error Free - - 5%CTE - - Corrected CTE
··.· -·- ··· ···.· . ·· -------.. · · · · - - -- ·.·· . · ···
. .

-

-

·

·

·

0

··

. .

-

-

-

-

-

-

-

-

·

··

·

·

-

·

-

0

0

;

0

·

··

·

·

··

·

~

. .

.

.

.

.. .. . ... . ... . . ····· · · ·· ···· ···-···· ··· ··"·-· ·····

,

. .. ..... . ..... ... . .... .

-15.8

.. ·-- - ---- -· .

. .. · -·--- --- .. · - -· -- - -- · ..

. . · - - ---·--- ··.

-16 L _ __ __..i..__ __ J . . ._ _ _ _.L....__ __ . _ __ ____,__ _ _ _.l...___ _--'--------L----.J...._----' 10 100 0 20 30 40 50 60 70 80 90 Amplifier Number, 11

Figure 5-14, Downstream Data Band CTE Corrections

70

5.4

Gain Estimation Errors (GEE):

According to the AGC algorithm, calculating the gains of the amplifiers in the upstream bands is totally achieved by predicting (estimating) the losses in the system section ahead ofthe amplifier. These estimations are based on the inputs provided to the algorithm during the calculation of system losses in the opposite downstream directions of the system. In the algorithm, there are few pre-defined variables and parameters specific to the type of the leaky cable. These cable parameters are very important variables in calculating the system gains and slopes, especially for the upstream bands where there are no reference pilots used to measure the actual system losses. It is very important for these parameters to be accurate and consistent all through the system. These parameters are normally obtained from the data sheets of the cable.

Faulty cables or bad installation practices could cause the cable characteristics to change from the predefined parameters. Therefore, errors occur in estimating the gains of the amplifiers. These errors can be referred to as Gain Estimation Errors, GEE.

Gain Estimation Errors (GEE) can be defined as a percentage of errors in gain estimations of the amplifiers in the upstream bands (band 1 and 3). These errors are not expected to be a significant factor (about 5%). However, for bigger systems, with large a number of amplifiers, the accumulation of these errors should be considered. GEE can be either positive or negative. A positive percentage of GEE occurs where the estimated gain is higher than the nominal gain required for the compensations of the upstream system losses. A negative percentage of GEE is the case where the estimated gain is lower than the nominal gain required by the system for the compensation of the upstream losses. GEE errors can be calculated as follows:

For m=l and m= 3

(5-10)

Where,

EGm

is the Errored-Gain of the amplifier. is the Nominal (error free) gain of band m amplifier. is the Gain Estimation Errors factor (in± percentage figures)

Gm
E GEE

71

5.4.1

GEE Simulation Analysis

Two important operating conditions must always be satisfied when analyzing the operation of the AGC algorithm. The first condition is that the output of the amplifiers must not exceed their rated maximum output power; otherwise the amplifiers might become saturated and produce unstable system operations. The second operating condition is that the levels of the signals at the amplifiers output should not be less than a specific value allowed by the receiver's sensitivities; otherwise, the received signals at the system head-end can not be detected. Low output levels also result in a low Signal-to-Noise Ratio (SNR). The effects of the GEE was analyzed using MA TLAB system simulation software. The circuit of Figure 5-8, Multi-Cascaded Amplifiers Simulation Network, was considered during the analyses.

Figure 5-15, Upstream Data Band GEE Simulations, shows the output results of analyzing the effects of the GEE on estimating the gains of the upstream data bands. In these analyses, a uniform randomly distributed error with a maximum value of 5% was assumed. For the system to operate properly, the levels of the data signals at the outputs of amplifiers must be maintained below (-10 dBm), which is the maximum output power of the amplifiers in this band. The other operating condition is that the levels of the data signals must be higher than(- 40 dBm) at the output of the amplifiers.

The simulation analyses of 100 amplifiers shows acceptable results in satisfying the operating conditions of the system. In this simulation, the input signal level of the data carrier in the upstream direction was assumed to be (-40 dBm) at the inputs ofthe last amplifier in the system. Typically, the gain of the amplifiers in this case should be (8.3 dB) according to the algorithm estimations. This means that the output of the amplifiers in this band should be (-31.7 dBm) when no error was assumed. The trace in green in Figure 5-15, Upstream Data Band GEE Simulations, shows the nominal (error free) amplifier's output levels in the
up~tream

data band. The trace in

red shows the output with 5% of GEE included. The simulations show acceptable results satisfying the operating conditions of the system.

72

Gain Estimation Errors (GEE) Upstream Data Band -30r---~~-----r~ _ ----~~----~~-----r~ . ----,~----~~----~====~==~ - - Error Free - - 5%GEE 1

I

-30.5- ..... . .

.

~

~

... .... . . . . ................ ... . . .. - .... - ...... . . ............. ... . . .................. ... ............
0 0 0 0

E -3 ·1 1- ..... ..

o ......... o .

.......

~

........ ..........

~

...... ... :.. ......

.

. . . . . . . .. . . .

.. .. _

;E;
.....J ,\

;of·\l\v/\', /'.J ':/\./\ : vr/' : ' /\: /\ : /'\. ._
0 0 '

% -3·1.5- . . --- . . . :.-- . . -... : · / :/ \ /\/"-: .. . . .... : .. ... 0 o o oo ' 0 :

,

:

'·;

:

: \

.

'...Yv'\l l L r . ..:.... ~.( - ...:.. .....
·, 0 /o 0 0

I

0 0 \o

,!o....;

'·

./

I

·\l[· .... _ ·.::o~~'·i /' \,:~
.
\ \

\~~. : I·

0

... _
'
\

0

Q;
!E

......,
\\

o_

~

-32 ~ .. \ / :
0 0

\

/\.;-

0 t"· ;.'\_ I ~

\/

; :

~

: . . -0 0

:

T. -.. - -. - -. .. - - - --.
0

:

:

.

.

.

.

.\..:

/

0 0

-32.5 -.-- ...

0

0 ·· -. -

--- .

0

··· ·· · ·· ·

-

··· ·

-- ···· -

···

· ·

'

···· -.

·

·

· -- ----- -

· · - - - - - - -.-

··

· - - - - ·· ·

--

···· - -

1· ----~;_ _ _ _~;-----~ 1· ----~;_ _ _ _~ -33~--~-----~~ - ----~----~;-----~

0

10

20

30

40

50

60

70

80

90

100

Amplifier Number, n

Figure 5-15, Upstream Data Band GEE Simulations

Figure 5-16, Upstream Voice Band GEE Simulations, shows the results of simulating the system in the upstream voice bands. The maximum output power of the amplifiers in these bands is (-10 dBm); therefore, the output of the voice carriers in the upstream direction must be kept below (-10 dBm). The minimum level at the amplifier's output in these bands must be higher than (-80 dBm). These parameters consider the receiver's sensitivities and the losses of the filters at the head-end and also the cable losses at the cable section immediately following the head-end. These simulations assumed a single voice carrier of (-40 dBm) power input to the last amplifiers in the system. The error free gain in this case is (16.3 dB). The output of the amplifier is(- 23.7 dBm) when no GEE was assumed. This is shown in Figure 5-16, Upstream Voice Band GEE Simulations with green trace. The trace in red shows the output of the amplifiers when 5% of randomly distributed GEE was introduced to the system. The simulation results show acceptable system operating conditions.

73

Gain Estimation Errors (GEE) Upstream Voice Band
-19r---~~----~~-----r _,-----~r----,,----~~-----r,_----~====~==~
- - Error

Free I

1 - - 5%G EE

-20 - . -. - .. : . --. ---.. : · -- - ----"· ···--- --"· -···

.

.

o

.Jlooooo·o

.

.
oo·l o o o · · · · · · ·· · ······ ·····

-2 ·1 1- · · · · · · · ,o'; · · 1 · · j_ \ : · · · · · · · · · · · · · · · · ·; · · · ·

/ '\·...; \ \

i

. -- . --. -- .... -- -- - --- . .... ·-

~.
....J

E

// :

~ -22- · -/ · ... '---- -- -- . ·--- -- --: .... \ -- .; ·. / ...., :

I ,'

. _" \ (\)\ : : \. . ,/"--\./ \: '\

r -· ,--- ~- ---- . .. ~------ ... :-- ---- ----:-... ------:--... --,· \\ : : · · :

.
~

--~ ~
=
<(

-5

s

-231- ---- ---- :_:- ----- -.. _: .. ------- ·-~- . .. ----. - --. -.. - LJ::\ -/- : . ~- -\

.

.

.

\N

\./;

'·,:
.

·'\ ,1\ 1\

~

.
-24 - --- - .. .. --- --- --

.

.

'v

: \,,

---- . ·: · .. ----- --:· .. .. .. --·- .. ..... .

\,

/

r-i ,~ /\,.,
.1 1

:

1

:; \
f ·

:

I

1\ :

/1

jJ \

;- - ,

.. --- -- -- -.. . -- -- --- -.. .. ---- --- -- . ..: -- -- :\?...-: . . ~-- -- -- ~·-/ \ . . ~·.,__ J_ \ ·' : '· .../ :

t \../ .--\j
. . . . -- -

-25 -- -- -· .. -:------- ·. : . · -··- ---: .... .... , .. . .

. . . . .

. . . .

. .

. . . . . .

··-- -.- - -- - ... , ... ....

.··------ ···· . . . --.---.-···. .
. .

. . .
.

. . . . . .

-26~--~----~~----~----~----~~----~;----~-----~' - ----~;----~ D 10 20 30 40 50 60 70 80 90 100
Amplifier Number, n

Figure 5-16, Upstream Voice Band GEE Simulations

5.4.2

GEE Errors Corrections

Although the GEE is not expected to be significant, the accumulation effect of these errors should be seriously considered, especially for bigger systems (50 amplifiers or more). Therefore, some measures to correct these errors are required. As a solution for this problem, a wide-band RF detector can be added to the output of the upstream amplifiers as shown in Figure 5-12, Algorithm's Errors Corrections Block Diagram. These detectors will be able to measure the envelope power of the upstream bands and feed these measurements as additional inputs to the AGC algorithm. With these additional inputs, the algorithm will be able to adjust the estimated gain of the upstream amplifier to maintain acceptable system operating conditions. A correction factor, Dm, will be calculated by the algorithm to obtain the deviation factor of the errored-gain from the error free gain, as follow:

74

For the upstream data and voice bands, m= 1 and m=3,

for POUTm < PMINm for POUTm > PMAXm Otherwise
By adding this correction factor to the Errored- Gain of the amplifier, the Corrected Gain can be determined. (5-12) (5-1 1)

Where, is the Corrected Gain of the amplifiers in band m. is the gain Correction Factor is the Amplifier's Errored- Gain of band m is the envelope power at the output of the amplifier for band m. is the maximum power outputs of the upstream amplifier of band m.

PMINm

is the minimum acceptable power at the amplifier outputs to satisfy the receivers' sensitivities.

This correction technique was analyzed by MA TLAB simulations software. To illustrate the GEE correction effects, more stringent and narrow dynamic ranges for the PMIN and PMAX were assumed. For the upstream data band, m=1, the PMIN was assumed to be -32.5 dBm and PMAX was assumed to -31.5 dBm. Of course, in reality the system will have much wider dynamic range of operation (-10.00 dBm to -40 dBm). Figure 5-17, Upstream Data Band GEE Corrections, shows the simulation results when applying the GEE correction technique to the algorithm operation. The trace in green shows the error free levels of upstream data carrier at the output of the amplifiers. The trace in red shows the errored levels of upstream data carrier when 5% of GEE was introduced. The corrections of these errored levels are shown in blue. Errored levels are clipped to maintain the output levels within the required dynamic range and to meet the operating conditions of the system.

75

Correctir19 GEE Upstream Data Band

"' -32.5 ~
~

Am"Mier Number. n

Figure 5-17, Upstream Data Band GEE Corrections

Figure 5-18, Upstream Voice Band GEE Corrections, shows the effect ofthe correction technique on correcting GEE in the upstream voice bands. The blue trace shows the corrected output levels. The corrected levels are maintained within the dynamic range of the system operation. In this simulation, the dynamic ranges were reduced to better display the effects of the correction technique. In reality, the system enjoys wider dynamic ranges of operation.
Ccrrecti'lg GEE Ups1ream Vcice Band

-22.5

E !g -23.5
-;:;

~

~

-24

8

"' ~ ~

-24.5

-25

-25.5

Amplifier Number. n

Figure 5-18, Upstream Voice Band GEE Corrections

76

Chapter 6 6 Conclusions and Future Work

6.1

Conclusions

Theoretical analysis was conducted to evaluate and study the theories of the Automatic Gain and Automatic Slope Control AGC/ASC circuits currently used in multi-cascade leaky feeder systems, where a conventional closed loop circuit is used. It was concluded that the AGC loop filter depends upon the type of signal modulation. If the input signals are amplitude-modulated, the AGC circuit must not respond to changes in amplitude; otherwise, the AGC loop will distort the modulated signals.

The analyses of the transient behavior of AGC amplifiers in cascade systems have demonstrated that overshoot and ringing are evident at the output of amplifiers in the cascade. It was also concluded that the magnitude of the overshoot is directly proportional to the number of amplifiers in the system.

Based on predictions, a novel algorithm of controlling the gain and the slope in the leaky cable system of underground mines was presented. It was concluded from the simulation analyses of the algorithm that, when applied in a typical mine layout, the performance of the algorithm in predicting the gain is very reliable for the operation of the system.

Error analyses for the developed AGC/ACS algorithm have considered three types of errors that affect the operations of the algorithm. The first type of error in the algorithm is the "Pilots Levels Precision Errors, LPE. It was concluded that a precision of less than 1 dB is achievable in measuring the reference pilot level.

The second type of error that was analyzed is the Components Tolerances Errors (CTE). These are the errors in calculating the gains and the slopes of the amplifiers due the tolerance of the amplifier's components. It was concluded that errors corrections up to 100% is possible by adding RF detectors at the output stages of the amplifiers.

77

The third type of error that was considered is the Gain Estimation Errors (GEE). These are the errors in estimating the gain and slopes for upstream amplifiers bands. It was concluded from the simulation analyses that the algorithm can ensure reliable predictions for the gain and slope of the amplifiers in the cascade. The amplifiers in the system will be operating in acceptable dynamic ranges of operation.

6.2

Future Works

Some of the suggested future works are listed below.

Algorithm Prototyping: It will be advantageous for the developed algorithm to be practically translated into prototype systems. This will help ensure the practicality of developing systems based on this algorithm. The prototype amplifiers will be the next step in developing leaky feeder systems with AGC/ASC functions, based on the presented algorithms.

Part Time AGC/ASC Algorithm: Further research will be required to analyze the possibility of the part time use of the AGC/ASC functions by the amplifiers. This will involve the frequency of AGC/ASC refresh rate. The carriers of the reference pilots might not be required to be present in the system all the time. Instead, the pilots will be available only when needed by the AGC/ASC circuits. This will help maximize the channel capacity of the system and to reduce the power consumption of the amplifiers when the AGC/ASC is on standby mode.

Failure Analysis: Failure analysis can further investigate other scenarios that could affect the operation of the AGC/ASC algorithm. One example ofthese failures is the case of hardware failure ofthe pilots' generators at the system head-end. Provisioning for redundant generators could be considered in this case. The algorithm can be further developed to react to such cases of failures.

78

Bibliography

[1]

Kannan Srinivasan, Moise Ndoh, "Advanced Wireless Networks for Underground Mine Communications," 2005 First International Workshop on Wireless Communication in Underground and Confined Areas, June 6-7,2005, Val d'Or, QC, Canada

[2]

G.Y. Delisle, "Propagation Characteristics for Modem Wireless System Networks in Underground Mine Galleries," International Institute of Telecommunications, Montreal, 2005 First International Workshop on Wireless Communication in Underground and Confined Areas, June 6-7,2005, Val d' Or, QC, Canada

[3]

Mathieu Boutin, Ahmed Benzakour,"Radio Wave Characterization and Modeling in Underground Mine Tunnels," IEEE Transaction on Antennas and Propagation, vol. 56, July 2005

[4]

John M. Khoury, "On the Design of Constant Settling Time AGC Circuits," IEEE

Transaction on Circuits and Systems -II: Analogue and Digital Signal Processing, Vol.
45, No.3 March 1998.

[5]

J. R Smith, "Modem Communication Circuits," McGraw Hill Electrical and Computer

Engineering Series, 2nd Edition, New York, 1998.

[6]

Roger L. Freeman, "Fundamentals of Telecommunications," John Wiley & Sons Inc., 2nd edition, 2005

[7]

Olajumoke Shade Adekeye and Monuko duPlessis, "Design and implementation of a CMOS automatic gain control amplifier," South African Journal of Science, 102, November/December 2006

79

[8]

Cotter W. Sayre, "Complete Wireless Design," McGraw Hill, 2nd. Edition,2008.

[9]

P. Gray, P. Hurst, S. Lewis, R. Meyer, "Analysis and Design of Analog Integrated Circuits," John Wiley and Sons Inc., 4th Edition, 2001.

[ I 0]

Donald A. Neamen, "Electronic Circuit Analysis and Design," Irwin, 1996.

[ 11 ]

Miodrag Y Gmitrovic, Bratislav D. Milovanovic, "Fixed and Variable Slope CATV Amplitude Equalizers," Applied Microwave & Wireless, University ofNis, Yugoslavia

[12]

Alen Fejzuli, "Broadband Amplifier Gain Slope Equalization with a Single Passive Component," High Frequency Electronics, Summit Technical Media 2006

[13]

U. L. Rohde, T. T. N. Bucher, "Communication Receivers: Principles and Design,"

McGraw Hill, 2nd Edition, New York, 1997.

[14]

Eric W. Chisholm, "Considerations on the Application of AGC/ASC Amplifiers in CATV Systems," IEEE Transactions on Cable Television, issue 1, Oct 1976, Page 40-62.

[1 5]

Arther D. Evans, Siliconix Inc., "Designing with Field-Effect Transistors," McGraw Hill, 2nd. Edition, 1990.

[ 16]

C. W. Sayre "Complete Wireless Design" McGraw Hill, New York, 2001.

[17]

F. D. Waldhauer "Feedback," John Wiley & Sons, New York, 1982.

80

