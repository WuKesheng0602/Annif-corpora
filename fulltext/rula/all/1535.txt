DESIGN AND ANALYSIS OF AN EFFICIENT AND RELIABLE MAC PROTOCOL FOR VANETS
by

Khalid Abdel Hafeez MASc in Computer Networks, Ryerson University, Toronto, Canada, 2008
A Dissertation Presented to the School of Graduate Studies at Ryerson University in partial fulfilment of the requirements for the degree of Doctor of Philosophy in the Program of Electrical and Computer Engineering

Toronto, Ontario, Canada, 2012 c khalid Abdel Hafeez, 2012 

Author's Declaration
I hereby declare that I am the sole author of this dissertation. This is a true copy of the dissertation, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this dissertation to other institutions or individuals for the purpose of scholarly research. Author's Signature:

I further authorize Ryerson University to reproduce this dissertation by photocopying or other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my dissertation may be made electronically available to the public. Author's Signature:

ii

Abstract DESIGN AND ANALYSIS OF AN EFFICIENT AND RELIABLE MAC PROTOCOL FOR VANETS
c Khalid Abdel Hafeez, 2012  Doctor of Philosophy Electrical and Computer Engineering Ryerson University

The increase number of vehicles on roads and the immense number of fatal accidents they cause have driven the research and development of new generation technologies to help drivers travel more safely. One major cause of traffic accidents is that drivers cannot consistently respond to the changing road conditions appropriately. In fact, most accidents could be avoided if drivers could obtain and use relevant information of the traffic that is beyond their vision using wireless communications technology. Recently, the IEEE community adopted the IEEE 802.11p standard as a main technology for VANETs. To test the feasibility of this technology, most researchers use simulations to evaluate its new applications and protocols due to the prohibitive cost of implementing real VANET setup. Therefore, we first analyze VANET's wireless channel analytically and by simulations to predict its most appropriate propagation model and the communication range that minimizes the impact of the hidden terminal problem. Second, we derive a new mobility model that takes into account the vehicle's follow-on safety rule, to accurately derive the relationship between vehicle's speed and network density. It is expected that broadcasting and multi hop communications will be dominant in VANETs safety applications and protocols. Therefore, a Network Topology p-Persistence (NTPP) scheme is proposed to alleviate the impact of the broadcast storm problem. NTPP is based on vehicles' knowledge of their neighbors in their range and traffic parameters to reduce the channel contention, redundant re-broadcasts and message travel time and to increase the emergency message reception rate. iii

We analyze the reliability of the IEEE 802.11p in VANETs safety and warning applications scope taking into consideration different factors. It is shown analytically and by extensive simulations that the current DSRC specifications may lead to undesirable performance under harsh vehicular environments. Therefore, a novel Distributed Multichannel and Mobility Aware Cluster-based MAC Protocol (DMCMAC) is proposed to alleviate the impact of the hidden terminal problem, increase the network capacity and reliability. Cluster heads in DMCMAC are elected and re-elected in a distributed manner according to their relative speed and distance from their cluster members. The high stability of DMCMAC results from its adaptability to drivers' behavior on the road and its learning process to predict the future speed and position of all cluster members using the fuzzy logic inference system. The reliability of DMCMAC is analyzed and compared with other protocols. It is shown by simulations that DMCMAC has high stability, its performance exceeds other protocols and can achieve a timely and reliable delivery of emergency messages to their intended recipients which make it more suitable for VANETs.

iv

Acknowledgements

I would like to express my deep gratitude to my supervisors, Dr. Lian Zhao and Dr. Bobby Ma, for their guidance and support throughout this work. Their expertise, understanding, and patience added considerably to my graduate experience. Through constant encouragement, motivation and invaluable advices, they helped me to develop as a researcher and an independent thinker. I am also very grateful to Dr. Zaiyi Liao for his support and encouragement. I would also like to thank my thesis committee, Dr. Alagan Anpalagan, Dr. Muhammad Jaseemuddin, Dr. Jelena Misic, and Dr. Xiaodong Lin for taking the time and effort to review this dissertation and provide me with their insightful comments. My deepest appreciations go out to my family members. First I am very thankful to my parents for their endless love and support. Special thanks also to my wife, Hana, whose love, patience, understanding and support made this journey more enjoyable. Without her, this work would have never completed. Finally, I would like to thank my kids Leena, Hosam, Dana, Linda, Deema, Raneem and Muhammad, for being the constant source of joy and happiness.

v

Contents
Abstract . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . List of Tables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii v ix

List of Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xiii List of Acronyms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 Introduction 1.1 1.2 1.3 Background and Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . Research Contributions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Dissertation Outline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . xiv 1 1 6 9 11 15 18 23 25 25 26 29 34 35

2 MAC Layer Protocols 2.1 2.2 2.3 IEEE 802.11 MAC Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Wireless Access in Vehicular Environments (WAVE) . . . . . . . . . . . . . . Routing in VANETs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

3 Analysis of the IEEE 802.11p Physical Wireless Channel 3.1 3.2 3.3 3.4 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Radio Propagation Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . VANET Wireless Channel Analysis . . . . . . . . . . . . . . . . . . . . . . . Simulation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3.4.1 MATLAB simulations . . . . . . . . . . . . . . . . . . . . . . . . . . vi

3.4.2 3.5

NS-2 simulations . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

36 39 40 40 42 44 45 49 53 54

Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

4 A New Mobility Model for Vehicular Ad hoc Networks 4.1 4.2 4.3 Introduction and Related Work . . . . . . . . . . . . . . . . . . . . . . . . . Communication Range . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Mobility Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.3.1 4.3.2 4.4 4.5 Low Density Network . . . . . . . . . . . . . . . . . . . . . . . . . . . High Density Network . . . . . . . . . . . . . . . . . . . . . . . . . .

Mobility Model Validation . . . . . . . . . . . . . . . . . . . . . . . . . . . . Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

5 A New Broadcast Protocol For Vehicular Ad hoc Networks Safety Applications 5.1 5.2 5.3 5.4 5.5 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Related Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Maximum Range of a Broadcast Message . . . . . . . . . . . . . . . . . . . . Broadcast Storm Mitigation Technique . . . . . . . . . . . . . . . . . . . . . Simulation Results . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5.5.1 5.5.2 5.6 Status Message Scenario . . . . . . . . . . . . . . . . . . . . . . . . . Emergency Message Scenario . . . . . . . . . . . . . . . . . . . . . . 56 56 57 59 63 66 66 68 69

Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

6 Performance Analysis and Enhancement of the DSRC for VANET's Safety Applications 6.1 6.2 6.3 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Related Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . System Model and Performance Parameters . . . . . . . . . . . . . . . . . . 6.3.1 Link Availability Probability . . . . . . . . . . . . . . . . . . . . . . . vii 71 72 73 76 77

6.3.2 6.3.3 6.4 6.5

Back-off Process and Contention Window

. . . . . . . . . . . . . . .

78 81 82

Probability of Successful Reception . . . . . . . . . . . . . . . . . . .

Emergency Time delay . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Adaptive and Mobility Based Algorithm (AMBA) for Enhancing VANETs' Performance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

84 86 96

6.6 6.7

Model Validation and Simulation . . . . . . . . . . . . . . . . . . . . . . . . Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

7 Distributed Multichannel and Mobility Aware Cluster-based MAC Protocol for Vehicular Ad-hoc Networks (VANET) 7.1 7.2 Introduction and Related Work . . . . . . . . . . . . . . . . . . . . . . . . . 98 99

DMCMAC Clustering Protocol . . . . . . . . . . . . . . . . . . . . . . . . . 103 7.2.1 7.2.2 7.2.3 7.2.4 DMCMAC Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . 103 DMCMAC Cluster Membership . . . . . . . . . . . . . . . . . . . . . 108 Cluster Head Election and Reelection . . . . . . . . . . . . . . . . . . 112 Cluster Head's Role . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113

7.3

Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118 7.3.1 7.3.2 7.3.3 Network Convergence and Stability . . . . . . . . . . . . . . . . . . . 118 Clustering Reliability . . . . . . . . . . . . . . . . . . . . . . . . . . . 124 Time Delay . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130

7.4 7.5

Model Validation and Simulation . . . . . . . . . . . . . . . . . . . . . . . . 131 Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143 145

8 Conclusions and Future Work 8.1 8.2

Conclusions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 145 Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148 149

Bibliography

viii

List of Tables
2.1 2.2 2.3 3.1 5.1 5.2 Operations of WAVE functional entities . . . . . . . . . . . . . . . . . . . . . Parameters of the DSRC IEEE802.11p and the IEEE802.11a . . . . . . . . . Contention parameters for IEEE802.11p CCH . . . . . . . . . . . . . . . . . Value of parameters used in simulation . . . . . . . . . . . . . . . . . . . . .
Value of parameters used in simulation

20 20 22 37 66

. . . . . . . . . . . . . . . . . . . . . .

Values of max. analytical and used range (R) and the max. possible coverage percentage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

67 88

6.1 7.1 7.2 7.3 7.4

Value of parameters used in simulation . . . . . . . . . . . . . . . . . . . . .

Comparison between recent proposed MAC protocols . . . . . . . . . . . . . 103
The state of a vehicle based on the three ID fields . . . . . . . . . . . . . . . . . 105 The fuzzy rule of the acceleration . . . . . . . . . . . . . . . . . . . . . . . . . 110

Value of parameters used in simulation . . . . . . . . . . . . . . . . . . . . . 133

ix

List of Figures
1.1 1.2 2.1 2.2 2.3 2.4 2.5 2.6 2.7 3.1 3.2 3.3 3.4 3.5 3.6 3.7 4.1 4.2 4.3 Hidden node and Exposed node. . . . . . . . . . . . . . . . . . . . . . . . . . Thesis outline. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Hidden node and Exposed node. . . . . . . . . . . . . . . . . . . . . . . . . . Directional MAC process. . . . . . . . . . . . . . . . . . . . . . . . . . . . . IEEE 802.11a Inter-Frame Spacing. . . . . . . . . . . . . . . . . . . . . . . . Wireless Access in Vehicular Environments (WAVE) Architecture. . . . . . . Packet structure in IEEE 802.1p. . . . . . . . . . . . . . . . . . . . . . . . . Channel allocation in IEEE 802.11p. . . . . . . . . . . . . . . . . . . . . . . Most Forward within Radius routing Strategy. . . . . . . . . . . . . . . . . . Accident scenario in VANET. . . . . . . . . . . . . . . . . . . . . . . . . . . The Phase shift vs the position of the reflecting vehicle from the receiver. . . The impulse response of the modeled channel. . . . . . . . . . . . . . . . . . The pdf s of the received signal and propagation models. . . . . . . . . . . . 5 10 12 15 16 19 21 21 24 30 31 32 35 36 37 38 44 50 54

The simulated and analytical outage probability. . . . . . . . . . . . . . . . . The Success Ratio vs Distance. . . . . . . . . . . . . . . . . . . . . . . . . . Time delay vs Traffic load. . . . . . . . . . . . . . . . . . . . . . . . . . . . . Simplified one dimensional highway scenario in each direction of the road. Single server queue model. .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Number of vehicles within the communication range of the transmitter.

x

4.4 5.1 5.2 5.3 5.4 5.5 5.6 5.7 6.1 6.2 6.3 6.4 6.5

Vehicle density and their normalized average speed vs vehicle arriving rate.
Geometric model for the highway scenario. . . . . . . . . . . . . . . . . . . . . . The recommended maximum range R vs sending rate s for v = 0.025. . . . . . Coverage Percentage (Pcov ) vs Range (R). . . . . . . . . . . . . . . . . . . . . . Coverage percentage for different ranges (R). . . . . . . . . . . . . . . . . . . . Average number of retransmissions per hop for different ranges (R meters). . . . . Message travel time in low dense network (R=550m). . . . . . . . . . . . . . . . Message travel time in high dense network (R=250m).

54 60 62 62 67 69 69 70 73 77 79 84

. . . . . . . . . . . . . .

The IEEE802.11p synchronization interval.

. . . . . . . . . . . . . . . . . . . . .

Simplified one dimensional communication model in highway scenario. Emergency and status packets Markov chain.

. . . . . . . . . . . . . . . . .

Relay vehicle distance model. . . . . . . . . . . . . . . . . . . . . . . . . . . Effective communication range versus vehicle density when the success rate is set at 95% for different status packet sending rates. . . . . . . . . . . . . . .

90

6.6

The successful rate versus vehicle density for different status packet sending rates. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 90

6.7

Status packets time delay versus vehicle density for different status packet sending rates. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91

6.8

System's reliability versus vehicle density for different status packet sending rates. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91

6.9

Effective communication range versus vehicle density when the success rate is set 95% for different carrier sense ranges. . . . . . . . . . . . . . . . . . . . 92 92

6.10 The successful rate versus vehicle density for different carrier sense ranges. . 6.11 Status packets time delay versus vehicle density for different carrier sense ranges. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

93 93

6.12 System's reliability versus vehicle density for different carrier sense ranges. .

xi

6.13 The successful rate versus contention window size for different vehicle densities. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6.14 Status packets time delay versus contention window size for different vehicle densities. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94 94

6.15 System's reliability versus contention window size for different vehicle densities. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6.16 Emergency packet travel time versus vehicle's density. . . . . . . . . . . . . 95 96

6.17 Percentage of vehicles within the distance (3000m) that received the emergency message successfully. 7.1 7.2 7.3 7.4 7.5 7.6 7.7 7.8 7.9 . . . . . . . . . . . . . . . . . . . . . . . . . . . 96

Cluster formation in DMCMAC. Status message format.

. . . . . . . . . . . . . . . . . . . . . . . . 104

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105 . . . . . . . . . . . . . . . . . . 107 . . . . . . . . . . . . . . . . . . 108

Membership function of the inter distance. Membership function of the relative speed.
Membership function of the acceleration.

. . . . . . . . . . . . . . . . . . . . . 110

DMCMAC finite state machine.

. . . . . . . . . . . . . . . . . . . . . . . . 111 . . . . . . . . . . . . . . . . . . . . . 113 . . . . . . . . 115

Cluster head's extra messages format.

The time line for the sent messages during one CCI interval.

A set of thirteen vehicles on a road segment before clustering. . . . . . . . . 117

7.10 Message exchange in DMCMAC protocol. . . . . . . . . . . . . . . . . . . . 117 7.11 The network after running DMCMAC protocol. . . . . . . . . . . . . . . . . 118 7.12 Clustering Model. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 119

7.13 The hysteresis mechanism in DMCMAC. . . . . . . . . . . . . . . . . . . . . 121 7.14 Communication and carrier sense ranges of the cluster head and one cluster member. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124 . . . . . . . . . . . . . . . . . . . . 131 . . . . . . . . . . . . . . . 135

7.15 Emergency message propagation model.

7.16 Average cluster head time versus vehicle density.

7.17 Average cluster size versus vehicle density. . . . . . . . . . . . . . . . . . . . 135 xii

7.18 Average cluster member's dwell time as a function of the cluster maintenance time (Tf ), v = 0.2 vehicles/m. 7.19 Reliability versus vehicles density. . . . . . . . . . . . . . . . . . . . . . . . . 136 . . . . . . . . . . . . . . . . . . . . . . . 137

7.20 Emergency message travel time versus vehicles density. . . . . . . . . . . . . 137 7.21 The time duration for all cluster members to send their status messages versus vehicles density for DMCMAC. . . . . . . . . . . . . . . . . . . . . . . . . . 138 7.22 Average cluster size versus vehicles density (R=200m). . . . . . . . . . . . . 138 7.23 The time duration for all cluster members to send their status messages versus vehicles density for R=200m. . . . . . . . . . . . . . . . . . . . . . . . . . . 139

7.24 Probability that a cluster member will receive a message from its cluster head successfully versus vehicles density (R=200m), Vehicles contend for using the channel. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140 7.25 Probability of successful transmission between neighboring cluster heads versus vehicles density (R=200m), Vehicles contend for using the channel. . . . 140 7.26 Probability that a CH will receive a message successfully from its neighbor CH versus vehicles density (R=200m). . . . . . . . . . . . . . . . . . . . . . 141 7.27 Cluster management overhead versus vehicle density for range R=100m. . . . . . 142

xiii

List of Acronyms
AC AIFS AIFSN CCI CDMA CCH CH CSMA Access Class Arbitration Inter Frame Space Arbitration Inter Frame Space Number Control Channel Interval Code Division Multiple Access Control Channel Cluster Head Carrier Sensing Multiple Access

CSMA/CA Carrier Sensing Multiple Access with Collision Avoidance CTS CW DCF DCTS DIFS DMAC DoS DRTS DSR DSRC DSSS FDMA FIS GPS MAC MANET Clear-To-Send Contention Window Distributed Coordinated Function Directional Clear-To-Send Distributed Coordinated Function Interframe Spacing Directional Medium Access Control Denial-of-Service Directional Request-To-Send Dynamic Source Routing Dedicated Short Range Communication Direct Sequence Spread Spectrum Frequency Division Multiple Access Fuzzy-Logic Inference System Global Positioning System Medium Access Control Mobile Ad-hoc Network xiv

NAV OCTS OBU OFDM

Network Allocation Vector Omni-directional Clear-To-Send On Board Unit Orthogonal Frequency Division Multiplexing

OFDMA Orthogonal Frequency Division Multiple Access ORTS PDR QoS RREQ RTS RSU SCI SCH SDMA SI SIFS SINR SNR TDMA VANET VCS WAVE WLAN Omni-directional Request-To-Send Packet Delivery Ratio Quality of Service Route Request Request-To-Send Road Side Unit Service Channel Interval Service Channel Space Division Multiple Access Synchronization Interval Short Interframe Spacing Signal to Interference and Noise Ratio Signal-to-Noise Ratio Time Division Multiple Access Vehicular Ad hoc Network Virtual Carrier Sensing Wireless Access in Vehicular Environment Wireless Local Area Network

xv

Chapter 1 Introduction
1.1 Background and Motivation

Rapid advances and cost reduction of wireless technologies make the door wide open to utilize these technologies in support of advanced vehicular safety applications. In particular, the new Dedicated Short Range Communication (DSRC) or IEEE 802.11p enables a new class of vehicular safety applications that will increase the overall safety, reliability, and efficiency of the current transportation system. In the field of Intelligent Transportation Systems (ITS), this technology will provide a wide spectrum of applications to avoid or decrease the severity of road accidents. The Intelligent Transportation System (ITS) [1] is referred to the integrated applications of the advanced technologies in computers, communications, logic controls and sensor networks to provide travelers and authorities the important information they need to make the transportation system more safe, efficient, effective and reliable. Since the advent of Intelligent Transportation Systems, research on the use of information for real-time transportation system management has been much conducted. The recent advances in wireless and sensor technologies have rapidly promoted the seamless integration of information of various types from transportation networks to benefit drivers and provide a wide array of

1

transportation-oriented services. It is envisioned that inter-vehicle and infrastructure-tovehicle communications would become technically practical in the near future, resulting in an operational internet on the road called vehicular ad hoc network (VANET) that revolutionize our traveling concept. The World Health Organization (WHO) [2] in 2010 reports more than one million people around the world died due to traffic accidents. The leading cause of these accidents is driver's error, particularly slow driver's reaction time. In a highway scenario, this slow reaction time can often lead to catastrophic multi-car pileups. Many of those accidents are preventable if an ITS system is been installed to inform the drivers instantly of the obstacles in front of them. This high number of accidents costs the society besides the loss of many innocent lives, the damage of private and public properties and the delay in delivering many crucial services. Accidents, delays and traffic congestion have caused significant loss of lives, waste of energy, increase carbon dioxide gas emissions and loss in productivity. To solve these problems by building new roads and wide highways is costly and is impossible in some congested urban areas. Therefore, applying the latest technologies to the current infrastructure will help in improving its safety, efficiency and security. The Intelligent Transportation System has four major parts: 1. Vehicles: The automobile industry is giving more attention to the safety of their vehicles by equipping them with complex sensor arrays to continuously gather information about many aspects like air bags, tire pressure, mechanical and electronic parts, speed, breaking condition, steering condition, distance detection and collision events. This gathered information will help the driver and the vehicle to avoid serious accidents by taking the appropriate action or by starting a control system to bring the vehicle to a safe mode. It is crucial to forward this information to neighboring vehicles and emergency centers quickly in order for them to take the right response at the right time. 2

2. Roads or Infrastructure: Many roads and highways in North America are equipped with messaging signs to alert the drivers with road conditions. Based on the advertised messages, the drivers can take safe actions like slowing the speed, changing lanes or routes. Some roads have sensors or cameras to measure the traffic speed and the number of vehicles passing one point to help in making plans for better traffic flows. 3. Control Systems: Systems to take an appropriate action automatically when an error, such as forgetting to turn on the headlight at night or something potentially dangerous, such as approaching an obstacle in high speed is detected. The actions can be ranged from turning on the headlight to activating the braking system. 4. Communication System: This is the most important part in the ITS system, since without communicating the essential information with the proper recipients, the ITS system will not reach its goal of safe, effective, efficient and reliable transportation system. The vehicles can form a mobile ad hoc network on the road to pass this essential information among each other, hence drivers will be aware of what is happening down the road like a lane closure due to an accident or road maintenance operation. If the driver is aware of the emergency braking of the preceding vehicle on time, he or she can slow down enough to avoid an accident. The vehicular communication system is divided into three areas: (a) Intra-Vehicle communication: This system is adopted inside the vehicle itself. It can be a wired or wireless communication system like Bluetooth (IEEE 802.15.1) [3], Ultra Wideband (U W B ) (IEEE 802.15.3) [4] or ZigBee (IEEE 802.15.4) [5] to reduce the amount of wires usually used in vehicles and to offer more mobility. (b) Inter-Vehicle communication (IVC): It is the major part in the ITS architecture since it enables the drivers to communicate with other drivers or vehicles even if they are out of range of line of sight (LOS). Ad hoc mode is the most appropriate model that suits IVC (where vehicles communicate with each other without a 3

centralized service) due to the high mobility and the rapid changing of relative speeds between vehicles. This will add more challenges to the wireless communication system compared to the indoor Wireless Local Area Networks (WLAN) or Mobile Ad hoc Networks (MANETs). (c) Road-Vehicle Communication (RVC): This type of communication is between roadside sources and vehicles to provide services to drivers and passengers like high-speed internet or traffic information. These sources are places along the road to maintain the high data rates and facilitate the handoff from one zone to another. The ITS system will enable new mobile services and applications for the traveling public. The integration of sensor networks and computers inside the vehicle itself with the Global Positioning Systems (GPS), digital road maps and the wireless communication technologies will open the door widely to many safety and none safety applications. The Vehicle Safety Communication (VSC) project [6] determined 34 possible safety applications for VANETs. These applications can be categorized as follows: 1. Safety applications: to protect lives and properties by warning drivers of the traffic hazards like accidents as shown in Figure 1.1, icy streets, traffic jams, halted vehicle, lane closure and rail crossings. This type of applications can also include left-turn and stop sign movement assistance, blind spot warning, traffic signal violation warnings, curve speed warning, emergency break light warning and lane change warning. 2. Traffic management applications: to help authorities in managing the traffic such as highway merge assistance, controlling signals to reduce jams, fleet management and cargo tracking systems. 3. Infotainment applications: to enhance the drivers' comfort by providing internet connection and instant messaging system between vehicles. They also include car rental help, drive through and gas payment, toll collection and enhance route guidance. 4

4. Commercial applications: to make these networks more cost effective.

Figure 1.1: Hidden node and Exposed node. Several projects were initiated to address VANETs challenges around the world. FleetNet is one of the pioneer European projects [7] to standardize VANETs solutions and develop a platform for inter-vehicular communication. Network on Wheels (NoW) [8] and CarTALK2000 [9] are another European projects for the development of vehicular communication and co-operative driver assistance systems. Car-to-Car Communication Consortium (C2C-CC) [10] is an organizational umbrella for VANET research activities in Europe. It includes many automobile industry members like Daimler, BMW, Audi, Fiat, Renault and some German universities. The overall objective of C2C-CC is to initiate, develop and oversee vehicle to vehicle communication standards, business models and regulatory matters in European Union. In US, the Vehicle Infrastructure Integration (VII) Initiative [11] is a cooperative effort between US government and automobile manufacturers. Its goal is to let vehicles communicate between themselves and with road side units in order to increase the safety, efficiency, and convenience of the transportation system. Their solutions are based on the IEEE 802.11p and rely on a business model to satisfy the interest of all participating parties. Its safety solutions rely on radar and vision systems to reduce rear-end collisions by tracking obstructions in front or behind the vehicle and apply brakes automatically when needed. The development of inter-vehicle and infrastructure-to-vehicle mobile mesh and ad hoc 5

networks is one of the most challenging and critical issues for the ITS industry, which also sparks numerous interests in the communications and networking research community. The characteristics of VANETs are different from those of Mobile Ad hoc Networks (MANETs). Since vehicles are moving in a very high speed, VANETs have a highly dynamic but somewhat predictable changing topology. This results in short lifetime communication links between vehicles (network fragmentation) and unpredictable node density. Since VANETs' effective network diameter is small, their redundancy is limited. For this reason, it is unrealistic for a node to maintain a complete global network topology. This will add more challenge to apply the existing routing and MAC algorithms in MANETs to VANETs. Because of vehicles' high mobility, it is difficult to maintain any form of group membership or establish an accurate list of neighboring vehicles. Therefore, it is difficult to implement protocols that rely on group membership such as clustering or flat routing. Another challenge in VANETs is its security. The driver's anonymity and privacy must be preserved; hence his /her movement is not recorded and VANET's messages are not tampered with. Tampering of safety messages could result in accidents, which VANETs are designed to prevent. On the contrary to the MANETs, VANETs don't move in random directions and have no constraints on storage capacity, battery and processing power. A good characteristic of VANETs that help us to build a new stable protocol is that the future movement of a vehicle is predictable since it is constrained by the road.

1.2

Research Contributions

The main objective of this doctoral research is to design a new Medium Access Control protocol for Vehicular Ad hoc Networks (VANETs). In order to achieve this objective, we first develop a deep and solid understanding of the challenges and the limitations of the existing MAC protocols in vehicular environments. By using theoretical foundations and algorithmic methodologies, we analyzed the identified issues towards the design of the new

6

MAC protocol. The key contributions of this dissertation are summarized as follows: · Developing a simulation and analysis setup for IEEE 802.11p protocol. To test the new protocol on a real setup is very difficult and very costly. Therefore, we use simulations to study and analyze VANETs. ­ We first analyze the wireless channel in VANETs and its different radio propagation models to find the appropriate model that best characterizes the vehicular environment. ­ Using our physical wireless channel analysis and the best propagation model, we derive a formula for the probability density function (pdf) of the communication range that we should use in our subsequent analysis. ­ Developing a new mobility model that takes into account the vehicles follow-on safety rule to accurately capture the relationship between the vehicle's speed and network density. · Developing a new broadcast protocol for vehicular ad hoc networks. ­ We present a geometric model to predict the recommended maximum range of a one hop broadcast message to reduce the effect of the hidden terminal problem. ­ We introduce a new broadcast algorithm to alleviate the impact of the broadcast storm problem in VANETs taking into account the network topology and traffic parameters. · Developing an analytical model to evaluate the performance of the IEEE 802.11p PHY and MAC protocol in single-hop (broadcast mode) and multi-hop scenarios. ­ We propose an analytical framework that models the reliability of the Dedicated Short Range Communication (DSRC) control channel to handle VANETs' safety applications. 7

­ Using our analytical model, we preset an adaptive algorithm to increase the DSRC systems reliability in terms of the probability of packets successful reception and time delay of emergency messages in a harsh vehicular environment. · Designing a novel distributed multichannel and mobility aware cluster-based (DMCMAC) medium access control protocol. ­ We investigate the behavior of the existing cluster-based MAC protocols and discuss various design considerations to build a concrete foundation for the proposed MAC protocol. ­ With the objective of minimizing the overhead and increase the network stability, cluster heads in DMCMAC, are elected based on their relative speed and stability on the road. ­ The proposed protocol employs a novel learning mechanism to make DMCMAC more adaptable to drivers behavior on the road using fuzzy logic inference system. · Developing a theoretical framework to evaluate the reliability and connectivity of the proposed MAC protocol in terms of the average cluster size, communication range within the cluster and between cluster heads, and the life time of a path. We evaluate the performance of the proposed MAC protocol through extensive simulations using the network simulator (ns2) [12]. We also develop some of the existing MAC protocols for the sake of comparison. Our evaluation results show that the proposed protocol and algorithms can support traffic safety and increase VANETs efficiency, reliability and stability of the cluster topology by increasing the cluster heads lifetime and the dwell time of its members.

8

1.3

Dissertation Outline

The remainder of this dissertation is organized as follows. In the next chapter, we present a brief overview of the IEEE 802.11p. In Chapter 3, we investigate the physical wireless channel of the DSRC and build a new mobility model in Chapter 4. We then present in Chapter 5 a new broadcast protocol to alleviate the broadcast storm problem in VANETs. The performance analysis of the IEEE 802.11p is introduced in Chapter 6. Based on the insights from our analysis, and the deficiencies of the existing work in the context of VANETs' MAC protocols, we propose a novel distributed and cluster-based multichannel MAC protocol for VANETs in Chapter 7. In the same chapter, we analyze the proposed MAC protocol and compare its performance with some existing cluster-based MAC protocols. Finally, we conclude this dissertation in Chapter 8 and present some directions for future work. The outline of the thesis is shown in Figure 1.2

9

Chapter 1 Intro., Motivation

Chapter 2 MAC Background

Chapter 3 802.11p PHY analysis Chapter 5 NTTP Broadcast Chapter 4 Mobility Model

Chapter 6 802.11p MAC analysis

Chapter 7 DMCMAC

Chapter 8 Conclusion

Figure 1.2: Thesis outline.

10

Chapter 2 MAC Layer Protocols
In this chapter, the main medium access control (MAC) protocols that are proposed for VANETs will be discussed. More relevant literature review will be introduced in each of the following chapters. MAC layer protocols are responsible for managing and maintaining the wireless channel use. Their main job is to decide which of the nodes should get the channel access and which should wait. There are two managing techniques: one is contention free like TDMA, FDMA and CDMA where the need for a central entity is crucial for the fair distribution of the channel resources among the nodes. The second technique is contention based or random access protocol such as the Carrier Sense Multiple Access (CSMA) of IEEE 802.11. MAC protocols such as TDMA, FDMA, or CDMA are difficult to implement for VANETs since time slots, channels, or codes have to be dynamically allocated. This requires synchronization which is difficult to achieve in high dynamic networks such as VANETs [13]. To have a reliable and efficient medium access control (MAC) protocol that suits the high mobility of vehicles, the proposed MAC protocol should avoid transmission collisions between nodes (vehicles), hence emergency messages will be forwarded in a real time fashion. Moreover the medium (wireless channel) has to be shared efficiently and fairly between vehicles. The transmitted information is usually small but it has to be propagated to the intendant

11

distance in a very short time, usually less than 0.5 seconds as studied by [14]. Therefore, the MAC protocol in VANETs has to pay more attention to the medium access delay and less attention to the power constrains because vehicles have no power constrains and can use global positioning system (GPS) for positioning and time synchronization. Moreover, the proposed MAC protocol should pay attention to the hidden terminal, exposed node, and capture problems. The hidden terminal problem happens when a node is in the range of the receiver but out of the range of the sender. This node can't hear the transmission from the sender to the receiver, hence it may start sending to the receiver at the same time causing collisions as shown in Figure 2.1a. If node A is transmitting to node C, node B is a hidden terminal since it can not hear the ongoing transmission. Therefore, it may start using the channel causing a collision at node B. The exposed node problem happens when the node is in the range of the sender but out of the range of the receiver. This node will hear the transmission of the sender to the receiver, therefore it will not use the medium during that transmission while it can transmit to other nodes in its range but out of the range of both the sender and the receiver as shown in Figure 2.1b. If node C transmitting to node D, node A can not use the channel although it can transmit to node B without interfering node D. The capture problem, which occurs when two nodes send at the same time to another node. One node is closer to the receiver, hence the receiver will decode its data without errors. This will lead to unfairness problem.

A

C

B

B

A

C

D

a: Hidden node

b: Exposed nodes

Figure 2.1: Hidden node and Exposed node. Code Division Multiple Access (CDMA) is used between nodes to share a common 12

medium where each node has an orthogonal code to encrypt messages before sending them. Multi-Code MAC (MCMAC) [15] protocol uses one common code for control packets and other codes for data transmission. When the sender wants to initiate a transmission, it sends first RTS packet to the receiver encrypted by a common control code, this packet includes the data encryption code. Upon receiving the RTS packet, the receiver checks if there is no code conflict with another transmission and replies by CTS packet; otherwise it will send the sender its usable codes to select one of them and start the RTS packet again. When the sender receives CTS it starts transmitting the data. The authors in [16] introduce a new MAC architecture called ADHOC MAC to solve the problems associated with mobile ad-hoc networks and guarantee a relatively good QoS in VANETs. This protocol is developed for the CarTalk2000 project [9]. This architecture is based on a technique called Reliable Reserved ALOHA (RR-ALOHA) to dynamically assign a single broadcast channel called Basic Channel (BCH) to every node in the network using slotted or framed structure. The ADHOC MAC protocol works by grouping the nodes into groups where all nodes are interconnected by broadcast radio communication called One Hop cluster (OH). The main drawbacks of this protocol is that the number of vehicles within the one hop range is restricted to the number of frame time slots and the high overhead (> 25%) of dedicating a single control channel for each node in the one hop cluster. The Dedicated Omni-Purpose Inter-Vehicle Communication Linkage Protocol for Highway Automation (DOLPHIN) system in [17] is one of the first IVC protocols and was adopted by the Japan's IVC system to deal with a group of vehicles driving in a platoon. All vehicles in the platoon communicate with each other and send periodic information like speed, direction, and emergency braking of a vehicle to other vehicles in their line of sight (LOS) or route it to the NLOS vehicles. The platoon in DOLPHIN does not require any fixed infrastructure since it uses CSMA as the basis for its MAC protocol. The emergency information is allocated the shortest time slot while other types of information are allocated the larger transmission time slots. This allows the vehicle with critical information to capture

13

the channel before other nodes that have normal information. Most MAC protocols designed based on IEEE 802.11 standard use Omni-directional antennas while using directional antennas will allow VANETs to efficiently use the channel resources. Because vehicles are moving in directional roads, directional antennas may help in reducing transmission collisions. The space around each vehicle is divided into N transmission angels of ( = 360/N ) and a separate antenna is responsible for each direction. In [18] and [19], it has been proved that using sector antennas will increase the throughput and only a small increase in received packets is achieved when using more than two antennas. In [20] the authors proposed a Directional MAC (DMAC) protocol assuming each node knows its position and the position of its neighbors using GPS. Based on the receiver's location the sender will use one of its directional antennas to send packets to the receiver. The DMAC scheme is based on RTS, CTS and ACK as in IEEE 802.11 except that the ACK is sent using directional antenna instead of Omni-directional antenna. The neighboring nodes that are not participating in the current transmission and upon receiving RTS or CTS by one of its directional antennas will block that antenna during the transmission period specified in RTS or CTS packets. In Figure 2.2, if node A has a packet to transmit to node B, first, it will send a directional RTS (DRTS). Upon receiving the DRTS, node B will send an Omni-directional CTS (OCTS). A neighbor such as Node C will block its directional antenna that receive the maximum power for duration specified in OCTS. When node A receives OCTS, it will start sending the data. Node B will send an ACK to node A when the transmission is complete. Most wireless communication standards use Carrier sense Multiple Access with Collision Avoidance (CSMA/CA) in IEEE 802.11 to overcome collisions and the hidden terminal problem. The sender will send Request-to-Send (RTS) to the receiver to inform neighbors of the transmission process. The receiver will reply if ready by a Clear-to-Send (CTS) packet to the sender. The neighbors upon hearing the CTS, will be aware of the upcoming transmission and will avoid using the channel. After that the sender will start sending the

14

Unblocked

T

A

B

Blocked

C

Unblocked

Unblocked

DRTS OCTS OCTS

Data

ACK

Figure 2.2: Directional MAC process. message without any risk of collisions. In the following subsection, the MAC protocol of IEEE 802.11 will be briefly introduced followed by the IEEE 802.11p which is adopted by the IEEE community as a main technology for VANETs.

2.1

IEEE 802.11 MAC Layer

The IEEE 802.11 was introduced in 1990 with the interest to develop a wireless LAN operating in the Industrial, Scientific and Medical (ISM) band. Up to now the IEEE 802.11 group issued many standards. The IEEE 802.11a is introduced in 1999 to work in the 5GHz band and using Orthogonal Frequency Division Multiplexing (OFDM) to reach the rates from 6-54Mbps. The IEEE 802.11b is the most accepted standard introduced in 1999 which uses the ISM 2.4GHz band and Direct Sequence Spread Spectrum (DSSS) to reach rates from 5.5-11Mbps. The IEEE 802.11g uses the same physical layer as IEEE 802.11b but

15

can reach rates more than 20Mbps up to 54Mbps. The use of the ISM 2.4GHz unlicensed band increases the interference from other wireless devices like cordless phones, wireless IP cameras and other devices using the same band. The IEEE 802.11 can work either in a centralized or decentralized mode. An Access Point (AP) is a must for the wireless nodes to communicate in the centralized mode while in the decentralized mode there is no need for AP and is referred to as AD-HOC mode. The availability and the cheap prices of IEEE 802.11 devices attracted the Engineers to implement this technology in the Inter-Vehicle Communication. The IEEE 802.11 MAC layer covers three functional areas: reliable data delivery, MAC access control and security. The IEEE 802.11 uses RTS, CTS and ACK to insure reliability and uses three Inter Frame Spaces (IFS) to control medium access and minimize frame collisions. The Short IFS (SIFS) is the shortest IFS and used by immediate responses like ACK, CTS and Poll response. The Point coordination Function IFS (PIFS), which is the medium length IFS, is used by the centralized controller. The Distributed Coordination Function IFS (DIFS), which is the longest IFS, is used as a minimum delay by all asynchronous frames contending for medium access. The three inter frame spacing intervals are shown in Figure 2.3.
DIFS PIFS DIFS SIFS Busy Medium Backoff Window Next Frame Contention Window

Figure 2.3: IEEE 802.11a Inter-Frame Spacing. The IEEE 802.11 uses CSMA/CA as follows: 1. First, a node that has data to send will sense the channel. If it is idle, the node waits for a period of DIFS. If the medium is still idle it will send RTS packet including its ID and the duration of the whole transmission. Upon receiving the RTS packet 16

the receiver's neighbors will set their NAV (Network Allocation Vector) to the time indicated in the RTS packet and will not use the medium during that time. 2. Upon receiving the RTS packet, the receiver and if it is ready, waits for the time duration called SIFS. If the medium is still idle it will send a CTS packet including the transmission duration time. All neighbors receiving this CTS packet will set their NAV to the time indicated in the CTS packet (the medium is busy). 3. Upon receiving the CTS packet, the transmitter waits for SIFS time before starting the data transmission. 4. When the receiver successfully receives the data, it will wait for another SIFS and send an ACK only to the sender. All neighbors receive the ACK packet will set their NAV to zero indicating that the channel is free. 5. If the sender senses the medium as busy, it will wait for DIFS. If the medium is still busy it will back off a random amount of time before sensing it again. If the medium becomes busy during the back off time then the backoff timer is halted and resumes when the medium becomes free. 6. If the sender did not receive an ACK, it will assume a failed transmission and try to retransmit again. 7. The backoff mechanism used is a binary exponential backoff, that is after every collision, the sender will wait for double the last delay up to a maximum value. Therefore the repeated collisions result in longer waiting times. In 2007 the IEEE community published a set of improvements to the MAC layer in IEEE 802.11 standard to enhance the Quality of Service (QoS) for wireless LAN applications. Those improvements enhance the DCF and PCF in the standard 802.11 MAC by introducing a new Hybrid Coordination Function (HCF) which has two methods to access the channel: HCF Controlled Channel Access (HCCA) and Enhanced Distributed Channel 17

Access (EDCA). The IEEE 802.11e [21] defines Traffic Classes (TCs) in both HCCA and EDCA, hence the traffic with the high priority wins the contention and waits less time before it is transmitted.

2.2

Wireless Access in Vehicular Environments (WAVE)

The IEEE society has developed a Wireless Access in Vehicular Environments (WAVE) [22] architecture to provide wireless access for vehicular ad hoc networks. This subsection gives an overview of this architecture following the layers' order of the open systems interconnection (OSI) model. In 1997, the Federal Communications Commission (FCC) allocated a bandwidth of 75 MHz in the 5.9 GHz band (5.85-5.925 GHz range) to support the dedicated short-range communications (DSRC) for ITS. In 2004, an IEEE task group (known as IEEE 802.11p [23]) started developing an amendment to the 802.11 standard for the use of VANETs. Another IEEE group (working group 1609) took the role to develop other OSI layers specifications. There are four documents in the IEEE 1609 standards set: IEEE 1609.1 [24], IEEE 1609.2 [25], IEEE 1609.3 [26], and IEEE 1609.4 [27]. Figure 2.4 shows the WAVE architecture and Table 2.1 lists the services requirements of the IEEE 1609 standards [28]. The IEEE 802.11p and IEEE 1609 standards together, called wireless access in vehicular environments (WAVE) since their main goal is to facilitate the provision of wireless access in vehicular environments. Therefore, in the remaining of this thesis, we use IEEE 8021.11p, DSRC and WAVE interchangeably. The WAVE system consists of two units: Roadside units (RSUs), which are installed along the side road, and Onboard units (OBUs) which are mounted on vehicles. The standard is intended to allow vehicle-to-vehicle (V2V) and vehicle-to-roadside (V2R) communications. In this technology, vehicles communicate with each other and the RSUs to form VANETs on the road. VANETs will allow vehicles to send their status and safety messages amongst

18

1609.1

Application Layer Security Services Transport Layer Network Layer

1609.3

1609.4

802.11p

MAC Layer PHY Layer

Figure 2.4: Wireless Access in Vehicular Environments (WAVE) Architecture. one another to indicate the presence of accidents and other hazards. In order for these safety applications to run effectively, it is necessary to have a highly reliable Medium Access Control (MAC) layer, such that vital safety messages can be delivered in timely manner. The WAVE PHY and MAC layers are based and intended to enhance the IEEE 802.11a to support the Intelligent Transportation System (ITS) applications. The IEEE group is working on Physical and MAC amendments to the IEEE 802.11 to make it more suitable for the high mobility and fast changing topology of VANETs where reliability and low latency are crucial. WAVE will use the licensed ITS 5.9 GHz (5.850-5.925 GHz) band in North America (75 MHz spectrum) and will use Orthogonal Frequency Division Multiplexing (OFDM) scheme to provide for both the IVC and Vehicle to Infrastructure communications a wireless connection up to 1000m.

19

1609.2

Entity 1609.1 1609.2 1609.3 1609.4 802.11p

Table 2.1: Operations of WAVE functional entities Operation Specifies the services and interfaces of the WAVE Resource Manager application Defines secure message formats and processing Defines network and transport layer services including addressing and routing, in support of secure WAVE data exchange Enables operation of upper layers across multiple channels, without requiring knowledge of PHY parameters Define the WAVE signaling technique and interface functions that are controlled by the IEEE 802.11 MAC

Table 2.2: Parameters of the DSRC IEEE802.11p and the IEEE802.11a Parameter IEEE802.11p IEEE802.11a Data rate (Mbps) 3, 4.5, 6, 9, 12, 18, 24, 27 6, 9, 12, 18, 24, 36, 48, 54 Modulation BPSK, QPSK, BPSK, QPSK, 16-QAM, 64-QAM 16-QAM, 64-QAM No. of subcarriers 52 (48 data & 4 pilot) 52 (48 data & 4 pilot) OFDM symbol duration (µ s) 8 4 Guard time (µ s) 1.6 0.8 FET period (µ s) 6.4 3.2 Preamble duration (µ s) 32 16 Subcarrier freq. spacing 156.25 KHz 312.5 KHz The physical layer of the IEEE 802.11p is a variation of the IEEE 802.11a standard as shown in Table 2.2. Figure 2.5 shows the packet structure of the IEEE 802.11p. It employs 64 OFDM subcarriers where 52 of them are used in actual data transmission. The short and long training symbols located at the beginning of every packet are used for signal detection, time synchronization and channel estimation while the guard intervals (GI) are used to eliminate the inter symbol interference (ISI) from the multipath propagation channel. The IEEE 802.11p defines up to four EIRP (Effective Isotropic Radiated Power). The maximum power (30W) is reserved for emergency vehicles so they can reach longer distances to allow drivers to yield the way. The typical safety status messages use the 33dBm EIRP. The 75MHZ spectrum is divided into seven channels and a 5 MHz guard band. Each channel uses 10MHz frequency bandwidth in contrast to IEEE 802.11a which uses 20MHz to increase its tolerance to the multi-path propagation and Doppler spread effects in vehicular 20

T= TGI +TFFT Preamble
TGI TFFT

t1 t2 t3 t4 t5 t6 t7 t8 t9 t10 GI2 T1 T2 GI Signal GI Data1
Short training symbols Long training symbols Signal symbols Data symbols

GI Datan

Figure 2.5: Packet structure in IEEE 802.1p. networks. Using 10MHz channels results in data rates from 3 to 27 Mbps. Figure 2.6 shows the channel allocations in IEEE 802.11p. Channel 178, called the control channel, will be used for safety applications while channels 174, 176, 180 and 182 are service channels and will be used for none safety applications. Two service channels can be combined to form one large channel for certain applications that need large bandwidth. Channels 172 and 184 are dedicated for public safety applications.

Figure 2.6: Channel allocation in IEEE 802.11p. Each vehicle will alternate between the control channel (CCH 178) and one of the service channels. On the control channel each vehicle will send periodic status messages (beacons) which include its position and status information like speed, acceleration and direction to the neighboring vehicles. Upon receiving these messages, vehicles will process this information. If any dangerous situation is detected, the vehicle can send a warning message with high priority access class to all other vehicles in the direction of interest for a certain distance to 21

Table 2.3: Contention parameters for IEEE802.11p CCH AC No. Access Class CWmin CWmax AIFSN 0 Background Traffic (BK) 15 1023 9 1 Best Effort (BE) 7 15 6 2 Voice (VO) 3 7 3 3 Video (VI) 3 7 2 alert drivers to take the right action on time. WAVE will use CSMA/CA as in IEEE 802.11a and the Enhanced Distributed Channel Access (EDCA) as in the IEEE 802.11e standard as its basic MAC protocol. In this standard, messages are categorized into four different Access Classes: Background, Best Effort, Voice and Video. The contention parameters for the four classes are shown in Table 2.3. Each AC has a separate queue and all four queues will contend internally and the winner packet will contend externally with other nodes in the network for accessing the wireless channel. Each node (vehicle) in IEEE 802.11p network contains these four queues and each queue has different Arbitration Inter-Frame Space (AIF S ) which equals to SIF S + AIF SN ×  where  is the time slot. The queue with the highest priority has the shortest AIF S and will wait the shortest time before its transmission can start. For the first transmission the node will randomly select a value between ([0 - CWmin ]), where CWmin is the minimum contention window for this access class. This contention window (CWmin ) will be doubled as (2 × (CWmin + 1) - 1) each time a collision occurs until the CWmax or the maximum number of retransmissions reached. In case of a collision the packet will be retransmitted after a back-off time. This back-off time is shorter for the high priority traffic. Therefore, the queue with the highest priority will always win the contention of accessing the channel while other low priority traffic must back-off and try to retransmit after its back-off time expires.

22

2.3

Routing in VANETs

The critical information about accidents and road conditions as well as sensor data gathered from the vehicle itself have to be propagated to other vehicles and emergency centers in a short time. A fast and reliable communication routing protocol between vehicles and road side units is essential to prevent accidents and their fatal consequences. The short lifetime of communication links between vehicles, the smaller number of redundant paths, the unpredictable node density and the strict applications' requirements make routing in VANETs quite challenging. Early VANETs prototypes have used routing protocols designed for MANETs. Those protocols are not suitable since they did not take the special characteristics of VANETs into consideration. Some of these protocols are topology-based or flat routing while others are position-based routing. In topology-based routing protocols, all nodes are participating in routing decisions and could be classified further to proactive and reactive routing protocols. In proactive routing, nodes are frequently updating their routing tables which makes them not suitable for VANETs such as the Optimized Link State Routing (OLSR) protocol [29]. In reactive routing protocols, the nodes do not keep routing information for all nodes in the network but is gathered when needed. The Dynamic Source Routing (DSR) [30] and Ad-Hoc On Demand Distance Vector Routing (AODV) [31] are the most popular reactive routing protocols. A hybrid or hierarchical routing protocols are also been introduced where they divided the network into clusters with elected cluster heads such as Zone Routing Protocol (ZRP) [32]. This protocol combines the advantages of both proactive and reactive routing protocols. Inside the cluster, nodes keep a routing table to all nodes inside the cluster while the routes to nodes outside the cluster are discovered reactively when needed and through the cluster heads. The main disadvantage of this type of routing is the delay introduced to form clusters and maintain the cluster toplogy. In position-based or geographical routing, the nodes know their positions by using the 23

global positioning system (GPS) receiver [33]. The GPS system consists of 24 satellites in six orbital planes and works in the L-band frequencies. Vehicles can use more satellites to increase the position accuracy although it is not always possible to reach sufficient number of GPS satellites especially in urban areas. In these protocols, the routing information is flooded only to the area where the receiver is located. The sender and or relay nodes could use the Most Forward within Radius (MFR) protocol to select the closest relay node to the destination to minimize the number of hops the packet will traverse as shown in Figure 2.7. In this case, the sender (S ) will send the packet to node (C ) since it is the farthest possible relay node within its range toward the receiver (node D). Although location based routing protocols need to know the position of each node in the network and may lead to routing holes especially in low traffic areas, they can help reduce the routing overhead and restrict flooding to a certain area which makes them more suitable for Inter-Vehicle Communication.

C S r A B D

Figure 2.7: Most Forward within Radius routing Strategy.

24

Chapter 3 Analysis of the IEEE 802.11p Physical Wireless Channel
There are many parameters that affect the performance of VANETs' applications and protocols. To test the new applications and protocols on a real setup is very difficult and very costly. Most researchers use simulation tools to study and analyze VANETs. The simulators usually use simple radio propagation models that did not take into account all the obstacles in the environment. Therefore, different radio propagation models are analyzed in the context of VANETs' safety applications. Through simulations using network simulator (ns2) and Matlab, we find the radio propagation model that best characterize the vehicular environment.

3.1

Introduction

In the near future, vehicles will be equipped with Dedicated Short Range Communication (DSRC) devices (IEEE 802.11p) [23] to form vehicular ad hoc networks on the road. There are many applications and routing protocols that have been developed or under development for VANETs to help drivers to travel more safely and to reduce the number of fatalities due to road accidents. For example if one vehicle is involved in an accident, it has to send a 25

warning message to all vehicles behind it in order to avoid a chain collision. The safety information has to be propagated in a short time (usually less than 0.5 sec) [14]. The research and application development in VANETs are driven by the IEEE802.11p technology [23] which is intended to enhance the IEEE 802.11 to support the Intelligent Transportation System (ITS) applications where reliability and low latency are crucial. The IEEE 802.11p technology is aimed to support up to 1000 meters communication range between vehicles or vehicles and infrastructure. A realistic study conducted by [34] shows that the maximum range this technology can reach in a highway scenario is up to 880 meters for the line of sight (LOS) and 58 to 230 meters in the none line of sight (NLOS). It seems that this technology did not take into account all the mobility effects and the characteristics of VANETs' radio environment. The nodes (vehicles) are in high mobility either in the same or in opposite direction which results in Doppler shift causing frequency dispersion. The radio wave in vehicular environment faces many challenges such as: absorption, reflection, refraction, diffraction and scattering due to obstacles on the road such as trucks, buildings, trees, hills and bridges. The vehicular environment is very huge and to test the new applications and protocols designed for this environment on a real setup is very difficult and very costly. This is the reason why most researchers use simulation tools to study and analyze VANETs. The simulators usually use simple propagation models that did not take into account all the obstacles in the environment.

3.2

Radio Propagation Models

In this section we present the most common radio wave propagation models which are implemented in the network simulator (ns2). They are either large scale propagation models to predict the mean signal strength for large transmitter-receiver distance or small scale propagation models to predict the short-time fluctuations over small distances. 1. Free Space Propagation Model: It is a large scale propagation model that assumes only 26

the existence of the LOS path between the transmitter and the receiver. The received power Pr at distance d from the transmitter is given by the Friis Equation [35] as P t G t G r 2 , 4 2 d2 L

Pr (d) =

(3.1)

where Pt is the transmitted power, Gt and Gr are the transmitter and receiver antenna gains, L is the system loss and  is the wave length in meters. 2. Two-Ray model: It is also a large scale model in which the received signal is the sum of the LOS signal and the one reflected from the ground. This model is more accurate than the free space model in predicting the received signal strength for large distances. The received power is given by [35] as
2 h2 t hr , d4

Pr (d) = Pt Gt Gr

(3.2)

where ht , hr are the transmitter and receiver antennas' heights. 3. Rayleigh Fading Model: This model assumes that the magnitude of the received signal r varies randomly according to a Rayleigh distribution which is a sum of two uncor related Gaussian random variables r(t) = I (t)2 + Q(t)2 (in-phase and quadrature components). It has a probability density function (pdf) as r p(r) = 2 exp  ( -r 2 2 2 ) , for r  0, (3.3)

where  2 is the time average power of the received signal (the variance of I (t) and Q(t)). This model is suitable for wireless channels that have no LOS component but multipath components that vary in amplitude and phase. The received components will have zero mean and uniformly distributed phase between [0, 2 ]. 4. Ricean Fading Model: In this model the random multipath components will be added 27

to the LOS which can be seen as a DC component to the random multipath in Rayleigh distribution. If the in-phase and quadrature components I (t) and Q(t) have a jointly Gaussian pdf , then the pdf of the received signal is found to be Ricean distribution as ( 2 ) ( ) r r + A2 Ar p(r) = 2 exp - I , o  2 2 2

A  0, r  0,

(3.4)

Where Io (.) is the modified first kind and zero-order Bessel function. When A (the LOS component) tends to zero, the Ricean distribution corresponds to a Rayleigh distribution and when A tends to infinity, the Ricean converges to Gaussian distribution. 5. Shadowing model: This model has two parts [12]. The first part is the path loss component which is used to predict the received power at distance d from a known reference power at distance do . The second part is the log-normal shadowing which reflects the variations of the received power at certain distance d from the transmitter. It is a log-normal distribution or Gaussian distribution if measured in dB . Therefore the overall shadowing model is represented as: Pr (do ) d = ( )n + X , Pr (d) do

(3.5)

where n is the path loss exponent, X  N (0, dB ), and dB has a value from 4 to 12 dB in outdoor environment. 6. Nakagami-m distribution: This model is frequently used to characterize the statistics of signals transmitted over multipath fading channel and its pdf describes the distribution of the envelop r of the received signal and is given by 2 m 2m-1 -mr2 r e  , for r  0, (m) 

Pr (r) =

(3.6)

where (o) is the gama function,  = E (R2 ) is the average received power and the

28

parameter m =

2 E [(R2 -)2 ]

is the ratio of moments and is called the fading factor. If

m = 1 then the Nakagami distribution will reduce to a Rayleigh distribution. The Free Space and Two-Ray models are deterministic radio propagation models. They assume a successful reception of the signal if the received signal strength (RSS) is greater than a threshold. This means that their communication range is an ideal circle and they always determine the same RSS for the same distance. While in reality, the RSS is a random variable due to the multipath propagation effect. This makes the successful detection of the signal is not certain. The shadowing, Rayleigh, Ricean and Nakagami are probabilistic propagation models and their successful reception of the signal is a decreasing function of the distance.

3.3

VANET Wireless Channel Analysis

The vehicular ad hoc networks have many moving and stationary objects that can reflect, scatter, diffract or even block the signals. Therefore the received signal by any vehicle is composed of many reflected versions of the original signal that have different time and angle of arrival which cause them to have randomly distributed amplitudes and phases. Each of the multipath signals will have either a constructive or a destructive effect on the total received signal depending on its phase and amplitude (fading). Therefore, and due to their high speed, vehicles could pass through many fades in a very short time or could reach a point where the received signal is highly distorted. This is a serious issue for vehicular time critical safety applications such as accident warning system. To analyze the wireless channel in VANETs, an accident scenario model is built. In this model, the vehicle that is involved in an accident sends a warning message to all vehicles behind it. This vehicle could manage to send the warning message only once before it is broken. The behind vehicles should receive this message correctly and in a very short time; hence they can take action to prevent a chain or a secondary accident. At the time of 29

accident, we assume that the broken vehicle has almost zero speed, while the behind vehicles are at full speed 33m/s. We assume also that the communication range is R meters and there are many vehicles in between the transmitter and the receiver as shown in Figure 3.1.

Figure 3.1: Accident scenario in VANET. In this model there are two ways for the transmitted signal to propagate to the receiver: The direct path in which the signal could follow the free space propagation model if the distance between the transmitter and the receiver is less than 100m otherwise the Two-Ray model. If there are vehicles in the way from the transmitter to the receiver then the received signal through the direct path could lose some or most of its strength depending on the heights and locations of the vehicles in between. The in between vehicles block at least half of the first Frensel zone [35]. Therefore the received signal strength will lose at least 6dB on top of the Free-Space or Two-Ray attenuation. The second way is the reflected path from each side of the lane where the accident happens. The signal could be reflected from the adjacent vehicles or the buildings along the highway. Moreover, due to the movement of the receiver towards the transmitter, the received components will arrive in different frequencies higher than the original frequency due to different Doppler shifts. Figure 3.2, 30

which is a Matlab simulation, shows that the phase of the reflected signal is in high degree of fluctuation when the in between vehicles are concentrated around either the transmitter or the receiver.
7 6

Phase shift (rad)

5 4 3 2 1 0 -1

0

50

100

150

200

250

300

350

400

450

500

Distance of reflecting vehicle from the receiver(m)

Figure 3.2: The Phase shift vs the position of the reflecting vehicle from the receiver. In general the received signal can be expressed as in [35] by
N -1  i=0

r(t) =

ai e-j i (t) ,

(3.7)

where N is the number of received signals, i (t) = 2 (fc + fd )t +i , fc and fd are the carrier and the Doppler frequencies and i is the phase shift. The first component in Equation (3.7), which is the direct signal, is attenuated by the knife-edge diffraction model. This attenuation depends on the height and distance of the in between vehicles. The multipath components, which are reflected from vehicles within 100m, will have different arrival times. At each time there will be up to four signals that have the same phase. While the components reflected from vehicles located in the middle will have almost the same arrival time as the direct one but with different phase. Figure 3.3 shows the impulse response of the modeled channel from which we can derive the power delay profile of the channel by averaging the

31

squares of the magnitudes as  =

a2  k 2. k ak

Figure 3.3: The impulse response of the modeled channel. From the power delay profile, the mean excess delay,which is the first moment of the power delay profile, can be defined as  2 2 k ak k =  . 2 k ak

(3.8)

From (3.8), the maximum excess delay can be defined as the excess delay of the last component that has a magnitude exceeds a certain threshold. The root mean square value (rms) delay spread, which is a measure of the variation of the delays about its mean, can be derived as  =   2 -  2.

(3.9)

The IEEE 802.11p is set to use the OFDM modulation technique with 64 subcarriers that are orthogonal to each other. Therefore, the guard interval GI that precedes each symbol as shown in Figure 2.5, has to be longer than the time delay profile, that is longer than the maximum excess delay, to alleviate the impact of the Inter Symbol Interference (ISI) and maintain the symbols' orthogonality. At the same time increasing the GI more than needed will reduce the channel throughput. From the IEEE 802.11p specifications listed in Table 2.2, It can be seen that the Guard interval is 1.6 µs and the maximum excess delay in the high way scenario is 1.4 µs as measured by [36]. Although the guard interval is enough to eliminate the ISI in the highway scenario, it could be not enough for rural areas that exhibits longer maximum excess delay due to far reflecting objects. 32

To test for fading in VANETs, we define first the channel coherence bandwidth Bc , which is the reciprocal of the power delay profile, as a measure of a range of frequencies over which the channel is considered to be flat. If the frequency correlation function of the spectrum envelop is above 0.9 then the coherence bandwidth is estimated as Bc = it is above 0.5 then Bc =
1 . 5 1 50

[35] and if

If the bandwidth of the signal Bs is less than the coherence

bandwidth Bc of the channel, then the channel will be considered as a flat fading channel where signal amplitude may vary (fade) but may not be distorted. On the other hand, if Bs  Bc then the signal will go under frequency selective fading where its amplitude may not vary but will be distorted. Since IEEE 802.11p uses OFDM signals, the frequency spacing between the subcarriers should be less than the coherence bandwidth of the channel to insure flat fading as 10M Hz = 156.25KHz  Bc . 64subcarriers

Bs =

(3.10)

Moreover the spacing between adjacent carrier's frequencies must be much larger than the Doppler spread BD to insure that the multipath signals do not interfere with adjacent carriers such as  Bs  BD = 2 ,  (3.11)

where v is the relative speed between vehicles and  is the wave length. Therefore,the following condition has to be assured to avoid fading

Bc  Bs  BD .

(3.12)

The rms delay spread  is reported in [37] as 400ns for the N LOS scenario, hence the 0.9 coherence bandwidth can be calculated as 50KHz which is less than the symbol frequency Bs = 156.25KHz . This means that the received signal may suffer from frequency selective fading.

33

In vehicular environment, the propagation channel is considered to be a time-varying channel due to the motion of the transmitter, the receiver and other reflecting objects on the road. The coherence time Tc 
1 fm

of the channel is a statistical measure over which

the channel can be considered invariant, where fm = / is the maximum Doppler shift. In most cases they calculate the coherence time as Tc 
0.423 fm

[35]. We need to make sure

that the symbol duration in OFDM, which is Ts = 8ms, is much less than the coherence time Tc to insure slow fading channel. The training sequence sent before each packet is used to estimate the channel and detect its coherence time and this estimation will be used for the whole packet. Therefore, the packet duration has to be less than the coherence time to reduce the packet error probability. If the maximum vehicle's speed is assumed to be 125Km/h, then the maximum relative speed between two vehicles moving in opposite directions is 250Km/h. Therefore, the maximum Doppler shift is fm = 1.366KHz and the coherence time is 0.423 = 310 µs, 1.366 KHz

Tc =

(3.13)

which is the maximum packet length duration without distortion during transmission. Moreover the preamble duration, which is set to (32µs) as listed in Table 2.2, is much less than the coherence time of the channel and may not be enough to estimate the channel for long packet transmissions.

3.4

Simulation

To find the propagation model that best characterize VANETs' channel, two kinds of simulations are conducted, one by using MATLAB and the other by using Network simulator ns-2.33.

34

3.4.1

MATLAB simulations

We model Equation 3.7 using MATLAB and calculate the probability density function (pdf ) of the received signal envelop. To test this pdf against the pdf s of the probabilistic propagation models mentioned in section 3.2, we calculate the parameters of the Rayleigh, Ricean, Shadowing and Nakagami propagation models from the received signal itself. Figure 3.4 shows the pdf s of the simulated signal and the aforementioned propagation models. We can see that the received signal is more close to the Ricean and Nakagami distributions since there is a diffracted LOS component.
Probability Density Function f(r)
1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1 simulation Ricean Nakagami Rayleigh Lognormal

Envelope r

Figure 3.4: The pdf s of the received signal and propagation models. Figure 3.5 shows the outage probability, which is the probability that the received signal power is below a certain threshold. It is also clear that the simulated outage probability is more close to the Ricean distribution. From Figures 3.4 and 3.5 , it can be concluded that Ricean and Nakagami models are more appropriate to describe the received signal in a highway scenario.

35

1 0.9

Outage Probability

0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 -45

Pout(Simulation) P (Rice) out P (Rayleigh) out P (Nakagami)
out

-40

-35

-30

-25

-20

-15

-10

-5

0

Threshold power in dBm

Figure 3.5: The simulated and analytical outage probability.

3.4.2

NS-2 simulations

The network simulator ns2.33 is used, which is a well known simulator in both academic and industrial fields in simulating and analyzing VANET's environment. The simulator has been extended to model VANETs by utilizing the IEEE 802.11p technology. The simulated network is mapped as circular bidirectional highway with a diameter of 2000m (6283m length) with 4 lanes in each direction. There are 600 vehicles on this highway segment and all of them equipped with DSRC and GPS technologies. The vehicles' speed ranges from 70 to 120Km/h and their movements follow a microscopic mobility model where the instantaneous speed is influenced by front vehicle's speed and has to change lane if it decides to bypass another vehicle. Each vehicle is configured to broadcast a status message of size 250Bytes periodically and all vehicles within its range are possible recipients. All configuration parameters are listed in Table 3.1. At the end we compare and analyze the different propagation models based on the packet delivery ratio and the time delay in receiving an ennergency message. In the first simulation scenario, only one vehicle is broadcasting its status message; all other vehicles are potential recipients. We are interested in the successful ratio of the received 36

Table 3.1: Value of parameters used in simulation
Parameter Data rate of IEEE802.11p Message size Vehicles speed Vehicles density Transmission power (Pt) Received power threshold (RxThreshold) Carrier sense threshold (CSThreshold) Noise power threshold (Noise-floor) Height of the Tx and Rx antennas Gain of the Tx and Tr antennas (Gt=Gr) Value 6Mbps 250Bytes 70-120km/h 12 cars/km/lane 0.001 3.162e-12 3.162e-12 1.26e-13 1.5 m 4

messages at different distances from the transmitter. For the Shadowing propagation model, we used 2.8 as the path loss exponent and 4 as a standard deviation as specified in [12] for the highway scenario. For the Nakagami propagation model, we used the parameters specified by [38]. Figure 3.6 shows the packet successful reception rate versus distance. It is obvious that different propagation models give very different results for the same setup. This means that choosing the propagation model in any simulation setup is a main factor to judge on the validity of the results. Therefore, conducting the simulations and analysis of VANETs based on a simple model such as the Free Space and Two-Ray models is not correct as proven by the MATLAB simulations.

Figure 3.6: The Success Ratio vs Distance.

37

In the second simulation scenario, we use the same parameters as in the first scenario except for two: the transmission power is increased to 0.002W and all vehicles are transmitting their status messages periodically. One vehicle is configured to send an emergency safety message to all behind vehicles. We are interested in the time till the warning message reaches a distance of 2000m. Figure 3.7 shows the time delay until the emergency message reaches the intended distance versus the status messages' sending rate (traffic load). It is obvious that the Two-Ray model suffers from high delay in a high traffic situation since all nodes within the range are competing to use the channel. While in the probabilistic models (Shadowing and Nakagami) not all nodes receive the signal successfully and so the number of nodes competing for the channel is less. It can be seen also that different propagation models give different results for the same scenario. This is a very serious issue in VANET especially in an accident situation where safety messages have to be propagated to all vehicles behind the accident in a short time. Using a simple model which assumes that all vehicles in the range receive the message successfully while in reality they are not, may result in fatal consequences.

Figure 3.7: Time delay vs Traffic load.

38

3.5

Summary

In conclusion, the radio channel in VANETs is very complex and has many parameters that affect the amplitude and phase of the received signal. Using simple models like the Free-Space and Two-Ray models is not accurate in all scenarios and may lead to wrong results. Our simulations using ns-2 show very different results for different propagation models. Therefore choosing the optimal model in each scenario is the challenge that faces researchers. The best way to model the radio channel is by conducting real experiments on the road. Our MATLAB simulations show that Ricean and Nakagami distributions are the appropriate models to describe the received signal in a highway scenario. Our results show that the simulated results agree with the analytical results.

39

Chapter 4 A New Mobility Model for Vehicular Ad hoc Networks
To get accurate results from the simulations of the designed applications and protocols, the analytical analysis and simulation setup should be built on a realistic mobility model that involve all constraints and facilities related to the vehicular movement. Therefore, in this chapter and based on the analysis and simulation results in Chapter 3, the communication range in the vehicular environment is studied. Moreover, a new mobility model is built, that takes into account the vehicle's follow-on safety rule, to accurately derive the relationship between vehicle's speed and network density. We also derive the distribution of vehicles on the road which affects the link availability and duration of connection between vehicles. It also determines the population size of vehicles within the transmitter's range and the number of vehicles in the two interfering (hidden terminal) areas.

4.1

Introduction and Related Work

The mobility model is a crucial part in analyzing and testing VANETs. Modeling vehicles mobility is quite challenging since the movement of each vehicle is constrained by many factors such as the road topology, neighbor vehicles' movements, the information advertised 40

on the messaging signs along the road, and the driver's reactions to these factors. In [39], a set of movement changes are introduced such as changing lanes, slowing down or even change routes to allow a micro-mobility behavior control. Other models, such as [40], studied drivers' reaction based on the movement of the neighboring vehicles. In the literature, there are many studies on network connectivity for example [41]- [46]. Most of these studies are based on the assumption that nodes have stationary distribution. In [41], the authors presented an analytical model for multi hop connectivity assuming that vehicles positions are known by either simulations or observations. They assume the propagation of information is instantaneous with respect to vehicle's movement. In [42], the authors derived a mobility model for VANETs considering the arrival of vehicles to a service area as a Poisson distribution without including the follow-on safety rule. In [43] and [44], the authors derived the probability of connectivity assuming a uniform stationary distribution of nodes in the network. While in [45], an upper bound of the connectivity probability for a triangular lattice topology is derived, the authors in [46] studied the connectivity of VANETs considering only the free-flow state in a low density network. They used the common homogenous Poisson model in vehicular traffic theory in which the inter arrival times between vehicles are exponentially distributed without deriving the relationship between network density and vehicles average speed. They assume that vehicle's speed does not change over time which referred to as the constant speed model. Many surveys of VANETs' mobility models have been conducted such as in [47] and [48]. They all agreed that mobility models have to be adaptable to all factors mentioned above to realistically characterize vehicles movements on the road. In [49], the authors argued that coupling more than one simulator is an important step towards a realistic VANET's mobility model. In [50], the authors discussed the need for bidirectional coupling of network simulation and road traffic microsimulation for evaluating IVC protocols. They developed the hybrid simulation framework Veins (Vehicles in Network Simulation), which is composed of the network simulator OMNeT++ [51] and the road traffic simulator SUMO. Therefore,

41

coupling the MOVE [52] mobility model with the micro-traffic simulator SUMO [53], that produces realistic vehicle movement traces for the network simulator ns-2, could exhibit the real vehicles' movement on the road.

4.2

Communication Range

Since VANETs have many moving and stationary objects that can reflect, scatter, diffract or even block the signal, the received signal by any vehicle is composed of many reflected signals with randomly distributed amplitudes and phases. Recently many researches have paid more attention to the vehicle-to-vehicle (V2V) channel propagation models. In [54], we showed that VANETs fading channel could be characterized by Rician distribution for short distances and tends toward Rayleigh distribution for large distances. Therefore, the Nakagami fading distribution whose parameters can be adjusted to fit a variety of empirical measurements and can model Rayleigh and Rician distributions is used. The Nakagami model has a probability density function (pdf ) of the received signal power (x) [55] as ( Pz2 (x) = m Pr )m
x xm-1 - m e Pr , for x  0, (m)

(4.1)

where (·) is the Gamma function, Pr =

is the average received power, r is the distance ( )2 C in meters,  is the path loss exponent, K = Gt Gr 4fc , C is the speed of light, fc =

Pt K r

5.9GHz is the carrier frequency, Gt and Gr are the transmitter's and receiver's antenna gains respectively and m is the fading factor. For m = 1, the Nakagami distribution reduces to Rayleigh and for m =
(k+1)2 , 2k+1

it approximates a Rician distribution with parameter k

which is the ratio of power in the line-of-sight to the power in the none line-of-sight. From (4.1), we can calculate the CDF of the communication range, following the same

42

approach as in [56], when the received power is greater than the threshold Pth as FR (r) = 1 - P (x  Pth )  = 1 - Pth Pz2 (x)dx. Substituting (4.1) in (4.2) and some manipulation, the CDF can be written as FR (r) = 1 - = 1- ( )m
m Pr 1 (m) 1 (m)

(4.2)


Pth

m-1
i=0

(m-1)! (m-1-i)!

xm-1 e- Pr dx ( )m-1-i
mx

mPth Pr

e-

mPth Pr

(4.3)

The average value of the communication range E [R] can be derived as  E [R] =
0 

(1 - FR (r))dr.

(4.4)

Substituting (4.3) in (4.4) and integrating over the limits, we have ( )( )-  m-1 mPth 1  (m - 1)! 1 E [R] = R =  m-1-i+ . (m) i=0 (m - 1 - i)!  Pt K
1

(4.5)

To derive the average carrier sense range (E [LCS ]) where nodes can sense the packet but could not receive it, the same procedure as in (4.5) is followed except for the received power threshold (PCS ), which will be defined as a percentage of the threshold Pth as

PCS = Pth , where   (0, 1]. Therefore, the expected carrier sense range will be: E [R] . E [LCS ] =   

(4.6)

(4.7)

In the following, we may use interchangeably R or R to represent the average communication range, and E [LCS ] or LCS to represent the average carrier sense range. It is also 43

Interfering Area

Interfering Area 2R S y

E vehicle/s

R

d1

x

R

d2
Tagged Vehicle

E vehicle/s

Figure 4.1: Simplified one dimensional highway scenario in each direction of the road. assumed that the communication range covers the width of the road.

4.3

Mobility Model

The proposed VANET mobility model is built based on a one way multi lane highway segment [57]. In VANETs, the communication range is much larger than the width of the road, therefore, the network in each direction of the road is simplified as a one dimensional VANET as shown in Figure 4.1. Vehicles will follow the direction of the road with a speed uniformly distributed between Vmin and Vmax with mean µ =
vmin +vmax 2

and variance  2 =

(vmax -vmin )2 . 12

In this model, we are interested in the distribution of vehicles on the road, number of vehicles (Nc ) around the transmitter (contention region) and the number of vehicles (Nh ) in the hidden terminal areas (interference region). In this model, an arbitrary starting point of the highway is first defined, and the number of vehicles that cross the starting point in each lane (assume the road has Nl lanes) is modeled as Poisson process with average rate i vehicles/s for the ith lane, such that the total number of vehicles per second that cross that point is
Nl  i=1

=

i .

(4.8)

Empirical studies [58] show that the Poisson process is sufficiently accurate assumption for modeling vehicles' arrival process in a highway scenario. It is assumed that vehicles move independently of each other; hence, the total distance that a vehicle travels during 44

an interval of (0, t) approaches a normal distribution and the inter-distance between two vehicles crossed that point with time difference d also has normal distribution. For more details, this model is published in [57]. To find the probability of having Nc vehicles within the range of any tagged vehicle, the mobility model in [59] is extended to include the minimum safety distance between vehicles in each lane (ts seconds rule). This means that the following vehicle, which is traveling with speed Vj , has to keep a safe distance (dth ) from the in front vehicle such that dth > Vj ts to avoid an accident if the front vehicle stops suddenly. This minimum distance is a random variable and depends on the following vehicle's speed Vj if a fixed ts is assumed, which is the response time for a driver to react on a sudden incident. Moreover, the following two cases are considered: low density and high density networks.

4.3.1

Low Density Network

In this case, we assume that the number of vehicles that cross the defined reference point is small such that the inter arrival time (d =
1 ) i

between vehicles in the ith lane is larger

than ts . Therefore, in this case, the safety distance does not appear in the analysis since the distance between vehicles is assumed to be larger than the safety distance. The movement of each vehicle will follow the direction of the road and consists of a sequence of random length intervals that have an exponential distribution with mean
1 . 

Therefore, the distribution of the number of mobility intervals M (t) is a Poisson process with mean t. During each interval, each vehicle selects a random constant speed from the interval [vmin , vmax ]. Therefore, during an interval m of length Tm , the vehicle n travels a
n n n n is the speed of vehicle n in the interval Tm . Considering , where vm · Tm = vm distance Dm

vehicles have the same mobility model, therefore, the superscript n can be eliminated. The speeds of all vehicles during each interval is modeled by uniform distribution with mean µ=
vmin +vmax 2

and variance  2 =

(vmax -vmin )2 . 12

We assume that vehicles move independently

of each other, this means that drivers can choose any speed from [vmin , vmax ] within any 45

interval and always there is a possibility to change lane. Since the average number of intervals during the time [0, t] is t  1, the total distance that a vehicle travels during this interval is
M (t)

D(t) =



M (t)

Dm =



vm · Tm .

(4.9)

m=1

m=1

It is clear that D(t) is a Compound Poisson process that has mean and variance as in [60] vmin + vmax t = µt, 2

E [D(t)] = tE [vm · Tm ] =

(4.10)

[ ] 2t V ar [D(t)] = tE (vm · Tm )2 = ( 2 + µ2 ). 

(4.11)

As t increases, D(t) approaches a normal distribution with the same mean E [D(t)] and variance V ar [D(t)]. To find the neighboring probability, i.e. the probability of having k vehicles within the range of any tagged vehicle, a reference vehicle is defined to arrive at the starting point of the highway at t = 0. The arrival event is denoted by A(0). If a vehicle arrives at the same point a period of time  after the reference vehicle, then the mean and variance of its distance at time t will be vmin + vmax (t -  ) = µ(t -  ), 2

E [D(t -  )] = (t -  )E [vm · Tm ] =

(4.12)

[ ] 2(t -  ) 2 ( + µ2 ). V ar [D(t -  )] = (t -  )E (vm · Tm )2 = 

(4.13)

Hence, their inter-distance Dd = D(t) - D(t -  ) has also a normal distribution with mean and variance as E [Dd ] = µd ( ) = µ,
2 ( ) = V ar [Dd ] = d

(4.14) (4.15)

2(2t -  ) 2 ( + µ2 ). 

46

If n vehicles arrived in the period of [0, t] and since each arrival time is uniformly distributed over this interval, then the conditional probability PR (t|A(0)) that a vehicle is within the range of the reference vehicle at time t conditioned on that the reference vehicle arrived at t = 0 is 1 PR (t|A(0)) = t  t
0 R
(x-µd ) - 1 2 2 d  exp dx d. 2 2d 2

(4.16)

-R

Let N (t) denote the number of vehicles at time t within the range R of the reference vehicle given that n arrivals, then the conditional probability of having k vehicles within this range in the ith lane at time t can be derived as Pk (t|A(0)) = P (N (t) = k )  e-i t (i t)n = . n=k P [N (t) = k | n arrivals in (0, t)] n!

(4.17)

Because each vehicle from the n arrivals will be within the range of the reference vehicle at time t according to independently identically distributed Bernoulli trials, then the probability of having k vehicles within the range is ( ) )k ( )n - k n ( PR (t|A(0)) P [N (t) = k | n arrivals in (0, t)] = 1 - PR (t|A(0)) . k By substituting (4.18) in (4.17), then [i tPR (t|A(0))]k -i tP (t) R . e k!

(4.18)

Pk (t|A(0)) = P (N (t) = k ) =

(4.19)

Equation (4.19) shows that the number of vehicles within the reference vehicle's range can be modeled by a Poisson process with parameter ( = i tPR (t)). Therefore, the average number of vehicles that arrive after the reference vehicle and stay within its range at the

47

steady state is  = i lim tPR (t|A(0))
t

= i lim

tR
-R

t 0

 2

1
2(2t- ) ( 2 +µ2 ) 

e

-

2

(x-µ )2 2(2t- ) 2 ( +µ2 ) 

(4.20) dx d.

Substituting y = 2t -  yields   = i lim  let z =
t R


t

2t

-R

 e y 2 + µ2 ) (  2 2 

1

-

4µ2 y 2 ( 2 +µ2 ) 2

dy dx,

(4.21)

4µ2 y
2 ( 2 +µ2 ) 

and take the limit to infinity 
R

1  = i µ


0



-R

z2 1 R  e- 2 dz dx = i . µ 2

(4.22)

Proposition 1 For vehicles that arrive before the reference vehicle, the probability that a vehicle falls within the reference vehicle's range is the same as in (4.16) and the probability of having k vehicles from n vehicles that arrive before the reference vehicle to be within its range is the same as in (4.19). To prove this, we follow the same approach as in the previous case assuming that a vehicle arrives at time  before the tagged vehicle. Therefore, its distance from the reference
2 vehicle has a mean of µd = -µ and variance of d = 2(2t+ ) ( 2 

+ µ2 ). Since   [-, 0] in

this case and by substituting this mean and variance in (4.16), the result will be the same as (4.19). Since the sum of two independent Poisson processes is a Poisson process with rate equal to the sum of their rates, then the conditional probability of having k vehicles within the range of the reference vehicle and moving in the same direction at the steady state is:
iR k ( 2µ ) 2i R µ

P2R (k |A(0)) =

k!

e-

.

(4.23)

48

Proposition 2 Let the probability of having k vehicles within a range of 2R from one di  rection at any time be denoted as P2 (k ), then P2 (k ) = P2R (k |A(0)). R R  Due to the memoryless property of the Poisson process, P2R (k |A(0)) = P2 (k )P (A(0))/P (A(0)) = R  P2 (k ). R

Therefore, in this case the probability of having Nci = k vehicles within the communication range of the tagged vehicle (that is within a distance of 2R) in the ith lane is
iR k ( 2µ )

P2R (Nci = k ) =

k!

e-

2i R µ

,

(4.24)

and the average number of vehicles around the tagged vehicle in the ith lane is 2i R . µ

Nci =

(4.25)

The probability of having Nhi = k vehicles within the carrier sense range of the tagged vehicle is P2LCS (Nhi = k ) =
2i R k  (µ  )
2 R

k!

e

i  -µ  

.

(4.26)

4.3.2

High Density Network

In this case, the number of vehicles that cross the reference point is large such that the inter arrival time between two following vehicles is less than the safety time ts . As a consequence, the inter distance between two neighboring vehicles in one lane is less than the threshold distance as di = Vf d < Vj ts , (4.27)

where Vf and Vj are the in front and following vehicles' speeds on the ith lane, respectively. In this case, the following vehicle has to reduce its speed in order to avoid an accident. To derive an expression for this reduction in speed, the system is modeled as a single server Poisson arrival queue as shown in Figure 4.2. A vehicle is immediately served if the server 49

Figure 4.2: Single server queue model. is empty and its service time (S ) will be (S +
1 ) i

× Vf = Vj ts and therefore
relay

nsmitter

Vj 1 S= ts - . Vf i

(4.28)

On the other hand, if a vehicle finds another one is being served (i.e. reducing its speed to maintain the threshold distance), the new vehicle should wait in the queue for time B1 until the first one finishes the service (that is the distance which the vehicle traveled equals dth ). If another vehicle arrives during the time (S ), it will wait in the queue until all vehicles in front of it have been served, that is, the distance between any two neighboring vehicles is at least equal to dth . After that, vehicles would move according to new speed limits which reflect this increase in the inter distances between vehicles. Since the arrival time is Poisson with rate i , the number of vehicles (N (s)) that will arrive during the time S has Poisson distribution and the server busy time can be modeled as
N (S )

B=S+ N (S )
i=1


i=1

Bi .

(4.29)

However, for given S , be derived as

Bi is a Compound Poisson distribution and its mean E [B ] can E [S ] , 1 - i E [S ]

E [B ] = whereE [.] is the expected value.

(4.30)

50

To derive E [S ], it is seen from (4.28) that S has a ratio distribution and its mean value is ] Vj 1 E [S ] = E ts - . Vf i
Vj Vf

[

(4.31)

Define a random variable Z = of Z can be derived as       fZ (z ) =

Vmin Vmax which has values in the interval ( V , ); hence the pdf max Vmin

1 2(Vmax -Vmin )2 1

( (

2 Vmax
2 Vmax z2

-

2 Vmin z2

) ) ,

Vmin Vmax

z<1
Vmax Vmin

2(Vmax -Vmin )2      0,

2 - Vmin ,

1z<

(4.32)

otherwise.

Therefore, E [Z ] can be derived as Vmax + Vmin E [Z ] = ln 2(Vmax - Vmin ) Substituting (4.33) in (4.31), we have Vmax + Vmin E [S ] = ln 2(Vmax - Vmin ) ( Vmax Vmin ) ts - 1 . i ( Vmax Vmin ) . (4.33)

(4.34)

Substituting (4.34) in (4.30), the average server busy time is
1 ts -  i ( ) [ E [B ] = max +Vmin max ln V ts - 1 - i 2(V Vmax -Vmin ) Vmin Vmax +Vmin 2(Vmax -Vmin )

(

ln

Vmax Vmin

)

1 i

].

(4.35)

Equation (4.35) represents the average time that a vehicle will wait in the queue such that the inter distance between two following vehicles in one lane is greater than or equal to the threshold distance dth . To reflect this waiting time on the real scenario on the road, vehicles in our model will reduce their speed proportionally with E [B ] which is normalized by the average number of vehicles within the range µn =
i R . µ

The more waiting time, the

more reduction in the average speed of all following vehicles until it reaches zero speed,

51

defined as a jam state. In this state vehicles will come to a complete stop or move in a speed close to zero. Therefore, it is assumed that each vehicle occupies a space of 10 meters on average and this is the maximum vehicle density a road lane can handle. The new speeds and their mean, as a function of their old values, are given respectively as Vmax[new] = Vmax[old] e- Vmin[new] = Vmin[old] e- µnew =
E [B ] µn

,

(4.36)

E [B ] µn

,

(4.37) (4.38)

Vmax[new] + Vmin[new] , 2

where   (0, 1] is the fraction of vehicles that follow the following distance safety rule. For example, if  = 0.8, this means that 80% of the drivers on the road will follow this rule. This percentage will vary from country to country and from city to city, even each lane on a road could have a different value. From the new values of the maximum and minimum vehicle speeds in (4.36) and (4.37), respectively, it is required to calculate a new value of E [S ] as E [S ]new and substitute it in Equation (4.35) to calculate a new value of E [B ] as E [B ]new . The new distribution of vehicles will be a new Poisson but with different mean
2Ri µnew

if the condition i E [S ]new < 1

is satisfied. Otherwise, the road reaches the jam state. Therefore, the average number of vehicles (Nci ) within the communication range of any tagged vehicle in the ith lane will be       Nci =     
2Ri , µ 2Ri , µnew 2R , 10

E [S ] = 0 E [S ] = 0, i E [S ]new < 1 E [S ], = 0, i E [S ]new  1 (4.39)

The vehicles arriving rate and average speed could vary from lane to lane. The left most lane could have higher average speed and arriving rate than the right most lane. To find the total number of vehicles within the communication range of the transmitter, one can

52

use (4.39) to calculate the number of vehicles Nci in each lane and sum them all such that  l Nc = N i=1 Nci . Without loss of generality, assuming that all lanes have the same arriving rate and average speed, then the total number of vehicles that are located within the range of the transmitter is       Nc =     
2R , µ 2R , µnew 2R N, 10 l

E [S ] = 0 E [S ] = 0, E [S ]new < 1 E [S ] = 0, E [S ]new > 1. (4.40)

4.4

Mobility Model Validation

In this section, we used the same ns2 simulation setup as in Chapter 3. In this setup, we are interested in the number of vehicles within the communication range of the tagged vehicle. To compare the accuracy of the proposed mobility model with mobility models based on Poisson distribution, the average number of vehicles within the transmitter's range is plotted in Figure 4.3 as a function of the vehicles' arriving rate. Note that the Poisson models do not take into account the follow-on safety rule, the increase in vehicles arriving rate, or the maximum road capacity. From the numerical results in Figure 4.3, it is shown that the proposed model is more accurate in predicting the number of vehicles around the transmitter than other models that use only one Poisson distribution. It can be seen that as the number of vehicles arriving at the reference point increases, the number of vehicles will start to deviate from the conventional model assumption until it reaches a point where it stays constant. This is the jam scenario case where vehicles start to backlog on the road, decreasing the inter distance between them as a result of decreasing their speed. This is also obvious from Figure 4.4 which shows how vehicles average speed and density are affected by the increase of their arrival rate.

53

350
Poisson mobility model New Mobility Model Simulation results

300 Number of vehicles within range (R)

250

200

150

100

50

0 0

0.5

1

1.5 2 2.5 Vehicle arriving rate ( vehicles/s)

3

3.5

4

Figure 4.3: Number of vehicles within the communication range of the transmitter.
1 Vehicle density and Normalized average speed 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 0.5 1 1.5 2 2.5 Vehicle arriving rate ( vehicles/s) 3 3.5 4
Vehicle density Normalized average speed

Figure 4.4: Vehicle density and their normalized average speed vs vehicle arriving rate.

4.5

Summary

In this chapter, we derived the communication range and the carrier sense range based on the physical wireless channel analysis and the propagation model that best characterize VANETs as conducted in Chapter 3. We also introduced a new mobility model in which

54

the relationship between vehicle density, speed and the follow-on distance rule is derived. The model is accurate in deriving the number of vehicles within the communication range as shown in the simulation results. These results will help in designing and analyzing all proposed algorithms and protocols.

55

Chapter 5 A New Broadcast Protocol For Vehicular Ad hoc Networks Safety Applications
5.1 Introduction

Broadcasting in Vehicular Ad hoc Networks (VANETs) is a major building block for discovery, routing and localization functions. As those wireless networks tend to grow in terms of number of vehicles within a certain geographic area, their applications that use broadcasting will face a challenge in managing the channel capacity to ensure a good performance in terms of throughput, fairness and broadcast coverage. If one vehicle is involved in an accident, it has to send a warning message to all surrounding vehicles to avoid a chain collision. The communication range is a critical parameter to enable distant drivers to react in a short time. If all vehicles act greedily by maximizing their range, the message will reach its destination in less number of hops. As a consequence more vehicles will contend at every point for using the same channel which may collapse due to increased collisions. On the other hand, a short transmission range will result in more hops and delay but reduces the

56

interfering traffic. By adapting the transmission range as a function of network density, delay, data rate and sending rate, vehicles can adjust their transmission power to reduce channel contention. In most cases, not all vehicles within a one hop range receive the message successfully due to hidden terminal problem. Therefore the message has to propagate in a multi hop fashion. If all vehicles try to rebroadcast the same message as in flooding, there will be more contention in using the channel and the message could be lost due to collisions. Moreover many of these rebroadcasts are redundant since they cover almost the same area. This is known as the broadcast storm problem. Prioritizing one vehicle over the other to rebroadcast the message is a problem that will be addressed in this chapter.

5.2

Related Work

Many solutions have been proposed to predict the maximum one hop range in mobile ad-hoc networks(MANETs) [61], [62] and [63]. While the authors in [61] found the optimal range from a pre-calculated scenario for a specific network, the authors in [62] proposed the average one hop distance without including the effect of the hidden terminal problem. There are also many proposed solutions to handle the broadcast storm problem which can be classified as either probability, priority or timer based solutions. In probability based solutions, each vehicle assigned a certain probability to rebroadcast the message based on a certain metric. In priority based techniques, vehicles give high priority to emergency messages and low priority to normal messages. This approach does not solve the broadcast storm problem but rather reduces the contention in using the channel. In timer based techniques, each vehicle will be assigned a time slot to either rebroadcast the message or not if it hears the message from farther vehicle than itself. This approach suffers from the long waiting time before the message is propagated to the next hop especially in sparse networks. The authors in [64] presented five schemes to alleviate the impact of the broadcast storm

57

problem by prohibiting some nodes from re-broadcasting and favoring others depending on their location and their knowledge of how many times the message has been broadcasted. The authors in [65] introduced three broadcast suppression techniques: weighted p-persistence, slotted 1-persistence and slotted p-persistence schemes. In weighted p-persistence scheme, the vehicle calculates its probability to rebroadcast or not based on its distance from the transmitter. While in slotted p-persistence scheme, the vehicle waits for a ceratin time before it rebroadcasts the message based on its calculated probability as in weighted ppersistence schemes. The waiting time depends on the inter distance from the transmitter to the receiver. The farthest vehicles will have shorter waiting times. In [66], the authors introduced an algorithm to favor one vehicle over the others in a certain range by reducing the time it should wait before contending to retransmit the message. A power control algorithm is introduced in [67] to reduce the contention between nodes in a single hop by limiting the maximum power assignment for each node. In [68], the authors introduced a probabilistic re-broadcasting scheme depending upon the surrounding traffic density called probabilistic inter-vehicle geocast (p-IVG). In this protocol, the vehicle waits a certain time depending only on the inter-distance between the transmitter and the receiver and selects a random number between [0,1]. If the selected number is less than the reciprocal of the vehicles density, the vehicle re-broadcasts the message when its timer is expired; otherwise it will drop the message. In [69], a new message dissemination protocol called Adaptive Traffic Beacon (ATB) is introduced for non safety applications. In [70], the authors introduce a distributed broadcast protocol that relies only on local topology information for handling broadcast messages in VANETs. They based their protocol on flooding that makes no assumptions about the underlying road topology. All previous schemes assume that vehicles use certain one hop broadcast range without taking into account the interference from the hidden terminal areas and did not include the network density in calculating the rebroadcast probability and the waiting time. This will decrease the message reception rate and increase the message travel time to reach distant

58

vehicles. In VANETs, the range has to change according to the network density where the need for small range in high density networks to reduce interference from the hidden terminals and long range in sparse networks to reduce link ruptures. Therefore, we present a model to find the recommended maximum one hop range and thus to minimize the channel contention and the impact of the hidden terminal problem. We also propose a distributed scheme to alleviate the impact of the broadcast storm problem taking into account the network density and the received signal strength in favoring one node over the others to rebroadcast the message. Including the network density in calculating the rebroadcast probability and the waiting time is the major contribution in this scheme. We will compare our proposed scheme with the weighted and slotted p-persistence schemes in [65], flooding and p-IVG in [68]. These protocols, except flooding, are the most relevant algorithms to our work since they are probability and time based protocols.

5.3

Maximum Range of a Broadcast Message

To find the recommended maximum range, we built a geometric model that minimizes the likelihood of a collision given that all vehicles are distributed according to a Poisson distribution with average density v =
i µ

vehicles/m/lane, where i is the vehicles' arriving

rate in the ith lane and µ is the vehicles' average speed as derived and discussed in Chapter 4. Vehicles use CSM A/CA protocol and send packets according to a Poisson distribution with average rate s (packets/sec). All packets are of the same length L Bits and need the same average time T =
L rd

seconds to transmit, where rd is the used data rate.

In VANETs, the Nakagami distribution is used to characterize the vehicular environment as discussed in Chapter 4. In this chapter, we use the worst case scenario where we assume a high density network. Therefore, we set the fading factor m = 1 since the LOS component of the received signal is weak. For Nakagami distribution with fading factor m = 1, it will reduce to a Rayleigh distribution. Assuming that all vehicles have the same transmitting

59

power ( that is the same communication range R meters), the carrier sense range is the same as communication range, and a vehicle will receive the transmitted signal successfully if the received power is higher than a certain threshold Pth . Therefore, vehicles within the range R of the transmitter have higher probability to receive the message and lower probability outside this range. If more than one transmission is initiated to a receiver within the same range then a collision will occur and the packet will be discarded. In Rayleigh model, the probability of the received signal power (Pr ) to be higher than a certain threshold Pth is P (Pr  Pth ) = e
-
Pth (4 )2 R2 Pt Gt Gr 2

,

(5.1)

where Pt , Gt , Gr , and  are the transmitted power, the transmitter antenna gain, the receiver antenna gain, and the wave length in meters respectively.

R

2R

R

I Nl=4

S

Interfering (Hidden Terminal) Area

Tagged Vehicle (Transmitter)

Interfering (Hidden Terminal) Area

Figure 5.1: Geometric model for the highway scenario. Figure 5.1 shows the geometric model in our approach which is built along a highway segment with Nl lanes. If the tagged vehicle S is using the channel in the current time slot, all vehicles within its range will defer from transmitting. All vehicles outside the range R but not far than 2R from the transmitter S will act as hidden terminals to the current transmission. If one of the hidden terminals (vehicle I ) starts transmitting during the transmission of S , it will cause the reception of some nodes in the range R to fail. Therefore the challenge is to 60

maximize the communication range R under a given degree of interference from the hidden terminals, which can be measured by the average number of interfering (hidden terminal) nodes E [It ] in the two hidden terminal areas shown in Figure 5.1. Since each vehicle is modeled as an independent Poisson process to transmit its messages with average sending rate s , therefore each vehicle will transmit with a probability of (1 - e-s 2T ) in the time interval [0, 2T ]. We used double the transmission period since unslotted CSM A needs both the current and the previous transmission periods to be quiet for successful reception from the recipient. Moreover not all vehicles within the range R receive the packet successfully because of the probabilistic propagation model that is used to characterize VANETs. Those vehicles will also act as hidden terminals. For the same reason, there are also some vehicles in the hidden terminal areas will receive the message successfully and defer from using the channel during the transmission period. Consequently, the average interfering transmissions from the hidden terminals can be calculated as (  E [It ] = 2 2v Nl R - v Nl
0 2R -
Pth (4 )2 2 y Pt Gt Gr 2

e

) ( ) dy 1 - e-s 2T ,

(5.2)

where Nl is the number of lanes on the road. Equation (5.2) can be solved using the normal distribution as ( ( ))  ( ) 2R E [It ] = 2 2v Nl R - v Nl C 2 erf 1 - e-s 2T , C where
 C=
Pt Gt Gr 2 2 Pth (4 )2

(5.3)

and erf (x) =

1 2

x
0

e- 2 dy .

y2

By setting the value of E [It ], we can use (5.3) to determine R under various values of s and v using Newton-Raphson optimization technique. We set E [It ] to be one which is a compromise choice between low interfering transmissions and large coverage area. Figure 5.2 shows the range R at different sending rates when E [It ] = 1 with v = 0.025 vehicles/m/lane. The values of other parameters are listed in Table 7.4. This is the maximum range R that could be used by all vehicles within the range to reduce the impact 61

800

700

Maximum R (meters)

600

500

400

300

200 0

2

4

6

Sending Rate  packets/s
s

8

10

12

14

16

18

20

Figure 5.2: The recommended maximum range R vs sending rate s for v = 0.025. of the hidden terminal problem. From (5.1), we derive another condition that has to be included in calculating the range R. This condition determines the coverage percentage, that is the percentage of vehicles within the transmission range (R) of the transmitter that receive the packet successfully. The coverage percentage (Pcov ) can be derived by dividing the number of vehicles that will receive the message successfully by the total number of vehicles within the transmitter's communication range R as in (5.4) and shown in Figure 5.3 for different ranges v Nl e- 2 C 2 dy  C 0 = 2 erf v N l R R R
y2

Pcov =

( ) R . C

(5.4)

1

Coverage Percentage

0.95 0.9 0.85 0.8 0.75 0.7 0.65 0 100 200 300 400 500 600 700 800 900 1000

Range (R) meters

Figure 5.3: Coverage Percentage (Pcov ) vs Range (R). From (5.3), it is clear that decreasing v and/or s will increase the recommended maximum range R. At the same time, increasing the range R will decrease the coverage percentage 62

as in (5.4). Therefore, the maximum range that derived from (5.3) has to be less than the range that guarantees certain coverage percentage derived from (5.4). While v is variable and depends on the traffic situation, vehicles can adjust only their transmission power Pt or their sending rate s according to the road density to ensure an acceptable coverage percentage. Vehicles can sense the network density from exchanged beacons, average speed or preprogrammed with fixed densities depending on the time of the day and the day of the week. In this model, vehicles share their sending rates, transmission powers and their sensed network densities within their exchanged status messages. An algorithm to synchronize s , v and Pt among vehhicles is left as future work, therefore in our simulation we used fixed values of theses parameters.

5.4

Broadcast Storm Mitigation Technique

There are three variables in the proposed scheme that are relevant and thus will be utilized to mitigate the broadcast storm problem in VANETs. The first is the maximum transmission power Pt that each vehicle can use to reduce the impact of the hidden terminal problem and achieve certain coverage percentage as derived in (5.4). The second is the use of the Received Signal Strength (RSS ) instead of the inter distance between the transmitter and the receiver in calculating the probability of retransmission. The third parameter is the vehicles density v that agreed upon from exchanged beacons. It is obvious that the more dense networks are, the smaller percentage of nodes is needed to participate in rebroadcasting the message. This results in decreasing the contention and the number of collisions. In this section, a contention-based scheme at the MAC layer, called Network Topology pPersistence scheme (NTPP) is proposed. The major contribution of NTPP is the involvement of network density in calculating the rebroadcast probability and the waiting time each vehicle will use to rebroadcast. Because each vehicle in NTPP has information about other vehicles within its range from exchanged beacons, then it can detect the farthest vehicle to

63

itself that can deliver the message with less delay and maximum possible additional coverage. When a vehicle transmits an emergency message, it includes the ID of the farthest vehicle possible based on its view of the network topology. Upon receiving the message, other vehicles that are located within the range of the transmitter and in the direction of interest calculate their rebroadcast probability Ptr as 1 Ptr = 2 [( min(RRSS , Rmax ) Rmax ) ( )] v + 1- , vmax

(5.5)

where RRSS is the calculated inter distance based on the average received signal strength from the transmitter to the receiver using (5.1), Rmax is the maximum range based on (5.3) used by vehicles for the sensed vehicle density v , vmax is the maximum vehicles density corresponds to the jammed traffic scenario. The rebroadcast probability Ptr increases as RRSS increases (or RSS decreases), therefore the farthest vehicle, which received the message successfully, will have higher probability to retransmit than nearby nodes. We include v in calculating Ptr , therefore vehicles in low dense networks have higher probability to retransmit and low probability in high traffic scenarios because of the need to suppress rebroadcasting. When a vehicle finds its ID in the received message, then it should rebroadcast it immediately, while other vehicles that are located within the range of the transmitter and in the direction of interest have to wait for certain time Tw as ( )( ) min(RRSS , Rmax ) v Tw = 1 - , Rmax vmax

(5.6)

where  = 2T +  is twice the packet's transmission time plus the propagation delay time  for the message to reach the range Rmax . This waiting time Tw is set to be proportional to RRSS . The higher RRSS , the smaller waiting time should be. The vehicle's density is also included in deriving Tw , such that vehicles have less waiting time in less dense networks to overcome the long delay time problem in sparse networks suffered by slotted p-persistence scheme in [65]. 64

The vehicle ceases rebroadcasting after hearing the same message from farther vehicle. The proposed scheme is summarized as follows: 1. Each message has a unique ID which consists of the originating and transmitting nodes' IDs. The message contains information about the position of the originating node, the distance that should travel and the message propagation direction. 2. When a vehicle receives a message it checks first if its ID is included as a potential re-transmitter. If yes it will rebroadcast the message immediately. Then the node waits the whole period  before it decides to rebroadcast again or discard the message if it hears it from other rebroadcasting vehicles farther than itself in the direction of interest. 3. If the vehicle's ID is not in the message, it calculates its rebroadcast probability Ptr and its waiting time Tw . While waiting, if the message was heard from other vehicles farther than itself, it will discard the message. 4. If the vehicle decides to rebroadcast according to its probability Ptr . The vehicle rebroadcasts the message when its Tw is expired. 5. If the vehicle decides not to rebroadcast the message, it waits the whole period  . When  expires, it discards the message if it was rebroadcasted. Otherwise it will rebroadcast the message with probability one to prevent the message from loss. In N T P P , each vehicle uses the collected information about other vehicles in the same hop to minimize the number of redundant rebroadcasts. Therefore, it is highly probable that only one vehicle which has the most additive coverage area rebroadcasts the message. If this vehicle exits from the road or is out of range due to acceleration, then the farthest vehicle in the same hop will have higher probability and less waiting time than the others. The message in this scheme will not die, each vehicle will buffer it even if it decides not to rebroadcast until it is rebroadcasted from farther vehicles.

65

Table 5.1: Value of parameters used in simulation
Parameter Modulation and Data rate Message size Packets rate s Vehicles density v Vehicles speed Transmission power Pt Received power threshold Pth Antennas heights ht = hr Antennas Gain Gt = Gr Propagation delay  Value BPSK, 3Mbps 500Bytes 10 25 cars/km/lane 70-120km/h 7.6543e-4 W 3.1632e-13 1.5 m 4 1 µs

5.5

Simulation Results

In our simulation, we used ns-2.33 [12] which has been extended by [71] to model VANETs. Our scenario models a bidirectional highway segment with 4000m in length and 4 lanes in each direction. The vehicles send their status messages periodically which are not rebroadcasted to the next hop as in the emergency message case. Therefore, the network density can be increased either by increasing the number of vehicles on the road while fixing the status packets rate or by increasing the status packets rate while fixing the number of vehicles on the road as we did in our simulation. The vehicle's speed ranges from 80 - 120 Km/h and follow a microscopic mobility model. We built our mobility model using MOVE [52] which is built on top of the open source micro-traffic simulator SUMO [53] that produces realistic vehicle movement traces that can be immediately used by ns-2. We ran each scenario for 100 seconds 5 times and take the average values. All configuration parameters are based on the DSRC standard [22] and listed in Table 5.1.

5.5.1

Status Message Scenario

In this scenario, all vehicles are configured to send their status messages periodically. A vehicle will receive the transmitted message successfully if the received signal strength is higher than Pth . All vehicles are configured with the same transmission power Pt which will vary according to the desired transmission range R.

66

Table 5.2: Values of max. analytical and used range (R) and the max. possible coverage percentage.
Packets rate s 2 4 6 8 10 Calculated R (m) 556 413 352 315 290 Used R (m) 550 400 350 300 250 Max Coverage % 0.86 0.92 0.94 0.96 0.97

We are interested in the coverage percentage at the specified range R. We select the range R based on the analytical model that is shown in Figure 5.2 for different sending rates and listed in Table 5.2. We expected the proposed scheme would make the effect of the hidden terminals negligible for the cases where the sending rates are less than or equal to the sending rate corresponds to the selected range R. We also expected the coverage percentage should be around the maximum analytical value shown in Figure 5.3 for the same used range R and listed in Table 5.2.
1 0.9

Coverage Percentage

0.8 0.7 0.6 0.5 0.4 0.3 0.2 1

R=550 R=400 R=350 R=300 R=250
2 3 4

Sending Rate s

5

6

7

8

9

10

Figure 5.4: Coverage percentage for different ranges (R). Figure 5.4, shows the coverage percentage versus the sending rate for different ranges. It is clear that the simulation results match with the analytical results where the coverage percentage follows the maximum analytical values derived from (5.4). This shows that our maximum range model is accurate in minimizing the interfering traffic and the effect of the 67

hidden terminal problem.

5.5.2

Emergency Message Scenario

We used the same setup as in the previous scenario except for the tagged vehicle (S), which will send an emergency message to all vehicles behind it. This message has to propagate from one hop to another until it reaches an intended distance of 2000m. We run the same experiment using the weighted p-persistence, slotted p-persistence, p-IVG, flooding and the proposed N T P P technique. Since the main goal of any dissemination technique is to reduce the time needed for a message to reach its intended users and reduce the channel waste time due to collisions and redundant rebroadcasts. Therefore, we are interested in the message travel time, the time the emergency message needed to reach the intended distance and the average number of retransmissions per hop until the message propagates to the next hop. Figure 5.5 shows the average number of retransmissions per hop versus the sending rate for different ranges R using NTPP. It is clear that the average number of retransmissions per hop is around one for the sending rates that are less than or equal to the sending rate corresponding to the used range R as listed in Table 5.2. This verifies that our model can reduce the effect of the hidden terminal problem significantly and the number of redundant rebroadcasts. Figures 5.6 and 5.7 show the time taken by the emergency message to reach the intended distance 2000m using slotted p-persistence [65], weighted p-persistence [65], p-IVG [68], flooding and NTPP techniques for low and high density networks respectively. Compared to other schemes in low density networks, it is clear that on average, the proposed NTPP scheme outperforms the slotted p-persistence, weighted p-persistence, p-IVG and flooding by 57%, 43%, 82% and 350% respectively. While in high density networks the proposed scheme reduces the message travel time by 34%, 78% and 48% on average compared to slotted p-persistence, weighted p-persistence and p-IVG respectively. While flooding failed to disseminate the message and so was not pictured in Figure 5.7. 68

20

Average No. of Retransmissions per Hop

18 16 14 12 10 8 6 4 2 0 1

R=550 R=400 R=350 R=300 R=250

2

3

4

Sending Rate s

5

6

7

8

9

10

Figure 5.5: Average number of retransmissions per hop for different ranges (R meters).
1.4 1.2 1

Time delay (sec)

NTPP Slotted P-Persistance Weighted P-Persistance p-IVG flooding

0.8 0.6 0.4 0.2 0 1

1.5

2

Sending Rate s

2.5

3

3.5

4

Figure 5.6: Message travel time in low dense network (R=550m).

5.6

Summary

In this chapter, we presented an analytical model to derive the recommended maximum one hop range that minimizes the collision's probability and the impact of the hidden terminal problem. The proposed model is simple but practical and accurate as proven in the simula-

69

0.5 0.45 0.4

NTPP Slotted P-Persistance Weighted P-Persistance p-IVG

Time delay (sec)

0.35 0.3 0.25 0.2 0.15 0.1 5

5.5

6

6.5

Sending Rate s

7

7.5

8

8.5

9

9.5

10

Figure 5.7: Message travel time in high dense network (R=250m). tion results. We introduced a new scheme, called Network Topology p-Persistence (NTPP), to alleviate the impact of the broadcast storm problem. NTPP is based on vehicles' knowledge of their neighbors in their range and traffic parameters. By using the recommended maximum range derived in the proposed model and the new NTPP scheme, we reduced the channel contention, redundant rebroadcasts and message travel time and increased the message reception rate compared to the existing schemes as shown in the simulation results.

70

Chapter 6 Performance Analysis and Enhancement of the DSRC for VANET's Safety Applications
In this chapter, an analytical model for the reliability of the Dedicated Short Range Communication (DSRC) control channel to handle safety applications in vehicular ad hoc networks (VANETs) is proposed. Specifically, the model enables the determination of the probability of receiving safety messages from all vehicles within the transmitter's range, and validates this model by simulation. The proposed model is built based on the new mobility model proposed in Chapter 4 that takes into account the vehicle's follow-on safety rule to accurately derive the relationship between the vehicle's speed and network density. Moreover, the model takes into consideration: 1. Impact of mobility on vehicle's density around the transmitter. 2. Impact of the transmitter's and receiver's speeds on the system's reliability. 3. Impact of channel fading since the communication range is modeled as random variable. 4. The hidden terminal problem and transmission collisions from neighboring vehicles. 71

It is shown that the current specifications of the DSRC may lead to severe performance degradation in dense and high mobility conditions. Therefore, an adaptive algorithm is introduced to increase the system's reliability in terms of the probability of packet's successful reception and time delay of emergency messages in a harsh vehicular environment.

6.1

Introduction

The research and application development in vehicular ad hoc networks (VANETs) have been driven by the DSRC technology or IEEE 802.11p [22] designed to help drivers to travel more safely and to reduce the number of fatalities due to road accidents. The IEEE 802.11p MAC uses Carrier Sense Multiple Access with Collision Avoidance (CSMA/CA) and some concepts from the Enhanced Distributed Channel Access (EDCA) [21]. In this technology, there are four access classes (ACs) with different Arbitration Inter Frame Space Numbers (AIFSN) to insure less waiting time for high priority packets as listed in Table 2.3. The DSRC is licensed at 5.9GHz with 75MHz spectrum which is divided into seven 10MHz channels and 5MHz guard band. The control channel (CCH ) will be used for safety applications while the other six channels, called service channels, will be used for infotainment or commercial applications to make this technology more cost effective. Vehicles will synchronize the switching between the CCH and one or more of the service channels (SCH ), hence safety related messages will not be missed or lost. The synchronization interval (SI ) contains a control channel interval (CCI ) followed by a service channel interval (SCI ) separated by a guard interval (GI ) as shown in Figure 6.1. Increasing the CCI interval will enhance the reliability of safety applications and challenge the coexistence of both safety and non-safety applications on the DSRC. VANET is a self-organizing network that works on both Inter-Vehicle Communication (IVC) and Vehicle to infrastructure communication. In this analysis, IVC is taken into consideration where vehicles will be equipped with sensors and GPS systems to collect in-

72

SI interval

CCI GI

SCI

Figure 6.1: The IEEE802.11p synchronization interval. formation about their position, speed, acceleration and direction to be broadcasted to all vehicles within their range. In IEEE 802.11p, vehicles will not send any acknowledgement for the broadcasted packets. Therefore, the transmitter could not detect the failure of the packet's reception and hence will not retransmit it. This is a serious problem in collision warning applications where all vehicles behind the accident have to receive the warning message successfully in a short time to avoid chain collisions. This problem motivates us to propose an analytical model for assessing the DSRC reliability and time delay taking into account the VANETs multipath fading channel, vehicles high mobility, hidden terminal problem and transmission collisions.

6.2

Related Work

In the literature, there are many studies on the performance of DSRC [22] which are categorized into three different groups. The first group is based on simulations and targeted only one parameter of the DSRC. The authors in [54] and [63] study the effects of radio propagation models in VANETs based on the probability of successful reception rate. While [72] focuses on how to control the load of periodic messages to ensure the successful reception of warning messages. The authors in [73] introduce a new method for selecting the data rate in VANETs based on a simulation setup. They compare the performance of different broadcast transmissions using different

73

data rates while adjusting the power used in each scenario to maintain a comparable level of channel interference. In [74], the authors analyze the DSRC by simulations in terms of the channel access time delay. They show that using 802.11p MAC will result in an unbounded delay and compare it with a self-organizing time division multiple access (STDMA) scheme which they prove that it is more suitable for VANETs' real time safety applications. In [75], the authors propose a framework for sharing the DSRC between vehicular safety and non-safety applications. By assuming uniform distribution of vehicles on the road, their simulations show that non-safety applications may have to be severely restricted such that safety applications are not compromised especially in high density networks. In the second group, analytical models have been proposed to study the DSRC or in general the IEEE 802.11 MAC protocol. While [76] and [77] analyze the EDCA, Bianchi in [78] analyzes the IEEE 802.11 for unicast communication. Although DSRC is based on IEEE 802.11 and EDCA, their analytical models for performance evaluation of unicast communications cannot be used for broadcast communication mode in IEEE 802.11p because no ACK is communicated. Therefore, the transmitter could not detect a collision from a successful transmission. The authors in [79] introduce a one dimensional Markov chain to calculate the delay and reception rate in VANETs but have not included the time delay in each stage due to busy channel. While in [80], the authors analyze the system using only the average delay for each access class and have not taken into account the back-off delay. In [81] and [82], the authors study the saturation performance of the broadcast scheme in VANETs taking into account the back-off counter consecutive freeze situation. They assume saturation conditions, stationary distribution without considering the impact of vehicles' mobility on the system performance. In [83], an analytical model for delivering safety messages within inter-vehicle communication (IV C ) is derived. They assume a perfect channel access and have not accounted for the hidden terminal problem, collision probability and vehicles' mobility. The authors in [84] study the performance of IEEE 802.11p based on the time delay of status packets by modeling each vehicle as an M/G/1 queue with an

74

infinite buffer without taking vehicles mobility into consideration. In the last group, the authors study the connectivity in VANETs, for example [42][44], [85] and [86]. Most of these studies are based on the assumption that nodes have a uniform stationary distribution in the network such as [43] and [44]. In [85], the authors present an analytical model for multi-hop connectivity assuming that vehicles positions are known by either simulation or observation. They assume the propagation of information is instantaneous with respect to vehicles movement. In [42], the authors derive a mobility model for VANETs considering the arrival of vehicles to a service area as a Poisson distribution and did not include the follow-on safety rule. While in [86], the authors derive the probability of no end-to-end connectivity between clusters of vehicles distributed uniformly on the road. They introduce a new opportunistic packet relaying protocol that switches between data muling and local routing with the help of vehicles on the other direction. In contrast to our mobility model introduced in Chapter 4, all of these models do not consider how the speed of transmitters and receivers affects the connectivity probability and the packet reception rates. In this chapter, we propose an analytical model for the analysis of broadcast services in the DSRC protocol, taking into account the high dynamics of vehicles, the hidden terminal problem, collision probability and non-saturation conditions. The new analysis is based on the new mobility model derived in Chapter 4 that takes into account the vehicle's followon safety rule to accurately derive the relationship between the vehicles' density and their speeds. The new mobility model considers how the speeds of transmitters and receivers affect the connectivity probability and the packet reception rates. The packet reception rate is derived, taking into account the inter distance between the transmitter and all potential receivers and their speeds. The proposed model uses a Markov chain approach, which includes the probability of busy channel in each state, to derive the probability of transmitting status packets and their time delay. Based on the analytical and simulation results, an adaptive and mobility aware algorithm is introduced to enhance VANETs performance.

75

6.3

System Model and Performance Parameters

In VANETs' safety applications, vehicles broadcast two types of messages: warning (event driven) and status messages. While warning messages usually contain safety related information, status messages are sent periodically to all vehicles within their range and contain vehicle's state information such as speed, acceleration, direction and position. Therefore, emergency messages will use AC3 since it has the highest priority as listed in Table 2.3 while status message will use AC1 . In our model, vehicles generate their status messages at a rate of s , which implies that the length of the synchronization interval is SI =
1 . s

We assume that all packets have the same

length L bits and the whole SI interval is dedicated to safety applications, that is CCI = SI . Each vehicle will randomly choose a slot within the SI interval to transmit its status packet, while emergency packets are sent only during emergency situations such as an accident or warning from hazardous or jam on the road ahead. Based on these assumptions, we analyze the DSRC protocol to find the smallest channel interval that maximizes the reliability of safety applications resulting in achieving high probability of successfully receiving a status message from each vehicle within this interval. It is assumed that all vehicles have the same transmitting power (Pt ) and each vehicle receives the signal successfully if the received power is higher than a certain threshold Pth . Since fading is a major characteristic of VANET's channel, the received signal power is random and therefore, the communication range is also a random variable. There are different parameters that affect the IEEE802.11p performance such as the communication range and the mobility model, which are derived in Chapter 4. These parameters will be used to derive the link availability and duration of connection between vehicles. The new mobility model also determines the population size of vehicles within the transmitter's range and the number of vehicles in the two interfering (hidden terminal) areas. The effect of the transmitters and receivers speed, the contention window and the carrier sense range on the packet successful reception rate is then derived. 76

Interfering Area

Interfering Area 2R S y

E vehicle/s

R

d1

x

R

d2
Tagged Vehicle

E vehicle/s

Figure 6.2: Simplified one dimensional communication model in highway scenario.

6.3.1

Link Availability Probability

Two vehicles can communicate only if they are within the communication range of each other. Therefore, the probability of successfully receiving a packet depends on the relative speed between the sender and the receiver, the packet transmission time and the transmitter's range R. Assume initially that the receiver is at an arbitrary distance from the transmitter but within the communication range at the beginning of the packet transmission. Let d1 be the distance of the receiver from the sender, that is moving in the same direction as the sender as shown in Figure 6.2. Then the probability density function of this distance is fd1 (x) =
1 . 2R

Since the status packet transmission time Tt is very short, assume that the

vehicle's speed will not change during this time period. If the receiver is at distance d1 from the sender, then its new location from the sender at the end of the packet transmission is dn = d1 + (vx - vt )Tt , where vt and vx are the transmitter's and receiver's speeds respectively. Therefore, the probability Pl that a vehicle, which is traveling in the same direction, will receive the packet successfully is when its dn is still within the transmitter's range as ) ( Pl = P -R  d1 + (vx - vt )Tt  R .

(6.1)

From (6.1), if the receiver's speed vx  vt , then vehicles located at distances less than -R at the time of transmission are not considered. Therefore, the probability Pl1 that a vehicle traveling at a higher speed than the transmitter will receive the packet successfully

77

is given by

) ( Pl1 (vt ) = P -R  d1  R - (vx - vt )Tt  v  R-(v -v )T 1 = vtmax -R x t t 21 dx dvx R vmax -vt = 1-
vmax -vt Tt . 4R

(6.2)

On the other hand, if the receiver's speed vx < vt , then vehicles located at distances greater than R at the time of transmission are not considered. Therefore, the probability Pl2 that a vehicle traveling in lower speed than the transmitter will receive the packet successfully is given by ( ) Pl2 (vt ) = P -R + (vx - vt )Tt  d1  R  vt  R 1 1 = vmin dx dvx -R+(vx -vt )Tt 2R vt -vmin = 1-
vt -vmin Tt . 4R

(6.3)

Since a vehicle traveling at a speed lower than the transmitting vehicle's speed with probability  =
vt -vmin , vmax -vmin

the probability Pl (vt ) that a vehicle traveling in the same direction

as the transmitting vehicle will receive the packet successfully is given by

Pl (vt ) = Pl1 (vt )(1 -  ) + Pl2 (vt ).

(6.4)

Integrating (6.4) over the range vt  [vmin , vmax ] yields the probability of receiving a packet successfully due to mobility Pl as Pl = 1 - vmax - vmin Tt . 8R

(6.5)

6.3.2

Back-off Process and Contention Window

A model for the back-off counter process of the IEEE 802.11p for single access class is constructed as shown in Figure 6.3. If a vehicle has a status packet, it will wait initially for a period of AIF S = SIF S + AIF SN ×  before it can broadcast the packet, where AIF S is the Arbitration Inter Frame Space for status packet's access class, AIF SN is the

78

p/Ws

(1-p)

0

1-p

1

1-p

...

1-p Ws-2

1-p Ws-1 p

broadcast

p

p

Figure 6.3: Emergency and status packets Markov chain. Arbitration Inter Frame Space number associated with this class as listed in Table 2.3 and  = 13µs is the length of the time slot [22]. If the channel is sensed busy (with probability p) during the AIF S time, the access class (AC ) will choose a contention window (Wo ) uniformly and randomly from [0, ..., Ws - 1] as a back-off counter, where Ws is the minimum contention window associated with this class. At any time slot during the back-off process with probability (1 - p), the AC decrements its back-off counter if it senses an idle channel, otherwise it freezes the counter and waits for the whole period of the ongoing transmission (Tt = L/rd + AIF S +  ) until the channel is idle again before decrementing its counter, where p is the conditional busy channel probability seen by a packet about to be transmitted and independent from any other vehicle,  is the propagation delay and rd is the data rate. Once the back-off counter reaches the zero state, the AC broadcasts the packet. There will be no subsequent retransmissions if the packet is collided and hence the packet is lost. To find the probability s that a vehicle transmits a status packet in a randomly selected slot, we have to solve the Markov chain in Figure 6.3. We first define b(t)  [0, ..., Ws - 1] as the random process for the status packets queue in each vehicle, where t is a discrete and integer time that decrements at the beginning of each time slot. Second, we define k  [0, Ws - 1] as the back-off counter value and bk = lim P {b(t) = k } as the stationary
t

distribution of the Markov chain. Therefore, we can solve the discrete Markov chain as Ws - k p b0 Ws 1 - p 79

bk =

, 1  k  (Ws - 1).

(6.6)

By using (6.6) and the normalized condition 1 =

W s - 1
k=0

bk , we can solve for b0 as follows

b0 =

2(1 - p) . 2 - 3p + pWs

(6.7)

To derive the probability s that a vehicle transmits an emergency packet in a randomly selected slot: First the vehicle has to have a status packet ready to transmit with probability (s ). Second, it will transmit this packet, with probability of (1 - p), only when the back-off counter reaches zero state. Therefore, the probability s can be derived as 2(1 - p)2 (s ) , 2 + pWs - 3p

s =

(6.8)

If at least one vehicle within the carrier sense range is transmitting a packet in the same time slot when the channel is sensed busy, p can be expressed as
  p = 1 - (1 - s )k P2LCS (k ) k=0   2i R k  (µ  )

= 1-

(1 - s ) ,

k

= 1-e

k=0 2R  s -µ  

k!

e

i  -µ  

2 R

(6.9)

where P2LCS (k ) is Equation (4.26) which is the probability of having k vehicles within the carrier sense range. The Newton-Raphson method is used to solve (6.8) and (6.9) since the system has a unique solution in the range of p  [0, 1] as shown in the simulation section. The average time delay E [Tss ] for a status packet to be transmitted from the time it was ready at the MAC layer can be derived from the Markov chain in Figure 6.3 as

E [Tss ] = Tsq + E [Tsf ] + Tt ,
L rd

(6.10)

where Tsf is the time delay due to back-off process, Tt =

+ AIF S[AC 1] +  is the packet

transmission time, and Tsq is the queuing delay, which is negligible in this case, since a 80

vehicle will produce one status packet in every SI interval and if a new packet is generated it will replace the old one. Therefore, E [Tss ] = = W s - 1
i=0 p Ws

i-1 + Tt .

k=0 (pTt )

+ Tt

p2 Tt (Ws -1) 2

(6.11)

6.3.3

Probability of Successful Reception

For successful reception by another vehicle located within the tagged vehicle's range R, it is imperative that no vehicle within its carrier sense range (2E [LCS ]) (or within the maximum 4R if E [LCS ] > 2R) will transmit in the same time slot in which the tagged vehicle is transmitting. At the same time, vehicles within the interfering areas, which is at maximum equal to 2(2R -E [LCS ]) if E [LCS ] < 2R, should not transmit during the vulnerable interval of un-slotted CSMA, which equals two transmission periods weighted by the time slot Tv =
2Tt . 

The transmitted packet has also to be error free and the received signal strength has to be higher than the threshold Pth which have been accounted for in the derivation of the average communication and carrier sense ranges in (4.5) and (4.7), respectively. Moreover the vehicle has to stay within the range of the transmitting vehicle for the whole communication period. Putting all these conditions together, the probability of successful reception Ps that a vehicle within the communication range of the tagged vehicle receive the status packet successfully can be written as ( Ps = Pl ·
  k=0

) ( (1 - s )k Pdc (k ) ·

  k=0

)Tv (1 - s )k Pdh (k ) , (6.12)

( ) ( ) where dc = 2 · min E [LCS ], 2R is the contention area and dh = 2 · max 2R - E [LCS ], 0 is the hidden terminal area and can be calculated from (4.24). Therefore, Ps can be simplified as Ps =   2R   s  Pl · e-(1+Tv (2  -1)) µ   ,
2R   Pl · e-2 µ s ,

 > 0.5   0.5


(6.13)

81

This probability expresses the reliability of the designed system. The higher the success rate, the more vehicles will receive the emergency and status packets successfully which will increase the drivers' awareness of potential dangers on the road ahead.

6.4

Emergency Time delay

In this section, the case when a vehicle encounters an emergency situation such as an accident, lane change or slowing down below a certain threshold speed is analyzed. The vehicle that is involved in an emergency situation will send an emergency packet to all vehicles behind it who will select another vehicle as a relay node to rebroadcast the message to its neighbors. The emergency message continues to propagate until it reaches a certain distance D defined within the message itself. The vehicle uses the high priority access class (AC3 ) to send the emergency message after sensing an idle channel for an AIF SN ×  seconds, where AIF SN = 2 for this class as listed in Table 2.3. If the channel is sensed busy, the access class selects a contention window from the range [0, We ], where We = 3 in this case, and starts decrementing this counter as in the Markov chain in Figure 6.3. Therefore, the probability e that the emergency message will be sent can be derived by analyzing the Markov chain as in (6.8) except changing Ws by We as 2(1 - p)2 . e = 2 + pWe - 3p

(6.14)

The average time delay E [Tse ] for the emergency packet to be transmitted from the time it was ready at the MAC layer can also be derived as in (6.11) as We -1
i=0 p2 p We

E [Tse ] = =

i-1 + Tt .

k=0 (pTt )

+ Tt

Tt (We -1) 2

(6.15)

Once the vehicles, that are located within the transmitter's range, receive the emergency message, they have to rebroadcast the message to the next hop. The algorithm of selecting 82

the best relay vehicle is based on the NTPP algorithm proposed in Chapter 5 and published in [87]. In NTPP, vehicles calculate their probability of retransmitting the message and their waiting time based on their distance from the transmitter and the vehicles density. The farthest vehicle from the transmitter will have higher retransmitting probability Ptr and less waiting time Tw as 1 Ptr (d) = 2 [( ) ( )] d /µ , + 1- Nl /10 R

(6.16)

( )( ) d /µ Tw (d) = 1 - (2Tt +  ), Nl /10 R

(6.17)

where d is the inter distance between the transmitter and the potential relay vehicle (based on the received signal strength), Nl is the number of lanes on the road, /µ is the current vehicle density and Nl /10 is the maximum vehicle density, that is, jam scenario. To derive the total travel time for the emergency message to reach the distance D, it is required to find the location of the farthest relay vehicle to the transmitter that received the message successfully and the time it waits before it retransmits the message to the next hop. Assuming that the relay vehicle is located at distance d from the transmitter as in Figure 6.4, then the probability Prec that this relay vehicle will receive the message successfully (assuming that the message is transmitted with probability e ), can be derived in two cases: First when 0  d  Lcs - R, in this case the relay vehicle would receive the message successfully when all vehicles within the range [d - Lcs , d + R] does not use the channel in the same time slot as the transmitter. The second case is when Lcs - R < d  R, in this case, vehicles within the range of [d - Lcs , Lcs ] should not use the channel in the same time slot as the transmitter and the vehicles within the range [Lcs , d + R] should not use the channel for the vulnerable period Tv . Therefore, Prec can be derived in the same way as in

83

transmitter

relay

Figure 6.4: Relay vehicle distance model. (6.13) as    (1+  )s  Pl · e · e- R µ , ( ) Prec (d) =  R R   -µ 2  -d+(d+R-  )Tv s     Pl · e · e , 0 < d  Lcs - R Lcs - R < d  R.

(6.18)

It is obvious that the farther the relay vehicle is, the less number of hops the emergency message will travel and has less travel time delay. But as d increases, the relay vehicle is more vulnerable to the hidden terminal problem especially in high density scenarios. Therefore, a condition of receiving the emergency message with probability Prec (d)  90% is applied to find the average inter distance d of the relay vehicle from the transmitter. Since this relay vehicle has a retransmission probability of Ptr (d), its average waiting time till it transmits The average number of hops the emergency message will   . Therefore, the average emergency message travel to reach its intended distance D is D d the emergency message is travel time to reach a distance D is D = d  ( Tw (d) E [Tse ] + Ptr (d) ) . (6.19)
Tw (d) . Ptr (d)

Ttravel

6.5

Adaptive and Mobility Based Algorithm (AMBA) for Enhancing VANETs' Performance

From the analysis above, it can be seen that there are many conflicting parameters that affect the system's reliability and its success rate. Keeping these parameters with fixed values, as specified in the standard [22], will result in undesired performance, especially in a harsh

84

vehicular environment where vehicles are moving in a very high speed and their density on the road is changing very frequently. That is, in a matter of seconds, the vehicle density could change from light density to the jam scenario. Therefore, vehicles have to change their sending rate (s ), communication range (R) or (transmission power), carrier sense range (LCS ) and/or their minimum contention window size (Ws ) based on the situation on the road in order to increase the success rate and VANETs reliability. Therefore, a new adaptive and mobility based algorithm (AMBA) in which vehicles change their parameters according to their density and speed on the road, pertaining to the following assumptions, is proposed: 1. The vehicles know their current average speed (Vc ) and their maximum allowed speed Vmax on the road. 2. The maximum communication range (or the maximum transmission power) is set to Rmax and the minimum communication range is set to Rmin which is used in the jam scenario. 3. The carrier sense parameter (), in Equation (4.6), can take three values   [1, 0.5, 0.25]. 4. The vehicles status packet sending rate can take the values in the range of [1 - 10]. 5. The minimum contention window size Ws can take on values in the range [15 - 1023] with a step size of 16. 6. The current used vehicle's average speed, range, carrier sense parameter, packet sending rate and the minimum contention window are denoted as Vc , Rc , c , sc , Wsc , respectively. Vehicles will execute the AMBA algorithm every Talg seconds, where they sense the vehicle's density from their current average speed and compare it with the maximum speed Vmax . The pseudocode of the AMBA algorithm is shown as Algorithm 1. The smaller the current vehicle's average speed within the previous time period Talg , the higher the vehicle 85

density will be around that vehicle based on the proposed mobility model in Chapter 4. The algorithm divides the range (Rmax - Rmin ) into ten steps. Each time, the vehicle speed is dropped by a tenth of its maximum speed Vmax , it will reduce its range and set the other parameters accordingly. The vehicle will calculate its delay (Tb ) from the time it was ready to transmit its status packet until the time the packet is transmitted. If the new value of Tb is higher than the old one by  = 10%, the vehicle will increase its minimum contention window size Wsc ; otherwise it will decrease it or keep it the same. The carrier sense range is also set according to the sensed density. When the vehicle's density is high, the carrier sense range is decreased in order to decrease the waiting time for each vehicle to send its status message. Although decreasing the carrier sense range will increase the hidden terminal area, the algorithm deals with this problem by decreasing the communication range. Therefore, the AMBA algorithm allows more vehicles to send their status messages within the synchronization interval with high successful reception rate.

6.6

Model Validation and Simulation

In this section, the DSRC performance will be analyzed based on the probability of successful reception derived in (6.13). All vehicles send their status messages except for one vehicle that sends an emergency message in which the time it takes to propagate to a certain distance 3000 meters is of interest. It is assumed that all vehicles are synchronized to the control channel interval all the time and the generation time of each status packet is uniformly distributed over that interval. To validate the model, we use ns2 [12] with realistic mobility models generated by MOVE [52], which is built on top of the micro-traffic simulator SUMO [53] that has the most realistic mobility traces for VANETs [47]. The simulation setup is a one directional highway segment of 4000m in length with 4 lanes. The vehicles' speed ranges from 80 - 120km/h, which is typical for Ontario highways.

86

The Nakagami-m propagation model is used, which has two distance dependent parameters, the fading factor m and the average power . The authors in [38] performed a maximum likelihood estimation of m and  for vehicular highway scenario. They found that  decreases as the distance to the receiver increases as expected from the average power in the deterministic models, that is by d-2 . On the other hand, fading parameter m = 3 is selected for short inter distance between the transmitter and the receiver (d  50), since line of sight Algorithm 1 Adaptive and Mobile Based Algorithm (AMBA) to set VANETs parameters according to the vehicles density on the road. Initial setup Rc  Rmax c  0.25 sc  10 Wsc  15 for Every Talg seconds do if Vc < Vmax then Vc i   Vmax · 10 /* i represents a step from 1 to 10 in which the current speed falls in compared to the max. speed */ -Rmin Rc  Rmin + i · Rmax10 /* use a new range based on the step i */ sc  max(i, 1) /* use a new sending rate based on the step i */ if i  3 then c  1 /* in high density, LCS = R */ else if i  7 then c  0.5 /* in medium density, R  LCS  2R */ else c  0.25 /* in low density, LCS  2R */ end if end if if Tbnew > (1 +  ) · Tbold then Wsc  min(Wsc + 16, 127) /* if the time delay increases, i.e. more contention, increase Ws */ else if Tbnew < (1 -  ) · Tbold then Wsc  max(Wsc - 16, 15) /* if the time delay decreases, i.e. less contention, decrease Ws */ end if end if end if end for

87

Table 6.1: Value of parameters used in simulation Parameter Value Modulation and Data rate BPSK , 3 Mbps Message and Header sizes 512 , 64 Bytes Status packets rate s 10 packets/s vehicle's speed 80-120Km/h vehicle's arriving rate  1 vehicle/s Exponent factor  2.00 Communication range R 300 m Transmission power Pt (300m) 20 mW Emergency Min. Contention Window We 3 Status Min. Contention Window Ws 15 Received power threshold Pth 3.162e-13 W Carrier sense power percentage  0.5 Noise-floor 1.26e-14 W Ttx & Trx antennas heights 1.5 m Ttx & Trx antennas Gain Gt = Gr 1 DIFS 64 µ s SIFS 2 slot time Slot time  13 µ s Propagation delay  1µs Percentage of drivers that follow safety rule  80% Number of lanes Nl 4 lanes Talg 10s conditions is expected, then decrease it to m = 1.5 for medium distances (50 < d  100) and make it as Rayleigh distributed, i.e., m = 1 for longer distances.  is set in each interval to be the average power calculated from a free space propagation model; hence receivers located within 100m of the transmitter will receive the signal with Rician distribution, while others will have Rayleigh distribution. Since the receiver in ns2 will receive the signal if its power is higher than the threshold Pth , the transmitting power is set such that the receiving power at the communication range R is the threshold Pth as per (4.5), and the carrier sense range E [LCS ] is as in (4.7). Each simulation is performed for a period of 300 seconds of real time. Table 7.4 lists the simulation parameters used unless a change is mentioned explicitly. The following four metrics are defined to evaluate the accuracy of the proposed model and reliability of the DSRC protocol in VANETs. First: the effective communication range,

88

which is the range in which most vehicles (95%) that are located around the transmitter will receive the transmitted message successfully and compare it with the communication range derived from (4.5). Second: The success rate, which is the number of vehicles that received the transmitted packet successfully divided by the total number of vehicles that are within the range of the transmitter and compare it with (6.13). Third: the average time delay for a vehicle to send its status message and compare it with the time delay derived in (6.11). Fourth: the system reliability, which is the number of vehicles that managed to send their status message within the synchronization interval (SI ) and received successfully from other vehicles within the transmitted range divided by the total number of vehicles within the range. The results shown in Figs. 6.5 - 6.8 are based on the vehicle density and average speed corresponding to the density extracted from Figure 4.4. Specifically, Figs. 6.5, 6.6, 6.7 and 6.8 show respectively the effective communication range, the success rate, status packet delay and the reliability versus the vehicle density for different status packets generation rates. It is obvious that as the vehicle density increases, the effective range and success rate will decrease. At the same time the status packet delay will increase resulting in decreasing the system reliability since the number of vehicles that have the chance to send their status messages will decrease. This means that not all vehicles get the chance to access the channel and send their status packets. To improve the system reliability, the status packet generation rate is reduced from 10 to 5 and then 2 packets/s. This improves the system reliability and success rate but it is still below the threshold of 95% especially when the vehicle density is high. In order to meet this threshold for any vehicle density, vehicles have to reduce their communication range based on Figure 6.5. Figs. 6.9, 6.10, 6.11 and 6.12 show respectively the effective communication range, the success rate, status packet delay and the reliability versus the vehicle density for different carrier sense ranges. The carrier sense range is increased by decreasing the carrier sense power or the parameter  in Equation 4.6. By decreasing  from 1 to 0.25, the carrier sense

89

350  =2 packets/s
s s

300

 =5 packets/s s=10 packets/s

Effective communication Range R(m)

250

200

150

100

50

0

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.5: Effective communication range versus vehicle density when the success rate is set at 95% for different status packet sending rates.
1

0.9

0.8

Success Rate

0.7

0.6  =2 packets/s
s

0.5

s=5 packets/s 0.4  =10 packets/s
s s

 =2 packets/s, (simu) 0.3 s=5 packets/s, (simu) s=10 packets/s, (simu) 0.2 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4

Vehicle density (vehicles/m)

Figure 6.6: The successful rate versus vehicle density for different status packet sending rates. range doubles that of the communication range. It is evident that increasing the carrier sense range will increase the contention region and decrease the hidden terminal region. Therefore, increasing the carrier sense range will increase the success rate and the system reliability for fixed vehicle density as shown in Figures 6.10 and 6.12, respectively. As a 90

9.5

x 10

-4

 =2 packets/s
s s s s s s

 =5 packets/s 9  =10 packets/s  =2 packets/s, (simu)  =5 packets/s, (simu)  =10 packets/s, (simu)

Status Packets Time Delay

8.5

8

7.5

7

6.5

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.7: Status packets time delay versus vehicle density for different status packet sending rates.
1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 s=2 packets/s, (simu)  =5 packets/s, (simu)
s

Reliability

s=10 packets/s, (simu) 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4

Vehicle density (vehicles/m)

Figure 6.8: System's reliability versus vehicle density for different status packet sending rates. consequence the effective communication range will increase as shown in Figure 6.9. At the same time, vehicles will take longer time to access the channel as shown in Figure 6.11 due to the increase in the number of vehicles contending for the channel. As a result, the number of vehicles that have the chance to send their status messages will decrease and can

91

350 =0.25 =0.5 =1

Effective communication Range R(m)

300

250

200

150

100

50

0

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.9: Effective communication range versus vehicle density when the success rate is set 95% for different carrier sense ranges.
1 0.9 0.8 0.7

Success Rate

0.6 0.5 0.4 0.3 0.2 0.1 0

=0.25 =0.5 =1 =0.25, (simu) =0.5, (simu) =1, (simu)

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.10: The successful rate versus vehicle density for different carrier sense ranges. be observed from the difference between Figs. 6.10 and 6.12. To find the impact of the minimum contention window size (Ws ) on VANETs, Ws is increased from 15 to 1023. The success rate, status packet delay and the reliability for different vehicle densities are plotted in Figs. 6.13, 6.14 and 6.15, respectively. It is shown that increasing the minimum contention window will decrease the probability of packet 92

10

x 10

-4

9.5

Status Packets Time Delay

9

=0.25 =0.5 =1 =0.25, (simu) =0.5, (simu) =1, (simu)

8.5

8

7.5

7

6.5

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.11: Status packets time delay versus vehicle density for different carrier sense ranges.

1 0.9 0.8 0.7 0.6 Reliability 0.5 0.4 0.3 0.2 0.1 0 =0.25, (simu) =0.5, (simu) =1, (simu)

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.12: System's reliability versus vehicle density for different carrier sense ranges. collisions between vehicles, which is obvious from Fig 6.13, since the successful rate increases by the increase of Ws . It is also shown that there is an optimal value of Ws which gives the maximum success rate since increasing it would not further result in much increase in the success rate. At the same time, the status packet delay will increase dramatically by

93

1

0.9

0.8

Success rate

0.7

0.6

0.5 Density=0.1 vehicles/m Density=0.2 vehicles/m Density=0.4 vehicles/m Density=0.1 vehicles/m (simu) Density=0.4 vehicles/m (simu) Density=0.40 vehicles/m (simu) 0 200 400 600 800 1000 1200

0.4

0.3

0.2

Backoff contention window size

Figure 6.13: The successful rate versus contention window size for different vehicle densities.

4.5

x 10

-3

4

Status Packets Time Delay

3.5

3

2.5

2 Density=0.1 vehicles/m Density=0.2 vehicles/m Density=0.4 vehicles/m Density=0.1 vehicles/m (simu) Density=0.4 vehicles/m (simu) Density=0.40 vehicles/m (simu) 0 200 400 600 800 1000 1200

1.5

1

0.5

Backoff contention window size

Figure 6.14: Status packets time delay versus contention window size for different vehicle densities. increasing Ws especially when the vehicle density is high. This will result in decreasing the system reliability since not many vehicles might have the chance to send their status messages as shown in Figure 6.15. To evaluate the effect of the AMBA algorithm on VANETs reliability, the main simulation 94

0.8

0.7

0.6

0.5 Reliability

0.4

Density=0.1 vehicles/m, (simu) Density=0.2 vehicles/m, (simu) Density=0.4 vehicles/m, (simu)

0.3

0.2

0.1

0

0

200

400

600

800

1000

1200

Backoff contention window size

Figure 6.15: System's reliability versus contention window size for different vehicle densities.

parameters as in Table 7.4 are applied and let one vehicle send an emergency packet which should propagate for a distance of 3000 meters behind the transmitter. This emergency message will be rebroadcasted in every hop based on the N T P P algorithm described in 5. Figs. 6.16 and 6.17 show respectively the time delay until the emergency message reaches the intended distance and the percentage of vehicles that received it successfully with and without using the AMBA algorithm. It can be seen that the time needed for the emergency message to reach the intended distance increases as the vehicle density increases due to the increase in channel contention and collisions. Adapting the AMBA algorithm results in increasing the emergency time delay even more and this is because vehicles would decrease their communication range as the vehicle density increases. It is also clear that the simulated time delay is close to the theoretical value derived from (6.19). On the other hand, adapting the new algorithm increases the system's success rate dramatically especially in a high density scenario as shown in Fig 6.17. This means that more vehicles will be informed of the emergency situation on the road ahead even though it arrives late but within tolerable delay as defined in [88].

95

0.16 without Algorithm -simu with Algorithm -simu Equation(39)

0.14

Emergency Packets Travel Time (sec)

0.12

0.1

0.08

0.06

0.04

0.02

0

0

0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicle density (vehicles/m)

Figure 6.16: Emergency packet travel time versus vehicle's density.
1 0.9 0.8 0.7

Success Rate

0.6 0.5 0.4 0.3 0.2 0.1 0 0.05 without Algorithm with Algorithm 0.1 0.15 0.2 0.25 0.3 0.35 0.4

Vehicle desnsity (vehicles/m)

Figure 6.17: Percentage of vehicles within the distance (3000m) that received the emergency message successfully.

6.7

Summary

In this chapter, an analytical model is presented to analyze the reliability of the IEEE 802.11p in VANETs safety and warning applications. The analysis is based on a new mobility model in which the relationship between vehicles density, speed and the follow-on distance rule is 96

derived. In the analysis, several factors have been considered, such as the impact of mobility on the link availability between the transmitter and the receiver, the distribution of vehicles on the road and the average number of vehicles within the range of the transmitter. The proposed model is built on the fact that vehicles are broadcasting their status messages within the synchronization interval and model each vehicle as one-dimensional Markov chain including the channel busy probability in every state. It is shown analytically and by simulation that the effective maximum communication range that can be used in certain conditions to achieve certain successful rate. It is shown from the analytical and simulation results that the current DSRC specifications may lead to undesirable performance under harsh vehicular environments. Therefore, a new adaptive algorithm, Adaptive and Mobility Based Algorithm (AMBA), is introduced to enhance VANET's reliability. By using the AMBA algorithm, vehicles are able to estimate the vehicle density and change their transmission parameters accordingly based on their current average speed to enhance VANETs' performance. The simulation results, which coincide with the analytical results, show that the proposed model is quite accurate in calculating the system reliability.

97

Chapter 7 Distributed Multichannel and Mobility Aware Cluster-based MAC Protocol for Vehicular Ad-hoc Networks (VANET)
Since vehicular safety applications have strict requirements on reliability and low latency, a distributed multichannel and mobility aware cluster-based (DMCMAC) medium access control protocol is proposed. In DMCMAC, cluster heads are elected based on their relative speed and stability on the road with low overhead since all clustering information are embedded in the control channel's safety messages. DMCMAC is adaptable to drivers' behavior on the road and has a learning mechanism for predicting the future speed and position of all cluster members using fuzzy logic inference system. By using OFDMA, each cluster will use a set of subcarriers that are different from the neighboring clusters to eliminate the hidden terminal problem. Increasing the system's reliability, reducing the time delay for vehicular safety applications and efficiently clustering vehicles in highly dynamic and dense networks in a distributed manner are the main contributions of the proposed MAC protocol. The reliability and connectivity of DMCMAC are analyzed in terms of the average cluster size, communication range within the cluster and between cluster heads, and the life time of a path. Simulation results show that the proposed protocol can support traffic safety and increase VANETs' efficiency, reliability and stability of the cluster topology by increasing

98

the cluster head's lifetime and the dwell time of its members.

7.1

Introduction and Related Work

Most of vehicular safety applications being proposed in the literature rely on the IEEE 802.11p which uses the Distributed Coordination Function (DCF) as its MAC protocol. Due to vehicles' high mobility, vehicular ad hoc networks (VANETs) suffer from the rapid network topology change, limited redundancy, frequent link ruptures and variable vehicles' density which results in variable network connectivity. In Chapter 6, we have studied the IEEE 802.11p protocol extensively and showed that this protocol has problems in predictability, fairness, low throughput and high collision rate especially in high density networks, the results are published in [89]. Due to these problems, many of the proposed solutions are based on Time Division Multiple Access (TDMA). The authors in [74] and [90] proposed a self-organizing time division multiple access (STDMA) MAC protocol. However, in TDMA a limited number of vehicles can be handled with strict synchronization and large overhead. The authors in [91], [92] and [93] proposed space division multiple access (SDMA) schemes where the road is divided into small cells. For each cell they assigned a time slot, frequency band or a code for the vehicle in that cell to use. These schemes have poor efficiency since most of the cells are empty and they suffer from the location error problem. Many researchers such as [94]- [100], have proposed cluster-based multi-channel medium access control (MAC) protocols to improve the performance and reliability of VANETs. The authors in [100], proposed a clustering scheme where cluster heads (CH) have a main role of providing a TDMA schedule to their members. In [97], the authors proposed a clustering based MAC multichannel protocol (CMCP) where each node is armed by two transceivers which they assume that they can operate simultaneously on different channels. Inside the cluster, the cluster head organizes the channel access between member nodes by using TDMA using one of its transceivers with different CDMA code. Another transceiver is used to communicate with neighboring cluster heads by using the DCF of IEEE 802.11 on 99

a different channel. This system has a very high cost and needs very strict synchronization between all nodes. Moreover, their cluster head selection criteria is time and size based. The node that sends an invite-to-join message first and has more cluster members will be selected as a cluster head. This scheme results in high frequent network topology change since vehicles move in and out of the cluster boundary very frequently. Therefore, CMCP is more appropriate for a network with less erratic and more static users. A mobility based clustering scheme (MPBC) is proposed in [98]. MPBC based its cluster head selection criteria on the Doppler shifts associated from the received hello packets. A mobility based clustering scheme, called (APROVE), based on Affinity Propagation algorithm is proposed in [99]. In APROVE vehicles send messages to one another describing the current affinity that one vehicle has for choosing another vehicle as its exemplar. Upon the network convergence, the cluster head is selected based on the inter vehicle distances. The vehicle that has the minimum inter distance, that is the closest to its neighbors, will be selected as a cluster head. Although this scheme integrates mobility in its cluster head selection criteria, it needs very long time for a network to converge until all vehicles exchange their affinity messages. Moreover, the cluster head election process is invoked frequently when a predefined timer is expired which results in large overhead and low throughput. A dedicated multichannel MAC protocol with adaptive broadcasting was proposed in [101] which segments the control channel interval into two parts. While one part is contention-free with adaptive broadcasting frame, the other part is contention-based reservation period. This protocol has poor channel utilization since vehicles still contend for using the channel resources. A cooperative asynchronous multichannel MAC protocol (CAM-MAC) is proposed in [102] where vehicles help each other to select a free channel for data transmission. Since this protocol uses a revised four-way handshake for interaction, its channel utilization is very low. Many token ring protocols have been proposed for Intelligent Transportation systems (ITS) such as [103] due to their bandwidth reservation efficiency and bounded time delay. The Wireless token ring protocol (WTRP) [103] is based on a single communication channel

100

which is not so efficient in utilizing channel resources. A multichannel token-ring protocol (MCTRP) for VANETs was proposed in [104]. Its main goal is to achieve low latency for safety messages and high throughput for non safety applications. In MCTRP, vehicles with the same speed are grouped into rings. This protocol has a high overhead since it relies heavily on central node. Moreover it invokes the central node election very frequently which makes it more suitable for low speed networks. Table 7.1 shows a comparison between different MAC protocols for different parameters. Since the communication requirements of VANET's safety applications are complex that demand high throughput, reliability and bounded time delay, the design of their MAC protocol is a challenge especially in high density networks. It is shown from previous studies that using TDMA or STDMA is fair and has predictable delay. However, it needs strict synchronization and complete pre-mapping of geographical locations to TDMA slots. On the other hand, using CSMA is less complex, supports variable packet sizes and requires no strict synchronization but it has problems in unbounded time delay, consecutive packet drops, and low reliability as studied in Chapter 6. Therefore clustering is used to limit channel contention, provide fair channel access within the cluster, increase the network capacity by the spatial reuse of network resources and effectively control the network topology. The main challenge in clustering is the overhead introduced to elect the cluster head and to maintain the membership in a highly dynamic and fast changing topology. To optimize the communication range and hence the cluster size is also difficult especially in a highly dynamic environment such as VANETs. In [87] and [89], the relationship between the communication range and the network density, message sending rate, message size, data rate and channel conditions was derived. In these two papers, we showed how vehicles' speed affects the network density and hence the reliability and throughput of VANETs' safety applications. To solve the above problems, a distributed multichannel and mobility aware cluster-based MAC protocol (DMCMAC) is proposed. It uses the principle of multichannel in OFDMA with the contention based DCF algorithm in IEEE 802.11p. Cluster heads are elected based

101

on their stability on the road and with low overhead compared to other protocols since its clustering information is embedded in vehicles' periodic status messages. The proposed MAC protocol is adaptable to drivers' behavior and has a learning mechanism for predicting the future speed and position of all cluster members using the fuzzy logic inference system (FIS). This makes the proposed protocol more efficient in maintaining the cluster topology and increasing the life time of the elected cluster head and its members. In DMCMAC, the OFDMA subcarriers of the IEEE 802.11p CCH channel are divided into four sets. Each cluster can use only one set which is different from its neighbor clusters to eliminate the hidden terminal problem and hence increase the system reliability and decrease the time delay for safety messages. Vehicles in DMCMAC will follow an announced schedule by their cluster head to access the channel with less contention. Since each vehicle in the network has its own view of the network density and channel conditions, finding the optimal network parameters is difficult. Therefore, the goal of the proposed DMCMAC is to find the cluster size and hence the communication range that maintains a high network stability and reliability, increases the life time of a path, and at the same time decreases the time delay for an emergency message to reach its intended recipients. In DMCMAC, it is assumed that: · Vehicles are moving in one way multi lane highway segment. · Vehicles use GP S system for time synchronization. · Vehicles know their position and direction by using a GP S system. · The used communication range is much larger than the width of the road. Therefore, the network in each direction of the road is simplified as a one dimensional VANET. · Each vehicle should send a new status message every CCI interval.

102

Table 7.1: Comparison between recent proposed MAC protocols
Parameter

Multiple Access Adaptable Range Incorporates Driver's Reaction Reduce Collisions Increase Channel Reusability Cluster Stability Time Synchronization Handles Hidden Node Fairness in electing CH Multi-Channel Operation (in Control Channel) Radios Per Vehicle Complexity (Level Of Coordination And Management Required) Message Exchange Computational Effort Algorithm Scaling (changing neighborhood) Message Dissemination Delay Reliability Overhead due to clustering

proposed 802.11p DMCMAC [22] CSMA, Scheduling CSMA         very stable         1 low piggybacked low very high low very high very low  1 low

ADHOC [16] TDMA     low     2 very high

STDMA SDMA CMCP [74], [90] [92], [93] [97] TDMA TDMA TDMA               low           1 high  1 high  2 very high

APROVE [99] CSMA     low     1 high

CAM-MAC [102] CSMA     low     1 very high frequently very high medium medium medium high

MCTRP [104] CSMA     low     1 very high frequently very high medium low medium very high

frequently frequently  low medium medium  very high low  low high medium medium low medium medium high

 frequently frequently medium very high very high low medium medium

medium medium high medium medium low high very high very high

7.2

DMCMAC Clustering Protocol

The clustering algorithm is the most important component in the clustering-based MAC protocols. The faster the nodes are clustered around their elected CH and the less often they reelect a new CH, the more stable the network will be. The proposed MAC protocol strategy is to make a large network with highly dynamic nodes to appear smaller and more stable.

7.2.1

DMCMAC Parameters

In DMCMAC, it is assumed that all vehicles have the same transmitting capability (three levels of power) since they have equal chance to be elected as cluster heads. Cluster members will use the same communication range (R), i.e., the same transmitting power (Pt ), which has two values Rh and Rl . Vehicles will use the range R = Rh when they enter the road for the first time or when they are not clustered (lone state). Otherwise, they will use the range R  {Rl , Rh } that is advertised by their cluster head. The cluster head (CH) use two communication ranges. One range R  {Rl , Rh } like other members and is dedicated to communicate with its cluster members. The second range Dc , which is a function of the used range R, to communicate with its CH neighbors. Deriving Rh , Rl and Dc will be explained

103

in a later subsection. It is also assumed that the used communication range is much larger than the width of the road. Therefore, the network in each direction of the road is simplified as a one dimensional VANET. In DMCMAC the CCH subcarriers are divided into four sets (c1 , c2 , c3 , c4 ). The first three sets can be used by clusters where each cluster head has to select different set from its neighboring clusters. The forth set (c4 ) is a temporary set which can be used only by a node that could not join a cluster. Once it joins a cluster, it releases c4 and uses the same set as the new CH as shown in Figure 7.1. While c4 is a contention based sub channel, the first three sub channels are schedule based, where vehicles follow the schedule advertised by the CH to access the wireless channel.
C1 C2
2R

C3

S

CH2

CH3

CH1

Temporary cluster C4

Cluster head

Figure 7.1: Cluster formation in DMCMAC. In DMCMAC, all vehicles have their own unique ID numbers and will synchronize to the CCH channel to exchange their status messages using AC1 as in Table 2.3. The status message contains information about the message type (T ype), vehicle's (ID), weighted stabilization factor (W SF ), current speed (v ), current position (P os), acceleration (a), communication range (R), cluster head's ID (CHID) and the backup cluster head's ID (CHBK ) as shown in Figure 7.2. The acceleration will help in determining the vehicle's future speed and position during the next period (Tf ). The field T ype has four values: · "0" is for cluster member's status message. · "1" is for cluster head's first message and will be sent using access class AC2 . 104

Table 7.2: The state of a vehicle based on the three ID fields
ID ID1 ID1 ID1 ID1 ID1 ID1 CHID 0 0 0 ID3 ID3 ID1 CHBK 0 ID1 ID2 0 ID2 ID2 Vehicle Vehicle Vehicle Vehicle Vehicle backup Vehicle Vehicle's State 1 is not clustered (lone state) 1 is the temporary CH 1 is a member, clustered with temporary CH (vehicle 2) 1 is a member, clustered with CH (vehicle 3) 1 is a member, clustered with CH (vehicle 3) that has a CH (vehicle 2) 1 is the CH and vehicle 2 is the backup CH

· "2" is for cluster head's invitation message. · "3" is for cluster head's last message.

Type

ID

EWSF

v

Pos

a

R

CHID CHBK

Figure 7.2: Status message format. The fields ID, CHID, and CHBK in a vehicle's status message determine the state of that vehicle (member, lone, cluster head, temporary cluster head, or backup cluster head). For example if vehicles 1, 2, and 3 have ID1 , ID2 , and ID3 respectively, then the state of a vehicle will be determined based on the values of the three fields in their status messages as listed in Table 7.2. Each vehicle calculates its weighted stabilization factor (W SF ) as in (7.3) which is a function of the change in its relative speed and direction compared to its neighbors for the time it has been on the road. The higher the W SF factor, the higher the chance for this vehicle to be elected as a CH. Each vehicle will calculate its average relative speed as v dj 1  = | vj - vi |, n - 1 i=1
n-1

(7.1)

where n is the number of vehicles within j th vehicle's range including itself, vj is the j th vehicle's speed in meters per second. After clustering, the vehicle compare its speed with the speeds of the cluster members only. The j th vehicle calculates its stabilization factor 105

(SFj ) at the end of every CCI interval as SFj = 1 - v dj Vmax (7.2)

where Vmax , is the maximum allowed speed on this road. If there are no other vehicles on the road, the vehicle compares its speed with Vmax to calculate its SF factor. Each vehicle calculates its new weighted stabilization factor W SFi from the new value of SFi and the previous value of W SFi-1 as an exponential-weighted moving average as W SFi =  SFi + (1 -  ) W SFi-1 , where W SF0 = 0 and 0    1 is the smoothing factor and chosen here to be 0.5. The vehicle's acceleration (a), which helps to predict the vehicle's speed and position in the near future (after time Tf ) depends on many factors such as the distance between the vehicle and its front neighbor, the relative speed between them, the road conditions and the driver's behavior. Most of the time, the drivers' behavior and how they estimate the inter distance and other factors are subjective and not predictable. Fuzzy logic is used to deal with this uncertainty in this study. Fuzzy logic is a rule based system that consists of IF-THEN rules that form the key component of any fuzzy inference system (FIS) [105]. Since FIS lacks the adaptability to deal with changing external environment, we incorporate a learning technique to predict the vehicles acceleration based on the previous behavior of the driver. The FIS system consists of a fuzzifier, rule base, reasoning mechanism and defuzzifier. The fuzzifier defines the membership functions used in the fuzzy rules. In this mechanism, the triangular fuzzifier is chosen to implement the FIS system. While the rule base contains a selection of the fuzzy rules, the reasoning mechanism performs the inference procedure upon those rules to derive a reasonable output. The defuzzifier is a method used to map the output fuzzy sets to a crisp output values. In this mechanism, the inter-distance and the relative speed between two vehicles are used as input parameters to the FIS system and the (7.3)

106

vehicle's acceleration as its output. The membership function of the distance between a vehicle and its immediate front neighbor is µd and can take any of the three values: small, medium and large as shown in Figure 7.3. The parameter ts is a design parameter that represents the safety follow-on distance between two vehicles on the road, that is the time needed by the following vehicle with a speed of vj to cross this inter-distance.

Pd ( d )
1 Small Medium Large

0.5

0 0

tsv j

2t s v j

3t s v j

d

X j  Xi

Figure 7.3: Membership function of the inter distance. The membership function of the relative speed between two vehicles is µv and can take the three values: slow, same and fast as shown in Figure 7.4. The parameters  and  are used to make the system more adaptable to the driver's behavior on the road. Initially, their values are set to  =  = 1 and will be increased or decreased by a step of  if the driver's decision to accelerate or decelerate did not match with the predicted output values from the FIS system as follows: · If the system predicts that the vehicle will accelerate but it did not, then increase  as   (1 + ). · If the system predicts that the vehicle's speed will stay the same but it accelerates, then decrease  as   max{(1 - ), 0}, and if it decelerates, then decrease  as   max{(1 - ), 0}.

107

· If the system predicts that the vehicle will decelerate but it did not, then increase  as   (1 + ) . · If the vehicle's acceleration matches with the predicted value, then keep the same values of  and  . By this, the values of the parameters  and  will converge to certain values after a short period of time to capture the driver's behavior on the road. The learning mechanism is shown as Algorithm 2.

Slow 1

Same

Fast

0.5

0

Figure 7.4: Membership function of the relative speed. The output variable, namely the predicted acceleration, is µacc and has the following fuzzy names: accelerate, stay at the same speed and decelerate. We choose the crisp outputs 1, 0 and -1 m/s2 for the values of µacc (accelerate, same and decelerate), respectively. This is called a center-average defuzzifier which produces a crisp output based on the weighted average of the output fuzzy sets. The output variable µacc is shown in Figure 7.5. Table 7.3 shows the fuzzy rule for the acceleration output.

7.2.2

DMCMAC Cluster Membership

In DMCMAC, the vehicle first listens to all sub channels for a random length of time from the interval [0, CCI ] and checks if there are other vehicles on the network and does one of the following: 108

Algorithm 2 An adaptive learning mechanism in DMCMAC. Initial setup   1 /* set  =1 */   1 /* set  =1 */   0.1 /* set  =0.1 */ for Every Tf seconds do aF IS  F IS  a /* at the beginning of Tf predict the acceleration based on the FIS system */ aact  measuredaccelaration /* at the end of Tf measure the actual acceleration */ if aF IS = 0 then if aact = 1 then   max{(1 - ), 0} /* decrease  if vehicle accelerates instead of same speed */ else if aact = -1 then   max{(1 - ), 0} /* decrease  if vehicle decelerates instead of same speed */ end if else    /* keep the same values of  and  */  end if else if aF IS = 1 then if aact = 0, -1 then   (1 + ) /* if a vehicle should accelerate but it did not, increase  */ else    /* keep the same values of  and  , if the FIS decision matches real value*/  end if else if aact = 0, 1 then   (1 + ) /* if a vehicle should decelerate but it did not, increase  */ else    /* keep the same values of  and  , if the FIS decision matches real value*/  end if end if end if end for

109

Pacc ( a )
Decelerate 1 Same Accelerate

0.5

-2 m/s

-1 m/s

0

1 m/s

2 m/s

aj

Figure 7.5: Membership function of the acceleration. Table 7.3: The fuzzy rule of the acceleration
Rule 1 2 3 4 5 6 7 8 9 µd (d) small small small medium medium medium large large large µv (v ) slow same fast slow same fast slow same fast µacc (a) accelerate same speed decelerate accelerate same speed decelerate accelerate same speed decelerate

1. If there are no other vehicles or it does not lie within the range of a CH (lone state), it will set the fields CHID = CHBK = 0 in its status message and start transmitting it using the temporary subcarriers set c4 . The vehicle will listen to all sub channels. 2. If it encounters other vehicles using the same temporary set c4 without an elected CH, they will start forming a temporary cluster. The vehicle with the highest W SF will be elected as the CH and if more than one vehicle have the same W SF , they will elect the vehicle with the highest ID. The vehicle that happened to be located within the range of two or more cluster heads, it will join the cluster with the closest CH. Once a temporary cluster has been formed, the temporary CH will wait for the first chance to either become a main CH itself or merge with adjacent cluster if it falls within half of its adjacent CH range. On the other hand, it can change its state to a main CH by selecting a subcarrier set that is not used by its adjacent clusters and try its best to 110

maintain the sequence of the subcarrier sets as c1 , c2 , c3 . The core idea in DMCMAC is to let each cluster to iteratively move its subcarrier set following its immediate front cluster's set until a network convergence occur. 3. The vehicle will join a CH if it falls within its range. It will set its field CHID to the CH's ID and send its status message when it receives the CH's invitation message or the channel is being idle for time Tw (d) as in (7.4) which will be derived in a later subsection. 4. If the vehicle moves out of its CH's range, it will wait for certain number of CCI intervals, which is three in this protocol, before it gives up the subcarrier set that it was using. The vehicle will look for a new or a temporary cluster to join as in step 1. Figure 7.6 depicts the finite state machine dictating the state of any DMCMAC node.
Selected by other node, high

No nodes

Lone

Temp. CH
Highest

Join cluster

Cluster merging

Has highest

No nodes Merging, Bck. CH take over Low , not in center Connected Highest to CH in cluster's center Highest

Member

CH

Bck. CH

Higher than CH

Highest in cluster's center

Figure 7.6: DMCMAC finite state machine.

111

Lemma 1 In DMCMAC, vehicles could only join one cluster even though it could fall within the range of two cluster heads. The vehicle joins the closest CH to itself and if the CHs are of equal distance to the vehicle, it will join the one with the highest W SF . This means that clusters in DMCMAC may overlap geographically, but there is no overlap of their memberships.

7.2.3

Cluster Head Election and Reelection

In DMCMAC, the algorithm of electing and reelecting the CH is relatively fair, simple and with low communication and coordination among vehicles within the range. Once status messages are received, the vehicle with the highest W SF factor among all vehicles within its range, will elect itself as a CH. It will set its CHID field to its own ID and select one of the main subcarrier sets (c1 , c2 , c3 ) to send its status messages. All other vehicles within its range may join this cluster. If there is another vehicle within this vehicle's range that has the highest W SF factor, it will assume the role of a temporary CH by setting its field BKID to the ID of that vehicle. This newly elected temporary CH will not participate in electing a new cluster head within its range and will wait either to merge with another cluster or to change its state to a CH and form a cluster. To speed up the network convergence to a stable cluster topology, a vehicle that is not a CH within its own range and lies within the range of a temporary CH will join this cluster and will not participate in electing another temporary CH. And the vehicle that lies within the range of two cluster heads will join the cluster with the CH closest to itself, giving the priority to the main cluster over the temporary cluster. Once the CH is elected, the goal is to maintain the cluster topology as stable as possible by not initiating the election process very frequently. Therefore, the cluster head will calculate the expected positions of all of its members after time Tf , based on their advertised speeds
1 2 and accelerations as x(Tf ) = x(0) + vTf + 2 aTf , where x(0) is the current position of a

vehicle. The CH will maintain its status as a CH if all of its members are still within its range after time Tf . The CH will select a backup CH that has the highest W SF factor among 112

all vehicles around the cluster's center other than itself. The cluster center is defined based on the positions of the farthest two border vehicles. If more than 25% of the cluster members become out of the current CH's range but still within the backup CH's range, the current CH will hand the responsibility to the backup CH by setting its field CHID = CHBK in its final message (Type 3). Otherwise, the current CH will maintain its status for the next interval. The backup CH, once it hears the third CH's message with its ID is set in the CHID field, it will assume the role of the CH in the next CCI interval. If the CH falls within two third of the neighbor CH's range, it will hand the responsibility to the backup CH if it exists. Otherwise, it will set the fields CHID = CHBK = 0 in its last message announcing a merge with the neighbor CH. Other cluster members will either join the closest cluster or return back to the lone state.

7.2.4

Cluster Head's Role

The CH sends three extra messages that have the same format as the status message but with extra data and sub channel (sCh) fields as shown in Figure 7.7. The sCh is used to announce the sub channel that will be used in the next CCI interval. The data channel includes the schedule for accessing the channel and other information about cluster members.

Type

ID

EWSF

v

Pos

a

R

CHID

CHBK

sCh

Data

Figure 7.7: Cluster head's extra messages format.

· First, at the beginning of every CCI interval, a consolidated message, with T ype = 1, that has information about the neighboring clusters and all current cluster members
1 2 3 parameters 10set. 11 12 This 13 insures a high priority for this message, 4 5 6 7 8 9 is using access class AC 2

hence other vehicles can synchronize with the current CH. In this message, the cluster members' IDs are arranged from behind to front and vehicles will follow this order to 113

send their status messages. At the same time, each vehicle calculates its maximum waiting time Tw (d) that it should wait for its turn to access the channel based on its distance d from its CH as: TA Tw (d) = TA + 2 ( ) d 1+ , R (7.4)

where R is the used communication range (either Rh or Rl ), d  [-R, R] is the distance from the CH where vehicles in front of the CH have positive distance and those behind it have negative distance and TA = 6 × 13µs is the Arbitration Inter Frame Space (AIFS) for access class AC1 . A vehicle can send its status message when the vehicle ahead of it in the sequence finishes transmitting its message. Otherwise, it will send its message when its Tw (d) expires. After every successful transmission, each node updates its Tw (d) based on the distance from the last vehicle that successfully transmits its message (d has positive values in this case). Vehicles that are at the front of the cluster head should wait until the CH takes its turn to send its status message (T ype = 0). This is to eliminate the hidden terminal problem that could arise from the other side of the cluster and to maintain the status messages' schedule. · Second, after receiving all status messages from its cluster members, the CH sends a status message with T ype = 2, which is an invitation for new members to join the cluster by sending their status messages. The new members should wait Tw (d) time as in (7.4) before they can access the channel. · Third, a consolidated message with T ype = 3, which contains information about all its members with enough power to reach a distance of Dc . This message is intended to reach the two neighboring CHs. The CH will send the last two messages after the channel is being idle for time (2 +  ) · TA , where  is a random number uniformly distributed in [0, 1]. Figure 7.8 shows the order of all sent messages during one CCI interval. 114

CH first Member's status messages message

New CH CH invitation member's status last message messages es message

0 TA

U xCCI \ xTA

CCI interval

Figure 7.8: The time line for the sent messages during one CCI interval. The CH decides which subcarrier set and what range R (Rh or Rl ) that all of its members should use. In the remaining time of the CCI interval and after sending its final message, the cluster head will accept route requests from its members if they want to communicate with other vehicles on a different channel and outside the CCI interval. The CH also selects a backup CH, which has the highest W SF among vehicles located around the cluster's center as mentioned in the previous subsection. If a vehicle has an emergency message, it will contend for the channel access using the minimum contention window specified for high priority access class (AC3 ), i.e., CWmin = 3, and waiting time Tw (d) = 2 × 13µs to send this message for several times depending on the application (three times in this protocol). Once this message is received by the CH, it starts transmitting the message periodically (maximum 10 times every ((2 + random no.(0, 1)) · 13µs) using AC3 parameters with enough power to reach a distance of Dc . All cluster members will refrain from using the channel during this time. When the next CH receives this message, it broadcasts the message with enough power to reach both the next and the originating CHs. Once the originating CH hears its message back, it will stop broadcasting with high power, but continues the broadcasting to all its members for several times depending on the application or until the emergency situation is cleared. The emergency message will continue to propagate in the direction of interest for a maximum number of hops depending on the application. 115

To give an example on how DMCMAC works, we set a scenario of thirteen vehicles placed on a road segment as shown in Figure 7.9. The order in which the vehicles send their messages in the first CCI interval is shown in Figure 7.10. The information shown in each message is the ID of the sender, the cluster head's ID and the backup cluster head's ID as (ID, CHID, CHBK ). As shown in Figure 7.10, vehicle 4 starts by sending its message without CH or backup CH. The second vehicle (vehicle 6) sends its message indicating that it is the CH assuming that it has a higher W SF than vehicle 4. Vehicle 7 then sends its message agreeing with vehicle 6 as the CH. On the other hand, Vehicle 10 did not hear any of the previous transmissions and therefore, it sends its message without CH or backup CH. Vehicle 12 sends its message in which it selects vehicle 10 as a temporary CH, assuming that it has higher W SF than itself. The same decision is taken by vehicle 8. Vehicle 2 takes its turn and sends its message selecting vehicle 4 as a temporary CH. Finally, vehicle 1 selects itself as a CH since it hears some of the transmitted messages and found that it has higher W SF than other vehicles in its range. The remaining vehicles (3, 5, 9 and 11) did not have a chance to send their messages in the first CCI interval. The state of each vehicle in the second CCI interval is shown in Figure 7.11 and the messages sent in each sub channel are shown in Figure 7.10. Vehicle 6, is a CH in its range and sends its first message indicating the start of the CCI interval. Vehicles (4 and 7) will follow the schedule to send their status messages. Other vehicles (3 and 5) which are not in the announced schedule will wait for the invitation message from the CH as shown in Figure 7.10. Vehicle 10 changes its state to a main cluster in the second CCI interval. All vehicles will follow the announced schedule to send their messages in the same way as in vehicle 6 case. Although vehicle 4 is selected as a temporary CH, it will join the cluster of vehicle 6 since it lies within its range. Therefore, vehicle 2 will join the cluster of vehicle 1. Vehicle 13 will stay in the lone state during the second CCI interval since it does not lie within the range of any CH.

116

1

2

3 4 5 6

7

8 9

10 11 12

13

Figure 7.9: A set of thirteen vehicles on a road segment before clustering.

C4

C3

C1

C2

CCI1

CCI2

Status message CH first message CH invitation message CH last message

Figure 7.10: Message exchange in DMCMAC protocol.

117

CH 1 2

CH 3 4 5 6 7 8 9

CH 10 11 12

Lone 13

Cluster head

Cluster member

Lone

Figure 7.11: The network after running DMCMAC protocol.

7.3

Analysis

In DMCMAC, vehicles send their status messages with less competition for accessing the channel and less vulnerable to the hidden terminal problem. This allows DMCMAC to achieve an acceptable level of performance with respect to network convergence, stability, reliability and time delay. For the analysis of DMCMAC, the VANET model in Chapter 4, which is published in [57], is used. This model is based on a one way multi lane highway segment and simplifies the network as one dimensional VANET as shown in Figure 7.12. In this model, Vehicles are assumed to be distributed on the road as Poisson process with average rate v =
 µ

vehicles/m, where  is the total vehicle arriving rate as in (4.8) and µ is the vehicle's average speed. Vehicles follow the direction of the road with a speed uniformly distributed between Vmin and Vmax . For more information on this model, we refer the reader to Chapter 4. In the following analysis, it is assumed that vehicles send their status messages, (T ype = 0 and have the same length L bits), using the same transmission rate rd Mbps and the same communication range R meters.

7.3.1

Network Convergence and Stability

In DMCMAC, the cluster size is governed by the CH's communication range which is a critical parameter in the stability of the network. Increasing the range will increase the

118

Cluster H1

R

Cluster H2

Dc Cluster H3 0 d Cluster H4

Cluster member

Cluster head

Figure 7.12: Clustering Model. cluster size and hence more vehicles will contend for the channel use. At the same time, vehicles will have more space to move within the cluster with less probability to cross the cluster boundary. Optimizing the communication range and hence the cluster size is very difficult especially in a highly dynamic scenario. It has been shown in Chapters 4 and 6 how the dynamics of vehicles affect the network density and hence the reliability and throughput of VANETs' safety applications. Since each vehicle has its own view of the network density and channel conditions, finding the optimal network parameters is difficult. Therefore, the range R has to be selected based on the vehicle density, status message size and data rate such that all vehicles within the cluster have the chance to send their status messages within the CCI interval. Assuming that the cluster can handle a maximum of K members, then the communication range R will have a CDF (cumulative distribution function) as FR (x) = P r(R  x) ( ) = P r N (x)  K 2  K -1 (v x)i -v x = 1 - i2 e , =0 i!

(7.5)

where x is a dummy variable, N (x) is the Poisson process with parameter v that represents the number of vehicles within distance x. By taking the first derivative of (7.5), it can be found that the pdf (probability density function) of the communication range has gamma distribution as v2 x 2 -1 -v x fR (x) = K e . ( 2 - 1)!
K K

(7.6)

119

From (7.6), the mean value of the communication range can be found as R = therefore, the average cluster size is Kavg = 2v R.

K 1 2 v

and

(7.7)

As in (7.5), the CDF of the distance (Dc ) between two adjacent cluster heads, which is the distance till the (K+1)th arrival, can be derived as FDc (x) = P r(Dc  x) = P r (N (x)  K + 1)  (v x)i -v x = 1- K e . i=0 i! By taking the first derivative of (7.8) with respect to x, the pdf of Dc is given by fDc (x) =
+1 K K x - v x v e . K!

(7.8)

(7.9)

From (7.9) and (7.7), the average value of Dc can be derived as Dc = 2R + 1v . Therefore, to make the probability of the cluster head's connectivity high, that is a cluster head finds a neighboring cluster head within distance Dc , we set Dc = 2.5R, where R is the range that is used and announced by the CH. This means that the cluster head will use a communication range R to communicate with its members and a second level of power to reach a distance of Dc = 2.5R to communicate with adjacent cluster heads. Using fixed value of Dc could result in low connectivity between cluster heads especially in heterogenous networks where cluster heads could use different communication ranges. Optimizing the communication range and Dc in a heterogenous network is left as a future work. To prevent the frequent change in cluster size as vehicles move in and out of the cluster boundary, the CH in DMCMAC, will use the hysteresis mechanism shown in Figure 7.13. Two threshold cluster sizes are defined: Kh = 2h Rh and Kl = 2l Rl , where Rh is the range that all vehicles will use when they enter the road, h is the maximum vehicle density that corresponds to Rh , Rl is the lowest range that can be used by all vehicles which is related to a jam scenario and l is the vehicle density that triggers the change from Rl to Rh . The cluster 120

head can sense the network density by the number of received status messages within the CCI interval. Kh represents the maximum number of vehicles that can be accommodated within the cluster and have the chance to send their status messages. The CH will trigger a change in the used range from Rh to Rl when the density reaches h and back to Rh when the density decreases to the threshold l .
Range

Rh Rl Ol Oh Network Density

Figure 7.13: The hysteresis mechanism in DMCMAC. To find Rl and Rh , the upper bound of the average time Tavg until all cluster members managed to send their status messages is needed. It is assumed that every cluster member waits for time Tw (d) as in (7.4) before they can access the channel (worst case scenario). The CH sends its first message after time Tcf = TA2 +
Lcf rd

+  , where TA2 = 3 ·  is the

AIF S for AC2 , Lcf is the cluster head's first message size in bits and  is the propagation delay. After that, the first cluster member, located at distance d from the CH, will send its message after time Tmf (d) = Tw (d) +
L rd

+  . Since the distance d is uniformly distributed

over the interval [-R, 0], the average time of Tmf is [Tmf ] = = 0
-R 5 T 4 A 1 Tmf (d) R dd

(7.10)

+

L rd

+ .

The second vehicle to win the channel access is the closest neighbor to the first one. If the distance between them is d, which has exponential distribution with mean
1 , v

then its

121

transmission time is Tm (d) = Tw (d) + [Tm ] = R
0

L rd

+  with average value

Tm (d)v e-v d dd [ TA L 1 = 3 T + +  + - (R + 2 A rd 2 R v

1 )e-v R v

] .

(7.11)

The cluster head will wait for time (2 +  ) · TA before it can send any of its invitation (T ype = 2) and last (T ype = 3) messages. Therefore, the average transmition time for its
L invitation message is [Tin ] = 5 T +r +  . Assuming that the size of last message is Lcl bits, 2 A d

then its average transmission time is [Tcl ] = 5 T + 2 A

Lcl rd

+ .

Since the average number of vehicles within the range is 2v R, the upper bound of Tavg can be found as (Tavg )ub = Tcf + [Tmf ] + (2v R - 1)[Tm ] + [Tin ] + [Tcl ], (7.12)

The lower bound of Tavg is when all cluster members send their status messages by following the sequence specified by the CH without waiting for time Tw (d) as (Tavg )lb = Tcf + (2v R)[TA + L +  ] + [Tin ] + [Tcl ]. rd (7.13)

To allow for all cluster members to successfully send their safety messages during the CCI interval, the following condition should be satisfied (Tavg )ub   · CCI, (7.14)

where 0    1 is a design parameter to spare some time from the CCI for other control messages. From (7.14), h and Rh that should be used to trigger the change in the cluster size as discussed in Figure 7.13 could be determined. Since the cluster has K vehicles, the size of the cluster's first message is Lcf = 2K · L and its last message is Lcl = K · L. Moreover, as the range R increases, the term e-v R in (7.11) approaches zero. Therefore, if a certain maximum range as Rh is used, then h =
K 2Rh

can be found by manipulating (7.12) and

122

substituting the result in (7.14) as
2L 1  · CCI - 5.75TA - rd - 3 h  . 3 L 2Rh T +4 + 2 A r
d

(7.15)

Since Rl is governed by the jam scenario, where it is assumed that each vehicle occupies 10 meters on average and the road has Nl lanes, then Rl 
2L 10  · CCI - 5.75TA - rd - 3 . 3 4L 2Nl T + +  A 2 r
d

(7.16)

On the other hand, l is a design parameter which can be chosen as a fraction of h , such that l <
Rl h . Rh

The smaller l is selected, the less frequent the cluster size is changed.
R l h Rh

In the simulations, l =

is selected.

Another version of DMCMAC (eDMCMAC) is when the number of cluster members reach Kh , the cluster head will not trigger the change in the communication range but select a certain set (Kl ) of its members to only send their messages. The selection criteria is based on the stabilization factor and location. Vehicles with the lowest stabilization factor and/or located around the cluster boundary will have higher chances to be selected to send their status messages in the next CCI interval. Vehicles should have at least one chance to send their messages every  control channel intervals, which is set to  = 10 in the simulation section. The cluster head will arrange the selected vehicles in its first message from behind to the front followed by the remaining not selected cluster members. Vehicles will follow this order to send their messages. A vehicle will defer from sending its message in the current CCI interval if it hears one of its front neighbors' messages. In this enhanced version, the cluster head will have to keep a table for the last ten CCI intervals to track which vehicles did send their messages. Although this version did increase the processing time and the overhead on the cluster head but it maintains a large cluster size. Therefore, eDMCMAC will have higher cluster head time and cluster member dwell time compared to DMCMAC especially in high density scenarios as will be shown in the simulations.

123

7.3.2

Clustering Reliability

To study the clustering reliability in DMCMAC, which is the probability that a cluster member and a neighboring cluster head will transmit and receive the clustering information from the local cluster head successfully, the following parameters are defined: · P =
 CCI

which is the probability that a vehicle (node) will send its status message in

any time slot interval  , assuming that cluster members contend for the channel use (worst case scenario). · The carrier sense range LCS = R, where 1    2, hence LCS will range from R to 2R .
+ · The vulnerable period Tv =  2Tdata  which is the time needed for the channel to be 

silent for a successful communication normalized over the slot time, where Tdata = is the status message transmission time and  = 1µs is the propagation delay. · The number of subcarrier sets or subchannels is (N = 4).

L rd

· The cluster head's communication and carrier sense ranges are defined as in (4.5) and (4.7) respectively and shown in Figure 7.14.
d-LCS d-R d+R

0 -LCS -R Cluster head LCS-R d R Cluster member LCS 2R

Figure 7.14: Communication and carrier sense ranges of the cluster head and one cluster member. The probability (Ps ) that a cluster member, which is located at distance d from the CH, will receive its cluster head's message can be derived in the following four cases: · The first case is when the local cluster uses a different subchannel from both neighbor-1 2 ing clusters (from left and right), which happens with probability of ( NN ) . In this

124

case, with probability Ps1 the cluster member will receive its cluster head's message successfully when all local cluster members are silent during the same time slot that the cluster head is transmitting: Ps1 = = ( N - 1 ) 2 
N i=0 (1 2R) -v 2R e - P )i (vi !
i

-1 2 -P v 2R ( NN )e .

(7.17)

· The second case is when the neighboring cluster on the left (cluster H1 ) uses the same subchannel as the local cluster while the neighboring cluster on the right (cluster H3 ) uses a different one. This case happens with probability
N -1 . N2

Therefore, with proba-

bility Ps2 the cluster member will receive the message successfully when all vehicles in the area [-LCS , R] did not use the channel in the same time slot as the local cluster head: Ps2 = ( N - 1 ) 
N2 i=0 (1 LCS )) -v (R+LCS ) - P )i (v (R+ e i!
i

-1 -P v R(1+) = (N )e . N2

(7.18)

· The third case is when the neighboring cluster on the right (H3 ) uses the same subchannel as the local cluster while the neighboring cluster on the left (H1 ) uses a different one. This case also happens with probability of
N -1 . N2

The cluster member, in this

case, will receive the message successfully with probability Ps3 (d) when all vehicles in the area [-R, LCS ] did not use the channel in the same time slot and vehicles in the hidden terminal area [LCS , d + LCS ] did not use the channel for the vulnerable period Tv : Ps3 (d) =
i (v (R+LCS )) -v (R+LCS ) e i=0 (1 - P ) N2 i! [ ] Tv i  i (v d) -v d × e i=0 (1 - P ) i! ( -1 ) -P  R(1+) -P  dT v v v = N e e . N2

( N -1 ) [

i

] (7.19)

By integrating over the range d  [0, R], the average value of Ps3 (d) can be derived as ( Ps3 = N -1 2 N P v RTv ) ( ) e-P v R(1+) 1 - e-P v RTv . (7.20)

125

· The last case is when both neighboring clusters use the same subchannel as the local cluster and this happens with probability of
1 . N2

Therefore, the probability that the

cluster member will receive the message successfully when all vehicles in the area [-LCS , LCS ] did not use the channel in the same time slot and at the same time the vehicles in the hidden terminal area [LCS , d + LCS ] did not use the channel for the vulnerable period Tv is Ps4 (d) =
i (v 2LCS ) -v 2LCS e i=0 (1 - P ) i! [ ] Tv i  i (v d) -v d × e i=0 (1 - P ) i! ( 1 ) -P  2R -P  dT v v v = N2 e e . 1 N2

(

) [

i

] (7.21)

By integrating over the range of d  [0, R], the average value of Ps4 (d) can be derived as Ps4 = ( 1 2 N P v RTv ) ( ) e-P v 2R 1 - e-P v RTv .

(7.22)

From (7.17), (7.18), (7.20) and (7.22), the probability Ps can be calculated as Ps =
4  i=1

Psi .

(7.23)

To derive the probability (Pc ) that the cluster head will receive the status message successfully from its member which is located at distance d as shown in Figure 7.14, the previous four cases are considered: · In the first and last cases where both adjacent clusters use the same and different subchannels than the local cluster, respectively, the cluster head will receive its member's message with the same probabilities as in (7.17) and (7.22), respectively. · For the second case which happens with probability
N -1 , N2

when the neighboring cluster

on the left uses the same subchannel as the local cluster while the neighboring cluster on the right uses a different one. The cluster head will receive the message successfully when all vehicles in the area [d - LCS , R] did not use the channel in the same time slot 126

and at the same time the vehicles in the hidden terminal area [-LCS , d - LCS ] did not use the channel for the vulnerable period Tv as Pc2 (d) = × = ( N - 1 ) [  [ 
N2 N2 i=0 (1 i (v (R+LCS -d)) i=0 (1 - P ) i! ]Tv i (  d ) v - P )i i! e-v d
i

e

-v (R+LCS -d)

] (7.24)

( N -1 )

e-P v R(1+) e-P v d(Tv -1) ,

by integrating over the range of d  [0, R], the average value of Pc2 (d) can be derived as P c2 = ( N -1 2 N P v R(Tv - 1) ) ( ) e-P v R(1+) 1 - e-P v R(Tv -1) .
N -1 , N2

(7.25)

· For the third case which happens also with probability

when the neighboring

cluster on the right uses the same subchannel as the local cluster while the neighboring cluster on the left uses a different one, with probability Pc3 (d) the cluster head will receive the message successfully when all vehicles in the area [-R, d + LCS ] did not use the channel in the same time slot: ] ( -1 ) [ i i (v (R+LCS +d)) -v (R+LCS +d) Pc3 (d) = N e (1 - P ) i=0 N2 i! ( N -1 ) -P  R(1+) -P  d v v = e e . N2

(7.26)

By integrating over the range of d  [0, R], the average value of Pc3 (d) can be derived as P c3 = ( N -1 N 2 P v R ) e-P v R(1+) (1 - e-P v R ). (7.27)

From (7.17), (7.25), (7.27) and (7.22), Pc can be calculated as Pc = Ps1 + Pc2 + Pc3 + Ps4 . (7.28)

To find the probability that the cluster head of the neighboring cluster (H3 ) shown in Figure 7.12 will receive the message from the cluster head of the local cluster (H2 ) successfully, the preceding four cases are considered. Moreover, the subchannel used by the neighboring cluster (H4 ) to the right of the receiving cluster head should be considered if it is the same

127

or not as the receiving cluster head. · In the first case, when the neighboring clusters use different subchannels than the transmitting cluster head, the following two scenarios should be considered: first, with
-1 3 probability ( NN ) the neighboring cluster H4 uses a different subchannel than cluster

H3 . In this case, the probability that the receiving cluster head in H3 will receive the message from the transmitting cluster head when all its members in H2 do not use the channel in the same time slot and vehicles that are members of H3 do not use the channel for the vulnerable period Tv is Pcc1 = × ( N - 1 ) 3 [  [
N  i=0 (1 i=0 (1

-

2R) P )i (vi !
i

2R) -v 2R - P )i (vi e !

e ]Tv

i

-v 2R

] (7.29)

-1 3 -P v 2R(Tv +1) = ( NN )e .

The second scenario is when cluster H4 uses the same subchannel as H3 , which happens
-1) ). In this case, the probability that the cluster head in H3 will with probability ( (NN 3
2

receive the message successfully as in the previous case except that the hidden terminal area is [R, 2R + LCS ] is Pcc2 = × = [ 
(N -1)2 N3

[ 

i (v 2R) -v 2R e i=0 (1 - P ) i!
i

i

] ]Tv (7.30)

i (v (LCS +R)) -v (LCS +R) e i=0 (1 - P ) i!

(N -1)2 -P v R(2+Tv (+1)) e . N3 (N -1)2 N3

· In the second case, with probability

the neighboring cluster H4 uses a different

subchannel than H3 . In this case, with probability Pcc3 the cluster head in H3 will receive the message successfully when all vehicles in the area [-LCS , R] did not use the channel during the same time slot and the hidden terminal area in this case [R, 3R] is

128

silent for the vulnerable period: Pcc3 = × = [ 
(N -1)2 N3

[

 i=0 (1

i=0 (1

-

LCS )) - P )i (v (R+ i! ]Tv i i (v 2R) -v 2R P ) i! e

i

e

-v (R+LCS )

] (7.31)

(N -1)2 -P v R(+1+2Tv ) e . N3

On the other hand, when H4 is using the same subchannel as H3 , which happens with probability
N -1 , N3

the hidden terminal area will be [R, 2R + LCS ]. Therefore, the [ ] (7.32)

message will be received successfully with probability Pcc4 =
LCS )) -v (R+LCS ) - P )i (v (R+ e i! [ ]Tv i  i (v (R+LCS )) -v (R+LCS ) × (1 - P ) e i=0 i! N -1 N3  i=0 (1
i

=

N -1 -P v R(+1)(Tv +1) e . N3

· For the third case, considering first that cluster H4 is using different subchannel than H3 . This happens with probability
(N -1)2 ; N3

therefore, the probability that the cluster

head in H3 will receive the message successfully when all vehicles within the area [-R, LCS ] are silent during the same time slot and the hidden terminal area [LCS , 3R] is silent for the vulnerable period is given by Pcc5 =
LCS )) -v (R+LCS ) e - P )i (v (R+ i! [ ]Tv i  i (v (3R-LCS )) -v (3R-LCS ) × e i=0 (1 - P ) i! (N -1)2 -P v R(+1+3Tv -Tv ) e . N3 (N -1)2 N3

[

 i=0 (1

i

] (7.33)

=

On the other hand, when cluster H4 uses the same subchannel as its neighbor H3 , which happens with probability
N -1 , N3

the hidden terminal area will be, in this case, ] (7.34)

[LCS , 2R + LCS ]. Therefore, the message will be received successfully with probability Pcc6 =
LCS )) -v (R+LCS ) - P )i (v (R+ e i! ] [ T v i  i (v 2R) -v 2R × e i=0 (1 - P ) i! N -1 N3

[

 i=0 (1

i

=

N -1 -P v R(+1+2Tv ) e . N3

129

· For the last case, considering first that cluster H4 is using a different subchannel than its neighbor H3 , which happens with probability
N -1 . N3

The cluster head in H3 will

receive the message successfully when all vehicles in the area [-LCS , LCS ] are silent during the same time slot and the hidden terminal area [LCS , 3R] is silent for the vulnerable period with probability Pcc7 = × = [
N -1 N3

[ 

i (v 2LCS ) -v 2LCS e i=0 (1 - P ) i!

i

] ]Tv (7.35)

 i=0 (1

-

LCS )) P )i (v (3R- i!

i

e

-v (3R-LCS )

N -1 -P v R(2+3Tv -Tv ) e . N3

On the other hand, when H4 uses the same subchannel as its neighbor H3 , which happens with probability
1 , N3

the hidden terminal area will be [LCS , 2R + LCS ]. Therefore, [ ] (7.36)

the message will be received successfully with probability Pcc8 = × = [ 
1 N3  i=0 (1

-

CS ) P )i (v 2L i! i

i

e

-v 2LCS

i (v 2R) -v 2R e i=0 (1 - P ) i!

]Tv

1 -P v 2R(+Tv ) e . N3

Hence, the probability Pcc that the cluster head of H3 will receive a message from the cluster head of its neighboring cluster H2 successfully is Pcc =
8  i=1

Pcci .

(7.37)

7.3.3

Time Delay

In this subsection, the time delay for an emergency message to be sent from one vehicle in   one cluster and reaches vehicles that are located at distance D (or M = D clusters) from R the emergency scene will be discussed. In DMCMAC, if a vehicle has an emergency message, it will contend for the channel access using access class AC3 to send this message. Once this message is received by the cluster head, it starts transmitting this emergency message periodically with enough power

130

to reach a distance of (Dc ), all other cluster members will refrain from using the channel during this time. When the next cluster head receives this emergency message, it will broadcast the message with a range of (Dc ) to reach both the next cluster and the originating CHs. Once the originating CH hears its message back from the neighboring CH, it will stop broadcasting the message with high power but continue the broadcasting to all of its members for several times depending on the application or until the emergency situation is cleared. The emergency message will continue to propagate in the direction of interest for a maximum number of hops (M ) depending on the application and the emergency situation as shown in Figure 7.15.
receiver Rx CHM (0,r) CHM-1 CH2 CH1 Tx (0,0) transmitter

Figure 7.15: Emergency message propagation model. Since it is assumed that the message is of length L bits and its transmission time is Tdata , then the average time delay Ted for the emergency message to reach its intended distance of M clusters away is the sum of the time for the first cluster head to receive the message from its member, the time for the neighboring cluster heads to process and forward the message and the time for the last cluster head to send the message to its members successfully. Therefore, Ted can be calculated as ( Ted = 1 M 1 + + Pc Pcc Ps ) Tdata + M Tp , (7.38)

where Tp is the time needed by the cluster head to process and analyze the emergency message before propagating it to the next cluster.

7.4

Model Validation and Simulation

To test the system's stability, reliability and efficiency, the following metrics are defined: 131

1. The average cluster head time (CHT ), which is the sum of all CHs times divided by total number of CHs during the simulation period. 2. The average cluster size (CS ), which is the total number of vehicles that became cluster members divided by the total number of formed clusters during the simulation time and can be calculated as
Ts 1  CS = Ts t=1

Cn (t)
j =1

CMj (t) , Cn (t)

(7.39)

where CMj (t) is the number of cluster j 's members Cn (t) is the number of formed clusters at time t and Ts is the total number of CCI intervals during the simulation time. 3. The system reliability () which is the probability for a cluster member to send its status message during the CCI interval and can be calculated as
Ts 1  = Ts t=1

Cn (t)
j =1

CM sj (t) CMj (t)

Cn (t)

,

(7.40)

where CM sj (t) is the number of cluster j 's members managed to send their status messages at time instance t. 4. The average time delay for an emergency message to reach an intended distance of 2000 meters. 5. The average number of messages successfully received by either a cluster head, a cluster member, or a neighboring cluster head. 6. The overhead percentage due to the extra messages sent by nodes to form the cluster. It is calculated by the size of the cluster management messages divided by the total size of all messages sent by all nodes during the CCI interval. The simulation is developed based on the network simulator ns-2 [12] with the Cognitive Radio Cognitive Network (CRCN) [106] extension. We used realistic mobility traces gener132

Table 7.4: Value of parameters used in simulation Parameter Value Modulation and Data rate QPSK , rd =6 Mbps Total Message sizes L 64 × 8 Bits Emergency Min. Contention Window We 3 Status Min. Contention Window Ws 15 Vehicle's speed 80-120Km/h Communication range R=Rh 300m Control Channel Interval CCI 100ms Cluster maintenance time Tf 10s Communication range between cluster heads Dc 2.5 R Emergency message travel distance r 2000 meters  1.5  1  0.5  0.1 Received power threshold RxT h 3.162e-13 W Noise-floor 1.26e-14 W Ttx & Trx antennas heights 1.5 m Ttx & Trx antennas Gain Gt = Gr 1 Slot time  13 µ s Propagation delay  1µs DIFS 64 µ s SIFS 2 time slots Number of lanes Nl 4 lanes ated by MOVE [52] which is built on top of the micro-traffic simulator Simulation for Urban Mobility (SUMO) [53]. The simulation scenario is based on one directional highway segment of 8000m in length and 4 lanes . The vehicles' speed ranges from 80 - 120km/h, which is typical for Ontario highways. The Nakagami-m propagation model with configuration parameters as in Chapter 6 is used. The proposed DMCMAC is compared with the CMCP [97], APROVE [99], and the Distributed Coordination Function (DCF) of 802.11p since they are the most relevant to this work. Each simulation typically simulates 1000 seconds. Table 7.4 lists the simulation parameters that are used unless a change is mentioned explicitly. Figs. 7.16, 7.17 and 7.18 show the impact of vehicle density on the cluster topology for various communication ranges. Figure 7.16 shows that the CH's average life time increases by increasing the vehicle density. This is because the inter distance between vehicles are 133

decreasing and hence the relative speed between them is decreasing resulting in high CH's stability factor. This verifies that the proposed clustering algorithm works well by allowing the CH to reelect itself when all or most of its members are within its range after time Tf . Figure 7.17 shows the increase in the average cluster size as the density increases. In DMCMAC, the cluster head has a role to change the range when vehicle density reaches a threshold h , hence, all its members have the chance to sent their status messages. This is clear from the abrupt change in the cluster size when vehicle density reaches 0.25 vehicles/m for R = 300m. From Figure 7.16, we can see that the stability of the network topology will increase by increasing the communication range for fixed network density since there will be more space for vehicles to move within their CH's range. This explains why the eDMCMAC has better performance than DMCMAC especially when the vehicle density is high. Figure 7.18 shows the dwell time versus the cluster maintenance time (Tf ). As Tf increases, the accuracy of predicting the vehicle's future position and speed decreases. But in DMCMAC, this decrease is small since the CH elects a backup CH to maintain the network stability. It is also clear that increasing the range will increase the dwell time and at the same time will decrease the effect of using long maintenance time Tf since the probability of vehicles to cross the cluster boundary will decrease. Figs. 7.19, 7.20 and 7.21 show the performance evaluation of DMCMAC. Figure 7.19 shows the probability that all cluster members managed to send their status messages during the CCI interval. Since the cluster head in the proposed clustering algorithm advertises the sequence that all of its members should follow to send their status messages, the system reliability is high especially in low density networks. As the network density increases, the reliability decreases slightly since there is more possibility that new members will join the cluster. These new members are not included in the advertised sequence and have to compete for the channel use based on (7.4). This explains why the reliability drops when the range is changed as the density reaches 0.25 vehicles/m.

134

450

400

Average Cluster Head Time (CHT) (s)

350

300

250

200

150

100

DMCMAC R=300m eDMCMAC R=300m DMCMAC R=100m CMCP R=300m
0.1 0.15 0.2 0.25 0.3 0.35 0.4

50 0.05

Vehicles Density (vehicles/m)

Figure 7.16: Average cluster head time versus vehicle density.

250

200

DMCMAC R=300m eDMCMAC R=300m DMCMAC R=100m CMCP R=300m

Average Cluster Size (CS)

150

100

50

0 0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicles Density (vehicles/m)

Figure 7.17: Average cluster size versus vehicle density.

135

180

Cluster Member's Average Dwell Time (s)

160

140

120

DMCMAC R=300m DMCMAC R=200m DMCMAC R=100m

100

80

60

40

20 10

15

20

25

30

35

40

45

50

55

60

Cluster Maintenance Time (Tf) in seconds

Figure 7.18: Average cluster member's dwell time as a function of the cluster maintenance time (Tf ), v = 0.2 vehicles/m. Figure 7.20 shows the time taken by an emergency message sent by a vehicle to reach a distance of 2000m versus vehicle density for different communication ranges. It is shown as the range increases, the travel time decreases since the number of clusters that the message will hop through to reach its intended distance decreases. Moreover, the decrease in vehicle density results in increasing the emergency message travel time since CHs may struggle to find a neighboring CH to carry the message forward. Figure 7.21 shows the time needed for all cluster members to send their status messages. The abrupt change is due to the change of the communication range from Rh = 300m to Rl = 180m triggered by the CH when the vehicle's density reaches a certain value v = 0.25 as explained before in the hysteresis mechanism. It is clear that this time is less than the theoretical upper bound derived in (7.12). This proves that DMCMAC algorithm is efficient in managing the cluster size to allow all of its members to send their status messages. Figure 7.22 shows the impact of traffic density on the cluster size and compare it with other multichannel protocols such as CMCP [97] and APROVE [99] for R = 200m. The traffic density v can be increased by either decreasing the vehicles' average speed or increasing the number of vehicles on the road. This figure shows that DMCMAC protocol builds 136

1

0.9

0.8

Reliability

0.7

0.6

0.5

0.4

DMCMAC R=300m CMCP R=300m DCF R=300m
0.1 0.15 0.2 0.25 0.3 0.35 0.4

0.05

Vehicles Density (vehicles/m)

Figure 7.19: Reliability versus vehicles density.

120 110 100 90 80 70 CH change range to Rl=180m 60 50 40 30 0.05

Emergency Message Travel Time (ms)

DMMAC R=300m DMMAC R=200m DMMAC R=100m CMCP R=300m

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicles Density (vehicles/m)

Figure 7.20: Emergency message travel time versus vehicles density.

137

140

120

Time to send status messages (ms)

Upper bond R=300m lower bond R=300m Upper bond R=180m lower bond R=180m Simulation

100

80

60

40

20

0 0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicles Density (vehicles/m)

Figure 7.21: The time duration for all cluster members to send their status messages versus vehicles density for DMCMAC.

160 140 120 DMCMAC APROVE CMCP Theoretical

Average Cluster Size

100 80 60 40 20 0 0.05

0.1

0.15 0.2 0.25 0.3 Vehicles Density (vehicles/m)

0.35

0.4

Figure 7.22: Average cluster size versus vehicles density (R=200m).

138

80

Time to send status messages (ms)

70 60 50 40 30 20 10 0 0.05

Upper bond R=200m lower bond R=200m Simulation

0.1

0.15 0.2 0.25 0.3 Vehicles Density (vehicles/m)

0.35

0.4

Figure 7.23: The time duration for all cluster members to send their status messages versus vehicles density for R=200m. the largest cluster size compared to others which is also very close to the theoretical results from (7.7). This is because DMCMAC has a mechanism to balance the cluster by electing a cluster head which is very close to the cluster center and moving with the same speed as most of its members. These characteristics help to maintain a stable cluster topology. To get more insight on why DMCMAC build larger cluster size compared to other protocols, we plot the time needed for all cluster members to send their status messages versus vehicle density when the communication range is R = 200m in Figure 7.23. It is clear that DMCMAC allow all cluster members to send their status messages within the CCI interval since it does not allow the cluster to overflow. That is when the number of vehicles reach a pre defined maximum, DMCMAC will trigger the change in the communication range to Rl as in the hysterias mechanism explained in Figure 7.13. Figures 7.24 and 7.25 show the probability of receiving a message from a cluster head by its members and neighboring cluster heads, respectively, and compare it with other protocols. In these simulations, we let all vehicles contend for using the channel to test for the efficiency of the multichannel protocol. That is the effect of selecting a different subchannel from neighbor clusters. It is obvious that the analytical results coincide with the those obtained 139

1

Probability of receiving CH message by a member

0.99 0.98 0.97 0.96 0.95 0.94 0.93 0.92 0.91 0.9 0.05 0.1 0.15 0.2 0.25 0.3 Vehicles Density (vehicles/m)

Theoretical DMCMAC APROVE CMCP

0.35

0.4

Figure 7.24: Probability that a cluster member will receive a message from its cluster head successfully versus vehicles density (R=200m), Vehicles contend for using the channel.

Probability of receiving CH message by a neighbor CH

1 Theoretical DMCMAC APROVE CMCP

0.9

0.8

0.7

0.6

0.5

0.4

0.05

0.1

0.15 0.2 0.25 0.3 Vehicles Density (vehicles/m)

0.35

0.4

Figure 7.25: Probability of successful transmission between neighboring cluster heads versus vehicles density (R=200m), Vehicles contend for using the channel.

140

1 0.9 0.8

Probability

0.7 0.6 0.5 0.4 DMCMAC APROVE CMCP 0.1 0.15 0.2 0.25 0.3 Vehicles Density (vehicles/m) 0.35 0.4

0.05

Figure 7.26: Probability that a CH will receive a message successfully from its neighbor CH versus vehicles density (R=200m). by simulation, especially for the DMCMAC protocol since it elects cluster heads based on their relative speeds and distances from their cluster members. The new selected cluster head in DMCMAC always selects a subchannel that is different from its front neighbor. This will help vehicles to send their messages with less vulnerable to the hidden terminal problem compared with other protocols such as CMCP [97] and APROVE [99]. These protocols find difficulties to deliver their cluster head's messages to cluster members especially in high density networks. On the other hand, they perform better than DMCMAC in low density networks since they build smaller cluster size compared to DMCMAC as shown in Figure 7.22. Figure 7.26 shows the probability for a CH to receive a message successfully form its neighbor CH versus vehicle density and compare it with CMCP [97]. In this simulation and in contrast to Figure 7.25, we let vehicles in DMCMAC and CMCP use scheduling and TDMA to access the channel, respectively. It is clear that the performance of the proposed DMCMAC way exceeds the other protocol specially in high density networks. This is because DMCMAC does not invoke the CH election process frequently, maintains the elected cluster head in its cluster center and hand the responsibility to the backup CH when it has more 141

coverage than the current CH. On the other hand, CMCP protocol invokes the CH election very frequently with more control messages to elect their cluster heads and do not maintain the elected cluster head in its cluster center such as in DMCMAC. Figure 7.27 shows the cluster management overhead percentage when the communication range is 100 meters as a function of vehicle density for both the proposed DMCMAC and CMCP protocols. The cluster overhead in DMCMAC is due to the three extra messages sent by the CH in every CCI interval to manage the cluster membership. This metric is calculated by dividing the size if the extra messages by the total size of all messages sent during the CCI interval. It is obvious that as the vehicle density increases, the overhead percentage decreases since more vehicles manage to send their status messages. In DMCMAC, the overhead is much lower than that of CMCP since the CH in DMCMAC has a role of selecting a backup CH that will take the responsibility of the cluster if it has higher stability factor than the current CH. This increases the dwell time of the cluster members, the CH's life time and hence the stability of the cluster topology.
10

9

DMCMAC R=100m CMCP R=100m

Overhead Percentatge (%)

8

7

6

5

4

3

2 0.05

0.1

0.15

0.2

0.25

0.3

0.35

0.4

Vehicles Density (vehicles/m)

Figure 7.27: Cluster management overhead versus vehicle density for range R=100m.

142

From all preceding figures, it can be seen that the performance of DMCMAC exceeds the performance of both CMCP and APROVE. This is due to its learning capability and the feature of selecting a backup cluster head to take over the main cluster head's responsibilities when it has more coverage. The algorithm of changing the communication range when the number of cluster members reaches a certain threshold helps to maintain a high reliability compared to CMCP and APROVE, especially in high density networks.

7.5

Summary

In this chapter, a novel clustering and mobility based MAC protocol for VANETs is proposed. Cluster heads are elected and reelected in a distributed manner according to their relative speed and distance from their cluster members. The high stability of DMCMAC results from its adaptability to drivers behavior on the road and its learning process to predict the future speed and position of all cluster members using the fuzzy logic inference system. In high density scenarios, the CH in DMCMAC has two options in order to increase the network's reliability and stability. First, it can change the used communication range based on the sensed vehicle density to allow all of its members to send their status messages within the CCI interval. Second, it can select a certain set of vehicles, that are more vulnerable to cross the cluster boundary, to send their status messages. The created clusters exhibit long average CH's life time and long average dwell time for its members. Status messages are exchanged within a cluster following a sequence that is advertised by the cluster head. Therefore, its reliability is the same as in TDMA schemes but without the hassle of reserving time slots and much more than fully contention based schemes. Moreover, CHs have to select one of four subcarrier sets that is different from their neighbors to eliminate the hidden terminal problem. The reliability of DMCMAC is analyzed. The cluster size, the probability of successfully receiving a message sent by a cluster head or a cluster member and the average travel time for an emergency message to reach certain distance are derived. From the comparison with some multichannel clustering protocols, it is clear that DMCMAC has 143

high stability, its performance exceeds other protocols and can achieve a timely and reliable delivery of emergency messages to their intended recipients. The analytical results match those obtained via simulation.

144

Chapter 8 Conclusions and Future Work
8.1 Conclusions

The focus of this dissertation is to develop scientifically rigorous and practically deployable solutions to support the new generation of vehicular safety applications. It tackles the theory and design challenges of Medium Access Control (MAC) protocol, specifically for the vehicular safety application in a harsh vehicular environment. The research addresses the mobility, frequent link ruptures, stringent time delay and the multi-path propagation that are expected to be prevalent in VANETs. We also introduce adaptive adjustment algorithms for the sending rates, transmission power among vehicles and the contention window based on the sensed vehicle's density. The IEEE community is adopting the IEEE 802.11p as the main technology for VANETs to support protocols and applications over Inter-Vehicle Communications (IVC) and Vehicleto-Roadside communication (V2R). To test the new applications and protocols on a real setup is very difficult and very costly; hence, simulation is used to study and analyze VANETs. Therefore, we begin this dissertation with the analysis of the PHY and MAC layers of the DSRC technology to build a simulation setup that best characterize VANETs' wireless channel and the movements of their nodes (vehicles). The radio channel in VANETs is very complex and has many parameters that affect the amplitude and phase of the received signal. Therefore choosing the optimal propagation model that best characterize VANETs channel is the challenge that faces researchers in vali145

dating and testing the new applications and protocols. Through analysis and simulations, we showed that Ricean and Nakagami (in general) distributions are the appropriate models to describe the received signal in a highway scenario. Based on these findings, the communication range in the vehicular environment is derived. Moreover, we derived the recommended maximum one hop range that minimizes the collision's probability and the impact of the hidden terminal problem. The mobility model is a crucial part in analyzing and testing VANETs. Therefore, a new mobility model is built, that takes into account the vehicle's follow-on safety rule, to accurately derive the relationship between vehicle's speed and network density. We also derive the distribution of vehicles on the road which affects the link availability and duration of connection between vehicles. For VANET's safety applications to run effectively, it is necessary to have a highly reliable Medium Access Control (MAC) protocol, such that vital safety messages are not lost. In fact, the efficiency of VANETs depends on the performance and reliability of their MAC protocol which must be decentralized to fit their ad hoc nature. The MAC protocol should cope with the fast changing topology of VANETs and their uneven node density on the road. Therefore, we present an analytical model to analyze the reliability of the IEEE 802.11p in VANETs safety and warning applications. The analysis is based on the new mobility model to make it more close to reality. In the analysis, several factors have been considered, such as the impact of mobility on the link availability between the transmitter and the receiver, the distribution of vehicles on the road and the average number of vehicles within the range of the transmitter. It is shown from the analytical and simulation results that the current DSRC specifications may lead to undesirable performance under harsh vehicular environments. Therefore, a new adaptive algorithm, Adaptive and Mobility Based Algorithm (AMBA), is introduced to enhance VANET's reliability. By using the AMBA algorithm, vehicles are able to estimate the vehicle density and change their transmission parameters accordingly based on their current average speed to enhance VANETs' performance. The simulation results,

146

which coincide with the analytical results, show that the proposed model is quite accurate in calculating the system reliability. Although this algorithm enhances the performance of the DSRC, still there is a need for a novel MAC protocol that is more suitable for VANETs to alleviate the impact of the hidden terminal problem, increase the network capacity and reliability. It is expected that broadcasting will be a major building block for VANETs safety applications and protocols. As those wireless networks tend to grow in terms of number of vehicles within a certain geographic area, their applications that use broadcasting will face a challenge in managing the channel capacity and alleviating the broadcast storm problem. Therefore, we introduced a new scheme, called Network Topology p-Persistence (NTPP), to alleviate the impact of the broadcast storm problem. NTPP is based on vehicles' knowledge of their neighbors in their range and traffic parameters to reduce the channel contention, redundant re-broadcasts and message travel time and to increase the message reception rate. After all previous analysis and simulations, a novel clustering based MAC protocol for VANETs is proposed. The new protocol is called Distributed Multichannel and Mobility Aware Cluster-based MAC Protocol (DMCMAC). Cluster heads in DMCMAC are elected and reelected in a distributed manner according to their relative speed and distance from their cluster members. The high stability of DMCMAC results from its adaptability to drivers behavior on the road and its learning process to predict the future speed and position of all cluster members using the fuzzy logic inference system. In high density scenarios, the cluster head in DMCMAC has two options in order to increase the network's reliability and stability. First, it can change the used communication range based on the sensed vehicle density to allow all of its members to send their status messages within the CCI interval. Second, it can select a certain set of vehicles, that are more vulnerable to cross the cluster boundary or change their status, to send their status messages. The created clusters exhibit long average cluster head's life time and long average dwell time for its members. Status messages are exchanged within a cluster following a sequence that is advertised by the cluster

147

head. Therefore, its reliability is the same as in TDMA schemes but without the hassle of reserving time slots and much more than fully contention based schemes. Moreover, cluster heads have to select one of four subcarrier sets that is different from their neighbors to eliminate the hidden terminal problem. The reliability of DMCMAC is analyzed. The cluster size, the probability of successfully receiving a message sent by a cluster head or a cluster member and the average travel time for an emergency message to reach certain distance are derived. From the comparison with some multichannel clustering protocols, it is clear that DMCMAC has high stability, its performance exceeds other protocols and can achieve a timely and reliable delivery of emergency messages to their intended recipients. The analytical results match those obtained via simulation. The outcomes of this work will contribute to the state-of-the-art research toward new standards and design policies for future-generation vehicular ad hoc networks. They will also facilitate the development of numerous safety and commercial vehicular applications that will increase safety, efficiency, reliability and security of the current transportation system which will revolutionize our traveling concept.

8.2

Future Work

This dissertation addresses several aspects related to the design of a new MAC protocol for vehicular ad hoc networks. However, there are some relevant issues that warrant further consideration in the future work. For instance, we have considered, in this work, homogenous networks where all vehicles have the same communication range, use the same transmission rate, and message frequency. However, it is important to test the new protocols and applications on a heterogenous network setup. Moreover, there is a need for dynamic algorithms for synchronizing the sending rates, transmission power among vehicles and adaptive adjustment techniques for the fair sharing of bandwidth between different channels. It is also necessary to tackle the theory and design challenges of an IP routing protocol that suits vehicular networks with the integration of a security system that is built on well148

established mechanisms and cryptographic primitives. The new IP routing protocol should take advantage of the cluster-based and multichannel MAC protocol that have been designed in this dissertation. Securing VANET's communications is an indispensable prerequisite for its deployment and real world use. The special characteristics of VANETs, the huge network size they can form and their open environment make them more vulnerable to security attacks than regular WLANs. The new deployed security system should be more efficient and reliable to insure confidentiality of drivers' identities and their data. Balancing security and privacy with safety is the ultimate challenge that should be tackled in the new IP routing protocol design.

149

Bibliography
[1] "Intellegent Transportation Canada," http://www.itscanada.ca/english/index.htm, 2011. [2] World Health Organization (WHO), "World report on road traffic injury prevention," http://www.searo.who.int/LinkFiles/whd04 Documents summary en rev.pdf, 2010. [3] IEEE802.org, "IEEE 802.15 WPAN Task Group 1a (TG1a),"

http://www.ieee802.org/15/pub/TG1a.html, July 2009. [4] IEEE802-org, "IEEE 802.15 WPAN Task Group 3 (TG3),"

http://www.ieee802.org/15/pub/TG3.html, July 2009. [5] IEEE802.org, "IEEE 802.15 WPAN Task Group 4 (TG4),"

http://www.ieee802.org/15/pub/TG4.html, July 2009. [6] U.S Department of Transportation, "Vehicle safety communications project task 3 final report: Identify intelligent vehicle safety applications enabled by DSRC," http://www.its.dot.gov/research docs/pdf/59vehicle-safety.pdf, March 2005. [7] H. Hartenstein, B. Bochow, A. Ebner, M. Lott, M. Radimirsch, , and D. Vollmer, "Position-Aware Ad Hoc Wireless Networks for Inter-Vehicle Communications: The FleetNet Project," Proceedings of the 2nd ACM international Symposium on Mobile Ad Hoc Networking and Computing, pp. 259­262, 2001.

150

[8] M. Torrent-Moreno, S. Schnaufer, R. Eigner, C. Catrinescu, and J. Kunisch, "NoW Network on Wheels: Project Objectives, Technology and Achievements," 5th International Workshop on Intelligent Transportation (WIT), pp. 211­216, March 2008. [9] D. Reichardt, M. Miglietta, L. Moretti, P. Morsink, and W. Schulz, "CarTALK 2000: Safe and Comfortable Driving Based upon Inter Vehicle Communication," IEEE Intelligent Vehicle Symposium, vol. 2, pp. 545­550, 2003. [10] "Car 2 Car Communiaction Consortium Manifesto, version 1.1, technical report," http://www.car-to-car.org, 2007. [11] "Vehicle Infrastructure Integration (VII) Initiative," http://www.vehicle-

infrastructure.org/WhatsVII.htm, 2011. [12] Network Simulator 2 (ns2), "Discrete Event Network Simulator,"

http://nsnam.isi.edu/nsnam/index.php/Main Page, April 2009. [13] Q. Xu, T. Mak, J. Ko, and R. Sengupta, "Vehicle-to-vehicle safety messaging in DSRC," Proceedings of the 1st ACM international workshop on Vehicular ad hoc networks, pp. 19­28, 2004. [14] IntelliDrive, "DSRC and Proof of Concept Test,"

http://www.intellidriveusa.org/library/rept-dsrc-poc.php, 2009. [15] K. Jin and D. Cho, "Multi-code MAC for multi-hop wireless ad hoc networks," Vehicular Technology Conference, vol. 2, pp. 1100­1104, 2002. [16] F. Borgonovo, A. Capone, M. Cesana, and L. Fratta, "ADHOCMAC: a new, flexible and reliable MAC architecture for ad-hoc networks," Vehicular Technology Conference, vol. 5, pp. 2789­2793, Oct. 2003. [17] K. Tokuda, M. Akiyama, and H. Fujii, "DOLPHIN for inter-vehicle communications system," Intelligent Vehicles Symposium, pp. 504­509, 2000. 151

[18] O. Bazan and M. Jaseemuddin, "Performance analysis of directional CSMA/CA in the presence of deafness," IET Communications, vol. 4, no. 18, pp. 2252 ­2261, Dec. 2010. [19] L. Michael and M. Nakagawa, "Power control and sector antennas for improved DSSS inter-vehicle communication," The Ninth IEEE International Symposium on Personal, Indoor and Mobile Radio Communications, vol. 2, pp. 921 ­925, Sept. 1998. [20] K. Young-Bae, V. Shankarkumar, and N. Vaidya, "Medium access control protocols using directional antennas in ad hoc networks," Proceedings of the Nineteenth Annual Joint Conference of the IEEE Computer and Communications Societies (INFOCOM), vol. 1, pp. 13 ­21, 2000. [21] IEEE Standard for Information technology, "Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) specifications Amendment 8: Medium Access Control (MAC) Quality of Service Enhancements," IEEE Std. 802.11e-2005 Amendment to IEEE Std 802.11. [22] ASTM International, "Standard Specification for Telecommunications and Information Exchange Between Roadside and Vehicle Systems 5 GHz Band Dedicated Short Range Communications (DSRC) Medium Access Control (MAC) and Physical Layer (PHY) Specifications," April 2009. [23] IEEE, "IEEE P802.11p/D5.0 Draft Amendments for Wireless Access in Vehicular Environments (WAVE)," http://ieeexplore.ieee.org/servlet/opac?punumber=4810961, April 2010. [24] IEEE P1609.1, "Trial-use standard for wireless access in vehicular environments (WAVE) resource manager," 2006. [25] IEEE P1609.2, "Trial-use standard for wireless access in vehicular environments (WAVE) security services for applications and management messages," 2006.

152

[26] IEEE P1609.3, "Trial-use standard for wireless access in vehicular environments (WAVE) networking services," 2007. [27] IEEE P1609.4, "Trial-use standard for wireless access in vehicular environments (WAVE) multi-channel operation," 2006. [28] D. Jiang and L. Delgrossi, "IEEE 802.11p: Towards an international standard for wireless access in vehicular environments," Proc. IEEE Vehicular Technology Conf., pp. 2036 ­2040, May 2008. [29] IETF Working Group, "Optimized Link State Routing Protocol (OLSR),"

http://www.ietf.org/rfc/rfc3626.txt, 2003. [30] IETF Working-Group, "The Dynamic Source Routing Protocol (DSR) for Mobile Ad Hoc Networks for IPv4," http://www.ietf.org/rfc/rfc4728.txt, 2007. [31] IETF Working Group, "Ad hoc On-Demand Distance Vector (AODV) Routing," http://www.ietf.org/rfc/rfc3561.txt, 2003. [32] Z. J. Haas and M. R. Pearlman, "The zone routing protocol: A hybrid framework for routing in ad hoc networks," Ad Hoc Networks, C. E. Perkins, Ed. Reading, MA: Addison-Wesley, 2000. [33] U.S. Goverment, "Global Positioning System (GPS)," http://www.gps.gov/, 2009. [34] B. Gallagher, H. Akatsuka, and H. Suzuki, "Wireless Communications for Vehicle Safety: Radio Link Performance and Wireless Connectivity Methods," IEEE Vehicular Technology Magazine, vol. 1, pp. 4­24, Dec. 2006. [35] T. S. Rappaport, Wireless Communications Principles and Practice. 2002. [36] Cheng, L. and Henty, B.E. and Cooper, R. and Stancil, D. D. and Fan, B., "A Measurement Study of Time-Scaled 802.11a Waveforms Over The Mobile-to-Mobile Vehicular 153 Printece-Hall,

Channel at 5.9 GHz," IEEE Communications Magazine, vol. 46, no. 5, pp. 84­91, May 2008. [37] J. Yin, T. ElBatt, G. Yeung, B. Ryu, S. Habermas, H. Krishnan and T. Talty, "Performance evaluation of safety applications over DSRC vehicular ad hoc networks," Proceedings of the 1st ACM international workshop on Vehicular ad hoc networks, Oct. 2004. [38] M. Torrent-Moreno, S. Corroy, F. Schmidt-Eisenlohr, and H. Hartenstein, "IEEE 802.11-based one-hop broadcast communications: understanding transmission success and failure under different radio propagation environments," Proceedings of the 9th ACM international symposium on Modeling analysis and simulation of wireless and mobile systems, pp. 68­77, 2006. [39] A. Wegener, M. Piorkowski, M. Raya, H. Hellbruck, S. Fischer, and J.-P. Hubaux, "TraCI: An interface for coupling road traffic and network simulators," Wireless Communcations and Mobile Computing, WILEY, pp. 813­828, 2009. [40] D. R. Choffnes and F. Bustamante, "An integrated mobility and traffic model for vehicular wireless networks," Proceedings of the 2nd ACM international workshop on Vehicular ad hoc networks, pp. 69­78, 2005. [41] W.-L. Jin and W. Recker, "An analytical model of multihop connectivity of intervehicle communication systems," IEEE Trans. Wireless Communications, vol. 9, no. 1, pp. 106­112, Jan. 2010. [42] M. Khabazian and M. Ali, "A performance modeling of connectivity in vehicular ad hoc networks," IEEE Trans. Vehicular Tech., vol. 57, no. 4, pp. 2440­2450, July 2008. [43] A. Ghasemi and S. Nader-Esfahani, "Exact probability of connectivity one-dimensional ad hoc wireless networks," IEEE Communication Letters, vol. 10, no. 4, pp. 251­253, April 2006. 154

[44] M. Desai and D. Manjunath, "On the connectivity in finite ad hoc networks," IEEE Communication Letters, vol. 6, no. 10, pp. 437­439, Oct. 2002. [45] M. Abou El Saoud, H. Al-Zubaidy, and S. Mahmoud, "Connectivity Model for Wireless Mesh Networks," Proc. IEEE Intl. Conf. Communications, pp. 2889­2894, May 2008. [46] S. Yousefi, E. Altman, R. El-Azouzi, and M. Fathy, "Analytical model for connectivity in vehicular ad hoc networks," IEEE Trans. Vehicular Tech., vol. 57, no. 6, pp. 3341 ­3356, Nov. 2008. [47] J. Harri, F. Filali, and C. Bonnet, "Mobility models for vehicular ad hoc networks: a survey and taxonomy," IEEE Communications Surveys and Tutorials, vol. 11, no. 4, pp. 19­41, Fourth Quarter 2009. [48] F. J. Martinez, C. K. Toh, J.-C. Cano, C. T. Calafate, and P. Manzoni, "A survey and comparative study of simulators for vehicular ad hoc networks (VANETs)," The 11th Communications and Networking Simulation Symposium, CNS08, pp. 155­163, 2008. [49] C. Sommer and F. Dressler, "Progressing toward realistic mobility models in VANET simulations," IEEE Communications Magazine, vol. 46, no. 11, pp. 132 ­137, Nov. 2008. [50] C. Sommer, R. German, and F. Dressler, "Bidirectionally Coupled Network and Road Traffic Simulation for Improved IVC Analysis," IEEE Trans. Mobile Computing, vol. 10, no. 1, pp. 3 ­15, Jan. 2011. [51] OMNeT++, "component-based, Modular and Open-architecture discrete event simulation framework," http://www.omnetpp.org/, 2011. [52] F. K. Karnadi, Z. H. Mo, and K. C. Lan, "Rapid generation of realistic mobility models for VANET," Proc. IEEE Wireless Communications and Networking Conf., pp. 2506­2511, March 2007. 155

[53] D. Krajzewicz, G. Hertkorn, C. Rssel, and P. Wagner, "SUMO (Simulation of Urban MObility). ; An open-source traffic simulation." In 4th Middle East Symposium on Simulation and Modelling (MESM2002), Sharjah, United Arab Emirates, pp. 183­187, Sept. 2002. [54] K. Hafeez, L. Zhao, L. Zaiyi, and B.-W. Ma, "The optimal radio propagation model in VANET," Fourth International Conference on Systems and Networks Communications (ICSNC), pp. 6 ­11, Sept. 2009. [55] J. G. Proakis and M. Salehi, Digital Communications. McGrawHill, 2008. [56] D. Miorandi and E. Altman, "Connectivity in one-dimensional ad hoc networks: a queueing theoretical approach," Wireless Networks, vol. 12, no. 5, pp. 573­587, Sep. 2006. [57] K. A. Hafeez, L. Zhao, Z. Liao, and B. Ma, "Impact of mobility on VANETs safety applications," Proc. IEEE Globecomm Conf., Dec. 2010. [58] R. P. Roess, E. S. Prassas and W. R. Mcshane, Traffic Engineering 3rd edn. Englewood Cliffs, Pearson Prentice Hall, 2004. [59] A. McDonald and T. Znati, "A mobility-based framework for adaptive clustering in wireless ad hoc networks," IEEE J. Select. Areas Communications, vol. 17, no. 8, pp. 1466­1487, Aug. 1999. [60] L. Kleinrock, Queueing Systems: Volume I - Theory. New York: Wiley Interscience, 1975. [61] X. Li, T. Nguyen, and R. Martin, "An Analytic Model Predicting the Optimal Range for Maximizing 1-Hop Broadcast Coverage in Dense Wireless Networks," In Proceedings of International Conference on Ad-Hoc Networks and Wireless, pp. 172­182, July 2004. 156

[62] M. Torrent-Moreno, F. Schmidt-Eisenlohr, H. Fubler, and H. Hartenstein, "Effects of a realistic channel model on packet forwarding in vehicular ad hoc networks," Proc. IEEE Wireless Communications and Networking Conf., vol. 1, pp. 385­391, April 2006. [63] M. Torrent-Moreno, D. Jiang, and H. Hartenstein, "Broadcast reception rates and effects of priority access in 802.11-based vehicular ad-hoc networks," Proceedings of the 1st ACM international workshop on Vehicular ad hoc networks, pp. 10­18, 2004. [64] Y. Tseng, S. Ni, Y. Chen, and J. Sheu, "The broadcast storm problem in a mobile ad hoc network," Wireless Networks, vol. 8, no. 2/3, pp. 153­167, 2002. [65] N. Wisitpongphan, O. Tonguz, J. Parikh, P. Mudalige, F. Bai, and V. Sadekar, "Broadcast storm mitigation techniques in vehicular ad hoc networks," IEEE Trans. Wireless Communications, vol. 14, no. 6, pp. 84­94, Dec. 2007. [66] M. Torrent-Moreno, "Inter-vehicle communications: assessing information dissemination under safety constraints," Wireless on Demand Network Systems and Services. Fourth Annual Conference on, pp. 59­64, Jan. 2007. [67] M. Torrent-Moreno, P. Santi, and H. Hartenstein, "Fair sharing of bandwidth in vanets," pp. 49­58, 2005. [68] K. Ibrahim, M. Weigle, and M. Abuelela, "p-IVG: Probabilistic inter-vehicle geocast for dense vehicular networks," Vehicular Technology Conference (VTC), April 2009. [69] C. Sommer, O. Tonguz, and F. Dressler, "Traffic information systems: efficient message dissemination via adaptive beaconing," IEEE Communications Magazine, vol. 49, no. 5, pp. 173 ­179, May 2011. [70] O. Tonguz, N. Wisitpongphan, and F. Bai, "DV-CAST: A distributed vehicular broadcast protocol for vehicular ad hoc networks," IEEE Trans. Wireless Communications, vol. 17, no. 2, pp. 47 ­57, April 2010. 157

[71] Q. Chen, F. Schmidt-Eisenlohr, D. Jiang, M. Torrent-Moreno, L. Delgrossi, and H. Hartenstein, "Overhaul of IEEE 802.11 modeling and simulation in ns-2," Proceedings of the 10th ACM Symposium on Modeling, analysis, and simulation of wireless and mobile systems, pp. 159­168, 2007. [72] M. Torrent-Moreno, J. Mittag, P. Santi, and H. Hartenstein, "Vehicle-to-vehicle communication: Fair transmit power control for safety-critical information," IEEE Trans. Vehicular Tech., vol. 58, no. 7, pp. 3684­3703, Sep. 2009. [73] D. Jiang, Q. Chen, and L. Delgrossi, "Optimal data rate selection for vehicle safety communications," Proceedings of the fifth ACM international workshop on VehiculAr Inter-NETworking, pp. 30­38, 2008. [74] K. Bilstrup, E. Uhlemann, E. Strom, and U. Bilstrup, "On the ability of the 802.11p MAC method and STDMA to support real-time vehicle-to-vehicle communication," EURASIP Journal on Wireless Communications and Networking, 2009. [75] Z. Wang and M. Hassan, "How much of dsrc is available for non-safety use?" Proceedings of the fifth ACM international workshop on VehiculAr Inter-NETworking, pp. 23­29, 2008. [76] D. X. Xu, T. Sakurai, and H. L. Vu, "An access delay model for ieee 802.11e EDCA," IEEE Trans. Mobile Computing, vol. 8, no. 2, pp. 261 ­275, Feb. 2009. [77] J. Y. Lee and H. S. Lee, "A performance analysis model for IEEE 802.11e EDCA under saturation condition," IEEE Trans. Communications, vol. 57, no. 1, pp. 56 ­63, Jan. 2009. [78] G. Bianchi, "Performance analysis of the IEEE 802.11 distributed coordination function," IEEE J. Select. Areas Communications, vol. 18, no. 3, pp. 535­547, March 2000.

158

[79] X. Ma and X. B. Chen, "Delay and Broadcast Reception Rates of Highway Safety Applications in Vehicular Ad Hoc Networks," Mobile Networking for Vehicular Environments, pp. 85­90, May 2007. [80] S. Eichler, "Performance evaluation of the IEEE 802.11p WAVE communication standard," Proc. IEEE Vehicular Technology Conf., pp. 2199­2203, 2007. [81] X. Ma and X. Chen, "Performance analysis of IEEE 802.11 broadcast scheme in ad hoc wireless LANs," IEEE Trans. Vehicular Tech., vol. 57, no. 6, pp. 3757 ­3768, Nov. 2008. [82] X. Ma, J. Zhang, and T. Wu, "Reliability analysis of one-hop safety-critical broadcast services in VANETs," IEEE Trans. Vehicular Tech., vol. 60, no. 8, pp. 3933 ­3946, Oct. 2011. [83] R. Fracchia and M. Meo, "Analysis and design of warning delivery service in intervehicular networks," IEEE Trans. Mobile Computing, vol. 7, pp. 832 ­845, July 2008. [84] M. Hassan, H. Vu, and T. Sakurai, "Performance analysis of the IEEE 802.11 MAC protocol for DSRC safety applications," IEEE Trans. Vehicular Tech., vol. 60, no. 8, pp. 3882 ­3896, Oct. 2011. [85] W. L. Jin and W. Recker, "An analytical model of multihop connectivity of intervehicle communication systems," IEEE Trans. Wireless Communications, vol. 9, no. 1, pp. 106 ­112, Jan. 2010. [86] M. Abuelela, S. Olariu, and I. Stojmenovic, "OPERA: Opportunistic packet relaying in disconnected vehicular ad hoc networks," 5th IEEE International Conference on Mobile Ad Hoc and Sensor Systems, pp. 285 ­294, 2008. [87] K. A. Hafeez, L. Zhao, Z. Liao, and B. Ma, "A new broadcast protocol for vehicular ad hoc networks safety applications," Proc. IEEE Globecomm Conf., Dec. 2010. 159

[88] T. K. Mak, K. P. Laberteaux, and R. Sengupta, "A multi-channel VANET providing concurrent safety and commercial services," Proceedings of the 2nd ACM international workshop on Vehicular ad hoc networks, pp. 1­9, 2005. [89] K. A. Hafeez, L. Zhao, Z. Liao, and B. Ma, "Performance analysis of broadcast messages in VANETs safety applications," Proc. IEEE Globecomm Conf., Dec. 2010. [90] K. Bilstrup, E. Uhlemann, E. Strom, and U. Bilstrup, "Evaluation of the IEEE 802.11p MAC method for vehicle-to-vehicle communication," Proc. IEEE Vehicular Technology Conf., Sept. 2008. [91] J. Blum and A. Eskandarian, "A reliable link-layer protocol for robust and scalable intervehicle communications," IEEE Trans. Intelligent Transportation Systems, vol. 8, no. 1, pp. 4 ­13, March 2007. [92] G. Abdalla, M. Abu-Rgheff, and S. M. Senouci, "Space-orthogonal frequency-time medium access control (SOFT MAC) for VANET," Global Information Infrastructure Symposium, 2009. GIIS '09, pp. 1­8, June 2009. [93] Y. Lai, P. Lin, W. Liao, and C. Chen, "A region-based clustering mechanism for channel access in vehicular ad hoc networks," IEEE Journal on Selected Areas in Communications, vol. 29, no. 1, pp. 83­93, Jan. 2011. [94] M. Gerla and J. T. Tsai, "Multicluster, mobile, multimedia radio network," Journal of Wireless Networks, vol. 1, pp. 255­265, Aug. 1995. [95] H. Wu, Z. Zhong, and L. Hanzo, "A cluster-head selection and update algorithm for ad hoc networks," Proc. IEEE Globecomm Conf., Dec. 2010. [96] M. Chatterjee, S. K. Das, and D. Turgut, "WCA: A weighted clustering algorithm for mobile ad hoc networks," Cluster Computing, vol. 5, pp. 193­204, 2002.

160

[97] H. Su and X. Zhang, "Clustering-based multichannel MAC protocols for QoS provisionings over vehicular ad hoc networks," IEEE Trans. Vehicular Tech., vol. 56, no. 6, pp. 3309 ­3323, Nov. 2007. [98] M. Ni, Z. Zhong, and D. Zhao, "MPBC: A mobility prediction-based clustering scheme for ad hoc networks," IEEE Trans. Vehicular Tech., vol. 60, no. 9, pp. 4549­4559, Nov. 2011. [99] C. Shea, B. Hassanabadi, and S. Valaee, "Mobility-based clustering in VANETs using affinity propagation," Proc. IEEE Globecomm Conf., Dec. 2009. [100] Y. Gunter, B. Wiegel, and H. Grossmann, "Cluster-based medium access scheme for VANETs," IEEE Intelligent Transportation Systems Conference, ITSC., pp. 343­348, Oct. 2007. [101] N. Lu, Y. Ji, F. Liu, and X. Wang, "A Dedicated Multi-Channel MAC Protocol Design for VANET with Adaptive Broadcasting," IEEE Wireless Communications and Networking Conference (WCNC), April 2010. [102] T. Luo, M. Motani, and V. Srinivasan, "CAM-MAC: A cooperative asynchronous multi-channel mac protocol for ad hoc networks," The 3rd International Conference on Broadband Communications, Networks and Systems, Oct. 2006. [103] D. Lee, R. Attias, A. Puri, R. Sengupta, S. Tripakis, and P. Varaiya, "A wireless token ring protocol for intelligent transportation systems," IEEE Trans. Intelligent Transportation Systems, pp. 1152 ­1157, 2001. [104] Y. Bi, K. Liu, L. Cai, X. Shen, and H. Zhao, "A multi-channel token ring protocol for QoS provisioning in inter-vehicle communications," IEEE Trans. Wireless Communications, vol. 8, no. 11, pp. 5621 ­5631, Nov. 2009.

161

[105] J. Jang, C. Sun, and E. Mizutani, Neuro-Fuzzy and Soft Computing: A Computational Approach to Learning and Machine Intelligence. Prentice-Hall, 1997. [106] "Cognitive Radio Cognitive Network (CRCN) Simulator,"

http://stuweb.ee.mtu.edu/~ ljialian/index.htm, 2011.

162


