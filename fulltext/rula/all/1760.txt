Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2009

Self-Contained Pedestrian Tracking With Mems Sensors
Chengliang Huang
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
Huang, Chengliang, "Self-Contained Pedestrian Tracking With Mems Sensors" (2009). Theses and dissertations. Paper 1117.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

SELF -CONTAINED PEDESTRIAN TRACKING WITH MEMS SENSORS
by
Chengliang Huang
Bachelor of Science, Electronic Engineering Fudan University, 1990

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of

Master of Applied Science
in the Program of

Electrical and Computer Engineering

Toronto, Ontario, Canada, 2009
©

Chengliang Huang 2009

PROPERlY OF RYERSON UNIVERSITY LIBRARY

Author's Declaration
I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

Signature

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

Signature

ii
L_,; ·· · ~ . !

~· !

r.:

.: . ·. ·11

, :t

:: .

Ryerson University requires the signature of all persons using or photocopying this thesis. Please sign below, and give address and date.

iii

Self-contained Pedestrian Tracking with MEMS Sensors, 2009, Chengliang Huang, MASc, Electrical and Computer Engineering, Ryerson University

Abstract

Due to the limitations of current indoor wireless positioning technologies, a novel positioning/tracking solution has to be explored and developed, in order to locate a person anywhere anytime without any infrastructure. The purpose of this thesis is to present the result of the first phase of a long-period research to find such a solution and develop a practical system. In this thesis, using inertial sensors for positioning of people is selected to replace wireless solutions, considering the development of micro-electromechanical systems. A sensing module consisting of accelerometers, rate gyroscopes and magnetometers is used to monitor human kinetics. In order to make this proposal practical, a synergy of existing strapdown inertial navigation and pedestrian dead-reckoning is proposed to improve the accuracy of positioning. Furthermore, the cyclic alternation of stance phase and swing phase in human walking is used to reduce errors accumulating during projection and integration of sensed accelerometer signals. Other than the improvement of some existing methods to detect stance phase and reset the velocity, several new methods are proposed to remove the integral drift during both phases of a human stride. The algorithm to calculate heading of on the sensing module is also deduced to limit the integral drift of rate gyroscopes. All the methods and algorithms are applied in field experiments with carefully chosen sensing module mounted on human footware. The results show promising accuracy of tracking, hence validate the feasibility of self-contained pedestrian tracking system with inertial sensors. Further work, especially with map correlation and particle filtering, will be done in the coming phases of the project to make the system applicable both outdoor and indoor.

iv

Acknowledgements
I would like to express my sincere gratitude to Dr. Lian Zhao and Dr. Zaiyi Liao. Without their professional directions, helpful suggestions, important advice and constant encouragement, this research work would not have been possible. I also wish to express my appreciation to my friends and colleagues from Ryerson University for their constructive ideas and lasting friendship. Last but not least, I would like to express special thanks to my family, who always kept me away from daily chores and encouraged me to concentrate on my study.

v

Contents
1 Introduction
1.1 1.2

1

1.3

1.4

1.5

1.6 1.7

Overview .............................................................................. 3 Possible Applications ............................................................... .4 1.2.1 Personal Navigation Assistance .............................................. .4 1.2.2 Urban Search and Rescue ...................................................... 5 1.2.3 Mixed or Augmented Reality ................................................... 5 1.2.4 Ubiquitous Computing ........................ ................................. 6 Generic Requirements ............................................................... 7 1.3.1 Size and Weight. ................................................................ 7 1.3.2 Accuracy ......................................................................... 7 1.3.3 Precision ......................................................................... 7 1.3.4 Complexity ...................................................................... 8 1.3.5 Robustness ...................... ................................................. 9 1.3.6 Scalability ........................................................................ 9 1.3.7 Cost ........................................................................... IO Wireless Solutions .................................................................. 10 1.4.1 Wireless Technologies ........................................................ 10 1.4.2 Wireless System Topologies ................................................. 11 1.4.3 Wireless Positioning Algorithms ............................................ 12 1.4.4 Wireless System ............................................................... 13 1.4.5 Limitations of Wireless Solutions ............................................ 14 Inertial/Magnetic Sensors and MEMS Technology ............................ 15 1.5.1 Accelerometers ................................................................ 15 1. 5. 2 Rate Gyroscopes ............................................................... 16 1.5 .3 Magnetometers ................................................................ 17 1.5 .4 Micro-electromechanical Systems .......................................... 17 Our Proposed System ..................................... ......................... 18 Thesis Contribution and Outline ................................................. 20 1.7.1 Contribution ................................................................... 20 1.7.2 Thesis Outline ................................................................. 21

2

Tracking Methodology and Performance Analysis
2.1 2.2

23

Introduction ......................................................................... 23 Inertial Navigation System ........................................................ 23 2.2.1 Overview ...... ............................. . ................................... 23 2.2.2 Gimbaled INS ................................................................. 24
vi

2.3

2.4 2.5

2.6

2.2.3 Strapdown INS ................................................................. 25 Strapdown INS Algorithm ......................................................... 26 2.3.1 Reference Frames and Rotations ............................................ 27 2.3.2 Dynamic Orientation Tracking .............................................. 29 2.3.3 Position Tracking .............................................................. 32 Strapdown INS Performance Analysis .......................................... 33 Pedestrian Dead Reckoning ....................................................... 36 2.5.1 Dead Reckoning ............................................................... 36 2.5.2 Pedestrian Dead Recko ing .................................................. 36 PDR Performance Analysis ....................................................... 37

·3

Integral Drift Reduction
3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8

40

Introduction .......................................................................... 40 Human Gait .......................................................................... 42 Sensor Placement. .................................................................. 43 Stance Phase Detection ........................................................... .4 7 Quasi-Static Orientation Calculation .......................................... 50 Stance Phase Updates ......... .. ................................................... 55 Swing Phase Drift Correction ..................................................... 56 Calibration ........................................................................... 57

4

Field Experiments
4.1 4.2

61

Introduction .......................................................................... 61 Tools .................................................................................. 61 4.2.1 Requirements to Sensors ...................................................... 61 4.2.2 Sensor Selection ............................................................... 63 4.2.3 USB Board ..................................................................... 63 4.2.4 Power Supply ....................................................................... 64 4.2.5 Laptop Computer. ............................................................. 65 4.2.6 Auxiliary Tools ................................................................ 66 4.3 Methods .................................................... .. ........................ 66 4.3.1 Sites for Experiments ......................................................... 66 4.3.2 Sampling Rate .................................................................. 66 4.3.3 Installation ..................................................................... 67 4.3.4 MatLab Programming ........................................................ 68 4.4 Results ............................................................................... 70 4.5 Discussion ........................................................................... 80

5

Conclusion and Future Works
5.1

87

Conclusion ........................................................................... 87 5.1.1 Summary ........................................................................ 87 5 .1.2 Conclusion ..................................................................... 90 5.2 Future Work ......................................................................... 91
vii

5.2.1 5.2.2 5.2.3 5.2.4 5.2.5

Map Correlation and Particle Filtering ..................................... 92 Integration with GNSS ....................................................... 93 Application in Other Human Movement. ................................ .. 94 Reduction of the Impact of Temperature Change ........................ .94 Wireless Networking ......................................................... 95

Appendix: Abbreviation List Bibliography

96 99

viii

List of Tables
4.1 niMU specifications .................................................................. 63

ix

List of Figures
1.1

Wireless system topologies .. . ... ........... . ...... . .. . . . .... .. ........ . ........... . 11 Outline of current wireless based positioning systems . .. ............. . . . ....... 13 A targeted system ....... ......... . ........... ......................... . . ........ . ..... 19 Inertial navigation system ....................................... . ...... .. ........... 24 Gimbaled inertial platform .............. ............................................ 25 Strapdown navigation algorithm ............ . . . ...... . .... . ..... . .................. 26 Definition of the world and the body frame .. .. .... .. .... .... .......... .. ......... 27 Three sequential rotations from the global frame to body frame ............... 28 Average drift in position grows with time ........................................ .35 Geometry of a pedestrian walking path error in presence of step length and heading errors .... ..................... ................... . .................... . ....... 38

1.2 1.3 2.1 2.2 2.3 2.4 2.5 2.6 2. 7

· 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 3.10

Proposed integration of INS and PDR ........................ .. .. .. .............. .41 Stance phase in a stride .............................. ...................... . .... . .... 42 Acceleration magnitude comparison ........... . .. . ............................... .45 Magnetometer signal comparison ............ ................ . ... . ... . .... . ...... ..46 Measured angular velocity ... .......... ........... .. ......... . ............ .. .. . .... .48 Measured acceleration ............ . .. . . . ...... . ... ................... . ... . . .. . .... . .. 48 Measured magnetic field ..... . ........... . .................................. . ........ 49 x-tilt andy-tilt assignments relative to ground .................................... 51 Heading defined in the horizontal x-y plane ...................................... 52 Magnetometer output (x, y) rotated horizontally in the earth's field with both hard iron distortion and soft iron distortion ....................................... 59

3.11

Magnetometer output (x, y) rotated horizontally in the earth's field with both hard iron distortion and soft iron distortion compensated ......... .. ............ 60

4.1

Sensor module selected ......... .......................... . .......................... 62
X

4.2 4.3 4.4 4.5 4.6 4. 7 4.8 4.9 4.10 4.11 4.12 4.13 4.14 4.15 4.16 4.17 4.18 4.19 4.20 4.21

IMU and USB interface board connectivity .... .. ................................. 64 Battery pack .... .. ...... ............. . .. .................................... . .......... 65 The laptop computer used for field experiments .. .. .. ...... .. ............ .. .... . 65 IMU mounted on a shoe ........ . . ..... . .. ........ . ... .. .... .................... . .... 67 Flow chart of the MatLab program .................... .. .. ...... ..... . ............ 69 Original sensor signals ........ . ... . . . ................................................ 71 Pitch and roll of the sensor module during walking .............................. 72 Calculation of heading ...... . .. ... ... ................................................ 73 Angular velocity and rotated angles ................ .. .. .. ............ .. ............ 74 Body acceleration and projected global acceleration ............................ 75 Global velocities and displacements calculated ..... . .... .. .... ... ..... .......... 76 Walk along a square path .... .. ........ .. ............ .. .............................. 77 Walk along a rectangle ......... ...................................................... 78 Walk on a J-shaped path at a park .. ........ .. .............. .. ...................... 79 Walk at a track-and-field ground ................................................... 80 Velocities obtained without drift correction .. . ........ .. . . ... ......... .. ... . .. ·.... 82 Velocities obtained with drift correction ............ .. ............. .. .. .. ......... 83 The consequence of no swing phase drift correction ............................ 84 Sensor signals obtained from inside a building ...... .. ...................... ..... 85 Magnetic signals and calculated heading ................................ .. .... .. .. 86

xi

1. Introduction
According to the National Fire Protection Association (NFPA), from 2001 to 2004, there was an estimated annual average of 3 8,545 frrefighter fire ground injuries in the U.S [1]. Experts agreed that the risks firefighters face could be significantly reduced if they, and their commanders, knew exactly where they were in a smoke-filled building at all times. But finding a way through a blazing, smoke-filled building is never easy. The technical requirements for worst case scenarios are very demanding [2]:
-¢-

Unperceived building layout (i.e. no plan) Possibly damaged, strange environment Possibly zero visibility due to thick smoke Possibly no communication infrastructure Bad RF propagation due to frre, humidity and NLOS conditions Accuracy of less than 1-2 m or room scale Max range from last known reference point: 100-500m Fast update frequency of 1Hz

-¢-

-¢-

-¢-

-¢-

-¢-

-¢-

-¢-

Currently, to find a distressed firefighter, a personal safety device, called PASS (Personal Alert Safety System), is integrated with a wearable self-contained breathing apparatus (SCBA). When a lack of motion of a firefighter is sensed, the device is activated and emits a high-pitched audible alert of at least 95 decibels. Obviously, exact positions can not be known though this method.

Therefore, precise indoor tracking of people remains an open research problem, although GPS provides positioning outdoors. The initial purpose of the project is to explore the feasibility of developing a practical indoor positioning system to locate a person, especially a first responder inside a building. There can be a few wearable devices mounted on a human being but there should have no additional infrastructure for the positioning. That is to say, the system should be self-contained and infrastructure-free. In the end of the project, I am planning there is a prototype positioning system, or product, which is ready for commercial application. Hence, the project is not only interesting by nature and academically meaningful, but also of great value in the real life. However, such a project will last a long period of time, thus has to be implemented through several phases. This thesis is on the "phase one" of the project. During this phase, the requirements of such a system are to be understood, appropriate approaches are to be found, and suitable technologies are to be chosen. Then the technologies are further studied, the related algorithms are developed, their weaknesses are assessed. Finally, efforts are made to solve related problems, and the effect of these efforts is finally validated. This chapter is targeted to provide an introduction on the necessary background and preliminary exploration related to a tracking system for human being. The introduction covers the possible applications and thus the technical requirements of such a system, the wireless technologies applied in development of such a system and their limitations, and finally the knowledge on inertial and magnetic sensors, which are the center of the hardware of such a system to be developed in the future.

2

1.1 Overview
In this chapter, the target is to introduce the background of the research, not on the current research itself, which is focused on methodologies and its implementation through experiments. Such a background helps to build a grand view of the project, thus is important in understanding to critical decisions on how a certain technology was selected while others are abandoned. Such decisions prior to any phases of the research project are fundamental ones. Other decisions made during the phase one or the following phases, or during designing and developing a positioning system, will actually be the derivatives of this basic one. Hence, in the first chapter of the thesis, it is necessary to introduce how the fundamental decision was made based on the investigation to related background. The forming of grand v1ew starts from an investigation on the possible applications of the targeted location/tracking system. Other than the location of fire fighters or first responders, other important applications using tracking techniques are possible. These applications, which will be introduced in the section 1.2, add great value to the research. Based on possible applications of the system, a few important requirements to it are listed and further discussed in section 1.3. The understanding to the requirements of the system is important to make decision on selection a technology from available ones or invention of a new one. Since various wireless technologies for positioning and location are popular in literature. In section 1.4, they are reviewed and discussed to see if those requirements can be met. The result shows that there are disadvantages and limitations of wireless solutions.

3

Thus wireless solutions are not the best choice for location or tracking system to be researched in the project. Because of this, other technologies and solutions have to be explored. Since displacement can be achieved through double integration of acceleration of an object, inertial sensors become another category of technologies for location and tracking of a person. For self-contained application, these sensors should be miniature thus micro electro-mechanic systems (MEMS) technologies have to be used. In section 1.5, technologies about inertial sensors, magnetic sensors and MEMS are investigated respectively. In the end of this chapter, the contributions of the thesis are briefly summarized while the outline of this these is introduced.

1.2 Possible Applications
Although the position and tracking system to be explored and developed is originally intended to be used by fire fighters and first responders, there are a number of possible applications. They are summarized as follows.

1.2.1 Personal Navigation Assistance
A personal navigation assistant (PNA) is a portable electronic device with both positioning function and navigation capability. GPS is frequently chosen as a solution for personal navigation. A location and tracking system can also be used either independently for positioning or as a GPS back-up system. PNA based systems are more

4

flexible. It only relies on the same maps for both in-car and on-foot scenarios, providing optimal route descriptions for pedestrians [3].

1.2.2 Urban Search and Rescue
Urban search and rescue (USAR), also known as Urban SAR, is a public service provided by private companies, governments and some specialized organizations. When hazards such as earthquakes, cyclones, tornadoes, and hazardous materials releases occur, the task force of USAR will locate, extricate victims trapped in the confined spaces and provide, conduct first aid care. Victims may be trapped in collapsed structures and trenches, mines and transportation accidents. Obviously, the location of the victims must . be detected for an efficient rescue action [4]. This possible application in USAR is

similar to the application in rescuing a distressed firefighter or first responder in fire fighting operations.

1.2.3 Mixed or Augmented Reality
Mixed reality (MR) covers both augmented reality and augmented virtuality. Through MR, new environments and visualizations are produced, resulting in real time co-existence and interaction of both physical and digital objects, i.e., combination of both real and virtual worlds. MR must have the ability of location-aware computing. With "location" as a new data type in our applications and on Internet, devices are able to communicate with each other over new, standardized protocols. However, current positioning technologies used in wearable location-aware computing, including MR, need some settings: the environment must be instrumented,

5

marked, or pre-mapped. Such infrastructures are not practical for moving objects. Installing markers or instrumentation in advance is impractical for many mobile applications. Hence, other tracking methods, which will work reliably without preparation in any indoor or outdoor setting, have to be found. Computer vision is the leading contender, but enormous challenges remain to develop a robust vision-based tracker for general purpose use [5] [6]. Hence, a simpler self-contained tracking system will allow the user to move freely around a large scale environment.

1.2.4 Ubiquitous Computing
Different from virtual reality, where people are placed inside world generated by computer, ubiquitous computing, also referred to as pervasive computing, makes
th~

computers accompany with people in the real world. Ubiquitous computing is expected to
be the third wave in computing, after mainframes and personal computing. In the early

years, a computer was shared by many people. Nowadays, one person has a computer. In the coming era of ubiquitous computing, there are lots of computers for a person. Information processing will be completely embedded into everyday objects and activities. Many computational devices work together at the same time. As a basic service in ubiquitous computing environment, "context-aware service is with four basic functions of collecting, storing, reasoning and querying" [7]. Mostly because context information acquired is meaningless if its physical location is not determined, positioning of physical objects is one of the key problems in development of context-aware applications in ubiquitous computering [8] [9].

6

1.3 Generic Requirements
For location I tracking of a human being, a system should meet most of the following requirements:

1.3.1 Size and Weight
The device should be wearable for the convenience of the activities of a person. The size and weight of the device should be in the similar level of commercial available hand-hold devices.

1.3.2 Accuracy
Accuracy is the degree of closeness of a measured or estimated value to its referential, actual or true value. The term related with accuracy is bias, non-random effect caused by factors unrelated by the independent variable. A value without bias is a value of the highest accuracy. In location, accuracy, or location error, can be considered as a potential bias, or systematic offset of a positioning system. The performance metric for accuracy is mean distance error, which is the average Euclidean distance between the true location and the estimated location. Accuracy is an important requirement to a location system. This requirement can be varied in different applications.

1.3.3 Precision
Precision is the degree of reproducibility or repeatability, i.e., the ability of further estimation or measurements to demonstrate the same results. The term related to precision is error, i.e., random variability. A value without error is a value of the highest

7

precision. While accuracy only pay attention to the value of mean distance errors, precision focuses on how consistently a system works. Usually, precision is defined as the standard deviation in the error, which demonstrates the performance variation over many trials.

1.3.4 Complexity
Usually, complexity is used to characterize a system with many parts intricately arranged. In a positioning system, hardware, software or operation can be the cause of complexity. In this project, the focus is on hardware and software, and the balance between them. Usually, there is no applicable formula to analyze the complexity of different systems. In positioning, the update rate of location can be a measurement of complexity. However, in some applications, the requirement on update rate is not high. Hence, the location lag, the delay between a person moving a new position and the system reporting this new position, can be a better metric for system complexity. Due to the requirement of small size and low weight mentioned above, most of the wearable units will have less processing capability for longer battery life. Hence, the positioning algorithm should be implemented in a centralized station, if there is one. This will speed up the update rate while decrease the location lag. The requirement of simplicity, ease of operation and maintenance, can also be treated as a requirement on complexity.

8

1.3.5 Robustness
Robustness is the capability to maintain normal functions under unpredictable changes in certain procedure or circumstance. A position system with high robustness should minimize damage, alternation and loss of function within harsh environment. For example, a system for frrefighting must be able to withstand high temperatures, intensive thermal radiation and dense smoke. If wireless technology is used for communication between wearable units and centered stations, a robust system should be able to compute the location even the information provided is incomplete due to blockage to the radio signal between the transmitter and receiver. The requirement of high system reliability, i.e. the ability to recover from failure, can also be treated as a requirement on robustness.

1.3.6 Scalability
Scalability is most commonly required in telecommunications and software engineering. It refers to the ability of a system or a process to do growing amounts of work in a smooth way. It can be measured in a variety of dimensions including load scalability, geographic scalability, administrative scalability and functional scalability. In a location system, scalability is required in order to ensure the normal function when the position scope becomes large on two aspects: geography and density. In our project, geographic scalability can refer to locate objects in a larger 2D or 3D space. Load scalability can be treated as the change of the density of user of the positioning services. The requirement of high system flexibility, ease of modification and growth, can also be treated as a requirement on scalability.

9

1.3.7 Cost
The cost of something is the total investment that has been used up to produce it, and hence is not available for use anymore. Important factors of the cost of a positioning system include money, time, space and energy. The prices of each part of the system and embedded software, the time spent in research, development, installation and maintenance, the space needed for normal operation, and the power supply for the system, especially the battery for the mobile unit, should all be put into consideration.

1.4 Wireless Solutions
In current literature, it is a popular approach to apply wireless technologies in location. Some of the wireless solutions, such as global positioning system (GPS), are successful in outdoor applications. However, these solutions have disadvantages and limitations in indoor applications. In this section, both the advantages and disadvantages of wireless indoor positioning are examined. Although these wireless solutions are not applied finally, the reason why they are not selected should be clarified in this section.

1.4.1 Wireless Technologies
For wireless indoor positioning, a variety of wireless technologies can be used [10]. According to Liu [11], they may be classified in to two types. One is based on the algorithm to determine location. This technology utilizes various types of signal measurement such as signal strength, angle and Time of Flight (TOF). Another is based on location sensor infrastructure, a physical layer technology for communication between mobile devices or static devices. The system is made up of two separate units: a signal

10

transmitter and a unit with major "intelligence": a measuring and processing unit.

1.4.2 Wireless System Topologies

Master Station

(a) Remote positioning

(b) Self positioning

,-~-...

,. ,,y

\ /

~
(c) Indirect remote positioning

1

,.~

(d) Indirect self positioning

Figurel . l: Wireless system topologies

According to Drane [12], there are four different positioning system topologies as shown in Figure 1.1, where LSC stands for location service center. They are remote positioning system, self-positioning, indirect remote positioning and indirect selfpositioning. In the ftrst topology of system, mobile units transmit signals, several fixed measuring units collect signals, while a master station compute location of the mobile

11

units. In the second topology of system, the measuring unit is mobile and capable of location computation based on received and measured signals, while a master station is not necessary. In the third topology of system, there is a wireless data link to transfer a location result from a self-positioning system to a remote side. For the last topology, the measurement result is transferred from a remote location computing station to a mobile unit through a wireless data link.

1.4.3 Wireless Positioning Algorithms
In wireless positioning, triangulation is a traditional algorithm, while scene analysis and proximity are developed to alleviate the measurement errors [11]. Triangulation has two techniques: lateration and angulation [ 11]. Lateration are range measurement techniques which measure the distances from multiple points to an object, and then estimate the position. Time of arrival (TOA), time difference of arrival (TDOA), or received signal strengths (RSS), is usually measured, and the distance is derived by multiplying the radio signal velocity and the travel time, or by computing the attenuation of the emitted signal strength. Some systems also use roundtrip time of flight (RTOF) or received signal phase method for range estimation. Angulations position an object by calculating angles relative to multiple reference points. Scene analysis refers the algorithms normally implemented in two steps. Firstly, features, or "fingerprints" of a scene are collected and then the location of an object is estimated by matching real time measurements with the nearest a priori fingerprints. RSS-based location fingerprinting is commonly used in scene analysis.

12

1.4.4 Wireless Systems
There are two fundamental methods to develop a wireless positioning system [ 11]. The first method is to design a network infrastructure of position measuring units which are mainly for wireless positioning application. The advantage of this approach is that the technical specifications and consequently the quality of positioning are apt to be under the control of a designer. The tag, or sticker, can be developed as a very small one while the sensors can be distributed according to the required positioning accuracy. The second method to locate an object is to utilize an existing wireless network. The advantage of this method is less money and time spent in infrastructural deployment.

Aut omati on. controL . . .

Cuiding. ·rrackin g, Routin g.. . .

~

O.lm

lm

lOrn

Resolution

Figure 1.2: Outline of current wireless based positioning systems

There are several kinds of wireless technologies used for indoor positioning.

13

Considering wireless technology scheme, positioning algorithms and application situation, these wireless technologies can be classified into seven categories, i.e. GPS-based, RFID, cellular-Based, UWB, WLAN (IEEE 802.11), Bluetooth (IEEE 802.15) and others, as shown in Figure 1.2 modified from [13] .

1.4.5 Limitations of Wireless Solutions
Although wireless solutions are well explored and widely used in outdoor positioning, they have their limitations and disadvantages when they are used in indoor application. As it was mentioned earlier, during the design and development of personal tracking/location systems, both outdoor and indoor applications must be considered, since the systems are targeted to be used wherever a person stays. Different wireless solutions have different limitations and disadvantages when they are applied in indoor environment. Satellite-based radio navigation systems, especially the traditional GPS receivers, are widely used outdoor. With its receiving sensitivity improved, they can even be used in light and medium structure building. A sub-meter location is still not reached [14]. However, in a typical concrete or official building, the receiving signals are still not strong enough for positioning. Other wireless techniques, as mentioned above, are needed. Unfortunately, the radio propagation in indoor environment is complex and difficult. There are different floor layout, possible moving objects and lots of reflecting surfaces. Line-of-sight (LOS) is rarely available while multipath interference is severe. Since the multipath characteristics are uncertain, there is no good model for indoor radio propagation. Consequently, the positioning result is not accurate enough in most cases. UWB system may provide relatively accurate result of less than 3 meters in a

14

typical environment. However, the system is limited by the velocity of a user, the request of a perfect referential point pre-located and a time to first flx (TTFF) of 1 minute [15]. Moreover, the performance of the system deteriorates beyond typical environment. Some wireless technologies, such as those used by cellular telephones or the triangulation methods based on wireless networks, are not precise enough for most application. Other wireless techniques may be capable of precise position of a person in indoor environment. But their main disadvantage is that they require complex, expensive infrastructures [9], which are not practical for a self-contained system.

1.5 Inertial/Magnetic Sensors and MEMS Technology
Due to the disadvantages of wireless indoor positioning, other solutions, such as optical, acoustic and inertial technologies may have to be considered. However, optical or acoustic technologies also need complicated and expensive infrastructures that are usually impractical for self-contained tracking. Thus other technologies have to be considered. Consequently, inertial technologies become a candidate used to develop solutions for wearable pedestrian location and tracking. In this section, inertial sensors and related technologies are introduced. Because magnetometers are possibly used together with inertial sensors, they are also introduced.

1.5.1 Accelerometers
An accelerometer is an inertial sensor which measures the acceleration (the change in velocity over time) it experiences relative to free fall. There are many different

15

types and designs of accelerometers. Both mechanical sensors applying the classical pendulum principle and contemporary solid state components can be chosen for detecting and measuring the direction and magnitude of an accelerating force as a vector. Generally, all these devices are amenable for strapdown applications. However, their accuracies range widely from micro- g to fractions of g [16] due to the variety of designs. Solid state technology provides various techniques which can produce miniature, reliable and relatively inexpensive sensing devices. A variety of techniques such as vibratory devices, surface acoustic wave devices, optical fibers and silicon materials, has been used. These sensors are mostly working in an open loop mode, but some are suitable to closed loop techniques. In a closed loop mode, the sensor eliminates an observed effect, such as a frequency change or modified resonant condition, while the displacement of the proof mass is generally not returned to its null position [16]. With force feedback devices, higher performance can be achieved. The performance of multi-sensors has also developed significantly. Multi-sensors enable a simple component to measure both linear and angular movement about two or three axes, hence offer significant potential for applications in positioning.

1.5.2 Rate Gyroscopes
There are also various types of sensor that can detect or measure angular movement. These devices include both the traditional mechanical gyroscope, usmg a rotating mass, and the unique one, using atomic spin. A great deal of effort has been made to develop novel technology to implement a gyroscope on a chip. The achievable accuracies range from the spectrum of rotation sensing devices to many orders of

16

magnitude. Some sensors have a bias of less than 0.0001° per hour, whilst others are in the 1o per second class or worse [ 16].

1.5.3 Magnetometers
A magnetometer is measures the strength and/or direction of the magnetic field nearby the sensor. There are two basic types of magnetometers: the scalar magnetometers and the vector magnetometers. The scalar magnetometers measure the total strength of the magnetic field in their vicinity. The vector magnetometers are capable to identify and measure the component of the magnetic field in a particular direction. The utilization of three orthogonal vector magnetometers makes it possible to uniquely define the magnetic field strength, inclination and declination. Examples of vector magnetometers are fluxgates, superconducting quantum interference devices (SQUIDs), and the atomic spinexchange relaxation-free (SERF) magnetometer. The most common magnetic sensing devices are solid-state Hall effect sensors, which could be entirely integrated on a single silicon chip. These sensors produce a voltage proportional to the applied magnetic field and also sense polarity.

1.5.4 Micro-Electromechanical Systems
Micro-electro-mechanical systems (MEMS) are devices integrate mechanical elements, sensors, actuators, and electronics on the same silicon substrate through microfabrication technology [17]. The devices are fabricated using compatible "micromachining" processes. These processes selectively etch away parts of the silicon wafer or add new structural layers to produce the mechanical and electromechanical devices. In

17

contrast, most electronics are fabricated using integrated circuit (IC) process sequences (e.g., CMOS, Bipolar, or BICMOS processes) [18]. MEMS combines silicon-based microelectronics with micro machining technology, · make the realization of complete systems-on-a-chip (SOP) possible. MEMS is a technology enable the development of smart products, increase the computational ability of microelectronics and expand the space of possible designs and applications [ 19]. MEMS enhances the decision-making capability of microprocessors, the central data processing unit, by allowing micro-systems to sense or even control the environment. Sensors gather information from the environment through measuring mechanical, thermal, biological, chemical, optical, and magnetic phenomena. The microprocessors then process the information from the sensors and direct the actuators to respond accordingly through some decision making capability. New levels of functionality, reliability, and sophistication can be put on a tiny silicon chip at a relatively low cost. This is because MEMS devices are manufactured using batch fabrication techniques similar to those used for ICs. The size of MEMSs generally ranges from 20 micrometers to a millimeter [20].

1.6 Our Proposed System
Based on the above investigation to generic requirements, wireless indoor positioning system and MEMS inertial sensor technology, it is concluded that wireless technology is not able to meet all the requirements. Instead, it is believed that technology in inertial sensor is more promising in design a pedestrian tracking system. However, wireless technology will still be used in forming a communication network of the users of the tracking system. In the long run, I hope to design and develop

18

a system as in illustrated Figure 1.3. The system is composed of a number of wearable terminals, with MEMS sensors detecting acceleration and angular velocities, and a base station who receive and process signals from wearable terminals. Information such as a first responder's location and special movements, are sent from transmitter in the wearable unit to the base station and console operated by an officer in a vehicle. A GPS input, as an option, may be used for integration of the widely accepted wireless position technology with our solution. A program on the console displays information from each first responder including his name and photo, ambient temperature and status. After the development is finished, the system should be of easy, reliable operation .

.... ....

.... ....

.... ....

.... ....

....

........

.... ....

.... ....

'&

-----------+

Base Station

Control Panel

Wearable Terminals Figure 1.3: A targeted system

19

1.7 Thesis Contribution and Outline
1.7.1 Contribution
This thesis is the outcome of phase one research for the design and development of a practical outdoor/indoor positioning system. In this thesis, the following tasks have been completed: 1) Understand the possible applications and generic requirements for a tracking system, 2) Explore possible technologies to meet the requirements, compare between different technologies, and choose one of them for further in-depth research, 3) Investigate the concept, algorithms, the advantages and disadvantages of the selected technology, 4) 5) 6) Develop new approaches, and/or improve existing approaches, Assess the algorithms and the approaches in field experiments, Outline the roadmap for further research.

Among various items of contribution of thesis, three of them should be highlighted: Firstly, as an initial step of the research, the abilities of different technologies to meet the requirements of possible applications of the positioning system to be developed are compared. Based on the understanding on their topologies, systems and the limitations, wireless solutions are not selected. On the contrary, inertial technology was selected as the choice for design and development of a targeted positioning/tracking system.

20

Secondly, the performances of different approaches, using similar technology are compared based on the understanding of their algorithms and review to related literature. Based on this comparison, the synergy of these approaches is proposed. Thirdly, the analysis to human gait and the application of human kinetics in this thesis not only help to validate the proposal but also provide practical methods to reduce the errors in tracking. Some methods, such as shoe-mounting sensors and zero-velocity update (ZUPT) in stance phase of human walk, exist in literature. Other methods are newly proposed in this thesis. These novel methods include (1) the application of rate gyroscope signal in stance phase detection, (2) the algorithm to calculate the orientation with magnetometer signals and accelerometer signals, (3) some techniques to reduce integral drift during the swing phase of human walk. Finally, during the preparation and implementation of field experiments, appropriate sensing module is found, calibration techniques to inertiaVmagnetic sensors are integrated into data processing. Future works are discussed in-depth based the evaluation to the result of experiments.

1.7.2 Thesis Outline
The remaining of this thesis is organized into four chapters as below: Chapter 2 introduces the concept, algorithm and performance of two existing inertial tracking technologies, i.e., strapdown INS and pedestrian PDR, respectively. The advantages and disadvantages of either technology are identified and the causes of the limitations are explained. That's why I have to seek more techniques in the following chapter.

21

Chapter 3 emphasizes on how to find an approach for accurate positioning by solving the problems of current available technologies. Firstly, human kinetics is studied to find the characteristics of human gaits. Then sensing modules are proposed to place on human body. Foot-mounting is an advocated placement. Finally, various approaches are found and used to improve the accuracy of integration. These approaches include the detection of the stance phase, the calculation of orientation from magnetic input, the updating during the stance phase and error correction for the swing phase. Finally, the calibration to inertial sensors is introduced. Chapter 4 focuses on how to implement the algorithms and approaches discussed in earlier chapters. An appropriate sensing module is selected and necessary preparation is done, and field tests are implemented and acquired data are processed. The results show good accuracy. Finally, the experiments and their results are discussed. In Chapter 5, conclusion is provided following the summary to the research work conducted. Future work is also planed with detail in this thesis.

22

2. Tracking Methodology and Performance Analysis
2.l.lntroduction
In this chapter, tracking methodology with inertial sensors is carefully reviewed. Generally speaking, two existing approaches maybe applied to the positioning system to be designed and developped. One is strapdown inertial navigation system (INS), which is originally used in vehicle navigation. The other is pedestrian dead reckoning (PDR) system, originated from dead reckoning used in marine navigation.

2.2.Inertial Navigation System
2.2.1. Overview
Navigation has been present for thousands of years in one form or another. Over the years, more and more accurate sensors were developed. These sensors, combined with proper mathematic calculation, are able to detect acceleration and angular velocities and then transforming these to the current position and orientation of the system. Nowadays GPS has been widely used in navigation. But there still have limitations in real life applications. For example, when a GPS carrier moves from ship to ship, or when he gets closer to the quay cranes, he will frequently pass under obstructions that would obscure the GPS signal as the GPS signal is reflected about the cranes metal

23

structure. This increases the time of flight of the GPS signal and results in jumps in the resulting position. Consequently, INS has been developed for a wide range of vehicles. The basic flow chart of inertial navigation system is shown in Figure 2.1 [21], where IMU stands for inertial measurement unit, an advanced sensor module composed of both accelerometers and rate gyro scopes.
IMU

I Ace ~. I Gyro

Bias Correction

r-·

Body to Global

. .

Body to Global

~

Integration

'r

Integration

~sition
Velocity

..

Drift Correction

~ Integration

Attitude

Figure 2.1: Inertial navigation system

2.2.2. Gimbaled INS
The frrst type of INS developed was a gimbaled system. A gimbal-stabilized platform is a common form of an inertial navigation system, mechanically establishing a reference system in a vehicle such as submarines, surface vehicle, aircraft and spacecraft. In this case, the sensors, the gyroscopes and accelerometers, or pick-ups, are mounted on the stabilized platform and sense specific forces, enabling computation of vehicle position, velocity, attitude and angular velocity which is necessary information for navigation and guidance. This gimbaled configuration is show in Figure 2.2 [22] [23]. However, there are a few disadvantages of this system [21] as below: · Bearings are not frictionless. · Motors have problems such as dead zones, etc.

24

· Extra power is a must to keep the platform aligned with the navigational frame. · Cost is high because high quality motors, slip rings, bearings and other mechanical parts are needed. · Recalibration is difficult, and requires regular maintenance by certified personnel in a clean room through a lengthy recertification process.

Azimuth motor

v

Mounting frame
Figure 2.2: Gimbaled inertial platform

The typical applications for gimbaled systems are military uses on planes, ships, and intercontinental ballistic missiles. Obviously, gimbaled systems can not be used in our project.

2.2.3. Strapdown INS
A strapdown INS is the replacement of the gimbaled system. The accelerometers and rate gyroscopes are rigidly mounted in body coordinates and are not mechanically

25

movable. This is a major hardware simplification compared with the stabilized platform. The most significant advantage of the strapdown INS in comparison with the gimbaled INS is the considerable saving in size and weight. Other advantages include cost, power consumption, and hardware complexity. However, the computational complexity is increased because output data are measured in the body frame rather than the world frame. A software solution has to be applied to keep track of the orientation of the sensor module (and vehicle) and rotate the measurements from the body frame to the navigational frame. Figure 2.3 from [24] shows this procedure.

2.3. Strapdown INS Algorithm

Gyroscope Signal

.. .
..

Integration

Attitude

..
~

Accelerometer

Projection
onto global

s1gnals

·

0 0' -I» 0 -

0 0

~0
0

c;·

~

____.

Correction for gravity

::I

4

Integration

r---.

-<

0 !:l.

0

<
Integration
Position

..

axes

Figure 2.3: Strapdown navigation algorithm

Now it is time to describe in-depth how dynamic orientations, or Euler angles, respectively, are estimated based on the signals from sensors. In principle, the orientation of the sensors is tracked by integrating angular velocity signals over time. With this tracked angles, a rotation matrix that brings the sensor (or body) coordinate system to the world coordinate system is estimated and updated. Finally the acceleration in the body frame are rotated to the world frame with this matrix and the resulting acceleration, after

26

deduction of the acceleration from gravity, are double integrated with regard to time to yield a displacement in the world frame in [16] [21] [25].

2.3.1. Reference Frames and Rotations

Figure 2.4: Definition of the world and the body frame

The Cartesian coordinate system used in this thesis is shown in Figure 2.4. Axes

xw, yw and zw respectively represent north, east and down in the world frame fixed to the
surface of earth. The orientation of the device will be estimated in this coordinate frame. Axes xb~ yb and l represent the orthogonal axes in the body frame. In order to describe the components of a vector of arbitrary orientation in world frame with respect to the original body frame, or, in a new frame with respect to an old frame after a certain rotation, one of a few rotation representations must be used. Most frequently used representations include direction cosines, Euler angles and quaternions [ 16] [28]. In this thesis the direction cosines representation is used to develop algorithms for tracking the attitudes of sensors during human movement. A direct cosine matrix (DCM) has to be calculated.

27

x"(x"')

~--------+-------~

~y~
z(z ')

Figure 2.5: Three sequential rotations from the world frame to the body frame

Mathematically,

this

direct

cosme

matrix

(DCM)

is

accomplished

by

transformation of three sequential rotations from the original world frame's axes (x, y and
z) to the new body axes (x"', y"' and z"'), as illustrated in Figure 2.5. These rotations

continue as a lf/ rotation about

z (or z)';

a e rotation about y' (or y''), resulting from the

first rotation; and, finally, a ¢ rotation about x" (or x"'), resulting from the second rotation [28]. These rotated angles are called yaw, pitch and roll respectively. They are specific kind of Euler angles. These rotations are represented in equations (1- 3) [27]. Rotation 1

Rl(lf/, z) = -s~

[cowIf/
0
1

sin lf/ cos lf/

0
Rotation 2

~]

(2.1)

R2(8, y)

[cosO = 0
sine

-s~nB]
cosO

(2.2)

0

28

Rotation 3

(2.3)

After combining R1, R2 and R3 into a single matrix and transposing this matrix, a DCM is resulted as below.
cBclf/ cBslf/ -sB

R=

[

-c¢slff + s¢sBclf/ s¢slf/ + c¢JsBclf/ c¢clf/ + s¢JsBslf/ -s¢clf/ + c¢JsBslf/ s¢cB c¢JcB

l

(2.4)

where c stands for cos and s stands for sin. This DCM represents transformation from body frame to world frame, or from an old frame to a new frame.

2.3.2.Dynamic Orientation Tracking
The static orientation, the orientation of a still object, can be calculated as the initial orientation of a device related to the world frame. On the other hand, the dynamic orientation, the orientation of a moving object, is tracked by integrating the angular velocity signal m(t) = [ mx (t ), my (t), mz (t) swing phase of walking. In a short sampling period8t, let velocity sample, and [8lf/, 88,

Jr ' obtained

from rate gyroscope during the

m=[ mx,my,mz]r be the corresponding angular

&/Jt

be small rotated angle vector the body frame has

about its z, y and x axes respectively. Hence,

29

(2.5)

When 8t is small, 8¢, 80 and 8lf/ are small too, then their sines are near 0 and their cosines are near 1. Using these approximations and ignoring the products of angles in equation (2.4 ), the rotation matrix for this period is

C=[O~
where
.Q

80 -~ =i+SJ.Ot,

l

(2.6)

-8(}

=

0
OJz

-OJz

O)y

0
OJx

-OJx .

l

(2.7)

[

-OJy

0

If the DCM is R(t) and R(t + 8t) at time t and t + 8t respectively, C(t) is the

rotation matrix which relates the body frame at time t to the body frame at time t + 8t. This means R(t + 8t) = R(t) · C(t) Using equation (2.6), the newer DCM can be expressed as R(t + 8t) = R(t) + R(t) · .0. · 8t. Since the change rate ofDCM is given by dR(t) =lim R(t + 8t)- R(t) . dt &~o 8t Using equation (2.9), the derivative of R(t) is given by (2.10) (2.9)
(2.8)

d~~t) = R(t). n,

(2.11)

30

which has the solution
R(t)

= R(O) · exp(

1

Qdt),

(2.12)

where R(O) is the DCM defined by the Euler angles calculated in the beginning (time 0) of the rotation. For a single time period [t, t + 8t] , the solution to equation (2.11) is
R(t + 8t) = R(t) · exp(

f+or Q(t)dt).

(2.13)

Using the rectangular rule, it can be simplified as
R(t + 8t)

= R(t) · exp( Q(t) · 8t)

(2.14)

Performing the Taylor expansion of the exponential term while applying the equation

(2.14), we get
R(t+8t)

= R(t) ( I +il8t+

(n8t) 2 cn.8t) 3 cn8t) 4 ) + + +··· 2! 3! 4!

(2.15)

obtain
R(t + 8t) = R(t) ·

(

I +(1- ((iJ8t)2 + ((iJ8t)4 .. ·)cnat)+(_!_- ((iJ8t)z + (OJ8t)4 .. ·)cn.at)2J (2.16) 3! 5! 2! 4! 6!

Finally, the DCM update equation becomes available as each new angular velocity sample comes
R(t + lSt)

= R(t). (/ + sin((iJ8t) Q + 1- cos((iJ8t) Q 2)
(jJ

(jJ2

(2.17)

31

2.3.3. Position Tracking
With the DCM updated, it becomes possible to project the acceleration signal

ax
a(t)

(t)l
(2.18)

=
[

aY (t)

az (t)

from the accelerometers into acceleration

aw (t)

a;(t)l = [
a; (t) a;(t)

(2.19)

in the word frame:
aw (t)

= R(t) · a(t)

(2.20)

With the initial global velocity vw (0) and initial global displacement sw (0) of the person known respectively, we are able to track the position of a person by subtracting the acceleration due to the gravity and then integrating the remaining acceleration once to obtain global velocity, and twice to obtain global displacement: (2.21)

(2.22) Using the rectangular rule, the above integration can be implemented to the samples arriving from the accelerometer as below (2.23) (2.24)

32

2.4.Strapdown INS Performance Analysis
Both accelerometer and rate gyroscope will cause errors in positioning. Obviously, the errors caused by accelerometer will accumulate through double integration over time. For example, a fixed bias ba , the average output from accelerometer when it is not undergoing any movement, cause an accumulated positioning error after double integration. As described below, the errors increase quadratically with time.

es (t) =ba ·2

t2

(2.25)

On the other hand, positioning errors may also be caused by rate gyroscope, although they are not as straightforward as that caused by accelerometer. For example, a fixed bias b8 , the offset of the output angular velocity from true value, cause angular error after integration over time [28] [29]. As described below, the errors increase linearly over time. (2.26) This angular error, i.e. orientation error, can cause the error of the rotation matrix R(t), which is used to project the acceleration from body coordinates to global coordinates. The resulting incorrect projection of acceleration signals onto the global axes causes two problems. Firstly, the acceleration are integrated in the incorrect direction, causing interaction of velocity and position among axes. Secondly, acceleration due to gravity can not be removed completely. The residue acceleration originated from gravity will become a "bias" to the true acceleration due to movement. In the strapdown navigation algorithm describe in section 2.3.3, the acceleration

33

due to gravity, 1 g , is deducted from the globally vertical acceleration signal before integration. When there are angular errors, there are tilt errors. Here tilt refers to the angle between the estimated vertical direction and true vertical direction. The tilt error
e¢

in

rad will cause the projection of gravity onto the horizontal axes, resulting in a component of the acceleration due to gravity with magnitude as below. (2.27) This component can be approximated as below since sin(e¢) ~ e¢ when the tilt error small. (2.28) This error can be treated as a residual bias due to gravity, remaining in the globally horizontal acceleration signals. In the mean time, in globally vertical axis, there is a residual bias of magnitude as below (2.29) This is also a problem. But fortunately it's much less severe because for small have cos(e¢) ~ 1 thus
e¢ e¢

is

we

e; ~o.
plane.

(2.30)

Hence a small tilt error will mainly cause positioning error in the globally horizontal

In most cases, including pedestrian tracking, the mean absolute acceleration measured is much smaller than the magnitude of gravity. On the other hand, a tilt error of 0.05° can cause a component of the acceleration due to gravity with magnitude

34

near g I 1000 . This residue bias can cause a positioning error of 15.4 meters after only a minute. Therefore, gyroscope errors, which are propagated in the positioning algorithm, are critical errors affecting the accuracy of pedestrian tracking. Woodman [24] tested the performance by obtaining data from sensors for a whole minute, while aligning the z-axis pointing vertically upward and keeping the device stationary. The average draft is shown as in Figure 2.6. The result shows the drift on the horizontal level was 167 meters while the vertical drift was only 1. 76m. This experiment demonstrated most drift occurs in the global horizontal plane. Foxlin [30] claimed an error in calculated displacement increasing cubically in time after being integrated twice. Until recently, it was thought that pedestrian tracking with data from such a sensor module was not possible due to the quadratic growth of errors caused by sensor drift during double integration [24].
~250~----~------~----~~----~------~----~

co
~

I

I
1

Slandard Devtation
I I I I I I I I I I I

0

~200 ------

+-------:------ -~------ +------ i------I I I I I I I I I I I I I I 1 I I I I I I I I I
~

m
0 00·

U

:::J15Q

------r------,------,-------r------t-----~

: :J £100 ------L------~------~-------L-----1 I I J
"'Tl
'-!

0)

0

ce·
'-!

3 0

50 ------L------~------~-----1 I I 0
I I I I I

I I I

I I I

· J ·

~ ~

s·

I

------~------I
I I I

-

~

0

10

20

30 Time(s)

40

50

60

Figure 2.6: Average drift in position grows with time

35

2.5.Pedestrian Dead Reckoning
2.5.1.Dead Reckoning
The term "dead reckoning" originated from marine navigation. It refers to reckon or reason a navigator's place relative to those stationary or dead in the water. In another words, dead reckoning is a method of estimating one's present position by projecting his courses steered and speeds over ground from a last known position. He can also estimate his future position over elapsed time based on an ordered course and speed of advance from a known current position. The dead reckoning position is only an approximate position because it does not allow for the effect of leeway, current, helmsman error, or gyro error. Hence dead reckoning position is only approximate. Some people treat dead reckoning as one of methods of inertial navigation. In this thesis, dead reckoning and inertial navigation are classified as two different kinds of positioning. The difference between dead reckoning and inertial navigation is obvious. Dead reckoning will estimate and correct its new position in each time elapsed. Based on its original definition as described above, inertial navigation will not do such correction.

2.5.2.Pedestrian Dead Reckoning
The definition of pedestrian dead reckoning (PDR) is very diverse in literature. In this thesis, PDR is the application of dead reckoning in pedestrian tracking. In another

36

words, PDR is a method of estimating a pedestrian's present position based on estimated step length and heading from a last known position. Miyazaki [31] monitored stride length and walking velocity using gyroscope. Sagawa measured walking distance to classify human moving pattern [32] [33]. Extensive research on PDR [34] [35] [36] [37] [38] and its application in [39] [40] [41] [42] [43] have been done in these years.

2.6. PDR Performance Analysis
The PDR position is also approximate. The main source of error in a PDR system is the step length estimation error and the heading error. Different random noise models can be applied to both heading estimation and step length estimation. Gaussian random noise step error model, constant bias step error model and Gauss-Markov model are recommended for step length error modeling [39]. Let us take Gaussian random noise step error model as an example, suppose the modeled step length s is a constant, and the

i th length error m; is Gausian distributed with a standard deviation a, then the true i th
step length is (2.31) Then the step errors are uncorrelated during a walk and the distance error variance after
N steps is

a;=

Var(t,m, )= t,E(a{) =Na'

(2.32)

Hence, under Gaussian distribution, the error variation equals the product of the step count and the variation of the driving noise.
It is easy to understand that the position error maximizes when the pedestrian

37

walk continuous along a straight line with a constant step length error. Figure 2. 7 [39] illuminated the 2D area of possible position when the step length error and the heading error are considered. In the graph, point 0 stands for the position calculated without any step length error or heading error. The interval between points A and B is the 1 (J's region of the step length error modeled as any stochastic models while no heading error is assumed. Points

o· and o+

are the possible positions estimate under maximum heading

drift but with no any step length error. With step length error assumed, interval between points A" and B" is the possible positions estimated under maximum heading drift to the left side of the true path while interval between points A+ and B+ is the possible positions estimated under maximum heading drift to the right side of the true path.

B

START

- -- --.

Figure 2.7: Geometry of a pedestrian walking path error in presence of step length and heading errors

According to Mezentsev [39], the deflection of estimated path compared with the

38

true path, which is caused by the heading error, is much smaller compared to the distance error due to the step length error. Assuming as is the standard deviation of the distance error due to the step length errors, and ah is the standard deviation of distance caused by the heading error, the standard deviation of 2D pedestrian positioning can be calculated as

a=~as 2 +ah2

(2.33)

The performance of the PDR is mostly determined by this standard deviation a. Unfortunately, because error accumulated over time, as discussed earlier, PDR is not able to provide precise positioning without help from other methods. Take the heading error as an example, assuming a step length of 0.8m and a constant heading drift of 1 degree per hour, after one hour's continuous walking with a constant pace of half second per step, the value of ah is 50 meters [39]. The error of the step length calculated from acceleration measured on the waist, torso or head can be as low as 2-5% [44] but grows quickly if the user walks unsteadily or on slopes.

39

3. Integral Drift Reduction
3.1.Introduction
From the investigation on possible technologies for pedestrian tracking with inertial sensors, both INS and PDR have their disadvantages. The rate gyroscope errors and the accelerometer errors, and consequentially the integral drift are the critical problem in strapdown INS. The errors of PDR grow over the numbers of steps. Moreover, these errors are dependent on the random models applied to them. But the models are not reliable enough to represent what happens actually. The key parameter of a model is not consistent with person or gait. For example, different person has different step lengths. The same person has different step length in different paces and path conditions. In case a person walks irregularly, the errors will increase much quicker. Hence, the estimation of a relatively stable step length is not quite practical for real application. Our proposed solution is to integrate these two technologies. By integration, the positioning is implemented through tracking the length and orientation of each step, just as what PDR does. But the length of each step is measured through mathematic integration over time as performed in INS, not preset as a statistical estimate. The advantage of integration is obvious. The continuous increasing integral drift will be chopped into intervals related to steps hence the drift will not grow quadratically on what is already accumulated. This proposal will greatly limit the magnitude of the integral drift. In Figure 3.1, the integral drift of displacement over time is plotted, assuming that the bias of acceleration is g 11000 and the time interval is 1 second, which is possible in the

40

scenario when a person walks. On the other hand, with this integration, estimation or calibration of the step length of each person each time a walk start, which is requested in PDR, is not in need. Because the step length is measured through INS in each time interval thus it will be more accurate than the estimated one. Hence, the integration of INS and PDR is actually a synergy. It combines the advantages of INS and those of PDR, while the disadvantages are well solved.

0.5 ,------,.-----,-----.----.,----..-----...--~---.-----.,----,
' ' 1 ,//

:~---·INS only

1:
: : : :

:
j ,/

/

oA ------ -- --·:------------:-------------:------------:----- -------:------------:------- -----:--------·-···:·--------·-;r·-----------

j -INS and PDR Integrated j

l
c 02

l
1

l
1

!
1

!
:

i

l
/~(

.//.
: 1

i 0 · 3 ~-----------f-----------+-----------+-----------+------------f------------1-----------+-----")/'-r------------f-----------1 ! : : : : : : .,/ i i

~

1

_ _ --· ___ ---· ___ ___

~-- __ --:

o,

___

-· _

_·

_____J___________

, __

i
j ....

-..l~~--~--~t....
2
3

i

i

~--__,<..

T_ _·-______ ,_ __ _ _ /~<~- _ _ _ ]_ _ _ _ L_ _ _ ,_ _ _ _ ., _ _ _
: - ~-~T/
:

l

l
i

i
i

l
:

i
:

i
'

4

5 6 Time( second)

8

9

10

Figure 3.1: Proposed integration of INS and PDR

It should be noticed that the implementation of such an integrated system need

some knowledge of human kinetics, especially those related to human walking, which will be introduced in the following section.

41

3.2.Human Gait
According to the analysis of human gait by Rose [45] , the human motion during a walk is cyclical and repeatable. Such a basic pattern is significantly constant among individuals. During walking with normal speeds, the center of gravity of human body keeps a more or less constant horizontal velocity, with a limited vertical movement of only a few centimeters. In contrast, the horizontal velocity of the foot changes each stride from stationary to more than two times of the velocity of the torso. The gait cycle comprise two phases: the stance phase and the swing phase. During the stance phase, the foot keeps in touch with the ground until toe-off happens. Toe-off starts the swing phase when the foot is taken away and carried forward for the next stride. When the foot touches the ground again, the next stance phase starts and the swing phase ends. Each gait cycle is completed and restart in such a way. The other foot completes the same sequence of events, but is 180° out of phase .

·· Swing Phase

...··
·

.........

··.. .
+

······

...

··· ··swing Phase . . ..

..................
··., Time

Figure 3.2: Stance phase in a stride

42

The stance phase is of particular interest to reduce integral drift in pedestrian tracking because it is a period when a foot is nearly standing still. Figure 3.2 shows how the stance phase is started and ended. For a certain point at the front part of sole, its ground speeds are almost zero from T3 to T5 , i.e. during the period ~T . If this time period
~T can

be dependably detected every stride, referential data may be acquired and used to

reset computations and get rid of accumulating errors, which is the critical problem in pedestrian tracking. Actually, most type of human movement including walking, side stepping, and running include repeated recognizable periods during which the velocity and acceleration of the foot are zero. Recognition of these periods allows determination of the drift errors that occur in between them, and extend the application of the methods used in this thesis to human movement other than walking.

3.3.Sensor Placement
There are a few locations on human body that are most suitable for amounting of sensors. Practical considerations are important in the choice of location. An unrestricted sensor would be appropriate for hand held applications. In this case, the sensors, the processing unit, the transceivers and the user interface can be in the same housing. However, it has two problems that are difficult to be solved. Firstly, there is no correlated relationship between the heading sensed and the actual direction of walking, thus it is difficult to find the heading of movement. Secondly, the step length

43

can not be measured directly because the foot strike can not be identified from the acceleration signals or gyroscope signals. A torso mounted sensor would still allow the sensors, the processing unit, the transceivers and user interface stay in the same housing. Moreover, the altitude of the torso with respect to the direction of human movement is relatively constant and with lower dynamics. Even though torso mounted accelerometers are able to detect foot strikes reliably, they are not trustworthy to obtain velocity due to the lack of dynamic. Consequently it can not be used to acquire step length. The sensors can also be mounted on the foot. Then extra cabling or wireless transmission is required. Due to the limitation of the size of an object that can be amounted on foot, the transceivers for wireless communication with base station, the processing unit and user interface can not stay in the same housing with sensors. Instead, a device mounted somewhere else have to be designed and developed to encapsulate these units. Although foot mounted sensors are less convenient, its acceleration signals recorded have much larger peak magnitude than those from torso mounted sensors, as demonstrated in Figure 3.3 [43] [48]. Moreover, there are long flat dwells in the acceleration signals recorded from foot, which are corresponding to the stance phase. These dwells are not obvious in the recorded acceleration signals from sensors mounted on torso. Hence foot-mounted sensors can measure stride length directly. By the way, head-mounting was used by Foxlin [47], which need L-shaped bars installed on the ceiling. Hence this method is not applicable as a self-contained one.

44

45 40
Torso Footpod Stance Footpod Swing

N

(/)

35 30

s

·c: 25
ro 2 c:
L.

en
Q)

<L> "0 ::1

.Q

20 15 10 5 0 0 0.5 1 1.5
2 Time (s )

16
Q)
0 0 <(

2.5

3

3.5

4

Figure 3.3: Acceleration magnitude comparisons

It should also be noticed that the recorded magnetic field signals, from torso mounted sensors undulate gently, but the magnitude is relatively constant over the stride,
" ·l ' ·

as shown in the upper half of Figure 3.4. In contrast, the recorded magnetic field signals

..
from foot mounted sensors, as shown in the lower half of Figure 3.4, are undergoing much stronger dynamics.

45

'

0.5
(/) (/)

-

.

0

I

X
y

z
~

0..

t'U

0

E -0.5 r 0
-1
r
I I

~ -1 .5

~

0

~

I

t

r

I

0

0.5

1.5

2

2.5

3

3.5

4

(/) (/)

1.5 1 0.5 0

:::l

Q.
(/)

co

(/)

0..

0

0
0

co E

-o
0..

..-...................:::_::;::·::
0

..··'

0 0 u.. -0.5

0.5

1.5

2
Time (s )

2.5

3

3.5

4

Figure 3.4: Magnetometer signal comparison

To keep the advantages of both torso mounting and foot mounting, it might be a solution to amount the magnetometer and accelerometer in different location of human body. The orientation will be computed from torso mounted magnetometer, while the stride length will be calculated from acceleration signal. This seems a nice solution. But, unfortunately, other than the increasing cost, a certain relationship between the orientation of the sensor on torso and the one on foot has to be found. This relationship will be affected by the relative orientation of these two sensors. Therefore, in this thesis, this solution is not considered.

46

Instead, the relative stable measurement of the heading, as shown as solid line in Figure 3.4, will be separated from the magnetic field signal. Although the separated signal might not as good as the signal from torso mounted magnetometer, it can still be used to detect the orientation of the sensor, and hence the pedestrian. This will be discussed in the following sections. It shall also be noted that the magnetic field signal is also periodic correspondent with gait cycle, this may also be used for stride phase detection. Other than acceleration and magnetic field, the angular velocity, i.e. the signal from rate gyroscope, is also considered in placement of sensor. When it is mounted on a walking foot, the dynamics of the angular velocity around the x-axis, as defmed in chapter 2, is the most significant.

3.4.Stance Phase Detection
The human motion during a walk is cyclical and significantly consistent among pedestrians. During each stride, the horizontal velocity of a foot repeatedly changes from stationary, accelerating, decelerating, and to stationary again. Each stride can be divided into two phases: the stance phase and the swing phase. During the stance phase, the foot, or part of the foot, is placed on the ground. If this phase can be detected reliably from sensor data, the velocity can be reset every stride, hence reduce error accumulation, which will trouble the data processing in the following strides. Theoretically, in order to detect stance phase we can use all inertial data, including all three components of angular rate, acceleration, magnetic field in body coordinates frame, as shown in Figures 3.5, 3.6 and 3.7 respectively.
47

Anguler Velocity
300,------.-----,,-----.------:r-----:------:------lr====~ .......... Gyrox

200

100

!

~:

: ··· ··· ···I .. r . . . . . .. .. . . . .

, \I

",J '

l\

i,n l1v·. (\~· :rr
~

r .:r r:::
-r .
~-

~-------,~200~----~,~~~-------,&D~--~--~,au~------~ZD0~-------2XD~-------2~MD~------~~

Tlme(11150sec}

Figure 3.5: Measured angular velocity

Body Acceleration
':

-~

c 0

a;

<{

..·8
~
I

0 d)

I

: "'-,.

:: : : :::: : : : ~ - - . - --. - ·:·.-t: : ~:r: : : : : ::t:r::::::::::::::>:·:.::::::::::,:·::·::::::__·__ r---... -----...
~

--------------·: . ;.: ___ __)

1:

.

.;

i

l
Tirn.{1/150sec)

;'

i

;

lb00-------1~200--------1«D~-------1&DL--------18DL-------ZDO-L-------~-L-------2~«D------~2&D

Figure3.6:·Measured acceleration ·

48

It can be observed that they-axis angular rate and the z-axis acceleration are the most significant indicators of stride events. However, due to irregular tilt of the sensors, the components of measured acceleration on level plane and vertical direction are not exactly 0 and g respectively in the stance phase. This makes the acceleration not practical enough in detecting stance phase. lil this thesis, the y-axis angular rate is used to detect the stance phases. This method is novel compared with those methods already used in literature [48].
Magnetk Field
0_ 7 r-----:----:-----:---y------r---~------:.==:=::;1
1 ... ....... Ma9,

0.6

1600

1OOJ

20C()

2400

Time{1/150s-ec}

Figure 3.7: Measured magnetic field

Especially, the angular rates are near zero during the stance phase, while there are some zero-crossings during the swing phase. Hence, to detect the stance phase, other tha,n the ·application of a zero threshold, a time -period should also be added to prevent mistaking zero-crossing in swing phase as stance phase. If the angular rate or acceleration is within the threshold for a certain period of time, the gait is found out to be in the stance

49

PROPE RTY O F RYERSON UNIVERSITY LIBRARY

phase. Otherwise, the gait is in the swing- phase. In rare cases, the foot is not still enough during the stance phase, thus is unintentionally classified as in swing phase, which will cause significant drift. In order to avoid this problem, a longest time period for the swing phase should be applied. If the swing phase lasts longer than this time period, a certain period with lower angular rate or acceleration is determined as the period in stance phase. Furthermore, it should also be noticed that the magnetic field is under severe distortion in the indoor environment. Thus magnetic field is not preferred for stance detection. In addition, great care has to be taken when the sensors are used indoors. In this research, the magnetic field data are used for orientation update when the experiments are conducted outdoor. The related algorithm to calculate orientation from magnetic field signals is proposed in this thesis as in the following section.

3.5.Quasi-static Orientation Calculation
In order to know the orientation of the device for rotation representation and frame transformation, we can use gyroscopes for absolute orientation in swing phase, which is calculated through integration of the angular velocities over the time, if the original orientation is known. However, because the gyro signal summed during integration is perturbed by errors, the accuracy of the orientation will become worse and worse as time passes. Hence, magnetometers, which can detect the magnetic field of the earth, must be integrated with gyroscopes and accelerometers to find the initial orientation in the beginning of walking and to update the attitude during stance phase, which is in a quasi-static status.

50

To find the quasi-static orientation, we have to find the Euler angles \fl,

e and

q>

respectively. In other words, because gyroscope is not used in a static status, signals from accelerometers and magnetometers have to be used to calculate static orientations. However, we usually can not obtain these angles directly. Instead, we have to know something about the tilt and heading of the sensing module firstly.

Horizontal Plane

Figure 3.8: x-tilt andy-tilt assignments relative to ground

Both x-tilt

a and y-tilt f3 of a static object, or the sensor on it, as shown in

Figure 3.8, can be found simultaneously using acceleration outputs of all three axes as below:
(3.1)

(3.2)

where the two-argument function atan2 is a variation of the arctangent function. For any real arguments x andy not both equal to zero, atan2(y, x) is the angle in radians between the positive x-axis of a plane and the point given by the coordinates (x, y) on it. The heading of the object, or the sensor on it, can be calculated using the x andy magnetic field outputs if the object is level in a horizontal plane. As shown in Figure 3.9,

51

only the x and y components of the earth's magnetic field (Hearth) is used when determining the heading, or the direction of magnetometer. The heading a is defined by:

r = a tan 2( hy' hx)

(3.3)

Also shown in Figure 3.9, the angle of magnetic field to the surface of earth, (/J, which is called the dip, or inclination angle, is calculated as below:
(3.4)

x (North) Heading

y (East)

Hearth

z (Down)

Figure 3.9: Heading defined in the horizontal x-y plane

Either a person is standing or walking, the sensors attached to the human body are not confined to a flat and level plane. This makes it more difficult to make determine the heading direction, because the tilt of the x-axis and that of they-axis are always changing and the magnetometer can not stay horizontal to the earth's surface. Errors caused by tilt

52

angles can be large if not compensated. Hence, the compensation for tilt to magnetometer must be done. To compensate the magnetometer which is in an arbitrary position, we assume the world frame is transferred to body frame with current tilt angles through three rotations with Euler angles lf/, (} and rjJ in sequence, just similar as described in Chapter 2. Some processing has to be completed before obtained sensor signals are used. The acceleration signals measured contain the gravity itself and the acceleration caused by human motion. In order to remove the later while not to disturb the phase of measured signal, I use a line-phase finite impulse response (FIR) low-pass filter (LPF). The cut-off frequency of the filter is around 1 Hz because the human walks around 1 second for a stride. The filtered acceleration is normalized and redefined as gb. Rotations from the world frame to the body frame are given by -sin(} sin¢cos(} , [ cos¢cos (}

gb

= RT · gw =

l

(3.5)

(} = a tan 2 ( gx, ~ gY2 + gz2 )
which is actually the same result as in (3.1) when the object is not moving. Using equation (3.5) and (3.6), we obtain
r/J =a tan 2 {g Ysign( cos 0), g zsign( cos B)).

(3.6)

(3.7)

53

which is different compared with

fJ

in (3.2). Hence the angle of roll is not a y-tilt angle.

y-tilt should not be used as roll for orientation calculation and compensation to magnetometer. After both pitch B and roll ¢ are found from acceleration data, the attitude, or yaw 'If, can be found by solving the following non-linear simultaneous equation,
(3.8)

Where mb

= [ mx, my, mzJT

and m w

= [a, 0, b

r

(a, b are the horizontal and Vertical

component of the magnetic field of the earth vector respectively). Hence we get

Rr ('I', z) ·m = R; ((}, y) ·RJ (¢, x) ·mb .
w

(3 .9)

As we know, if hx, hY and hz are the projection of magnetic field (Hearth) on the level plane and the z-axis (pointing downward) respectively, i.e.

h=

:: = ~a sin 'I' [

hx

l[a

COS 'If

l

,

(3.10)

Then the compensated magnetic field can be obtained as below:

hx

= mx cos B +my sin B sin¢+ mz sin B cos¢

(3.11) (3.12)

hz = mx sin B+mYcosBsin¢+mz cosO cos¢

(3.13)

According to [49], the heading on the horizontal plane, or yaw here, can be defined as (3.14) Finally the yaw can be computed with below equation.

54

'If= atan2( -mY cos¢+mz sin¢,mx cosB+mY sinBsin¢+mz sinBcos¢) (3.15)
The angle 'If calculated in equation (3.15) is a compass reading, i.e the heading relative to magnetic north. To get the true heading, denoted as 'II'T here, the magnetic declination D tnust be deduced from compass reading '1/: (3.16) The magnetic declination, D, is the difference between magnetic north and true north. This difference is caused by the tilt of the earth's tnagnetic field generator relative to the spin axis. The declination is a smooth global function represented by the international geomagnetic reference field (IGRF) model of a few dipole field generators deep inside the earth. Thus, for the present phase of research implemented in Toronto, I treat it as a fixed and constant offset throughout all the experiments.

3.6.Stance Phase Update
After the stance phase has been detected, several methods can be applied to increase the accuracy of tracking. The most frequently used one is zero-velocity update (ZUPT). Theoretically, the velocity in the world frame is zero in the stance phase. In practice, ZUPTs are performed when the acceleration and rate gyro measurements drop below empirically determined thresholds for a certain period of time. The purpose of this update is mainly to guarantee no movement measured during the stance phase of gait thus limits the integral drift.

55

ZUPT was applied by Stirling et al [46] with a prototype shoe-mounted sensor. In the experiment, the system simply stops integrating and reset the velocity before each step. This probably contributes to the high error of 10 to 20 percent of distance traveled. Hence zero-velocity update itself is not enough to greatly improve the accuracy of pedestrian tracking. Foxlin [30] developed a system uses ZUPTs as pseudomeasurements and improved the system accuracy on the order of 0.3 percent. However, the extended Kalman filter (EKF) applied to remove errors are very sophisticated thus it is not practical enough. On the other hand, the rotated angles, which are the result of integration to 3D angular velocity over time, shall also be updated. Due to the bias of the gyroscope its self, the integral drift of rotated angles grow linear with time. This drift must be under control. In the stance phase, the rotated angles will be updated from the yaw, pitch and roll angles calculated from acceleration data and magnetic data from sensor module, but not from the integration of angular velocity over time. Hence, heading update is proposed in this thesis to solve the problem of integral drift caused by gyroscope bias.

3.7. Swing Phase Drift Correction
In order to get a higher accuracy of position tracking, zero-velocity update and heading update during the stance phase is not enough. Drift correction should also be done during the swing phase of every stride. Unfortunately, the methods used in stance phased can not be applied in the swing phase because there is nothing stationary in this phase.

56

The global velocity, i.e., the velocity in the world frame, should be zero in both the beginning and the end of the swing phase. In most case, even though the global velocities are set to zero with zero-velocity update in the beginning of each swing phase, the velocities in the end of each swing phase are not zero. We can assume that this is caused by a certain constant "biases" of the global acceleration. This "biases" are actually resulted from the combination of drifts from both accelerometers and rate gyroscopes. This bias can be estimated from the difference of the velocities in the beginning of the swing phase and those in the end of the swing phase. Consequently, both the velocity and the displacement during the swing phase have to be recalculated with the estimated bias removed from the calculated global acceleration. The angles tracked by gyroscopes are different with those measured by magnetometers in the end of each swing phase. Because angles tracked by gyroscopes are obtained from summing the angular velocities over time, they are susceptible to integral drift and contribute mostly to angular errors. Similarly to the global velocity, we assume the difference is caused by constant "biases" of the gyroscope and then estimate them from the difference. Finally the estimated "biases" are removed in the recalculation of DCM.

3.8. Calibration
Further improvement of the accuracy of position tracking needs to remove the actual biases of accelerometers, magnetometers and gyroscopes. Theoretically, it is a way to estimate the bias of an accelerometer by measuring the long term average of its output when it is still. In practice, this is complicated by

57

gravity, because a component of gravity applied to the accelerometer will appear as a bias. Therefore, in order to measure the bias, we have to know the exact orientation of the device with respect to the gravitational field. This can be achieved by mounting and calibrating the accelerometer on a turntable, whose orientation can be controlled extremely accurately. Another way to calibrate the bias of an accelerometer is to slide it along a straight line for a certain distance on a level table top [48]. The measured nonzero velocity in the end of movement indicated the integration of the bias of the accelerometer during the time period of movement. The bias of the accelerometer can thus be estimated. The method to estimate constant bias error of a rate gyro is to take a long term average of the gyroscope's output while it is remaining stillness. Once the bias is obtained, it is important to subtract the bias from the output of the gyroscope. The calibration of the magnetometer is important because the output of magnetometer was also used to correct the integral drift of gyroscope. However, it is sophisticated too. In reality, the effect of ferrous materials nearby change the altitude measured by magnetometer. This magnetic declination can be called hard iron distortion. In addition, the earth's magnetic field and magnetically soft material surrounding the magnetometer affect each other and result in soft iron distortion. To compensate for hard iron distortion, the compass is rotated in a circle on a level plane [50] [51]. A circle can be formed from the horizontal components of all the readouts of magnetometer as shown in Figure 3.10. The offsets caused by the hard iron distortion can be determined from the circle and compensated by subtracting it from magnetometer signals. The removal of soft iron distortion needs more calculation than a

58

simple subtraction [51] [52]. One way to remove the soft iron effect is to rotate the reading by 45°, scale the major axis to change the ellipse to a circle, and then finally rotate the reading back by 45°. This will result in the desired circular output response shown in Figure 3.11. The selection of 45° is based on experience from repeating experiments and comparison with different methods.
Distorted Magnetic Field

0.2

0.1

-0.1

-0.2

-0.3

~1

0

~1

0.2

0.3

magxfguass)

Figure 3.10: Magnetometer output (x,y) rotated horizontally in the earth's field with both hard iron distortion and soft iron distortion

After both hard iron distortion and soft iron distortion have been compensated, bias of the magnetometer itself is calculated if both the precise orientation of the device with respect to the magnetic north and those with respect to the gravitational field are known.

59

Corrected Magnetic Field

0.2

0.15 0.1

0.05

-0.15

--- ----'--------- _____ .. _____ __ ____ ____ .. __ ___ __ ________ , __ _____________ .. _______________ .. ____

.
I

I

I

I
I I

'

I I

.
t

I

.
t

I

0

'I
I I

.
I

_________ .. _____ __
1

I

'I
I 0

I I

0

I

I

I I t

I I

o

I

I

~~~ _r::_:-:_-;:--: r _ :- : r::·-_r--_ ;
-0.3 -0 .2 -0.1 0 0.1
0.2

·:r
0.3

magx(guass)

Figure 3.11: Magnetometer output (x,y) rotated horizontally in the earth's field with both hard iron distortion and soft iron distortion compensated

60

4. Field Experiments
4.l.lntroduction
In this chapter, the focus is on the implementation of the methods discussed, developed and proposed in the last chapters, and the analysis to the result of experiments conducted. Firstly, the tools, including the sensors, are selected. Secondly, the methods for implementation are introduced. Finally, the results are presented and discussed.

4.2. Tools
4.2.1. Requirements to Sensors
Many factors have to be considered in choosing an appropriate sensor. The size, cost, dynamic range, sampling rate and bias should be considered preliminary. The size of the sensors should be small enough to be installed unobtrusively on a footware: either shoe or boot. The locations to be selected can be either on the back of foot, under the sole or at the heel. The sensors embedded in the insole have the best performance in the detection of stationary status. Unfortunately, more requirements are applied to these sensors: they should be small enough not to hurt the foot while strong enough to bear the weight of human being. Hence, in this thesis, I do not think it's time to try such a demanding mounting in the current phase of a long-period research. Consequently, all these sensors, including 3D gyroscopes, 3D accelerometers and 3D magnetometers, should be integrated into an inertial/magnetic sensor module, known

61

as IMU (Inertial Measurement Unit) in this thesis. In an IMU, triads of gyroscopes, accelerometers and magnetometers are orthogonally mounted. The price of this sensor module should be low enough to meet budget constraints for a possible user in most applications. From Figure 3.5 and Figure 3.6, the IMU may experience maximum angular rates of 500 deg/s and maximum acceleration of 5 g's or even higher. For a pedestrian, there are various paces. Most of them range from 60 to 120 beats per minute. In military, the lowest and highest among standard paces are 40 beats per minute and 240 beats per minute respectively. Hence the basic frequency of the signals from sensors is around 1 to 4 Hz. In the experiments, the sampling frequency must be more than at least two time of this basic frequency, i.e. around 10 Hz. In order to avoid distortion to the obtained signal, signal components with higher frequency should not be neglected, thus I must select a higher frequency. Considering the

availability of sensors in the market, I assume the sampling rate of the sensors should be at least 100 Hz. Due to the sensitivity of sensors to temperature, the sensors in an IMU should be individually compensated for bias as a function of temperature.
Figure 4.1: Sensor module selected

62

4.2.2. Sensors Selection
Based on the above consideration about the sensors, I tried to find the most suitable one for our project from below available sensor modules. (1) Xsens MTi IMU, (2) MARG sensor, (3) MicroStrain's 3DM-GX1, (4) MEMSense' s niMU, and (5) Intersense' s InertialCu be3. All these sensor modules are originally Compass Noise (lcr) used to tracking 3D orientation. Operating Temperature After considerations on all the above requirements and comparisons between the specifications of the above sensor modules, I finally selected the MEMSense niMU (Nano Inertial Measurement Unit). The niMU, as shown in Figure 4.1 [53], provides serial digital outputs of 3D acceleration, 3D rate of rotational turn, and 3D magnetic field. Its main specifications are as in Table 4.1 [53].
Table 4.1: niMU specifications

PARAMETER Sensor Sample Rate Size Ace. Dynamic Range Ace. Bias Gyro Dynamic Range Gyro Bias (Maximum)

VALUE I 50. 15Hz 1.8x0.9x0.5in

+1- lOg
0.3m/s:z +/-600deg/s 1 deg/s 560nT 0 to 70 oc

4.2.3. USB Board

The IMU is connected to computer through USB board as shown in Figure 4.2, where a transform between RS422 and USB is implemented.

63

Figure 4.2: IMU and USB interface board connectivity

4.2.4.Power Supply
As a temporary setting for mobility in experiments, the required DC 8.3V (nominated) power supply is provided by six batteries in a pack, as shown in Figure 4.3. Great attentions have to be taken each time to avoid incorrect connection of power and ground plugs, which will cause permanent damage of the sensor module.

64

Figure 4.3: Battery pack

4.2.5.Laptop Computer
A laptop computer, as

shown in Figure 4.4, is used to conduct data logging and to postprocess using pro grams written in MatLab. The algorithms, which are described in chapter 2 and chapter 3, are applied in the program. In the future, a PDA will be used for much improved mobility.
Figure 4.4: The laptop computer used for field experiments

65

4.2.6.Auxiliary Tools
Other than sensors, batteries, laptop computer and necessary cables, compass are needed to measure the global orientation while tape meter is in need to measure distance walked.

4.3.Methods
4.3.1. Sites for Experiments
As the phase one of the research project, which focuses on 2D tracking, the sites for experiments are outdoor path and fields with neither obvious slopes nor magnetic interferences. Some typical outdoor sites, such as a path in a park, a basketball play ground and a field-and-track ground, can be selected. The orientations of a path are obtained both with Google map and on-site compass measurement. The distances walked were measured with a standard measuring tape meter. To make it easier to measure both attitudes and displacements, paths with simpler shapes are selected.

4.3.2. Sampling Rate
There is no literature available on the range of frequency of acceleration of human walking. Hence it is not able to identify the appropriate sampling frequency theoretically. However, base on the consideration in section 4.2.1 and literature review [30] [54],

66

sampling rate higher than 100 Hz should be acceptable. In the experiments, I choose sampling rate around 150 Hz.

4.3.3. Installation
The requirements on driver installation and hardware setup [55] are followed strictly. In the experiments related to this thesis, the sensors will be

mounted on the arch, i.e., the upper of closed footwear, and fixed by laces or some specific vamp itself, as shown in Figure 4.5. No matter how the sensing module is installed, it should be guaranteed that there is no relative movement between the

sensor module and the footware. This is important in the experiments. The extended data cable run up the pant leg. The battery pack will be fixed with belts or even simply be placed in a pocket. The laptop computer has to be hold with both hands. While walking, the operation of the data logging should be monitored though the data displayed in case of any problems.
Figure 4.5: IMU mounted on a shoe

67

Theoretically, the mounting of sensor module on arch of foot, causes less accuracy in detecting stationary status. However, it's still a practical way in the early phase of the project.

4.3.4.MatLab Programming
Data are collected in real-time with a carried laptop computer and later processed using a MatLab program. The program consists of function blocks for initialization, stance phase detection, stance phase update, dynamic tracking with DCM, etc. The flow chart in Figure 4.6 briefly shows how the information gathered from footware-mounted sensors is used to calculate the displacement caused by human walking. The biases of the sensors, which have been measured through calibration, are removed from the obtained signals in the very beginning of the processing. Then the signals, especially the gyroscope signals are used to identify stance phases. The algorithm for stance phase should be adaptive to different human movements. After a stance status is identified, the period of the stance phase is determined, then the walking velocity is set to zero for the whole stance period. During this period, the global heading is calculated by projecting the magnetic field vector, after filtering, onto the horizontal plane defined by the gravity vector, and finally applying the equation (3.3). The tilt of the sensor module is calculated from the corrected acceleration signals. With the heading and tilt in the stance phase, a static DCM can be formed. This DCM is then used as the initial value of the dynamic DCM during swing phase. With this DCM, the orientation during the swing phase is tracked and all the acceleration signals are projected to the world frame. The velocity during the swing phase can be acquired through integration the global

68

acceleration over time. However, errors do perturb the projection and integration during swing phase, thus a correction has to be performed to guarantee that the velocity in the end of the swing phase is zero.

-- - ,
I I I I

Offset Estimation 1 L ________ l

r--------,
Dynam ic DCM C(t)

-- ------- --- -- ------------------,
Static Orientations

I I

Initialization

Static DCM C(O)
I

Acceleration Projection
I

L- ----- ------------- --------------1

------ '

Figure 4.6: Flow chart of the MatLab program

By processing signals in this way, the length and orientation of each stride is obtained. Consequently, the position of the pedestrian is tracked though adding up stride length of each step (as vectors).

69

4.4.Results
Using tools and methods introduced in section 4.3 and section 4.4, several experiments have been conducted at different paces in different places and different times. Most of these experiments are 2D tests. Some experiments described in this section had some elevations, but they were not significant enough to be considered as 3D. In this section, some typical results of the processing of acquired data from sensor module are demonstrated. Firstly, step-by-step processing of a clockwise walk along a square path and its results are shown from Figure 4.7 to 4.13. Secondly, trajectories of outdoor walks along a rectangle, a path near a park and at a field-and-track are shown in Figure 4.14 to 4.15 in sequence. All the results are quite encouraging. Figure 4. 7 shows original acceleration, gyroscope and magnetic field signals measured from sensors respectively. In the upper part of the figure, after gravity (1 g) is deducted, the z-axis body acceleration still has a larger amplitude than that of either xaxis or y-axis acceleration. Due to existing tilt of the sensor module, the acceleration actually is not zero at stance phase. These tiny offsets from zero are components of gravity itself. In the middle part of the figure, they-axis angular velocity is significantly larger than the others during the swing phase. During the stance phase, the angular velocity of each axis is near zero. In the bottom of this figure, the magnetic field signals goes to their peaks in the swing phase, changes their "DC" value when the walking direction is turned. It is interesting to notice that the z-axis component is relatively stable. This is because of the experiment is conducted on an almost level ground and thus the component on the z-axis does not change a lot.

70

~ 10r---~----~~----~--~-----r----~----r---~--r==c==~

Original Body Acceleration

~ · 8
~

o

o ~~~~~~HHH+~~~~~~~~H+~~~~~~

Accboy

----- Accbo2 -1

-5

-----------l·----------·t··--------·t·-----------r------------l------------1-----_____ _ i_ ___ _ ______ _ _ t_ ___ ___ _____ t_ __ __ ____ _ _
Tlme(11150sec)

·:_

:

:

---------- Accbox

~

-10o._____o_._ .2_____,o.'-4- - - - ' - - - - - ' - - - ' - - 1_____..1 .2----1"-.4 ------L1 .6 _____ 1.L_8_____.~

I~ tttt!mtt~it \t~ ~ lif~l~~itli.i!~tl ~ 1~t~tu!~~uI f~: :~
l1

t

tt

0

0.2

0.4

0.6

0.8

1

1.2

1.4

1.6

1.8

Tlme(1/150sec)

2 x 104

~
CIJ

Orlglanl Magnetic Field 1r---~----~---~-~-----r----.----r---~-~=c==~
Magoy

u::
~

-.;
·~

~ 0.5 1--!--t-+.-~'I"'H"
0 -- - - ·-- -- : ·- - -- ------ .---

a

CIJ ::e

-{).5 I..------::-1::------:-L-----::-':-----:-'::-----'-----'=-----I..----_J_------L---~ 0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8

.

:

: .

Tlme(11150sec)

Figure 4.7: Original sensor signals

.The upper part of Figure 4.8 shows quasi-static body acceleration resulting from low pass filtering with cut-off frequency of around 1 Hz. As described in Chapter 3, these signals are used to calculate the tilt of the sensor module along x-axis and y-axis respeCtively. The result demonstrates the continuous changing oftilt of the sensor module during walking. The change of pitch is mostly between -7° and -15° while the change of roll is mostly between 1o and -5°. The changing of roll is mostly because of an uneven grass ground, while the changing of pitch is caused by both the walking itself and the uneven grass ground.

,I

I

71

Oua$1-stadc Body Acceleration

0.2

0.4

0.6

0.8

1

1.2

1.6

1.8

lime(1/150sec}

Plkh and Roll

-a ... :s
Q;
Q..

'5

-5

~ -10

-15

-----------:------------1------------(-----------:-0 0.2 0.4 0.6 0.8

. . . . . -----r------------1------------1·------------r------------r----------· I 6 I 0

0

I

I

0

0

-~ ~--~----~----~--~----~----~----~--~----~--~

1

1.2

1.4

1.6

1.8

lirne(11150sec)

Figure 4.8: Pitch and roll of the sensor module during walking

Figure 4.9 shows how ·the heading direction of the sensor module, consequently that of the pedestrian, is calculated. In the upper part of the figure, the original magnetic field signals from the magnetometer are . wavy because of the changing of pitch and .roll of human ·fooL In the middle part of the figure, after the magnetic field signals are compensated for tilt as -depicted in Chapter 3, they become much smoother. Then these compensated·signals are used to calculate the heading, or yaw, which is illustrated in the lower part of the figure. The heading demonstrates the sequence· of directions of the clockwise walk on a square path: northbound, eastbound, southbound and westbound. The ideal yaw is for reference only: the turns of direction can not be that sharp during human walking.

72

I: ~-~-~- -:·-~-:r:
:: o 0.2
o.A

:¥ §l
o.6 o.a 1
1.2

u

1.6

1.a

2
x 104

Time(11150sec}

Tlme(11150sec}

Figure 4.9: Calculation of heading

The upper part of Figure . 4.10 depicts the angular velocities with the highfrequency noises removed ·by LPF. The y.:.axis angular velocity is significantly larger than the others during walking . .This is because .most rotations are around y-axis. However, when the walking direction is changed, angular velocity around z-axis also becomes large because ,there is a ·significant rotation on the horizontal level while turning. The· lower part ofthe·figure shows the rotated angles obtained from integration to gyroscope signals. During ·a ·walk: .along a straight line, the angles do not change greatly. Only ·when the walking direction is changed, the angle around z-:-axis changes around 90 degrees .. By the way, the switching between stance phases and swing phases are also illustrated in this figure.

73

Filtered Angutar Velocity
~r---~----~~----~--~-----r----~----.---~--~=c==~

l

1
· · · · --

l
----· ··- - -

l

1

····· ····· Gyrofx

i· i 0::

200 f- ·-- ---

-- - -----·-: --·----- -

Gyrofy

----- Gyrof7

"0

~ -"

-200 1-- -

-·---·-----------

- --- ;__ --- -:- -------: -- -- --- :--- - -:- ------ -:- - ----:- --------r---------- ·- - --Time(11150sec}

~o~--~o . 2-----o~ . 4----~o.~6----o~ .a----~~----~1 .2-----1~ .· -----1.~6----~1.e----~

Rotated Angles and Stance Status

0.2

0.4

0.6

0.8

1

1.2

1.4

1.6

1.8

Tlme(11150sec)

Figure 4.10: Angular velocity and rotated angles

The target of Figure 4.11 is to compare the original acceleration and the global acceleration; which is the result of projection from filtered body acceleration. From·the body acceleration, it is not possible to identify the direction of walk because there is no significant difference between components of acceleration. On the contras4 it is possible to estimate the walking direction from the global ·acceleration. For example, when walking northbound, the average of x-axis acceleration is positive while the average of yaxis acceleration is around zero. It should also be noticed that the amplitudes o f z-axis acceleration is -relatively stable .because there is no obvious vertical movement during the field test.

74

Body Acceleration

1
~

10r---~-----r-----r----~----r---~-----r-----r-.==~~~ 5 .......... AccbOx

0 H-lt+~Hi~IHff-lf+~tif-~~'"~H-1+ . tl , H-t~if.IH-4~~f*.lj.iWj~

AccbO.,.

1- -----------1------------1------------ ·r· -----------~-- --------- -!--:---------1----- ------1-------- -----r------------r----------5

~

----- Accb0,:1

-10o.':----0::': .2 ::-----=o:':.4---;:':-------;:-':---:!-,---:-';::------:1:':.4---.....J1.~.-.6---,:-~: .a:--~
Tlme(11150sec)

Filtered Body Acceleration

§
c
0

.......... Accbf,

!
Q

2

~ O~ "~ .. ~~~~~+t~Mt~~IM~~~Hf~~~~tM~~~~~r-~ Q
' 2 o~--~:---~----~----~----,~--~, . 2----,~ . 4---~----~--~

~

Tlme(11150sec}

Global Acceleration

Figure 4.11: Body acceleration and projected global acceleration

The differences · among·· acceleration signals · become obvious after they are integrated once over time. As · shown in Figure 4.12, when walking northbound (southbound),. the x-axis velocity. is positive (negative) and its amplitude -is the largest. The y-axis velocity ·is positive (negative) and· its amplitude is the largest when walking eastbound (westbound). However, the amplitude of z-axis..is stable. After the·acceleration signals are double integrated over time, the displacements along three axes are calculated respectively. It can be observed that the displacement · on . a certain axis increase (or decrease) stride by stride when the walk is along that axis. It is also noticeable that there is an approxiniately 2.6 meters.displacement upward ·after a walk of 60 meters. ·

75

Goblal Velocity

-3~--~----~----L---~-----L----~----L---~----~--~

0

0.2

0.4

0.6

0.8

1

1.2

1.4

1.6

1.8

Time(11150sec}

Global Displacement

-SL---~----~----~--~-----L----J-----L---~----~--~

0

0.2

0.4

0.6

0.8

1

12

1.4

Tlme(1 t150sec)

Figure 4.12: Global velocities and displacements calculated

Figure 4.13 shows the result of the above experiment where the walk is ;along a square-shaped lin'e draw on grass ground. The side of the square was 15 meters in length, resulting in a total path length of 60 ·meters. The directions of the sides were intentionally set to be parallel .or vertical to ·magnetic north. I ran five experiments in clockwise and five experiments in .counter-clockwise direction respectively . .In.all cases I walked at .the normal walking pace of around one meter per second. It is noticed that although I walked along ·a close square loop but the tracked trace is not closed. There are ·about 1.2 meters short compared .with the total path of 60 meters. Hence, the accuracy of the tracking is around 2% as to the distance traveled . .

76

15 .. ........... t: _;;;oo-....-=-....... , ;;;;;;;;;;;;;;;;;;:;i;;; '. ;;;;;;;;;;;;;o-=;;;;;;;;;;;o;;=-o-;;;;;;;;;:; ! ;;o;;;;;;;;;;;;;;;;o;;;-;;;;;;;;;;;o;;..:;;;;.-oi~

. . .. .. . .. . . .

10""·· ····· ····· ·

... . ... .. .. . ...... . ... .. . . . ~ .. ... . . ..... .... . . ... . .... .. .. .. .. ... . .. . . .. . ... .. . .. .... .. . .... . ... ·-

:

- - estimated
- - Referential

5 .. ..... .... ... ........... .. ...... .... .....:.. .... .. .. .... ... .......... ..~········ · · · ·· · ·· · · ·· · · · ·· ·· ····· ···· ·····-

0·

.1.----==-----~--~--~;::;i;;;;;a;------~ i j -r - 'i
0 5
10

· ··· ···· -

15

Y(m)

Figure 4.13 ~alk along a square path

Figure 4.14 is the result of set of experiments where I walked along an outdoor rectangle path clockwise or anti-clockwise. The longer side of the rectangle-shaped path was 17.5 meters and the shorter side was 14 meters. I completed each walk in similar time at normal walking speed.

77

15 .. .. ... .... .. ............. ......

. ....... ...... . .................. . .. .
: :

><

E ....._..

.......... 10

.. -

Estimated

- - Referential
5 .... .. ............. .

0

.

.

· ··· ··· ··· ·· · · · ·· ·· i ··· ·· ·· ·· ········· · ··· ···· ·· ····· ········=···· · ······· · ·

-5

0

5

10

15

Y(m)
Figure4.14: Walk along a rectangle

In the set of experiments related to Figure 4.15, the walk is along an outdoor Jshaped path near a playground. I ·walked northbOund for 40 meters, southbound for 36 meters, then along an arc, westbound, a little bit northbound, and then turned back eastbound in sequence. The plotted trace recorded is similar to the actual path walked.

78

Figure 4.15: Walk on a J-shaped path at a park

In the experiment to walk along an outdoor athletic track with total length of more than 400 meters (including the starting area), the result is shown in Figure 4.16.

.. ·

·:

··'

I

79

Figure 4.16: Walk at a track-and-field ground

4.5.

Discussion
The human foot is not a rigid body, nor the shoe worn on the foot. The exact

shape of the foot, or the shoe, is changing during human walking, especially when the foot contacts the ground. During this period, frrstly, the heel touched the ground, then the sole and finally the toes. Accordingly, the area of the largest pressure moves from heel to toe in sequence. Due to the changing of stress on each point of a foot, the location of those points with largest pressure is slightly moving relatively to the center of gravity of the foot itself. Especially when the limb is almost vertical thus the total weight of a human body is applied to this foot, the foot is comparably flattened under this pressure. Therefore, there is actually no absolute stillness of a point (on the surface) of foot related to ground when a human is walking.

80

On the other hand, the footwares are also not rigid bodies. Generally, they are also flexible but with less flexibility compared with human bare foot. They move with the foot but not exactly the same. When the sensing module is mounted on a shoe, this also has to be put into consideration. Other than human foot and footware, the condition of ground where human foot or footware placed on also affects the result of experiments. When walking on the ground with snow, or when the ground is wet and soft, the contact point with the ground is still changing because of the snow. The foot sinks when more and more human weight is put on it. The foot slides in the direction of the force applied to the ground. On the other hand, when there are stones on ground, or the ground is not level itself, the foot will change its position and shape accordingly to get sturdy support to the human body. As the result, the foot and even the whole body may wiggle to left or right, causing lager y-axis gyroscope output. Therefore, in practice it is more difficult to get ideal results from outdoor experiments than indoor experiments. In this thesis, the selected paths are either cemented grounds with no snow or gravels or uneven soccer ground with grasses. When it is rainy, windy or snowy, no experiment is conducted. The measurement of the displacement of human being through walking is measured by a tape meter. However, it is still difficult to measure a curve on the ground. In order to be easier for measurement and obtain a higher accuracy, most of the paths are set to be along straight lines and the walks are kept along these lines although it's not easy to be realized actually. In the experiments in this thesis, squares, rectangles, semicircles or any combination of these patterns are selected as the shapes of the path to be walked on. On the other hand, this also makes it easier to measure walking directions

81

with compass. The result can be used to compare with the attitude calculated from acquired magnetic field strength data. A compass is used to measure the magnetic north. However, there are limitations of a compass in its accuracy. Therefore, in this thesis, the area of interest is on the calculation of orientation and the removal of integral drift, not on the accuracy of attitude itself. Of course, visible deviations are not allowed. By the way, the true north is obtained through adding of magnetic deviation as an off-set. In Toronto, it is 10.30 a W. The processing to the sensor data is not done real time. It is done in lab after field experiments. In case the path walked is long, the processing is time-consuming. Hence less experiment was done with long path in this thesis.
0 E

-

5.-----.------.------.-----~----~------~----~----~ I I I I I I I
I I I I I I I I I I I I I
/~

~ 0 ~~"-:t -:---->
X

i!!'

~

I

I

I

I

I

I

l

0

1

2

3

4
Time (s)

5

6

7

8

g
0

5
0

"g
Q)

>-

--- _:_--- ~~--=-~~~- - :_ .~ -J---I
I

I
I

I

I

~·-~~

> -5 >-

0

1

2

3

4
Time (s)

5

6

7

8

g
(i)

2 0 -2

"g
N

>-

>

Q)

:· - ~vvc~ --I
1 1 ~

I I

I I

I I

I I

I I

0

1

2

3

4
Time (s)

5

6

7

8

Figure 4.17: Velocities obtained without drift correction

82

The velocities along x-axis, y-axis and z-axis are -shown in Figure 4.17 . .During the stance phase of the walk of only five meters, each of the·velocity components .should
be zero. However, it is observed that the velocities integrated from acceleration .signals

tend to drift over. time. Applying the integral drift correction method discussed in Chapter 3, the corrected .velocity profile is shown in Figure 4;18. This not only.demonstrates.' the importance of integral drift correction, but! also the effeCtiveness of the methods .I proposed.

E c
>
X
Q)

'g
fh

~ 5 ~--------~------~------------~------~----~----~------~
0

2
5

3

·u 0

E c
Q)

4 Time (s )

5

6

7

8

~~ ' -2
3
4 · Time (s)

I

I

I

0

> >- -5 0

5

6

7

8

c 'g
E
N

~

2
0

~ -2

0

2

3

4 Time (s)

5

6

7

8

Figure 4.18: Velocities obtained with drift correction

'1

.·

·'

It should be highlighted that the drift correction during swing phase, which is

proposed in Chapter 3, is also necessary and important. In Figure 4.19, the global acceleration, velocity and the displacement are shown after stance phase update is done.

83

Without stance phase drift correction, the "bias" ·of the acceleration, mainly caused by the accelerometer and its projection, is integrated over the swing period, resulting non-zero velocities in the end of the swing phase. These integral .drifts are used to be neglected but actually causing half of the total drifts (the other. half . occurs in . stance phase) . in positioning tracking. Hence, performing correction solely in .stance phase is not enough. Only when the errors in both phases are removed, the solution can be called a complete one.

Global Acceleration

i.~f··- - - - - - - - N · j· - - - - .-~ - - - - - ;~ i:.i· - - - - ~:-· · : · - -~- - .·~~·l .
0 500 1000 1500 2000 2500

Tlmef1J150sec}

Goblal Velocity

l Ds '5o

~ i 10f
5·

mnnnmnnnnn+nmmmn m mm+mmnm ; .· ·- -- ~--~': m mmnn+nnmm
1:
1: . . . . . . . . . . . . . . . . . . . . .. .

~:

· ·~: · ' """"'"""'~ ---- O x
m

Dy

-·_ ---- _.<''00~"""o;-:::::::::>:::::;::: -::~::~::::::::T~::~::~:=:_
500 1000 1500 2000 2500

Tlmef11150sec:}

Figure 4.19: The consequence of no swing phase drift correction

It should be noticed that magnetic deviation is severe inside a building. The signals in Figure 4.20 are obtained

wh~n walking in the corridor ofthe

13th floor of a 16-

floor building. Obviously, the measured magnetic signals are distorted. On the contrast, the acceleration signals and gyroscope signals are not affected. In figure 4.21, the heading

84

calculated is changing rapidly but in fact the walking along the corridor did not change its direction frequently.

g1
~

c

Body Acceleration
2~--~-----r----~----~----r----.-----.----~~==~==~

=0

i-1~~~~~~mt~~~~~~tj~f-~~-~ ~~~1~~~~~~~~t1~~·~~~'-'~~~;;~~
u ~ " 2 0·~--~0 .5----~----~----~2-----2~ . 5----~----3~.5----~----4~ . 5----~
11m~11150sec}
X 10~

Magnetic Field

0.5

1.5

2

2.5

3.5

4.5

11mef1J150se<:)

~400~--~-----r----~~----~----r----.-----.----~~--~~==~ -~ DJ ,f ";; 0
'111+11-at..-...!. .H - Gyrooy ····:····· Gyroox ----- Gyroo2

Original Angular Velocity

a:

~-4000L---~-----L----~----~----L---~-----L----~----~--~ 0.5 1.5 2 2.5 3.5 4.5 5
11meft/150sec)
x 10~

-DJ

Figure 4.20: Sensor signals obtained from inside a building

Hence, further research has to be done to find solutions to track the position inside a building. This will be further discussed in the following chapter.

85

Quasi-Static Magnetic Field
·········· Magdx
-- Mag~

...=

.. ........

~

" So

- - Hy

 : ·1
Tlme41J150sec:}

----- ~

% ·2L-----~------~----~~----~----~~----~------~------~----~------~ 0 ~5 15 2 25 15 ~5 5

Heading/Yaw

f-~ -~, : ,-::YI'~'xf~.,r- ·-j ~~vr,:~·:-·-~-~"···;l>j:·~~~:?1,:.\ti1:1JI Y~f~y~ I
200 " o 0.5 1 1.5 2 2.5 3 3.5 4 4.5

Tlme411150sec}

· 10·

Figure 4.21: Magnetic signals and calculated heading

86

5. Conclusion and Future Work
5.1. Conclusion
This thesis demonstrates that using inertial sensors, instead of wireless technologies, to develop a practical self-contained pedestrian tracking system is possible through synergism of INS and PDR systems and a variety of approaches to remove integral drift. This indicates a successful work of phase one research on a location system for persons both inside and outside of a building.

5.1.1. Summary
The system is initially to be targeted to locate a fire fighter at ftre ground, but actually has many attainable applications. After completion of the whole project, the system can be a PNA, as a backup of GPS receiver. It also can be used in USAR, mixed or augmented reality and ubiquitous computing. Accordingly, the generic requirements to the system are small size and weight, high accuracy and precision, lower complexity and cost, good robustness and scalability. Wirelesses technologies are widely applied as a solution for positioning in literatures. However there are critical limitations to guarantee them to be a practical one. Wireless indoor positioning systems are studied as typical examples to understand the issue. Based on the review on two types of wireless technologies for location, four topologies of wireless system, two categories of positioning algorithm, and further

87

comparison between wireless systems and solutions, it is found that each wireless technology has its own significant limitations in location a person. On the other hand, technologies for inertial sensors, including accelerometers and rate gyroscopes, provide techniques to produce small, accurate, reliable and relatively inexpensive sensing devices. MEMS sensor technology enhances the processing ability of inertial sensor unit while make the size of sensor small enough to be embedded in wearable or portable applications. Hence, it seems promising to use inertial sensors, instead of wireless technologies, in positioning or tracking of people. However, during the later phases of the project, wireless technologies will still be used in the system. They are not for positioning, but for data communication between wearable users and base stations or control center. This thesis focuses on what have been completed for the phase one of the project. In the research, current available navigation systems, both strapdown INS and traditional PDR are investigated to understand if they are good candidates for human being positioning. After the platform for strapdown INS is introduced, the algorithm for INS is explained step by step with stringent mathematic deduction including coordinate transformation, dynamic orientation tracking, projection of acceleration signal from body frames to world frames, global position tracking through double integration to global acceleration signals. Unfortunately, the performance of INS degraded quickly over time. This is caused by rate gyroscope and accelerometers, which are not accurate or precision enough, and worsen by incorrect projection with erroneous rotation angles of frames measured. On the other hand, PDR can be implemented with low complexity in algorithm, but its performance depends on the fitness of step error models to the actual movement,

88

and its positioning errors grow over time. Hence both INS and PDR have their disadvantages in pedestrian tracking. In this thesis, it is proposed to combine INS and PDR together to obtain synergy in pedestrian tracking. A pedestrian is tracked though adding each step length together when he is walking along a straight line. However, the step length itself is not estimated from chosen statistical mode, but computed through double integration to acceleration over time. The solution with this proposal reduces the integral drift by greatly shorten the time period for integration, while calculates step length much accurate than estimates from statistical models. The repeatability of human walking cycles ensures that the proposal is practical. Further analysis to human gaits demonstrates that there are alternative stance phases and swing phases repeating during normal walking. Although extra cabling or wireless transmission is in need, the placement of sensors on foot has the advantage in implementation the proposal through stance/swing phase detection. Each step length is updated through double integration to global acceleration over the time period of the swing phase. The velocity of a pedestrian is reset to zero during the stance phase. The orientation of the sensor calculated using magnetic filed strength data from magnetometer and acceleration data from accelerometer is used as the initial orientation for the DCM transformation. In this thesis, the algorithm is found not only to calculate the orientation from magnetic field strength and to compensate the tilt of sensor. By update done to orientation, the integral drift from rate gyroscope will be limited because it will not accumulate from earlier steps.

89

These updates greatly reduced integral drift. However, the research does not stop here. Further efforts to improve positioning accuracy are made to both acceleration signal and rate gyroscope signal during the swing phase. Methods of calibration to accelerometers, rate gyroscopes, and magnetometers are discussed and implemented in order to reduce positioning errors to the smallest. Several experiments have been carried out in outdoor field with IMU mounted on a shoe. The acquired data are stored in laptop computer and processed through MatLab. The results of the walking along a square path demonstrate the position accuracy of around 2%.

5.1.2. Conclusion
From the results of experiments, the following conclusions can be drawn: 1) 2) All the methods used to reduce integral drift are effective. All the updates done during stance phase are useful to limit the unbounded growth of integral drift . 3) The algorithm to calculate the orientation of an object with tilt from magnetic field strength is successful. 4) The synergy of INS and PDR is practical in pedestrian tracking

All in all, using MEMS sensors for wearable self-contained indoor positioning is promising, providing that the right algorithms are applied, and appropriate MEMS initial/magnetic sensors are used. This thesis successfully completed all the tasks in the phase one of the research to develop a practical system.

90

Most important contributions of this thesis .is the synergy of INS and PDR approaches and the novelty in methods to reduce error of tracking thus improve the accuracy of tracking, which is the key for the success of such a system. These new methods include: 1) The using of y-axis gyroscope signal, instead of acceleration signal, to detect stance phases, 2) The calculation of heading using tilt compensated magnetic field during quasistatic period of human walking, 3) The update of rotated angle, which is the result of integration to angular velocity over time, in the stance phase, 4) The removal of "bias" of global acceleration during swing phase, and 5) The removal of "bias" of angular velocity during swing phase.

5.2.Future Work
For further design and development of a practical pedestrian tracking system for much wider real-life applications in both indoor and outdoor environment with higher accuracy, precision, and robustness, future work has to be done in other phases of the project. The research work will focus on map correlation, particle filtering, integration with GNSS, etc. General speaking, these research tasks should be completed one by one in sequence in the following phases of the project although there can be some interloping in time.

91

5.2.1. Map Correlation and Particle Filtering
In buildings, the magnetic interference is obvious and thus it is an impractical to use magnetic field to measure orientation. Thus some other technologies have to be used. Map correlation or map matching can be the candidates. There are already such applications in vehicle location. The map correlation for automobile vehicle [56] is an accurate method of correcting the stead increasing errors. It also displays vehicle location in a format readily usable by the dispatcher. A data base is built for mapping for train positioning [57] [58]. Lee even applied this technology as a reliable position estimation method of the service robot [59]. Levin applied the technology in the processing of aligning the visual ego-motion with the map locations [60]. This technology should also be able to be used in pedestrian tracking. Recently, Both Woodman [24] and Beauregards [61] have been applying map (or building plan) correlation in pedestrian tracking. However, map information itself is not enough and particular filter must be used. Particle Filters, also known as sequential sequential Monte Carlo (SMC) methods, are often used to estimate Bayesian models. They are the on-line analogue of Markov chain Monte Carlo (MCMC) batch methods and can be much faster than MCMC if welldesigned. Particle filter, not Extended Kalman Filter (EKF) or Unscented Kalman Filter (UKF), is used in indoor pedestrian tracking because they are more accurate than either EKF or UKF when samples are enough. The version of the particle filter used depends on the information provided from

92

map or building plan. With very detailed computer readable building plan provided and particle filtering algorithm applied, Woodman [24] tracked a person "throughout an 8725m building to within 0.73m 95% of the time". In contrast, Beauregards [54] uses much less map information. Because of this, he has to apply not only common particle filters but also Backtracking Particle Filter (BPF). BPF has much more geometrically long-range constraint information. With only information about external wall of the building, Beauregards [61] made only 2.56 meters mean 2D error. Therefore, map correlation, combined with particle filtering, is a attractive, necessary and possible approach for pedestrian tracking inside a building. It should also be noticed that the current researches done by Woodman and Beauregards are still in a preliminary stage for a practical production. Further work should be done to obtain high accuracy with minimum map information and limited processing time.
2

5.2.2. Integration with G NSS ·
INS has the advantage of short-term positioning accuracy but not over a relatively long time. The combination of INS and PDR, together with approaches applied to remove drifts in this thesis, is effective to increase the accuracy but may still not be enough. On the contrast, the accuracy of GNSS (Global Navigation Satellite System) positioning remains the same accuracy over time. Therefore the most important and basic concept of an integrated navigation system is to combine these advantages to obtain synergy [62] [63]. The integrated system can not only be used both indoor and outdoor with high accuracy, but also be
a~le

to self-verify with sufficient data to check the operation [64].

By the way, GPS, GLONASS (Global Orbiting Navigation Satellite System) and Galileo

93

are three GNSSs operating or being developed [63]. Kalman filtering [65] is usually in the integration [38].

5.2.3.Application in Other Human Movement
In this thesis, the research emphasizes on testing the algorithms developed and verification to drift reduction methods. Hence only relatively regular human walking, including some turns, is tested. In the future, more experiments should be done to typical locomotion of a first responder, such as on the spot turn, side stepping, back stepping, zigzagged walking, stair climbing, running and even crawling. If additional sensor modules, other than the one on human foot, are installed on certain parts of human body such as trunk, shank and thigh, not only the location of the user will be tracked, but also his posture and mobility status will be monitored. The posture and mobility of human body can be used to identify walking models and infer the safety condition of the user.

5.2.4. Reduction of the Impact of Temperature Change
As mentioned in the beginning of this thesis, one of the intentions of the research is to track people fighting with a structure frre, whose temperature may rise to 500
o

C

[66]. Moreover, partly due to the movement of the human being, the temperature measured by inertial sensors varies rapidly. Faulkner [55] did some preliminary investigation on this issue. However, further research should still be done to study the

94

impact of irregular temperature change. Solutions have to be found for the stable functioning of the system to be developed.

5.2.5. Wireless Networking
As mentioned in Chapter 1, a practical tracking system may include several users, thus a wireless network, or a wireless sensor network has to be established. Each wearable terminal will calculate its own current position and report it to the base station or control center. In case the wearable units are not able to complete the tracking algorithm by themselves, the base station or control center will conduct some data processing.

95

Appendix Abbreviation List
2D 3D BICMOS BPF CMOS DC DCM EKF GLONASS GNSS GPS IC IGRF IMU INS LPF LOS LSC MCMC Two Dimensional Three Dimensional integration of bipolar junction transistors and CMOS technology Backtracking Particle Filter Complementary Metal-Oxide-Semiconductor Direct Current Direct Cosine Matrix Extended Kalman Filter Global Orbiting Navigation Satellite System Global Navigation Satellite System Global Positioning System Integrated Circuit International Geomagnetic Reference Field , Inertial Measurement Unit Inertial Navigation System Low Pass Filter Line-Of-Sight Location Service Center Markov Chain Monte Carlo

96

MEMS MR NFPA niMU NLOS PASS PDR PNA RF RFID RSS RTOF SCBA SERF SMC

Micro Electro Mechanic Systems Mixed Reality National Fire Protection Association nano Inertial Measurement Unit Non-Line-Of-Sight Personal Alert Safety System Pedestrian Dead Reckoning Personal Navigation Assistant Radio Frequency Radio-Frequency Identification Received Signal Strengths Roundtrip Time Of Flight Self-Contained Breathing Apparatus Spin-Exchange Relaxation-Free Sequential Monte Carlo Systems-On-a-Chip Superconducting Quantum Interference Device Time Difference Of Arrival Time of Arrival Time of Flight Time To First Fix Unscented Kalman Filter Urban Search And Rescue

soc
SQUID TDOA TOA TOF TTFF UKF USAR

97

UWB USB WLAN ZUPT

Ultra-Wide-Band Universal Serial Bus Wireless Local Area Network Zero Velocity Update

98

Bibliography
1.

M. J. Karter, Jr., "Patterns of firefighter frreground injuries", NFPA Fire Analysis

and Research, Quincy, MA, USA, Feb. 2007.
2.

S. Beauregard, "Omnidirectional pedestrian navigation for frrst responders",

Positioning, Navigation and Communication, WPNC '07, 4th Workshop, pp.33-36,
Mar. 2007.
3.

A. Krtiger, A. Butz, C. Mtiller, C. Stahl, R. Wasinger, K. Steinberg and A. Dirschl, "The connected user interface: realizing a personal situated navigation service",

Proceedings of the 9th international conference on Intelligent user interface, Funchal,
Madeira, Portugal, Jan. 2004.
4.

A. Kleiner and C. Dornhege, "Real-time localization and elevation mapping within urban search and rescue scenarios", Journal of Field Robotics, 2007.

5.

S. You, U. Neumann and R. Azuma, "Orientation tracking for outdoor augmented reality registration", Computer Graphics and Applications, IEEE, vol. 19, no. 6, pp.36-42, 1999.

6.

W. Piekarski, B. Avery, B.H. Thomas and P. Malbezin, "Integrated head and hand tracking for indoor and outdoor augmented reality", Proceedings of the IEEE

Conference on Virtual Reality (VR '04), pp.267-276, 2004.
7.

Y. Shi, "Context awareness, the spirit of pervasive computing", 1st International

Symposium on Pervasive Computing and Applications, Aug. 2006.
8.

Y. Fukuju, M. Minami, H. Morikawa and T. Aoyama, "DOLPHIN: an autonomous indoor positioning system in ubiquitous computing environment", IEEE Workshop

on Software Technologies for Future Embedded Systems , pp.53-56, May 2003.
9.

J. Hightower and G. Borriello, "Location systems for ubiquitous computing",

Computer, vol. 34, no.8, pp.57-66, Aug. 2001.

99

10. G. Garter and K. Rehrl, Location based services and telecartography II, Springer,

2009.
11. H. Liu, H. Darabi, P. Banerjee and J. Liu, "Survey of wireless indoor positioning

techniques and systems", IEEE Transactions on Systems, Man, and Cybernetics -

Part C: Applications and Reviews, vol.37, no.6, pp.1067-1080, Nov. 2007.
12. M. Vossiek, M. Wiebking, L. Gulden, P. Weighardt, and J. Hoffmann, "Wireless

local positioning-Concepts, solutions, applications", Procedings of IEEE Wireless

Communication Network Conference, pp. 219-224, Aug. 2003.
13. C. Drane, M. Macnaughtan, and C. Scott, "Positioning GSM telephones," IEEE

Communication Magazine, vol. 36, no. 4, pp. 46-54, 59, Apr. 1998.
14. I. F. Progri, W. R. Michalson, J. Orr, and D. Cyganski, "A system for tracking and

locating emergency personnel inside buildings", Proceeding of ION-GPS, Salt Lake City, UT, USA, pp. 560-568, Sep. 2000.
15. R. Challamel, P. Tome, D. Harmer and S. Beauregard, "Performance assessment of

indoor location technologies", Position, Location and Navigation Symposium,

IEEE/ION, pp.624-632, May 2008.
16. D. H. Titterton and J. L. Weston, Strapdown Inertial Navigation Technology, 2"d

Edition, The American Institute of Aeronautics and Astronautics, 2004.
17. M. Gad-el-Hak. MEMS: Introduction and Fundamentals, 2"d Edition, CRC Press I

Taylor & Francis, 2006.
18. S. Beeby, G. Ensell, M. Kraft and N. White, MEMS Mechanical Sensors, Artech

House Inc., 2004.
19. J. G. Korkvink and 0. Paul. MEMS: a Practical Guide to Design, Analysis and

Application, W. Andrew Pub., Norwich, NY; Heidelberg, Springer, Germany, 2006.

100

20. J. Waldner,

Nanocomputers and Swarm Intelligence, ISTE John Wiley & Sons,

London, UK, 2008.
21. K. J. Walchko and P. A. C. Mason, "Inertial Navigation",

Florida Conference on

Recent Advances in Robotics, 2002.
22. A. B. Chatfield,

Fundamentals of High Accuracy Inertial Navigation, American

Institute of Aeronautics and Astronautics, Inc., Reston, VA, USA, 1997.
23. A. D. King, "Inertial Navigation- Forty Years of Evolution",

GEC Review, vol.13,

no.3, 1998.
24. 0. Woodman. "An introduction to inertial navigation",

Technical" Report 696,

University of Cambridge, 2007.
25. H.

Goldstein, Classical Mechanics, 2nd Edition, Addison-Wesley Publishing

Company, 1980.
26. R. M. Robert,

Applied Mathematics in Integrated Navigation Systems, 2nd Edition,

American Institute of Aeronautics and Astronautics, Inc., 2003.
27. D. Gordon, E. Robertson, G. E. Caldwell, J. Hamill, G. Kamen and S. N. Whittlesey,

Research methods in biomechnics, Human Kinetics, Champaign, IL, USA, 2004.
28. J. B. Scarborough,

The Gyroscope theory and Applications, Interscience Publishers,

Inc., New York, USA, 1958.
29. S.

Nasiri,

"A

critical

review

of

MEMS

gyroscopes

technology

and

commercialization status", A Report for InvenSense, Santa Clara, CA, USA, 2000.
30. E. Foxlin, "Pedestrian tracking with shoe-mounted inertial sensors",

IEEE Computer

Graph Application, vol. 25, no. 6, pp. 38-46, 2005.
31. S. Miyazaki, "Long-term unrestrained measurement of stride length and walking

velocity utilizing a piezoelectric gyroscope", IEEE Transaction on Biomedical

Engineering, vol.44, no.8, pp753-759, 1997.

101

32. K. Sagawa, T. Ishihara, A. Ina and H. Inooka, "Classification of human moving

patterns using air pressure and acceleration", Proceedings of the 24th Annual

Conference of the IEEE, vol. 2, pp. 1214-1219, 1998.
33. K. Sagawa and Y. Satoh, "Non-restricted measurement of walking distance", IEEE

International Conference on SMC, pp. 1847-1852, 2000.
34. Q.

Ladetto.

"On foot

navigation:

continuous

step

calibration usmg

both

complementary recursive prediction and adaptive Kalman filtering", ION GPS, Salt Lake City, Utah, USA, Sep. 2000.
35. Q. Ladetto, V. Gabaglio, B. Merminod, P. Terrier and Y. Schutz, "Human walking

analysis assisted by DGPS", GNSS, Edinburgh, UK, May 2000,
36. Q. Ladetto and B. Merminod. "Digital magnetic compass and gyroscope integration

for pedestrian navigation",

gth

Saint Petersburg International Conference on

Integrated Navigation Systems, Russia, May 2002.
37. M. Dippold, "Personal Dead Reckoning with Accelerometers", University of Bremen,

http://spring.bologna.enea. it/ifawc/2006/proceedings/IFA WC2006_18.pdf, 2006
38. E. P. Herrera, R. Quiros and H. Kaufmann, "Analysis of a Kalman approach for a

pedestrian positioning system in indoor environments", Euro-Par 2007, pp. 931-940, 2007.
39. 0. Mezentsev, G. Lachapelle, and J. Collin, "Pedestrian dead reckoning- a solution

to navigation in GPS signal degraded areas," Geomatica, vol. 59, no.2, pp. 175-182, 2005.
40. J. Collin, 0. Mezentsev, and G. Lachapelle, "Indoor positioning system usmg

accelerometry and high accuracy heading sensors", Proceedings of GPS2003, The InstituteofNavigation, Alexandria, VA, USA, pp. 1164-1170, Sep. 2003.

102

41. G. Garter, A. Frank and G. Retscher, "Pedestrian navigation system in mixed

indoor/outdoor environment - the NA VIO project",

9th

Internation Symposium on

Planning & IT (CORP 2004 & Geomultimedia04), pp. 165-171, Feb. 2004.
42. G. Abwerzger, B. Ott, and E. Wasle, "Demonstrating a GPSIEGNOS/Loran-C

navigation system in difficult environments as part of the ESA project SHADE," in

EURAN 2004 Conference, Munich, Germany, Jun. 2004.
43 . L.

Ojeda, J. Borenstein, "Personal dead-reckoning system for GPS-denied

environments", IEEE SSRR 2007, 2007.
44. H. Leppakoski, J. Kappi, J. Syrjarinne, and J. Takala, "Error analysis of step length

estimation in pedestrian dead reckoning", The Institute of Navigation, pp. 1136-1142, Sept. 2002.
45. J. Rose and J. G. Gamble, Human Walking, 2nd Edition, Williams & Wilkins, 1994. 46. R. Stirling, J. Collin, K. Fyfe and G. Lachapelle, "An Innovative shoe-mounted

pedestrian navigation system", Austrian Institute Of Navigation, 2003.
47. E. Foxlin, M. Harrington and Y. Altshuler, "Miniature 6-DOF inertial system for

tracking HMDs", SPIE, vol. 3362, 1998.
48. X. Yun, E. R. Bachmann, H. Moore and J. Calusdian, "Self-contained position

tracking of human movement using small inertial/magnetic sensor modules", IEEE

International Conference on Robotics and Automation, Roma, Italy, Apr. 2007.
49. MEMSense, "Determination of static orientation using IMU data", Rev 1.

50. MEMSense, "Bias and sensitivity corrections of magnetometers", Rev 1.
51. MEMSense, ''Technical documents, compensating for tilt, hard iron and soft iron

effects", Rev 1.0, 2008.
52. MEMSense, "Technical documents, calculating heading, elevation and bank angle",

Rev 1.0, 2008.

103

53. MEMSense, "niMU Nano Inertial Measurement Unit Series Documentation", Ver.

2.10, 2008.
54. T. Faulkner and S. Chestnut, "Impact of rapid temperature change on firefighter

tracking

in

GPS-denied

environments

using

inexpensive

MEMS

IMUs",

www.geonav.ensco.com/reports/ION_NTM2008.pdf, last accessed Jan. 2009.

55. MEMSense, "Driver installation, IMU data console, IMU demo", Rev 1.0, 2008.
56. T. W. Lezniak, R. W. Lewis and R. A. McMillen, "A dead reckoning/map

correlation system for automatic vehicle tracking", IEEE Transactions on Vehicular

Technology, vol. 26, no. 1, pp. 47- 60, 2006.
57. S. S. Saab, "A map matching approach for train positioning part 1: development and

analysis," IEEE Transaction on Vehicle Technology, vol. 49, no. 2, pp. 467-475, Mar. 2000.
58. S. S. Saab, "A map matching approach for train positioning part II: application and

experimentation," IEEE Transaction on Vehicle Technology, vol. 49, no. 2, pp. 476483, Mar. 2000.
59. D. Lee, W. Chung and M. Kim, "A reliable position estimation method of the service

robot by map matching", Proceedings of the 2003 IEEE International Conference on

Robotic &Automation, Sept., 2003.
60.

A. Levin and R. Szeliski, "Visual odometry and map correlation", Proceedings of
the IEEE Computer Society Conference on Computer Vision and Pattern Recognition, vol. 1, pp. 1-611 - 1-618, 2004.

61. S. W. Beauregard and M. Klepal, "Indoor PDR performance enhancement using

minimal map information and particle filters", Position, Location and Navigation

Symposium, 2008 IEEE/ION, pp. 141-147, May 2008.
62. S. G. Smith and R. F. Strokes, "Integrated Navigation System Architecture", lEE

Colloquium on Future Military Avionic Architectures, pp. 911 - 9/3, May 1990.

104

63. M. S. Grewal, L. R. Weill and A. P. Andrews, Global Positioning Systems, Inertial

Navigation, and Integration, 2nd Edition, John Wiley & Sons, 2007.
64. D. Weed, J. Broderick, J. Love and T. Ryno, "GPS align in motion of civilian

strapdown INS", Position Location and Navigation Symposium, pp. 184-192, Apr.
2004.

65. R. G. Brown and P. Y. C. Hwang, Introduction to Random Signals and Applied

Kalman Filtering, 2nd Edition, John Wiley & Sons, 1992.
66. R. Hall and B. Adams, Essentials of Fire Fighting, Publications, Oklahoma State University, 1998.
4th

Edition, Fire Protection

105


