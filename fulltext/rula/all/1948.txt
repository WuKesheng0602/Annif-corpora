OPTIMAL RESOURCE ALLOCATION FOR QOS SUPPORTS IN SMART GRID NEIGHBORHOOD AREA NETWORK

by

Mohammad Shams Yazdi

A Thesis Presented to the School of Graduate Studies at Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the Program of Computer Networks Department of Electrical and Computer Engineering Toronto, Ontario, Canada, June 2013 ©Mohammad Shams Yazdi 2013

Author's Declaration
I hereby declare that I am the sole author of this thesis.

I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

________________________________

Mohammad Shams Yazdi

I further authorize Ryerson University to reproduce this thesis by photocopying or other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

________________________________

Mohammad Shams Yazdi

Page | i

Abstract
OPTIMAL RESOURCE ALLOCATION FOR QOS SUPPORTS IN SMART GRID NEIGHBORHOOD AREA NETWORK

©Mohammad Shams Yazdi 2013 Master of Applied Science Computer Networks Program Department of Electrical and Computer Engineering Ryerson University

Smart grid is a utility network, with advanced information and communications technologies for improved control, efficiency, reliability and safety in electric power distribution and management. Smart grid communication network consists of three interconnected communication networks: home area network (HAN), neighborhood area network (NAN), and wide area network (WAN). Our thesis is focused on NAN. The information flow in smart grid communication networks has different Quality of Service (QoS) requirements in terms of packet loss rate, throughput, and latency. By deploying QoS mechanisms, we can get the real time feedbacks which can be used to supply electricity based on need, thus reducing the wastage of electricity. First, we conducted Opnet simulations for NAN. We evaluated two technologies, Zigbee and wireless local area network (WLAN), for NAN. The simulation results demonstrate that latency can be reduced for the data flow with a higher priority with an appropriate QoS mechanism. Next, we proposed an optimal resource allocation scheme to reduce delay and provide differentiated services, in terms of latency, to different classes of traffic in the NAN. The problem is formulated into a linear programming (LP) problem, which can be solved efficiently. The simulation results and comparison demonstrates that the proposed resource allocation scheme can provide overall lower latency of the various data flows. Our method also lowers the delay of the data flow with a higher priority.

Page | ii

Acknowledgement
I am truly grateful to my supervisor Dr. Yifeng He, his encouragement and guidance from the initial to the final level enabled me to develop an understanding of the subject and finally materializing of this work. I thank him for providing all the help, support and necessary resources to complete the project successfully. Dr. He is in no doubt among the most understanding and supportive among the supervisors, and I would prefer working with him again if I given another chance.

I am deeply thankful to Dr. Bobby Ngok-Wah Ma, Professor, and Program Director for computer networks; for his continuous support, valuable advices and encouragement throughout the program duration. I would like to thank the computer networks team members for providing a pleasant working environment.

I would also like to thank my defense committee members as they have taken the time and given effort to review my work and provide insightful advices.

I would like to show my sincere gratitude to my family and friends for all their support and encouragement throughout my life. Finally, I would like to thank almighty Allah for his countless blessings and giving me the strength to complete this work.

Page | iii

Table of Contents
Chapter 1 ...........................................................................................1 Introduction.......................................................................................1
1.1 Smart grid ­ A brief introduction .......................................................................................... 1 1.2 Importance of communications in Smart Grid...................................................................... 2 1.3 The Importance of QoS in Smart Grid Communication ........................................................ 4 1.4 Smart Grid Challenges ........................................................................................................... 5 1.5 Motivation and Contribution ................................................................................................. 7 1.6 Thesis Organization ............................................................................................................... 8

Chapter 2 ...........................................................................................9 Background Literature........................................................................9
2.1 Smart Grid Communication Architecture ........................................................................... 10 2.2 QoS in smart grid ................................................................................................................. 13

Chapter 3 ......................................................................................... 19 Experimental study of QoS in smart grid NAN ................................... 19
3.1 Introduction......................................................................................................................... 19 3.2 Simulation for NAN using Zigbee ........................................................................................ 22 3.2.1 Simulation Setting ............................................................................................................ 22 3.2.2 Simulation results for Zigbee NAN ................................................................................... 23 3.3 Simulation for NAN using WLAN ......................................................................................... 27
Page | iv

3.3.1 Simulation Setting ............................................................................................................ 27 3.3.2 Simulation results for NAN using WLAN .......................................................................... 29 3.4 Chapter Summary................................................................................................................ 35

Chapter 4 ......................................................................................... 36 Optimal Resource Allocation with Delay Guarantee for Smart Grid NAN ................................................................................................. 36
4.1 Introduction......................................................................................................................... 36 4.2 System Models and Problem Formulation.......................................................................... 39 4.4 Simulation............................................................................................................................ 50 4.5 Chapter Summary................................................................................................................ 73

Chapter 5 ......................................................................................... 74 Conclusion ....................................................................................... 74
5.1 Conclusion ........................................................................................................................... 74 5.2 Future Work ........................................................................................................................ 75

Reference ........................................................................................ 77

Page | v

List of Figures
Fig 1.1: Smart Grid communication architecture Fig 3.1: The Zigbee NAN topology Fig 3.2: Delay comparison in Zigbee NAN Fig 3.3: Throughput comparison in Zigbee NAN Fig 3.4: The WLAN NAN topology Fig 3.5: Comparison of data drop rate due to buffer overflow in NAN for SM data Fig 3.6: Comparison of data drop rate due to buffer overflow in NAN for EV control 30 data Fig 3.7: Comparison of delay in NAN for SM data Fig 3.8: Comparison of delay in NAN for EV control data Fig 3.9: Comparison of throughput in NAN for SM data Fig 3.10: Comparison of throughput in NAN for EV control data Fig 4.1: Illustration of the node-link incidence relationship at node i Fig 4.2: Illustration of the generated rate at each node for session h Fig 4.3: A network topology with four nodes Fig 4.4: Topology for the smart grid NAN with 15 nodes in L shape Fig 4.5: The data flows in the 15-node L-shape topology 32 32 33 34 41 41 42 52 53 3 22 24 25 28 30

Page | vi

Fig 4.6: The delay comparison in the 15-node L-shape topology Fig 4.7: Topology for the smart grid NAN with 20 nodes in U shape Fig 4.8: The data flows in the 20-node U-shape topology Fig 4.9: The delay comparison graph in the 20-node U-shape topology Fig 4.10: Topology for the smart grid NAN with 20 structured nodes 4.11: The data flows in the 20-node structured topology Fig 4.12: The delay comparison in the 20-node structured topology Fig 4.13: Topology for the smart grid NAN with 20 randomly located nodes Fig 4.14: The data flows in the 20-node random topology Fig 4.15: The delay comparison in the 20-node random topology Fig 4.16: Topology for the smart grid NAN with 10 random nodes Fig 4.17: The data flows in the 10-node random topology Fig 4.18: The delay comparison in the 10-node random topology Fig 4.19: Average delay comparison in both methods for all the scenarios

54 56 57 58 60 61 62 64 65 66 68 69 70 71

Page | vii

List of Tables
Table 3.1: Data rate used in Zigbee NAN Test simulation Table: 4.1 Symbol notations Table 4.2: node-link incidence matrix for the network given in Fig. 4.3 23 39 43

Page | viii

Chapter 1

Introduction
1.1 Smart grid ­ A brief introduction

The electricity sector has become the focused strategy interest in Canada and globally. It has been discussed often as an answer to power management, rather than simply the continued maturation of an electricity network. The advancement towards a smart grid roll-out is both important to stakeholders and customers. It is significant to understand exactly what is smart grid. Smart grids are electric grids which have been extended with information and communication technology (ICT), providing grid members with a certain level of smartness and
Page | 1

the ability to exchange information amongst each other [1]. Smart grid refers to next generation utility networks in which the electric power distribution and management is upgraded by incorporating advanced information and communications technologies for improved control, efficiency, reliability, and safety [2]. It could also be summarized as the grid's ability to sense the state of the grid and act automatically and independently upon this state based on rules or algorithms previously defined.

Smart grid provides one or more of the benefits: grid resilience, environmental performance, or operational efficiencies. Smart grid is an electrical grid that uses communication technology to act on information of suppliers and consumers, in an automated fashion to improve the efficiency, reliability, economics, and sustainability of the production and distribution of electricity [3]. Roll-out of the technology implies essential re-engineering of the electricity industry, although typical usage of the term is focused on the technical paradigm of the infrastructure. A rough classification of smart grids can be made into smart grids installed on a building level and smart grids installed on a grid level [3]. The EU has the climate change objective as 20/20/20 i.e. within 2020 20% less green house emission, 20% renewable share, 20% consumption saving. Smart Grid will play a key role in improving energy efficiency [4].

1.2 Importance of communications in Smart Grid
The current electric power systems have been serving us for more than five decades. The electricity company has been providing power in a region basis, based on load forecasting from the very beginning. The utility companies over-provision the demand considering the peak load. When the demand increases above the average they turn on other plants. But it leads to lot of wastage when the demand is lower than average, as electricity once produced has to be used as electricity storage is very expensive. And also it is expensive to maintain more plants to match supply to the peak demand. The current communication capabilities of the existing
Page | 2

power systems are limited to small small-scale local regions that implement basic functionalities for system monitoring and control, such as power power-line line communications and the Supervisory control and data acquisition (SCADA) systems, which do not yet meet the demanding communication requirements for the automated and intelligent management in the nextnext generation electric power systems [5].

Smart grid replaces the old used meters by digital meters and the advanced metering system enable communication from generation to distribution and enables customers to shut down the use of high powered device during peak demand [6] [6]. The smart grid communication architecture is envisioned with three interconnected communication architectures: home area network (HAN), neighbourhood area network (NAN) and wide area network ork (WAN). A smart grid communication architecture is illustrated in Fig1.1.

Fig 1.1: Smart Grid communication architecture

Page | 3

Two way communications from the supplier to the consumer and consumer to supplier are not new. The process has been become much easier for wider implementation of internet. Electricity production, transmission and distribution consumption have been more transparent as the knowledge of grid condition is more elaborately known [7]. In this way smart grid monitors the system more intelligently. Nowadays renewable energy such as wind or solar power can also be integrated with the system. It should be clearly understood that smart grid is exclusively an electricity grid, which deals with distribution and transmission and will not be any different from the conventional grid.

Many existing technologies may be used for smart Grid communication, all has merits and demerits: Power line carrier, Cable internet, Wireless and Radio frequency mesh grid [8]. Many papers have been written about Smart Grid and smart Metering Communication. They explain necessity of Smart Grids, Capacity of doing this and its future use. The main conclusion is that no single means of communication on its own will be able to meet the requirements. ZigBee fulfills the basic requirements of electricity meter applications in smart metering technology. It have the effective data rate, supports large networks, provides 8 levels of security, and ensures integrity & confidentiality of metering data [9].

1.3 The Importance of QoS in Smart Grid Communication
The information flows in the Smart Grid communication network have different requirements in terms of bandwidth, latency, traffic model, and priority level [10]. For example, the outage management data has a stringent delay requirement, and the video surveillance requires a large bandwidth. However, the smart grid communication network is a best-effort network, which does not provide Quality of Service (QoS) support to the data delivery [10]. It is

Page | 4

important to deploy QoS mechanisms in smart grid communication networks to meet the QoS requirement for each class of data.

To achieve the modern grid, 5 key technologies are needed to be addressed: Integrated Communication, Sensing and measurement, Advanced components, Advanced control methods Improved interfaces & decision support [11].

Current QoS standards, product features and network implementation practices are not appropriate in handling the wide range of reliability, priority latency requirements of Smart Grid applications. For example, if we only consider the traditional substation applications, its priority must be set higher than any other applications [12]. Many smart grid applications consume much lower bandwidth than the traditional IP enterprise network [12]. Hence conventional bandwidth based traffic engineering is way too much. Thus QoS design must consider both latency and priority. The QoS is not well supported in the current smart grid communication networks. New QoS paradigm will need to be considered [12].

1.4 Smart Grid Challenges

Smart grid is an electrical power infrastructure that makes intelligent decisions about the state of the electrical power system [13]. It enables real time communication between the consumer and utility allowing the consumers to optimize their usage based on environment and/or price references [13]. Tight coupling technologies are prone to system accidents, any overstress triggers in the power line of neighbouring grids which in turn sets off a cascade system failure. The Smart Grid will be resilient to attack of natural disaster and may prone to cyber attacks. But in this 21st century the grid takes the advantage of digital technology to surpass all odds. So a Smart grid should have self healing capabilities, have enough security against existing attack,
Page | 5

such as spam, worms & viruses, and have enough strength against any type of network failure due to storms, lighting, fire etc [14].

Smart grid is slowly but definitely becoming a corner stone in future system network configuration. Smart grid presents a strong and valuable solution to energy market challenges [15]. Bright ideas as to how to implement a reliable, safe and highly efficient power system network are being investigated. There is still a lot to be done to achieve an ideal Smart Grid that will have more power system stability and load management and efficient supply [15].

The EU has set goals to counter environmental issue through smart grid technology. One of these goals is to use 80% smart meters in all households. However smart metering communication is still in its initial stage and the cost is also uncertain. Following are some of the major requirements that a smart grid network has to fulfill [16]:

Reliability- smart grid concept is based on reaction to changes elsewhere in the grid which may fail if the demand-response is not met as required Latency and data rate- smart grid concept generates a lot of data to communicate for swift data delivery. Therefore, a large bandwidth is needed which may become a great concern. Security- smart metering provides personal information may cause privacy problems and may invite cyber crimes to hack grid information. Cost: It is still to calculate how much money it takes to put together and operate the network.

Page | 6

1.5 Motivation and Contribution
With the increasing demand of electrical energy in the near future, it is necessary to develop an efficient smart grid communication system for the electricity grids. With real time data from consumer end, the utility companies can act in response to the demands. For implementing that, proper smart grid real time bidirectional communication network is essential. However, most of the traditional networks are designed to provide best effort service without any support for QoS. By improving the QoS of the smart grid communication architecture, we will get real time feedback which will lead to supply based on need, thus less wastage of electricity.

In Chapter 3, we evaluate two of the potential wireless technologies: Zigbee and WLAN to be used in NAN. At first we appraised zigbee to be used in NAN in accordance with the NAN requirement. We thoroughly evaluated zigbee in terms of reliability, delay and throughput. In our scenario, we got tolerable delay and throughput. Thus we can conclude that zigbee is suitable for carrying smart grid NAN data. Next, we evaluate WLAN to be used in NAN. We evaluated the QoS architecture using two classes of data. In the WLAN scenario, we concluded to put the priority data into the voice class, and the low priority data into the background class. And with the simulation results we can also conclude WLAN is also a great platform to transport NAN data. WLAN provides a higher data rate than Zigbee, but it needs much more resources. We can choose to opt for the ideal technology based on the scenario requirement.

In chapter 4, our focus was in the QoS of smart grid communication architecture. We worked on latency in Wireless Sensor Network (WSN) to be implemented in the Neighbourhood Area Network (NAN). An efficient end to end delay management scheme for reducing the delay and prioritizing the traffic in the NAN architecture was proposed. We formulated the NAN QoS problem into a linear programming (LP) problem. The solution to the LP problem provides an efficient QoS management scheme. We conducted the experiments in a number of different
Page | 7

settings. We also compared our proposed work with the existing work in [37]. The comparison results demonstrate that the proposed method can provide differentiated services in terms of latency among different classes and improve the overall end-to-end latency compared to the existing work [37]. Our methodology will be beneficial to the smart grid NAN design.

1.6 Thesis Organization
The thesis is organized as follows. Chapter 2 provides the related work in the contemporary field of smart grid architecture and QoS. Chapter 3 evaluates the performance of Zigbee and WLAN in Opnet for smart grid networks to be used in NAN. In chapter 4, problem definition, formulation and simulation are provided for resource allocation with end to end delay guarantee in smart grid. We also compared our work with the contemporary work [37]. At the end, chapter 5 summarizes the work and provides the future direction.

Page | 8

Chapter 2

Background Literature

The proposed algorithm and the work lay in a number of different areas in the field of communication technology. So we had to review the relevant works in a number of related fields. The smart grid is still in developing stage and the QoS of smart grid is still at its infancy [17]. So we have reviewed the contemporary work focusing on the different areas of smart grid. The wireless protocols are more preferred over the wired one's and are more poised to shape the smart grid communication future. We have also focused on the QoS related works of the wireless protocols and how they might impact the smart grid QoS. This chapter is organized as follows. Section 2.1 is specifically devoted to the smart grid communication architecture related works. Section 2.2 focuses on the contemporary works in the QoS in smart grid.
Page | 9

2.1 Smart Grid Communication Architecture

The architecture of smart grid and their execution on power grid are: sensor system, communication architecture, control algorithm and the physical system. Smart Grid Communication Network's hierarchy can be defined as: Core network (CN) and an Access Network. Smart Grid Core network connects control centers, power generating stations and Distribution Area Network (DAN) also knows as wide area network (WAN) [18]. The control centers take preventive actions when the electrical network is in dire situations and in regular hours it monitors consumption and generate billing. Core network communication's best choice is optical network [19]. Access network is comprised of Home Area Network and Neighborhood Area Networks (NAN). Home Area Network (HAN) is a multivendor setting comprised of household electrical appliances that gathers data on electricity consumption and transmits back that information. Recent advanced metering infrastructure (AMI) supports are: outage reestablishment practice, power monitoring, variable rate pricing, and times of use metering and smart thermostat programs [20]. NAN is the network that interconnects the HAN AMI's that are in homes, industries and businesses. NAN is used for meter reading, demand response, remote disconnect for load control, local command messages, etc and connects access network, surveillance support and distribution substation networks [21].

The bandwidth requirements for HANs are 1-10 Kbps and they cover generally around 1000 square feet [22]. Standards­ ZigBee and WiFi can suffice these necessities [23]. NAN demands bandwidths of 100­500 Kbps [22]. The end-to-end delay in NAN are 1-15sec [23]. The technologies that can be used are 900MHz proprietary mesh network and Broadband Power Line Communication [BB-PLC] [23]. WAN requires bandwidth of 500 Kbps-10 Mbps and lower latency and it covers a large area [22].

Page | 10

Advanced Metering Infrastructure (AMI) infrastructure includes home network systems, including communicating thermostats and other in-home controls, smart meters, communication networks from the meters to local data concentrators, back-haul communications networks to corporate data centers, meter data management systems (MDMS) and, finally, data integration into existing and new software application platforms. The data rate and latency of the AMI communication system is discussed among three interconnected communication structures HAN, NAN and WAN [24]. Various data types, their required

bandwidth and latency requirements were also discussed [25-28] and described hereafter. The following data flow requirements are for HAN. The advanced metering type of data can have around 500kbps of data rate with latency ranging from 2 to 15ms. Their traffic type is periodic which arrives ranging around 15 to 60 minutes. The demand response type (pricing and load) of data have periodic or random type of data rate anywhere between 14-100 kbps and their latency requirement is 500msec to 1min. Control, monitoring and usage data are periodic, the rate is typically less than 9kbps and the latency is 200ms and used in HAN and NAN. The following data flow requirements are for WAN. Grid management data comes in random, the data rate is 9-100kbps and the latency requirement is 100ms to 2s. Video surveillance data rate range from 64 to 128kbps, it is continuous and the latency requirement is 0.5-1sec. The work force telephony data is random, the data rate is typically less than 8kbps, and the latency is 200msec.

Different technologies are suggested in the architecture: Narrow Band-Power Line Communication (NB-PLC) [29], Broadband Power Line Communication [BB-PLC] [30], Digital subscriber line (DSL), ZigBee, WiFi, cellular, microwave, WiMAX, long-term evolution (LTE) and some proprietary mesh networks [31].Feasibility of using decentralized multi-agent control logic in the automation of smart grid distribution networks is conducted [32].

Cloud based virtual Smart Grid (vSG) architecture and its concept design is discussed [33]. Ondemand virtual real-time systems to support various smart grid applications with guaranteed
Page | 11

Quality of Service (QoS) while achieving economies of scale by decoupling the logical systems from the physical infrastructure was presented [34]. Agent oriented architecture focusing on the self healing problem is discussed [35]. It handles methodologies for activating control solutions to take preventative actions or to handle problems after they occur.

The IEEE 802.15.4 protocol popularly known as zigbee protocol is the widely implemented protocol for smart meters thus in process to be extensively used in smart grid HAN and NAN. It specifies the Medium Access Control (MAC) sub-layer and physical layer for Low-Rate Wireless Sensor Network (WSN) [36]. WSN supports two different types of devices, Full Function Device and Reduced Function Device. Two types of network topologies are defined Star Topology and Peer-to-Peer Topology. The physical layer is responsible for data transmission and reception using a certain radio channel and according to a specific modulation and spreading technique. It offers three operational frequency bands: 2.4 GHz, 915 MHz and 868 MHz, and offers dynamic channel selection [36]. The MAC sub-layer provides an interface between the physical layer and the higher layer protocols of WSN. The MAC protocol supports two operational modes Beaconenabled and Non Beacon-enabled. Two versions of the Carrier sense multiple access with collision detection (CSMA/CA) mechanism are defined: the slotted CSMA/CA version ­ used in the beacon-enabled mode and the unslotted CSMA/CA version ­ used in the non beaconenabled mode [36].

Page | 12

2.2 QoS in smart grid
Smart Grid's each user's utility not only depends on its local source rate, but also on the total cost consumed in relaying its data packets to a sink. This paper proposes a novel Network Utility Maximization (NUM) model with constrained delay for real-time applications in wireless sensor networks [38]. A novel network utility maximization framework with end-to-end delay constrains in wireless sensor network was considered. The problem is solved using duality decomposition approach by making it a convex optimization problem.

Scheduling algorithm is proposed for slot assignment in clustered WSNs and incorporates the slot reuse concept which significantly reduces the end-to-end latency [39]. The nodes in the network are divided into multiple clusters. Minimizing the Time Division Multiple Access (TDMA) frame length also minimizes the end-to-end delay. The slot reuse concept is used to reduce TDMA frame length. A slot already assigned to a link can be reused at another link provided that the interference between the two links is below a specified threshold. The Non Cross Layer Design (NCLD) approach achieves the smallest frame length. The average delay is also reduced. The algorithm reduces end to end latency [39]. With nodes much further apart, more slots can be reused, translating to a higher reduction in the frame length for large-size networks. Results reveal the advantage of the cross-layer optimization model in energy conservation, and the effectiveness of the scheduling algorithm in reducing the TDMA frame length, and thus, the end-to-end latency [39]. A slot is reused only if the interference introduced is negligible.

Reliable delivery of data is a classical design goal for reliability-oriented collection routing protocols for ad hoc wireless sensor networks. The proposed routing protocol can achieve moderate energy consumption and high packet delivery ratio even with high link failure rates. [40]. RLBR reduces energy consumed for packets transmissions by embedding routing information in the overheard packets and minimizing control traffic. As a result, it maintains

Page | 13

low packet error ratio and improves packet delivery while minimizing redundant packet transmission and/or retransmissions throughout the network. The packet delivery deadline depends on the real-time application and is associated with every originated data packets at the source sensor nodes. The total accumulated per-relay encapsulating delay including propagation on route must not exceed the remaining time which is the time left further until the associated real-time deadline at the base station.

Multiple Level Stateless Protocol (MLSP) [41], that enables sensor data to be delivered within time constraints to make suitable real-time actions possible. In MLSP, the area is divided into four areas: Red, Orange, Green, and Free. For neighbor discovery, a periodic beacon packet is sent to possible neighbors until a response is received. MLSP forwards the packets to the most forwarding choice node that meets the packets delivery requirements. SPEED [42] is an adaptive, location based real time routing/communication protocol that aims to reduce the end-to end deadline miss ratio in sensor network which utilizes geographic locations to make localized routing decisions. In addition, it is capable of handling congestion and therefore provides soft real time communication that other location based protocols cannot provide. Multi-path and Multi-SPEED Routing Protocol (MMSPEED) [43] is a packet delivery mechanism for wireless sensor networks to grant service differentiation and probabilistic QoS guarantees in timeliness and reliability domains. In MMSPPED, two queues in a sensor node are considered; high-priority and low-priority. The scheduler uses strict priority logic, i.e., it always serves the high-priority queue first. In the limited service system, a queue is served until either the buffer is emptied or a specified number of packets are served.

The paper [44] presents a solution to the prediction of percentage of data packet loss in the wireless sensor network in indoor and outdoor environment. It uses the Artificial Neural Network (ANN) to predict the data packet loss and the Erasure Coding technique to find the actual percentage of data packet lost in wireless sensor network. The neural network model consists of three inputs: the type of the operational environment, the sampling rate and the number of motes used.
Page | 14

WiMAX is based on IEEE802.16 standards and it has 5 layer architecture of wireless QoS support. The data traffic generally is random. So the bandwidth should be allocated based on need to use basis so that it doesn't gets wasted. It was discovered, for DANs, 4G wireless technologies are more suitable than other technologies [45]. The WiMAX and LTE have similar performances but the selection is mostly depends on the initial cost. Uplink traffic is crucial and most of the smart grid applications are uplink. Hence, simulations of uplink traffic were conducted [45].

Smart grid data also needs to meet some security issues. A number of approaches are there to multicast message authentication and each is surveyed [46]. Though Advanced Encryption Standard (AES) and Secure Hash Algorithm (SHA) are widely used for unicast applications, it is not appropriate for the multicast architecture. Public key techniques like Ron Rivest, Adi Shamir and Leonard Adleman (RSA) and Digital Signature Algorithm (DSA) is also not feasible as it requires tens of milliseconds for signing and verification thus increasing latency and also increases the system computation cost. In Timed Efficient Stream Loss-Tolerant Authentication (TESLA) publisher signs each message with a key which is revealed after all subscriber have received the message. It requires less processor overhead but adds latency as it has to authenticate all the messages. Time-Valid One Time Signatures (TV-OTS) is by far the best choice as the authentication is fast and delay is lower for the key to be revealed.

There are many different types of data in smart grid network, thus one size fits all is not the solution instead, different types of authentications should be used for different types of data based on requirements [47]. Smart combination of wired and wireless for smart grid communication is used to deliver control and application messages [47]. The data traffic is of different types (control and monitoring) with different quality of service requirements in terms of delay, throughput and reliability. Production need to transmit production information. On the other hand, battery charging station sends load information. The traffic generated by the smart grid can be routed using existing network or a new information network [47].
Page | 15

Based on Lyapunov optimization theory, a queuing model has been presented for smart grid traffic [48]. For doing so, packets were allocated based on the characteristics, instead of the network operations. The smart grid have some distinct characteristics like: distributed production (small to large), stochastic production, energy market and load stress. The communication line can be internet, dedicated power line communication or wireless network. Each with their merits and demerits.

The presented system in [49] is divided into input queues with buffers with different QoS requirement and output networks and they are connected by a potentially time varying channel link. A framework is proposed to control packet transfer from input to output network buffer. The average delay of a packet arrived in input buffer consists of 3 components: waiting time in the buffer of input queue, average wait time and average delay for delivering in the output network. An algorithm is proposed which tries to optimize the average number of packets in the queue and the time spent in the queue [50]. Shared wired and wireless network is used for simulation where it was discovered a dedicated network will provide higher level of efficiency.

The main attributes of Smart Grid communications network infrastructure are reliability and latency, as defined in IEEE P2030. A converged Fiber Wireless FiWi broadband network based on Ethernet optical network and wireless mesh network is proposed [50]. Fiber optic has low latency and high capacity and in the place where fiber optic is not available, WiMAX or LTE can be used.

A multi-dimensional admission control process in order to provide QoS per class and per area is proposed in [51]. The packets are prioritized and queued based on the coloring scheme red and green. In the queue it is also sorted out based on this coloring scheme. The interleaved polling
Page | 16

with adaptive cycle time algorithm is modified for achieving this. In the scenario of electric vehicle, it was shown that the proposed algorithm is better than the common algorithm, such as first in first out (FIFO) and weighted fair queuing (WFQ).

Plug in Hybrid Electric Vehicle ­ PHEV is set to be widely adopted in not so distant future [52]. They need to be charged in regular intervals since the battery power runs out after a period. But it will create immense load on the power grid if it is not properly administered. A QoS aware admission control is proposed for the PHEV charging infrastructure [53]. It was proposed to implement by communication between the charging system and energy management system. The people who are willing to pay more is given priority over the regular charged users based on the differentiation architecture. So higher power is given to the higher priority vehicle so it takes less time to charge and lower power is given to lower priority vehicle. They proposed to limit the number of simultaneous charging requests, and used 802.11s as backbone structure [53].

Differentiated service for traffic of different priority in the low cost protocols like zigbee was proposed in [54]. Both security (attacks) and QoS (monitoring data, emergency response and control command) were discussed in [55]. Use of a QoS broker device enhances the QoS in smart grid distribution access domain by providing a centralized QoS management. It takes decision based on current network data traffic flows and existing QoS policies. Operational data which provides periodic measurement and Emergency data which provides detection for failure are specifically considered in [55].

QoS support for IEEE 802.15.4 namely zigbee was proposed in [57], where high priority data (emergency) have high priority of channel access. High priority data can disrupt the operational data to get the service. The delay of QoS-MAC was modeled using Markov Chain [56]. Packet is transmitted under following conditions: it's in the buffer, not discarded for CCA detection fail or
Page | 17

maximum back off time is reached. The MAC delay is also taken into notice in which the lower priority packets will have higher delay if there is a higher priority packet in the queue [57]. Although the operational data may get discarded sometime, but it was also given light that ideally all the operational data should be transmitted too, if not now later. Two testing scenarios with 8kbps and 16kbps were used while varying the arrival rate of low priority data from 0.4kbps to 24kbps. With a smaller amount of traffic, the conflict is low as the channel is not busy. Although when traffic increases still the higher priority traffic's conflict tends to remain low. It was also discovered the network performance (delay, goodput and collision rate) is better for high prioritized traffic [57].

Page | 18

Chapter 3
Experimental study of QoS in smart grid NAN

3.1 Introduction
Smart grid is an intelligent power generation, distribution, and control system. Smart grid communication architecture consists of three interconnected communication networks: HAN, NAN and WAN. They must successfully transport the smart meter reading, demand response, remote disconnect and other capabilities for a large area. The network needs to cover homes as well as grid substations. HAN covers home, NAN covers a small neighbourhood and WAN covers
Page | 19

typically the whole city. The data in the smart grid is collected and transmitted to the utility through HAN, NAN and WAN.

Different technologies have been suggested for NAN, Zigbee is considered as one of the potential communication standards for NAN because its characterization on low cost, low power consumption and the data rate of up to 250 kbps per channel [59]. It has also been selected by a large number of utilities as the communication platform for the smart metering devices. The WAN connects the NAN to the control center. WAN handles the aggregated metering traffic from the NAN. So WAN demands a higher bandwidth support, lower latency and a higher throughput and also larger area. WLAN popularly known as WiFi can also be used for communications in NAN. It runs on the developed wireless protocol IEEE 802.11. Compared to Zigbee, it has higher data rate and better QoS structure. WLAN version after 802.11e and onwards has QoS structure which is divided into four major categories: voice, video, best effort and background. Thus we can classify the smart grid data into different classes.

The data exchanged in smart grid has requirements on delay, loss rate, and reliability, in order to maintain efficiency. They have to provide low latencies, as control signals are part of the two way communication [25-28]. The latency of a packet is measured from the time the packet enters the transmitter node queue to the time the packet is received by its destination. Reliability is inversely proportional to the packet drop rate, which is defined as the ration between the number of packets dropped and the number of the packets transmitted. Real time video surveillance is important for the expensive power grid assets specially substations. As they tend to be in dispersed in remote location and susceptible to terrorism, vandalism and tampering. Live video surveillance demands a huge bandwidth.

In our experimental study, we have covered NAN using Zigbee and WLAN. We have used OPNET for simulation. The data from the smart meters and electric vehicles control data are passed using the NAN architecture. We provided higher bandwidth for high priority EV data and lower bandwidth to low priority SM data. In this chapter, first we have studied NAN using zigbee and

Page | 20

then WLAN. At the end, conclusion is drawn for both simulations. Here we have used two classes of data. The data classification is the same as previous chapter, so the electric vehicle (EV) control data is given a higher priority over the smart meter (SM) data. In total we have 15 nodes and 1 collector and there are 6 electric vehicle and 9 smart meter nodes.

Page | 21

3.2 Simulation for NAN using Zigbee
3.2.1 Simulation Setting
In this section we have used Zigbee for NAN simulation. The Smart Grid NAN simulation setting using Zigbee consists of three different types of devices: coordinator, routing component and end devices. The end device sends its data to the routing component which forwards data to the coordinator as per the routing table. In our scenario, the Zigbee end devices are either electric vehicle (EV) - devices 1-6 or smart meter (SM) - devices 7-15. So there are 15 end devices. The topology is given below in fig 3.1:

Fig 3.1: The Zigbee NAN topology

The transmission range for end device is kept within 50 meters. If the coordinator namely the sink is out of range, the data must go through intermediate nodes to reach the coordinator. There are some devices which are transporting more than one data flow as they relay the traffic
Page | 22

generated from other devices. As shown in Figure 3.1, node 4 is relaying data flow of node 3. Node 1 is relaying data flows of node 5 and two smart meter nodes: 10 and 9. Node 15 is relaying data flow of node 8. Node 14 is relaying data flow of node 12. Node 2 is relaying data flow of node 13.

The simulation settings for Zigbee are given as follows. The channel sensing duration is set to 0.1 millisecond. The 2450 MHz frequency transmission band is used. The PAN ID is 1. We have set the CSMA-CA parameters so that electric vehicle has better chance of getting that channel. The backoff exponent is defined as number of backoff periods a device shall wait before attempting to assess a channel's status [60]. For the EV nodes, the minimum backoff exponent is set to 2 and the maximum backoff exponent is set to 5. For the smart meters, the minimum backoff exponent is set as 3 and maximum backoff exponent is set to 4.

We have simulated four different scenarios with four different source rates of EV control data and four different source rates of SM data. The source rates are given below in the table 3.1:

Table 3.1: Data rate used in Zigbee NAN Test simulation
Scenario 1 2 3 4 Smart Meter Data 7.72 14.3 39.23 89.99 Electric Vehicle Control Data 10.4 19.45 52.98 121.31

3.2.2 Simulation results for Zigbee NAN

Page | 23

We ran all four Opnet simulations for one hour. In all the simulation results for Zigbee NAN, the graph is comprised of both electric vehicle control data and smart meter data and thus the source rate is the average source rate of the 15 nodes.

Delay comparison in different source rate

Fig 3.2: Delay comparison in Zigbee NAN Delay or latency represents the average end to end delay of all the packets. This delay includes queuing delay and medium access delay at the source MAC, and the transmission delay over the network. The relay of the frame via an intermediate node is necessary if the source cannot

Page | 24

reach the destination directly. Fig 3.2 shows the delay in milliseconds for different source rates. We can see that the delay tends to increase as we increase the source rate.

Throughput comparison in different source rate

Fig 3.3: Throughput comparison in Zigbee NAN Throughput represents the average of total number of bits (in bits/sec) successfully delivered from the source node to the destination node through the NAN. The throughput in Figure 3.3 represents the combined average rate of smart meter data and the EV data.

We can see that the throughput versus source rate difference tends to become higher as we increase the source rate. The data loss is defined as the total loss rate of the traffic due to
Page | 25

transmission failure by the Zigbee nodes. Data loss is caused by two reasons in our scenario: retry threshold exceeded and buffer overflow. In our scenario, we didn't got any data loss due to retry threshold exceeded. But we got data loss for buffer overflow. So for every scenario, we got some data loss. When the source rate is higher, the delay is higher, the buffer tends to get congested earlier, thus leading to more lost data.

Page | 26

3.3 Simulation for NAN using WLAN

3.3.1 Simulation Setting
The coordinates of the EV nodes, smart meter nodes, and the collector are similar to those in the previous section. If a node can reach the collector directly, it will transmit the data to the collector directly without any relay. Otherwise, relay nodes are needed. The WLAN QoS was used to provide differentiated service to the EV data and the smart meter data.

Access point in WLAN provides a variety of benefits: provide better security, help in saving power, provide quality of service, allow roaming, etc. Usually, an AP connects the wireless network with a wired network, and provides a bridge for data communication between wireless and wired devices. In our scenario, the coordinator is the access point.

In our scenario, we have given source rate of 1.318 mbps for high priority EV Voice/Video data and 1.08 mbps for low priority background/best effort data. The topology for the Opnet WLAN is given below in Fig 3.4.

Page | 27

Fig 3.4: The WLAN NAN topology

For the simulation we ran in opnet, we have used two different classes of data for each simulation, although the WLAN QoS division supports four different classes of data. So we needed to turn the other two classes off while we were using the two classes. We have two different types of nodes, electric vehicle and smart meter. In the settings, we had to classify the data in the station. As an example, when Electric Vehicle node 1 is flowing data, this node has data flow defined as higher priority class. On the other hand when a node is flowing lower priority smart meter data that node is defined as low priority class. We also considered the nodes that were flowing more than one data flow. The node which relays the traffic of other nodes will have a higher outgoing data rate.

For setting up these wireless nodes, first we have to give the mac address (1-16) to each node. The basic service set (BSS) has to be the same for all the nodes. The transmission power is 0.003w. The short retry limit (the maximum number of transmission attempts if the device does not receive a clear-to-send signal from the network) and long retry limit (the maximum number of transmission attempts if the device does not receive a receiving acknowledgement signal
Page | 28

from the network) is defined as 7 and 4, respectively. Access point beacon interval is 0.02 second. The buffer size is approximately 0.03 megabytes.

We have set up two different scenarios for our simulation. In one scenario, we have classified the data flow of electric vehicles as voice -1, and smart meters as best effort-3. In the other scenario we have classified the data of the electric vehicle as video-2, and smart meter as background-4. Then we have compared and contrasted the scenarios based on performance. For electric vehicle data flow, we have compared between voice 1 and video 2. For smart meter comparison, we have compared between best effort and background. The data rate was kept same for the two different scenarios, and in both the cases there has been very insignificant data loss.

3.3.2 Simulation results for NAN using WLAN
We have evaluated data drop, delay and throughput for NAN using WLAN. In all the following pairs of pictures, the first simulation picture represents the comparison between smart meters as best effort-3 (represented in red) and smart meters as background-4 (represented in blue), and the second picture represents the comparison between the electric vehicles as voice -1 (represented in red) and the electric vehicles as video-2 (represented in blue). We have kept the same data rate for the two different scenarios.

Page | 29

Comparison of Data Dropped Due to Buffer Overflow

Fig 3.5: Comparison of data drop rate due to buffer overflow in NAN for SM data

Fig 3.6: Comparison of data drop rate due to buffer overflow in NAN for EV control data
Page | 30

Buffer overflow data drop is the average of the total data dropped by the WLAN MAC in the network. The data is dropped due to one of the following reasons: 1) the higher layer data buffer is full, or 2) the packet size is greater than maximum allowed packet size specified by the 802.11 standard.

The obtained figures can be interpreted as follows. For both the electric vehicle and smart meter, there has been very insignificant data drop due to the above two reasons. In fig 3.5 the data flow that used the best effort class has a lot of data drop in the beginning, thus it is wiser to choose the background class for transporting the SM data. Similarly for the data flows in the figure 3.6 we can choose to use the video class over the voice class as for the first couple of minutes the data drop is high in the voice class.

Comparison of Data Dropped Due to Retry threshold exceeded

Retry threshold exceeded data drop is the average of the total data dropped by the WLAN MAC in the network due to consistent retransmission failure. This statistic reports the number of higher layer packets that are discarded because the MAC couldn't receive any ACKs for the (re)transmission of those packets or their fragments, and the packet's short or long retry counts reached the MAC's short retry limit or long retry limit, respectively. In our scenarios there have not been any data drop for that reason and thus no simulation picture was given. Comparison of Delay

Page | 31

Fig 3.7: Comparison of delay in NAN for SM data

Fig 3.8: Comparison of delay in NAN for EV control data

Page | 32

The delay represents the average end to end delay of all the data packets. This delay includes queuing delay and medium access delay at the source MAC, and the transmission delay over the network. The relay of the frame via an intermediate node is necessary if the source cannot reach the destination directly.

As depicted in both the Figures, the end to end delays for both streams are low and below the delay requirement for NAN. In Fig. 3.7, the smart meter data that was put in the best effort class is suffering a higher delay than the data that was put in the background class. But as time passes they both seem to suffer the same amount of delay. In Fig. 3.8, the electric vehicle data that was put in the video class has edged over throughout the simulation than the data that was put in the voice class. The delay that we got here fulfills the NAN requirement. We can also conclude that we can use the background class for smart meter data and the voice class for the EV data. Comparison of Throughput

Fig 3.9: Comparison of throughput in NAN for SM data
Page | 33

Fig 3.10: Comparison of throughput in NAN for EV control data Throughput is defined as average of total data traffic in bits/sec, successfully delivered from the source node to the destination node through the network. This does not include the frames that were received previously but transportation was not successful because of errors like incomplete frame.

From Fig. 3.9, we can conclude that the smart meter data that was put in the best effort class has a higher throughput than the data that was put in the background class. But as time passes the gap seems to decrease. From Figure 3.10, we can conclude that the electric vehicle data that was put in the voice class has a higher amount of throughput than the data that was put in the video class. Therefore, we can best effort class to transport SM data and voice class to transport the EV data.

Page | 34

3.4 Chapter Summary
Smart grid data can be carried over using a number of wireless technologies as described previously: WSN, WAN, WiMax and LTE. In this chapter, we have thoroughly evaluated the performance of 2 potential candidates of NAN: WSN (zigbee) and WLAN (Wifi). Both the measurements demonstrate our design guideline will efficiently manage the data of smart meter and electric vehicle using zigbee or WLAN in NAN. Zigbee is cheaper, it also suffices our data rate, throughput and latency requirement but doesn't have a well defined QoS. On the other hand, WLAN is great in all aspect with a much higher data rate and very well established QoS supports, but it is more expensive to operate. WLAN can support up to four different QoS classes thus a very efficient way to transport the prioritized smart grid data. In the situation where resource is limited and FIFO transmission suffices, zigbee is a good option. If better resources are available and QoS is needed, WLAN is a better option.

Page | 35

Chapter 4

Optimal Resource Allocation with Delay Guarantee for Smart Grid NAN
4.1 Introduction
The smart grid is efficient, as demand is matched using two way communication between the grid and customer. The smart grid provides bidirectional flows of automated data collection, outage management, dynamic rate structures, and demand response for load control between the customer premises and the grid.

Page | 36

The smart metering communication architecture is comprised of following components: smart meter, Home Area Network (HAN), Neighborhood Area Network (NAN) and Wide Area Network (WAN). Smart meter is the two way communication device which measures energy consumption in the house. HAN is an information and communication network in home. NAN collects data from multiple HANs and delivers the data to a data concentrator. WAN is the data transport network that carries metering data to central control centers. The potential technologies are: HAN: ZigBee, Wi-Fi, PLC; NAN: ZigBee, Wi-Fi, PLC, cellular; WAN: Microwave, WiMax, 3G/LTE, fibre optic links.

In the previous chapter, we have experimentally evaluated the performance of two wireless communication technologies, Zigbee and WLAN, to be applied in Smart Grid Neighbourhood Area Networks (NAN). WLAN provides a higher data rate and good QoS supports. But WLAN is more expensive to operate, in terms of the cost and the power consumption. Zigbee (IEEE 802.15.4) suffices our data rate, throughput and latency requirement as depicted in chapter 3. Zigbee has a low cost and has very low power consumption. Recently, ZigBee has become a favorite choice for smart grid NAN. Most of the current smart meters are equipped with Zigbee transceivers for communications. Therefore, in this chapter, we choose Zigbee as the communication technology for smart grid NAN.

This chapter focuses on smart grid NAN. NAN gathers smart meter readings from the customers to the collector. The NAN can be formed in tree or mesh topology. In the tree based architecture, data is transported from the leaf to the upper levels towards the collector. In the mesh based NAN, data is transported by establishing the ad hoc communications with the neighbouring nodes. In tree based NAN, if a node fails, it isolates its descendents too if it has any. On the contrary, the mesh based NAN has multiple connections with its neighbours, so node failure won't cause isolation of its descendents. Therefore, we will focus on mesh based NAN. In mesh network, a node generates data at its source rate. The utility company applies same sampling rate to all the customers in collecting the smart meter data, so the smart meters in the NAN have the same source rate. Higher source rate indicates a faster data acquisition,

Page | 37

thus enabling the utility company to make a quicker decision. We have considered source rate for multiple unicast sessions.

We have worked on the network latency namely delay which is defined as: the maximum time that a particular message takes to reach its destination through a communication network. Obviously there will be many types of data with different network latency requirements. For example, to prevent the vandalism in the risk prone areas, the protection and surveillance will have a lower latency requirement, while periodic usage update can tolerate a higher latency. The network architecture and communication medium must support the diverse requirements. This will directly affect the latency.

In our specific case, we have considered smart meter and electric vehicle control data. EV charging and discharging can be scheduled in an intelligent way. For example, EV can be scheduled for charging when the electricity price is low and discharging when the electricity price is high. Intelligent EV charging/discharging scheme can efficiently reduce the cost. Thus, the control data for EV intelligent charging/discharging has a higher priority over smart meter data.

We have investigated optimal resource allocation with end to end delay guarantee to the data delivery. Given a network topology formed by smart meters and the collector, we derive system model and then formulate the optimization problem. Also, we find the optimal solution by solving the optimization problem with Matlab optimization tool. The optimal solution provides a differentiated delay guarantees to different classes of data.

For our specific scenario, we have defined two types of data: smart grid data and electric vehicle control data, for the simulation. The proposed method can be easily extended to handle more than two classes. The simulation results are presented next. We have compared our proposed method with the method proposed in reference [37].

Page | 38

4.2 System Models and Problem Formulation
The set of sensing applications (class of data) is denoted by a set K. Each sensing application has a different latency requirement. All sensors belonging to sensing application k have a common source rate  () . We assume that there is only one common collector, which receives data of all sensing applications and then forwards to the WAN.

All sensors among different sensing applications form an integrated mesh-based wireless sensor network for data delivery. The integrated mesh-based wireless sensor network can be modeled as a directed graph G = (N,L), where N is the set of sensor nodes and L is the set of directed wireless links. Among the node set N, one node is the collector, denoted as t, while the other nodes belong to source-node set V. The source node set V consists of  () for k  K. The source node set V generates multiple classes of traffic. We assume each node can generate only one class of traffic. H is the set of sessions originating from source nodes set V. Each node can serve as an intermediate relay node to forward the traffic of the other nodes toward the collector. The set of the sensor nodes can be given by: N =   ()  {}. Two nodes, nodes i and j, are connected by a link if they can directly communicate with each other.

Table 4.1 summarizes the notations symbols used in this chapter.

Table: 4.1 Symbol notations Notation Symbol K () N L Description Set of sensing applications (class of data) Source rate of sensors belonging to sensing application k Directed graph for the NAN Set of nodes Set of directed wireless links
Page | 39

G = (N, L)

t V  h     S
()

Collector Source node set Node-link incidence matrix Session h Link rate at link l for session h Link capacity Bandwidth allocated to link l for application k Aggregate rate at link l for application k Queuing delay at link l for application k Average packet length in bits End to end delay of session h Delay control coefficient for application k

() ()



  ()

The relationship between a node and its connected links is represented with a node-link incidence matrix A, whose elements are given by

1,,  =  -1, , 0,

(1)

The node-link incidence relationship at a node (for example, node i) can be illustrated in Fig. 4.1. The element  in the node-link incidence matrix A is used to represent the relationship incoming into node i, we have  = -1, otherwise,  = 0, as shown in Fig. 4.1. between node i and link l. If link l is a link outgoing from node i, we have  = 1, if link l is a link

Page | 40

node i

link l

link l node i

node i

 = 1

 = -1

 = 0

Fig 4.1: Illustration of the node-link incidence relationship at node i Sensor node i, i  N, generates data traffic with a source rate R, where R =  () if     () .

We define session h (h H) as the traffic flow originating from the source node i (i  V) to We use  to denote the link rate at link l for session h (h  H). Also, we use  to denote the generated rate at each node for session h, which is given as follows: , ,  =   -,, 0,,

the collector. The session h can go through multiple intermediate nodes towards the collector.

(2)

The generated rate at each node for session h is illustrated in Fig. 4.2. If node i is the source node of session h, it generate a rate which is equal to the source rate of the session, and hence,  =R. If node i is the sink of session h, it absorbs the source rate of session h, and hence  =-R. The other nodes have  =0 since they neither generate nor absorb any rate. node i R -R node i

node i

 = R

 = -R

 = 0

Fig 4.2: Illustration of the generated rate at each node for session h

Page | 41

Flow conservation holds at each node for any session. Flow conservation means that the total outgoing rate from a node is equal to the sum of the total incoming rate into the node and the generated rate at this node for a session. The flow conservation law is given by    =   ,  ,  ,

(3)

As mentioned in Equation (1), we have  = 1 if link l is an outgoing link from node i, and we (3) represents the subtraction of total incoming rate at a node from the total outgoing rate at the node, and  represents the generated rate at the node.
node 2

have  = -1 if link l is an incoming link into node i. Therefore, the term  a fh in Equation

 =20kbps 



 =20kbps

node 4 (sink)

node 1 (source node)

R = 100 kbps

 =80kbps
node 3





 =80kbps

Fig 4.3: A network topology with four nodes

We will use an example to clarify the node-link incidence relationship and the flow conservation law. The network topology in the example is shown in Fig. 4.3. The network consists of four nodes. A session, denoted as session 1, is the flow from the source node (node 1) to the sink
Page | 42

(node 4). The flow of the session is traveled via two paths. The first path is: node 1 --> node 2 --> node 4, and the second path is: node 1 --> node 3 --> node 4. The source rate of the session is 100 kbps, which is split into 2 parts, with part 1 (20 kbps) over path 1 and part 2 (80 kbps) over path 2. There are four links, denoted as l1, l2, l3, and l4, in the topology. The link rates for the session are then given by:  =20kbps,  =80kbps,  =20kbps and  = 80. Table 4.2: node-link incidence matrix for the network given in Fig. 4.3  1 -1 0 0  1 0 -1 0  0 1 0 -1  0 0 1 -1

   

The node-link incidence matrix for the network given in Fig. 3.3 is shown in Table 4.2.

Based on the node-link incidence matrix, we can verify the flow conservation law in the fournode topology. Let's first look at node 1. Node 1 is the source for session 1. Therefore, we have  = 100 kbps. At node 1,  a fh = × +  = 100. Hence,  a fh =  ,

which means flow conservation holds at node 1. Next, we can look at node 2. Node 2 is a relay node, which generates no source rate. Therefore, we have  = 0. At node 2,  a fh = × +  × = -1 × 20 + 1 × 20 = 0 . Hence,  a fh =  , which means flow conservation holds at node 2. In the same way, we can also verify that the flow  a fh =  ×  + ×  = -1 × 20 - 1 × 80 = -100 . Hence,  a fh =  ,

conservation holds at node 3. Node 4 is the sink, therefore, we have  = -100kbps. At node 4, which means flow conservation holds at node 4.

Page | 43

Time Division Multiple Access (TDMA) and Carrier Sense Multiple Access (CSMA) can be used to resolve the link interference in NANs. In the thesis, we use TDMA. We will explain why we prefer TDMA over CSMA.

TDMA is well detailed in [62] and [39]. TDMA scheme is based on assigning time slots to other nodes for their communications. Coordinator forms a super-frame with beacon and assigns time slot sequences, then broadcasts this super frame structure to all nodes by a beacon packet. Beacon packet carries information of synchronization along with other information. The nodes turn off the transceiver after receiving the beacon and turn it on for next beacon or just before their transmission time slot if they were assigned one. There is no collision in TDMA unless one node fails or looses synchronization and transmits data in non-assigned time slots.

CSMA is well detailed in [63]. CSMA lets the sensor nodes to turn the transceiver to sleep mode and activate it periodically to listen to the channel. There is no transmission turn for each node. Each node can transmit the data if the channel is clear. The transmission mechanism is based on collision avoidance. Each node listens to the channel before the transmission. If the channel is clear, the node starts the transmission. Otherwise, the node waits while trigging a back off timer, then tries again. The dynamic network with frequent leaving or joining of nodes can converge quickly with CSMA scheme. However, CSMA has unpredictable delay when accommodating a high traffic.

CSMA is a good protocol for networks with temporal data transmission, higher channel bandwidth, and lower data balk. TDMA is appropriate for networks which have predictable invariant data generation, lower channel bandwidth, and delay sensitive data. In the smart grid network, the data generation is typically predictable and delay sensitive. Thus, we apply TDMA at the Medium Access Control (MAC) layer.

Page | 44

In addition, we assume that the transmission power at each link, denoted by P, is constant. The number of the links in the mesh network is denoted by |L|. The link capacity at link l is modeled by [61]:  =    (1 + 
   

),   

(4)

The link capacity at link l is denoted by  . We use TDMA, which means each link can transmit allocated to link l. W is the channel bandwidth,  is the channel gain at link l, and  is the or receive during a fraction of the time, instead of the whole time,  is the fraction of time

noise power spectral density.

Since each link is shared by multiple sensing applications, we model link l to |K| parallel M/M/1 [58]. The link capacity at link l is  . The bandwidth allocated to the   M/M/1 queue is is given by  
() ()

queues, in which the   M/M/1 queue is used to buffer and forward the application- k packets  ,    . The sum of allocated bandwidths should be no larger than the link capacity, which     .

The application- k aggregate rate at link l is given by 

()

stability of the   M/M/1 queue, the following condition is required: 

=    . In order to maintain the
()

<   .

()

where  is mean service rate in packets per second, which is given by  =  / where  bits;  is mean arrival rate in packets per second, which is given by  =  / where  l for the   -class application is given by d
() ()

of M/M/1 queue [58]. In M/M/1 queue, the average queuing delay is given by: d= 1/ ( - ).
() ()

The expected queuing delay at the   M/M/1 queue at link l is given by the delay formulation is

the bandwidth allocated to the   M/M/1 queue at link l, and S is the average packet length in
()

the aggregate link rate of the   -class application. Therefore, the average queuing delay at link

is

=

() () ( /)( /)



=

() ()  



(5)
Page | 45

A session is the end-to-end flow through multiple links. A session consists of multiple connected M/M/1 queues. We assume that 1) the M/M/1 queues in the session are independent, and 2) the end-to-end delay consists of the queuing delays of the links along the paths. Therefore, the end-to-end delay for session h (   ) is given by:
  =      



()

=  

(

()





()

)

(6)

where

represent the fraction of the source rate that travels through link l, and 

()

is the

queuing delay for travelling through link l.

The end-to-end delay for a flow is often caused by congestion at a link. We introduce a metric, We define the emptiness level as:  A higher  capacity of the M/M/1 queue, and 
()

emptiness level (denoted by  ), to represent the congestion at link l for the   -class traffic.
() ()

()

= 

()

- 

()

where 

()

represents the processing

represents the traffic arrival rate of the M/M/1 queue.
()

congestion at the queue. In other words, a higher emptiness level  indicates a lower queuing delay at link l for the   -class traffic.

and a lower 

()

lead to a higher emptiness level, which indicates a lower

Each link consists of |K| parallel M/M/1 queues, each of which is for a specific application. In smart grid, each application may have a different delay requirement. Therefore, we would like to provide differentiated service at each link to provide differentiated queuing delay for each application. Priority queue with pre-emption is one of the approaches to provide differentiated service. However, the drawback of the priority queue is that it sacrifices the delay performance of the low-priority application. In this chapter, we do not use priority queue. Instead, we use for each application to provide differentiated queuing delays. Specifically, at the   M/M/1 queue of each link, we impose a delay constraint () 
()

multiple parallel M/M/1 queues at each link, and we introduce a delay control coefficient () -  
()

the delay control coefficient for application-k traffic. For the application with a low delay

 0 where () (()  > 1) is
Page | 46

application with a high delay tolerance, we set a lower () , which leads to a lower emptiness level at the link. With different delay control coefficient for different application, we can have differentiated queuing delay at each link for different applications.

requirement, we set a higher () , which leads to a higher emptiness level at the link. For the

We optimize the resources to provide differentiated services, in terms of delays, among multiple concurrent applications in the NAN. The resource optimization problem is formulated as: to maximize the sum of the emptiness level of all links for all applications, by optimizing the aggregate link rate at each link, the link rate at each link for each session, the time fraction for each link, and the bandwidth allocated to each application at each link. Mathematically, the resource optimization problem is formulated as follows: Maximize ()  ( () ()  { ,  ,  ,  }   subject to:    =   ,  =    (1 +   ),  () <     0
() ()

-  )

()



()

=    -  
()




() 

0

     

  ,  ,   ,  ,

  ,  ,

   1  0

  ,     ,   ,   ,

  0

 ()  0,

  ,

(7)

Page | 47

In the optimization problem (7), the objective function is the sum of the emptiness level of all represents the aggregate link rate at each link,  represents the link rate at each link for each session,  is the time fraction for each link, and  application at each link.
()

links for all applications, the optimization variables are { ,  ,  ,  }, among which 

()

()

()

is the bandwidth allocated to each

The optimization problem (7) contains the following constraints. The first constraint second constraint 
()

   =   represents the flow conservation holds at each node for each session. The

at a link and the individual link rates at the link for different sessions. The third constraint



=    represents the relationship between the aggregate link rate

() 

 =    (1 +   ) represent the link capacity of the link. The fourth constraint each link for each session. The fifth constraint  
()

-  

()

 0 is the delay constraint with the intervention of delay control coefficient at
()

which means that the sum of the allocated bandwidths to all applications should be no larger

<   is the link capacity constraint,

than the link capacity at each link. The sixth constraint    1 is the TDMA constraint, which means that the sum of the time fractions assigned to all links should be no larger than 1.

replacing the aggregate link rate 

() () () () Maximizing  ( -  ) is equivalent to minimizing  ( -  ) . By ()

 (  -  () ) . Let  =  1 +    , the optimization problem (7) is  


with   , the objective is equivalent to: minimizing


converted to the following equivalent problem: Minimize ()  (  -   ) ()  { ,  ,  }    subject to:    =   ,   ,  ,
Page | 48

   1    0
()

 ()    

()   -  

()

0

  ,  ,   

  0

0

  ,     ,   ,   ,

 ()  0,

  ,

(8)

The optimization problem (8) is a linear programming (LP) problem. It can be solved efficiently using the interior point method.

Page | 49

4.4 Simulation
This section provides the experimental work to evaluate the performance of the proposed method, which is the optimal solution to the optimization problem (8). The solution and results were obtained using MATLAB. We have used the linear programming tool in MATLAB suite.

We compare our method to the existing work in reference [37]. The paper [37] has investigated the source rate maximization problem for smart meter networks. Higher source rate indicates a faster data acquisition, thus enabling the utility company to make a quicker decision. The source rate maximization problem can be described as: given the topology of a smart meter network, to maximize the common source rate by jointly optimizing the source rate and the routing scheme, subject to the link capacity constraints. The proposed algorithm [37] disperses the traffic into multiple paths to fully utilize the link bandwidth, thus maximizing the source rate. In the simulations [37], it was demonstrated that the proposed algorithm can achieve the maximum source rate in a smart meter network. When the number of the nodes in the same region is increased, the average link capacity is reduced, which causes a reduction of maximum source rate.

In order to conduct a fair comparison, we have used same simulation settings for our proposed method and the existing work [37]. The setting is given as follows. The bandwidth of the wireless channel is set to W = 200 MHz, the noise power spectral density is N0 = 10-13 W/Hz. The transmission power at each link is set to 200 mW. The channel gain at link l is given by
  =  10 / , where  is the distance from the transmitting node to the receiving node of the

link. The source rate for each node is set to the same in both methods. The end-to-end delay for each session is calculated using Equation (6).

For all the simulations of the wireless sensor mesh network, we took a square region of 150mby-150m. The transmission range of each node is 50 m. The coordinates of the smart meters (SMs) and electric vehicles (EVs) are generated in a couple of different architecture settings:

Page | 50

structured L shape, parallel structure, structured U Shape and random. The delay control

respectively.

coefficients () for class 1 (smart meter) and class 2 (electric vehicle) were set to 1.1 and 1.8,

In a smart meter mesh network, the location of the collector has an impact on the maximum source rate. A node has a higher link capacity between the node and the collector if it is closer to the collector. In the simulations, the location of the collector is determined by minimizing the mean squared distances between the collector and the other nodes.

In the proposed work, the routing scheme is determined by the solution to the optimization problem. If the node is within transmission range of 50 meters to the collector, the node sends data directly towards the collector. If it is not, the transmitting node looks for the intermediate node towards the collector, and sends the data to them. Generally, there are multiple intermediate nodes that can act as the relay nodes towards the collector. The optimal solution gives the link rate between any two neighboring nodes. Based on the link rates, the transmitting node knows what amount of the traffic should be sent to an intermediate node. In our optimization solution, a higher emptiness level is allocated to the high priority data flow in the link, which leads to a higher link bandwidth to be allocated to a high priority session, thus leading to a lower delay. The lower priority data flow in a link has a lower emptiness level, thus leading to a higher delay. All nodes can relay the traffic of another node even the type of data flow is different.

Some nodes will carry a higher traffic as they relay the traffic of its neighbors. The nodes close to the collector have a heavier burden in forwarding the traffic than the nodes far away from the collector.

Page | 51

In all the scenarios, a smart meter node can relay the data flow generated from an EV node, and vice versa. The electric vehicle data has a higher priority over the smart meter data. Our goal is to treat different types of traffic in a differentiated way such that their delay requirements can be satisfied. We will also try to reduce the overall delay. For all the figures, the smart meter node is represented with the dotted circle and electric vehicle node with the solid circle. We denote smart meter data as class-1 data and EV data as class-2 data.

First, we will evaluate our work in 15-node L-shape topology, in which the nodes are generated in L shape in the region.

Fig 4.4: Topology for the smart grid NAN with 15 nodes in L shape
Page | 52

Figure 4.4 shows the 15-node L-shape topology used for this simulation. For this simulation setting, the mesh network consists of 15 source nodes, among which there are 6 smart meters and 9 EV nodes. Nodes 1-6 are smart meters, and 7-15 nodes are EVs. The 16th node is the collector, which is the common sink for all source nodes.

Fig 4.5: The data flows in the 15-node L-shape topology

Figure 4.5 shows the data flows in the 15-node L-shape topology. EV node 7 is relaying data flow of SM node 1. EV node 8 is relaying data flow of EV node 7. SM node 2 is relaying data of EV node 8. EV node 9 is relaying data flow of SM node 2. EV node 14 is relaying data flow of SM
Page | 53

node 6. EV node 15 is relaying data flow of EV node 14. EV node 13 is relaying data of EV node 15. SM node 4 is relaying data flow of EV node 12 and SM node 5.

Delay Comparison L Shape 15 Nodes
1200.00 1000.00 800.00 600.00 400.00 200.00 0.00

Refernce [37]

Proposed method

Fig 4.6: The delay comparison in the 15-node L-shape topology

Figure 4.6 shows the comparison of end-to-end delay between the proposed method and the method in [37] in the 15-node L-shape topology. In reference [37], all 15 nodes have the same priority. In our method, nodes 1-6 are low priority smart meters and nodes 7-15 are high

Page | 54

priority EVs. Reference [37] has no embedded priority in its system, thus the delay values represent a similar trend. On the contrary, our proposed method has embedded priority. Nodes 1-6 are low priority nodes, thus they have higher delay. Nodes 7-15 have high priority nodes, thus they have much lower delay.

Here are some key statistics from the simulations: · · · · · Source rate: 27.0476 kbps Average delay of reference [37]: 242.402 ms Average delay of the proposed method: 199.95 ms Average delay of proposed method's high priority nodes: 25.6749 ms Average delay of proposed method's low priority nodes: 461.34 ms

From the key statistics, we see that our proposed method's average delay of 199.95 ms is lower than that in the reference [37]. We also see our proposed method's high priority nodes delay of 25.6749 ms is much lower than both reference [37]'s average delay of 242.402 ms and our proposed method's low priority nodes average delay of 461.34 ms.

Second, we will evaluate our work for 20-node U-shape topology, in which the nodes are generated in a U shape in the region.

Page | 55

Fig 4.7: Topology for the smart grid NAN with 20 nodes in U shape

Figure 4.7 shows the 20-node U-shape topology used for this simulation. For this simulation setting, the mesh network consists of 20 source nodes, among which there are 8 smart meters and 12 EV nodes. Nodes 1-8 are smart meters, and 9-20 nodes are EVs. The 21st node is the collector, which is the common sink for all source nodes.

Page | 56

Fig 4.8: The data flows in the 20-node U-shape topology

Figure 4.8 shows the data flows in the 20-node U-shape topology. SM node 5 is relaying data flow of EV node 15. EV node 16 is relaying data of SM node 5. EV node 17 is relaying data of EV node 16. SM node 7 is relaying data of EV node 19, EV node 20 and SM node 8. SM node 1 is relaying data flow of EV node 9. EV node 10 is relaying data of SM node 1. EV node 11 is relaying data of EV node 10. SM node 3 is relaying data of EV node 19, EV node 14 and SM node 4.

Page | 57

Delay Comparison 20 Nodes U Shape
800.00 700.00 600.00 500.00 400.00 300.00 200.00 100.00 0.00 Node 10 Node 11 Node 12 Node 13 Node 14 Node 15 Node 16 Node 17 Node 18 Node 19 Node 20 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Node 8 Node 9

Refernce [37]

Proposed method

Fig 4.9: The delay comparison graph in the 20-node U-shape topology

Figure 4.9 shows the comparison of end-to-end delay between the proposed method and the method in [37] in the 20-node U-shape topology. In our method, nodes 1-8 are low priority smart meters and nodes 9-20 are high priority EVs. Reference [37] has no embedded priority in its system, thus the delay values represent a similar trend. On the contrary, our proposed method has embedded priority. Nodes 1-8 are low priority nodes, thus they have higher delay values. Nodes 9-12 have high priority nodes, thus they have much lower delay values.

Page | 58

Here are some key statistics from the simulations: · · · · · Source rate: 13.3935 kbps Average delay of reference [37]: 583.107 ms Average delay of the proposed method: 224.0 ms Average delay of proposed method's high priority nodes: 62.2191 ms Average delay of proposed method's low priority nodes: 466.643 ms

From the key statistics, we see that our proposed method's average delay of 224.0 ms is lower than that in the reference [37]. We also see that our proposed method's high priority nodes delay of 62.2191 ms is much lower than both reference [37]'s average delay of 583.107 ms and our proposed method's low priority nodes average delay of 466.643 ms.

Third, we will evaluate our work for 20-node structured topology, in which the nodes are generated in a structured way in the region.

Page | 59

Fig 4.10: Topology for the smart grid NAN with 20 structured nodes

Figure 4.10 shows the 20-node structured topology used for this simulation. For this simulation setting, the mesh network consists of 20 source nodes, among which there are 8 smart meters and 12 EV nodes. Nodes 1-8 are smart meters, and nodes 9-20 nodes are EVs. The 21st node is the collector, which is the common sink for all source nodes.

Page | 60

Fig 4.11: The data flows in the 20-node structured topology

Figure 4.11 shows the data flows in the 20-node structured topology. SM node 5 is relaying data flow of EV node 15. EV node 16 is relaying data of SM node 5. SM node 8 is relaying data flow of EV node 20. EV node 19 is relaying data of SM node 8. EV node 18 is relaying data flow of EV node 18. SM node 1 is relaying data flow of EV node 9. EV node 10 is relaying data of SM node 1. SM node 4 is relaying data flow of EV node 14. EV node 12 is relaying data of SM node 4. EV node 12 is relaying data flow of EV node 13.

Page | 61

Delay Comparison of 20 Nodes Strcutured - Unit Miliseconds
800.00 700.00 600.00 500.00 400.00 300.00 200.00 100.00 0.00 Node 10 Node 11 Node 12 Node 13 Node 14 Node 15 Node 16 Node 17 Node 18 Node 19 Node 20 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Node 8 Node 9

Reference [37]

Resource allocation

Fig 4.12: The delay comparison in the 20-node structured topology

Figure 4.12 shows the comparison of end-to-end delay between the proposed method and the method in [37] in the 20-node structured topology. In reference [37], all 20 nodes have the same priority. In our method, nodes 1-8 are low priority smart meters and nodes 9-20 is high priority EVs. Reference [37] has no embedded priority in its system thus the delay values represent a similar trend. On the contrary, our proposed method has embedded priority. Nodes 1-8 are low priority nodes, thus they have higher delay values. Nodes 9-12 have high priority nodes, thus they have much lower delay values.

Page | 62

Here are some key statistics from the simulations: · · · · · Source rate: 13.1661 kbps Average delay of reference 37: 263.671 ms Average delay of the proposed method: 261.09 ms Average delay of proposed method's high priority nodes: 55.3823 ms Average delay of proposed method's low priority nodes: 569.647 ms

From the key statistics, we see that our proposed method's average delay of 261.09 ms is lower than that in the reference [37]. We also see that our proposed method's high priority nodes delay of 55.3823 ms is much lower than both reference [37]'s average delay of 261.09 ms and our proposed method's low priority nodes average delay of 569.647 ms.

Fourth, we will evaluate our work in 20-node random scenario, in which the locations of the nodes are generated randomly in the region.

Page | 63

Fig 4.13: Topology for the smart grid NAN with 20 randomly located nodes

Figure 4.13 shows the 20-node random topology used for our first simulations. For this simulation setting, the mesh network consists of 20 source nodes, among which there are 8 smart meters and 12 EV nodes. Nodes 1-8 are smart meters, and 9-20 nodes are EVs. The 21st node is the collector, which is the common sink for all source nodes.

Page | 64

Fig 4.14: The data flows in the 20-node random topology

Figure 4.14 shows the data flows among the nodes and the collector. SM node 8 is relaying data flow of SM node 3 and EV node 11. EV node 20 is relaying data of EV node 19. SM node 7 is relaying data flow of SM node 4 and EV node 16. SM node 2 is relaying data flow of EV node 17. SM node 5 is relaying data flow of EV node 14, SM node 1 and EV node 18. EV node 10 is relaying data flow of EV node 12, EV node 13 and SM node 6.

Page | 65

Delay Comparison of 20 Nodes - Unitmiliseconds
700.00 600.00 500.00 400.00 300.00 200.00 100.00 0.00 Node 10 Node 11 Node 12 Node 13 Node 14 Node 15 Node 16 Node 17 Node 18 Node 19 Node 20 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Node 8 Node 9

Refernce [37]

Resource allocation (Proposed)

Fig 4.15: The delay comparison in the 20-node random topology

Figure 4.15 shows the comparison of end-to-end delay between the proposed method and the method in [37] in the 20-node random topology. In reference [37], all 20 nodes have the same priority. In our method, nodes 1-8 are low priority smart meters and nodes 9-20 are high priority EVs. Reference [37] has no priority thus the delay values represent a similar trend. On the contrary, our proposed method provides differentiated services in terms of delay. Nodes 18 are low priority nodes, thus they have higher delay. Nodes 9-12 have high priority nodes, thus they have much lower delay.

Here are some key statistics from the simulations:

Page | 66

· · · · ·

Source rate: 16.7402 kbps Average delay of reference [37]: 254.697 ms Average delay of the proposed method: 162.4 ms Average delay of proposed method's high priority nodes: 46.6691 ms Average delay of proposed method's low priority nodes: 336.018 ms

From the key statistics, we see our proposed method's average delay of 162.4 is lower than that in the reference [37]. We also see our proposed method's high priority nodes delay of 46.6691 ms is much lower than both reference [37]'s average delay of 254.697 ms and our proposed method's low priority nodes average delay of 336.018 ms.

Fifth, we will evaluate our work for 10-node random topology, in which the nodes are generated randomly in the region.

Page | 67

Fig 4.16: Topology for the smart grid NAN with 10 random nodes

Figure 4.16 shows the 10-node random topology used in this simulation. For this simulation setting, the mesh network consists of 10 source nodes, among which there are 4 smart meters and 6 EV nodes. Nodes 1-4 are smart meters, and 5-10 nodes are EVs. The 11th node is the collector, which is the common sink for all source nodes.

Page | 68

Fig 4.17: The data flows in the 10-node random topology

Figure 4.17 shows the data flows in the 10-node random topology. SM node 4 is relaying data flow of EV node 9. EV node 6 is relaying data of EV node 5. SM node 1 is relaying data flow of EV node 10. SM node 2 is relaying data of EV node 7. EV node 8 is relaying data flow of SM node 2.

Page | 69

Delay Comparison of 10 Nodes Random - Unit Miliseconds
140 120 100 80 60 40 20 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Node 8 Node 9 Node 10

Refernce [37]

Proposed method

Fig 4.18: The delay comparison in the 10-node random topology

Figure 4.18 shows the comparison of end-to-end delay between the proposed method and the method in [37] in the 10-node random topology. In reference [37], all 10 nodes have the same priority. In our method, nodes 1-4 are low priority smart meters and nodes 5-10 are high priority EVs. Reference [37] has no embedded priority in its system thus the delay values represent a similar trend. On the contrary, our proposed method has embedded priority. Nodes 1-4 are low priority nodes, thus they have higher delay values. Nodes 5-10 have high priority nodes, thus they have much lower delay values.

Page | 70

Here are some key statistics from the simulations: · · · · · Source rate: 85.7675 kbps Average delay of reference 37: 57.4919 ms Average delay of the proposed method: 30.21 ms Average delay of proposed method's high priority nodes: 10.9307 ms Average delay of proposed method's low priority nodes: 59.1421 ms

From the key statistics, we see that our proposed method's average delay of 30.21 ms is lower than that in the reference [37]. We also see that our proposed method's high priority nodes average delay of 10.9307 ms is much lower than both reference [37]'s average delay of 57.4919 ms and our proposed method's low priority nodes average delay of 59.1421 ms.

Finally, we will summarize the comparison of average delay in the two methods in all the simulations.

Page | 71

Average Delay comparison in both methods
700.00 600.00 500.00 400.00 300.00 200.00 100.00 0.00 15 Nodes L Shape 20 Nodes U Shape 20 Nodes Structured 20 Nodes Random 10 Nodes Random

Refernce [37]

Resource allocation (Proposed)

Fig 4.19: Average delay comparison in both methods for all the scenarios

From Figure 4.19, we can see that our proposed method's average delay was less than that in Reference [37] in all the scenarios. Thus, we can conclude that our proposed method can reduce the end to end delay.

Page | 72

4.5 Chapter Summary
In this chapter, we have proposed resource allocation method to reduce delay and provide differentiated delay guarantees to different types of data for smart grid NAN. Based on the network topology formed by the smart meters, electric vehicles and the collector, we have formulated the problem as a linear programming problem. The optimal solution to the optimization problem provides an optimal resource allocation scheme for the NAN such that it reduces delay and the data with different priority can get a different delay.

We performed extensive simulations with different topology settings. We compared our method with the contemporary work of reference [37]. The simulation results demonstrated the following two points: 1) the proposed method can get a lower average delay than the existing work; 2) the proposed method can provide differentiated services in terms of delay to different classes with different priorities. The proposed method can be used to guide the design of smart grid NAN.

Page | 73

Chapter 5
Conclusion
5.1 Conclusion

The proposed work in this thesis lies in the development of QoS in smart grid. We have focused on NAN and have worked with Zigbee and WLAN.

In the first part of chapter 3, we have thoroughly evaluated the Zigbee and WLAN which can be used in NAN. We have evaluated in three different categories: reliability, delay and throughput. Our simulation and analysis shows Zigbee is a great candidate for NAN. Next we have evaluated WLAN to be used in NAN. We evaluated the different QoS classes of WAN, in couple of different

Page | 74

scenarios, and concluded that we can use the voice class for the high priority data and the background class for the low priority data such that differentiated services can be obtained for different classes of the data. WLAN is a better platform for communications where better QoS supports are needed. However, WLAN needs more resources compared to Zigbee.

In chapter 4, we have opted to work on WSN as per our finding in chapter 3, to be used in NAN. Here we have proposed a method to reduce delay and provide QoS supports. In other words, the proposed method provides overall lower end-to-end delay as well as differentiated services in terms of delay. We have chosen mesh architecture instead of tree as mesh networking is more reliable than tree in terms of node failures. We formulate the resource allocation problem into a linear programming. We solved the linear programming problem using Matlab optimization tool. We have conducted simulations with different settings. We have compared our proposed method with the method proposed in reference [37]. In each of the simulations, our proposed method had overall lower end to end delay than the method proposed in reference [37]. We can also conclude that the proposed method enables the data with a higher priority to get a lower delay than the data with a lower priority. The proposed method will be beneficial to the design of smart grid NAN. It will also be more helpful in the scenarios where there are multiple classes of applications with different priorities.

5.2 Future Work

Our work can be extended further in the following areas.

Page | 75

In chapter 3, we focused on NAN using zigbee and WLAN, other researchers can extend the work by focusing on all three: HAN, NAN and WAN using other available wired and wireless technologies. Wireless technology's radio frequency performance in different environment conditions and different propagation models can also be explored. The coexistence interference must also be evaluated for the wireless protocols, to be used in HAN, NAN and WAN in the smart grid architecture.

In chapter 4, we have improved the end to end delay for WSN. Smart grid will carry many types of data, a priority based data classification needs to be done to be used in our system. Other QoS parameters like data drop and throughput improvement can also be explored. Another promising direction is the cross-layer optimization of the WSN by jointly considering the application-layer source rate, the network-layer routing scheme, and the MAC-layer media access scheme, and physical-layer modulation scheme.

Page | 76

Reference
1. The Canadian electricity association."The smart grid: A pragmatic approach, a state-ofplay discussion paper", www.electricity.ca/media/SmartGrid/SmartGridpaperEN.pdf 2. en.wikipedia.org/wiki/Smart_grid 3. X. Fang, S. Misra, G. Xue, and D. Yang, "Smart Grid ­ The New and Improved Power Grid: A Survey", IEEE Communications Surveys & Tutorials, Volume: 14, pp. 940 - 980, 2012 4. Roadmap 2050, a practical guide to a prosperous energy efficient Europe, www.roadmap2050.eu/attachments/files/Volume1_fullreport_PressPack.pdf 5. W. Wang, Y. Xu, M. Khanna, "A survey on the communication architectures in smart grid", in Proc. of IEEE International Conference on Smart Grid Communications, pp. 604­ 609, October 2010 6. EEI-AEIC-UTC white paper, "Smart meters and smart meter systems: A metering industry perspective", www.eei.org/ourissues/electricitydistribution/Documents/smartmeters.pdf

Page | 77

7. U.S. department of energy by Litos strategic communication, "The smart grid: An introduction" energy.gov/sites/prod/files/oeprod/DocumentsandMedia/DOE_SG_Book_Single_Pages( 1).pdf 8. M. Shargal and D. Houseman: Why Your Smart Grid Must Start with Communications, www.smartgridnews.com 9. N. Batista, R. Melício and J. Matias , J. Catalão, "ZigBee standard in the creation of wireless networks for advanced metering infrastructures" in Proc. of IEEE Mediterranean Electrotechnical Conference (MELECON), pp. 220 ­ 223, March 2012 10. Y. Jeon, "QoS Requirements for the Smart Grid Communications System", IJCSNS International Journal of Computer Science and Network Security, Vol. 11 No.3 pp 86-94, March 2011 11. K. Budka, J. Deshpande, J. Hobby, Y. Kim, V. Kolesnikov, W. Lee, T. Reddington, M. Thottan, C. White, J. Choi, J. Hong, J. Kim, W. Ko, Y. Nam, S. Sohn: "GERI ­ Bell Labs Smart Grid Research Focus: Economic Modeling, Networking, and Security & Privacy" in Proc. of IEEE International Conference on Smart Grid Communications (SmartGridComm), pp. 208 - 213, Oct. 2010 12. K. Budka, J. Deshpande, T. Doumi, M. Madden, and T. Mew, "Communication Network Architecture and Design Principles for Smart Grids", Bell Labs Technical Journal - Green Information and Communications Technology (ICT) for Eco-Sustainability, Volume 15, pp. 205-227, September 2010 13. K. Valsamma, "Smart Grid as a Desideratum in the Energy Landscape: Key Aspects and Challenges", in Proc. of IEEE International Conference on Engineering Education: Innovative Practices and Future Trends (AICERA), pp. 1 ­ 6, July 2012

Page | 78

14. V. Vadlamudi, and R. Karki, "Reliability-based appraisal of Smart Grid challenges and realization", in Proc. of IEEE Power and Energy Society General Meeting, pp. 1 - 7, July 2012 15. F. Beidou, W. Morsi, C. Diduch, and L. Chang, "Smart Grid: Challenges, Research Directions and Possible Solutions", in Proc. of IEEE International Symposium on Power Electronics for Distributed Generation Systems (PEDG), pp. 670 ­ 673, June 2010 16. Y. Yan, Y. Qian, H. Sharif, and D. Tipper: "A Survey on Smart Grid Communication Infrastructures: Motivations Requirements an Challenges", in Proc. of IEEE Communications Surveys & Tutorials, pp. 1 - 16, February 2012 17. T, S. Park, B. Lee, "What is Appropriate Strategy for Smart Grid Business? A Case Study of Test Bed in Korea", in Proc. of International Conference on Ubiquitous Information Technologies and Applications (CUTE), pp. 1-8, Dec 2010 18. M. Daoud, V. Vijayakumar, X. Fernando "On the Communication Requirements for Smart Grid" IEEE Canadian Review, pp. 31-36, summer 2011 19. S. Sadeghi, M. Hossein, M. Bahekmat, A. Yazdi, "Modeling of Smart Grid Traffics Using Non-Preemptive Priority Queues" in Proc. of Iranian Conference on Smart Grids (ICSG), pp. 1-4, May 2012. 20. S. Hu, T. Shan, "Designing Resource Oriented Architecture in UML A Case Study on Smart Grid Home Area Network (HAN)", in Proc. of IEEE 6th World Congress on Services, pp. 154 ­ 155, July 2010 21. T. Garrity, "Getting Smart", IEEE Power and Energy Magazine, Vol. 6 pp. 142 ­ 1512, Sep 2008. 22. R. Schmidt, "Bandwidth Planning for Deployment of Smart Grid Applications" www.powersystem.org

Page | 79

23. Communications Requirements of Smart Grid Technologies, Dep. Of Energy, United States of America, www.doe.gov 24. J. Zhou, R. Hu, Y. Qian, "Scalable Distributed Communication Architectures to Support Advanced Metering Infrastructure in Smart Grid" IEEE transactions on parallel and distributed systems, Vol. 23, pp. 1632 ­ 1642, Sep 2012 25. Deliverable 1.1 Scenarios and Requirements Specification. DLC+VIT4IP team, www.dlcvit4ip.org 26. G. Tang, "Smart grid management & visualization: Smart Power Management System", in Proc. of International Conference & Expo on Emerging Technologies for a Smarter World (CEWIT), Nov. 2011 27. Z. Feng, Z. Yuexia, "Study on Smart Grid Communications System based on New Generation Wireless Technology, Electronics", in Proc. of International Conference on Communications and Control (ICECC), pp. 1673 - 1678, Sept. 2011, 28. D. Benzai , W. Zhiqiang, "Research on Electric-Vehicle Charging Station Technologies Based on Smart Grid", in Proc. of Asia-Pacific Power and Energy Engineering Conference (AppEEC), pp. 1 - 4, March 2011 29. A. Cataliotti, G. Tinè, "On the use of narrow band power line as communication technology for medium and low voltage smart grid", in Proc. of IEEE International Instrumentation and Measurement Technology Conference (I2MTC), May 2012 30. L. Jianming, Z. Bingzhen, G. Liang, Y. Zhou, W. Yirong, "Communication performance of broadband PLC technologies for smart grid", in Proc. of IEEE International Symposium on Power Line Communications and Its Applications, pp. 491- 496, April 2011 31. D. Laverty, D. Morrow, R. Best et al., "Telecommunications for Smart Grid: Backhaul solutions for the Distribution Network", in Proc. of Power and Energy society general meeting, pp. 1-6 July, 2010.

Page | 80

32. V. Vyatkin, G. Zhabelova, N. Higgins, K. Schwarz, and N. Nair, "Towards Intelligent Smart Grid Devices with IEC 61850 Interoperability and IEC 61499 Open Control Architecture" in Proc. of IEEE conference on transmission and distribution, pp. 401- 407, April, 2010 33. M. Daoud, X. Fernando, "On the Communication Requirements for the Smart Grid" in Proc. of IEEE conference on Energy and Power Engineering, pp. 53-60, March 2011 34. Y. Xin, I. Baldine, T. Beyene, B. Parkhurst, "Virtual Smart Grid Architecture and Control Framework". in Proc. of IEEE International Conference on Smart Grid Communications, pp. 221- 227, Oct. 2010 35. S.Ghosn, P. Ranganathan, S. Salem, J. Tang, D. Loegering, "Agent-oriented Designs for a Self Healing Smart Grid", in Proc. of IEEE International Conference on Smart Grid Communications (SmartGridComm), pp. 223- 235, Oct 2010 36. A. Koubâa, M. Alves, E. Tovar, IEEE 802.15.4 for Wireless Sensor Networks A Technical Overview, www.open-zb.net 37. Y. He and L. Guan, "Source rate maximization for smart meter mesh networks using distributed algorithm", accepted in Journal of Communications and Information Sciences, 2013 38. S. Liao, W. Cheng, W. Liu, Z. Yang, "Distributed Optimization Based on Utility with Delay Constraints in Wireless Sensor Networks" in Proc. of International Conference on Wireless Communications, Networking and Mobile Computing, pp. 1 - 4 Sept. 2009 39. L. Shi, A. Fapojuwo, "TDMA Scheduling with Optimized Energy Efficiency and Minimum Delay in Clustered Wireless Sensor Networks" in Proc. of IEEE Transactions on Mobile Computing, pp. 927- 940, July 2010 40. K. Daabaj, M. Dixon, T. Koziniec, D. Murray, "Reliable Data Delivery in Low Energy Ad Hoc Sensor Networks" in Proc. of Asia-Pacific Conference on Communications, pp. 324329, March 2010

Page | 81

41. M. Aalsalem, J. Taheri, A. Zomaya. "A Framework for Real Time Communication in Sensor Networks" in Proc. of ACS/IEEE International Conference on Computer Systems and Applications, pp. 245-250, July 2010 42. T. He, J. Stankovic, C. Lu, T. Abdelzaher, "SPEED: A Stateless Protocol for Real-Time Communication in Sensor Networks," in Proc. of IEEE Int'l Conf. Distributed Computing Systems, pp. 46-55, 2003. 43. S. Darabi, N. Yazdani, O. Fatemi; "Multimedia-aware MMSPEED: A routing solution for video transmission in WSN", in Proc. of International Symposium on Advanced Networks and Telecommunication Systems, pp. 202-207, Dec 2008. 44. Y. Barve, , "Neural Network Approach to the Prediction of Percentage Data Packet Loss for Wireless Sensor Networks" in Proc. of Southeastern symposium on system theory, pp. 143-150, April 2009 45. P. Rengaraju, C. Lung, A. Srinivasan. "Communication Requirements and Analysis of Distribution Networks Using WiMAX Technology for Smart Grids" in Proc. of Wireless Communications and Mobile Computing Conference (IWCMC), pp. 1-8, June 2012 46. C. Hauser, T. Manivannan, D.Bakken, "Evaluating Multicast Message Authentication Protocols for Use in Wide Area Power Grid Data Delivery Services", in Proc. of International Conference on System Sciences, pp. 431-438, May 2012 47. R. Brown, "Impact of Smart Grid on distribution system design," in Proc. of IEEE. Power and Energy Society General Meeting-Conversion and Delivery of Electrical Energy in the 21st Century, pp. 1-4, July 2008 48. H. Farhangi, "The path of the smart grid," IEEE Power and Energy Magazine, vol. 8, pp. 18­28, April 2010. 49. M. Levorato and U. Mitra, "Optimal Allocation of Heterogeneous Smart grid Traffic to Heterogeneous Networks Communication Networks for Smart Grid" in Proc. of IEEE International Conference on Smart Grid Communications, pp. 132 - 137, October 2011
Page | 82

50. M. Maier "NG-PONs 1&2 and beyond: The Dawn of the Über-FiWi network", IEEE Network, pp. 15-21, Mar.-Apr. 2012. 51. M. Lévesque and M. Maier, "The Über-FiWi Network: QoS Guarantees for Triple-Play and Future Smart Grid Applications", in Proc. of International Conference on Transparent Optical Networks, pp.75-81, June 2012 52. K. Mets, T. Verschueren, W. Haerick, C. Develder, F. De Turck, "Optimizing smart energy control strategies for plug-in hybrid electric vehicle charging," in Proc. of IEEE/IFIP Network Operations and Management Symposium Workshops, pp.293-299, April 2010. 53. M. Erol-Kantarci, J. Sarker, H. Mouftah, "Quality of Service in Plug-in Electric Vehicle Charging Infrastructure", in Proc. of IEEE International Electric Vehicle Conference (IEVC), pp. 301-309, January 2012 54. A. Vallejo, A. Zaballos, J. Selga, and J. Dalmau, "Next-Generation QoS Control Architectures for Distribution Smart Grid Communication Networks", in Proc. of IEEE Communications Magazine, Vol. 50, pp. 128 - 134, May 2012 55. W. Sun, J. Wang, C. Zhang, and Z. Qian, "Research on the wireless Ad-hoc network for power distribution network communication in medium-small cities," in Proc. of International Conference on Sustainable Power Generation and Supply. pp.293-299, April 2009. 56. en.wikipedia.org/wiki/Markov_chain 57. W. Sun, X. Yuan, J. Wang, D. Han and C. Zhang, "Quality of Service Networking for Smart Grid Distribution Monitoring" in Proc. of Smart Grid Communications (SmartGridComm), pp.293-299, October 2010. 58. en.wikipedia.org/wiki/M/M/1_queue 59. en.wikipedia.org/wiki/ZigBee 60. www.rfwireless-world.com/Tutorials/Zigbee_tutorial.html
Page | 83

61. http://en.wikipedia.org/wiki/Channel_capacity 62. V. Cionaca, T Newe and V. Dadarlat, "TDMA protocol requirement for Wireless Sensor Networks," in International Conference on Sensor Technologies and Applications, pp. 30-35, Aug 2008 63. S. Marinkovic, E. Popovici, C. Spagnol, S. Faul, and W. Marnane, "Energy effiecient low duty cycle MAC protocol for wireless body area networks,"in IEEE transaction on Information technology in Biomedicine, vol. 13, pp. 915-925, Nov. 2009.

Page | 84

