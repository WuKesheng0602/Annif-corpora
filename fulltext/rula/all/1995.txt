Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2013

3.3V Transmitter Using 1.8V Transistors In A Cascode Configuration
Marcs Ng
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
Ng, Marcs, "3.3V Transmitter Using 1.8V Transistors In A Cascode Configuration" (2013). Theses and dissertations. Paper 2056.

This Thesis Project is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

3.3V TRANSMITTER USING 1.8V TRANSISTORS IN A CASCODE CONFIGURATION
By

Marcus Ng, B.Sc.E.E., Queen's University, 1999

A project presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Engineering in the Program of Electrical and Computer Engineering Toronto, Ontario, Canada, 2013

©Marcus Ng 2013

AUTHOR'S DECLARATION AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A PROJECT I hereby declare that I am the sole author of this project. This is a true copy of the project, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this project to other institutions or individuals for the purpose of scholarly research. I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my project may be made electronically available to the public.

ii

3.3V TRANSMITTER USING 1.8V TRANSISTORS IN A CASCODE CONFIGURATION
Marcus Ng, Master of Engineering, 2013 Electrical and Computer Engineering Ryerson University

Abstract
A voltage-mode transmitter using a 1.8V-to-3.3V levelshifter and cascoded output buffer is proposed. 1.8V TSMC 65nm transistors are used. The design is targeted to meet JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits DC Specifications as well as an AC transmission rate of 200 MHz on a 30 cm 50 board trace terminated with a 4 pF capacitive load. Overstress voltages will not be exceeded in order to avoid device failure due to breaching Gate Oxide Integrity, Hot Carrier Injection, or Negative Bias Temperature Instability.

iii

Table of Contents
Abstract ........................................................................................................................................................ iii 1 Introduction .......................................................................................................................................... 1 1.1 1.2 Device failure ................................................................................................................................ 2 Mechanisms for Device Failure ..................................................................................................... 2 Gate Oxide Integrity (GOI) .................................................................................................... 2 Hot Carrier Injection (HCI) Effect and Negative Bias Temperature Instability (NBTI)........... 3 Testing ................................................................................................................................... 4

1.2.1 1.2.2 1.2.3 2

Design.................................................................................................................................................... 5 2.1 2.2 Simulator ....................................................................................................................................... 5 Transmitter ................................................................................................................................... 5 Output Buffer ........................................................................................................................ 5

2.2.1 2.3

1.8V-to-3.3V Levelshifter ............................................................................................................ 15 Background ......................................................................................................................... 15 Design Theory ..................................................................................................................... 17 Overstress Voltage Check ................................................................................................... 19 Current Consumption.......................................................................................................... 19

2.3.1 2.3.2 2.3.3 2.3.4 2.4

1.0V-to-1.8V Levelshifter ............................................................................................................ 20 Design Theory ..................................................................................................................... 20 Target Specifications ........................................................................................................... 21 Simulation Results ............................................................................................................... 21

2.4.1 2.4.2 2.4.3 2.5

Transmitter Path Simulation ....................................................................................................... 22

2.5.1 JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits DC Input Specification ........................................................................................................................................ 23 3 4 5 6 Conclusion ........................................................................................................................................... 24 Appendix A ­ Simulation Results ........................................................................................................ 25 Appendix B ­ Circuit and Testbench Schematics ................................................................................ 30 Bibliography ........................................................................................................................................ 40

iv

Table of Figures
Figure 1: Gate-Oxide Breakdown and I/O Level vs. Technology Generation ............................................... 1 Figure 2: Typical 3.3V Transmitter Topology ................................................................................................ 5 Figure 3: Output Buffer ................................................................................................................................. 6 Figure 4: ref_18 Generator ........................................................................................................................... 7 Figure 5: PMOS Output Impedance Testbench for Nominal Corner .......................................................... 10 Figure 6: PMOS Buffer Impedance Variance............................................................................................... 12 Figure 7: NMOS Buffer Impedance Variance .............................................................................................. 12 Figure 8: Testbench for Measuring VOH....................................................................................................... 13 Figure 9: Testbench for Measuring VOL ....................................................................................................... 14 Figure 10: Full-Swing Transistor Network Levelshifter [6] .......................................................................... 15 Figure 11: Full-Swing Transistor Network Levelshifter [13] ........................................................................ 16 Figure 12: Dynamically Biased Differential Amplifier Levelshifter [14] ...................................................... 16 Figure 13: 1.8V-to-3.3V Levelshifter ........................................................................................................... 17 Figure 14: `out18_33p' Toggling at 200 MHz at TT, SS, FF, 50C, Nominal Voltage Corners ....................... 18 Figure 15: Node V0 tracking Node P2D to Prevent Overvoltage ................................................................ 19 Figure 16: 1.0V-to-1.8V Levelshifter ........................................................................................................... 20 Figure 17: Levelshifter Output with 0.9V Input Swing ................................................................................ 21 Figure 18: Transient Simulation Results for Transmitting 200 MHz PRBS Data for TT, 50°C, Nominal Voltage Corner ............................................................................................................................................ 22 Figure 19: Eye Diagram for 200 MHz PRBS Data Transmission for TT50, SS110, FF0, Nom V Corners ...... 23 Figure 20: Output Buffer Schematic ........................................................................................................... 30 Figure 21: Output Buffer Testbench (Impedance) ...................................................................................... 31 Figure 22: 1.8V-to-3.3V Levelshifter Schematic.......................................................................................... 32 Figure 23: 1.8V-to-3.3V Levelshifter Testbench.......................................................................................... 33 Figure 24: Transmitter Schematic ............................................................................................................... 34 Figure 25: 1.8V Reference Generator ......................................................................................................... 35 Figure 26: 200 MHz Tx Simulation Testbench............................................................................................. 36 Figure 27: 200 MHz Tx Testbench (Zoomed) with PRBS Stimulus .............................................................. 37 Figure 28: 1.0V-to-1.8V Levelshifter ........................................................................................................... 38 Figure 29: 1.0V-to-1.8V Levelshifter Testbench.......................................................................................... 39

v

Table of Tables
Table 1: Supply Voltage of Legacy IO Specifications ..................................................................................... 1 Table 2: Min and Max Values of ref_18 During 200 MHz Transmission ....................................................... 8 Table 3: Recommended Operating Conditions ............................................................................................. 8 Table 4: LVCMOS Output Specifications ....................................................................................................... 9 Table 5: Output Buffer Device Sizing .......................................................................................................... 11 Table 6: Output Buffer Impedance ............................................................................................................. 11 Table 7: Output Buffer VOH/VOL Measurements .......................................................................................... 14 Table 8: 1.8V-to-3.3V Levelshifter Current Consumption........................................................................... 20 Table 9: 1.0V-to-1.8V Levelshifter Target Specifications ............................................................................ 21 Table 10: 1.0V-to-1.8V Levelshifter Simulation Results .............................................................................. 22 Table 11: JEDEC DC Input Specifications ..................................................................................................... 23 Table 12: P-Imp over all PVT ....................................................................................................................... 25 Table 13: N-Impedance over all PVT ........................................................................................................... 26 Table 14: VOH over all PVT ........................................................................................................................... 27 Table 15: VOL over all PVT ............................................................................................................................ 28 Table 16: 1.8V-to-3.3V Levelshifter Output Slew-Rates ............................................................................. 29

vi

1 Introduction
Today's device geometries continue to scale downward as Gordon E. Moore predicted in 1965, enabling higher performance per unit area and power consumption. The operational voltage for these evershrinking devices also continues to scale downward into the sub-1V region in order to gain more speed and lower power consumption. However, many System-on-a-Chip (SoC)'s I/O interfaces still have to support legacy specifications. These specifications often signal at voltage levels much higher than the core voltage of these devices. Example specifications are shown in the table below. IO Standard 3.3V LVCMOS [1] PCI-33/PCI-66 [2] I2C [3] MMC [4] SSTL3 [5] Supply Voltage

3.3V

Table 1: Supply Voltage of Legacy IO Specifications

In order to support a signaling level of 3.3V, there are generally two approaches. The simplest approach is to use 3.3V-tolerant transistors as the second gate-oxide device, where the overstress voltage for gate-to-source, gate-to-drain, and drain-to-source is >3.3V. This allows for the simplest design. However, the poor performance and large area they require renders them unusable for building analog IP needed in a given design. Thus, higher performance devices are needed which leads to the use of second gate-oxide devices with smaller gate lengths. As gate lengths shrink, maximum also shrinks [6] (as can be seen in Figure 1 below).

Figure 1: Gate-Oxide Breakdown and I/O Level vs. Technology Generation

Currently, ASICs are built on dual gate-oxide processes where the second gate-oxide support an overstress voltage of 1.8V, and adding 3.3V-tolerant devices would be prohibitively expensive, owing to the fact that any company choosing such a process would likely be in the minority. Besides cost, another good reason to choose a popular process is that foundries tend to commit significant resources to perfecting processes which produce the highest volumes, likely at the cost of resources available to low-volume alternatives. Thus, the predominately popular solution is to cascode (stack) two devices in series such that any one device would never see an overstress condition. The main drawback of this approach is the need for a bias voltage to the gate of the second device in the stack to ensure that the overstress voltage condition does not occur to , , or .

1.1 Device failure
CMOS transistors are fabricated to perform nominally up to a maximum voltage difference between gate and source, gate and drain, and drain and source. The process used for this project is Taiwan Semiconductor Manufacturing Company's (TSMC's) 65nm GP process, which is a dual gate-oxide process. This means two different devices are available: a 1.0V core device and a 2.5V-underdrive-1.8V I/O device. Exceeding these voltages will result in shortening their lifetime. The design in this paper refers mainly to the use of the second gate-oxide (1.8V) devices and their maximum overstress voltage is unfortunately not shown in any formal document. Typically, the foundry will ascertain this information through statistical analysis and determine a value for a given area and lifetime and provide it internally to their customer(s). For the purposes of this paper, an overstress voltage of 2.1V will be used.

1.2 Mechanisms for Device Failure
1.2.1 Gate Oxide Integrity (GOI)

GOI is the ability of the gate oxide in a CMOS device to withstand the stress induced by an electric field which is created when a gate voltage is applied. Simply applying a gate voltage in normal operation will begin to degrade the device. However, TSMC rates their transistors to operate at the rated voltage and temperature (<65C) for 10 years. Exceeding the rated voltage and/or temperature will begin to shorten device lifetime. TSMC provides the following Gate Oxide Lifetime prediction model [7]: ( where is the total gate oxide area on silicon (unit: µm²) is the absolute junction temperature (unit: K) is the gate voltage (unit: V) is the power law exponent for core thin gate oxide is the thermal activation energy is the Boltzmann constant (8.617 × 10-5 / )  is the Weibull shape factor (distribution spread) 2 ) ( ) ( )
/

When an electric current is passed through the gate oxide of the transistor, defects such as electron traps, interface states, positively charged donor-like traps, etc. gradually build up in the gate oxide until a conduction path is established. This is followed by thermal run away and device failure. According to the anode hole injection model [8] [9] [10], injected electrons generate holes at the anode that can tunnel back into the oxide. Intrinsic breakdown occurs when critical hole density is reached. 1.2.2 Hot Carrier Injection (HCI) Effect and Negative Bias Temperature Instability (NBTI)

In the formation of a MOSFET transistor, gate oxide is grown over the silicon channel. At the silicon-tooxide interface, some of the Si bonds remain dangling and can act as interface traps which can lead to poor device characteristics. Thus, another step is added to the manufacturing process in which the transistors are annealed with hydrogen atoms so that Si-H bonds form and the traps are eliminated. However, as device sizes continue to miniaturize, oxide thickness shrinks. This and process modifications such as using nitride oxides to prevent boron penetration of the poly-gate have led to accelerated Si-H bond breakage at the interface over time during device operation. The newly created traps shifts threshold voltage, reduces channel mobility due to scattering, and induces parasitic capacitances. These effects lead to a reduction in drain current and thus poor device performance. The most important mechanisms which break the Si-H bonds are HCI [11] and NBTI [12]. 1.2.2.1 Hot Carrier Injection Effect HCI occurs when electrons attain a very high kinetic energy while accelerated in the channel's lateral electric field. These energetic carriers can be injected into normally forbidden regions of the device (e.g. gate oxide) and once there they can break Si-H bonds and become trapped. The trapped charges from HCI stress can have the following effect on the transistors: 1. 2. 3. 4. 5. Shift in device threshold voltage ( ) Reduced mobility of conducting carriers Reduced device drain current Increased effective series resistance, from a charge trapped above the S/D extension region Degraded sub-threshold slope

HCI is a major degradation effect in NMOSFETs. To avoid, or at least minimize hot carrier degradation, several device design modification can be made. These are for example a larger channel length, double diffusion of source and drain, and graded drain junctions to name a few. TSMC provides the following model for predicting the lifetime of device degradation due to HCI [7]: ( where: is the mean time to failure is the drawn channel length (unit: µm) 3 ) ( )
/

[

(

)]

(

)

is the drawn channel length (unit: µm) is the percentage of degradation of an electrical parameter (e.g. 10% is the drain to source bias (unit: V) is the power law factor of time dependent degradation is the activation energy is the Boltzmann constant (8.617 × 10-5 / ) is the absolute junction temperature (unit: K) and are empirical fitting parameters 1.2.2.2 Negative Bias Temperature Instability

)

NBTI occurs in negatively biased transistors at elevated temperatures. Inversion layer holes tunnel into the oxide and their interaction with passivated Si atoms can break Si-H bonds and leave behind interface traps while the associated H atoms diffuses away from the Si-Oxide interface. NBTI will change device characteristics by increasing threshold voltage, decreasing the drain current, and decreasing transconductance. TSMC provides the following model for predicting the lifetime of device degradation due to NBTI [7]: ( where: is the mean time to failure is the drawn channel length (unit: µm) is the drawn channel length (unit: µm) is the criteria of Idsat degradation percentage is the power law factor of time dependent degradation is the operation gate bias (unit: V) is the voltage acceleration factor is the activation energy is the Boltzmann constant (8.617 × 10-5 / ) is the absolute junction temperature (unit: K) is a constant 1.2.3 Testing ) ( )
/

[

]

(

)

Compliance testing of production ASICs for GOI, HCI, and NBTI, can be done according to the JEDEC/FSA Foundary Process Qualification Guidelines Document JP001.01 [13]. Models for various stress tests are outlined in [14].

4

2 Design
2.1 Simulator
All designs for this project was simulated using the Cadence Virtuoso Design Environment software package version IC6.1.5.500. The simulator used is Spectre. Model files used are provided by TSMC.

2.2 Transmitter
A typical voltage-mode transmitter consists of signals which enter the I/O cell powered off the core power domain. A levelshifter block will translate these signals into the 1.8V power domain. The data will then need one more translation to the 1.8V/3.3V domain in order to properly control a PMOS device in the Output Buffer. This block is called a Pre-Buffer. Finally, the Output Buffer is used to drive a (typically large) off-chip load in the 3.3V domain. This is the proposed design for this project (Figure 2).
Core Domain Core-to-1.8V Domain 1.8V-to-3.3V Domain 3.3V Domain

Data Levelshifter (Core-to-1.8V) Output Enable Pre-Buffer with Levelshifter (1.8-to-3.3V) Output Buffer Output (off-chip)

Figure 2: Typical 3.3V Transmitter Topology

In designing each major sub-block of the GPIO, a set of specifications will be defined. In many cases, the specification will be taken directly from the JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits Document [1]. Some blocks may not have a relevant specification from the JEDEC document, thus the specifications used will be defined by the designer. 2.2.1 Output Buffer

The output buffer stage of the transmitter is built using 2 PMOS and 2 NMOS devices connected in a cascode configuration. As explained previously, this configuration is chosen due to the lack of availability of 3.3V-tolerant devices at this node. The following is the circuit schematic for the output buffer:

5

3.3V

p_in18_33

P0

ref18

P1

RP0

RN0

N1

n_in18

N0

gnd

Figure 3: Output Buffer

The PMOS input signal `p_in18_33' will swing from 1.8V ­ 3.3V while the NMOS input signal `n_in18' will swing from 0V ­ 1.8V. 2.2.1.1 ref_18 Generation In order to keep the | | voltage for all transistors within the 2.1V over-voltage tolerance, the gate voltages of transistors P1 and N1 are biased with a 1.8V reference. This reference can be generated in a variety of ways, including: 1. a resistor network voltage divider from 3.3V, 2. a diode network voltage divider from 3.3V [6],

6

3. a Feedback Circuit which generates a complementary signal from PAD which is then coupled back to ref_18 through small capacitors to oppose initial coupling effect on ref_18 due to a PAD transition [15], 4. a small resistor connected to 1.8V with a decoupling capacitor to ground. A resistor network voltage divider can create this reference from the 3.3V rail. There are two drawbacks with this approach. First, there will be static current consumption through the divider. In order to keep this current small, a large impedance is needed, which leads to the second drawback. Since P1 and N1 are typically large (as they are in series with their respective cascoded devices), there is a large Miller capacitance from the drain to the gates of P1 and N1. This large parasitic capacitor will couple the high frequency components of the fast switch edge during output buffer transitions onto `ref_18'. This, in turn will change overall output impedance of the buffer and cause jitter on the output signal. To decouple `ref_18' from this, a decoupling capacitor can be added. However, as shown in [15], the needed capacitance is more than 9 times the of P1 and N1 combined. A diode network voltage divider can also create the 1.8V reference from the 3.3V rail [6]. This will also consume static current during mission mode although the author adds a sleep functionality to the circuit in order to turn off this bias while it is in a low-power non-operational state. A feedback circuit shown in [15] is an interesting and effective approach to reduce the amount of noise coupled onto `ref_18' while using significantly less area than adding a large decoupling capacitor. However, for brevity, simplicity, and effectiveness this paper will choose solution 4, seen below in Figure 4. A small resistor will provide a low impedance path to AC ground (1.8V) for the high frequency components of the fast switch edge to dissipate while providing ESD protection to the gates of N1 and P1. The decoupling capacitor will also aid in stabilizing the reference node. The drawback of the large decoupling capacitor (large area consumption) has been previously explained, but in this solution there is no dc current consumption (as opposed to the resistor voltage divider in solution 1).
1.8V

10

ref_18

10pF Decoupling Capacitor

gnd

Figure 4: ref_18 Generator

7

2.2.1.1.1 Simulation The Maximum and minimum value of `ref_18' is measured with the transmitter is toggling at 200 MHz. The results are tabulated in the following table: ref_18 Min Max TT 50°C (V) 1.62 1.90 SS 110°C (V) 1.64 1.89 FF 0°C (V) 1.66 1.91 Variance (%) -10% +6.1 Notes 1.8V Rail at Nominal 1.8V Rail at Nominal

Table 2: Min and Max Values of ref_18 During 200 MHz Transmission

These results show that the overstress level of 2.1V.

and

voltages for P1 and N1 do not exceed the maximum voltage

2.2.1.2 Output Buffer Impedance Considerations The variance of `ref_18' will affect the impedance of P1 and N1 since it will change the | | of those devices. The change in the impedance of P1/N1 can be mitigated by selecting the value of a resistor RP0/RN0 to account for a large portion of the target impedance. So, for example, for the target impedance of 50, the selected resistance of RP0 is 40. Thus, P0 and P1 (and subsequently N0 and N1) will account for roughly 10 of the output impedance. Assuming this is split evenly, each transistor will be ~5. If the change in P1's | | is 200mV, this may change its impedance by 20%, which will be ~1, thus affecting the overall impedance by 2%. This amount is well within the range of impedance mismatch that the output buffer will see due to Process-Voltage-Temperature (PVT) corner variation. 2.2.1.3 Output Buffer Design Objectives 2.2.1.3.1 Recommended Operating Conditions Before beginning the output buffer design, the operating conditions for the circuit must be defined. This design will follow the recommended operating condition specified in the JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits Document [1]. These conditions are summarized in the following table: Power Supply Range Nominal Supply Voltage Rail Power Supply Voltage Reference Power Supply Voltage Symbol VDDR VDDR VDD18 Narrow Range 3.3V 3.15V to 3.45V Normal Range 3.3V 3.0V to 3.6V 1.71V to 1.89V Extended Range 3.0V 2.7V to 3.6V -

Table 3: Recommended Operating Conditions

2.2.1.3.2 DC Specifications In sizing the devices in the Output Buffer, certain specifications are targeted. First, a DC impedance of 50 is targeted. This is done in order to match the characteristic impedance Z0 of a typical board trace and minimize reflections. Both the PMOS pull-up driver and NMOS pull-down driver will target this 8

impedance. It should be noted, however, that 50 can only be met in 1 PVT corner. The sizing of devices will therefore be done such that 50 is met at the TT, 50°C, nominal voltage corner. Impedance will be higher in slow corner and lower in fast corner. Secondly, the design will aim at the DC specification from the JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits Document [1], which is shown in the following table: Symbol VOH VOL Parameter Output High Voltage Output Low Voltage Test Condition VDDR = min, IOH = -100 µA VDDR = min, IOL = 100 µA
Table 4: LVCMOS Output Specifications

Min VDDR ­ 0.2

Max 0.2

Units V V

2.2.1.3.3 DC Impedance There are several considerations with regards to Output Buffer impedance: 1. How is DC impedance measured? 2. How much of the impedance is attributed to transistor vs. resistor and why? 3. Electrostatic Discharge (ESD) consideration? How is DC impedance measured? DC impedance is measure with the PAD node set to half rail voltage (Figure 5). This is an industry standard practice. Specifically, it is calculated as the ratio of VPAD to IPAD. Note that the I-V characteristic for a transistor is not linear, as illustrated by the fact that a transistor's I-V curve is not a straight line. Thus, it is considered a best practice to size the transistor in such a way that the impedance target is met at half way between the power rail and ground with the reasoning that if, for example, it was tuned to the target impedance close to rail, its corresponding impedance when close to ground would be substantially greater, thus having the most error. It is interesting to note that during a transition, the `ON' path transistors' dc operating point will traverse the I-V curve as decreases as they start in saturation and end in triode.

9

3.3V

1.8V

P0

1.8V

P1

RP0 VPAD

IPAD

3.3V = 1.65V 2

gnd

Figure 5: PMOS Output Impedance Testbench for Nominal Corner

How much of the impedance is attributed to transistor vs. resistor and why? Considering that the current path during a transition exists between PAD and either power or ground, the impedance of the `ON' path will be through transistors in series with a resistor. While a resistor I-V characteristic is linear, a transistor's characteristic is not. This means that the impedance value of the `ON' path does not have a static value. In order to improve the linearity of this path, it is wise to attribute a significant portion of the target 50 to the resistor. A larger resistor will lead to larger (width) transistors because the `ON' impedance of a transistor lowers when it is sized larger. The larger transistors are more apt to survive device failure due to electromigration (EM) as their EM rating increases with size. Also, the number of contacts and vias and the amount of metal used to connect to the larger transistors will aid in increasing EM survivability. The benefit of keeping the impedance variance small during a switching event is that it will help keep reflections from transmission line effects to a minimum. This is important since in the JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits spec, there is no termination at the destination. Thus, if the source impedance matches Z0, the incident voltage wave will travel down the transmission line at half the rail voltage, reflect fully when it reaches the destination and the reflected wave will traverse back to the source where it is fully absorbed by the 50 source impedance (this acts as a termination to AC ground). 10

Electrostatic Discharge (ESD) Consideration? Electrostatic Discharge is the sudden flow of electric current between two objects caused by contact, an electrical short, or dielectric breakdown. In general, an ESD zap to an IC will go through the I/O pins as they provide the connection to the outside world. Thus, I/O circuits need to properly conduct a large amount of current over a short amount of time and prevent circuits from seeing a high voltage to sensitive nodes which, if the voltage was high enough, can cause device failure. The TSMC 65nm design document [7] specifies a minimum device size for both PMOS and NMOS transistors to ensure ESD survivability. These rules include: Lmin  0.2um (ESD.26g), Wmin  360um (ESD.24g/25g), and unit fingers width = 15um (ESD.3g). However, because only 2.5V-underdrive-1.8V devices are available in the CLN65GP process (Section 12.1.4 in [7]), Lmin = 0.26um for these devices, which satisfies the ESD requirement. With the previous 3 considerations in mind, the following table shows the sizes of the devices in the Output Buffer. Device P0/P1 RP0 RN0 N0/N1 L (um) 0.26 1 1 0.26 W (um) 720 18.56 15.76 360 Unit Finger (um) 15 4.64 3.94 15 Impedance () 4.38 41.33 48.78 0.66

Table 5: Output Buffer Device Sizing

2.2.1.4 Simulation Results 2.2.1.4.1 Impedance over PVT The follow table is the Output Buffer Impedance for 3 PVT corners. Again, 50 was targeted for TT 50°C only. Corner Pull-up Impedance () Pull-down Impedance () TT 50°C 50.1 50.1 SS 110°C 61.8 60.9 FF 0°C 40.1 40.5 Note Voltage Rails at Nominal Voltage Rails at Nominal

Table 6: Output Buffer Impedance

Impedance results across all corners are found in Table 12 and Table 13 in Appendix A ­ Simulation Results. 2.2.1.4.2 Linearity As mentioned before, by attributing a significant portion of the pull-up/pull-down impedance to the resistors, the impedance variance would be kept to a minimum. This is shown in the following plot generated by sweeping the voltage at PAD and measuring the impedance.

11

Pull-up Impedance Variance
70 60 P-Impedance () 50 40 30 20 10 0 0 0.5 1 1.5 Vpad (V) 2 2.5 3 3.5

Figure 6: PMOS Buffer Impedance Variance

It can be seen that the impedance varies from approximately 49 to 58. One point of interest is that form 0 to 2.5V, the impedance decrease but after 2.5V it starts increasing. This is due to the fact that the PMOS transistors make a transition from saturation to triode mode at 2.5V. A similar exercise can be used to show the pull-down impedance of the Output Buffer.

Pull-down Impedance Variance
60 50 N-Impedance () 40 30 20 10 0 0 0.5 1 1.5 Vpad (V) 2 2.5 3 3.5

Figure 7: NMOS Buffer Impedance Variance

2.2.1.4.3 Output Buffer DC

 /



Measurements

As outlined in the JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits Document [1],  and  are measured against a current source of 100 uA. Figures Figure 8 and Figure 9 show the testbenches for measuring these parameters. 12

3.3V

p_in18_33

P0

ON

ref18

P1

RP0 VOH

RN0

N1 100 uA OFF n_in18 N0

gnd

Figure 8: Testbench for Measuring VOH

13

3.3V

p_in18_33

P0

OFF

100 uA

ref18

P1

RP0

VOL RN0

N1

ON n_in18 N0

gnd

Figure 9: Testbench for Measuring VOL

The following table are the results of the measurements. Note that they these number pass the JEDEC spec. Corner VOH (V) VOL (V) TT 50°C 2.965 0.0048 SS 110°C 2.964 0.0050 FF 0°C 2.965 0.0045 Note VDDR = 2.97V VDDR = 2.97V

Table 7: Output Buffer VOH/VOL Measurements

Complete results are shown in Table 14 and Table 15 in Appendix A ­ Simulation Results.

14

2.3 1.8V-to-3.3V Levelshifter
2.3.1 Background

Along the data path, it is necessary to levelshift data from the 0V ­ 1.8V domain to the 1.8V ­ 3.3V domain. This levelshifted signal will control the gate P0 in Figure 3 and is labeled `p_in18_33'. There are a couple approaches to the design of such a levelshifter. The first is a full-swing transistor network [6] [16] and the second is a dynamically biased differential amplifier [17]. These are shown in Figure 10, Figure 11, and Figure 12 respectively. Both earn the distinction of preventing overstress conditions on all devices.

Figure 10: Full-Swing Transistor Network Levelshifter [6]

15

Figure 11: Full-Swing Transistor Network Levelshifter [13]

Figure 12: Dynamically Biased Differential Amplifier Levelshifter [14]

16

As shown, [6] uses 16 transistors, [16] uses 14 transistors, and [17] uses 9 transistors and 2 resistors (not counting the Turn ON/OFF circuit since the contents were not divulged). The referenced articles do not document the amount of dynamic or static power consumed by the circuits so it is difficult to compare. The full-swing transistor networks of [6] [16] will consume little static current. The differential amplifier [17] will also consume little static current because it has a low power mode in which the input data and feedback from a PAD Detect circuit will shut off the bias and current source. The goal of the levelshifter design for this project is to ensure that it will toggle at the rated speed of 200 MHz while consuming a negligible amount of static current and use the minimum number of devices possible while keeping all transistors from overstress conditions. 2.3.2 Design Theory

Along the data path, it is necessary to levelshift data from the 0V ­ 1.8V domain to the 1.8V ­ 3.3V domain. This signal is the p_in18_33 signal in Figure 3 and is used to control the gate of transistor P0 (which will either turn on the pull-up portion of the output buffer or tri-state it). The schematic for the 1.8V-to-3.3V Levelshifter is shown in Figure 13 below.
3.3V 3.3V

P0

P1

out18_33p

P2D V3

P4 1.8V V0 P2 P3

P5

V1

N0

N1

GND in18 en18
Figure 13: 1.8V-to-3.3V Levelshifter

GND

17

Before proceeding with the circuit analysis, it should be pointed out that the intended voltage swing of `out18_33p' is from 1.8V to 3.3V. This allows P0 in the Output Buffer to not be overstressed while giving enough overdrive voltage (| | ) such that it performs adequately without extreme sizing. The circuit analysis is as follows: data enters the circuit to the `data_in' node of the AND gate. Assuming data is `1', it will be 1.8V and so the source of N0 is 1.8V and the source of N1 is 0V. Since is the gate of the N0 is connected to 1.8V, N1 is on and its drain (V1 node) will be pulled to 0V. This will turn P3 on and it will pull its drain (V3 node) to 1.8V since its source is tied to 1.8V. The gate of P0 is also connected to V3 and since it is now 1.8V, P0 is on and `out18_33p' will be pulled up to 3.3V, thereby levelshifting the incoming logic-1 from 1.8V to 3.3V. If the incoming data was a logic-0, the reverse happens as this circuit is symmetric. Figure 14 shows the transient simulation results of the output node `out18_33p` toggling at 200MHz (FF in green, TT in orange, SS in purple):

Figure 14: `out18_33p' Toggling at 200 MHz at TT, SS, FF, 50C, Nominal Voltage Corners

It is important to note that the nodes V0 and V1 will swing from 0V to 3.3V. However, the drains of P2 and P3 will track this swing from 1.8V to 3.3V and will prevent these two transistors from enter an overvoltage state. Simulation results confirm this.

18

Figure 15: Node V0 tracking Node P2D to Prevent Overvoltage

2.3.3

Overstress Voltage Check

In order to check for overvoltage conditions for the entire design, spectre simulations were run with the following assert statements:
nmos18_vgs assert sub=nch_18_mac dev=nch_18_mac param=vgs min=-2.1 max=2.1 duration=100p level=error nmos18_vds assert sub=nch_18_mac dev=nch_18_mac param=vds min=-2.1 max=2.1 duration=100p level=error pmos18_vgs assert sub=pch_18_mac dev=pch_18_mac param=vgs min=-2.1 max=2.1 duration=100p level=error pmos18_vds assert sub=pch_18_mac dev=pch_18_mac param=vds min=-2.1 max=2.1 duration=100p level=error

These statements will check for Vgs and Vds overvoltage conditions of ±2.1V for a duration of 100ps. If the failure threshold is triggered, the simulation would fail and an error message displayed. This design was verified across the corners of 3.3V±10%, 1.8V±5%, TT, SS, FF, FNSP, SNFP, 0°C, 50°C, and 110°C (135 corners total) with no overvoltage failures. 2.3.4 Current Consumption

Current consumption is measured the voltage source powering the 1.8V and 3.3V rails in the levelshifter testbench. Note that the 1.8V static leakage measurement is negative. This is due to current leaking 19

from the 3.3V rail to the 1.8V rail. Also note that this current path exists when the levelshifter is switching dynamically. The current which flows out the 1.8V rail will charge an onboard capacitor which is part of the circuitry of the 1.8V power regulator. This negative current will cancel positive current drawn from the 1.8V power regulator, thus ensuring that this measurement is not double-counting the current from drawn from the 3.3V with the current sunk to the 1.8V rail.

Current 1.8V Dynamic (200MHz) 1.8V Static (Leakage) 3.3V Dynamic (200MHz) 3.3V Static (Leakage)

TT 50°C (A) 27.9u -1.33n 85.5u 8.16n

SS 110°C (A) 28.6u 2.04n 82.0u 10.3n

FF 0°C (A) 25.8u -737p 90.0u 8.57n

Note Average Current Average Current -

Table 8: 1.8V-to-3.3V Levelshifter Current Consumption

2.4 1.0V-to-1.8V Levelshifter
2.4.1 Design Theory
1.8V

out18n

INV5

INV6

INV4

INV7

INV8

out18p

1.0V 1.0V
INV3

data_in

INV0

INV1

N0

N1

INV2

GND

Figure 16: 1.0V-to-1.8V Levelshifter

The 1.0V-to-1.8V levelshifter is used for shifting from the ASIC's core-level voltage to the 1.8V domain. INV0, INV1, and INV2 are all thin-gate devices (L=60nm) while transistors N0, N1 and inverters INV3-8 20

are thick-gate devices. The voltage domain crossing occurs at the gates of N0 and N1. The main concern in this design is to make sure that N0 and N1 are overdriven with enough voltage to turn on with enough strength to overcome the latch made up of INV3 and INV4. This can be a concern if the 1.0V supply is too low and the 1.8V supply is too high. Assuming a specification of ±10% on the 1.0V supply, the lower end of this range is 0.9V. For 1.8V, the tolerance is ±5% so the worst case is if it is at 1.89V. As such, the levelshifter works within spec at these voltage extremes as shown in Figure 17. 2.4.2 Target Specifications

The specifications used for the 1.0V-to-1.8V levelshifter are listed in the following table. Parameter Duty_Cycle TRISE TFALL Spec 48 - 52 100 100 Units % ps ps

Table 9: 1.0V-to-1.8V Levelshifter Target Specifications

2.4.3

Simulation Results

2.4.3.1 Levelshifter Output with 0.9V Input Swing

Figure 17: Levelshifter Output with 0.9V Input Swing

21

2.4.3.2 Duty Cycle and Slew-Rates Parameter Duty_Cycle TRISE TFALL TT 50°C 49.88 28.8 35.05 SS 110°C 49.79 30.78 37.5 FF 0°C 50.29 22.78 27.61 Units % ps ps Note VDD_CORE = 1.0V VDD18 = 1.8V Meet Spec? Yes Yes Yes

Table 10: 1.0V-to-1.8V Levelshifter Simulation Results

2.5 Transmitter Path Simulation
The final simulation to run is the toggling of the entire transit path at 200 MHz while driving a 30 cm, 50 transmission line with a 4 pF capacitive load termination. The transmission line is modeled with the following parameters: L=2.42n/cm, C=1p/cm, and 10 m/cm. The stimulus driving the data input of the transmitter is a random stimulus generator which produces a Pseudo Random Bit Stream (PRBS) from the adhlLib library. At the same time, 4 other transmitters are also stimulated with different PRBS data inputs. The 3.3V and 1.8V power rails are modeled with a series inductor (L=2nH) and resistance (R=1) in order to model jitter effects due to Simultaneous Switching Noise (SSN). The following is the transient simulation result for transmitting PRBS data at TT corner:

Figure 18: Transient Simulation Results for Transmitting 200 MHz PRBS Data for TT, 50°C, Nominal Voltage Corner

22

The following is the Eye Diagram from a transient simulation of 500 ns:

Figure 19: Eye Diagram for 200 MHz PRBS Data Transmission for TT50, SS110, FF0, Nom V Corners

2.5.1

JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits DC Input Specification

In order to determine if the Eye Diagram above satisfies the necessary requirement for the transmitted signal to be received properly, it is useful to look at the JEDEC DC Input Specification: Symbol VIH VIL Parameter Input High Voltage Input Low Voltage Test Condition VOUT  VOH (Min) VOUT  VOL (Max) Min 2 -0.3 Max VDD+0.3 0.8 Units V V

Table 11: JEDEC DC Input Specifications

From Figure 19, it can be seen that the worst case is the SS110 waveform in green. VOL in the worst case is 0.4V while VOL in the worst case is 2.6V. As such, they easily satisfy the JEDEC DC Input specification.

23

3 Conclusion
The goal of this paper was to address the issues concerning the design of a high-voltage (3.3V) voltagemode transmitter using 1.8V devices. These issues include the avoidance of device failure mechanisms such as GOI, NBTI, and HCI so as to not exceed overstress conditions on the devices used. Also, appropriate analysis was done on buffer output impedance, reference voltage variance, signal levelshifting, and transmission line effects. It is concluded that the final design achieved the goal of PRBS data transmission at 200 MHz while meeting JEDEC Interface Standard for Nominal 3 V/3.3 V Supply Digital Integrated Circuits Document [1] DC Specifications. The Eye Diagram shows that the transmitted signal should be received without problem as JEDEC DC Input Specifications were met.

24

4 Appendix A ­ Simulation Results

Table 12: P-Imp over all PVT

25

Table 13: N-Impedance over all PVT

26

Table 14: VOH over all PVT

27

Table 15: VOL over all PVT

28

Table 16: 1.8V-to-3.3V Levelshifter Output Slew-Rates

29

5 Appendix B ­ Circuit and Testbench Schematics

Figure 20: Output Buffer Schematic

30

Figure 21: Output Buffer Testbench (Impedance)

31

Figure 22: 1.8V-to-3.3V Levelshifter Schematic

32

Figure 23: 1.8V-to-3.3V Levelshifter Testbench

33

Figure 24: Transmitter Schematic

34

Figure 25: 1.8V Reference Generator

35

Figure 26: 200 MHz Tx Simulation Testbench

36

Figure 27: 200 MHz Tx Testbench (Zoomed) with PRBS Stimulus

37

Figure 28: 1.0V-to-1.8V Levelshifter

38

Figure 29: 1.0V-to-1.8V Levelshifter Testbench

39

6 Bibliography
[1] EIA/JEDEC Standard, "Interface Standard for Nominal 3V/3.3V Supply Digital Integrated Circuits," JESD8-B, 1999. [2] "PCI Local Bus Specification Revision 3.0," 2004. [3] "The I2C Bus Specification Version 2.1," 2000. [4] MultiMediaCard Association, "MMCA 4.1 Application Note," AN0501-1.00, 2005. [5] EIA/JEDEC Standard, "Stub Series Terminated Logic for 3.3V (SSTL_3)," EIA/JESD8-8, 1996. [6] H. Sanchez, J. Siegel, C. Nicoletta, J. P. Nissen and J. Alvarez, "A Versatile 3.3/2.5/1.8V CMOS I/O Driver Built in a 0.2um, 3.5nm Tox, 1.8-V CMOS Technology," IEEE Journal of Solid-State Circuits, vol. 34, no. 11, pp. 1501 - 1511, November 1999. [7] Taiwan Semiconductor Manufacturing Co., Ltd., "TSMC 65nm/55nm CMOS Logic/MS_RF Design Rule (CLN65 G/GP/LP/LPG/ULP, CLN55 GP/LP, CMN65 GP/LP, CMN55LP)," T-N65-CL-DR-001. [8] I. C. Chen, S. Holland, K. K. Young and C. Chang, "Substrate Hole Current and Oxide Breakdown," Applied Physics Letters, vol. 49, no. 11, pp. 669 - 671, 1986. [9] J. D. Bude, B. E. Weir and P. J. Silverman, "Explanation of Stress-Induced Damage in Thin-Oxides," International Electronic Devices Meeting, pp. 179 - 182, 1998. [10] M. A. Alam, B. E. Weir, P. J. Silverman, J. D. Bude, G. Timp and A. Ghetti, "Physics and Prospects of Sub-2nm Oxides," 4th International Symposium on the Physics and Chemistry of SiO2 and Si-SiO2 interfaces, 15-18 May 2000. [11] Y. Leblebici, "Design Considerations for CMOS Digital Circuits with Improved Hot-Carrier Reliability," IEEE Journal of Solid-State Circuits, vol. 31, no. 7, pp. 1014 - 1024, July 1996. [12] G. Chen, M. F. Li, C. H. Ang, J. Z. Zheng and D. L. Kwong, "Dynamic NBTI of p-MOS Transistors and its Impact on MOSFET Scaling," IEEE Electron Device Letter, vol. 23, no. 12, pp. 734 - 736, 2002. [13] JEDEC/FSA, "Foundry Process Qualification Guidelines (Wafer Fabrication Manufacturing Sites)," JP001.01, 2004. [14] E. M. Vogel, Oxide Reliability Tutorial, Gaitherburg, Maryland: National Institute of Standards and Technology, 2001.

40

[15] R. Chauhan, K. Rajagopal, V. Menezes, R. H. M. and S. K. Jacob, "A High Performance, High Voltage Output Buffer in a Low Voltage CMOS Process," IEEE Custom Integrated Circuites Conference, pp. 227 - 230, 2005. [16] M. J. McManus, "5 Volt Driver in a 3 Volt CMOS Process". USA Patent 5,684,415, 4 November 1997. [17] K. Rajagopal, "Dynamically Biased Low Power High Performance 3.3V Output Buffer in a Single Well Bulk CMOS 1.8V Oxide 45nm Process," 13th Symposium on Quality Electronic Design, pp. 159 - 164, 2012.

41


