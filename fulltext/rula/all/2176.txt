Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2010

The Design And Synthesis Of A Stereotactic Radiosurgical Phantom
Robert Tkaczyk
ryerson

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Biological and Chemical Physics Commons Recommended Citation
Tkaczyk, Robert, "The Design And Synthesis Of A Stereotactic Radiosurgical Phantom" (2010). Theses and dissertations. Paper 1651.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

THE DESIGN AND SYNTHESIS OF A STEREOTACTIC RADIOSURGICAL PHANTOM

By Robert Tkaczyk

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Science in the Program of Biomedical Physics

Toronto, Ontario, Canada, 2010 © Robert Tkaczyk 2010

I  hereby  declare  that  I  am  the  sole  author  of  this  thesis  or  dissertation.            I  authorize  Ryerson  University  to  lend  this  thesis  or  dissertation  to  other  institutions  or  individuals   for  the  purpose  of  scholarly  research.            I  further  authorize  Ryerson  University  to  reproduce  this  thesis  or  dissertation  by  photocopying  or   by  other  means,  in  total  or  in  part,  at  the  request  of  other  institutions  or  individuals  for  the  purpose   of  scholarly  research.  

  

ii  

THE  DESIGN  AND  SYNTHESIS  OF  A  STEREOTACTIC  RADIOSURGICAL  PHANTOM      Robert  Tkaczyk   Master  of  Science,  2010   Biomedical  Physics   Ryerson  University  

   Abstract  
   Stereotactic  Radiosurgery  involves  the  use  of  highly  focused  ionizing  radiation  beams  to  treat   localized  cancer  tumours  and  lesions.    Due  to  the  damaging  effects  of  radiation  on  healthy  tissue,   quality  assurance  checks  must  take  place  before  treatment  to  ensure  accurate  delivery.  This  is  of   critical  importance  in  cases  like  brain  tumours,  in  which  the  healthy  tissue  at  risk  is  in  close   proximity  to  the  target  volume.    A  dodecahedral  radiosurgical  phantom  was  designed  and   fabricated  to  measure  the  isocentre  variation  of  a  linear  accelerator  at  an  isocentric  irradiation   facility.    It  was  shown  that  the  phantom  can  localize  individual  treatment  beams  to  within  an   uncertainty  of  0.2mm.    Due  to  the  intrinsic  accuracy  of  the  phantom,  it  was  found  that  careful   phantom  design  and  manufacturing  as  well  as  an  accurate  and  complex  characterization,  in  terms  of   measurements,  positioning  and  computer  modeling,  must  take  place.    This  accurate   characterization  of  the  phantom  is  crucial  to  ensure  the  accurate  treatment  of  stereotactic   radiosurgery.  This  research  is  part  of  a  larger  project  to  further  develop  the  phantom  we  have   introduced  in  order  to  exploit  a  wider  set  of  functions  pertaining  to  maintaining  accurate  treatment   delivery.  

  

iii  

Acknowledgements  
   I  would  like  to  acknowledge  my  co-supervisors  Dr.  Pedro  Goldman  and  Dr.  David  Beachey  for    their   supervision  and  help  throughout  this  research.      I  would  also  like  to  acknowledge  my  supervisor  at   the  German  Cancer  Research  Centre  (DKFZ)  in  Heidelberg,  Germany,  Dr.  Günther  Hartmann  for  his   extensive  knowledge  of  Stereotactic  Radiosurgery  during  my  student  exchange.    Finally,  I  would   like  to  acknowledge  Mr.  Harry  Easton,  Head  of  the  machine  shop  at  O.C.C.  in  Toronto,  Canada,  and   Prof.  Gernot  Echner,  Chief  Engineer  at  DKFZ  in  Heidelberg,  Germany.    Without  their  expertise  and   experience,  this  research  could  not  have  taken  place.

  

iv  

  

Table  of  Contents  
ABSTRACT ............................................................................................................................................................III   ACKNOWLEDGEMENTS .................................................................................................................................... IV   LIST  OF  FIGURES................................................................................................................................................VII   LIST  OF  APPENDICES ........................................................................................................................................ IX   INTRODUCTION ....................................................................................................................................................1   STEREOTACTIC  RADIOSURGERY ....................................................................................................................3   STEREOTACTIC  RADIOSURGERY  HISTORY .............................................................................................................................3   MEDICAL  LINEAR  ACCELERATORS ..........................................................................................................................................9   MODIFIED  LINEAR  ACCELERATOR  FOR  STEREOTACTIC  RADIOSURGERY ..................................................................... 13   STEREOTACTIC  RADIOSURGERY  TECHNIQUES................................................................................................................... 16   ACCURACY  OF  STEREOTACTIC  RADIOSURGERY ................................................................................................................. 20   QUALITY  ASSURANCE ............................................................................................................................................................. 21   RESEARCH............................................................................................................................................................ 23   HYPOTHESIS  AND  SPECIFIC  AIMS......................................................................................................................................... 23   PHANTOM  DESIGN  AND  FABRICATION................................................................................................................................ 24   Phantom  Design...................................................................................................................................................................24   Phantom  Shape ....................................................................................................................................................................25   Phantom  Size  and  Material ............................................................................................................................................27   Phantom  Fabrication ........................................................................................................................................................31   SOFTWARE  DESIGN  AND  TESTING ....................................................................................................................................... 32   Film  Digitization..................................................................................................................................................................32   Image  Rotation/  Locate  reference  edge ...................................................................................................................33   Convert  to  Dose ....................................................................................................................................................................36   Contour  Data.........................................................................................................................................................................39   Find  Radiation  Spot  Centres...........................................................................................................................................40   Trace  Beam ............................................................................................................................................................................45   Calculate  Beam  Offsets .....................................................................................................................................................48   PHANTOM  TESTING ................................................................................................................................................................ 51   Phantom  orientation/  Measurement  Setup ............................................................................................................51   Phantom  Robustness..........................................................................................................................................................51   Phantom  Characterization .............................................................................................................................................54   DATA  RESULTS ........................................................................................................................................................................ 59   Gantry  Rotation  Data ........................................................................................................................................................59   Couch  Rotation  Data..........................................................................................................................................................62   ERROR  ANALYSIS .................................................................................................................................................................... 67   DISCUSSION .............................................................................................................................................................................. 70   Gantry  Rotation  Data  Discussion .................................................................................................................................70      v  

Couch  Rotation  Data  Discussion...................................................................................................................................71   Phantom  Characterization  Discussion ......................................................................................................................72   CONCLUSIONS..................................................................................................................................................... 73   FUTURE  CONSIDERATIONS............................................................................................................................ 75   APPENDICES........................................................................................................................................................ 77   APPENDIX  A1.    MATLAB  CODE:      CALLFUNC.M  ­  MAIN  FUNCTION  WITH  DISTANCE  CALCULATIONS. ......................... 77   APPENDIX  A2.  MATLAB  CODE:    READFILM.M  ­  FUNCTION  TO  READ  AND  CONTOUR  FILM  DATA. ............................... 85   APPENDIX  A3.  MATLAB  CODE:    RAYTRACE.M  ­  TRACING  A  BEAM  FROM  ENTRANCE  TO  EXIT  POINTS................... 95   REFERENCES .....................................................................................................................................................105   GLOSSARY ..........................................................................................................................................................107   INDEX ..................................................................................................................................................................109     

  

vi  

List  of  Figures  
· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·    Figure  1:  Radiosurgery  Treatment  Units:  (Left  to  Right)  the  Gamma  Knife,  Cyber  Knife,  and   Linear  Accelerator  (p.  3)   Figure  2:  Close  up  view  of  the  treatment  head  of  a  Gamma  Knife  Treatment  Unit  (p.  4)   Figure  3:  Cross  section  view  of  the  Gamma  Knife  Treatment  Unit    (p.  4)   Figure  4:  Diagram  of  the  first  linac  radiosurgery  system  of  Betti  and  Derechinsky    (p.  6)   Figure  5:  Beams  eye  view  of  a  micro-leaf  collimator    (p.  7)   Figure  6:  Accelerating  waveguide    (p.  8)   Figure  7:  Linac  components  (p.  9)   Figure  8:  Typical  Linac  design  configuration    (p.  10)   Figure  9:    Linac  schematic    (p.  10)   Figure  10:  Treatment  couch  movements    (p.  11)   Figure  11:    Patient-Frame  alignment    (p.  12)   Figure  12:  Integra  Radionics,  Inc.  CRW  Stereotactic  System    (p.  13)   Figure  13a:  SRS  lead  cones  used  to  collimate  the  radiation  and  the  Tray  which  houses  the   stacked  cones.    (p.  14)   Figure  13b:  Siemens  dual  energy  Linac  measured  for  isocentric  variation  at  O.C.C.    (p.  14)   Figure  14:    Stereotactic  treatment:  Linac  and  couch  motions    (p.  15)   Figure  15:  Radiation  entry  and  exit  beams  used  in  Stereotactic  Radiosurgery    (p.  16)   Figure  16:    Various  Stereotactic  Radiosurgery  treatment  technique  patterns    (p.  16)   Figure  17:  Odette  Cancer  Centre  gantry  rotation  convention  (p.  18)   Figure  18:  Odette  Cancer  Centre  treatment  couch  rotation  convention  (p.  19)   Figure  19:  The  dodecahedron  (p.  23)   Figure  20:    Matlab  dodecahedron  model  (p.  25)   Figure  21:    Dodecahedron  Single  face  placement  of  film  (p.  26)   Figure  22:    Phantom  face  showing  grooved  out  centre  to  allow  precise  placement  of   Gafchromic  film  (p.  27)   Figure  23:    Phantom  face  with  film  fixated  flush  against  the  bottom  left  corner  (p.  27)   Figure  24:  Gafchromic  radiation  exposures  for  various  doses  and  build-up  thicknesses  (p.29)   Figure  25:  Gafchromic  radiation  exposures  for  various  doses  and  build-up  thicknesses  (p.  29)   Figure  26:  Completed  Phantom  (p.  30)   Figure  27:  Software  Flow  Diagram  (p.  31)   Figure  28:  Vidar  16-bit  Flat  bed  scanner  (O.C.C.)  (p.  32)   Figure  29:  Matlab  dodecahedron  model  with  the  location  of  a  film  (p.  33)   Figure  30:  Un-rotated  film  Image  (p.  34)   Figure  31:  Rotated  Film  Image  (p.  34)   Figure  32:  Reference  corner  selection  (magnified)  (p.  35)   Figure  33:  Dose  response  curve  used  by  O.C.C.  for  Gafchromic  film  at  6MV  for  their  16-bit   Vidar  scanner  (p.  36)  

  

vii  

· · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·         

Figure  34:    Film  image  (Greyscale)  before  conversion  to  dose  (cGy)  (p.  37)   Figure  35a:    Film  image  converted  to  dose  (cGy)  (p.  37)   Figure  35b:    Plot  of  the  SRS  cone  research  Linac  profile  at  a  typical  clinical  depth.    (p.  38)   Figure  36:  Plotted  contours,  fit,  and  centre  data  (p.  40)   Figure  37:  Calculated  Radiation  spot  centres  as  a  function  of  film  dose  threshold  for  the   column  pixel  values  (p.  40)   Figure  38:  Calculated  Radiation  spot  centres  as  a  function  of  film  dose  threshold  for  the  row   pixel  values.  (p.  41)   Figure  39:    Contoured  film  from  a  set  of  Couch  rotation  measurements  (p.  42)   Figure  40:    Highly  elliptical  field  shape  due  to  high  incident  angle  (p.  43)   Figure  41:    Phantom  coordinate  System  convention  (p.  45)   Figure  42:    Dodecahedron  model  in  the  XY  phantom  coordinate  system  plane  (p.  45)   Figure  43:  Dodecahedron  model  in  the  XZ  phantom  coordinate  system  plane  (p.  46)   Figure  44:  Dodecahedron  model  in  the  YZ  phantom  coordinate  system  plane  (p.  46)   Figure  45:    Matlab  modeled  gantry  rotation  measurements  (p.  49)   Figure  46:  Matlab  modeled  gantry  rotation  measurements  magnified  to  the  isocentre  (p.  49)   Figure  47:  Phantom  shifted  and  un-shifted  data  in  the  XY  phantom  plane  (p.  51)   Figure  48:  Phantom  shifted  and  un-shifted  data  in  the  YZ  phantom  plane  (p.  52)   Figure  49:  Phantom  shifted  and  un-shifted  data  in  the  XZ  phantom  plane  (p.  52)   Figure  50:    Reference  Corner  Location  (p.  54)   Figure  51:    Different  film  orientation  data  for  the  same  radiation  beam  in  the  XY  plane  (p.  55)   Figure  52:  Different  film  orientation  data  for  the  same  radiation  beam  in  the  XZ  plane  (p.  56)   Figure  53:  Different  film  orientation  data  for  the  same  radiation  beam  in  the  YZ  plane  (p.  56)   Figure  54:    Modeled  gantry  rotation  Data  set  (p.  58)   Figure  55:  Modeled    gantry  rotation  data  magnified  to  the  isocentre  (p.  59)   Figure  56:  Minimum  distance  points  for  Gantry  rotation  in  the  XY  phantom  plane  (p.  60)   Figure  57:  Minimum  distance  points  for  Gantry  rotation  in  the  XZ  phantom  plane  (p.  60)   Figure  58:  Minimum  distance  points  for  Gantry  rotation  in  the  YZ  phantom  plane  (p.  61)   Figure  59:  Modeled  treatment  couch  rotation  Data  set  (p.  62)   Figure  60:  Modeled  treatment  couch  rotation  data  magnified  to  the  isocentre  (p.  63)   Figure  61:  Minimum  distance  points  for  Couch  rotation  in  the  XY  phantom  plane  (p.  64)   Figure  62:  Minimum  distance  points  for  Couch  rotation  in  the  XZ  phantom  plane  (p.  64)   Figure  63:  Minimum  distance  points  for  Couch  rotation  in  the  YZ  phantom  plane  (p.  65)  

  

viii  

List  of  Appendices  
   · · ·       A1  ­  Matlab  code:      callFunc.m  ­  Main  function  with  distance  calculations.   A2  ­  Matlab  code:    readFilm.m  ­  Function  to  read  and  contour  film  data.     A3  ­  Matlab  code:    rayTrace.m  ­  Tracing  a  beam  from  entrance  to  exit  points.     

  

ix  

  

x  

Introduction  
   The  use  of  ionizing  radiation  to  treat  cancer  has  been  used  successfully  for  over  100  years.    A   technique  which  uses  highly  focused  radiation  beams  called  stereotactic  radiosurgery  is  used  to   treat  intra  and  extra-cranial  tumours.    Due  to  damaging  effects  of  radiation  on  healthy  tissue,  strict   quality  assurance  methods  must  take  place  to  ensure  accurate  treatment.   Many  quality  assurance  phantoms  exist  to  ensure  the  devices  used  during  treatments  operate   properly.    A  quality  assurance  device  was  developed  and  partially  calibrated  in  this  research  to   localize  the  radiation  beams  used  in  Stereotactic  Radiosurgery.    Although  the  research  is  an  ongoing   project,  it  was  proven  that  localization  of  treatment  beams  used  for  radiosurgery  can  be  measured   with  very  high  accuracy  and  precision.   Once  a  complete  phantom  has  been  finished,  it  can  be  used  at  a  quality  assurance  tool  for  medical   physicists  to  improve  their  stereotactic  radiosurgery  treatments.     

  

1  

  

2  

Stereotactic  Radiosurgery  
   External  Beam  Radiotherapy  (EBRT)  is  the  treatment  of  cancer  using  doses  of  ionizing  radiation   divided  into  multiple  treatments  or  fractions  delivered  from  outside  the  human  body.    A  known   amount  of  radiation  is  delivered  from  a  linear  accelerator  to  the  cancer  while  minimizing  the   radiation  dose  to  surrounding  healthy  tissue.    This  form  of  treatment  has  proven  to  be  very   successful  and  its  benefit  to  society  incalculable.    EBRT  can  be  divided  into  several  different   treatment  types    depending  on  the  type  of  lesion  and  it's  location  in  the  patient.    One  such  type  of   EBRT  is  called  Stereotactic  Radiosurgery  (SRS).   Stereotactic  Radiosurgery  is  the  treatment  of  cancer  and  other  lesions  using  a  single  dose  of  high   energy  photons  highly  focused  at  an  immobilized  known  point.    Typically,  SRS  is  used  to  treat  small   intracranial  lesions  (<4cm3)  in  a  single  session,  however  other  similar  special  techniques  including   extra-cranial  treatments  and  fractioned  regimens  also  use  highly  focused  radiation  beams.    The   word  `Stereotactic'  come  from  the  Latin  words  Stereo  which  means  "three  dimensional  or  solid"   and  Tactic  which  means  to  "touch".        This  refers  to  the  stereotactic  frame  which  is  fixated  to  the   patient  and  is  used  to  immobilize  the  patient  during  treatment.    Typical  abnormalities  that  are   treated  with  SRS  are  single  metastasis,  solitary  primary  brain  tumours,  arteriovenous   malformations  and  benign  conditions    or  tumours,  such  as  pituitary  adenoma  and  acoustic   neuromos  (Schell,  1995).    SRS  is  essentially  a  two  step  process  involving  1)  definition  of  the  lesion   including  it's  shape  and  location,  and  2)  creation  and  delivery  of  the  treatment  plan.      Dosimetric   advantages  of  SRS  over  conventional  radiotherapy  are  the  steep  dose  drop  off  outside  the  treated   area  (sparing  healthy  tissue)  and  the  ability  to  escalate  the  dose  within  the  lesion.    This  dose   distribution  is  achieved  by  focusing  multiple  non-coplanar  collimated  radiation  beams  at  a  common   central  point.    Although  there  are  dedicated  machines  that  can  only  treat  SRS,  such  as  the  Gamma- Knife  and  the  Cyber-Knife  (explained  below),  it  is  common  in  cancer  centres  to  use  a  modified   Linear  Accelerator  (Linac)  which  has  the  ability  to  meet  the  tight  tolerances  used  in  SRS.    

   Stereotactic  Radiosurgery  History  
The  treatment  of  cancerous  tumours  using  prescribed  doses  of  ionizing  radiation  has  been  in  use   for  over  100  years.    Treatments  in  the  early  1900's  involved  directing  a  collimated  beam  of  ionizing   radiation  from  a  radioactive  isotope  to  a  predefined  area  around  the  tumour.      The  use  of  a   radioactive  isotope  for  treatment  however  had  serious  implications  with  radiation  safety  and  also   with  the  lengthening  of  treatment  times  due  to  isotope  decay.    However,  technical  developments  at   Universities  in  high  energy  physics  led  to  the  development  of  particle  accelerators  in  the  1950's.  

  

3  

  
Figure  1:  Radiosurgery  Treatment  Units:  the  Gamma  Knife,  Cyber  Knife,  and  Linear  Accelerator.    Adapted  from:   http://www.siddiqimd.com/technology/cyberknife.htm  with  slight  modification.  

The  development  of  Stereotactic  Radiosurgery  is  seen  as  a  combination  of  efforts  by   Neurosurgeons,  medical  physicists,  and  engineers  over  the  past  50  years  (Schell,  1995).    Figure  1   shows  three  treatment  units  currently  in  use  today  which  were  developed  over  this  time  period.     The  Two  units  from  the  left,  the  Gamma  Knife  Unit  and  the  Cyber  Knife  Unit  will  be  described   briefly  below  while  the  Linear  Accelerator  on  the  right  will  be  described  in  detail.     Stereotactic  Radiosurgery  was  first  proposed  by  the  Swedish  neurosurgeon  named  Lars  Leksell.       Although  the  stereotactic  head  frame  had  already  been  developed,  Lars  Leksell  was  the  first  to  use  a   stereotactic  head  frame  to  immobilize  the  patient  for  radiation  treatment.      He  first  used  250  kV   ortho-voltage  x-rays  but  soon  realized  that  much  higher  energies  were  needed  to  get  the  necessary   doses  for  deeper  lesions.    Ortho-voltage  x-rays  are  x-rays  that  are  produced  with  energies  in  the   200-500  keV  range.    Due  to  this  energy,  the  x-rays  are  produced  preferentially  at  90  degrees  to  the   incoming  electron  beam.    Along  with  collaborators  at  the  University  of  Uppsala  in  Sweden,  Lars   Leksell  considered  better  treatment  modalities  including  proton  therapy  but  ultimately  decided   that  a  Co-60  source  would  be  best  for  these  treatments.    Similar  early  efforts  were  directed  at  such   diverse  indications  as  chronic  pain,  epilepsy,  movement  disorders,  and  psychiatric  disorders   (Solberg,  1998).    Linear  accelerators  at  the  time  did  not  have  the  required  precision  or  accuracy   needed  for  radiosurgery  (Benedict,  2008),  therefore  his  group  went  on  to  develop  the  Gamma  Unit.     Developed  in  1967,  this  treatment  unit  consisted  of  179  cobalt  sources,  distributed  over  a   hemispheric  pattern  inside  a  shielded  helmet  (Podgorsak,  1998).    To  get  a  desired  dose   distribution,  individual  cobalt  sources  had  the  ability  to  be  plugged  or  unplugged.     Figure  1  (left  image)  and  Figure  2  show  a  photograph  of  a  Gamma  Knife  Unit  from  Elekta,  Inc.     (Gamma  Knife  is  the  commercial  name  of  the  Gamma  Unit)  and  a  close  up  view  of  the  helmet  area   respectively.        From  these  two  figures  it  can  be  seen  how  the  patient  is  placed  in  the  unit  as  well  as   how  the  patients  head  is  fixated  with  respect  to  the  shielded  helmet.    Figure  3  depicts  a  cross   sectional  view  of  the  Unit  showing  a  simplified  schematic  of  how  the  Gamma  Unit  works.    The   Gamma  Knife  Unit  has  proved  to  be  very  effective  and  continues  to  be  used  in  cancer  centres  today.     However,  their  high  costs  and  inability  to  allow  imaging  before  treatment  led  physicians  and   physicists  to  the  development  of  alternative  techniques  in  order  to  promote  a  wider  application  of   SRS  in  other  cancer  centres  (Pike,  1989).    Linear  Accelerators  were  therefore  looked  at  as  a  viable  

  

4  

option  and  over  the  next  ten  years  papers  were  published  by  multiple  researchers  on  the  use  of   linear  accelerators  for  radiosurgery  (Benedict,  2008).    

Isocentre  

  
Figure  2:  Close  up  view  of  the  treatment  head  of  a  Gamma  Knife  Treatment  Unit.    Adapted  from   http://www.elekta.com/healthcare_international_gamma_knife_surgery.php  with  slight  modification.  

  

Isocentre     
Figure  3:  Cross  section  view  of  the  Gamma  Knife  Treatment  Unit.    Adapted  from   http://www.aafp.org/afp/2008/1201/p1254.html  with  slight  modification.  

  

5  

The  development  of  the  first  isocentric  Cobalt  machine  at  Princess  Margaret  Hospital  in  Toronto,   Canada  was  followed  by  the  development  of  the  first  isocentric  linac  in  1960  by  Varian.    By  the  time   the  pioneering  works  above  were  published,  linear  accelerators  as  radiosurgery  tools  were   commonly  perceived  as  technologically  inferior  compared  to  the  Gamma  Knife  in  their  ability  to   deliver  highly  focused  precision  therapy  by  the  neurosurgery  community  (Benedict,  2008).    The   mechanical  stability  of  isocentric  Linacs  in  regards  to  their  gantry  and  patient  rotation  mechanisms   were  and  continue  to  be  an  issue  for  SRS.      The  Gamma  Unit  on  the  other  hand  had  no  moving  parts,   and  therefore  could  deliver  dose  accuracy  to  the  patient  within  a  fraction  of  a  millimetre   (Podgorsak,  1989).    Work  began  by  Medical  Physicists  to  assess  the  treatment  delivery  accuracies   of  Linacs  treating  SRS.  Medical  physicist  Wendell  Lutz  and  his  physician  colleagues  at  the  Joint   Center  for  Radiation  Therapy,  Boston  went  on  to  develop  the  Winston-Lutz  test  to  check  gantry   rotation  stability  and  a  floor  stand  to  rigidly  support  the  patient's  head.    Figure  4  shows  a  depiction   of  the  first  Linac  stereotactic  radiosurgical  system.    Further  improvements  to  the  floor  stand  at  the   University  of  Florida  by  neurosurgeon  William  Friedman  and  physicist  Frank  Bova  led  to  improved   mechanical  alignment  of  linac  system  to  within  0.3  mm,  similar  to  those  reported  for  Gamma  Knife   systems  (Benedict,  2008).    This,  coupled  with  advances  in  imaging  modalities,  including  CT  and   MRI,  and  greater  computing  speeds  in  the  1980's  let  SRS  gain  widespread  use  in  radiosurgical   programs.     

  

6  

Early  SRS  treatment  units  used  circular  collimators  of  different  diameters  located  at  a  specific   distance  from  the  machine's  target  to  shape  the  radiation  beam.    However,  with  the  expanding  role   of  SRS  in  cancer  treatment,  it  became  evident  that  small  circular  fields  would  not  suffice  for  larger  

   Figure  4:  Diagram  of  the  first  linac  radiosurgery  system  of   Betti  and  Derechinsky.    Adapted  from  ref.  Benedict,  2008.    

tumours  and  tumours  located  next  to  radiosensitive  organs.      This  led  to  the  development  of   conformal  stereotactic  radiosurgery  (CSRS)  by  means  of  dynamic  field  shaping.    First  developed  by   Leavitt  in  1989,  this  dynamic  collimation  system  consisted  of  a  series  of  circular  collimators  of   increasing  diameter  chosen  to  circumscribe  the  maximum  projection  of  the  target  volume  during   the  arc,  supplemented  by  four  independent  rectangular  vanes  having  both  translational  and   rotational  motion  to  "trim"  the  circular  radiation  field  to  a  trapezoidal  shape  more  closely  following   the  shape  of  the  target  projection  (Benedict,  2008).      

  

7  

Micro-MLC  Beams   eye  view  

  
Figure  5:  Beams  eye  view  of  a  micro-leaf  collimator.      Adapted  from   http://www.jacmp.org/index.php/jacmp/article/viewArticle/2802/1438  with  slight  modification.  

Following  this,  the  companies  BrainLAB  and  Varian  partnered  together  to  create  a  micro-multi  leaf   collimator  (MLC)  collimator  with  shaping  leaves  half  the  thickness  of  standard  leaves.    The  micro   MLC,  shown  in  Figure  5  uses  a  leaf  thickness  of  5mm  as  opposed  to  the  1cm  standard  used  for   conventional  radiotherapy  giving  the  leaves  the  ability  to  conform  to  a  higher  degree  to  the  tumour.     Papers  have  shown  that  Conformal  SRS  would  improve  the  dose  delivery  in  approximately  40-70%   of  the  SRS  caseload  and  reduce  the  treatment  time  over  non-conformal  SRS  treating  at  two  different   locations  for  irregularly  shaped  lesions  (Schell,  1995).   It  is  known  that    fractionation  (dividing  the  full  treatment  into  partial  treatments  or  fractions)   during  radiotherapy  enhances  the  tumouricidal  effects  while  minimizing  normal  tissue  damage.     Although  Lars  Leksell  had  intended  for  radiosurgery  to  be  treated  in  a  single  session,  research  had   been  done  by  multiple  scientists  using  fractionation  during  stereotactic  radiosurgical  treatments.   With  the  introduction  of  fractionation  to  SRS,  also  called  Stereotactic  Radiotherapy  (SRT),  came   issues  with  accurate  patient  placement  with  respect  to  the  radiation  source  on  a  day  to  day  basis.     Early  head  frames  were  fixated  to  the  patients  skull  with  pins  under  locate  anaesthesia.    These   "hard  docking  frames"  frames  evolved  into  "soft  docking"  frames  that  could  reproduce  the  patient   setup  using  bite  blocks,  ear  plugs,  and  nasal  supports.      Other  frames  that  were  developed  include  a   hybrid  between  the  hard  and  soft  docking  frames  that  used  implanted  titanium  screws  to  attach  a   removable  frame  and  thermoplastic  custom-fitted  face  masks  which  were  placed  over  the  patient's   face  and  attached  to  the  frame.    Current  research  investigating  frame-less  radiotherapy  uses  real   time  monitoring  of  optically  guided  system  detecting  infrared  light  emitting  diodes  (IRLEDs)   attached  to  a  custom  bite  plate  (Tome,  2000).    For  SRT,  investigations  of  the  overall  treatment   accuracy  have  been  published  by  a  number  of  authors  and  continue  to  be  published.      SRT,  while  not   commonly  used  in  cancer  centres,  continues  to  be  researched  for  future  development.   The  future  of  SRS  will  involve  attaining  better  accuracy  with  development  going  into  image  guided   radiosurgery  for  frameless  radiosurgery,  and  improvements  with  patient  positioning  using  motion   tracking.    Furthermore,  more  research  is  needed  in  areas  such  as  small  field  dosimetry,  monte-carlo   calculations,  and  new  energy  sources  to  keep  SRS  at  the  cutting  edge  of  technology.           

  

8  

  

Medical  Linear  Accelerators  
   Medical  Linear  Accelerators  or  Linacs  are  cyclic  accelerators  isocentrically  mounted  which   accelerate  electrons  to  high  energies  in  the  4MeV  to  25MeV  range.    The  Linacs  use  a  gantry  system   which  rotates  about  a  common  axis  thus  aiming  the  radiation  at  a  point  called  the  isocentre.     Electrons  are  produced  from  an  electron  gun  are  then  accelerated  across  an  evacuated  waveguide   by  RF  fields.    An  accelerating  waveguide  is  an  evacuated  or  gas-filled  metallic  structures  of   rectangular  or  circular  cross-sections  used  in  transmission  of  microwaves.    The  simplest  kind  of   accelerating  waveguide  is  obtained  from  a  cylindrical  uniform  waveguide  by  adding  a  series  of   disks  (irises)  with  circular  holes  at  the  center,  placed  at  equal  distances  along  the  tube.  These  disks   divide  the  waveguide  into  a  series  of  cylindrical  cavities  that  form  the  basic  structure  of  the   accelerating  waveguide  in  a  linac  (Podgorsak,  2003).  Figure  6  shows  a  diagram  of  an  accelerating   waveguide.          Linac  Waveguide  

   Figure  6:  Accelerating  waveguide.    Adapted  from  http://www.britannica.com  with  slight  modification.  

Although  the  electrons  are  accelerated  in  a  straight  line,  these  accelerators  are  called  cyclic  due  to   the  electrons  movement  across  the  waveguide  using  alternating  potential  differences  (Podgorsak,   2003).    Therapeutic  photon  beams  are  created  when  the  accelerated  electrons  collide  with  a  high  Z   material  target,  called  the  X-ray  source,  creating  forward  peaked  bremsstrahlung  radiation.       The  progression  of  Linacs  over  the  past  40  years  can  be  divided  in  to  5  distinct  generations  and  has   been  characterized  by  the  increase  in  energies  of  photons  and  electrons  produced  by  the  machines   and  also  by  the  increase  in  capability.      Early  accelerators  provided  4-6MV  photons  while  used  a   fixed  flattening  filter,  external  wedges,  and  symmetric  jaws  for  radiation  dose  control;  and  a  single   transmission  ionisation  chamber  for  dose  monitoring.        The  next  generation  of  Linacs  in  the  10- 15MV  range  also  had  the  capability  to  produce  electron  beams  using  scattering  foils  and  moveable   flattening  filter.    These  Linacs  also  used  independent  dual  ionisation  chambers  for  more  reliable   dose  monitoring.        The  third  generation  of  Linacs  allowed  for  multiple  energies  by  use  of  an   achromatic  bending  magnet  and  added  features  such  as  asymmetric  jaws  and  motorized  wedges.          9  

Fourth  generation  Linacs  saw  great  improvements  as  computing  power  had  increased.    Further   dose  shaping  features,  including  multi  leaf  collimators  and  dynamic  wedges,  were  added  as  well  as   the  introduction  of  portal  imaging.    The  final  generation  of  Linacs  again  saw  developments  in  dose   shaping  with  the  use  of  intensity  modulation  with  multi-leaf  collimator  and  full  dynamic  conformal   dose  delivery  with  intensity  modulated  beams  produced  with  a  multi-leaf  collimator  (Podgorsak,   2003).   The  main  components  of  a  Linac  are  as  follows:   · · · · · gantry   gantry  stand  or  support   modulator  cabinet   patient  support  assembly,  i.e.,  treatment   couch   control  console  

Waveguide  
Figure  7:  Linac  components.    Adapted  from   http://www.cerebromente.org.br/n02/tecnol ogia/radiocirurg_i.htm  with  slight   modification.  

The  components  in  bold  will  be  described  below  as   they  pertain  to  the  outcome  of  this  research.    Figure  7,   Figure  8,  and  Figure  9  respectively  show  a  typical   Linac  design  configuration  and  design  schematic.  

  

10  

Bending   Magnet  

    
Figure  8:  Typical  Linac  design  configuration.    Adapted  from   http://www.adelaideradiotherapycentre.com.au/physics_of_rt.html  with  slight  modification.  

Beam  collimation  

!

&%&%! '()*+,! -.,/*+0123*.,)! /.1! *).-(,31*-! 4(5*-26! 6*,2-)%! 728! 9312*+:3;3:1.0+:! <(24! ,=! 3:(! (6(-31.,! +0,! 2,5! 321+(3! 21(! >(142,(,36?! (4<(55(5! *,3.! 3:(! 2--(6(123*,+! @2A(; =! 42-:*,(! >1.50-()! .,6?! B;12?)! @*3:! (,(1+*()! ./! C;D! EF=! 3:(! 1/;>.@(1! +(,(123.1! *)! (5!*,!3:(!+2,31?%!7<8!G--(6(123*,+!@2A(;+0*5(!*)!*,!3:(!+2,31?!>21266(6!3.!3:(!*).-(,3(1! (6(-31.,)! 21(! <1.0+:3! 3.! 3:(! 4.A2<6(! 321+(3! 3:1.0+:! 2! <(24! 312,)>.13! )?)3(4=! 3:(! 1/; !+(,(123.1!*)!6.-23(5!*,!3:(!+2,31?!)32,5=!42-:*,(!-2,!>1.50-(!4(+2A.632+(!B;12?)!2)! 2)! (6(-31.,)%! 7-8! G--(6(123*,+! @2A(;+0*5(! 2,5! 1/;>.@(1! +(,(123.1! 21(! 6.-23(5! *,! 3:(! ?!)32,5=!(6(-31.,)!21(!<1.0+:3!3.!3:(!4.A2<6(!321+(3!3:1.0+:!2!<(24!312,)>.13!)?)3(4=! ,(!-2,!>1.50-(!4(+2A.632+(!B;12?)!2)!@(66!2)!(6(-31.,)%!
  

  

Figure  9:    Linac  schematic.    Adapted  from  http://its.uvm.edu/medtech/module.html  with  slight  modification.  

The  gantry  contains  all  the  components  seen  in  Figure  9,  however,  it  is  the  gantry  head  which   produces  and  shapes  the  radiation  beam.    The  Linac  head  or  gantry  head  is  composed  of  several   components  that  allow  the  shaping  and  monitoring  of  electron  and  photon  beams.    Photon  beams   are  created  using  a  target  and  flattening  filter  combination  while  electron  beams  use  a  scattering   foil  and  special  applicator  for  beam  collimation.      This  assembly  is  usually  mounted  on  a  pair  of  

""#!

  

11  

sliding  rails  and  can  have  multiple  targets  and  scattering  foils.    The  collimation  system  that  is  used   to  shape  the  radiation  beam  to  a  maximum  of  40x40cm2  at  the  Linac  isocentre  contains  a  primary   collimator,  secondary  moveable  collimator,  and  in  addition  to  this  a  multi-leaf  collimator  (MLC).      It   must  also  be  noted  here  that  there  are  actually  two  isocentres--the  mechanical  and  the  x-ray   isocentres.    The  mechanical  isocentre  of  a  `perfect'  linac  is  defined  as  the  point  in  space  where  the   gantry  rotation  axis  and  the  beam  collimator  axis  intersect.  The  x-ray  isocentre  is  the  point  in  space   where  the  gantry  rotation  axis  and  the  central  x-ray  of  the  beam  intersect  (Arjomandy,  2000).    The   MLC's  are  now  commonly  used  to  further  shape  the  radiation  beam  to  allow  for  a  higher  degree  of   dose  conformality  allowing  newer  techniques  such  as  intensity  modulated  radiation  therapy   (IMRT)  to  be  used  in  cancer  centres.    IMRT  is  the  use  of  small  beams  or  `beamlets'  which  can  be   varied  in  intensity  to  change  the  radiation  field  many  times  during  a  treatment.    In  addition  to  the   collimation,  the  head  of  the  Linac  also  holds  dual  independent  ionization  chambers  to  monitor  the   radiation  emitted  from  the  machine.    The  ionization  chambers  are  also  used  to  monitor  the  axial   and  transverse  off-axis  ionizations  to  ensure  beam  uniformity.      The  Linac  can  also  produce  a  visible   light  field  projected  from  the  direction  of  the  source  which  matches  the  radiation  field.          The  patient  support  assembly  or  treatment  couch  is  used  to  position  the  patient  at  the  desired   location  for  treatment.      Figures  7  and  10  show  the  orientation  of  the  couch  relative  to  the  gantry   and  its  range  of  motion.    The  couch  is  able  to  rotate  and  shift  in  all  the  directions  indicated  in  Figure   10.                      Couch  movement   controls  
Figure  10:  Treatment  couch  movements.    Adapted  from   http://blog.elekta.com/tag/hexapod/  with  slight  modification.  

        

        

  

12  

Modified  Linear  Accelerator  for  Stereotactic  Radiosurgery  
   A  modified  Linear  accelerator  for  SRS  must  have  accurate  and  stable  mechanical  alignment,   excellent  beam  stability  during  gantry  rotation,  and  suitable  energy  range.  It  is  modified  for   stereotactic  radiosurgery  by  mounting  an  auxiliary  collimator  to  the  collimator  face  plate.  This   auxiliary  collimator  minimizes  radiation  penumbra  and  allows  collimator  inserts  to  produce   circular  radiation  beams  (Tsai,  1991).   Linear  accelerators  must  meet  more  stringent  standards  due  to  the  high  precision  required  of  SRS.   The  basic  requirements  for  SRS  are:  (1)  accurate  localization,  (2)  mechanical  precision,  (3)  accurate   and  optimal  dose  distribution,  and  (4)  patient  safety  (Schell,  1995).         For  accurate  localization,  the  stereotactic  localization  techniques  shall  be  able  to  determine  the   coordinates  of  a  well-defined  object  (pointer  or  a  bail  bearing  in  a  phantom)  in  the  frame   coordinate  system  to  within  1  mm  for  angiography,  and  2  mm  for  CT  and  MRI.  A  localization  test  is   described  in  the  System  Verification  Test  section  (Schell,  1995).      

Isocentre  

  
Figure  11:    Patient-Frame  alignment.    Adapted  from  http://www.stereotaxybymidco.com/photon.html  with  slight   modification.  

   The  Mechanical  precision  of  a  Linac  must  be  achievable  and  maintained  in  order  to  allow  SRS.    The   coordinates  of  the  patient-frame  system  must  be  aligned  with  the  Linac  coordinate  system.    This   allows  the  treatment  target,  which  is  aligned  to  the  patient  frame  to  be  located  at  the  isocentre  of   the  machine,  Figure  11.   The  overall  stability  of  the  Linac  is  measured  by  examining  the  rotation  axis  of  the  gantry,  couch,   and  collimator  and  how  well  they  coincide.    It  is  recommended  they  must  coincide  to  within  a  1mm   radius  sphere  (Schell,  1995).      

  

13  

Integra  Radionics  CRW   Frame  

  

  
Figure  12:  Integra  Radionics,  Inc.  CRW  Stereotactic  System.    Adapted   from  www.radionics.com  with  slight  modification.  

In  order  to  immobilize  the  patient,  a  frame  system  must  be  used  and  this  frame  system  must  be   rigidly  coupled  to  the  Linac.    Stereotactic  frames  are  most  commonly  used  to  immobilize  the   patients  head  for  intra-cranial  treatment,  although  they  also  can  be  used  to  immobilize  other   treatment  areas.    The  frames  have  metal  pins  which  are  fixated  to  known  positions  in  the  patients   skull.    In  addition  to  this,  a  localization  frame  (with  fiducial  rods)  is  used  at  CT  to  correlate  frame   coordinate  position  with  anatomy.    Most  SRS  applications  use  one  of  five  stereotactic  frames:   Brown-Roberts-Wells,  Tipal,  Leksell,  Gill-Thomas-Cosman,  or  Riechert/  Mundinger  (Schell,  1995).     Although  each  frame  has  a  different  shape  and  characteristics,  all  frames  serve  the  same  function:   to  accurately  guide  ionizing  radiation  beams  to  a  target  in  the  brain.    Figure  12    shows  the  CRW   stereotactic  frame  made  by  Integra  Radionics,  Inc.   The  collimation  used  for  SRS  treatments  must  shape  the  radiation  to  provide  the  high  dose   conformality  required  by  SRS  and  must  be  aligned  properly  as  the  precision  of  the  treatment   depends  heavily  on  it  (Schell,  1995).    The  alignment  of  the  beam  collimation  used  for  SRS  typically   uses  prefabricated  circular  lead  cones  stacked  on  top  of  each  other.    These  circular  cones  of   different  diameters  ranging  from  5.0mm  to  40.0mm  are  fitted  into  a  linear  accelerator  for   stereotactic  radiosurgery  treatment.    Ideally,  cones  give  the  best  dose  uniformity  for  small  spherical   lesions  however  this  can  also  be  achieved  using  multiple  isocentres  for  irregularly  shaped  lesions.     Figures  13a  and  13b  show  the  treatment  cones  used  at  the  Odette  Cancer  Centre  and  the  Linac   which  was  investigated  in  this  thesis.        

  

14  

  
Figure  13a:  SRS  lead  cones  used  to  collimate  the  radiation  and  the  Tray  which  houses  the  stacked  cones.  

  
Figure  13b:  Siemens  dual  energy  Linac  measured  for  isocentric  variation  at  O.C.C.  

   In  order  to  properly  position  the  frame  and  thus  the  patient  at  the  intended  treatment  position,  a   fixed  frame  of  reference  is  necessary.    This  is  achieved  through  fixed  lasers  projected  at  the   isocentre  located  on  the  treatment  room  walls.    These  are  calibrated  to  within  a  specific  tolerance   using  a  mechanical  isocentre  pointer  fixed  to  either  the  couch  base  plate  or  to  the  Linac  accessory   holder.    The  lasers  project  a  line  across  all  three  principle  planes  originating  at  the  isocentre.         

  

15  

   Stereotactic  Radiosurgery  Techniques  
   Stereotactic  Radiosurgical  techniques  can  be  delivered  from  modified  medical  linear  accelerators  or   Co-60  sources  (such  as  the  gamma  knife  unit).  While  the  Gamma-Knife  Unit  uses  the  intersection  of   individual  collimated  Co-60  sources,  a  Linac  uses  a  combination  of  gantry  and  treatment  couch   rotations  to  produce  the  desired  dose  distribution.      There  are  many  different  techniques  employed   at  various  cancer  centres,  each  having  advantages  and  disadvantages,  however  the  resulting  dose   distribution  should  meet  the  dosimetric  requirements  for  each  treatment.       Narrowly  collimated  radiation  beams  are  delivered  from  multiple  entry  locations  focused  at  the   machine  isocentre.    Parallel  and  opposing  beams  are  avoided  to  limit  the  dose  to  surrounding   healthy  tissue.     

Gantry   Rotation  

Couch   Rotation  

  
Figure  14:    Stereotactic  treatment:  Linac  and  couch  motions.    Adapted  from   http://www.gammaknifeminnesota.com/stereotacticradiosurgery.html  with  slight  modification.    

   This  allows  for  a  lethal  dose  of  radiation  to  the  target  while  maintaining  a  sub-lethal  dose  for   surrounding  healthy  tissue.    For  linear  accelerator  based  radiosurgery  this  is  accomplished  by   rotation  of  the  gantry  and  treatment  couch  (turntable)  as  seen  in  Figure  14.    

  

16  

CyberKnife  Treatment   Simulation  

FIGURE 1. The cross-sectional view of the gamma knife irradiator. The 201 sources are focused at one locus. The stereotactic frame positions the target    at the intersection of the beams. (Wu et al., 1990.)
Figure  15:  Radiation  entry  and  exit  beams  used  by  the  CyberKnife  Stereotactic  Radiosurgery  Unit.    Adapted  from   http://www.chscyberknife.com/FRP03.shtml  with  slight  modification.  

  

FIGURE 2. Beam-entry patterns on a patient's skull for various radiosurgical Figure  16:    Various   Stereotactic  Radiosurgery   treatment  for technique   patterns.    Adapted   from   Ref.  Schell,  1995.   techniques. (Podgorsak, E.B. Physics radiosurgery with linear accelerators, in `Stereotactic Radiosurgery", Chapter 2, pp. 9-34,    Neurosurgery Clinics of North America, Vol. 3, edited by D. Lunsford, W.B. Saunders Company, Philadelphia, PA, 1992.)

  

  

9

17  

Each  arc  the  gantry  completes  is  repeated  at  multiple  treatment  couch  angles  creating  multiple   entry  and  exit  points  to  the  target.    Figure  15  shows  the  entry  and  exit  beams  for  the  Cyber-knife   Unit.    Figures  16b  and  16c  show  the  gamma  knife  unit  pattern;    Figure  16a  shows  a  single  360°  arc   in  the  transverse  plane  of  the  patient;    Figure  16e  shows  a  four  non-coplanar  arc  geometry;  and   Figure  16g  depicts  the  dynamic  radiosurgery  approach.  These  four  approaches  produce  isodose   surfaces  with  shapes  that  are  unique  to  the  SRS.  The  dose-volume  histograms  have  been  found  to   be  approximately  equivalent  among  the  four  approaches  (Schell,  1995).    Previous  to  advancements   in  treatment  planning  systems  in  the  1980's,  standard  gantry  arc  angles  and  couch  angles  were   used.    However,  now  it  is  common  practice  in  cancer  centres  to  tailor  the  dose  distribution  such   that  critical  structures  can  be  avoided  and  the  prescribed  dose  is  properly  delivered  to  the  target.     The  gamma  unit  accomplishes  this  by  plugging  or  unplugging  individual  radiation  sources  while  arc   geometries  can  be  changed  with  a  linear  accelerator.    It  is  also  common  for  both  accelerators  and   gamma-units  to  use  multiple  isocentres  to  alter  the  dose  distribution  and  allow  for  treatments  of   irregularly  shaped  lesions.    Circular  collimators  are  used  as  the  dose  distribution  produced  over  a   hemisphere  experiences  a  much  sharper  drop  off  when  compared  to  standard  rectangular  shaped   accelerator  collimators  (Schell,  1995).    The  10  cm.  thick  cones  are  placed  23  cm.  from  the  isocentre   and  must  coincide  with  the  radiation  source  and  isocentre.       Two  different  treatment  techniques  are  used  at  the  Odette  Cancer  Centre  (O.C.C.)  in  Toronto,   Canada.    These  techniques  are  accomplished  using  a  couch  mounted  frame  and  a  Siemens  dual   energy  Primus  linear  accelerator  (6MV  and  10MV).    The  patient  is  placed  on  the  treatment  couch  in   the  supine  position  (face  up)  where  the  frame  is  rigidly  attached  on  the  end  of  the  couch  such  that   the  patient's  head  is  held  in  the  frame  over  the  end  of  the  couch.    Once  the  patient  in  aligned  using   treatment  room  wall  mounted  lasers,  the  couch  lateral  and  longitudinal  movements  are  restricted   and  the  gantry  and  couch  are  moved  to  their  starting  position.    Treatments  using  cone  sizes  smaller   than  3cm  diameter  employ  5  couch  angles  and  gantry  arcs  of  60  degrees.    Treatments  using  cone   sizes  larger  than  3cm  diameter  uses  4  couch  angles  and  75  degree  gantry  arcs.   Small  Cone  Size  Technique   Couch:  60°   Couch:  30°   Couch:  0°   Couch:  -30°   Couch:  -60°        The  collimator  settings  used  for  treatment  employs  a  square  field  size  of  4cm  x  4cm  to  allow  for   different  cone  sizes  to  be  used  while  attenuating  the  beam  around  the  cone  field  as  much  as   possible.    The  collimator  angle  is  rotated  to  90  degrees  and  is  kept  stationary  during  treatment.     The  collimator  is  rotated  to  90  degrees  as  this  is  the  angle  at  which  the  cone  (firmly  attached  to  the      18   Gantry:-150°  to  -90°   Gantry:  -90°  to  -30°   Gantry:  -30°  to  -30°   Gantry:    30°  to  90°   Gantry:  90°  to  -150°   Large  Cone  Size  Technique   Couch:  -56°   Couch:  -22°   Couch:  22°   Couch:  56°      Gantry:-150°  to  -75°   Gantry:  -75°  to  -0°   Gantry:  0°  to  75°   Gantry:    75  to  150°     

gantry  head  in  a  locked  accessory  tray)  would  not  fall  out  due  to  gravity  and  any  unforeseen   mechanical  failures  in  the  locked  accessory  tray.     The  rotation  coordinate  system  used  for  the  gantry  and  treatment  couch  at  O.C.C.  can  be  found  in   Figures  17  and  18  respectively.    For  all  the  data  presented  here  which  shows  gantry  and  couch   treatment  angles,  these  figures  define  the  angle  convention  to  be  used.    

+ve

Gantry 0° Gantry 180°

  
Figure  17:  Odette  Cancer  Centre  gantry  rotation  convention.    Adapted  from  (top)   http://www.medwow.com/used-linear-accelerator/siemens/mevatron-primus/124178192.item    

     

  

19  

+ve

-ve

  
Figure  18:  Odette  Cancer  Centre  treatment  couch  rotation  convention.    Adapted  from  http://neevon.com/  with   slight  modification.     

Accuracy  of  Stereotactic  Radiosurgery  
  

The  accuracy  of  a  stereotactic  radiosurgery  treatment  depends  ultimately  on  the  technological   limitations  of  the  treatment  unit  itself  and  the  stereotactic  frame.    It  also  depends  on  the  knowledge   of  the  treatment  target  and  it's  radiological  response  to  ionizing  radiation.    The  uncertainty  in  dose   delivery  is  a  result  of  two  processes:  (1)  target  definition  and  (2)  the  machine  tolerances  of  the  dose   delivery  apparatus  (including  the  frame).  A  reasonable  perspective  on  accuracy  requirements  for   SRS  should  include  (1)  the  current  accuracy  in  external  beam  therapy;  (2)  the  net  result  of   uncertainties  in  SRS;  (3)  the  resolution  of  the  target  image;  and  (4)  the  relationship  of  the  image  to   the  treatment  target.  Friedman  and  Bova's  (1989)  study,  (as  cited  in  Schell,  1995)  reported   uncertainties  used  in  two  SRS  techniques  in  target  alignment  with  the  beam  focus  of  0.2-0.4  mm  in   patient  position,  whereas  the  linac  setup  uncertainty  was  1.0  mm.   The  definition  of  a  tumour  through  imaging  depends  on  the  resolution  of  the  image  and  the   relationship  of  the  macroscopic  image  with  the  microscopic  extent  of  the  disease  (Schell,  1995).    CT   image  pixel  dimensions  are  typically  0.7mm  by  0.7mm,  and  the  separation  between  slices  is  not  less   than  1.0mm.    The  mechanical  position  uncertainty  of  the  stereotactic  frame  is  0.6mm.    The  gantry   rotation  axis,  collimator  rotation  axis,  and  couch  rotation  axis  should  coincide  within  a  sphere  of      20  

1mm  radius  (Schell,  1995).    The  net  uncertainty  in  target  localization  and  treatment  delivery  is  less   than  2.0mm  for  an  AVM  and  2.4mm  for  a  tumour  (Schell,  1995).    The  uncertainty  in  dose  delivery   by  any  SRS  treatment  system  are  significantly  less  than  the  clinical  knowledge  of  the  location  and   extent  of  the  tumour  as  determined  by  CT  or  MRI  (Schell,  1995).    Although  the  uncertainties   associated  with  treatment  delivery  are  less  than  those  associated  with  the  imaging,  the  positional   accuracy  of  the  treatment  should  be  known  during  the  planning  process.      

   Quality  Assurance  
   Stereotactic  Radiosurgery  allows  a  highly  accurate  radiation  dose  to  be  delivered  to  the  target  with   a  high  dose  gradient  drop  off  to  surrounding  healthy  tissue.    There  are  two  main  requirements   while  using  stereotactic  radiosurgery  or  radiotherapy:  (1)  precise  stereotactic  localization  and   geometrical  definition  of  the  target  and  (2)  precise  delivery  of  the  treatment  absorbed  dose  that  is   tailored  to  the  target  (Schell,  1995).    In  order  to  assess  these  requirements,  a  radiation  dosimetry   device  must  be  used.    Dosimetry  of  the  radiation  fields  delivered  by  stereotactic  radiosurgical   systems  has  three  requirements.    1)  Sub-millimetre  spatial  accuracy  of  the  radiation  dosimeter.     This  ensures  volume  averaging  near  the  field  edges  will  not  occur  and  rapid  dose  gradients  can  be   measured.    2)  Should  provide  a  map  of  the  dose  distribution.  3)  Must  be  able  to  integrate  dose  over   time.    This  is  necessary  to  accumulate  the  dose  delivered  during  each  gantry  and  couch  rotation.   Due  to  the  damaging  effects  of  ionizing  radiation  on  healthy  tissue,  quality  assurance  (QA)  methods   must  take  place  to  ensure  accurate  treatment  delivery.    However,  it  is  not  the  radiosensitive   structures  located  at  a  distance  from  the  isocentre  that  is  the  greatest  risk,  rather  it  is  the  tissue   located  adjacent  to  the  lesion  that  is  included  in  the  high  dose  isocentre  region  (Greenberg,  2010).   The  quality  assurance  associated  with  stereotactic  radiosurgical  treatments  involves  multiple   disciplines  including  radiation  oncology,  radiology,  neurosurgery,  and  medical  physics.    The   research  presented  here  is  associated  with  the  medical  physics  discipline  and  has  practicality  for   medical  linear  accelerators,  therefore  the  QA  information  here  will  only  pertain  to  this.     For  a  stereotactic  radiosurgery  program,  the  Quality  Assurance  design  applies  to  three  stages:  (1)   the  SRS  procedure  design  methodology,  which  is  based  on  probable  risk  analysis;  (2)  the  QA  for   each  treatment;  and  (3)  the  routine  QA  tests,  which  occur  at  fixed  time  intervals  (Schell,  1995).    SRS   QA  programs  differ  from  institute  to  institute  as  there  is  no  universal  protocol.    This  is  due  to  the   various  constraints  at  cancer  centres  including  resources,  plant  layouts,  etc.    Technical  aspects  of   SRS  include  accuracy  in  target  localization  and  in  target  position  during  dose  delivery,  dosimetry,   quality  assurance,  and  patient  safety  (Schell,  1995).   The  principal  features  of  the  QA  programs  are  (1)  verification  of  the  mechanical  tolerances.  (2)  x- ray/light  field/laser  alignment  with  isocentre,  and  (3)  verification  of  the  target/tumour  with  the   isocentre  prior  to  treatment  (Schell,  1995).      

  

21  

A  common  test  used  in  SRS  QA  to  check  the  overall  positional  accuracy  of  the  radiation  delivery  is   the  Winston-Lutz  test  (Lutz,  1988).    These  measurements  involve  projecting  a  radio-opaque  ball   from  various  gantry  angles  onto  a  film  and  looking  at  variation  of  the  ball's  movement  with  respect   to  the  field  edges.    Lutz  (1998)  found  that  the  smallest  sphere  circumventing  nine  beam's  central   axis  on  each  film  ranged  from  1.2  ­  1.8mm  and  that  the  distance  between  the  center  of  this  sphere   and  the  center  of  the  steel  ball  was  calculated  to  be  1.33±0.64mm.  based  on  coordinates  determined   through  CT  localizations.    Lutz  (1998)  found  that  this  effective  movement  of  isocentre  had  the  effect   of  spatially  widening  the  penumbra  (region  of  dose  fall-  off  between  target  and  surrounding  tissue)   by  an  amount  less  than  half  the  diameter  of  this  `smallest'  sphere.        

  

  

22  

Research  
Hypothesis  and  Specific  Aims  
   The  hypothesis  of  this  research  is  that  the  radiation  isocentre  variation  from  a  SRS  treatment  can  be   mapped  out  with  sub-millimetre  precision  using  a  quality  assurance  phantom  containing  film  at   large  enough  distances  from  the  isocentre  such  that  individual  radiation  beam  offsets  from   treatment  machine  mechanical  instabilities  are  sufficiently  magnified.      This  will  be  measured  by   designing  and  fabricating  a  SRS  quality  assurance  phantom  with  specific  characteristics  and   properties.    The  phantom  will  be  extensively  tested  and  software  will  be  developed  to  provide   isocentre  variability  results.    The  isocentre  variability  map  can  then  be  used  to  correct  the  aim  of   the  convergent  radiation  beams  bringing  them  closer  to  a  common  isocentre  point  using  either  the   variation  in  isocentre  due  to  collimator  rotations  and/or  small  field  shifts.   The  aim  this  research  is  to  provide  a  stereotactic  radiosurgical  phantom  that  will  allow  cancer   centres  to  know  the  isocentre  variability  of  their  SRS  treatment  machines  providing  them  with  the   information  needed  to  improve  the  accuracy  and  precision  of  the  dose  distributions  delivered.   The  dodecahedral  phantom  we  proposed  in  this  thesis  offers  several  advantages  when  compared  to   the  Winston-Lutz  test  and  cubical  phantoms.    The  larger  distance  between  parallel  faces,  the  larger   number  of  parallel  faces  and  the  resulting  lack  of  eccentricity  of  the  entry  and  exit  beam  spots  on   the  films  allow  one  to  obtain  a  higher  level  of  accuracy  for  beam  measurements.    With  a  successful   implementation,  this  phantom  has  the  potential  to  become  a  standard  for  radiosurgery  quality   assurance.   The  anticipated  significance  of  the  work  here  is  to  provide  medical  physicists  with  a  method  to   reduce  the  impact  of  the  radiation  isocentre  variability  of  the  linear  accelerators  thus  reducing  the   error  in  dose  received  to  the  target  while  minimizing  the  dose  to  healthy  tissue.    This  in  turn  will   lead  to  fewer  side  effects  and  a  better  quality  of  life  for  the  patient.  

  

23  

Phantom  Design  and  Fabrication  
                             
Figure  19:  The  dodecahedron  

  

Phantom  Design  
Initial  design  considerations  were  first  discussed  at  O.C.C.  with  the  intention  to  use  the  machine   shop  there  for  phantom  construction.    O.C.C.  is  equipped  with  12  linear  accelerators  with  one   currently  being  used  for  SRS  treatments  (Siemens  Primus  dual  energy  unit  (6MV  and  10MV))  and   one  Elekta  unit  for  future  SRS  treatments.    The  machine  shop  at  O.C.C.  is  lead  by  Machinist  Mr.   Harry  Easton,  and  is  fully  equipped  to  accommodate  the  phantom  construction  and  materials.     Before  any  fabrication  was  completed  in  Canada,  the  research  was  continued  for  four  months  at  the   DKFZ  (German  Cancer  Research  Centre)  in  Heidelberg,  Germany,  as  part  of  a  new  graduate  student   exchange  program  and  research  collaboration  between  the  DKFZ  and  the  Department  of  Physics  at   Ryerson  University.      This  presented  an  excellent  opportunity  to  further  the  research  presented   here  as  the  DKFZ  is  world  renowned  for  cancer  research  and  has  excellent  resources  for  the   phantom  development.    The  DKFZ  has  three  Siemens  Primus  treatment  units,  two  of  which  are  used   for  patient  treatment  (including  stereotactic  radiosurgery)  and  one  solely  for  research.      The   machine  used  for  initial  measurements  was  essentially  identical  in  all  aspects  related  to  the   research  to  the  treatment  machine  characterized  at  the  O.C.C.      The  thesis  work  was  supervised  in   Germany  by  Prof.  Dr.  Guenther  Hartmann  while  maintaining  contacts  to  supervisors  in  Canada  for   guidance.      Phantom  design  and  fabrication  considerations  were  discussed  with  and  supervised  by   the  Head  Medical  Physics  Engineer  at  the  DKFZ,    Dipl.-Ing  Gernot  Echner.       The  QA  phantom  that  was  developed  here  utilizes  Gafchromic  EBT  film  (a  radiochromic  film   manufactured  by  ISP)  at  known  distances  and  orientations  relative  to  the  isocentre  to  reconstruct   the  individual  paths  created  by  the  converging  radiation  beams.        

  

24  

Radiochromic  film  contains  a  special  dye  that  is  polymerized  upon  exposure  to  radiation.   Radiochromic  film  is  self-developing,  requiring  neither  developer  nor  fixer.    Since  radiochromic   film  is  grain  less,  it  has  a  very  high  resolution  and  can  be  used  in  high  dose  gradient  regions  for   dosimetry  and  thus  is  ideal  for  this  research  (Devic,  2005).    Gafchromic  EBT  film  is  sensitive  in  the   1cGy  -  800cGy  Dose  range,  it  is  Energy  independent  from  the  keV  range  into  the  MeV  range,  and  has   uniformity  better  than  1.5%  (International  Specialty  Products,  Inc.,  2007).      Furthermore,  the  film   can  easily  be  cut  to  any  shape  and  marked  for  reference.     Although  it  has  been  shown  that  Linac  isocentre  variability  can  be  measured  using  electronic  portal   imaging  devices  (Winkler,  2003),  the  use  of  the  imaging  device  as  a  comparison  for  this  research   was  not  investigated  due  to  time  constraints.       Two  films  are  located  on  opposing  sides  of  the  phantom  such  that  any  radiation  beam  through  the   isocentre  will  be  exposed  on  both  films.    At  O.C.C.,  an  initial  design  for  the  phantom  was  developed   taking  into  consideration  all  design  constrains  listed  below:   Note:  these  design  constraints  and  data  taken  to  determine  phantom  characteristics  are  described   in  more  detail  in  the  next  section.   Phantom  Shape  ­  The  three  dimensional  shape  must  allow  for  film  to  be  fixed  to  its  outer  surface,   therefore  flat  surfaces  must  be  used.      The  phantom  must  also  exhibit  opposing  faces  to  allow  beam   cross  sections  to  be  caught  on  an  entry  and  exit  film.    The  phantom  is  to  be  hollow  to  minimize  the   weight  and  to  allow  for  future  quality  assurance  devices  to  be  inserted  internally  at  the  centre  of   the  phantom.   Phantom  Size  ­  The  phantom  must  be  large  enough  to  significantly  reduce  the  error  when   measuring  individual  beam  offsets  while  not  allowing  collisions  between  the  cone  and  phantom   when  there  is  rotation  of  the  treatment  couch  and  gantry.    Weight  considerations  must  also  be   looked  at  as  the  phantom  is  to  be  placed  at  the  end  of  the  treatment  couch  creating  strain  on  the   device  which  holds  the  phantom  in  its  location.    The  device  will  also  need  to  be  transported  from  a   storage  location  to  the  treatment  unit  on  a  push  cart.   Phantom  Material  ­  The  material  used  must  be  strong  enough  to  support  the  weight  of  the   phantom,  maintain  structural  stability,  and  must    have  radiation  build-up  properties  to  allow  for   sufficient  exposure  of  the  Gafchromic  film.       

Phantom  Shape  
The  phantom  shape  was  first  visualized  to  be  cubical  in  shape.    This  shape  would  have  allowed  for   parallel  and  opposing  planes,  easy  construction,  and  simplified  computer  modelling.    However,   discussions  with  Profs.  Hartmann  and  Echner  at  the  DKFZ  led  to  reviews  of  other  shapes  concluding   that  a  more  unique  shape  than  a  cube,  the  Dodecahedron,  would  be  the  best  design  alternative.     This  shape,  which  is  closer  geometrically  to  a  sphere  than  a  cube  allowed  for  greater  opposing  film   plane  distances  than  the  cube,  which  suffers  from  collisions  near  its  edges.    It  must  be  noted  here  

  

25  

that  other  shapes  were  investigated,  but  the  face  shapes  most  exhibited  would  have  required   cutting  the  film  to  a  great  extent.    Furthermore,  given  the  larger  number  of  faces  of  the   dodecahedron  shape,  it  exhibits  a  superior  ability  to  minimize  the  angle  of  incidence  of  the   incoming  beams.    This  benefit  is  explained  later  in  the  Contour  Data  section.        

(cm)  

(cm)  

(cm)     

Figure  20:    Matlab  dodecahedron  model  

   The  Dodecahedron,  seen  in  Figure  19  and  20,    is  any  twelve  sided  three  dimensional  shape.    The   design  for  this  research  however  uses  the  regular  dodecahedron.    It  is  a  platonic  solid,  exhibiting   faces  that  are  congruent  regular  polygons,  with  the  same  number  of  faces  meeting  at  each  vertex.     The  regular  Dodecahedron  is  symmetric  in  all  directions.    It  can  be  rotated  by  a  specific  angle  any   amount  of  times  and  still  maintain  the  same  orientation.    It  has  parallel  and  opposing  planes  and  a   three  dimensional  shape  that  makes  it  very  sturdy  and  resistant  to  warping  or  deformations.   An  initial  design  using  pins  to  hold  the  film,  shown  in  Figure  21,  was  devised.    By  placing  the  short   edge  of  a  film  along  each  edge,  it  is  possible  to  orient  film  in  5  different  orientations.    With  this   rotation  of  the  film  on  each  face,  nearly  every  radiation  beam  from  all  gantry  and  couch  rotation   combinations  will  intercept  an  entrance  and  exit  film.    However,  the  final  design  did  not  use  pins  to   hold  the  film,  it  was  decided  instead  to  use  a  machine  grooved  section  was  which  would  allow  the   film  to  sit  flush  against  accurately  carved  edges.     

  

26  

  
Figure  21:    Dodecahedron  Single  face  placement  of  film  

   Phantom  Size  and  Material  
   The  dodecahedron  shape  was  used  because  it  allowed  for  a  larger  phantom  to  be  fabricated  due  to   the  fact  that  a  dodecahedron  has  a  more  rounded  shape  than  a  cube,  thus  facilitating  more   adequately  the  concentric  rotation  of  the  treatment  cone  around  the  isocentre.    However,  it  was   necessary  to  have  each  sheet  of  Gafchromic  film  (20.3cm  x  27.9cm)  cut  in  half  (width  wise)  as  a   dodecahedron  with  full  sized  film  on  the  phantom  faces  would  have  created  collisions  between  the   phantom  and  the  treatment  unit.    Only  one  corner  and  edge  of  the  cut  film  on  the  un-cut  edge  is   used  for  orientation  therefore  accurate  cutting  of  the  film  is  not  necessary.    With  each  film  edge  (the   shorter  edge)  placed    parallel  to  each  phantom  face  edge  it  is  possible  to  have  five  different   orientations  of  the  film  on  each  face.    To  locate  the  film  to  the  correct  position  on  the  phantom,  the   film  is  placed  on  a  face  of  the  phantom  in  the  grooved  out  section.    The  film  is  pushed  against  the   reference  edge  and  then  into  the  reference  corner.    This  is  best  depicted  visually  and  can  be  seen  in   Figures  22  and  23.    It  can  be  seen  how  the  film  sits  flush  with  the  reference  edge  on  the  phantom   face.    On  the  opposite  side  of  the  film  (cut  side)  there  is  some  space  to  allow  for  un-accurate  cutting   of  the  film.    The  film  is  attached  to  the  phantom  using  masking  tape  along  each  edge.      

  

27  

  
Figure  22:    Phantom  face  showing  grooved  out  centre  to  allow  precise  placement  of  Gafchromic  film  

   This  grooved  out  design  feature  allows  for  independent  offset  calculations  for  the  same  beam  and   gives  coverage  for  the  beam  to  enter  from  any  location  only  missing  the  ones  that  fall  on  the  edges   of  the  phantom  where  there  is  no  film  (which  actually  can  be  measured  if  the  phantom  is  shifted).      

Cut  film   edge  

Reference   Corner  

Reference   Edge  

  
Figure  23:    Phantom  face  with  film  fixated  flush  against  the  bottom  left  corner  

  

  

28  

   The  phantom  was  constructed  solely  of  acrylic.    This  material  is  widely  available  in  medical  physics   machine  shops  as  it  is  already  used  as  phantom  material  due  to  its  charge  build-up  properties  and   it's  ability  to  be  easily  machined.    The  phantom  consists  of  an  inner  shell  of  5.5mm  thickness  with  a   grooved  out  section  to  accommodate  for  different  film  orientations.    The  inner  shell  gives  the   phantom  it's  stability  and  provides  for  additional  exposure  of  the  film  from  backscattered  radiation.       The  phantom  also  was  constructed  with  an  outer  shell  to  provide  the  majority  of  the  film  dose   build-up  for  adequate  film  exposure.   Measurements  to  determine  the  inner  and  outer  shell  thickness  were  first  taken  at  DKFZ  using  the   same  stereotactic  setup  as  that  would  be  used  during  regular  phantom  use.      The  criteria  for  inner   and  outer  shell  thickness  was  based  on  phantom  structural  stability  and  weight  and  adequate   exposure  of  the  film.    Constructing  a  phantom  with  too  thin  walls  would  lead  to  poor  structural   stability  and  poor  film  exposure  while  advantageously  maintaining  a  low  weight.      Constructing  a   phantom  with  walls  too  thick  would  yield  an  unwanted  high  weight    but  provide  for  good  structural   stability.      Therefore  it  can  be  seen  that  an  optimal  inner  and  outer  shell  thickness  can  be  achieved.   The  inner  shell  thickness  was  determined  in  collaboration  with  Prof.  Gernot  Echner,  head  engineer   at  the  DKFZ,  and  was  based  solely  on  phantom  weight  and  stability.        It  was  decided  to  use  an  inner   shell  thickness  of  5.5mm  as  this  would  provide  for  a  light  but  structurally  strong  phantom  while  at   the  same  time  provide  for  some  backscattered  radiation.     The  outer  shell  thickness  was  based  solely  on  adequate  exposure  level  for  Gafchromic  film.    In  order   to  determine  the  thickness,  films  were  sandwiched  between  8mm  of  solid  water  (essentially  square   acrylic  pieces  of  known  thicknesses  used  for  quality  assurance)  for  the  inner  shell  (determined   above)  and  various    thicknesses  of  solid  water  on  top  for  the  outer  shell  and  was  irradiated  with   different  amounts  of  radiation.      Radiation  doses  emitted  from  the  Linac  are  calibrated  under   known  conditions  and  geometries.    The  Primus  Linac  used  for  the  measurements  is  calibrated  to   deliver  1  cGy/MU  at  a  known  depth  in  water  medium.    MU  here  stands  for  Monitor  Unit  and  is  the   numerical  value  inputted  to  the  machine  for  radiation  dose.    Although  the  Linac  is  capable  of   delivering  therapeutic  photons  and  electrons  at  several  energies,  the  clinical  radiation  used  for  SRS   and  this  research  at  DKFZ  and  O.C.C.  is  6MV  photons  delivered  at  a  rate  of  300  cGy/min.      Figures  24   and  25  are  the  scanned  Gafchromic  films  showing  the  different  exposure  levels  obtained  at  different   build-up  thicknesses.    The  written  values  to  the  left  of  each  row  of  beams  is  the  thickness  of  build- up  in  centimetres  used  while  the  values  on  the  top  of  each  column  are  the  dose  delivered  in  Monitor   Units.    As  can  be  seen  from  these  three  figures,  increasing  build-up  thickness  leads  to  increases  in   film  exposure.      

  

29  

  
Figure  24:  Gafchromic  radiation  exposures  for  various  doses  and  build-up  thicknesses  

  
Figure  25:  Gafchromic  radiation  exposures  for  various  doses  and  build-up  thicknesses  

  

  

30  

We  also  see  that  with  no  build-up,  doses  as  large  as  500MU,  which  takes  up  to  a  minute  and  a  half  to   deliver,  does  not  provide  adequate  exposure  even  for  long  irradiation  times.      Taking  into  account   the  exposure  levels  above,  and  again  phantom  weight,  and  outer  shell  structural  stability,  it  was   decided  that  an  outer  shell  thickness  of    5.5mm  was  to  be  used.  

Phantom  Fabrication  
It  is  worth  noting  here  that  the  individual  phantom  faces  were  constructed  at  the  machine  shop  at   the  DKFZ  in  Heidelberg,  Germany.    Prof.  Echner  was  concerned  about  shipping  a  completed   phantom  from  Germany  to  Canada  due  to  the  possibility  of  deformations  and/or  cracks  during   transportation.    Therefore,  the  individual  phantom  faces  were  shipped  not  attached  to  each  other.     Consequently,  Mr.  Harry  Easton,  head  of  the  machine  shop  at  O.C.C.  assembled  the  pieces  using  a   glue  filled  syringe  to  adhere  each  piece  in  place.    The  final  product,  seen  in  Figure  26,  included  a   hollow  inner  dodecahedron  shell  with  grooved  out  sections  for  film  placement  with  two  outer   shells  used  for  radiation  build-up.    

Reference   Edge  
Figure  26:  Completed  Phantom  

Once  completed,  each  phantom  face  was  designated  a  number  (1  through  12)  and  each  orientation   possibility  of  the  film  on  a  single  face  was  given  a  letter  (A  through  E).    

  

31  

Software  Design  and  Testing  
A  software  program  was  written  to  analyse  the  irradiated  films  and  provide  an  isocentre  variability   map  for  various  treatment  couch  and  gantry  angles.      The  programming  language  used  was  Matlab,   and  this  was  chosen  due  to  it's  mathematics  and  3-D  plotting  capabilities.  

!"#$%&'()'*+,-(./%01%23(
!5%-(6+17( 8"0%0'(+7%,'( 9"5%0'(&':;('<,'( ="-0"?&()%0%( @&%5'(A'%7(

="->'&0(0"(<"*'(

6+-<(='-0&'*(

=%15?1%0'(A'%7( BC*'0*(

4(

  

Figure  27:  Software  Flow  Diagram  

The  software  developed  essentially  calculates  the  isocentre  variability  map  for  various  treatment   couch  and  gantry  angles  by  ray  tracing  the  individual  beams  based  on  radiation  beam  spots  on  the   film.    Figure  27  shows  the  block  diagram  depicting  the  logical  flow  of  the  software  each  of  which  are   described  below  in  detail.      The  Matlab  code  (4  Matlab  .m  files)  has  been  included  in  the  Appendix.     

Film  Digitization  
The  input  to  the  software  is  a  series  of  image  files  (TIFF  format)  taken  during  a  set  of   measurements.    Figure  28  shows  how  an  image  file  is  created  by  scanning  into  a  computer  the   individual  films  on  a  16-bit  flat  bed  scanner.    The  parameters  used  for  scanning  on  the  Vidar  16  bit   flatbed  scanner  at  The  Odette  Cancer  Centre  are  as  follows:  

  

32  

Resolution:  150  dpi   Bit  depth:  greyscale  16-bit  

Film  Placement  

  
Figure  28:  16-bit  Flat  bed  scanner.    Adapted  from  http://scanner-review.blogspot.com/2007/11/umax-mirage- iise-114-x-17-9600-dpi.html  with  slight  modification.  

It  was  not  necessary  for  the  user  to  visually  align  the  film  on  the  scanner  as  straight  as  possible  as   the  software  does  this  for  the  user  (explained  below).    For  this  research,  the  files  were  named  with   the  following  convention:    `face  number­face  letter.TIF'.        For  example,  as  can  be  seen  from  the   Figure  30  below,  films  orientated  with  their  reference  corner  located  on  face  11,  spot  E  would  have   a  file  name  `11-E.TIF'.    Similarly,  its  opposing  film  would  be  named  `3-B.TIF'.    The  user  is  able  to   change  the  file  name  and  location  for  the  entrance  and  exit  film  files  in  the  code,  as  well  as  the  face   number  and  film  orientation.    It  must  also  be  noted  here  that  some  of  the  films  scanned  did  not  lie   completely  flat  on  the  scanner  bed  and  were  not  compressed  by  the  top  lid  of  the  scanner  in  the   closed  position.    Therefore,  it  was  necessary  to  place  a  thin  transparent  piece  of  plastic  over  the  film   to  weigh  it  down  (the  amount  of  scanner  light  attenuation  was  found  to  be  negligible).     

Image  Rotation/  Locate  reference  edge  
The  software  calculates  beam  spot  locations  on  the  film  based  on  the  distance  or  number  of  pixels   from  each  beam  spot  to  the  reference  corner.    In  order  to  properly  calculate  this  distance  it  is   necessary  to  rotate  the  image  such  that  the  reference  edge  is  parallel  to  the  rows  in  the  image  array   matrix.    From  here  the  reference  point  is  then  located  on  the  image  to  calculate  the  proper  distance   from  each  radiation  spot  centre  to  the  reference  point.    This  is  best  explained  with  three  figures.     The  reference  edge  point  and  it's  location  can  be  seen  in  Figure  26  and  29  on  the  Matlab  modelled   phantom  as  well  as  the  actual  phantom.       

  

33  

Reference   Edge   (cm)  

(cm)  
Figure  29:  Matlab  dodecahedron  model  with  the  location  of  a  film  

  

   Since  the  film  is  firmly  pushed  against  the  reference  edge  and  reference  corner,  it  is  necessary  to   know  the  location  of  each  film  relative  to  the  white  image  background.    

  

34  

  
Figure  30:  Un-rotated  film  Image  

Reference   Corner  

Reference   Edge  

  
Figure  31:  Rotated  Film  Image  

For  this  research,  all  films  were  scanned  with  the  reference  corner  located  in  the  upper  left  hand   corner  of  the  screen.    Matlab  takes  this  corner  to  be  the  0,0  for  images  where  each  pixel  is  an  

  

35  

element  of  an  array  or  matrix  containing  the  pixel  values  for  an  entire  image.  The  matrix  or  array  is   defined  here  as  a  full  representation  of  the  two  dimensional  film  space.   A  subroutine  is  used  to  allow  the  user  to  select  any  point  on  the  image  with  high  precision  by   zooming  in  on  selected  regions.       Another  subroutine  performs  image  rotations.  This  is  useful  given  that  the  reference  edge  of  the   film  must  be  aligned  with  the  pixel  column  of  the  image  to  allow  for  x  and  y  distances  to  be  easily   calculated  on  the  film.    This  subroutine  allows  the  user  to  rotate  the  image  based  on  two  points   selected  along  the  reference  (left)  edge  of  the  film.    A  line  is  then  created  along  this  edge  which   allows  the  software  to  rotate  the  image  based  on  the  angle  between  the  user  defined  line  and  the   vertical  rows.  Figure  30  shows  a  raw  image  file  before  any  rotation  has  taken  place  and  Figure  31   shows  how  the  image  looks  following  this  transformation.       For  the  reference  edge  selection,  or  background  removal,  the  user  once  again  uses  the  above   subroutine  to  select  the  reference  corner  (upper-left)  of  the  film.    An  example  can  be  seen  in  Figure   32.        

  
Figure  32:  Reference  corner  selection  (magnified)  

Once  the  image  has  been  rotated  and  the  reference  corner  was  selected,  the  voxel  values  are  now   converted  to  dose  and  then  contoured  to  find  the  radiation  spot  centres.  

Convert  to  Dose  
The  raw  images  created  by  the  scanner  is  simply  a  array  of  gray-scale  values  ranging  from  0  to   65535  based  on  the  attenuation  of  light  through  the  film.    However,  to  correctly  contour  the  beam  

  

36  

spots,  the  image  must  be  converted  to  radiation  dose.    Dose  response  curves  covering  several   energies  and  doses  over  large  ranges  have  been  created  for  the  Gafchromic  film  previously  at  O.C.C.       using  the  software  ScanQA  By  PTW  Inc.    The  dose  response  curve  for  6MV  is  seen  in  Figure  33.                                          
Figure  33:  Dose  response  curve  used  by  O.C.C.  for  Gafchromic  film  at  6MV  for  their  16-bit  Vidar  scanner  

     

Equation  1  was  used  to  convert  each  pixel  in  the  film  image  into  dose.  Poly.  (Raw  Data)  in  Figure   33)  was  derived  from  a  sixth  degree  polynomial  fit  of  a  range  of  data  read  into  in  the  ScanQA   software.   Eq.  (1)            

y = -3.97 × 10 -24 x 6 + 7.98 × 10 -19 x 5 - 6.31 × 10 -14 x 4 + 2.43 × 10 -9 x 3 - 4.31 × 10 -5 x 2 + 1.61 × 10 -1 x + 3539.74
   Figure  34  shows  a  sample  raw  image  before  any  conversion  to  dose  has  taken  place  while  Figure   35a  is  the  image  after  conversion.     

  

37  

  
Figure  34:    Film  image  (Greyscale)  before  conversion  to  dose  (cGy)  

  
Figure  35a:    Film  image  converted  to  dose  (cGy)  

         38  

As  can  been  seen  in  the  two  above  figures,  the  pixel  values  outside  the  irradiated  area  has  become   considerably  lighter  (low  dose  region).             

5$(,6'$-"!"-.,$"7'.8)$"9.'":;<#3"#.%$"(&":=="#3;" >?@"A"<"#3;"-$7&B"
#!!" +!" *!" )!"

!""#$%&'()"(*+,"-.,$"

(!" '!" &!" %!" $!" #!" !" ,$!" ,#'" ,#!" ,'" !" '" #!" #'" $!"

/01(*+,"-+,&(%#$"2"33"4"
#-'"./".012"

  
Figure  35b:    Plot  of  the  SRS  cone  research  Linac  profile  at  a  typical  clinical  depth.  The  80%-20%  dosimetric   penumbra  here  is  2.7  mm  (indicated  by  violet  arrow).  At  the  depth  of  maximum  dose  or  for  the  acrylic  build-up   (outer  shell)  thickness  or  for  no  build-up  at  all,  the  80%-20%  penumbra  is  typically  2.4  -  2.5  mm.        

   The  plot  in  Figure  35b  shows  the  percentage  of  the  central  axis  dose  as  a  function  of  off-axis   distance  for  the  1.5cm  cone  at  O.C.C.  on  the  machine  used  for  this  research.    The  profile  shown  was   measured  at  5cm  depth  in  water  at  100cm  distance  from  the  source.    As  can  be  seen  from  this  plot,   there  is  a  2.4mm  -  2.5mm  range  for  which  a  dose  threshold  can  be  chosen  for  the  data  contouring.     

Contour  Data  
The  first  steps  of  the  software  development  were  to  have  the  software  properly  read  in  a  film  and   locate  the  radiation  beam  spots  by  thresholding  the  image  at  an  optimal  pre-determined  dose  level.      

  

39  

The  optimal  dose  threshold  level,  explained  below,  was  determined    by  calculating  the  contours   over  a  wide  range  of  doses.    The  Matlab  function  Im2bw  converts  a  greyscale  image  to  a  binary   image  based  on  this  dose  threshold.    The  output  image  replaces  all  pixels  in  the  input  image  with   luminance  greater  than  the  dose  threshold  level  with  the  value  1  (white)  and  replaces  all  other   pixels  with  the  value  0  (black).    

Find  Radiation  Spot  Centres  
Based  on  each  individual  contour,  the  central  axis  of  the  beam  is  found  through  two  methods.    Note   that  for  both  methods,  the  reference  edge  location  is  subtracted  from  the  found  beam  centres.    The   first  is  done  simply  by  calculating  the  average  or  median  of  the  contour  data.      The  second,  however   is  done  by  performing  a  least  squares  fit  of  the  contoured  data  to  an  ellipse  (Fitzgibbon,  1999).  The   ellipse  fit  is  done  due  to  the  circularly  collimated  radiation  beam  intersecting  a  flat  film  plane.    From   this  fit,  the  centres  are  calculated  from  equation  2  based  on  the  best  parameters  found  (a,b,c,d,f,g),   in  the  least  square  sense  for  the  quadratic  form  of  an  ellipse:        Eq.  (2)              Figure  36  shows  the  contour  plots  (in  red)  and  the  corresponding  least-squares  ellipse  fits  (in   green)  over  a  range  of  dose  threshold  values  for  a  single  radiation  spot.    
2 2    ax + 2bxy + cy + 2 dx + 2 fy + g = 0   

  

40  

  
Figure  36:  Plotted  contours,  fit,  and  centre  data  

To  see  how  the  radiation  spot  centre  changes  over  a  dose  threshold  range,  two  plots  Figure  37  and   38  were  produced.    Each  plot  shows  how  the  radiation  spot  centre  pixel  value  changes  in  both  the   column  and  row  directions.  

6(0"(7+8&9:+;&<$8;/$&*(;(&=&<+%)>8&*+,$&-./$,.+%0&6(8?$&&
!()$"%

    

!()$&%

!()$!%

!"#$%&'(%)$&

!()%

-./0.12%3404%5672487% 9::;<=7%>;0%-7/027%

!"#$'%

!"#$"%

!"#$&%

!"#$!% )$*% *)$*% +))$*% +*)$*% *+,$&-./$,.+%0&12345& !))$*% !*)$*% ,))$*%

Figure  37:  Calculated  Radiation  spot  centres  as  a  function  of  film  dose  threshold  for  the  column  pixel   values      41  

6(0"(7+8&9:+;&<$8;/$&*(;(&=&6+>&*+,$&-./$,.+%0&6(8?$&&
!"#%+$

  

!"#%#$

!"#%*$

!"#%)$

!"#$%&'(%)$&

!"#%($

-./0.12$3404$5672487$ 9::;<=7$>;0$-7/027$

!"#%'$

!"#%!$

!"#%&$

!"#$ ,%)$ ),%)$ &,,%)$ &),%)$ *+,$&-./$,.+%0&12345& !,,%)$ !),%)$ ',,%)$

Figure  38:  Calculated  Radiation  spot  centres  as  a  function  of  film  dose  threshold  for  the  row  pixel  values.  

   As  it  can  be  seen  from  these  two  plots  there  is  an  optimal  range  of  dose  thresholds  for  which  the   radiation  spot  centre  (both  ellipse  fit  and  contoured  data)  does  not  change.    A  properly  contoured   film  from  a  set  of  rotation  measurements  can  be  seen  in  Figure  39.  

  

42  

  
Figure  39:    Contoured  film  from  a  set  of  Couch  rotation  measurements  

   It  is  worth  while  to  note  here  the  case  for  an  ellipse  with  a  high  eccentricity.    In  this  scenario,  the   beam  intersects  one  of  the  film  planes  at  a  high  incident  angle  (away  from  the  perpendicular,  direct   hit);  however,  the  radiation  field  now  intersects  the  plane  at  different  distances  from  the  source   across  the  major  axis  of  the  elliptical  field.    Radiation  in  the  field  delivered  closer  to  the  source  will   be  higher  than  that  further  from  the  source  due  to  the  inverse  square  law.    Due  to  this  the  radiation   profile  will  be  slanted  and  not  symmetric  about  the  beam  central  axis.    Figure  40  shows  how   changing  the  dose  threshold  level  on  a  highly  elliptical  field  changes  the  ellipse  centre.      

  

43  

  
Figure  40:    Highly  elliptical  field  shape  due  to  high  incident  angle  

   However,  due  to  the  nature  of  the  dodecahedron,  its  symmetry,  and  its  large  number  of  phantom   faces,  the  phantom  will  never  encounter  an  highly  elliptical  field  unless  the  phantom  is  shifted  to   collect  data.    Due  to  the  fact  that  the  incident  angle  remains  low,  it  was  found  that  a  correction  for   the  inverse  square  law  on  each  pixel  was  not  needed.   Once  each  radiation  beam  spot  centre  has  been  found,  the  two  dimensional  film  space  data  matrix   containing  these  points  is  passed  to  the  trace  beam  function  (explained  below)  along  with  the  film   location  and  orientation  to  find  their  locations  in  three  dimensional  phantom  space.   The  contouring  and  location  of  the  radiation  centres  occurs  for  every  film  file  included.    The   software  uses  pairs  of  opposing  film  files  (entrance  film  and  exit  film)  to  allow  the  tracing  of  beams   to  occur.         

  

44  

Trace  Beam  
For  visualization  purposes,  the  phantom  and  the  film  are  modeled  and  displayed  in  a  Matlab  plot   which  is  also  used  to  display  the  traced  radiation  beams.    This  plot  sets  up  the  three  dimensional   phantom  coordinate  system  used  for  ray  tracing.    The  computer  modeled  phantom  contains  angles   and  indices  which  make  the  model  a  perfect  dodecahedron.    The  20  indices  of  a  dodecahedron  are   as  follows:   (±1,  ±1,  ±1)   (0,  ±1/,  ±)   (±1/,  ±,  0)   (±,  0,  ±1/)   Where    is  equal  to  (1+5)/2  and  is  also  called  the  golden  ratio.    These  indices  connect  to  form  the   30  edges  of  the  dodecahedron.    A  numerical  factor  is  applied  to  all  the  above  indices  to  magnify  its   size  to  that  of  the  real  phantom.    Figures  41  through  44  show  the  modeled  phantom  and  the  three   dimensional  phantom  coordinate  system  used.   This  next  step  of  the  trace  function  inputs  the  radiation  spot  two  dimensional  data  for  each  film  and   converts  them  into  three  dimensional  phantom  coordinates  based  on  film  locations  and   orientations.      This  can  easily  be  done  as  each  of  the  dodecahedron  faces  is  connected  to  the   surrounding  others  by  the  dihedral  angle  of  2  arctan()  or  approximately  116.565  degrees.     Furthermore,  each  face  is  pentagonal  in  shape  allowing  the  five  film  orientations  to  easily  rotated   by  72  degrees.    Through  matrix  rotation  transformations  of  the  film  image  data  around  the   phantom  centre,  it  is  then  possible  to  locate  the  film  on  one  plane  and  then  rotate  it  to  the  correct   location  and  orientation  on  the  phantom.   The  3D  phantom  space  coordinate  system  convention  used  is  defined  in  Figure  41.    With  the   dodecahedron  phantom  sitting  on  the  treatment  couch,  the  centre  of  the  phantom  is  placed  at  the   isocentre.    From  here  the  X  axis  lies  along  the  long  axis  of  the  couch  (In-plane,  positive  x  towards   the  gantry),  the  Y  axis  lies  perpendicular  to  the  couch  long  axis  (Cross-plane,  positive  Y  to  the  left,   facing  the  gantry),  and  the  Z  axis  is  orthogonal  to  the  couch  plane  (positive  Z  towards  the  gantry   head).    When  modelled  in  Matlab,  the  phantom  mapped  onto  this  coordinate  system  is  seen  in   Figures  42  through  44.    

  

45  

  
Figure  41:    Phantom  coordinate  System  convention.    Adapted  from  http://www.radiology- equipment.com/oncology.cfm  with  slight  modification.    

  

  
Figure  42:    Dodecahedron  model  in  the  XY  phantom  coordinate  system  plane  

  

46  

  
Figure  43:  Dodecahedron  model  in  the  XZ  phantom  coordinate  system  plane  

  
Figure  44:  Dodecahedron  model  in  the  YZ  phantom  coordinate  system  plane  

  

47  

   The  array  of  two  dimensional  film  data  is  first  located  on  the  top  plane  of  the  phantom  (with  the   phantom  situated  on  the  treatment  couch).    The  2-D  film  data  is  then  added  to  the  starting  location   of  the  film  (reference  edge  location)  on  the  top  plane  to  convert  it  to  3-D  phantom  coordinates,  but   not  at  the  correct  location.    To  rotate  the  new  3-D  data  to  the  correct  position,  two  rotation  axes  are   defined.    The  first  rotation  occurs  about  the  positive  Z  axis  (0,0,1)  and  is  given  by  the  rotation   matrix:  

cos - sin  0  RZ ( ) =  sin  cos 0       0 1   0 
   By  using  multiples  of  72  degrees,  the  data  is  rotated  to  its  correct  orientation  on  the  top  pentagonal   face,  but  still  on  the  incorrect  face.      To  rotate  the  film  and  its  data  to  the  correct  face,  two  rotations   occur,  the  first  about  the  positive    Y  axis,  and  then  again  about  the  positive  Z  axis.    The  rotation   matrix  used  for  the  Y  axis  rotation  is  given  by:     

 cos  0 sin   Ry ( ) =  0 1 0    - sin  0 cos     
   Once  the  two  opposing  films  and  their  two  dimensional  radiation  spot  data  has  been  located,  the   software  matches  the  corresponding  beam  spots  on  the  entrance  and  exit  films  and  traces  the  beam   from  the  entrance  film  through  the  phantom  to  the  opposite  exit  film  side.    Parametric  equations   given  in  Equation  3  are  defined  for  each  beam  in  three  dimensional  phantom  space.      Eq.  (3)         The  beam  tracing  procedure  occurs  for  every  pair  of  opposing  entrance  and  exit  film  files  at  which   point  the  beam  trace  analysis  takes  place  and  the  beam  offsets  are  calculated.      RadiationSpot Entrance + t  ( RadiationSpot Exit - RadiationSpot Entrance )   

Calculate  Beam  Offsets  
The  analysis  of  the  entire  ray  traced  set  involves  examining  the  beams  and  finding  how  they  are   offset  from  each  other  and  from  the  nominal  isocentre.    The  method  that  was  chosen  to  do  this  

  

48  

analysis  involves  looking  at  single  points  along  the  path  of  the  beam  and  how  they  relate  to  each   other  in  3-D  phantom  space.       The  algorithm  used  in  the  software  is  a  four  step  process  which  finds  the  distribution  of  single   points  on  each  beam  path  which  is  at  a  minimum  distance  to  a  specific  point.       The  first  step  in  this  process  involves  finding  the  point  along  each  beam  path  that  is  at  a  minimum   distance  to  the  centre  of  the  modeled  phantom  (0,0,0).    This  is  done  by  using  the  beam  parametric   equations  and  solving  for  the  parameter  t  which  minimizes  this  distance.    This  is  given  by  equation   (4):   Eq.  (4)        

t=

( x1 - x 0 )  ( x 2 - x1 ) x 2 - x1
2

  

Where x0 is (0,0,0), x1 is the radiation entrance spot, and x2 is the radiation exit spot. This produces a set of minimum distance points (one for each beam) to the (0,0,0) phantom centre. The second step in the offset calculation process finds the centre point or centroid between the distribution of minimum distance points in step one. This is simply done by searching for the point which minimizes the distance between itself and the surrounding points. The third step is similar to the first step as in finding the point along the beam path which minimizes the distance to a point, however, this point is now the centre point found in step two and not (0,0,0). Again, this is done for all beams by solving for t in the equation above, producing a second distribution of points. The  final  step  in  this  algorithm  is  to  shift  the  found  centroid  point  found  in  step  three  to  (0,0,0).       The  resulting  plot  of  the  dodecahedron  and  the  modelled  radiation  beams  from  a  gantry  rotation  is   shown  in  Figure  45  and  a  magnified  view  of  the  offsets  near  the  isocentre  in  Figure  46.    Depicted  in   Figure  46,  the  blue  dots  represent  the  minimum  distance  points  calculated  and  the  red  dot   represents  the  centre  of  the  modeled  phantom.    The  blue  sphere  is  the  smallest  sphere  which   encompasses  all  minimum  distance  points.  

  

49  

(cm)  

Y  (cm)  
Figure  45:    Matlab  modeled  gantry  rotation  measurements  

(cm)     

  

(cm)  

(cm)  
Figure  46:  Matlab  modeled  gantry  rotation  measurements  magnified  to  the  isocentre  

  

  

50  

  Phantom  Testing  
   Testing  of  the  Dodecahedron  phantom  involved  placing  the  phantom  at  known  location  and   orientation  and    taking  measurements  that  would  ensure  it's  robustness  and  validity  in  its  offset   measurements.    Furthermore,  measurements  were  taken  to  characterize  the  phantom  in  the   calculation  software.  

Phantom  orientation/  Measurement  Setup  
The  placement  of  the  phantom  to  measure  the  radiation  beam  offsets  involved  positioning  the   phantom  on  the  treatment  couch  in  a  known  location  to  be  input  into  the  calculation  software.    For   most  measurements,  the  phantom  was  placed  at  the  isocentre  such  that  the  phantom  centre  is   aligned  with  the  machine  isocentre.    This  was  done  by  visually  aligning  the  treatment  room  lasers   to  outer  scribe  marks  on  the  phantom  indicating  the  phantom  centre.    In  order  to  fix  the  phantom  to   the  treatment  couch,  the  bottom  of  the  phantom  was  taped  (masking  tape)  to  the  treatment  couch   ensuring  no  movement  of  the  phantom  took  place.       Note:  for  these  measurements  and  for  all  SRS  treatments,  the  treatment  couch  is  locked  into  place   via  rubber  brakes  that  completely  restrict  any  motion.       The  original  intention  was  to  have  the  phantom  fixated  to  the  treatment  couch  through  a  rigid   attachment  which  would  place  the  phantom  in  the  exact  same  position  every  time.    The  attachment   would  have  been  located  at  the  end  of  the  treatment  couch  where  normally  the  stereotactic  head   frame  would  be  attached.    Note:    The  treatment  couch  for  the  Linac  used  for  this  research  at  O.C.C.   was  modified  to  allow  the  stereotactic  head  frame  to  be  attached  to  the  end  of  the  couch.           The  first  tests  of  the  phantom  revealed  that  with  the  bottom  outer  shell  (build-up  material)  fixated   to  the  couch,  it  was  very  difficult  (if  in  fact  impossible)  to  remove  the  phantom  from  the  shell  to   replace  film  without  moving  the  lower  shell  and  thus  the  phantom  from  its  measurement  position.     Therefore,  for  all  measurements  following  this,  the  outer  shell  build-up  was  not  used.    This  led  to   longer  irradiation  times  to  adequately  expose  the  film,  but  ensured  phantom  position  during   measurements.     

Phantom  Robustness  
To  find  if  the  phantom  is  robust,  i.e.  can  it  be  moved  from  its  measurement  setup  position  and  still   yield  the  same  results,  the  phantom  was  first  placed  at  the  isocentre  then  a  series  of  film   measurements  were  taken  at  various  gantry  and  couch  angles.    For  these  measurements  the   resulting  minimum  distance  points  were  then  plotted  in  the  XY,  XZ,  and  YZ  planes.         

  

51  

The  phantom  was  then  rotated  and  shifted  from  the  isocentre  by  a  known  amount.    The  same   beams  were  again  measured  but  now  at  some  distance  and  rotation  from  the  phantom  centre.    A   plot  in  each  plane  of  the  two  minimum  distance  points  for  both  the  shifted  and  un-shifted  phantom   can  be  found  in  Figures  47,  48,  and  49.    

'()*+,$"-,./0+*100"2"&!"'3)*1"
"#$%

              

"#&%

"#'%

"#(%

  
,-./01% "% "#+% "#(% "#*% "#'% "#)% "#&% 23%.45607380%

!"#$$%"

"% !"#'% !"#*% !"#(% !"#+% !"#(%

!"#)%

  

!"#'%

!"#&%

!"#$%

&"#$$%"

Figure  47:  Phantom  shifted  and  un-shifted  data  in  the  XY  phantom  plane     

  

52  

Figure  48:  Phantom  shifted  and  un-shifted  data  in  the  YZ  phantom  plane  

234567/&879:;65<;;&!&1,&2=45<&
"#"'& "#"(& "#")& "#"%& "&
,&-./0&

!"#"*&

!"#")&

!"#"+&

!"#"%&

!"#"$& !"#"%& !"#")& !"#"(& !"#"'& !"#$& !"#$%&

"&

"#"$&

"#"%&

"#"+&

"#")&

"#"*&

"#"(& >?;4=?@5<A& B=?@5<A&

1&-./0&

  
Figure  49:  Phantom  shifted  and  un-shifted  data  in  the  XZ  phantom  plane  

  

53  

   As  can  be  seen  from  these  three  figures,  the  minimum  distance  points  calculated  for  the  phantom  at   the  isocentre  and  at  the  shifted/rotated  place  are  within  0.2mm  of  each  other.    Therefore  the   phantom  is  robust  such  that  any  positioning  errors  (rotational  or  shifted)  will  not  affect  the   minimum  distance  points  distribution.  The  plots  seem  to  indicate  that  the  phantom  detected  a  small   additional  rotation,  due  to  the  fact  that  the  phantom  has  been  aligned  after  rotation  by  eye,  a   misalignment  uncounted  for  in  the  calculations.    It  was  also    hypothesised  but  not  investigated  that   alignment  can  be  discerned  from  the  centres  of  the  entrance  and  exit  beams  for  irradiations  taken   at  the  same  gantry  angle.    In  the  future,  rotation  and  translation  of  the  phantom  relative  to  a  point   of  closest  approach  of  the  0  and  90°  gantry  beams  with  axes  defined  by  the  0  entrance  /  exit  and   90°  entrance  /  exit  should  give  a  rigid  body  fixed  frame  for  the  room  and  thus  could  be  used  for   phantom  alignment.   The  final  step  of  the  phantom  testing  was  to  confirm  it's  validity.      This  was  done  to  see  if  the  offset   beams  are  calculated  to  be  where  they  are  in  reality.    To  validate  the  phantom  it  was  necessary  to   characterize  this  particular  phantom  in  the  calculation  software.         

Phantom  Characterization  
In  order  to  ensure  that  the  radiation  beams  are  properly  modelled  in  the  software  to  their  true   locations,  certain  parameters  needed  to  be  adjusted  to  their  true  values.    These  parameters  are  true   dimensions  and  angles  applied  to  the  modelled  dodecahedron  which  is  assumed  to  be  completely   perfect  in  shape  and  size.    The  characterization  process  was  very  time  consuming  due  to  the   phantoms  multiple  film  location  and  orientations.    Adjustments  in  the  parameters  below  as  small  as   0.1mm  and  0.1  degrees  yielded  beam  offset  results  differing  greater  then  0.5mm.    Due  to  this,  the   complete  characterization  of  the  phantom  was  not  complete  during  this  thesis  and  this  is  explained   in  more  detail  below  in  the  discussion  section.       These  adjustable  parameters  in  the  calculation  software  are  as  follows  and  are  explained  in  detail   below:   Dodecahedron  size:    Each  vertex  of  the  modelled  phantom  is  multiplied  by  a  factor  determining   the  overall  size  of  the  phantom  and  thus  each  edge  length.     Rotations  about  Z-axis:  These  are  the  angles  (described  in  the  Trace  Beam  Section)  the  software   uses  to  rotate  the  film  about  the  Z-axis  to  place  the  film  on  the  correct  phantom  face  (1  through  12).     For  a  perfect  dodecahedron  this  angle  is  72  degrees.   Rotations  about  Y-axis:  These  are  the  angles  (also  described  above)  the  software  uses  to  rotate   the  film  about  the  Y-axis  to  place  the  film  on  the  correct  film  face.  (1  through  12)    For  a  perfect   dodecahedron  this  angle  is  180  subtract  the  dihedral  (116.565  degrees).      Rotations  of  film  on  each  phantom  face:    These  angles  (described  above)  used  by  the  software   rotate  the  film  within  each  face  to  their  correct  orientation  (A  through  E).    For  a  perfect      54  

dodecahedron  this  angle  is  72  degrees.      Reference  edge  location:    the  distance  from  each  phantom  vertex  to  the  reference  edge  location   where  the  film  sits.   The  overall  dodecahedron  size  was  determined  by  using  a  micrometer  scale  at  the  O.C.C.  machine   shop.    The  phantom  top  to  bottom  distance  was  determined  (i.e.  parallel  and  opposing  film  distance   separations)  to  be  39.354cm  (measured  to  the  face  inner  film  groove).    The  measurement  of  the   vertex  to  vertex  distance  also  confirmed  the  modelled  dodecahedron  size.   The  next  characterization  that  took  place  was  the  reference  edge  location  on  each  phantom  face.     The  x  and  y  distances  seen  in  Figure  50  below  were  measured  by  hand  to  be  2.20cm  and  1.15cm   respectively.      However,  it  was  found  that  the  hand  measurements  were  not  accurate  enough  and   further  measurements  were  needed.      

Y  (cm)   X  (cm)     
Figure  50:    Reference  Corner  Location  

   To  characterize  a  single  phantom  face,  measurements  of  a  single  beam  (no  rotation  of  the  gantry   and  couch)  were  taken  by  rotating  the  film  through  each  orientation  (A  through  E).    Ideally,  each   film  orientation  should  produce  the  same  beam  offset,  however  it  was  found  that  the  hand   measurements  above  produced  offset  differences  (of  the  same  beam)  of  0.5mm.    By  adjusting  the  x   and  y  distances  to  the  reference  edge  location  it  was  possible  to  minimize  the  distance  between      55  

each  ray  trace  from  the  different  orientations.    The  adjusted  value  of  the  reference  edge  location   was  found  to  be  x:    2.48cm  and  y:    1.36cm.    The  minimum  distance  points  plot  can  be  seen  in   Figures  51,  52,  and  53  and  confirms  that  each  film  orientation  produces  offsets  of  a  maximum  of   0.085mm  for  the  same  beam.      

'()$"*+(,-./01-"2"&!"
!"#&+% "#&*% "#&)% "#&(% "#&'% "#$% "#$&% "#$$% "#$,% "#$-% "#$+% "#$*%

!"#&*%

301/456784%:%
!"#&)%

!"#&(%
!"#$$%"

301/456784%9%
!"#&'%

./01/2$%

301/456784%;%
!"#$%

301/456784%<%
!"#$&%

301/456784%=%
!"#$$%

&"#$$%"

  
Figure  51:    Different  film  orientation  data  for  the  same  radiation  beam  in  the  XY  plane  

  

56  

'()$"*+(,-./01-"2"&!"
!"#)%& "#)-& !"#)-& "#),& "#)+& "#)*& "#$& "#$)& "#$$& "#$(& "#$'& "#$%& "#$-&

!"#),&

301/456784&:&

!"#)+&

!"#)*&

!"#$$%"

!"#$&

./01/2$&

!"#$)&

301/456784&;&
!"#$$&

!"#$(&

301/456784&9& 301/456784&<& 301/456784&=&

!"#$'&

!"#$%&

&"#$$%"

  
Figure  52:  Different  film  orientation  data  for  the  same  radiation  beam  in  the  XZ  plane  

  
'()$"*+(,-./01-"2"&!"
!"#)-& !"#$(& !"#$$& !"#$)& !"#$& !"#)*& !"#)+& !"#),& !"#)-& !"#)%& !"#)'& !"#),&

301/456784&:&

!"#)+&

!"#)*&

!"#$$%"

!"#$& ./01/2$&

301/456784&;&

!"#$)&

!"#$$&

!"#$(&

301/456784&<& 301/456784&=& 301/456784&9&
!"#$'&

&"#$$%"

!"#$%&

  
Figure  53:  Different  film  orientation  data  for  the  same  radiation  beam  in  the  YZ  plane  

  

57  

   The  angle  of  rotation  between  film  orientations  on  a  single  face  was  left  at  72  degrees.    This  was  not   altered  due  to  the  fact  that  the  reference  edge  location  change  was  all  that  was  needed  to  properly   model  the  same  beam  with  different  film  orientations.       The  final  two  parameters  that  can  be  changed  to  characterize  the  phantom,  the  rotation  of  the  film   about  the  Z  and  Y  axes  to  properly  place  the  film  on  its  correct  face  were  not  investigated  due  to   time  constraints  for  this  research.    It  is  hypothesised  that  the  vertices  for  each  face  (and  the   reference  edge)  on  the  phantom  has  a  specific  location  slightly  different  than  a  perfect   dodecahedron  due  to  slight  machining  and  fabrication  imperfections.    These  locations  can  be   implicitly  input  into  the  software  or  can  be  defined  by  exact  rotations  (angles  between  each   phantom  face)  with  possible  shifts.        This  will  be  discussed  further  in  the  following  sections    below.      

  

58  

Data  Results  
  

Gantry  Rotation  Data  
The  radiation  beam  offsets  due  to  the  motion  of  the  gantry  alone  was  measured  on  three  different   dates.    Multiple  films  were  oriented  on  the  phantom  to  allow  for  the  gantry  rotation  measurements.     Since  parallel  and  opposing  beams  will  traverse  over  the  same  location  on  the  film,  it  was  necessary   to  remove  the  phantom  and  replace  films  to  measure  the  opposing  gantry  angles.    For  the  first  two   measurements  (June  9,  2010  and  June  19,  2010)  the  build-up  shell  was  used.    It  was  determined   however  after  the  analysis  of  these  measurements  that  the  location  of  the  phantom  after  removal  to   replace  the  films  could  not  be  reproduced  with  the  necessary  accuracy.    Therefore,  for  all   measurements  taken  after  whereby  the  phantom  was  needed  to  be  replaced  during  measurements,   the  outer  build-up  shell  was  removed.    Although  this  increased  the  irradiation  times  for  sufficient   film  exposure,  the  film  could  be  replaced  without  movement  of  the  phantom  on  the  treatment   couch  during  measurements.    Therefore  due  to  time  constraints,  the  gantry  rotation  data  was  only   measured  once  without  build-up  to  ensure  that  data  taken  between  film  replacements  was   accurate.   The  offset  data  due  to  gantry  rotation  was  taken  (without  build-up  layer)  on  June  27,  2010.    The   gantry  was  rotated  from  -126°  to  +126°  in  8  degree  intervals.    The  Matlab  model  of  the  phantom   and  the  resulting  beam  traces  can  be  seen  in  Figures  54  and  55.      

(cm)  

(cm)  
Figure  54:    Modeled  gantry  rotation  Data  set  

  

  

59  

(cm)  

(cm)  
Figure  55:  Modeled    gantry  rotation  data  magnified  to  the  isocentre  

  

   The  plots  of  the  minimum  distance  points  projected  onto  the  XY,  XZ,  and  YZ  phantom  coordinate   system  are  found  in  Figures  56,  57  and  58.    Denoted  on  the  plots  are  the  first  and  last  gantry  angle   exposed  on  a  single  film,  these  are  connected  by  a  single  series.    In  parentheses  in  the  legend  is  the   film  face  entrance  number  and  it's  orientation  is  followed  by  the  exit  face  number  and  it's   orientation.    The  gaps  A,  B,  and  C  denoted  by  the  red  arrows  should  not  be  there.    The  red  arrows   join  points  in  the  plots  that  should  appear  close  together  because  they  correspond  to  similar  beams.     Our  analysis  suggests  that  they  are  the  consequence  of  the  translation  in  the  positional  data  from   it's  true  location  due  to  the  phantom  not  being  a  perfect  dodecahedron  and  not  yet  completely   characterized  in  the  calculation  software.    This  is  examined  further  in  the  Gantry  Rotation  Data   Discussion  Section.  

  

60  

'()*+,"-.*(/.)"0"&!"
"% &#'%

456789%"$(%:;<8;;=%

456789%$1)%:;<8;;=%
&#(% &#)%

456789%$''%:;<8;;=% 456789%)'%:;<8;;=%
*)'!+$%,-.%!%'/0*% *""&!"$(%,"".%!%1/0*% *$''!1"$%,1/%!%"".0*% &#$% &#)% &#(% *$1)!$-&%,'/%!%-.0*% *!$)%!%"(%,".%!%"$.0*% +$!""&%,-2%!%1/0% $-&%!%$+)%,12%!%-.0% $+)%!%$''%,12%!%-30% "(%!%1$%,-2%!%"$/0%

456789%""&%:;<8;;=% 45>%/%
!"#$$%"

&#$%

45>%?%
&% &% !&#$%

!&#(%

!&#)%

!&#$%

456789%1"$%:;<8;;=%

45>%2% 456789%""&%:;<8;;=% 456789%1$%:;<8;;=%

!&#)%

456789%$''%:;<8;;=%

!&#(% !&#'% !"% !"#$% &"#$$%"

456789%!$)%:;<8;;=%

  
Figure  56:  Minimum  distance  points  for  Gantry  rotation  in  the  XY  phantom  plane  

'()*+,"-.*(/.)"0"&!"
"%

345678%$+)%9:;7::<%
&#'% &#(%

345678%!$)%9:;7::<% 345678%)'%9:;7::<% 345678%""&%9:;7::<% 34=%2%
&% &#$% &#)% &#(%

345678%+"$%9:;7::<% &#)%
&#$% &% !&#)% !&#$% !&#$% !&#)%

*$+)!$,&%-'.%!%,/0*% *$''!+"$%-+.%!%""/0*% *""&!"$,%-""/%!%+.0*% *)'!1$%-,/%!%'.0*% *!$)%!%"(%-"/%!%"$/0*% 1$%!%""&%-,2%!%+.0% $,&%!%$1)%-+2%!%,/0% $1)%!%$''%-+2%!%,/0% "(%!%+$%-,2%!%"$.0%

!"#$$%"

!&#(%

34=%.%

34=%>% 345678%$''%9:;7::<%

345678%$''%9:;7::<% 345678%+$%9:;7::<%

345678%""&%9:;7::<%

!&#(% !&#'%

345678%"$(%9:;7::<%

!"% !"#$% &"#$$%"

  
Figure  57:  Minimum  distance  points  for  Gantry  rotation  in  the  XZ  phantom  plane  

  

61  

'()*+,"-.*(/.)"0"&!"
"%

456789%$+)%:;<8;;=%
&#'% &#(%

456789%!$)%:;<8;;=%

456789%+"$%:;<8;;=%
&#)% &#$%

456789%""&%:;<8;;=%

456789%)'%:;<8;;=%

*$+)!$,&%-'.%!%,/0*% *$''!+"$%-+.%!%""/0*% *""&!"$(%-""/%!%+.0*% &#'&% "#&&% *)'!1$%-,/%!%'.0*% *!$)%!%"(%-"/%!%"$/0*% 1$%!%""&%-,2%!%+.0% $,&%!%$1)%-+2%!%,/0% $1)%!%$''%-+2%!%,30% "(%!%+$%-,2%!"$.0%

!"#$$%"

45>%2%
!"#&&% !&#'&% !&#(&% !&#)&% !&#$&%

456789%$''%:;<8;;=%
&% &#&&% !&#$% !&#)% !&#(% !&#'% !"% !"#$% &"#$$%" &#$&% &#)&% &#(&%

!"#$&%

456789%+$%:;<8;;=%

45>%?% 456789%$''%:;<8;;=%

45>%.%

456789%""&%:;<8;;=%

456789%"$(%:;<8;;=%

  
Figure  58:  Minimum  distance  points  for  Gantry  rotation  in  the  YZ  phantom  plane  

   Also  measured  was  the  variation  in  gantry  reproducibility.    Measurements  were  taken  of  a  single   gantry  angle  exposure.    The  gantry  was  then  moved  away  from  that  angle  and  then  moved  back   again  using  the  Linac's  digital  reading  hand  control.    The  exposure  was  then  taken  again  using   another  set  films  in  the  same  orientation  as  the  first.    This  was  repeated  five  times.    Due  to  the  same   film  orientations  be  used  for  all  the  repeated  data,  any  inconsistencies  in  the  phantom  not  being  a   perfect  dodecahedron  would  not  effect  the  data.    The  standard  deviation  of  the  offsets  from  this   data  in  all  three  principle  planes  of  the  phantom  coordinate  system  were  found  to  be:     StdDev(x)=0.11mm,  StdDev(y)=0.12mm,  0.16mm.        

Couch  Rotation  Data  
The  radiation  beam  offsets  determined  by  couch  rotation  alone  were  performed  on  three  different   days.    Set  1  on    June  3,  2010,  Set  2  on  June  14,  2010,  and  Set  3  on  June  26,  2010.    The  measurements   all  were  taken  using  the  exact  same  phantom  setup.    Films  were  placed  on  the  phantom  in  the  same   orientations  on  all  three  days  and  the  phantom  centre  was  visibly  aligned  to  the  treatment  room   lasers.        

  

62  

The  minimum  distance  points    were  calculated  for  a  series  of  couch  rotations  in  the  range  used  by   O.C.C.    This  range,  from  66°  to  -64°  was  measured  in  8°  intervals  (the  smallest  angle  resolution  of   the  rotation  whereby  exit  beam  spots  do  not  overlap).    The  gantry  was  kept  stationary  at  65°,     however  any  gantry  angle  could  be  used  and  this  angle  was  chosen  as  to  maximize  the  amount  of   data  taken  from  couch  rotations  on  a  single  film.     The  Matlab  model  of  the  phantom  and  the  resulting  beam  traces  can  be  seen  in  Figures  59  and  60.        

(cm)  

(cm)   (cm)  
Figure  59:  Modeled  treatment  couch  rotation  Data  set  

  

  

  

63  

(cm)  

(cm)  
Figure  60:  Modeled  treatment  couch  rotation  data  magnified  to  the  isocentre  

  

   Figures  61,  62,  and  63  show  the  minimum  distance  points  projected  on  the  XY,  XZ,  and  YZ  planes  of   the  phantom  coordinate  system.    The  information  in  the  legend  gives  the  couch  angles  measured,   then  in  parentheses  the    entrance  film  face  and  its  orientation,  the  exit  film  face  and  its  orientation   and  followed  by  the  Set  number.    The  couch  start  and  finish  point  on  each  film  face  is  denoted  on   the  plots.    The  motion  of  the  calculated  offset  can  be  seen  across  each  film  face.    It  is  evident  from   the  gaps  between  the  data  from  different  film  faces  that  further  phantom  characterization  is  needed   to  produce  a  continuous  offset  curve  for  the  entire  couch  rotation  range.    This  is  examined  further   in  the  Couch  Rotation  Data  Discussion  Section.  

  

64  

'()*+",(-./(0"1"&!"
$%'#

7+89:#!(&#;3<=33>#
$%(#

7+89:#"$#;3<=33>#
$%)#

7+89:#!'(#;3<=33>#
''#*+#,(#-'.#!#/01#!#23*#"# "$#*+#!()#-4.#!#&01#!#23*#"# $# $%)# $%(# $%'# $%&# !(&#*+#!'(#-(.#!#501#!#23*#"# ''#*+#,(#-'.#!#/01#!#23*#)# "$#*+#!(&#-4.#!#&01#!#23*#)# !(&#*+#!'(#-(.#!#501#!#23*#)# ''#*+#,(#-'.#!#/01#!#23*#,#

$# !$%(# !$%)# !$%)#

!"#$$%"

7+89:#''#;3<=33>#
!$%(#

7+89:#,(#;3<=33>#
!$%'#

7+89:#!()#;3<=33>#

"$#*+#!()#-4.#!#&01#!#23*#,# 6!(&#*+#!'(#-(.#!#501#!#23*#,#

!$%&#

!"#

&"#$$%"

  
Figure  61:  Minimum  distance  points  for  Couch  rotation  in  the  XY  phantom  plane  

'()*+",(-./(0"1"&!"
"#*%

7.89:%("%;5<=55>%
"#)%

"#$%

"#&% ,**%-.%-.%&$%/*0%!%123%!%45-%(% "#'% ,("%-.%!$'%/)0%!%+23%!%45-%(% ,,,!$+%-.%!*$%/$0%!%623%!%45-%(% ,**%-.%-.%&$%/*0%!%123%!%45-%'%

!"#$$%"

"#(%

7.89:%&$%;5<=55>% 7.89:%!$'%;5<=55>%

,("%-.%!$'%/)0%!%+23%!%45-%'% !$+%-.%!*$%/$0%!%623%!%45-%',% **%-.%-.%&$%/*0%!%123%!%45-%&,% ("%-.%!$'%/)0%!%+23%!%45-%&,% !$+%-.%!*$%/$0%!%623%!%45-%&%

"% !"#$% !"#'% !"#(% "% "#'% "#$% "#*% "#+%

7.89:%!$+%;5<=55>%

7.89:%**%;5<=55>%
!"#'%

!"#&%

7.89:%!*$%;5<=55>%

!"#$%

&"#$$%"

  
Figure  62:  Minimum  distance  points  for  Couch  rotation  in  the  XZ  phantom  plane  

  

65  

  
'()*+",(-./(0"1"&!"
"#*%

7-89:%("%;4<=44>%
"#)%

"#$%

"#&% **%,-%&$%.*/%!%012%!%34,%(% "#'% ("%,-%!$'%.)/%!%+12%!%34,%(% !$+%,-%!*$%.$/%!%512%!%34,%(% 6**%,-%&$%.*/%!%012%!%34,%'% 6("%,-%!$'%.)/%!%+12%!%34,%'% 6!$+%,-%!*$%.$/%!%512%!%34,%'% "% !(% !"#+% !"#*% !"#$% !"#'% !"#(% "% "#'% "#$% "#*% 6**%,-%&$%.*/%!%012%!%34,%&% 6("%,-%!$'%.)/%!%+12%!%34,%&% 666!$+%,-%!*$%.$/%!%512%!%34,%&%

!"#$$%"

7-89:%!$'%;4<=44>%

"#(%

7-89:%**%;4<=44>%

7-89:%!$+%;4<=44>%

7-89:%&$%;4<=44>%
!"#'%

!"#&%

7-89:%!*$%;4<=44>%

&"#$$%"

!"#$%

  
Figure  63:  Minimum  distance  points  for  Couch  rotation  in  the  YZ  phantom  plane  

Also  measured  was  the  variation  in  couch  reproducibility.    Measurements  were  taken  of  a  single   couch  angle  exposure.    The  couch  was  then  moved  away  from  that  angle  and  then  moved  back  again   using  the  couch's  digital  reading  hand  control.    The  exposure  was  then  taken  again  using  another   set  films  in  the  same  orientation  as  the  first.    This  was  repeated  five  times.    Due  to  the  same  film   orientations  be  used  for  all  the  repeated  data,  any  inconsistencies  in  the  phantom  not  being  a   perfect  dodecahedron  would  not  effect  the  data.    The  standard  deviation  of  the  offsets  from  this   data  in  all  three  principle  planes  of  the  phantom  coordinate  system  were  found  to  be:     StdDev(x)=0.28mm,  StdDev(y)=0.14mm,  0.25mm.    This  would  be  the  uncertainty  in  film   digitization  and  the  uncertainty  associated  with  the  random  error  from  the  couch  rotation  due  to  its   mechanical  instabilities.   The  couch  angles  `missed'  by  the  film  were  not  taken  due  to  time  constraints.    It  was  also  evident   from  the  gantry  rotation  data  that  phantom  characterization  was  needed  to  accurately  know  the   location  of  beams  when  exposed  on  different  phantom  faces.      

  

66  

Error  Analysis  
   The  error  analysis  will  examine  the  uncertainties  involved  with  determining  the  true  position  of  the   modelled  radiation  beams  and  their  relative  offsets.    It  must  be  noted  here  that,  at  this  stage,  when   trying  to  characterize  the  phantom  itself,  we  must  separate  the  errors  that  are  not  due  to  the   phantom  itself  like  the  yet  inadequate  methods  to  consistently  and  accurately  position  the  phantom   or  the  films  thus  resulting  in  a  lack  of  phantom  position  reproducibility  or  unwanted  phantom   movements,  which  are  not  errors  associated  with  the  intrinsic  uncertainties  of  the  phantom  to   accurately  determine  radiation  offsets.    These  extraneous  effects  can  be  controlled  (e.g.  by  fixating   phantom  to  the  couch)  and  thus  are  not  part  of  this  error  analysis.    The  errors  that  were  examined,   i.e.  those  associated  with  the  phantom's  determination  of  the  radiation  spots,  were  divided  into  two   sections:     1) Uncertainties  in  film  digitization  and  radiation  spot  determination.   2) Uncertainties  associated  with  the  phantom  and  its  characterization.      1.  Uncertainties  in  film  digitization  and  radiation  spot  determination     As  mentioned  above  the  film  was  scanned  with  a  resolution  of  150  dpi.    This  is  equivalent  to   0.16933  mm  per  pixel.    The  calculation  of  the  offsets  is  determined  by  the  location  of  the  radiation   beam  spots  centres  on  both  entrance  and  exit  planes.    However,  the  radiation  spot  centre  depends   on  the  determination  of  the  film  reference  point  and  the  rotation  of  the  film  within  the  software.     Even  though  it  was  shown  in  Figures  37  and  38  that  the  radiation  spot  centre  can  be  determined  to   within  1%  the  size  of  a  pixel  size  or  0.017mm  and  that  the  ellipse  fit  to  the  data  matches  the   contoured  data  average  to  within  0.1%  the  size  of  pixel,  the  uncertainty  due  to  film  scanning   resolution  is  much  larger.     In  examining  the  radiation  beam  spot  positional  error  due  to  film  rotation  in  the  software,  it  must   be  noted  here  that  the  Gafchromic  film  did  not  exhibit  complete  right  angles  on  the  uncut  edges   some  of  the  time.    Due  to  this,  the  shorter  edge  of  the  film  was  used  for  image  rotation  as  the  film   was  aligned  with  the  short  edge  (reference  edge)  parallel  to  the  sides  of  each  pentagonal  face.    The   largest  source  of  uncertainty  to  image  rotation  derives  from  the  fact  that  the  line  of  rotation  cannot   be  known  to  better  accuracy  than  one  pixel  at  the  start  and  end  points  of  the  rotation  line.    The  line   of  rotation  was  always  measured  near  the  corners  of  the  short  film  edge  to  maximize  the  line  of   rotation  length  and  thus  minimize  this  uncertainty.    This  was  determined  to  0.12mm.   The  uncertainty  due  to  film  digitization  is  of  the  order  of  one  pixel  or  0.17  mm,  and  is  the  main   source  of  uncertainty  in  the  determination  of  the  location  of  the  image  and  thus  of  the  reference   corner.  Given  that  this  uncertainty  is  much  larger  than  the  uncertainty  in  the  determination  of  the   center  of  the  radiation  spots,  and  given  that  the  calculation  of  film  rotation  simply  reproduces   uncertainties  in  the  initial  conditions,  the  uncertainty  in  digitization  is  the  main  source  of   uncertainty  in  determining  the  true  position  of  individual  beams  on  a  single  film.      

  

67  

   2.  Uncertainties  associated  with  the  phantom  and  its  characterization     The  uncertainties  due  to  imperfections  in  the  dodecahedron  can  be  divided  into  uncertainties   associated  with  the  individual  faces  and  uncertainties  associated  with  the  shape  of  the  entire   phantom.    This  is  because  the  individual  faces  were  all  precision  machined  in  the  same  manner  at   DKFZ  while  they  were  `glued'  together  at  O.C.C.       The  uncertainties  associated  with  measuring  the  same  radiation  beam  using  different  film   orientations  on  the  same  face  are  likely  due  to  very  small  machining  imperfections  in  the   fabrication  process.  It  was  shown  in  the  Phantom  Characterization  Section  that  the  offsets  of   radiation  beams  exposed  (only  on  the  same  film)  can  be  measured  with  an  high  degree  of  accuracy.     The  maximum  deviation  of  the  minimum  distance  points  in  Figures  51,  52,  and  53  in  Results   Section  is  0.085mm.    Since  the  uncertainty  due  to  film  digitization  is  larger  than  this  deviation,  the   relative  motion  of  the  beam  on  a  single  film  near  the  isocentre  as  either  the  couch  or  gantry  are   rotated  cannot  be  known  better  than  0.16933mm  or  one  pixel.       The  uncertainty  due  to  slight  phantom  imperfections  from  an  imperfect  fabrication  were  not   systematically  investigated  in  this  research  due  to  time  constraints.    Therefore,  true  uncertainties   involving  the  relative  and  absolute  location  of  all  the  radiation  beams  cannot  be  known  until  full   phantom  characterization  takes  place.  Due  to  the  complexity  of  the  dodecahedron  shape  when   compared  to  simpler  shapes  such  as  a  cube,  the  characterization  process  of  any  machined   dodecahedron  phantom  will  inevitably  take  considerable  time  in  order  to  properly  have  the   phantom  clinically  ready  to  model  radiosurgical  beam  offsets.  The  dodecahedron  shape  is   composed  of  12  regular  pentagonal  faces,  with  three  meeting  at  each  vertex,  20  vertices,  and  30   edges.    To  characterize  these  parameters  would  require  a  procedure  to  locate  the  20  individual   vertices.    Based  on  the  gaps  in  the  plots  from  the  gantry  rotation  data  section,  an  uncertainty  can   only  be  estimated  as  true  locations  and  rotations  of  data  originating  from  different  film  faces  cannot   be  known  until  the  characterization  has  taken  place.  Given  that  a  large  fraction  of  the  thesis  work   involved  the  design  and  fabrication  of  the  phantom  at  two  different  cancer  centres,  our  work  in  the   characterization  of  the  phantom,  including  the  identification  of  unexpected  sources  of    error,   constitutes  the  beginning  of  a  longer  process.   Although  individual  radiation  beams  can  be  localized  on  a  single  film  to  170  microns,  the   uncertainty  when  determining  the  locations  of  all  the  beams  from  multiple  films  can  only  be   determined  once  the  phantom  has  been  properly  characterized.    Therefore,  in  this  thesis  research,   true  error  bars  which,  aside  from  the  voxel  uncertainties  would  involve  a  knowledge  of  the   limitations  of  the  phantom,  including  QA  tests  on  the  accuracy  of  the  film-holding  grooves,  the   accuracy  of  the  relative  positions  of  all  vertices  and  a  rigid  and  consistent  positioning  of  the   phantom,  have  been  left  out  of  the  plots  only  to  be  added  in  the  future  once  they  can  be  determined   following  phantom  characterization.  As  of  now,  these  uncertainties  would  not  represent  the  true   nature  of  the  uncertainties  of  the  phantom  but  rather  the  conditions  of  the  manufacturing  process   of  this  very  first  prototype.  By  presenting  the  discrepancies  found  outside  error  bounds,  we  have  

  

68  

rather  been  able  to  identify  several  critical  aspects  that  need  to  be  resolved  in  the  manufacturing,   assembling  and  positioning  aspects  of  this  phantom.   3.  Other  Uncertainties   Another  source  of  error  that  must  be  taken  into  consideration  is  the  uncertainty  involved  with  the   placement  of  the  phantom.    Although  careful  alignment  of  the  phantom  to  the  treatment  room   lasers  (which  were  checked  against  a  calibrated  mechanical  pointer  before  each  measurement)  was   done,  small  misalignments  without  doubt  still  occurred  that  influenced  the  results.      It  became   evident  that  further  phantom  characterization  was  necessary,  therefore  any  means  to  reliably  align   the  phantom  to  the  same  orientation  with  an  accuracy  of  less  than  1mm  was  not  pursued.       Therefore,  the  uncertainty  associated  with  phantom  positioning  could  only  be  estimated  at  this   point  and  would  be  pointless  to  investigate  until  a  reliable  method  of  positioning  the  phantom  is   found.    As  stated  earlier  in  the  Phantom  Robustness  Section,  a  means  to  align  the  phantom  using   gantry  0°  and  90°  reference  beams  will  be  investigated  in  the  future  as  shall  the  design  and   construction  of  a  phantom  couch  adaptor.           

  

69  

Discussion  
   The  measurement  of  isocentric  radiation  beam  offsets  from  a  modified  Linac  is  an  integral  part  of   the  quality  assurance  program  that  is  used  for  SRS.    The  highest  degree  of  accuracy  and  precision   for  all  aspects  of  a  SRS  treatment  should  always  be  sought  after.    The  data  presented  here  has   shown  that  it  would  be  possible  to  accurately  determine  the  offsets  for  any  gantry  or  couch  angles   from  a  properly  characterized  phantom.    However,  for  this  accuracy  to  be  obtained,  the  phantom   must  be  machined  and  fabricated  with  the  highest  possible  precision  and  must  be  carefully   characterized  using  measurements  which  shall  apply  only  to  this  specific  phantom.  Moreover  it  is   crucial  to  accurately  position  the  phantom  with  a  rigid  phantom  support  that  allows  changing  the   films  without  any  involuntary  displacement  or  rotation  of  the  phantom  or  use  the  hypothesised   method  described  earlier  employing  0°  and  90°  reference  beams.   The  data  presented  here  for  relative  offsets  of  the  radiation  beams  has  been  given  separately  for  the   gantry  and  couch  rotations.    For  the  Linac  based  SRS  treatments,  the  gantry  and  couch  are   independent  of  each  other  as  neither  is  mechanically  or  physically  related  to  the  other.     Gantry  and  Couch  reproducibility  data  was  taken  and  shown  in  the  Data  Results  section.    It  was   found  that  the  gantry  and  couch  do  not  reproduce  the  exact  same  beams  when  rotating  either  of  the   two.    The  digital  readout  for  the  gantry  and  couch  allows  for  tenths  of  degrees  in  resolution  of   rotational  movement.    The  maximum  deviations  in  all  principle  directions  for  the  gantry  data  was   0.16mm  and  for  the  couch  data  0.28mm.    It  would  be  difficult  to  ascertain  whether  or  not  these   variations  in  reproducibility  come  from  the  slight  difference  in  gantry  or  couch  positions  when  they   are  rotated  away  from  and  back  to  the  same  angle  using  the  digital  readout,  if  they  come  from  slight   mechanical  instabilities  in  the  gantry  and  couch  rotation  mechanisms,  or  if  they  come  from  the   uncertainty  in  film  digitization.      

Gantry  Rotation  Data  Discussion  
The  offset  data  from  gantry  rotation  alone  was  presented  in  Figures  56,  57,  and  58  above.    For  these   measurements  the  couch  was  left  stationary  at  angle  0  degrees.      Films  were  placed  all  around  the   phantom  in  orientations  to  maximize  the  coverage  of  the  gantry  rotation  as  in  Figure  54.    In  order   to  measure  the  offsets  from  the  missed  gantry  angles  a  second  data  set  was  acquired  where  the   phantom  removed  from  its  position,  film  was  replaced,  and  then  the  phantom  was  then  placed  at  a   shifted  location  by  a  known  amount.    The  missing  gantry  angles  were  measured  with  the  previous   gantry  data  such  that  any  placement  errors  when  the  data  is  registered  from  previous  data  set  will   be  factored  out.    However  it  was  found  that  the  missing  gantry  data  did  not  completely  `bridge'  the   gap  over  the  missed  gantry  angles  from  the  initial  measurements.    The  Gaps,  A,  B,  and  C  noted  in   Figures  56  through  58  show  that  characterization  of  the  phantom  is  needed  to  accurately  know  the   offsets  of  the  radiation  beams  due  to  gantry  and/or  couch  motion.    Also  with  the  introduction  of  an   attachment  to  rigidly  fixate  the  phantom  to  the  end  of  the  treatment  couch,  registration  of  data   between  measurements  when  the  phantom  is  removed  for  film  placement  would  not  be  needed.     Furthermore,  using  an  attachment  would  greatly  simplify  the  phantom  characterization  process  

  

70  

allowing  for  exact  repositioning  of  the  phantom  during  measurements  as  would  using  the  gantry  0°   and  90°  reference  beam  method  mentioned  earlier.    It  can  also  been  seen  from  the  plots  in  the   gantry  rotation  data  section,  that  if  the  gaps  are  closed  and  correct  rotations  are  applied  to  data   captured  on  the  same  film  plane  using  phantom  characterizations,  a  continuous  and  smooth  plot  of   the  offsets  can  be  obtained.    This  is  what  would  be  expected  as  the  motion  of  the  radiation  beam   due  to  gantry  motion  is  a  systematic  error.    This  is  due  to  gravity  acting  on  the  head  of  the   treatment  machine  where  the  radiation  originates.      Although  there  will  be  small  unpredictable   deviations  due  to  the  gantry  rotating  on  a  set  of  bearings,  the  offsets  which  occur  due  to  gravity   acting  on  the  head  of  the  machine  will  be  dominant.    Furthermore,  since  the  gantry  rotates  about  a   much  larger  drum  than  the  treatment  couch,  it  will  exhibit  a  more  stable  motion  during  rotation   (D,Souza,  1999).         Once  a  characterization  of  the  phantom  is  complete  and  an  attachment  to  the  treatment  couch  is   constructed,  full  data  sets  can  be  obtained  for  all  gantry  treatment  angles  with  a  high  degree  of   accuracy  and  precision.      

Couch  Rotation  Data  Discussion  
The  analysis  of  the  offset  data  from  couch  rotation  data  section  shows  the  motion  of  the  couch   through  it's  isocentric  rotation.    The  measured  data  was  taken  identically  on  three  different  days.     The  plots  show  that  the  offsets  measured  on  different  days  is  not  repeatable  and  is  also  evident  in   the  couch  reproducibility  results  showing  that  the  couch  offsets  cannot  be  reproduced  better  than  a   maximum  of  0.28mm.    This  would  be  expected  as  the  bearings  on  which  the  couch  rotates  produces   small  unpredictable  movements  of  the  couch  (and  thus  the  treatment  target).    This  random  error  is   not  affected  by  gravity  during  the  couch's  rotation  as  it  does  the  gantry  as  the  couch's  plane  of   rotation  is  perpendicular  to  the  force  of  gravity.       The  gaps  in  the  offset  data  is  evident  that  more  data  is  needed  to  be  taken  at  shifted  phantom   locations  to  acquire  all  couch  treatment  angle  and  also  that    phantom  characterization  is  needed.    It   was  shown  that  modelling  of  beams  falling  on  the  same  film  opposing  film  faces  can  be  done  with   precision  better  than  0.17mm.    Therefore,  it  can  be  said  that  the  relative  offsets  of  the  beams  on  the   same  film  are  accurately  reproduced.    However,  beams  modelled  on  different  faces  are  not   accurately  offset  relative  to  each  other  due  to  the  phantom  not  being  completely  characterized.       A  method  to  determine  the  offset  from  treatment  couch  rotation  was  investigated  by  Hartmann  et   al  examining  the  rotation  of  a  sphere  mounted  on  the  couch  at  the  isocentre  as  the  couch  rotates.     From  this,  they  were  able  to  determine  the  mean  radial  distance  between  the  couch  rotation  axis   and  isocentre  and  the  mean  inclination  of  the  couch  axis  in  two  principle  planes.    These  were  found   to  be  0.25  ±  0.25mm,  -0.03  ±  0.02°,  and  -0.04  ±  0.01°    (Karger,  2000).    True  comparisons  can  only  be   done  once  phantom  characterization  is  complete  and  all  offsets  including  uncertainties  from  couch   rotation  is  known.      

  

71  

Phantom  Characterization  Discussion  
In  the  phantom  characterization  section  above,  it  was  shown  that  each  phantom  face  had  a  unique   set  of  coordinates  for  the  reference  point.    By  altering  the  reference    point  location,  the  offset  data   taken  at  each  film  orientation  using  a  stationary  gantry  and  couch  converged  together  to  distances   smaller  than  the  film  resolution.    It  was  evident  from  the  offset  convergence  that  small  changes  in   the  reference  point  location  (as  small  as  0.1mm)  yielded  very  large  changes  in  the  offsets  (up  to   0.3mm).    This  is  proof  that  a  very  careful  characterization  procedure  must  occur  for  the  phantom.     In  fact,  since  any  dodecahedron  phantom  will  not  be  exactly  fabricated  the  same,  a  unique   characterization  will  be  needed  for  each  future  phantom.      Measurement  data  would  need  to  be   taken  with  care  to  place  the  film  properly  while  not  moving  the  phantom.    Further  characterization   of  the  phantom  would  involve  doing  repeated  measurements  of  partial  arcs  with  the  phantom   rotated  in  such  a  way  that  beams  that  have  appeared  on  two  film  sets  show  up  on  one  film  set  in  a   second  run.    The  relation  between  the  two  faces  can  be  deduced  by  making  the  results  agree  (as   they  should  for  the  gantry  at  the  same  set  of  angles).    Also,  for  a  accurate  phantom  characterization   to  take  place,  it  would  be  best  to  have  an  attachment  fabricated  to  allow  reproducible  positioning  of   the  phantom  at  the  end  of  the  treatment  couch.         In  regards  to  the  phantom  characterization  work  which  needs  to  be  completed  for  this  research  in   the  future,  the  accurate  positions  of  each  individual  phantom  vertex  need  to  be  implicitly  inputted   into  the  calculation  software.    This  would  accurately  define  the  reference  point  location  and  the   angle  at  which  each  phantom  face  sits  in  the  shape.    Once  this  is  complete,  this  characterized   phantom  should  be  able  to  properly  calculate  the  offsets  with  an  accuracy  similar  to  that  of  a  single   film  face  above  (less  than  0.17mm).        

  

72  

Conclusions  
   A  radiosurgical  dodecahedral  phantom  was  designed  and  fabricated  for  this  research.  The  design   and  fabrication  occurred  at  the  German  Cancer  Research  Centre  (DKFZ)  in  Heidelberg,  Germany   and  at  the  Odette  Cancer  Centre  in  Toronto,  Canada.    Unexpected  issues  arose  during  the  fabrication   process  that  required  several  reassessments  of  the  construction  and  of  the  details  of  the  phantom,   which  led  to  the  need  of  extra  time  needed  for  construction  and  thus  for  a  delay  in  the   characterization  experiments.   It  was  shown  that  with  a  proper  characterization  of  the  phantom,  uncertainties  of  0.17mm  can  be   achieved  in  localizing  the  radiation  beams.       The  work  here  also  shows  that  any  future  phantoms  made  must  be  individually  characterized  with   extreme  accuracy  in  order  to  consistently  achieve  this  levels  of  uncertainty.    It  is  also  possible  that   any  future  phantoms  made  would  not  need  as  much  characterization  if  the  fabrication  process   could  consistently  achieve  dodecahedrons  that  are  closer  to  their  perfect  shape  and  if  a  mechanism   for  accurate  positioning  and  flatness  of  the  films  is  devised.   Given  the  exceptional  accuracies  that  are  possible  to  achieve,  a  completely  characterized  phantom   will  give  medical  physicists  a  quality  assurance  tool  to  accurately  know  the  isocentric  variation  of   their  linear  accelerator  treatment  machines.    Furthermore,  based  on  the  future  plans  for  the   phantom,  it  can  potentially  give  physicists  a  tool  to  measure  the  radiation  dose  distributions  from   SRS  treatments.    To  be  able  to  know  both  the  isocentric  variation  and  dose  distribution  would  be  a   invaluable  to  the  improvement  of  SRS.  Moreover,  given  its  accuracies  of  the  order  of  a  hundred   microns,  this  phantom  is  an  ideal  tool  for  testing  and  calibrating  iPet  therapies  in  which  beams  of     only  hundreds  of  keV    are  used  with  penumbras  of  only  hundreds  of  microns  (Keller,  2007).     Furthermore,  this  phantom  in  theory  could  be  used  beneficially  to  localize  radiation  beams  from   any  isocentric  treatment  units  including  the  Gamma-knife  or  proton  therapy  units.     The  process  of  designing  and  fabricating  a  phantom  for  use  in  radiosurgery  quality  assurance  was   proven  to  be  a  large  task.  The  research  presented  here  represents  the  first  step  in  the  quest  for  an   accurate  construction  and  complete  characterization  of  this  phantom.  Further  steps  will  include,   among  others:  the  design  of  a  consistent  manufacturing  process,  including  a  strategy  to  accurately   position  the  radiographic  film  both  in  placement  and  by  avoiding  bending;  the  design  and   construction  of  a  rigid  phantom  support  with  micrometric  positioning;  and  the  introduction  in  the   analysis  software  of  an  accurate  and  complete  3D  positioning  of  all  the  phantom's  vertices.    

  

73  

  

74  

Future  Considerations  
   For  this  radiosurgical  phantom  to  function  as  a  tool  for  measuring  the  offset  radiation,  the   characterization  process  needs  to  be  completed.    It  was  shown  that  by  assuming  the  phantom  is  a   perfect  dodecahedron  leads  to  an  incorrect  beam  localization  of  the  order  of  0.5  mm  and  that  a   unique  characterization  is  needed  for  this  specific  phantom.    Furthermore,  a  mechanical  device  to   reproducibly  fixate  the  phantom  to  the  treatment  couch  is  needed.  Due  to  time  constraints  it  was   not  constructed  as  part  of  this  project.    Once  the  characterization  process  and  the  attachment  are   completed,  the  phantom  will  be  able  to  determine  radiation  beam  offsets  from  any  gantry  and   couch  rotation  (relative  to  each  other  and  relative  to  a  fixed  point)  with  0.17  mm  uncertainty.   Another  SRS  quality  assurance  application  which  can  be  pursued  with  this  phantom  is  the  ability  to   determine  the  radiation  dose  delivered  from  the  Linac.    The  use  of  Gafchromic  films  on  the  phantom   to  expose  the  radiation  beams  is  possible  as  calibration  for  dose  has  been  done.    It  has  been  shown   that  radiochromic  film  can  reliably  be  used  for  radiosurgery  dosimetry  (Robar,  1999).    If  the   software  is  modified  to  determine  the  offsets  for  a  beam  moving  continuously  over  the  phantom   and  thus  a  film  sheet,  it  would  be  able  to  calculate  the  amount  of  radiation  dose  delivered  and  the   dose  distribution  for  an  entire  treatment  or  for  individual  gantry  arcs.      This  would  be  invaluable   information  to  the  medical  physicists  as  the  phantom  would  not  only  give  positional  information  in   regards  to  the  treatment  beams,  but  would  yield  dosimetric  information  as  well.         Implementing  the  resulting  isocentre  variability  map  in  practice  to  achieve  greater  radiation   isocentre  accuracy  and  precision,  is  hypothesised  to  be  done  using  two  methods.    The  first  method   will  involve  mapping  the  radiation  isocentre  as  it  varies  with  collimator  rotation.    Treatments   typically  use  only  one  collimator  angle  and  the  treatment  fields  are  usually  circular  in  shape.    By   exploiting  these  two  characteristics,  it  will  be  assessed  whether  or  not  certain  converging  beams   can  be  corrected  by  rotating  the  collimator  and  directing  them  closer  to  a  common  radiation   isocentre  point.    This  would  provide  a  corresponding  collimator  angle  to  use  for  each  gantry  and   couch  angle  during  treatment  translating  into  less  radiation  isocentre  variability.    The  second   method  hypothesised  will  be  to  shift  the  collimator  by  small  distance  where  by  the  radiation  beam   will  be  aimed  in  the  direction  of  collimator  shift.    By  designing  a  device  that  can  translate  the   individual  cones  by  small  distances  it  will  be  possible  to  direct  the  converging  beams  to  a  radiation   isocentre  with  less  variation.   If  reducing  the  isocentre  variation  can  not  be  possible  using  the  methods  above,  it  will  be   determined  if  it  is  possible  to  model  the  offsets  into  the  treatment  planning  system.    By  doing  this  in   theory,  the  dose  calculation  algorithm  will  account  for  all  the  offsets  when  determining  the  optimal   treatment  plan.      

  

75  

  
  

  

76  

Appendices  
Appendix  A1.    Matlab  code:      callFunc.m  ­  Main  function  with  distance  calculations.  
22/09/10 10:55 PM /Users/rob/Research/Matlab méfiles/callFunc.m 1 of 7

%%%%%%%%%%%%%%%%%%% %%% Appendix A1 %%%%%%%%%%%%%%%%%%% %%% orientationLet and Num are the orientations of the film on the dode %%% (see rayTrace.m) global orientationLet global orientationNum global face %%% minDistPts : the minumum distance between each pair of beams and their %%% points %%%% entranceData: the beam locations on the entrance in Dode coords, %%%% similarly for exitData %%% minDist_vector : a vector pointing to the shortest distance on each ray to the dode centre (0,0,0) %%% v : parametrized vector between entrance and exut beams %%% minDist_vector_centroid é shorttest distance points from calculated %%% centriod of data %%% normalized_vector_centroid é shorttest distance points from calculated %%% centriod of data normalized to centroid minDist_vector=[]; minDist_vector_centroid=[]; normalized_vector_centroid=[]; minDistPts=[]; entranceData=[]; exitData=[]; minDist=[]; v=[]; %%%% Run thru each film and call readFilm to calculate the entrance and exit data pionts for face= [1 2 3]% 4 5 6]% 6 7] if face==1; %%%% Entrance parameters entrance_File='/Users/rob/Research/Film Data/June26éCouchSet3/6éE. orientationLet='e'; orientationNum=6; %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter exit_File='/Users/rob/Research/Film Data/June26éCouchSet3/9éB.tif' orientationLet='b'; orientationNum=9; elseif face==2 entrance_File='/Users/rob/Research/Film Data/June26éCouchSet3/5éE. tif'

tif'

  

  

77  

22/09/10 10:55 PM

/Users/rob/Research/Matlab méfiles/callFunc.m

2 of 7

orientationLet='e'; orientationNum=5; %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter exit_File='/Users/rob/Research/Film Data/June26éCouchSet3/8éB.tif' orientationLet='b'; orientationNum=8; elseif face==3 entrance_File='/Users/rob/Research/Film Data/June26éCouchSet3/4éE. orientationLet='e'; orientationNum=4; %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter exit_File='/Users/rob/Research/Film Data/June26éCouchSet3/7éB.tif' orientationLet='b'; orientationNum=7; elseif face==4 entrance_File='/Users/rob/Research/Film Data/June09éSet2/12éE.tif' orientationLet='e'; orientationNum=12 %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter exit_File='/Users/rob/Research/Film Data/June09éSet2/1éE.tif' orientationLet='e'; orientationNum=1; elseif face==5 entrance_File='/Users/rob/Research/Film Data/June09éSet2/3éB.tif' orientationLet='b'; orientationNum=3; %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter exit_File='/Users/rob/Research/Film Data/June09éSet2/11éE.tif' orientationLet='e'; orientationNum=11; elseif face==6 entrance_File='/Users/rob/Research/Film Data/June09éSet2/8éB.tif' orientationLet='b'; orientationNum=8; %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter

tif'

  

78  

22/09/10 10:55 PM

/Users/rob/Research/Matlab méfiles/callFunc.m

3 of 7

  

exit_File='/Users/rob/Research/Film Data/June09éSet2/5éE.tif' orientationLet='e'; orientationNum=5; elseif face==7 entrance_File='/Users/rob/Research/Film Data/July22éGantry_gaps/5éE. tif' orientationLet='e'; orientationNum=5; %%% Run readFilm.m entranceCoords=readFilm(entrance_File, 2); %%%% Exit Parameter exit_File='/Users/rob/Research/Film Data/July22éGantry_gaps/3éC.tif' orientationLet='c'; orientationNum=3; end %%% Run readFilm. exitCoords=readFilm(exit_File,3);

%%%% RUN Plots [c,d]=size(entranceCoords);

for j = 1:c %%% Parametrize each entance beam thru the centre to a spot on the %%% other film to compare to real spots to figure which spots %%% match %v_orig=[0 0 9.45]éentranceCoords(j,:); v_orig=[0 0 0]éentranceCoords(j,:); %v_orig=[2.8 é1.8 é1]éentranceCoords(j,:); compCoordX=entranceCoords(j,1)+2*v_orig(1,1); compCoordY=entranceCoords(j,2)+2*v_orig(1,2); compCoordZ=entranceCoords(j,3)+2*v_orig(1,3); %scatter3(compCoordX,compCoordY,compCoordZ,100,'g','filled') %scatter3(v_orig(1,1), v_orig(1,2), v_orig(1,3), 100,'g','filled') [e,f]=size(exitCoords); for k = 1:e comparison=((compCoordXéexitCoords(k,1))^2+(compCoordYé exitCoords(k,2))^2+(compCoordZéexitCoords(k,3))^2)^(0.5);

  

79  

22/09/10 10:55 PM

/Users/rob/Research/Matlab méfiles/callFunc.m

4 of 7

if (comparison) < 0.5 %%%% now parametrize the spots that match up v=[exitCoords(k,:)éentranceCoords(j,:); v]; %%% EntranceData and exitData hold the coordinates of the beams %%% in order such that beam 1 in entranceData matches beam 1 %%% exitData entranceData=[entranceCoords(j,:); entranceData]; exitData=[exitCoords(k,:); exitData]; %%Para(numBeams)=entranceCoords(j,1)+t*v; Entrance_Beam=j; Exit_Beam=k; %%%Distance_to_iso=((entranceCoords(j,1)+0.5*v(1,1))^2+ (entranceCoords(j,2)+0.5*v(1,2))^2+..... %%% (entranceCoords(j,3)+0.5*v(1,3))^2)^(0.5) xtrace=[entranceCoords(j,1) exitCoords(k,1)]; ytrace=[entranceCoords(j,2) exitCoords(k,2)]; ztrace=[entranceCoords(j,3) exitCoords(k,3)]; %%% Calculate shortest distance to dode centre for each %%% beam %%% the parametrized time this happens occurs at minDist_t minDist_t = é1*dot(entranceCoords(j,:)é[0 0 0], exitCoords (k,:)éentranceCoords(j,:))/...... dot(abs(exitCoords(k,:)éentranceCoords(j,:)),abs (exitCoords(k,:)éentranceCoords(j,:))); %%% Calculate the gantry and couch treatment angle %%%% calculate gantry angle and couch angle based on entrance %%%% coords

if entranceData(1,3)>0 gantryAngle=asind((sqrt(entranceData(1,1)^2 + entranceData(1,2)^2))/(sqrt(entranceData(1,1)^2 + entranceData(1,2)^2 + entranceData(1,3)^2))); else gantryAngle=acosd((sqrt(entranceData(1,1)^2 + entranceData(1,2)^2))/(sqrt(entranceData(1,1)^2 + entranceData(1,2)^2 + entranceData(1,3)^2))); end couchAngle=acosd(entranceData(1,2)/(sqrt(entranceData(1,1)^2 + entranceData(1,2)^2)));

  

80  

22/09/10 10:55 PM

/Users/rob/Research/Matlab méfiles/callFunc.m

5 of 7

couchAngle=é1*(couchAngleé180); if entranceData(1,2) > 0 & entranceData(1,3) > 0; gantryAngle=gantryAngleé2*gantryAngle + 360; elseif entranceData(1,2) > 0 & entranceData(1,3) < 0; gantryAngle=270égantryAngle; elseif entranceData(1,2) < 0 & entranceData(1,3) < 0; gantryAngle=90+gantryAngle; end if entranceData(1,1) < 0 & entranceData(1,2)<0; couchAngle=couchAngleé2*couchAngle+360; elseif entranceData(1,1) < 0 & entranceData(1,2) > 0; couchAngle=180 é couchAngle; elseif entranceData(1,1) > 0 & entranceData(1,2)>0; couchAngle=180 + couchAngle; end %%%% Shortest distance calc minDist_vector=[(entranceCoords(j,:)+minDist_t*v(1,:)) gantryAngle couchAngle; minDist_vector]; %%% Plot beams plot3(xtrace,ytrace,ztrace,'Color','r','LineWidth',3); end %%text(entranceCoords(j,1),entranceCoords(j,2),entranceCoords(j,3), int2str(j),'Color','w'); end end end %

%%% Find centroid of data using kémeans clustering kmeanDist=[minDist_vector(:,1) minDist_vector(:,2) minDist_vector(:,3)]; [IDX,C,sumd,D] = kmeans(kmeanDist,1); [g,h]=size(entranceData); for b = 1:g %%% Calculate shorttest distance for each beam again now %%% from the centroid c minDist_t = é1*dot(entranceData(b,:)éC, exitData(b,:)é

  

81  

22/09/10 10:55 PM

/Users/rob/Research/Matlab méfiles/callFunc.m

6 of 7

entranceData(b,:))/...... dot(abs(exitData(b,:)éentranceData(b,:)),abs(exitData (b,:)éentranceData(b,:))); minDist_vector_centroid=[(entranceData(b,:)+minDist_t*v (b,:)); minDist_vector_centroid];

end

%%% Find the new centroid of the new data now kmeanDist2=[minDist_vector_centroid(:,1) minDist_vector_centroid(:,2) minDist_vector_centroid(:,3)]; [IDX2,C2,sumd2,D2] = kmeans(kmeanDist2,1); for r=1:g normalized_vector_centroid=[(minDist_vector_centroid(r,1)éC2(1,1)) ..... (minDist_vector_centroid(r,2)éC2(1,2)) ..... (minDist_vector_centroid(r,3)éC2(1,3)); normalized_vector_centroid]; end minCentreX=C2(1,1); minCentreY=C2(1,2); minCentreZ=C2(1,3); %%% Append gantry and couch data calculated above minDist_vector_centroid=[minDist_vector_centroid minDist_vector(:,4) minDist_vector(:,5)]; normalized_vector_centroid=[normalized_vector_centroid minDist_vector(:,4) minDist_vector(:,5)]; %%% Plot centroid scatter3(C2(1,1),C2(1,2),C2(1,3),100,'g','filled') %%% Plot shortest distance to centroid points scatter3(0,0,0,100,'r','filled') scatter3(minDist_vector_centroid(:,1), minDist_vector_centroid(:,2), minDist_vector_centroid(:,3), 100, 'b', 'filled')%% ,'b','LineWidth',1, 'MarkerSize',10); %%% Calculate distane from centroid to all points to find sphere radius [num_minDist, num_col]=size(minDist_vector_centroid); minSphere=0; for q=1:num_minDist DisttoAvg=sqrt((minDist_vector_centroid(q,1)éminCentreX)^2 + (minDist_vector_centroid(q,2)éminCentreY)^2 + (minDist_vector_centroid(q,3)é minCentreZ)^2);

  

82  

22/09/10 10:55 PM

/Users/rob/Research/Matlab méfiles/callFunc.m

7 of 7

end

if DisttoAvg > minSphere minSphere=DisttoAvg; end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%%

%%%% display min dist points, min sphere, avg centre of points %minDist_vector_centroid minSphere minCentreX minCentreY minCentreZ phi=linspace(0,pi,30); theta=linspace(0,2*pi,40); [phi,theta]=meshgrid(phi,theta); x=minCentreX+minSphere*sin(phi).*cos(theta); y=minCentreY+minSphere*sin(phi).*sin(theta); z=minCentreZ+minSphere*cos(phi); mesh(x, y, z); alpha(0.0); %%%%%%%%%%%%%%%%%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%% plot min dist points in 3 plames %figure(5) %scatter(minDistPts(:,1), minDistPts(:,2),35,'filled'); %%%scatter3(minDistPts(:,1),minDistPts(:,2),minDistPts(:,4),35,minDistPts(:, 5),'filled'); %Legend(minDistPts(:,4)) %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %

  

83  

  

84  

Appendix  A2.  Matlab  code:    readFilm.m  ­  Function  to  read  and  contour  film  data.  
22/09/10 11:09 PM /Users/rob/Research/Matlab méfiles/readFilm.m 1 of 9

%%%%%%%%%%%%%%%%%%% %%% Appendix A2 %%%%%%%%%%%%%%%%%%%

%%%%% This function opens the film file and calculates the coordinates in 2d %%%%% film coordinates of all the found beam spots. It then calls the %%%%% rayTrace function to convert the film spot centres to 3d global coords function [beamCentre]=readFilm(filmFileName, filmIndex); global orientationLet; global orientationNum; global face;

%%%%%%% open film image % filmIndex=1 % I = imread('/Users/rob/Research/Film Data/pri5éellipse001.tif'); I=imread(filmFileName); %imageInfo=imfinfo(filmFileName); %imageInfo.ColorType; %%%% Starts the centroid difference matrix for excel and the beamCentre %%%% matrix whixh holds the coords of each beam spot diff_matrix=[]; beamCentre=[];

%%% convert to grayscale and display image figure(1), imshow(I); %hold on; %if imageInfo.ColorType ~= 'grayscale' % I = rgb2gray(I); %end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %figure, imshow(I);

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%% Calculate rotation angle based on user input by calling ginput2

  

85  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m

2 of 9

datacursormode on lineAngle=ginput2(2); close(1); deltaX=lineAngle(2,1)élineAngle(1,1); deltaY=lineAngle(1,2)élineAngle(2,2); topAngle = éatan(deltaY / deltaX) * 180 / pi %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%55 %%%%%%%%%% Rotate the image back. if topAngle < 0 IRot = imrotate(I, topAngle+90, 'loose', 'bicubic'); else IRot = imrotate(I, topAngleé90, 'loose', 'bicubic'); end IRot(IRot == 0) = 65534; [sizeRow,sizeCol] = size(IRot); %%% get rid of white border using selected point above figure, imshow(IRot) removeborder_pt=ginput2(1)

close(1); %figure(filmIndex), imshow(IRot); %hold on; %%%%%% plot grid lines %%%%%%%%%%%%%%%%%%%%%%% % for grd = 1:1051 % plot ([1 1371],[grd grd], 'ék', 'linewidth', 1); % end % % for grd = 1:1371 % plot ([grd grd],[1 1051], 'ék', 'linewidth', 1); % end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%% Convert to dose%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%% Parameters from FilmQA software %%% coefficients a0= 3.5397461361e3; a1=1.6105333329eé1; a2=é4.3147580666eé5; a3=2.4260634827eé9; a4=é6.3080751711eé14; a5=7.9783970065eé19; a6=é3.9699153037eé24;

  

86  

22/09/10 11:09 PM [c,d]=size(IRot); IRot2=ones(c,d); for i = 1:c for j=1:d

/Users/rob/Research/Matlab méfiles/readFilm.m

3 of 9

gs=double(IRot(i,j))é9000; if gs >13850 IRot(i,j)=65532é32.7*(a0 + a1*gs + a2*gs^2.... + a3*gs^3 + a4*gs^4.... + a5*gs^5 + a6*gs^6); else IRot(i,j)=2000; end end end

figure(filmIndex), imshow(IRot,[1 65532]);

hold on; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%% inverse square law fix % % % % % theta = 15; D=1949; xCentre=986; yCentre=206;

% for row=44:206; % for col=986%850:1128; % newD=(D^2+((rowéyCentre)^2+(coléxCentre)^2)é2*D*((rowéyCentre)^2+ (coléxCentre)^2)^0.5*cosd(90étheta))^0.5; % % IRot(row, col)=IRot(row,col)*((D/newD)^2); % test=((D/newD)^2) % end % end % % for row = 206:393

  

87  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m

4 of 9

% for col=986%850:1128; % newD=(D^2+((rowéyCentre)^2+(coléxCentre)^2)é2*D*((rowéyCentre)^2+ (coléxCentre)^2)^0.5*cosd(90étheta))^0.5; % IRot(row, col)=IRot(row,col)*((newD/D)^2); % end % end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%% find, calculate, and Plot Contour, least squars fit, matlab parameters %%%%% %%%% % % %%%% New green gafchromic levels if filmIndex==2; level = 0.8 else level = 0.71 end % %%%%%%%threshold the image and create a binary image bw = im2bw(IRot,level); bw=(~bw); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%% remove all objects containing less than 5000 pixels bw = bwareaopen(bw, 2000); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%fill in holes within the image bw = imfill(bw,'holes'); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%% determine the size of the film image %col = round(dim(2)/2)é90 %row = find(bw(:,col), 1) %row = min(find(bw(:,col))) %contour = bwtraceboundary(bw,[row, col],'N'); % hold on; %plot(contour(:,2),contour(:,1),'r','LineWidth',1); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  

88  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m

5 of 9

% %%%%%%locate boundaries using bwboundaries method [B,L,N,A]=bwboundaries(bw); %%%%%%%%%% plot boundaries [m,n] = size(bw);

%%%%% for film spots on an edge, get rid of contours at the borders %%% first determine where film ends in y direction at x=750(750th column frmo %%% left, any would work as image is rotated now) rowSearch=m; while IRot(rowSearch,750)>64000 rowSearch=rowSearché1; end colSearch=n; while IRot(300,colSearch)>64000 colSearch=colSearché1; end m = rowSearch; n= colSearch; length(B);

for l=1:length(B) boundary=B{l}; p=1;

while length(boundary)>p if (boundary(p, 1) == 1) || .... (boundary(p, 1) == 2) || .... (boundary(p, 1) == 3) || .... (boundary(p, 1) == 4) || .... (boundary(p, 1) == 5) || .... (boundary(p, 1) == 6) || .... (boundary(p, 1) == 7) || .... (boundary(p, 1) == 8) || .... (boundary(p, 1) == 9) || .... (boundary(p, 1) == 10) || .... (boundary(p, 1) == m) || .... (boundary(p, 1) == mé1) || .... (boundary(p, 1) == mé2) || ....

  

89  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m .... || .... || .... || .... ;

6 of 9

(boundary(p, 1) == mé3) || (boundary(p, 1) == mé4) (boundary(p, 1) == mé5) (boundary(p, 1) == mé6) (boundary(p, 1) == mé7)

boundary(p,:)=[]; else p=p+1; end end p=1; while length(boundary)>p if (boundary(p,2) == 1) ||.... (boundary(p,2) == 2) ||.... (boundary(p,2) == 3) ||.... (boundary(p,2) == 4) ||.... (boundary(p,2) == 5) ||.... (boundary(p,2) == 6) ||.... (boundary(p,2) == 7) ||.... (boundary(p,2) == 8) ||.... (boundary(p,2) == 9) ||.... (boundary(p,2) == 10) ||.... (boundary(p,2) == n) || .... (boundary(p,2) == né1) || .... (boundary(p,2) == né2) || .... (boundary(p,2) == né3) || .... (boundary(p,2) == né4) || .... (boundary(p,2) == né5) || .... (boundary(p,2) == né6) || .... (boundary(p,2) == né7);

end %%% plot countour data plot(boundary(:,2),boundary(:,1),'r','LineWidth',1);

boundary(p,:)=[]; else p=p+1; end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

equation

%%%%%% fit each ellipse or parabola to a contour of an ellipse

  

90  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m

7 of 9

%for m=1:length(B); contour=boundary; X = contour(:,2); Y = contour(:,1); %%%%%%%%%%%%%%%%% use ellipse_fit.m XY =[X Y]; centroid = mean(XY); set % the centroid of the countoured data

%%% plot the centroid of contour data plot(centroid(1,1), centroid(1,2),'r*');

%Construct M M = [2*X.*Y Y.^2 2*X 2*Y ones(size(X))] ; % Multiply (éX.^2) by pseudoinverse(M) e = M\(éX.^2); %Extract parameters from vector e a = 1; b = e(1); c = e(2); d = e(3); f = e(4); g = e(5); %Use Formulas from Mathworld to find semimajor_axis, semiminor_axis, x0, y0 %, and phi delta = b^2éa*c; x0 = (c*d é b*f)/delta; y0 = (a*f é b*d)/delta; phi = 0.5 * acot((céa)/(2*b)); nom = 2 * (a*f^2 + c*d^2 + g*b^2 é 2*b*d*f é a*c*g); s = sqrt(1 + (4*b^2)/(aéc)^2); a_prime = sqrt(nom/(delta* ( (céa)*s é(c+a)))); b_prime = sqrt(nom/(delta* ( (aéc)*s é(c+a)))); semimajor_axis = max(a_prime, b_prime); semiminor_axis = min(a_prime, b_prime); if (a_prime < b_prime) phi = pi/2 é phi; end

  

91  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m

8 of 9

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%plot the centroids and fitted boundary of connected objects calculated

%%%if (semimajor_axis ~= 0) || (semiminor_axis ~= 0) plot(x0, y0,'g*'); theta = 0:0.01:2*pi; Xfit=x0+semimajor_axis*cos(theta)*cos(phi)é semiminor_axis*sin(theta)*sin(phi); Yfit=y0+semimajor_axis*cos(theta)*sin(phi) +semiminor_axis*sin(theta)*cos(phi); plot(real(Xfit), real(Yfit),'g','LineWidth',1); text(x0+75,y0é75,int2str(l));

beamCentre];

beamCentre=[x0éremoveborder_pt(1,1) y0éremoveborder_pt(1,2);

figure(filmIndex); %%%end %%text(boundary(1,2)é35,boundary(1,1)+13,'x','Color','g',... %%% 'FontSize',14,'FontWeight','bold'); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% % % % % % % % % %

%%%%%%calculate connected objects area properties and display using the %%%%%%regionprops meethod centroid=regionprops(bw,'centroid'); centroids = cat(1, centroid.Centroid); eccentr=regionprops(bw,'eccentricity'); eccentricities=cat(1,eccentr.Eccentricity); majaxislength=regionprops(bw,'majoraxislength'); majaxislengths=cat(1, majaxislength.MajorAxisLength); minaxislength=regionprops(bw,'minoraxislength'); minaxislengths=cat(1, minaxislength.MinorAxisLength); orientation=regionprops(bw,'orientation'); orientations=cat(1,orientation.Orientation);

  

92  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/readFilm.m

9 of 9

% %XY % x0_RP=centroids(l,1); % y0_RP=centroids(l,2); % a_RP=majaxislengths(l)/2; % b_RP=minaxislengths(l)/2; % phi_RP=orientations(l)*(pi/180); % % % % %%%%% Plot regionprops fit % %theta = 0:0.01:2*pi; % % % %Xfit = c+(c/a)*cos(theta) + x0; % %Yfit = (c/a)*sin(theta) + y0; % Xfit_RP=x0_RP+a_RP*cos(theta)*cos(phi_RP)éb_RP*sin(theta)*sin (phi_RP); % Yfit_RP=y0_RP+a_RP*cos(theta)*sin(phi_RP)+b_RP*sin(theta)*cos (phi_RP); % plot(Xfit_RP, Yfit_RP,'b','LineWidth',1); % % %asind(eccentricities) % % %wcentroids % % % plot(centroids(:,1), centroids(:,2), 'b*'); % % eccentricities(l); % % % %%%% Populate centroid difference matrix to plot in excel % diff_matrix=[diff_matrix;l level x0_RP y0_RP x0 y0];

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% end %%% ADD Plot Legend h = legend('Contour','Contour Centroid','Ellipse Fit Centroid','Ellipse Fit',3);

%%%% Call raytrace to convert beam centres in film coord to global coordinates using beam %%%% centre in film coordinates as input beamCentre=rayTrace(beamCentre);

  

93  

  

94  

Appendix  A3.  Matlab  code:    rayTrace.m  ­  Tracing  a  beam  from  entrance  to  exit  points.  
  
22/09/10 11:09 PM /Users/rob/Research/Matlab méfiles/rayTrace.m 1 of 9

%%%%%%%%%%%%%%%%%%% %%% Appendix A3 %%%%%%%%%%%%%%%%%%% %%% this function patches the dodecahedron (with film) together and %%% calculates the beam spots in global coordinates function [globCoord]=rayTrace(beamCentre) globCoord=[]; global orientationLet; global orientationNum; global zPlane; % % % I = imread('d:\robt\ImageFiles\test.tif'); figure, imshow(I); hold on;

%%%%%%%%% phi = golden ratio = (1+sqrt(5))/2 %%%%%%%%% dihedral = dihedral angle is about 116.565 degrees phi=0.5*(1+sqrt(5)); dihedral=acos((é1/5)*sqrt(5)); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%% dode size factor for 1/2 film sheets in (cm) dode_sizefactor=14.2962; filmwidth=12.7; filmheight=20.3; edgeToedge=1; %%% Dode size factor for full film sheets % dode_sizefactor=19; % filmwidth=20.3; % filmheight=25.4; % edgeToedge=1; %%% filmshift_x and y is the distance from a dode vertex to the start of %%% the film filmshift_x=1.359; %filmshift_x=1.15; filmshift_y=2.475; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%%%% Dodecahedron %%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%% vertex points of all points on the dodecahedron vertex_matrix = [1 1 1; 1 é1 é1; 1 1 é1; é1 1 1; é1 é1 1; é1 1 é1; é1 é1 é1; 1 é1 1;.... 0 1/phi phi; 0 é1/phi phi; 0 1/phi éphi; 0 é1/phi éphi; ....... 1/phi phi 0; é1/phi phi 0; 1/phi éphi 0; é1/phi éphi 0;......... phi 0 1/phi; éphi 0 1/phi; phi 0 é1/phi; éphi 0 é1/phi]; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  

  

95  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

2 of 9

%%%% Phantom orientation rotations %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%% Rotate Dode about the yaxis vertex_matrix=vertex_matrix*[1 0 0; 0 cos(dihedral/2) sin(dihedral/2); 0 é sin(dihedral/2) cos(dihedral/2)]; %%% Rotate Dode about the zaxis 90 degrees vertex_matrix=vertex_matrix*[cos(pi/2) sin(pi/2) 0; ésin(pi/2) cos(pi/2) 0; 0 0 1]; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%% dodecahedron size factor multiplication vertex_matrix=dode_sizefactor*vertex_matrix; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% label_matrix=[1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20]; label_matrix=[vertex_matrix label_matrix];

%%%%% Dodecahedron Face matrix é specifies the connections of all faces faces_matrix = [14 13 1 9 4; 9 1 17 8 10; 5 10 8 15 16; 4 9 10 5 18;..... 18 4 14 6 20; 13 1 17 19 3; 17 8 15 2 19; 18 5 16 7 20;.... 7 12 2 15 16; 6 20 7 12 11; 14 13 3 11 6; 11 3 19 2 12]; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%%%% Patch the dodecahedron together and start new chart for this%%%%%%%%%%%%%%%%% figure(4) patch('Vertices',vertex_matrix,'Faces',faces_matrix,... 'FaceVertexCData',hsv(12),'FaceColor','c', 'Marker','o', 'MarkerFaceColor','b'); alpha(0.1); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

hold on; %%%arc radius (cm) a=30; %%%%%%%%%%%%% % Phantom radius %%%%r=30; %%%%%%%%%%%%%%% %%%%%%% plot of small cone arcs entry and exit%%%%%%%%%%%%%%%%%%%%%%%%%% % %%%%%%%% SRS small cone Parameters %%%%% % couchStart=60; % couchDelta=30; % numArcs=5;

  

96  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

3 of 9

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%% plot of large cone arcs entry and exit%%%%%%%%%%%%%%%%%%%%%%%%% % gantryStart=300; % gantryDelta=10; % gantryArc=75; % % for couch=[56, 22, é22, é56] % % %%% rotate phantom...or couch % couch=couch+180; % % for i = gantryStart:gantryDelta:gantryStart+(gantryArcégantryDelta) % % Xi=[a*sind(couch)*cosd(i) 0]; % Yi=[a*cosd(couch)*cosd(i) 0]; % Zi=[a*sind(i) 0]; % % Xf=[0 éa*sind(couch)*cosd(i)]; % Yf=[0 éa*cosd(couch)*cosd(i)]; % Zf=[0 éa*sind(i)]; % % plot3(Xi,Yi,Zi,'Color','r','LineWidth',22); % plot3(Xf,Yf,Zf,'Color','y','LineWidth',22); % end % gantryStart=gantryStart+gantryArc; % end % %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%% Plot Mcgill technique % gantryStart=300; % gantryDelta=2; % gantryArc=300; % couch=75; % % % %%%for couch=couchStart:écouchDelta:couchStarté(couchDelta*(numArcsé1)) % for i = gantryStart:gantryDelta:gantryStart+(gantryArcégantryDelta) % % Xi=[a*sind(couch)*cosd(i) 0]; % Yi=[a*cosd(couch)*cosd(i) 0]; % Zi=[a*sind(i) 0]; % % Xf=[0 éa*sind(couch)*cosd(i)]; % Yf=[0 éa*cosd(couch)*cosd(i)]; % Zf=[0 éa*sind(i)]; % % plot3(Xi,Yi,Zi,'Color','b'); % plot3(Xf,Yf,Zf,'Color','g'); % couch=couché1; % end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

  

97  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

4 of 9

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%% Plot arc lines and the normal surfaces to the lines%%%%%%%%% %%%%%%%%%%%%%%%%%%%% %%% couchStart=60; %%% couchDelta=30; %%% numArcs=5; % gantryStart=300; % gantryDelta=2; % gantryArc=60; %%%for couch=couchStart:écouchDelta:couchStarté(couchDelta*(numArcsé1)) % for couch=[60, 30, 0 é30, é60] % faceCol=0.7; % % % for l=1:é2:é1 % % %%%% plot arcs%%%%%%%%%% % X=[l*a*sind(couch)*cosd(gantryStart) l*a*sind(couch)*cosd (gantryStart+gantryArc)]; % Y=[l*a*cosd(couch)*cosd(gantryStart) l*a*cosd(couch)*cosd (gantryStart+gantryArc)]; % Z=[l*a*sind(gantryStart) l*a*sind(gantryStart+gantryArc)]; % %%%%%%%%%%%%%%%%%%%%%%%%%% % % % plot3(X,Y,Z); % %%%% change positions of film planes if needed % if (couch == 30) || (couch == é30) % % X(1,1)= % X(1,2)= % Y(1,1)= % Y(1,2)= % Z(1,1)= % Z(1,2)= % else (couch == 60) || (couch == é60) % else (couch == 0) % % end % %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% % % % % % % % % % % % Xvert1=X(1,1)*(r/a)é(filmWidth/2)*cosd(couch); Xvert2=X(1,1)*(r/a)+(filmWidth/2)*cosd(couch); Xvert3=X(1,2)*(r/a)é(filmWidth/2)*cosd(couch); Xvert4=X(1,2)*(r/a)+(filmWidth/2)*cosd(couch); Yvert1=Y(1,1)*(r/a)+(filmWidth/2)*sind(couch); Yvert2=Y(1,1)*(r/a)é(filmWidth/2)*sind(couch); Yvert3=Y(1,2)*(r/a)+(filmWidth/2)*sind(couch); Yvert4=Y(1,2)*(r/a)é(filmWidth/2)*sind(couch); Zvert1=Z(1,1)*(r/a);

  

98  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

5 of 9

% Zvert2=Z(1,2)*(r/a); % % newPatch=[Xvert1 Yvert1 Zvert1; Xvert2 Yvert2 Zvert1; ..... % Xvert3 Yvert3 Zvert2; Xvert4 Yvert4 Zvert2]; % newFaces=[1 2 4 3]; % % patch('Vertices',newPatch,'Faces',newFaces,... % 'FaceVertexCData',hsv(1),'FaceColor',[faceCol,0,0]); % % faceCol=faceColé0.7; % % end % gantryStart=gantryStart+gantryArc; % % end %filmLength=sqrt(Xvert1^2+Yvert1^2+Zvert1^2) %%% patch couch % couchVert=[é40 é40 é40; é40 40 é40; 100 40 é40; 100 é40 é40]; % couchFace=[1 2 3 4]; % patch('Vertices',couchVert,'Faces',couchFace,... % 'FaceVertexCData',hsv(1),'FaceColor', 'y'); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%% xlabel('X'); ylabel('Y'); zlabel('Z'); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%% Test for cone collision by mapping a sphere % % r=33.4; % phi=linspace(0,pi,30); % theta=linspace(0,2*pi,40); % [phi,theta]=meshgrid(phi,theta); % % % x=r*sin(phi).*cos(theta); % y=r*sin(phi).*sin(theta); % z=r*cos(phi); % mesh(x, y, z); % alpha(0.4); %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%% Find locations of points on film relative to 3d coordinates %%% full film scan resolution = 1194x1500

  

99  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

6 of 9

%%%%%% Define start points for film measurement %%%%%%%%%%%%%%%%% %%% all units in cm % point 1 [xSize, ySize]=size(beamCentre);

for i = 1:xSize x0_RP=beamCentre(i,1); y0_RP=beamCentre(i,2); xStart=vertex_matrix(13,1); yStart=vertex_matrix(13,2); zStart=vertex_matrix(13,3);

%if isempty(orientationLet)==True %orientationLet='a'%input('Enter orientation Letter: ','s'); %orientationNum=1%input('Enter orientation Number: '); %end %%%% distance per pixel (cm) = 0.016933 Spot01=[(xStart+filmshift_x)+0.016933*x0_RP; (yStartéfilmshift_y) é0.016933*y0_RP; zStart]; %%% Do Rotation to bring back to top plane %%% theta is rotation of film on one plane if orientationLet=='a' theta=0; elseif orientationLet=='b' theta=72; elseif orientationLet=='c' theta=144; elseif orientationLet=='d' theta=216; elseif orientationLet=='e' theta=288; end

if orientationNum==1; betaY=0; betaZ=0; elseif orientationNum==2 betaY=(180é(180*dihedral/pi)); betaZ=36;

  

100  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

7 of 9

elseif orientationNum==3 betaY=(180é(180*dihedral/pi)); betaZ=36+72; elseif orientationNum==4 betaY=(180é(180*dihedral/pi)); betaZ=36+(72*2); elseif orientationNum==5 betaY=(180é(180*dihedral/pi)) é 0.12258; betaZ=36+(72*3); elseif orientationNum==6 betaY=(180é(180*dihedral/pi)); betaZ=36+(72*4); elseif orientationNum==7 betaY=180é(180é(180*dihedral/pi)); betaZ=0; theta=thetaé180; elseif orientationNum==8 betaY=(180é(180é(180*dihedral/pi))) é 0.12258; betaZ=72; theta=thetaé180; elseif orientationNum==9 betaY=180é(180é(180*dihedral/pi)); betaZ=2*72; theta=thetaé180; elseif orientationNum==10 betaY=180é(180é(180*dihedral/pi)); betaZ=3*72; theta=thetaé180; elseif orientationNum==11 betaY=180é(180é(180*dihedral/pi)); betaZ=4*72; theta=thetaé180; elseif orientationNum==12 betaY=180; betaZ=0; end

% % % %

for theta=[0 72 144 216 288] if orientationNum==7; theta=thetaé180; end

radCentre=[cosd(theta) ésind(theta) 0; sind(theta) cosd(theta) 0; 0 0 1]*Spot01; %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%%%%%%%%%%%%% Apply orientation corrections on top plane then %%%%%%%%%%%%%%%%%%%%%% rotate if orientationLet=='a' elseif orientationLet=='b'

  

101  

22/09/10 11:09 PM (3,1)]

/Users/rob/Research/Matlab méfiles/rayTrace.m

8 of 9

%radCentre=[radCentre(1,1)é0.068; radCentre(2,1)+0.037; radCentre elseif orientationLet=='c' elseif orientationLet=='d'

elseif orientationLet=='e' end %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ux=0; uy=1; uz=0; RotY=[ux^2+(1+ux^2)*cosd(betaY) ux*uy*(1écosd(betaY))éuz*sind(betaY) ux*uz*(1écosd(betaY))+uy*sind(betaY);..... ux*uy*(1écosd(betaY))+uz*sind(betaY) uy^2+(1éuy^2)*cosd(betaY) uy*uz*(1écosd(betaY))éux*sind(betaY);.... ux*uz*(1écosd(betaY))éuy*sind(betaY) uy*uz*(1écosd(betaY)) +ux*sind(betaY) uz^2+(1éuz^2)*cosd(betaY)]; radCentre=RotY*radCentre; ux=0; uy=0; uz=1; RotZ=[ux^2+(1+ux^2)*cosd(betaZ) ux*uy*(1écosd(betaZ))éuz*sind(betaZ) ux*uz*(1écosd(betaZ))+uy*sind(betaZ);..... ux*uy*(1écosd(betaZ))+uz*sind(betaZ) uy^2+(1éuy^2)*cosd(betaZ) uy*uz*(1écosd(betaZ))éux*sind(betaZ);.... ux*uz*(1écosd(betaZ))éuy*sind(betaZ) uy*uz*(1écosd(betaZ)) +ux*sind(betaZ) uz^2+(1éuz^2)*cosd(betaZ)]; radCentre=RotZ*radCentre;

xData=radCentre(1,1); yData=radCentre(2,1); zData=radCentre(3,1); %%% return the film spots in global (dode) coordinates globCoord=[xData yData zData;globCoord]; end

  

102  

22/09/10 11:09 PM

/Users/rob/Research/Matlab méfiles/rayTrace.m

9 of 9

%%%% Plot Film onto dode %%% Patch film onto dode point 13 film_vertex13=[vertex_matrix(13,1)+filmshift_x vertex_matrix(13,2)é filmshift_y vertex_matrix(13,3);.... vertex_matrix(13,1)+filmshift_x+filmheight vertex_matrix(13,2)é filmshift_y vertex_matrix(13,3);.... vertex_matrix(13,1)+filmshift_x+filmheight vertex_matrix(13,2)é filmshift_yéfilmwidth vertex_matrix(13,3);.... vertex_matrix(13,1)+filmshift_x vertex_matrix(13,2)éfilmshift_yé filmwidth vertex_matrix(13,3)]; film_vertex13=[cosd(theta) ésind(theta) 0; sind(theta) cosd(theta) 0; 0 0 1]*transpose(film_vertex13); film_vertex13=RotY*film_vertex13; film_vertex13=RotZ*film_vertex13; film_vertex13=transpose(film_vertex13); film_faces=[1 2 3 4]; patch('Vertices',film_vertex13,'Faces',film_faces,... 'FaceVertexCData',hsv(1),'FaceColor','g'); alpha(0.1);

  

103  

  

104  

References  
   Arjomandy,  B.,  &  Altschuler,  M.,  (2000).    A  quality  assurance  device  for  the  accuracy  of  the   isocentres  of  teletherapy  and  simulation  machines.    Phys.  Med.  Biol.,  45,  2207­2217.   Benedict,  S.  &  Bova,  F.,  (2008).      Anniversary  Paper:  The  role  of  medical  physicists  in  developing   stereotactic  radiosurgery.  Medical  Physics,  35(9),  4263-4277.   D'Souza,  H.,  &    Joshi,  RC.,  (1999).    Variation  in  the  isocentre  of  a  Philips  Linear  Accelerator  (SL­ 20)  used  for  stereotactic  radiosurgery/stereotactic  radiotherapy.  Australasian  Radiology,  43,   342­345.   Devic,  S.,  &  Seuntjens,  J.,  (2005).    Precise  radiochromic  film  dosimetry  using  a  flat-bed  document   scanner.  Medical  Physics,  32(7),  2245  -  2253.   Fitzgibbon,  A.,  &  Pilu,  M.,  (1999).    Direct  Least  Square  Fitting  of  Ellipses.  IEEE  Transactions  on   Pattern  Analysis  and  Machine  Intelligence,  21(5),  476  ­  480.   Greenberg,  M.,  (2010).    Handbook  of  Neurosurgery.    New  York,  NY:  Published  by  Thieme   Publishers.   International  Specialty  Products  (2007).    GAFCHROMIC®  EBT  Self-Developing  Film  for   Radiotherapy  Dosimetry.    Retrieved  May  27,  2009,  from  http://online1.ispcorp.com/_layouts/   Gafchromic/  index.html   Karger,  C.,  &  Hartmann,  G.,  (2001).    A  method  for  determining  the  alignment  accuracy  of  the   treatment  table  axis  at  an  isocentric  irradiation  facility.    Physics  in  Medicine  and  Biology,  46,   N19-N26.   Keller,  B.,  &  Beachey,  D.,  (2007).  Experimental  measurement  of  radiological  penumbra   associated  with  intermediate  energy  x-rays  (1  MV)  and  small  radiosurgery  field  sizes.    Medical   Physics,  34(10),  3996  ­  4002.   Lutz,  W.,  &  Winston,  K.,  &  Maleki,  N.,  (1988).    A  System  for  Stereotactic  Radiosurgery  with  a   Linear  Accelerator.  Int.  J.  Radiation  Oncol.  Biol.  Phys.,  14,  373-381.   Pike,  G.,  &  Podgorsak,  E.,  (1989).  Dose  Distribution  in  Radiosurgery.    Medical  Physics,  17(2),  296   ­  304.   Podgorsak,  E.  &  Pike,  B.,  (1990).    Radiosurgery  with  photon  beams"  physical  aspects  and   adequacy  of  linear  accelerators.  Radiotherapy  and  Oncology,  17,  349-358.   Podgorsak,  E.  &  Poffenbarger,  B.,  (1998).    Viability  of  an  isocentric  cobalt-60  teletherapy  unit   for  stereotactic  radiosurgery.  Medical  Physics,  25(10),  1935-1943.  

  

105  

Podgorsak,  E.  (2003).    Review  of  Radiation  Oncology  Physics:  A  Handbook  for  Teachers  and   Students.  Educational  Reports  Series,  May  1,  2003.   Robar,  J.,  &  Clark,  B.,  (1999).  The  use  of  radiographic  film  for  linear  accelerator  stereotactic   radiosurgical  dosimetry.    Medical  Physics,  26(10),  2144  -  2150.   Schell,  M.,  &  Bova,  F.,  (1995).      AAPM  Report  No.  54.    Stereotactic  Radiosurgery  Report  of  Task   Group  42  Radiation  Therapy  Committee.  Woodbury,  NY:  Published  by  the  American  Institute  of   Physics,  Inc.   Solberg,  T.,  &  Antonio,  A.,  (1998).  Technical  Aspects  of  LINAC  Radiosurgery  for  the  Treatment  of   Small  Functional  Targets.  Journal  of  Radiosurgery,  1(2),  115  ­  127.   Tomé,  W.,  &  Sanford,  L.,  (2000).  A  high-precision  system  for  conformal  intracranial   radiotherapy.    Int.  J.  Radiation  Oncology  Biol.  Phys.,  47(4),  1137­1143.     Tsai,  J.,  &  Buck,  B.,  (1991).  Quality  assurance  in  Stereotactic  Radiosurgery  using  a  standard   linear  accelerator.  Int.  J.  Radiation  Oncology  Biol.  Phys.,  21,  737-748.     Winkler,  P.,  &  Bergmann,  H.,  (2003).  Introducing  a  system  for  automated  control  of  rotation   axes,  collimator  and  laser  adjustment  for  a  medical  linear  accelerator.  Phys.  Med.  Biol.,  48,  1123­ 1132.     

  

106  

Glossary  
   AAPM  ­  American  Association  of  Physicist  in  Medicine   Accelerator  ­  A  device  which  accelerates  charged  particles  to  very  high  energies.   CT  ­  Imaging  modality  :  Computed  Tomography   CyberKnife  ­  A  radiosurgery  treatment  unit  consisting  of  a  miniature  Linac  mounted  on  a  robotic   arm.     Cyclotron  ­  A  machine  which  accelerates  charged  particles  in  a  circular  path  through  an  alternating   electric  field  and  static  magnetic  field.   Dose  ­  energy  absorbed  in  a  medium  through  ionizing  radiation.   EPID  ­  Electron  Portal  Imaging  Display   Fractionation  ­  The  division  of  radiation  therapy  treatments  into  multiple  treatments  or  regimens.   GammaKnife  ­  A  stereotactic  treatment  unit  which  uses  stationary  radioactive  cobalt  sources   focused  at  a  common  point.   Gy  ­  Unit  of  dose  equivalent  to  Joules/Kg.   Ionization  Chamber  ­  A  device  used  to  measure  the  ionization  intensity  of  the  gas  within  the   chamber  during  irradiation.   IMRT  ­  Intensity  Modulated  Radiation  Therapy   iPET  ­  Intermediate  Photon  Energy  Therapy   Isocentre  ­  the  location  in  space  at  which  the  radiation  beams  intersect  by  rotation  of  the  treatment   couch,  gantry,  and  collimator.   Isodose  ­  a  line  connecting  all  doses  of  the  same  value.   KeV  ­  unit  of  energy  for  particles  in  kilo-electron-volts.   Linear  Accelerator  ­  A  device  which  accelerates  charged  particles  to  high  energies  in  a  straight   path.   MeV  ­  unit  of  energy  for  particles  in  mega-electron-volts.   MLC  -  multi-leaf  collimator.    A  device  with  moveable  collimating  leafs  used  to  conform  the  radiation   to  the  target.  

  

107  

mMLC  ­  micro  multi-leaf  collimator.    A  device  with  thin  moveable  collimating  leafs  (thinner  than   typical  MLCs)  used  to  conform  the  radiation  to  the  target.   Monitor  Unit  (MU)  ­  A  numerical  value  input  to  a  medical  Linac  that  defines  the  total  dose  of   radiation  to  be  delivered.    Commonly  calibrated  to  1cGy/MU.   MRI  ­  Imaging  Modality:    Magnetic  Resonance  Imaging   Penumbra  ­  The  distance  over  which  the  radiation  dose  falls  from  80%  to  20%  relative  to  the   central  axis  dose.   PDD  ­  Percent  Depth  Dose,  the  relative  dose  of  a  radiation  beam  at  a  certain  depth  in  a  material  to   its  maximum  level.   PET  ­  Imaging  modality:  Positron  Emission  Tomography   PTV  ­  Planning  Target  Volume   QA  ­  Quality  Assurance   Radiosurgery  ­  A  non-invasive  brain  surgery  procedure  which  uses  focused  ionizing  radiation  to   treat  cancerous  tumours  and  other  lesions  in  a  single  treatment.   Radiotherapy  ­  A  medical  procedure  used  to  treat  cancer  using  ionizing  doses  of  radiation   delivered  to  the  target.   Stereotactic  Radiosurgery  (SRS)  ­  A  special  technique  of  external  beam  radiation  therapy  (EBRT)   that  uses  a  device  to  immobilize  the  patient  and  highly  focused  radiation  beams  to  treat  the  patient.                          

  

108  

Index  
A  
accessory  tray,  19   angiography,  13   iPet,  73   isocentre,  iii,  viii,  9,  12,  13,  15,  16,  18,  21,  23,  24,  25,  27,   32,  45,  48,  49,  50,  51,  52,  54,  60,  64,  68,  71,  75,  105  

L   C  
Linear  Accelerator:  Linac,  vii,  3,  4,  13,  105  

characterization,  iii,  54,  55,  64,  66,  67,  68,  70,  71,  72,  73,   75   collimator,  vii,  8,  10,  12,  13,  18,  20,  23,  75   cone,  18,  25,  27   CT,  6,  13,  14,  20   Cyber-Knife,  3  

M  
Matlab,  vii,  viii,  26,  32,  33,  34,  35,  40,  45,  50,  59,  63   medical  physics,  21,  29   Monitor  Unit,  29   MRI,  6,  13,  21  

D  
Dodecahedron,  vii,  viii,  25,  26,  27,  46,  47,  51,  54   dose  threshold,  viii,  40,  41,  42,  43   dynamic  radiosurgery,  18   neurosurgery,  6,  21  

N  

P   E  
ellipse,  40,  42,  43,  67   External  Beam  Radiotherapy,  3   penumbra,  13   phantom,  iii,  viii,  1,  13,  23,  24,  25,  27,  28,  29,  31,  33,  44,   45,  46,  47,  48,  49,  51,  52,  53,  54,  55,  58,  59,  60,  61,  62,   63,  64,  65,  66,  67,  68,  70,  71,  72,  73,  75   pixel,  viii,  20,  35,  36,  37,  39,  41,  42,  44,  67,  68   portal  imaging,  10  

F  
film  digitization,  66,  67,  68,  70   fractions,  3,  8  

Q  
quality  assurance,  21  

G  
Gafchromic,  vii,  24,  25,  27,  28,  29,  30,  37,  67,  75   Gamma-Knife,  3,  16   gantry,  vii,  viii,  6,  9,  10,  11,  12,  13,  16,  18,  19,  20,  21,  25,   26,  32,  45,  49,  50,  51,  54,  55,  59,  60,  62,  63,  66,  68,  70,   71,  72,  75  

R  
radiation  oncology,  21   radiochromic,  24,  25   radiology,  21   Radiosurgery,  1  

H  
head  frame,  4,  51  

S  
Stereotactic  Radiosurgery,  iii,  iv,  vii,  3,  4,  13,  16,  17,  20,   21,  106   Stereotactic  Radiotherapy,  8  

I  
intensity  modulated  radiation  therapy  (IMRT),  12   inverse  square  law,  43,  44  

  

109  

T  
treatment  couch,  vii,  viii,  10,  12,  16,  18,  19,  20,  25,  32,   45,  48,  51,  59,  63,  64,  70,  71,  72,  75   x-rays,  4  

X  

W  
waveguide,  vii,  9  

  

  

2  


