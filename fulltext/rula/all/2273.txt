NOTE TO USERS

This reproduction is the best copy available.

UMI'

BLEED AIR TEMPERATURE REGULATION SYSTEM: MODELING, CONTROL, AND SIMULATION

by

PETER HODAL, B. Eng. (AEROSPACE) RYERSON UNIVERSITY, 2003

A thesis presented to Ryerson University in partial fulfillment of the requirement for the degree of Master of Applied Science in the Program of Mechanical Engineering

Toronto, Ontario, Canada, 2005 © Peter Hodal, 2005
PnOPERTYOF RYERSON UNIVERSITY LIBRARY

UMI N um ber: E C 5 3 4 3 2

INFORMATION TO USERS

The quality of this reproduction is dependent upon the quality of the copy submitted. Broken or indistinct print, colored or poor quality illustrations and photographs, print bleed-through, substandard margins, and improper alignment can adversely affect reproduction. In the unlikely event that the author did not send a complete manuscript and there are missing pages, th ese will be noted. Also, if unauthorized copyright material had to be removed, a note will indicate the deletion.

UMI
UMI Microform E C 5 3 4 3 2 Copyright2009 by ProQ uest LLC All rights reserved. This microform edition is protected against unauthorized copying under Title 17, United States Code.

ProQuest LLC 789 East Eisenhower Parkway P.O. Box 1346 Ann Arbor, Ml 48106-1346

AUTHOR'S DECLARATION
I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I fiirther authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

BORROWER'S PAGE
Ryerson University requires the signatures of all persons using or photocopying this thesis. Please sign below, and give address and date.

Name

Address

Date

S io n atiirp 8

¥ o \/ô f

»

.

.

.

HI

ABSTRACT
Bleed Air Temperature Regulation System: Modeling, Simulation and Control © Peter Hodal, 2005 Master of Applied Science in the Program of Mechanical Engineering Ryerson University This thesis addresses temperature control of an engine bleed air system, as used on typical aircraft, with a control strategy aimed at reducing ram air usage while maintaining fast response. The analytical equations describing the system dynamics are presented, and a state space model of a cross-flow heat exchanger is developed. The heat exchanger model is then utilized in the modeling of the bleed air system under study. Different control strategies and configurations are analyzed and compared. In order to achieve fast temperature regulation while saving ram air usage, a ram-air-plus-bypass control configuration is proposed, along with the control of both load temperature and bypass valve opening. Classical P I control is employed, and a hybrid LQ/PI control method is additionally investigated for the proposed control configuration. Simulations for each control strategy are performed using a nonlinear dynamic model at several sample mission operating points, with consideration of disturbances in engine loading or ambient conditions. Comparisons are made and conclusions are drawn based on these simulations. The proposed configuration and control strategy prove to be more effective in terms of satisfying both low ram air usage and fast temperature control response.

IV

ACKNOWLEDGMENTS
The author would like to express his gratitude to his supervisor, Dr. Guangjun Liu for his unfailing support and guidance before, during and after the process of this work. The author's gratitude also goes to Dr. Chunho Lam who provided valuable suggestions in the theoretical and experimental work of the pneumatic control system. Special thanks are given to the author's colleagues at the Systems and Control Laboratory of Ryerson University: Guozhong Gerry Bao, Che-Hang Cliff Chan, Dejun Wang, Mathew Adamson, Fiona Yiu, Yan Feng, and Mark Laderman for their beneficial discussions on modeling and control theories. Finally, the author would like to express his appreciation to the Government of Ontario for an Ontario Graduate Scholarship (DOS).

TABLE OF CONTENTS
ABSTRACT ......................................... IV V VI IX XIII XIV

ACKNOWLEDGMENTS. ..... ------ .................. TABLE OF CONTENTS....----------------LIST OF FIGURES................ LIST OF TABLES. NOMENCLATURE. CHAPTER 1
1.1 1.2 1.3

.......___ ____ ___ ................. ......................................................................................

INTRODUCTION---------------

-- ..................1

U se of E n g in e B leed A ir in A ircraft E nv ironm en t C o n tro l S ystem s .. 1 O verview o f T em perature C on tr o l ....................................................................... 1 A n O verview of H ea t E xch ang er D esign and A pplic a tio n s ....................... 5

1.3.1 1.3.2
1.4 1.5

Types o f Heat Exchangers...................................................................... 6 Heat Exchanger Modeling and Design.................................................. 8
T hesis O b jectives a n d C o n tr ib u tio n s ..................................................................11 T hesis O u t l in e ............................................................................................................... 12

CHAPTER 2
2.1

MODELING OF THE BLEED AIR SYSTEM_______________ 13 Simplified Heat Transfer Model............................................................ 14 State-space Heat Exchanger Model...................................................... 16 Implementing the model in MATLAB................................................... 23
A ir S y s te m M o d e lin g ....................................................................................29

H ea t E x ch a n g er M o d e l in g ......................................................................................13

2.1.1 2.1.2 2.1.3 2.2 B le e d 2.2.1 2.2.2 2.2.3 2.2.4 2.2.5 2.2.6 CHAPTER 3

Bleed and Ram Air Sources..................................................................30 Control valves and flow calculation ..................................................... 31 Heat Exchanger.................................................................................... 35 Load ...................................................................................................... 37 Temperature Sensor.............................................................................. 39 Channel Flow Simplifications............................................................... 40 RAM AIR CHANNEL AND BYPASS CHANNEL CONTROL STRATEGIES AND SIMULATIONS.............................................41

3.1 3.2

C on tro l D esign A pp r o a c h ....................................................................................... 42 R a m A ir C h a nn el C o n t r o l ......................................................................................46

3.2.1 3.2.2

Open-loop linear model o f the ram air channel control configuration .............................................................................................................. 48 Tuning o f Controller Parametersfo r the Ram Air Channel Control Configuration....................................................................................... 53

VI

3.2.3
3.3

Closed-loop nonlinear simulations fo r the ram air channel control configuration...................................................................................................... 57
B ypass C ha nnel C o n t r o l ........................................................................................ 62 Configuration D etails...................................................................................... 62

3.3.1 3.3.2 3.3.3 3.3.4 3.3.5

Open-loop linear model o f the bypass channel control configuration 64 Tuning o f Controller Parameters fo r the Bypass Control Configuration..................................................................................................... 69 Closed-loop nonlinear simulations fo r the bypass channel control configuration...................................................................................................... 72 Comparison and discussion o f simulation results fo r ram air channel control and bypass channel control configurations................................ 77 RAM-AIR-PLUS-BYPASS CONTROL CONFIGURATION..... 81

CHAPTER 4
4.1

4.1.1 4.1.2 4.1.3 4.1.4
4.2

4.2.1 4.2.2

T r a d i t i o n a l P I C o n t r o l ............................................................................................ 83 Control Law ........................................................................................................ 84 Linear Open-Loop MIMO Plant Model.......................................................85 Bypass Channel Controller............................................................................. 91 Ram Air Channel Controller.......................................................................... 93 LQ/PI S elf -tu n in g C o n t r o l .......................................................................... 96 LQ-Optimal Bypass Controller...................................................................... 98 Self-tuning approach...................................................................................... 100

CHAPTER 5

SIMULATION STUDIES OF THE RAM-AIR-PLUS-BYPASS CONTROL CONFIGURATION ........................................102

5.1

P I C o n t r o l S im u la tio n s .......................................................................................... 106 5.1.1 Operating Condition #5..,,............................................................................ 106 5.1.2 Operating Condition # 7 ................................................................................. 108 5.1.3 Operating Condition #22 ...............................................................................110 5.2 LQ/PI C o n t r o l S im u la tio n s ................................................................................... 112 5.2.1 Operating Condition #5 ................................................................................. 112 5.2.2 Operating Condition #7 ................................................................................. 114 5.2.3 Operating Condition #22 ...............................................................................116 DISCUSSIONS.................................................................................. 118

CHAPTER 6 6. 1
6.2 6.3 6.4

H e a t E x c h a n g e r a n d B le e d A ir S y s te m M o d e l i n g .....................................118 P relim inary C on tro l C o n fig u r a t io n s ............................................................. 120 R a m -A ir -P lus -B ypass C on tro l C o n fig u r a t io n ............................................122 S im ulation S tudies of P ractical I ss u e s ........................................................... 132

CHAPTER 7
7.1 7.2

CONCLUSION................................................................................. 140

C on clu ding S t a t e m e n t s ......................................................................................... 140 R ecom m en dations fo r F u tu re R e s e a r c h .........................................................143

APPENDIX......................................................................................................................145

V ll

REFERENCES.

.....

1^7

Vlll

LIST OF FIGURES
Fig. 1.1: A functional block diagram of a general control system (from [1], p.91).............. Fig. 1.2: Three control system configurations: (a) ram air channel control, (b) bypass channel control, and (c) ram-air-plus-bypass control............................................ 3 2

Fig. 1.3: Plate-fin cross-flow heat exchanger core.................................. ...................................................8 Fig. 2.1: Heat transfer to a surface of constant temperature.......................... .................................... 15 Fig. 2.2: Cross-flow heat exchanger schematic.............. 17 Fig. 2.3: (a) Division of heat transfer surface into A^xN lumps, (b) individuallump nomenclature... 18 Fig. 2.4: Steady-state heat exchanger core [plate surface] temperature distribution...........................25 Fig. 2.5: Steady-state hot-side fluid temperature distribution................................................ Fig. 2.6: Steady-state cold-side fluid temperature distribution 26 .................................................... 26

Fig. 2.7: Hot-side fluid outlet temperature (mean) response to a 40 °F stepincrease in T h*,: (a) hot-tocold fluid flow-rate ratio near unity, (b) very low hot-to-cold fluid flow-rate ratio (near 0.068)27 Fig. 2.8: Effect of increasing N on the steady-state results...................................................................... 28 Fig. 2.9: Butterfly valves...................... 31 Fig. 2.10: Block diagram of control valve dynamics and resulting flow rate calculation.....................34 Fig. 2.11: Block diagram representing heat exchanger model implementation ..................................35 Fig. 2.12: Block diagrams for the linearized heat exchanger pressure drop equations: (a) hot-side (b) cold side.................................................................................................................................................37 Fig. 2.13: Block diagram representing the linearized load impedance equation...................................38 Fig. 2.14: Block diagram for determining temperature of the mixed flow............................................39 Fig. 2.15: Block diagram of sensor dynamics..................... Fig. 3.2: Schematic of the ram air channel control configuration....................... Fig. 3.4: Step response of the ram air channel open-loop configuration. ............. 39 46 52 54 55 56 Fig. 3.1: Block diagram for a feedback system with reference and disturbance inputs.......................43 Fig. 3.3: Linear, open-loop plant model for the ram air channel control configuration.......................51 Fig. 3.5: Pole-zero map of the open-loop model (ram air channel control configuration)....................53 Fig. 3.6: Step response for a closed-loop system with a proportional controller gain of 10.......... Fig. 3.7: Unit step in reference input responses for varying proportional gain: (a) in the range of [0.5-5] at increments of 1.5, (b) in the range of [O.l-l.O] at increments of 0.1...... ;......... Fig. 3.8: Proportional gain sweeps for different values of integral time constant............. Fig. 3.9: Response to a unit-step increase in temperature set-point ( =0.2,

=100): (a) load

temperature (solid curve), measured temperature (dotted curve), (b) ram air flow rate........... 60 Fig. 3.10: Response to a 40 °F step increase in bleed air temperature { K =0.2, 7 ) = 1 0 0 ) : (a)

load temperature (solid curve), measured température (dotted curve), (b) ram air flow rate... 60

IX

Fig. 3.11: System response to reference and disturbance inputs

=100), load

temperature (solid curve), measured temperature (dotted curve): (a) unit step in set point (b) 40 ®F step increase in bleed air temperature.................................................................................. 61 Fig. 3.12: Schematic of the Bypass Channel Control Configuration...................................................... 62 Fig. 3.13: Linear, open-loop Simulink model of the plant (bypass channel control configuration)..... 66 Fig. 3.14: Step response for the bypass channel open-loop configuration..........-- ...................-- .... 67 Fig. 3.15: Pole-zero map of the open-loop model (bypass channel control configuration)................... 69 Fig. 3.16: Sweeps in for proportional control: (a) wide range [1-5], (b) narrower range

[0.2-1.21------------------------------------------------------------------------------------------------------------- 70 Fig. 3.17: Sweeps in proportional gain for PI control, for various values of integral time constant.. 71 Fig. 3.18: Nonlinear simulation response to a unit-step increase in reference input, =0.9,

bypass "^0: (a) load temperature (solid curve), measured temperature (dotted curve), (b) bypass flow ratio ...............................................................................................................................75 Fig. 3.19: Nonlinear simulation response to a 40 ®F step increase in bleed air temperature K pi,^^ =0.9, =30: (a) load temperature (solid curve), measured temperature (dotted curve),

(b) bypass flow ratio....................................................................................................................... .. 75 Fig. 3.20: Nonlinear simulation response to reference and disturbance inputs, =2.0,

=25, load temperature (solid curve), measured temperature (dotted curve): (a) unit step increase in temperature set-point (b) 40 °F step increase in bleed air temperature................... 76 Fig. 4.1: Schematic of the ram-air-plus-bypass control configuration................................................... 81 Fig. 4.2: Linear, open-loop MIMO model of the plant for the ram-air-plus-bypass control configuration..................................................................................................................................... 86 Fig. 4.3: Step responses from the two inputs (jU bypass and u ,,^ to the load temperature .............. 89

Fig. 4.4: Step responses from the two inputs ( « t ,^ and Umn) to the bypass valve opening command Fig. 4.5: Closing the bypass control loop................................................................................................. 91 Fig. 4.6: Responses for varying proportional gain, with =25: (a) unit step reference

(temperature set-point) input, (b) disturbance input (40 °F step increase in bleed air temperature).................--.........--.................................................................................................... 92 Fig. 4.7: Responses for varying proportional gain, with =15: (a) unit step reference

(temperature set-point) input, (b) disturbance input (40 *F step increase in bleed air temperature)...................................................................................................................................... 92 Fig. 4.8: Open-loop response in the bypass valve percent-opening for a unit-step increase in u,amt with the bypass control loop closed................................................................................................. 94

Fig. 4.9: Ram-air-plus-bypass control system, with both control loops closed.................................... 94 Fig. 4.10: Gain sweeps for a unit step increase in bypass valve opening set-point (reference input): (a) bypass valve opening response, (b) load temperature response.......................................... ... 95 Fig. 4.11: Gain sweeps for a 40 °F step increase in bleed air temperature (disturbance input): (a) bypass valve opening response, (b) load temperature response..................................................... 95 Fig. 4.12: Bypass LQ controller schematic......................................................................... . .... . . . ... ... 99 Fig. 5.1: System response to input A at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio. ..........................106 Fig. 5.2: System response to input B at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio................................................ 107 Fig. 5.3: System response to input C at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio................................................ 107 Fig. 5.4: System response to input v4 at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio........................................ Fig. 5.5: System response to input B at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio...................................... Fig. 5.6: System response to input C at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio..................................................109 Fig. 5.7: System response to input X at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio....................^........................... 110 Fig. 5.8: System response to input B at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio. .......................... valve opening, (c) ram air mass flow rate, (d) bypass flow ratio............................ Fig. 5.10: System response to input X at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio................................................. 112 Fig. 5.11: System response to input B at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio.......................:........................ 113 Fig. 5.12: System response to input C at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio............................... ..............113 Fig. 5.13: System response to input ^ 4 at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio................................................. 114 Fig. 5.14: System response to input B at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio.................................................. 114 Fig. 5.15: System response to input C at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio................................................. 115 I ll I ll 109 108

Fig. 5.9: System response to input C at operating condition #22: (a) load temperature, (b) bypass

XI

Fig. 5.16: System response to input

at operating condition #22: (a) load temperature, (b) bypass

valve opening, (c) ram air mass flow rate, (d) bypass flow ratio............................... .. . ........ 116 Fig. 5.17: System response to input B at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio.................................................. 116 Fig. 5.18: System response to input C at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio.................................................. 117 Fig. 6.1: ^ Temperature response to disturbance and reference inputs, operating condition #7, high proportional gains: (a) 40 °F step increase in bleed air temperature, (b) 1 °F step increase in load temperature set-point ........................................................ 124

Fig. 6.2: Temperature response to disturbance and reference inputs, operating condition #7, low proportional gains: (a) 40 °F step increase in bleed air temperature, (b) 1 ®F step increase in load temperature set-point......................................... temperature response, (b) bypass valve opening r ' e s p o n s e 125 126

Fig. 6.3: Response to Input A, operating condition #7, with increased ram air proportional gain: (a) Fig. 6.4: Comparison of P//P/control with Z 0 /P /control, at operating condition #7, with input/4: (a) load temperature response, (b) bypass valve opening response.......................... 1..................... 130 load temperature response, (b) bypass valve opening response........;......................;..:.......:....... 130 Fig. 6.6: Comparison of PUPI control with LQ/PI control, at operating condition #7, with input C: (a) load temperature response, (b) bypass valve opening response.................................................. 131 Fig. 6.7: Load temperature response for input A at mO sec, followed by a unit step increase in temperature set-point at mlOO sec: (a) controller parameters unchanged throughout, (b) proportional gains decreased at the time of the set-point change.......!...........:............................133 Fig. 6.8: Load temperature response to Input A a t M ) sec, a unit step increase in temperature setpoint at t=100 sec, and Input B at /=140 sec: (a) adjusted proportional gains restored 200 ' seconds after set-point change, (b) proportional gains restored 20 seconds after set-point change 134 Fig. 6.5: Comparison of P//P/control with Z g/Pf control, at operating condition #7, with input P: (a)

Fig. 6.9: System response to Input A at t=0 sec, and a step increase of 0.5% in bypass valve-opening set-point at t=200 sec....................;.............;.;.................:............................................:.....:....,........ 137

XU

LIST OF TABLES
Table 2.1: Inputs to the heat exchanger subroutine for a sample steady-state simulation... ............. 25 Table 2.2: Operating conditions: typical mission and atmospheric data..................... . .. Table 3.2: Initial steady-state values for operating condition #7 (ram air channel control configuration) ........................................................................... 50 .....................57 Table 3.3: Percent overshoot and settling time for a response to a unit-step in reference input, as functions of controller proportional gain and integral time constant Table 3.4: Variable nomenclature transformation for the bypass channel control valve.................. 63 Table 3.5: Initial steady-state values for operating condition #7 (bypass channel control configuration)................................................................................................................................ 65 Table 3.6: Percent overshoot and settling time for a response to a unit-step in reference input, as functions of controller proportional gain and integral time constant........................................... 72 Table 4.1: Initial steady-state values for operating condition #7 (ram-air-plus-bypass channels control configuration)................................................................................................................. ..... 88 Table 5.1: Operating conditions and corresponding mission data selected for nonlinear simulations ___________________________________________ ....________ 105 Table 5.2: Initial steady-state conditions, at operating condition #5, with 10% bypass flow ratio ..106 Table 5.3: Initial steady-state conditions and controller parameters, at operating condition #7, with 10% bypass flow ratio.......................................................................................................................108 Table 5.4: Initial steady-state conditions, at operating condition #22, with 10% bypass flow ratio 110 Table 6.1: A comparison of ram air mass flow rate ih^am for the three control configurations studied in this thesis ..................................................................................................................................... 123 ........ 30 Table 3.1: Variable nomenclature transformation for ram air channel control valve........................ 47

xm

NOMENCLATURE
Roman C p d dt g m mcs h t A AVE B BR C D Ebypass Etemp Free H ITEweight J K L M Mach MCs N OS . . specific heat of fluid valve diameter; . ...» /' -pipe ` diameter · nonlinear model time step gravity constant lump-level fluid mass flow rate lump-level heat exchanger core thermal mass local heat transfer coefficient; lump-level heat transfer coefficient time state-space model system matrix; valve opening area heat exchanger output averaging matrix state-space model input matrix bypass flow ratio state-space model output matrix state-space model feed-forward matrix b^^ass valve opening error load temperature error pressure recovery factor total heat transfer coefficient for heat exchanger hot/cold side integral temperature error weight LQ-optimal performance index function gain constant heat transfer surface characteristic length fluid mass flow rate aircraft speed heat exchanger core thermal mass heat exchanger plate partitioning dimension percent overshoot .
" '* *

XIV

P Pdrop Q R SDweighi T U X Y Y'

pressure pressure drop heat transfer rate; states-deviation penalty weight universal gas constant; control effort penalty weight State deviation weight temperature state-space input vector state vector state-space model output heat exchanger state-space model intermediate output vector

Greek P ^ y r control valve angle opening pressure ratio ratio of specific heats time constant

Subscript amb bleed ambient (atmospheric) condition total bleed air

bleedhypass bypass-channel bleed air bleedmain main-channel bleed air bypass c ci
CO

bypass channel valve cold side cold-side fluid inlet cold-side fluid outlet valve downstream location hot side hot-side fluid inlet hot-side fluid outlet heat exchanger plate row index

d h hi ho /

XV

in
^bypass ^ram j

inlet integral bypass control integral ram air control heat exchanger plate column index load measured at the load LQ-optimal operating point outlet proportional bypass control proportional ram air control ram air channel valve heat transfer surface; heat exchanger core set-point temperature sensor valve upstream location control valve

load load,, Iq a out
Pbypass ^ram

ram s sp ts u
V

SuDerscript ci
CO

lump cold-side fluid inlet lump cold-side fluid outlet lump hot-side fluid inlet lump hot-side fluid outlet lump surface

hi ho s

XVI

CHAPTER 1 INTRODUCTION
The purpose of this chapter is to provide background information, and to introduce some underlying materials pertinent to the subject of the thesis. Furthermore, it presents the objective and contributions of the thesis work. At the end of this chapter, an organization outline for the remainder of the thesis is presented.

1.1

Use of Engine Bleed Air in Aircraft Environment Control Systems
The development of jet engines led not only to advances in thrust generation, but

also to the evolution of aircraft pneumatic systems, especially on transport aircraft. The high-pressure and high-temperature engine bleed air is commonly used for various tasks on the aircraft. These include a wide variety of fimctions, such as airconditioning/heating, wing and engine anti-ice protection, as well as windscreen demisting and rain dispersal. The aforementioned tasks require the supply air to be at certain conditions, such as specific temperatures, in order to be utilized in a desirable way. In this thesis, the concern is the temperature of the bleed air being delivered to the load. The objective is to efficiently regulate the load temperature at a desired level, with emphasis on low ram air usage. Since the actual temperature of the engine-bled air (bleed air) and ram air change continuously during operation, along with many other factors involved in the overall system, feedback control is required for the temperature regulation.

1.2

Overview of Temperature Control
Temperature control is used to hold one or more masses within a certain

temperature range. In this case, the `mass' is the supply bleed air at the load, and in order to keep it at a desired temperature, a control system must be designed and implemented accordingly. When speaking of a temperature control system, one is referring to the physical and mathematical combination of the structures that contain the temperature-

controlled mass, the disturbances to which they are subjected, as well as the components used to regulate its temperature [1,2,3]. A typical temperature control system (Fig. 1.1) consists of a group of components _ combined to regulate the temperature of a mass.^ The objective is to maintain the controlled temperature at its desired set-point, in the presence of disturbances to the system. For the bleed air temperature regulation system analyzed in this thesis, the supplied bleed air temperature at the load is to be controlled at a set-point value of 190 °F. A temperature sensor is located at_the-loady-and measures the temperature for Control valves play the role of final control elements, by .

feedback purposes.

manipulating the flow rate in their respective channels, and thus effectively changing the thermal energy carried by the air stream.
disturbance

Reference input

Actuating signal

Control elements

Manipulated variable

Controlled system

Controlled variable

Primary feedback Feedback elements

Fig. 1.1: A functional block diagram of a general control system (from [1], p.91)

As already mentioned, a source of the supply air stream is the aircraft's engine, from which theJiot.bleed.air.is extracted.. To cool the hot bleed air. air is collected from. ^ . the aircraft's boundary layer and is employed for heat exchange between the air streams. This air stream is referred to as the ram airflow . A heat exchanger device is used to exchange thermal energv.betweea.the-two air streams. Bleed air flows through the heat exchanger's hot side, while ram air flows through the cold side. Bleed air leaving the heat exchanger then proceeds to flow either directly towards the load, of, in cases with a bypass placed on the bleed air channel, is first mixed with the bypassed flow and is then fed to the load.

Engine bleed air temperature varies significantly under idle, take-off and cruise operation conditions. Ram air temperature and humidity can also vary largely with changes in atmospheric and aircraft flight conditions. Without regulation, the bleed air temperature at the load will thus fluctuate wildly. To give the system the ability to manipulate certain variables for regulation purposes, control valves can be placed in either channel. Different control approaches can be used for regulation, sharing many common characteristics, while differing mainly in the control valve configuration and the applied control law. Three different configurations of the temperature regulation system are analyzed in this thesis, and are shown in Fig. 1.2 below.
ram air ram air
I bleed '" T I . _____ L

^R AV >RAV
bleed i

j>RAV
1 _______ IC Z IL ^

air

heat exchanger |-- |loadf- >

'

-- | heat exchanger |

-i--(load^- ^

Meed______ _______________ I________

-- |-- | heat exchanger |

p

(a)

(b)

(c)

Fig. 1.2: Three control system configurations: (a) ram air channel control, (b) bypass channel control, and (c) ram-air-plus-bypass control

in the first configuration, termed ram air channel control and shown in Fig. 1.2 (a), a control valve (RAV) is placed into the ram air channel. The valve manipulates the flow rate of the cooler ram air, thus affecting the temperature of the bleed air stream . leaving the heat exchanger. This configuration does not have a bypass on the bleed air stream, and hence bleed air temperature leaving the heat exchanger is equal to the air temperature at the load\ The second configuration, shown in Fig. 1.2 (b), is termed ^ ^ p a s s channel control. Most of the bleed air goes through the heat exchanger's hot-side, while a small portion of the overall bleed-flow is made to bypass the heat exchanger via the bypass channel, to be mixed downstream with the main bleed air flow exiting the heat exchanger. The combined air flow then proceeds to the load. This method utilizes a control valve ÇBPV) in the bypass channel to manipulate the ratio of main-to-bypass bleed air flows, thus regulating the temperature of the flow delivered to the load. The last configuration. Fig. 1.2 (c), is termed ram-air-plus-bypass control, and essentially combines aspects of both former arrangements. The structural arrangement of its

' Neglecting heat joss to the surroundings, as will be outlined later in the report, when the assumptions made will be listed.

components is very close to that of bypass channel control, with the addition of a control valve placed in the ram air channel. However, as will become evident later on in the thesis, this last configuration differs not only in structure, but also in its uniquely defined control law, aimed at reducing overall ram air usage. The details of controller design will be discussed in Chapter 3. These configurations are presented and analyzed in this thesis to show advantages and disadvantages of each, and in order to demonstrate a logical progression towards the final solution to the thesis objectives. In fact, the first two configurations are riot entirely new, and have been applied in various forms in the past, covering a broad range of temperature control systems and applications. Katayama et al. [4] demonstrated optimal tracking control of a shell and tube heat exchanger with changes in load condition. Their study involved the use of proportional-integral-derivative (PID) as well as linearquadratic-integral (LQI) regulators, while the control structure of their system resembled that of the ram air channel control described here. Manipulation of the non-controlled stream is also used in the work of Paruchuri et el. [5], in which a process-model based controller is experimentally demonstrated for control of tube-side outlet temperature in a steam/water heat exchanger. Studies of heat exchangers with a bypass can similarly be found in literature. In their study of heat exchanger networks (HENs), Varga et al. [6] demonstrate their results using a counter-current heat exchanger with a bypass. They identify these networks as prone to exhibiting large overshoots responses for disturbances in the bypass ratio. A comparative study between two different control configurations can be found in the work of Rotea et al. [7], which deals with integral control of heatexchanger-plus-bypass systems. Here, die first configuration is of the bypass channel control type, while the second configuration is of the ram air channel control type. Their results demonstrate the advantages, in terms of response time, of placing a bypass on the stream whose temperature is to be controlled, thus confirming the earlier findings of Shinskey [1]. Although the modeling and details of their system differ substantially from the bleed air system of this thesis, this general characteristic [of bypass configurations] plays a key role behind the development of the proposed final control configuration in this thesis. For their super-heater temperature control system, Forrest et al. [8] consider a multi-loop control design to improve on the more traditional cascade control structure.

Their research included the use of a scalar linear-quadratic-gaussian (LQG) self-tuning controller module, for improved disturbance rejection and ability to deal with timevarying process behaviour. Orzylowski et al. [9] discuss optimal and suboptimal control, based on the linear-quadratic {LQ) performance index, for their furnace batch temperature control system. Yet another temperature control application is found in the woric of Mizoguchi et al. [10], where the temperature of a beverage at a bottle filling plant is regulated using a bypass valve in the coolant flow channel. A plate heat exchanger model is used to describe the heat transfer, and a state-feedback plus integrator controller is employed to regulate the beverage temperature. Thus, temperature control is well documented in the literature, in a wide variety of applications. However, although some of the concepts advanced by the above discussed studies apply in parts to the ram air channel and the bypass channel control configurations studied here, the particular details, modeling and control laws differ, in some cases quite significantly, from the bleed air temperature system model that will be developed in this work. Thus, studies will be presented for these two preliminary control configurations first, as applied to bleed air system analyzed in this thesis. The insights gained from such analysis, along with some preliminary simulation results, will be used in order to develop the proposed ram-air-plus bypass control configuration.

1.3

An Overview of Heat Exchanger Design and Applications
The occurrence of heat exchange between bleed air and ram air streams is of vital

importance in the bleed air regulation system. By no means unique to this system, the heat transfer between fluids of differing temperatures occurs in countless engineering applications. A heat exchanger is the device that implements such an exchange, effectively changing the temperature distribution of the two fluids. They can be found in many applications, such as chemical processing [9,10], automobiles and aerospace vehicles [11,12], metallurgy [9], air-conditioning [1], power production [4,8], waste heat recovery etc. [13]. What follows in this section will present some of the background information pertaining to heat exchanger classification, design, and performance.

In a heat exchanger, a heat transfer process takes place between two or more fluids. As will be discussed below, there are innumerable types and arrangements of heat exchangers used in the industry. Many heat exchangers are essentially open loop systems, meaning that their performance is basically determined by its structural and m e ^ anical design. whichis-fixed.ri41. Despite all the varieties and types of heat exchangers, the basic thermal relationships that,take.place_are thé same^in all cases, and follow from basic heat transfer , theory. These relationships are: j i ) ^ e heat transfer rate at any section of the heat exchanger is proportional to temperature difference between the fluids at that section, and \^ (ii) each element of a moving fluid involved in the exchange experiences a change in temperature along the direction of flow, which is proportional to its rate of heat dissipation/absorption [1]. The analytical equations are outlined in Chapter 2, where a detailed analysis of a heat exchanger model is presented.

1.3.1 Types o f Heat Exchangers^
A staggering number of different types of heat exchangers are used in the industry today. From very low cryogenic temperatures (e.g., 4 K) to very high temperatures (above 1700 K), and from vacuum states to very high pressures (above 3000 bar), they cover a wide range of temperature and pressure applications [15]. The fluids that participate in the heat transfer may be single phase streams, such as liquid or gas, or can be two-phase streams such as air and vapour. The nature of the fluids, along with the expected range of applied temperature and pressure, place specific demands upon the material and construction of the heat exchanger (that is to be used in a particular application). This is the feason behind the diversity of types, sizes, and arrangements of heat exchangers. Heat exchangers are typically classified according to their type of construction (geometrical/structural characteristics) and their flow arrangement. All industrial heat exchangers can first be classified into two groups: (i) recuperative and (ii) regenerative heat exchangers, which can be fiirther categorized into fiirther sub-groups. Recuperative
^ What follows here is only a short overview; for a more complete discussion of the types and classification of heat exchangers, see Dynamic Behaviour of Heat Exchangers, Chapter 2, by Roetzel, W. andXuan, Y.

heat exchangers are more common than the latter, and are the type of exchangers in which the fluids are separated from each other by a solid wall and flow continuously in their particular channel. Regenerative heat exchangers are composed of solid matrices to which heat is transferred from the fluids. However, the transfer of heat is indirect - the fluids flow over the same surface during separate time spans, and heat is absorbed by the solid matrix during the hot cycle, and transferred to the colder fluid during the cold cycle [15]. Recuperative heat exchangers can be further classified according to their structure and flow arrangement. The most common way is to split them up into the tubular and plate types. As implied by the name, tubular exchangers are composed of tubes that form the flow channels and heat transfer surfaces. Two common examples of this type are double-pipe heat exchangers and shell-and-tube heat exchangers. Furthermore, the flow arrangement in these heat exchangers can vary with the application. Parallel flow refers to the case in which fluids enter and exit at the same ends, and flow in the same direction. Counter-current flow arrangements entails the opposite - the fluids enter and exit at opposite ends, and flow in opposing directions. These are the two most common flow arrangements used in tubular heat exchangers, but other configurations are possible, such as the cross-flow flow arrangement. ,

This last type of flow arrangement is widely used in plate-fin heat exchangers. The plate-fin heat exchangers are composed of thin plates and fins that form the flow channels and heat transfer surfaces. The fluids flow through fine and narrow conduits between alternate parallel plates, as is depicted in Fig. 1.3. Different flow arrangements are possible, but cross-flow is most common. Roetzel and Xuan [15] give two possible reasons for this: (i) the cross-flow arrangement is more convenient and economical than other arrangements in most cases; (ii) this arrangement is preferable for most exchangers with a dense assemblage of fins, as other arrangements are impractical with respect to low flow friction and effective heat transfer. In addition to the actual flow arrangement, each of the fluid flows can be mixed or unmixed, with respect to the direction perpendicular to its flow direction. Three possible flow patterns are possible in a single pass cross-flow heat exchanger: (i) both fluid unmixed, or (ii) both fluids mixed, or (iii) one fluid mixed and the other unmixed [16]. All of these flow characteristics alter the

heat transfer process and influence the heat exchanger performance, and thus must be carefully considered in the design and modeling of the heat exchanger.

cold side fluid

parallel
plates

hot side fluid
Fig. 1.3: Plate-fin cross-flow heat exchanger core^

The plate-fin heat exchangers are increasingly being used in industry where weight and compactness are of importance, as in the case of automobiles, aerospace vehicles, and electronic equipment [11,12]. In fact, these applications gave rise to special types of the plate-fin exchangers, known as compact heat exchangers. They are characterized by a high ratio of heat transfer surface to heat exchanger volume, which gives them excellent compactness and heat transfer characteristics. Generally, any heat exchanger is defined as compact if this ratio exceeds 700 m^/m^ [16,17]. In some cases, fabrication of ever-smaller compact heat exchangers in automobile and aerospace industries led to micro-cross-flow heat exchangers, typified by their extremely small scale and very low pressure drops [11]. Since a low weight, small volume and high heat transfer , effectiveness are especially important in aerospace application, compact heat exchangers are perfectly suited for the aircraft bleed air temperature regulation system.

1.3.2 Heat Exchanger Modeling and Design
It is a common practice to design and rate the performance of heat exchangers based on steady-state procedures. Such methods yield thermal energy balances between the fluids partaking in the heat exchange, along with their time-independent temperature
Reproduced from [7], p. 584

8

profiles. There are a number of techniques, of which the mean temperature difference, and the ATfAeffectiveness are the two most widely used. With knowledge of boundary (inlet) conditions and heat exchanger structure, these techniques readily yield overall heat exchanger effectiveness, from which overall heat transfer and outlet temperatures can be easily obtained. Thus, such steady-state approaches are valuable in rating heat exchanger performance, and are viable tools in the selection process of particular heat exchangers for a specific task [1,13,16]. Steady-state analysis is not enough for cases where the transient process of the heat exchanger is of importance. During start-up, shutdown, or any variations in the flow rates and/or temperatures of the participating fluids, the heat exchanger will be in a transient mode. Given enough time following transient operation, the heat exchanger will again approach a steady-state condition. However, during transient mode a dynamic analysis is necessary in order to properly model or predict heat exchanger behaviour. This is especially true in control system design, where transient response of the heat exchanger subject to disturbances and manipulated variables is of significant importance. Various techniques exist for dynamic modeling of heat exchangers, and in most cases, are tailored to the specific task at hand. The analysis can be either analytical, or experimental in nature, or both. The first method involves a very carefril analysis of the governing physical laws, startinjg from first principles, and then moving on to derive an analytical model of the heat exchanger [2,11,12]. For an accurate model, detailed knowledge of heat exchanger structure and parameters must be known. Although such a model is very robust (derived from first principles, it should be valid for any operating conditions), it is often too complex to be implemented with ease in control system design. On the other hand, the second method treats the physical structure as a `black box', and is based on dynamic input-output experiments. From such experimental data, model-fitting techniques are then used to come up with a model that most closely resembles the observed behaviour [18]. This technique is popular in control design, since the model order can be kept fairly low. However, such a model is only valid within certain range of operating conditions, and in order to expand this range, a vast number of input-output data must first be collected.

For application to control system design, several other methods and combinations of the aforementioned approaches to dynamic heat exchanger modeling have been implemented. Approximate analytical techniques and model reduction can be used to reduce the complexity and order of the heat exchanger model, as studied by Xia et al. [14]. Quite often, a structural model is developed fi-om first principles, and then experimental input-output data are used, in conjunction with identification techniques, to estimate physical parameters of the heat exchanger and the fluids. Maschke and Chantre [19] demonstrate such methods in modeling and parameter identification for a double pipe counter-current heat exchanger in, while Mutambara et al. [20] used the Extended Kalman Filter (EFK) method to estimate the models parameters and states. Zandi et al. [12] simplify the modeling of complex compact heat exchangers by developing a fluid network heat exchanger model that is coupled with main thermal CFD solution schemes. The transient behaviour of a heat exchanger can be generally described mathematically by a mixed set of partial differential and algebraic equations. The differential equations are nonlinear in nature due to dependence of the heat transfer coefficient on the fluid flow rates and temperatures [20]. Moreover, the heat exchanger is a distributed system, and thus a proper model should not only be function of time, but of space as well. Roetzel and Xuan [15] use Laplace transforms to describe the dynamics of heat exchangers. However, a more widely used method of modeling such partial differential equations, especially for control applications, makes use of lumped parameter methods. The direct lumping procedure [6,10,12,14,19,20,21] divides the heat exchanger into a finite number of sections, or lumps, each of which is considered a control volume over which the relevant heat transfer equations are applied. State-space modeling procedures based on this technique can be found for parallel-flow heat exchanger [14], co-current shell and tube exchangers [12], and for counter-current double-pipe [6,19], and plate [10] heat exchangers. The approach taken in this thesis also combines aspects' of both analytical and experimental modeling. Empirical relations describing the heat transfer coefficients as a function of flow rate are employed (based on experimental input-output data). A simplified analytical model is derived and uses these equations in place of actual physical parameters. Direct lumped parameter procedure is used, along with partitioning of the

10

heat exchanger to derive the state-space model. presented in Chapter 2.

The details of the procedure are

1.4

Thesis Objectives and Contributions
There are several objectives for the research work presented in this thesis. First

and foremost, it is desired to efficiently supply engine bleed air to the load at a prescribed temperature, in light of disturbances arising from varying engine or atmospheric conditions. For this purpose, a control system must be designed to control the bleed air temperature, with fast transient response and high steady state accuracy. In addition, this thesis focuses on the general reduction in the ram air usage while retaining fast temperature control response, something not addressed in the literature. direct consequence of low ram air usage. It will be shown later that the above two objectives are not independent and involve trade-offs between them. Thus, the real aim of this work is to implement a temperature control system that balances both goals in a satisfactory fashion. In other words, the objective truly lies in finding a control strategy thatjsimultaneouslv-achieves-- both efficient (fast) response and low ram air usage, to a certain degree (as there are trade-offs betweenthe two). A multiple-input-multiple-output (MIMO) control strategy is developed in this thesis to address both objectives. The proposed control system structure is studied by building linear and nonlinear models and analyzing the subsequent results. P I controller tuning procedures are demonstrated, with the use of linear models to obtain quick estimate results. Nonlinear models are presented to provide a more accurate representation of the time-varying behaviour of the actual system. A hybrid LQ/PI control law is proposed, to investigate temperature response improvement, as well as self tuning capabilities for the temperature-regulation control loop. Based on the simulation results, conclusions will be drawn, along with discussions on some practical application issues. Recommendations for further research and study will be proposed. Aircraft applications will thus benefit from a reduction in overall drag and fuel consumption, as a

11

An additional contribution is the modeling of the bleed air temperature system for this particular application, particularly the development of the heat exchanger model for dynamic simulations. A state-space model for a cross-flow heat exchanger is derived from first principles and is based on an existing heat exchanger used in industry. The heat exchanger model is flexible in that it can be applied to cross-flow type exchangers of various physical characteristics, given that some key data is provided to the model, in terms of overall heat transfer coefficient and heat exchanger pressure drop relations. The heat exchanger state-space model can stand as an independent module, for steady-state and dynamic heat transfer analysis, or can be easily inserted within a larger plant model for simulation purposes, as is demonstrated in this work. .

1.5

Thesis Outline
This thesis is organized in the following manner. Chapter 2 deals with the The

modeling necessary for simulation purposes, and is divided into two sections.

development of a state-space [cross-flow] heat exchanger model, along with steady-state and dynamic analysis for the heat exchanger as a separate stand-alone unit, is presented in the first section. In the second section, modeling of the rest of the components that make up the bleed air temperature system is given. Chapter 3 describes two basic control configurations: (i) ram air channel control, and (ii) bypass channel control. simulations, for each of these two control configurations. In this chapter, controller design and tuning is presented, along with linear and nonlinear The chapter ends with a discussion in which the results are compared. These discussions form the basis for the final proposed control configuration, ram-air-plus-bypass control, which will be the focus of Chapter 4. Here, details for this particular configuration are presented, in terms of control structure and control law (both PI and LQ/PI). Chapter 5 presents nonlinear simulation results for this proposed control strategy, at various operating conditions, and for disturbances in both engine load and atmospheric conditions. Chapter 6 provides an in-depth discussion of the thesis work, including modeling and relevant simulation results. Issues related to practical application of the proposed control system will be raised and discussed. Final conclusions and proposed future research will be provided in Chapter 7.

12

CHAPTER 2 MODELING OF THE BLEED AIR SYSTEM
Before a control system can be designed and analysed, a suitable model of the plant must first be developed. In this case, the plant represents the bleed air system, and includes all components making up the system, starting from the bleed air source up to the load. Bleed air and ram air flow along pipes that form their respective channels, and exchange thermal energy through the heat exchanger. The heat exchanger model is a key aspect of the overall model, especially in terms of dynamic analysis which is necessary for control design. Thus, this chapter is separated into two sections, with the first section focusing mainly on the development and simulation of the appropriate heat exchanger model. Its integration into the overall system, as well as modeling of the remaining components is presented in the second section of this chapter.

2.1

Heat Exchanger Modeling
It was already discussed that heat exchangers used for aerospace applications are

almost exclusively of the compact type. Compact heat exchangers are a special type of plate-fin exchangers (see Fig. 1.3), in which the fluids flow perpendicularly relative to each other (cross-flow). It must be pointed out that the actual structure of such an exchanger consists of numerous plates, and many fins of numerous sizes and shapes. Hence, an exact structural model can get very complex, something not desirable for control design. For practical reasons then, although modeled analytically, the heat This exchanger core will be simplified by considering only a single [thin] plate as the heat transfer surface separating the hot and cold fluids that flow in cross-flow. simplification is somewhat alleviated by the fact that, as will be seen later, the overall heat transfer coefficients functions are based on actual heat exchanger experiments, and thus implicitly contain the effects of physical and structural features of the particular heat exchanger. Based on analytical heat transfer equations, and drawing on direct lumping procedures, a MATLAB script is developed that yields an N xN order state-space model

13

for the heat exchanger. The model allows for both steady-state and dynamic analyses, and can thus be easily integrated into a larger temperature control system. In fact, the heat exchanger model that follows can be used in other applications that use similar types of exchangers, with only slight modifications in the inputs and/or overall heat transfer coefficients. The model order, and thus the accuracy, is user-specified in terms of heat exchanger dimension iV. The `direct lumping procedure', consists of dividing the heat exchanger into a finite number of control volumes, or lumps. The following assumptions are made by this method: (i) (ii) (iii) heat transfer to the surroundings is negligible; no heat conduction is assumed in the direction of flow; and each lump has a uniform temperature distribution throughout.

Additional assumptions are made [19,21], and are as follows: (i) the plate separating the fluids is thin, and thus the conduction through the plate is neglected; (ii) (iii) (iv) the physical and chemical properties of the fluid are neglected; uniform mass-flow along the pipes is assumed; uniform temperature distribution of the fluids is assumed at the heat exchanger inlets; and (v) the overall heat transfer coefficient is constant throughout the heat exchanger core, for a given flow regime'*.

2.1.1 Simplified Heat Transfer Model
A simplified heat transfer model is now presented. Differential equations describing the heat transfer for each lump follow fi-oni this model, and together with additional algebraic equations, form the basis for the cross-flow heat exchanger statespace model.

It does, however, vary with changes in flow rates, as will be shown later.

14

In the diagram shown below (Fig. 2.1), fluid flows over a surface of length L (ft) and a constant temperature T, (®R). At x=0, the fluid has an inlet temperature of Ti,, (°R), and at x=£, an outlet temperature of Tout ("R)* The mass flow rate and specific heat of fluid are denoted by M (Ib/s) and Cp(Btu/lb °R), respectively. It should be noted that the diagram is per unit depth into the page, essentially converting a 2D model into a ID model.
, Fluid Temperature

out

fluid
flow

dx

x=L

Length along surface

Fig. 2.1: Heat transfer to a surface of constant temperature

It follows from Newton's law of cooling [13] that the differential heat transfer dQ (Btu/s) to a surface of incremental length dx is given by dQ = h (T -T ,)d x , (2 . 1)

where h (Btu/s °R ft) is the local heat transfer coefficient (per unit depth), and T (°R) is the temperature of the fluid at that particular location. For an ideal gas with constant Cp, the change of fluid temperature dT as a result of the heat transfer dQ is given by dl =
-

dQ Mc_

(2.2)

Combining (2.1) and (2.2) yields an equation that relates the heat lost by the fluid to the heat transferred to the surface: M c^dT = -h {T -T ,)d x . Integrating (2.3) along the length of the surface, from 7},, at x=0 to Tout at x=L, gives (2.3)

15

'î:
In

dt

hL M e.

(2.4)

where H=hL (Btu/s-°R) is the total heat transfer coefficient (per unit depth) between the fluid and the surface. The total heat transfer from the fluid to the surface is obtained by integrating (2.2), ]dQ = - M c J d T
0

(2.5)

Q = - M c ( T ,, ,- T J Substituting (2.4) into (2.5) yields H Q = -M e ,
M e.

(2.6)
= M e.

l-e

M e,

fc-r.)

2.1.2 State-space Heat Exchanger Model
Based on the simplified heat transfer model presented in section 2.1.1, the development of a state-space heat exchanger model now follows. The heat exchanger is modeled as a thin-wall surface that separates the hot side fluid (bleed air) and cold side fluid (ram air), as is shown in Fig. 2.2. The heat transfer surface has a thermal mass MCs (Btu/°R), and a temperature of (°R). The hot side fluid has a specific heat of C p,/, (Ib/s). Its temperature at the entrance of the heat

(Btu/lb °R), and a mass flow rate of

exchanger is % (°R), and the temperature at the exit is Tho (°R). Similarly, the cold side fluid, with a specific heat of Cp,c, flows at M ^, and has an inlet temperature of Td and an exit temperature of Tco.

16

Hot Exchanger Core Surface " T,,MC, Hot side flow

Cold side flow

Tci
Fig. 2.2: Cross-flow heat exchanger schematic

The heat exchanger's core temperature is a ftinction of space and time (under transient operation). Since the simplified representation of the heat exchanger core is modeled as a thin plate, the temperature is distributed over the plate in two dimensions. The lumped parameter approach used in the development of the model assumes that the temperature of the `lump' is constant throughout the lump. However, to properly model the heat exchanger, the spatial distribution of the plate core temperature cannot be neglected. One solution is to partition the plate into N xN equal-area lumps (or cells), and then to apply the lumped parameter approach to each lump. Fig. 2.3 shows partitioning of the heat exchanger plate into its N xN lumps, along with overall input to the system, and the directional notation used in subsequent equations. The core temperature of each lump T ' j is assumed uniformly distributed throughout the lump (/j-l...JV ). However, the fluid temperature changes exponentially along the direction of the flow as it passes over the lump surface, as governed by (2.4).

17

row index (i)

lump nomenclature . i Hot-- 

fluid--f

TA

column index (j)

Cold fluid
Fig. 2.3: (a) Division of heat transfer surface into NxN lumps, (b) individual lump nomenclature

With the heat exchanger in transient mode, the surface temperature varies with time, until steady-state conditions are re-established. Thus, a differential equation is required to describe the change in heat exchanger core temperature Ts with time. First, a simple energy balance on the heat exchanger surface is performed: dT, dt  (2.7)

In (2.7), the left hand side represents the heat gained at the surface from the two fluids (note that Qh is defined positive into the surface, and Qc is defined positive out o f the surface), while the right hand side represents increase in internal energy of the lump. Finally, substituting (2.6) into (2.7) for the heat transferred from each fluid yields the desired differential equation:
dt

=a+a
- ^h^p,h l_ e f 1 -^

(2.8)
/

L

In the above equation, Hh and He (Btu/s °R) are the hot and cold side `overall' heat transfer coefficients, respectively. The heat transfer coefficient is normally a function of surface geometry (which influences conditions in the boundary layer), nature of the fluid motion, and an assortment of fluid thermodynamic and transport properties

18

[1,13,16]. For this study, the overall heat transfer coefficients are given as functions of flow rate: ·

(2-9) (2 . 10)
These specific fiinctions are determined empirically from experimental data on an existing heat exchanger used in the industry^. To derive a state space model for the heat exchanger, relevant differential and algebraic equations describing the heat transfer must be written in state space format: X =AX+BU , Y = C X+D U , (2.11) (2.12)

where X is the state variable, U is the system input, Y is the system output, A is the system matrix, B is the input matrix, C is the output matrix, and D is the feed-forward matrix. To obtain state-space representation of the heat exchanger, state variables are first selected, and then the governing equations are rewritten in the above form. In modeling parallelflow and counter-flow heat exchangers [6,19,21], the author used the temperatures of hot and cold fluids at each lump to form the state vector. This thesis will use the lump core temperatures T 'j to form the state vector (assumed constant for each lump). The hot and cold fluid temperatures will follow from the core temperatures using appropriate algebraic equations. Note that these algebraic equations, relating the hot and cold fluid temperatures to the heat transfer surface [core] temperature, are provided by the convection heat transfer equation (2.4), which was derived for conditions of constant surface temperature. Thus, for dynamic operation where the core temperature will be changing, the determination of hot/cold fluid temperatures from these relations will be valid only when the simulation time-slice dt is taken to be very small. If this is done, it can be assumed that the surface temperature is constant during that short slice of time, and such a representation can thus be used without sacrificing too much in accuracy. This approach has the advantage of reducing the model order by half -- if the fluid temperatures at each lump were used as state variables, the resulting model order would

* The author is bound by a confidentiality agreement not to release any specific details regarding this particular heat exchanger, and the exact form of empirical relations describing it

19

be 2N^. By using the core temperatures [of each lump], the order is simply the number of lumps that make up the heat transfer plate.

equal to

Equation (2.8) is the state equation for the heat exchanger model, and relates change in core temperature of the cell to the heat energy added to it from the hot and cold fluids. Since it is to be applied to each lump individually, some transformations must first be made in order for the equation to be used at the `lump level'. The thermal mass and the hot/cold side heat transfer coefficients are assumed distributed uniformly over the plate surface. Since the heat transfer plate is partitioned into N xN equal-area lumps, these `total values' are simply divided by the total number of lumps to yield `lump values'. Similarly, both hot and cold side fluids are assumed to flow equally over the plate, in their respective directions. Thus, the fluid flow rate corresponding to a single lump is found by dividing the `total' flow rate by N (number of rows, or columns). The transformation equations that result are as follows: MC, me, = ----- -- * N xN h N xN h " N xN `   It that is, variables used for heat transfer calculations for each lump control volume. The state equation (2.8) can now be rewritten on a `per lump' basis, using indices to indicate the particular lump,
· (2 . 16)

(2.13) (2.14) (2.15)

in the above equations, (2.13-2.15), the lower-case variables refer to `lump level' values;

where

_

me, me, ,

^ me.

(2.17)

a = l-e

,b = l - e

(2-18)

a n d 1=1 . . . A T ,y = l . . . iV.

20

From (2.4), algebraic equations follow for both the hot side and cold side fluids, relating the fluid temperature at the lump outlet to the lump core temperature and fluid temperature at the lump inlet, (2.19) r," = ( i - 6)r"+i.r,,', . (2.20)

Furthermore, the fluid temperature at a particular lump outlet equals the fluid temperature at the inlet of an adjacent lump, as expressed by the following relations: .3 :3 = c . , . The state vector consists of core temperatures of each cell and is defined as: = (2.22) (2-21)

The input vector consists of the hot and cold inlet temperatures as well as the [total] hot and cold side mass flow rates, = . (2.23)

There are thus NxN equations of state (one for each cell), or NxN functions, ,X ^ ^ ^ ,U ^ ,U ,,U ,,U ,), , (2.24)

where A t=1 ... NxN^ and the elements of the state and input matrices are defined by (2.22) and (2.23), respectively. The next step involves the linearization of these state functions to yield the final [linearized] state space heat exchanger model. The linearized state equation takes the following form: AAT*=. AX2 +...+ % ax. AÜ2 + ÏL "t.
SU ,

ax, A£/| ...

dx.

(2.25) AU 2 + I
l

at/,

"J.

su.

AU, "I.

The partial derivative terms appearing in the above equation are evaluated at an operating point o. Equation (2.25) can be rewritten in matrix form to give the form of (2.11), thus yielding the ^4 and 5 matrices:

21

A ajf, A= S.
dX .

0
'^1.

0 0

3 . ax.

(2.26)

ar. '2,

II at/, h. B = au.

A dU, II au.

A "2.  ^ 2 .
at/,

A "2. "3.
at/,

at/.

at/.

"4.

(2.27)

5U ,

au.

au. (/3.

au. < ^ 4 .

The heat exchanger model output is defined by Y=Tho, as only the hot side outlet temperature Tho is of interest for control purposes. For this specific application, cold side fluid outlet temperature Tea is not considered since this stream is simply dumped back into the atmosphere, and its exit temperature is not important. However, thé cold side fluid outlet temperature can be easily found using the same procedure as that for the hot side fluid (which follows below). Thus, the following output relations are based on Tho zs the desired output; they would need to be slightly altered for cases where Tco was also desired. An `intermediate' output vector is defined first, the elements of which can be expressed as N functions of the state and input vectors, as defined by (2.19),
rp h o  ` A/I rp h o AT2

'g , '
S i

AT =

; Jm .
rp h o

· gs .

(2.28)

Writing (2.28) in linearized form produces N equations describing changes in the intermediate output vector Y ' from the steady state values, as functions of state and input

22

vectors. The equations will be of the same form shown in (2.25); rewriting these will yield the intermediate C and D matrices, the elements of which are to be evaluated at a given operating point. The elements of Y ' are then simply averaged to yield an `overall' hot side outlet temperature AT = Pre-multiplying T' by an averaging matrix yields: (2.29)

The final C and D matrices are thus pre-multiplied by this averaging matrix [AVEJ, and are as follows: 0 'I.
c

0 0

=[ a v e ` sx.

ax,

(2.30)

dX.

ax,

ax.

^N x N o

dU,
d

at/.

au, % 2
51/,

"J. "3.

au. % 2
at/,

=[ a v e ' at/. V lo

su, ÎÎJL

"4.

(2.31)

at/.

SU,

t'2.

31/,

",
3

at/.

"4.

2.1.3 Implementing the model In MATLAB
The state-space model of the previous section is implemented using MATLAB software. A MATLAB script written to generate the model thus forms a subroutine that can be inserted into the overall bleed air system model. The heat exchanger model allows for user-specified desired accuracy in terms of the heat exchanger partitioning dimension N. It accepts hot and cold stream inlet temperatures and mass flow rates (2.23), and returns the hot side outlet temperature response. The code performs all necessary calculations and derivations, and proceeds in the following manner:

23

(i)

inputs are passed to the subroutine (hot/cold inlet temperatures, flow rates, partitioning dimension iV); -

(ii)

based on the linearized state (2.25) and output equations (2.28), the program determines the elements of the state matrices A,B,C and D; and

(iii)

these matrices are returned by the subroutine to be used by a larger program that integrates the heat exchanger model into its overall operation.

Thus, the heat exchanger model here developed and implemented using a MATLAB subroutine can be easily inserted into a larger simulation (as will be shown later), or can be used for stand-alone heat exchanger simulations. Both steady-state and dynamic analyses can be easily performed and will now be demonstrated, for the purpose of this section.

2 .1.3.1 Steady-State and Dynamic Heat Exchanger Simulations
At steady-state conditions, the temperature fields of the heat exchanger core and hot/cold side fluids are time-independent, and thus the left hand side of the state equation (2.8) is zero, or, in state-space format, 0 = AX + BU . (2.32)

The physical interpretation is that the heat transferred from the hot side fluid is exactly balanced by heat transferred to the cold side fluid. Hence, for a steady-state simulation, the heat exchanger subroutine is used to obtain the A,B,C,D matrices, followed by the calculation of the state vector steady-state values, which are determined by re-arranging (2.32): X = A ~ ^-{-B U ). ' (2.33)

For demonstration purposes, a sample steady-state simulation is now presented. The inputs used in this simulation are listed in Table 2.1.

24

Hot-side fluid inlet temperature, T ^i Cold-side fluid inlet temperature, 7^,, Hot-side fluid mass flow rate, M^ Cold-side fluid mass flow rate, M^ Plate partitioning dimension, N

380 °F 117.5 °F 0.01833 Ib/s 0.01725 Ib/s 20

Table 2.1: Inputs to the heat exchanger subroutine for a sample steady-state simulation

Figures 2.4-2.6 show steady-state results of the heat exchanger model, in terms of steady-state temperature distribution of the core and the hot/cold side fluids. It is helpful to keep in mind the plate partitioning diagram of Fig. 2.3 when looking at the above plots. For the fluid temperature distributions of Fig. 2.5 and 2.6, it is the inlet fluid temperature to each lump that is plotted, for both hot and cold side fluids. For the given set of inputs, the actual `overall' hot-side fluid outlet temperature is Thd= ^ 187.1608 °F.

T 3 300

fc 200

100
20
row index (I)

10
column Index (j)

Fig. 2.4: Steady-state heat exchanger core (plate surface] temperature distribution

25

400^ . . .

100
20
row index (I) column index (j)

Fig. 2.5: S te a d y -sta te ho t-sid e fluid te m p e r a tu re d is trib u tio n

Ô ) 300 200

®

row index (I)

^
'

,,

column index (|)

. ,

...

Fig. 2.6: Steady-state cold-side fluid temperature distribution

For a dynamic simulation, a disturbance in one (or more) of the input elements is first applied, and then the response of the hot-side fluid outlet temperature is determined, as governed by the equations of state (2.25). In the following, a step in the hot-side fluid inlet temperature 7),, is chosen as the disturbance. At /=0 sec, the value of 7),, changes from 380 °F to 420 °F, marking the onset of dynamic simulation. Two different cases will now be demonstrated. In the first case, the initial steady-state conditions are given in Table 2.1. Note that the hot-side and cold-side fluid flow rates are relatively close to each other. For the second case, the initial value of the cold-side flow rate is increased to M^= 0.27 Ib/s,

26

with the remaining initial input elements unchanged. Dynamic responses for both cases are shown in Fig. 2.7 to illustrate the effect on heat exchanger response time with changing hot-side to cold-side fluid flow rate ratios.

198

119

194 5 192 S. 190 H- 188 188
100

S 118.9

g

1= 118.8 118.75 150 Time (sec)
200

250

100

150 Time (sec) (b)

200

250

(a)

Fig. 2.7: Hot-side fluid outlet temperature (mean) response to a 40 "F step increase in Thi: (a) hot-tocold fluid flow-rate ratio near unity, (b) very low hot-to-cold fluid flow-rate ratio (near 0.068)

The above simulations are open loop in nature; that is, there is no measurement feedback or regulatory action present. The heat exchanger is simply allowed to reach a new steady-state, as governed by its dynamic equations. Note the huge difference in both response time and steady-state change between Fig. 2.7 (a) and Fig. 2.7 (b). Because, in the second case, the cold-side fluid flow rate is many times larger than the hot-side fluid flow-rate (about 14 times in this specific case), a change of +40 °F in the hot-side inlet temperature causes Tho to change by only 0.2 °F, whereas in the first case (with the hot and cold fluid flow rates relatively close to each other) this change is much larger (10.5 °F). In other words, if one of the flow rates is more than an order of magnitude larger than the other (assuming they both have similar heat capacities), changes in inlet temperature of the smaller flow will have much less effect on its heat exchanger outlet temperature as opposed to the case where both fluid flow rates are of the same order. At the same time, the huge difference in thermal capacities of the two fluids is responsible for the very quick heat transfer transients. The heat exchanger model thus confirms

27

expected physical behaviour. The significance of these results will become evident when the bypass configuration will be analyzed in Chapter 3.

2.1.3.2 Effect of Heat Excfianger Dimension N
It is worthwhile to investigate the effect of heat exchanger partitioning dimension N on the accuracy of the model, in order to determine the trade-off between accuracy and model complexity. It is evident that increasing N, and thus dividing the heat exchanger plate into a greater number of [finer] lumps, should result in greater accuracy. However, increasing N also increases the complexity and size of the model, resulting in larger computational time to solve the model. This is not always practical, especially for use of such a model in control system simulations. As the heat exchanger subroutine accepts N as an input, a simple simulation test can be earned out to investigate the effect of increasing the heat exchanger dimension N on the results. The test consists of increasing the value of N (starting with #=1), and solving the model for the steady-state hot side fluid outlet temperature. Starting with a certain set of inputs, a steady-state calculation is performed to obtain the hot-side fluid outlet temperature. This calculation is placed within a loop, which increases N by one with every cycle. Thus, the same steady-state calculation is performed, but with an increasing heat exchanger dimension N. The result (hot side fluid steady-state outlet temperature Tho) is then plotted against heat exchanger dimension N, as shown in Fig. 2.8 below.
240 : 230

r 220
210

200 190

·S

in

180

S 170 160
Heal Exchanger Dimension N

Fig. 2.8: Effect of increasing N on the steady-state results

28

It can be seen from the above plot that as iV is increased, the result is converging to a specific value. Beyond #=30, the hot-side fluid outlet temperature Tho is not changing by any significant amount. However, for control purposes, it is desirable to have a smaller model order still. For implementation in the overall temperature control model, and in all the subsequent simulations, #=10 is used for the specific heat exchanger and bleed air system model. This choice is rather arbitrary, but it is evident that to use a lower value would greatly diminish the accuracy, while using higher values of # will increase it only slightly. The savings in model complexity and computational time are definitely worth the very small improvement in accuracy that would be achieved with, for example, #=30. \

L2 Bleed Air System Modeling
This section presents modeling of the rest of the components that make up the bleed air temperature regulation system. As was already mentioned, various configurations are analysed in this thesis (see Fig. 1.2) -- however, they all share the same key components: (i) bleed air and ram air sources, (ii) control valves, (iii) heat exchanger, (iv) load, (v) temperature sensor,, and (vi) controller. Nonlinear equations describing the first five components will now follow, along with their linearization at a given operating point. The particular interconnection of these system components to form specific control configurations, along with controller design and implementation, will be presented in the next chapter, for each of the three control configurations.

29

2.2.1 Bleed and Ram Air Sources
The aircraft engine is the source of hot bleed air, which is in turn cooled by ram air collected from the atmosphere. Typical mission and atmospheric data are used to construct a set of operating conditions (Table 2.2). Initially, the bleed air system is assumed to be in steady-state operation at the particularly chosen operating condition. For linear simulations, the equations describing the system are thus linearized about this steady-state operating point.

Operating Condition No. # 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 __ 27 28 29 30

- ________

Bleed Air Ambient Ambient Bleed Air Bleed Air Pressure Mass Temperature Pressure Temperature Flow (psia) (°F) C"F) (psig) (Ib/s) 30 130 0.018333 380 14.7 0 0 35 30 0.018333 250 14.7 0 0 20 130 0.018333 300 0 0 14.7 0.018333 380 0 14.7 0 35 0.018333 380 130 0 0.4 14.7 35 0.018333 380 20 0 0.4 14.7 35 0.018333 10 380 10.11 90 0.5 35 0.018333 10 380 0.5 10.11 10 35 0.018333 20 380 50 0.7 6.76 0.018333 35 380 -10 20 0.7 6.76 35 10 30 0.018333 380 4.37 0.8 0.018333 35 4.37 -25 30 0.8 380 -40 0.018333 20 380 2.15 45 0.85 -25 10 2.15 45 0.018333 380 0.85 -40 2.15 30 45 0.018333 380 0.85 -30 2.15 380 45 0.85 0.018333 13 -40 2.15 45 0.85 0.018333 35 380 2.15 -40 380 45 0.85 0.018333 20 r 30 4.37 10 0.85 380 0.108333 20 4.37 -30 30 0.85 0.108333 380 25 6.76 380 50 20 0.7 0.108333 20 6.76 0.7 0.108333 30 380 -10 20 10.11 380 0.5 0.108333 25 90 10 10.11 380 10 0.5 0.108333 35 10 380 12.23 0.4 0.108333 35 110 5 0.4 0.108333 35 380 12.23 15 5 0.091666 380 14.7 0.4 35 130 0 0.4 0.091666 35 380 14.7 20 0 0.091666 30 380 14.7 130 0 0 35 250 30 0 0.091666 14.7 0 Table 2.2: Operating conditions: typical mission and atmospheric data Altitude (kft) Mach

30

For each operating point, bleed air flows into, the system at a temperature of Thi (°F), pressure (psia), and a mass flow rate M/,(lb/s). These values follow directly (psi) and temperature Td (°F) are determined

from Table 2.2. Ram air inlet pressure

from the atmospheric conditions of Table 2.2 (ambient temperature Tamb and ambient pressure Pamb)Tci = p ., + 460Xl + 02Mach^ ) - 460 ( C , (l + 0.2Mach^ f ` - C . )+ C , , (2.34) (2.35)

where Free is the pressure recovery factor. Adiabatic isentropic flow of a perfect gas is assumed for (2.34) and (2.35). After passing through the heat exchanger, the ram air is dumped into the atmosphere, and therefore the outlet ram air pressure Pco is equal to the ambient pressure Pamb-

2.2.2 Control valves and flow calculation
Control valves placed in desired channels produce-a-change-in-the-manipulatedvariable, and therefore allow for system regulation. Butterfly valves are used (see Fig. 2.9 below), and manipulate the flow rate by changing their opening angle fiv, and thus the opening area A-

F ig. 2.9: B u tte rfly valves^

' taken from http://w w w .gIobalspec.com /F eaturedP roducts/D etail?E xhibitID = 6388& defram e= l

31

For each operating point, bleed air flows into the system at a temperature of Thi (°F), pressure (psia), and a mass flow rate M* (Ib/s). These values follow directly (psi) and temperature Td (°F) are determined

from Table 2.2. Ram air inlet pressure

from the atmospheric conditions of Table 2.2 (ambient temperature Tamb and ambient pressure PambY Tc, = + 460)(l + O.lMach^ ) - 460 ( c . (l + 0.2Mach^ r -C j+ C . . (2.34) (2-35)

where Free is the pressure recovery factor. Adiabatic isentropic flow of a perfect gas is assumed for (2.34) and (2.35). After passing through the heat exchanger, the ram air is dumped into the atmosphere, and therefore the outlet ram air pressure Pco is equal to the ambient pressure Pamb-

2.2.2 Control valves and flow calculation
Control valves placed in desired channels produce a change in the manipulated variable, and therefore allow for system regulation. Butterfly valves are used (see Fig. 2.9 below), and manipulate the flow rate by changing their opening angle /0y, and thus the opening area Ay,.

Fig. 2.9: Butterfly valves*

' taken from http://w w w .globaIspec.com /F eaturedP roducts/D etail?E xhibitlD = 6388& defram e= l

31

The control valve acts upon an electronic opening-command signal, and moves the stem to a corresponding opening angle. Its action is not immediate --it is physically impossible to move from one particular opening angle to another, and have no time elapse in the process. Neglecting valve hysteresis and backlash, the valve dynamics are modeled as a first-order lag [3], yg,(5 ) = (s)G^{s) = u^{s) ~ TyJ + l (2.36)

where U y is the valve opening command input to the valve (0%-100%), fly is the valve opening angle (rad), Ky is the valve gain (rad / % valve opening), and ty is the valve time constant (s). Valve opening angles Py=0 rad and fiy = id l correspond to a fully-closed and fully-opened valve. opening area of 4 = ^ (l-c o sA ). (2.37) Between these two limits, a given angle will produce a valve

where d is the valve diameter. Linearization of the above equation about an operating point o results in Ayg, , (2.38)

--- s m ^ . SPy For calculating the flow rate, one-dimensional compressible isentropic process used for calculating variable-area duct flow is assumed, as suggested by Bao [22]. Even though flow through a variable area is not perfectly isentropic in reality (there is some friction loss), the simplified model is retained for control system design and simulation purposes. Thus, the airflow rate M» going through a valve orifice with an opening area Ay is calculated by the following equation:

32

M. = 4 ^ where

2 jUr) 4,r-<f, y

(2.39)

< f>= ^ î o v ^ > 0.5283, 6 = 0.5283 for ^ < 0.5283. P P P Pu and Pd are the upstream and downstream pressures (psia), respectively, T,, (°R) is the upstream temperature. Ay (ff) is the valve opening area, g = 32.174 ft/s^ is the acceleration of gravity, R = 1717 (ft^/s^*°R) is the gas constant for air, and / = 1.4 (for air) is the ratio of specific heat at constant pressure and specific heat at constant volume. Since the pressure ratio < ! > is limited in case the flow becomes choked, (2.39) is valid for subsonic flow only. following form: AMv =
d Mx dA.. AA,. +

When linearized about an operating point o, (2.39) takes the

dM y
dP.

AP. +

dMx ÔP,

AP.+

dMx
dT.

AT.

(2.40)

dM y
dA,,

2m

1

l±r

A yP u^yg dM v
dP.

(2 A .

1 + y> -(j, ^

yPu

7^u

(r -i)R
y 2 uz >

ir -i)R

dM y spd o 2æ : i

\ ^2 fy \

J I+y ) (r-i)R

33

f 1

r

ôM . dT.

\ (r-DR

J

IT.

A block diagram that describes the control valve flow manipulation model is built from the linearized equations (2.36, 2.38, 2.40), and is shown in Fig. 2.10. In this diagram, Ci, Cz, C3 , C4 , and C5 are gains that correspond to the coefficients of the linearized equations, as follows: · Ci = , as defined by (2.38)

dM y

, C3 =

dMy dP..

, C4 s

dM y

dM v

, as defined by

dP,

dT.

equation (2.40)

Am.,

Ky
TyS +

AA I

Fig. 2.10: Block diagram of control valve dynamics and resulting flow rate calculation

34

2.2.3 Heat Exchanger
The heat exchanger model developed in the previous section is a linearized model, and can be easily inserted into the overall system structure to be used in the complete system model. Shown in a block diagram form in Fig. 2.11, it accepts as inputs the inlet temperatures and flow rates of the hot-side and cold-fluids, and outputs temperature of the hot-side fluid as it exits the exchanger.

'T u ' U= Tc, Mh Heat exchanger state-space model (A,B,C,D)

Fig. 2.11: Block diagram representing heat exchanger model Implementation

Although the heat exchanger was modeled analytically, some empirical relations are used, acquired from an actual heat exchanger data. One example of this was already seen in the case of the overall heat transfer coefficients H/, and He. Another set of experimental relations used in the overall system model is provided for the heat exchanger pressure drops. The hot and cold side heat exchanger pressure drops are also given as functions of flow rates, taking the following form: (2.41)

Pdrop,=Pc.-Pco=K,M;+K,M,,

(2.42)

where Pm and Pd are the hot and cold side pressures upstream of the heat exchanger, and Pho and Pco are hot and cold side pressures downstream of the heat exchanger, respectively. The constants Ki, K 2 , K 3 , and K 4 come from empirical data of a real-life heat exchanger^. These pressure drop equations provide additional relations between pressure and flow rates (the first such relations were already seen in (2 .3 9 ), in which the flow rate is a

' The author is bound by a confidentiality agreement not to release the exact values of these parameters.

35

function, among other things, of the upstream and downstream pressures). Equations (2.41) and (2.42) can be rewritten to express the flow rate in terms of the pressure drop: droph
=

2K,

(2.43)

4

^ ^ 3^ dropc

=

2K ,

(2.44)

Thus, with the knowledge of pressure upstream and downstream of the heat exchanger, these relations will yield the resulting flow rate for that particular channel. Calculation of flow rates and pressure values at particular points in the system will generally make use of both the yalye-flow equation (2.39), and the empirical pressure drop equations (2.41-2.44). Linearization of the heat exchanger pressure drop relations (2.41-2.44) gives: AR__. droph AM, (2.45)

dMu
dPdropfj dM ,

= 2K i M^+K2

^drop,=-

dP. dropc

(2.46)

dP. drop^ dM.

--

-f

dP. droph

APdroph

(2.47)

dMu dP. droph

36

dPdropc

APdropf.

(2.48)

dM.
dPdrop^

Fig. 2.12 shows the block diagram form of these equations, here the gain coefficients are: , C /S ap. d ro p c, dM. dM ,
>Cg =

> Cp =

dM^
dPdropc

dM ,

d Pdrop/,

AM.

AM.

i^iPci-Pco)

àPh!
AM.
^^ ( P / i i ~ P l m )

APci

r^iPci - Pco\ àPc.

AM.

àPho (a)

(b)

Fig. 2.12: Block diagrams for the linearized heat exchanger pressure drop equations: (a) hot-side (b) cold side

2.2.4 Load
For the purpose of this project, the load is simplified by an impedance equation with a suitable pressure drop: .
^ load ^ lo a d bleed ^am b
*

(2.49)

where P/oad is pressure at the load (psia), ATw is the load impedance constant, and is the total bleed air flow rate (Ib/s), set by a given operating condition from Table 2.2.. Linearizing the above results in
AM,bleed

aM.bleed

*

(2.50)

37

ÔAP, load ÔM,bleed
-- ' ^ ^ l o a d ^ bleed ~ ^ 1 0

^ .A^bleed

load '10

Fig. 2.13: Block diagram representing the linearized load impedance equation

The load temperature, Tioad, is determined depending on which configuration is being modeled. Where there is no bleed-air bypass, all of the bleed air passes through the heat exchanger and then follows to the load. Thus, in this case, T w is equivalent to the heat exchanger hot-side fluid outlet temperature However, for bypass configurations, In this case, the load the bypass channel merges back with the main bleed channel (hot side heat exchanger stream), and the combined stream is delivered to the load. niixed flow and calorically perfect gas): P load -- where
bleed main ^ b l e e d main hi ^ b l e e d bypass ^ b l e e d bypass

temperature is therefore a mixture of the two streams, and is given by (assuming perfectly

(2.51)

and M ueedbypass

mass flow rates of air (Ib/s) in the main bleed

channel and bypass channel, respectively. Equation (2.51) is linearized to give ^"^load -- ÔT
dT, load
ho

dT, hi
^ b l e e d main

+

(2.52) cYT
dM.bleed bypass

dT, load

ÔMbleed n
dT, load dT, ho dT, load d Thi

AM,bleed bypass

M,bleed main
=

Cn

bleed main

bleed bypass

M.bleed bypass
bleed main bleed bypass

= Cl2

38

dT, load ÔMbleed main

^ b l e e d bypass ^ h o o \m
^ ^

'^hi )

_

^

^

bleed bypass

ar,load
dM bleed bypass
bleed main bleed bypass

1

= C]4

With the linear gain coefficients defined above, a block diagram form of (2.52) is formed, and is shown in Fig. 2,14.

Ht

Need

Need hvnasx

Fig. 2.14; Block diagram for determining temperature of the mixed flow

2.2.5 Temperature Sensor
The air temperature at the load is measured with a temperature sensor, and the measured temperature is fed back to the controller. What the controller actually `sees' is not real load temperature Thad, but rather measured temperature the sensor are modeled by a simple first-order transfer function:
^ h a d m ("^) ~ '^load ( ^ ) ^ o ("^) " '^load ( ^ )

. The dynamics of

K,. T^S + l

(2.53)

^Tloadm v -n
Fig. 2.15: Block diagram of sensor dynamics

39

Here, K,s is the sensor gain, and the sensor time constant % (sec) is a function of the flow being sensed: =f(M
sensed) .
( 2 .5 4 )

Since the temperature sensor is placed at the load, the flow being sensed is the total bleed air flow, ~ ^bleed ·

2.2.6 Channel Flow Simplifications
The airstreams in this system flow inside pipes that form their respective channels. These pipe channels are the means of interconnecting the aforementioned components to form an overall bleed-air system. Some simplifications with respect to channel flow are made to reduce the overall system complexity: (i) (ii) transport lag between components is neglected; the pipes are assumed to perfectly insulated (notemperature loss to the surrounding); (iii) (iv) pressure loss due to pipe flow is assumed to be negligible; and the flow is fully developed.

40

CHAPTER 3 RAM AIR CHANNEL AND BYPASS CHANNEL CONTROL STRATEGIES AND SIMULATIONS
There are several ways to regulate the air temperature at the load, and three different configurations are analysed in this thesis: (i) ram air channel control, (ii) bypass channel control, and (iii) ram-air-plus-bypass control. Based on the component equations and block diagrams developed in the Chapter 2, overall dynamic models for each control configuration are constructed, for controller design and simulation purposes. Two types of dynamic models are built: linear (Simulink), and nonlinear (MATLAB). A linear model is used for open-loop analysis, and controller design and parameter tuning, as it readily lends itself to such tasks. The nonlinear model is employed for final simulation purposes, to model the real system more closely. This chapter is dedicated to investigating the design, implementation, and simulations of the first two control configurations: (i) ram air channel control, and (ii) bypass channel control. These control strategies are not entirely new: Rotea et al. [7] have demonstrated the superiority, in terms of speed of response, of placing a bypass on the stream whose temperature is to be controlled (bypass channel control) over that of manipulating the non-controlled stream (ram air channel control). However, there are marked differences between their heat exchanger network (HEN) model and the bleed air temperature regulation model analyzed in this thesis. In the work of Rotea at al. [7], a transfer fimction model for the system is estimated from the open-loop step response, in a general form of simple linear models. The heat exchanger model used here is derived analytically and is based on an existing cross-flow heat exchanger whose physical characteristics (heat transfer coefficients and pressure-drop relations) are provided by the manufacturer. The rest of the system is obtained by considering the governing equations of individual components that make up the system, and then constructing an overall model based on their physical interconnections. The entire model is based on specific operating and atmospheric conditions, as provided by typical mission data. In that respect, it will be useful to investigate the simulation results of both ram air channel and
41

bypass channel control strategies, as applied to this particular system, before moving on to the proposed control strategy discussed in the next chapter. It will be shown that some of the general characteristics of the first two control configurations, as found in afore mentioned literature, apply to this system as well, as expected. However, the simulation results found in [7 ] are not applicable to the bleed air system analyzed in this thesis, in terms of specific details and numerical values. The need for appropriate simulation results for the first two control configurations, as implemented in the bleed air system of this thesis, is thus addressed in this chapter. The insights gained from these preliminary simulations will play a role in the design of the proposed ram-air-plus-bypass control configuration, which uses aspects of the former two control strategies. towards the proposed control configuration. . Thus, the importance of this chapter lies in generating the motivations and a logical progression

The chapter begins with an overview of control design approach used for the two control configurations. The next two sections focus on ram air channel control and bypass channel control, respectively. Within each section, specific interconnection details of that configuration are presented first, followed by a steady-state initialization procedure and a subsequent linear open-loop model. This Simulink model is then used to obtain open-loop responses, for stability and controller tuning purposes. Next, the applicable control laws are presented, along with controller parameter tuning using the linear model. After the controller is devised, a nonlinear simulation procedure for each control configuration are listed, to show how the controller is implemented in MATLAB, followed by nonlinear simulation results. The simulation results of the two control strategies will be discussed and compared, in terms of advantages and disadvantaged of each, in the last section of this chapter.

3.1

Control Design Approach
The controller's job is to regulate the controlled variable (load temperature) so

that it always returns to its set-point value, in spite of disturbances in the system's variables, or set point changes. In the regulation process, the response of the system shall

42

meet certain performance measures, as defined at the end of this section. Emphasis is placed on efficient disturbance rejection, in terms of load temperature response to changes in operating or atmospheric conditions. The proposed configuration presented in the next chapter will add to this by introducing efficient ram air use as another performance measure, to fulfill the overall thesis objectives. As there are various configurations that can be used to achieve load temperature regulation, the first step is to specify the physical arrangement of the components making up the control system. This interconnection, or structure, is referred to as a control configuration, and two such configurations are analyzed in this chapter: (i) ram air channel control, and (ii) bypass channel control. In terms of controller terminology, the particular configuration choice will determine the manipulated variable (the controlled variable remains the same, i.e. load temperature). As shown in Fig. 3.1, feedback control is employed; that is, the controlled variable is measured and this measurement is fe d back via a sensor located in the feedback path. Based on the comparison between this measurement and the reference (set-point) input, the controller then alters the valve opening accordingly. The basis behind the controller decision is a specific control law that converts an error signal into an appropriate controller output (action). The control law defines the type of controller, as well as its key parameters that determine how the response will be shaped. Thus, proper control law design and tuning is necessary before the controller can be deemed appropriate (satisfies the performance measures) and is implemented in the system.
disturbance input error set-point input sensor controller plant

controlled variable

Fig. 3.1: Block diagram for a feedback system with reference and disturbance inputs

The first step in such a design is to study the open-loop response. In addition to stability analysis, such a response will establish what type of control action will be

43

necessary to bring about regulation. When an increase in the controlled variable requires a decrease in the manipulated variable, a negative feedback control loop must be used (the error signal being fed back is defined by subtracting the measured signal fi-om the set-point). The schematic in Fig. 3.1 is a commonly used default convention when dealing with feedback control loops. On the other hand, when an increase in the controlled variable requires an increase in the manipulated variable in order to return it to its set-point, positive feedback is required (equivalently, the same negative feedback convention can be used, with a negative unity gain in fi-ont of the controller). Both types of regulatory actions will be demonstrated in this chapter. For the two control configurations discussed here, classical (proportional-integral) PI control is employed, with the control law defined by w( 0 = (3.1)

where zlfy is the controller input, m(t) is the controller output, A is a dummy variable of integration, and Kp and Ki are the proportional and integral gains, respectively [23]. In transfer function form, the P7 controller is given by (3.2) where Tj=l/Ki is the integral time constant. After choosing a control law, the controller parameters (Kp, Tj) need to be chosen so that the response will satisfy performance specifications - a step referred to as control parameter tuning. Frederick and Chow [23] demonstrate MATLAB techniques (e.g., gain-sweeping) for quickly obtaining system performance measures as the control parameters are systematically changed. The linear open-loop model of the bleed air temperature system is ideal for this task: with a chosen controller, the loop can be closed and the resulting system can be analyzed, in terms of its step response and performance characteristics. Using the linear model takes minimal computational time, as opposed to the more complex and computational-intensive nonlinear model, and thus the nonlinear

44

model is used only after some preliminary controller tuning has been performed using the linear model. It is standard practice in control system design to tune the controller parameters based on the system's response to a unit step increase in reference input. The approach taken in this thesis is consistent with this practice, but is slightly modified in light of specific thesis objectives. Since emphasis is placed on efficient disturbance rejection, a secondary stage in control parameter tuning will be added to analyze the effect of certain controller parameters on the system's response to disturbance inputs. Based on this analysis, the controller parameters might be further altered in order to improve disturbance rejection performance. Typically, a satisfactory response is characterized by low steady-state error and overshoot, good damping, and short transients, in terms of settling and/or rise time. For the purposes of this thesis, some of these performance measures are adhered to more strictly than to others. First and foremost, it is desired that the load temperature is controlled to match the set-point value with minimal steady-state error. Unless specified otherwise, the desired load temperature set-point is set at Tsp = 1 9 0 °F. Secondly, a response with efficient transients is desired - that is, any disturbances are attenuated as quickly as possible, within the physical constraints posed by the control configuration itself. The time it takes for the response to settle is indicated by the settling time (a ± 2 % band limit is used here), while rise time and peak time give an idea of the initial speed of the response. The speed of the response is important. However, rather than defining specific constraints on these parameters, their values will be noted along with other response characteristics, to be used later for comparison purposes. As will be discussed at the end of the chapter, the response transients are quite different from one control configuration to another. Another common performance measure is overshoot - defined as the fiaction of the final steady-state change by which the first peak exceeds this change. Typically, an overshoot requirement is used in conjunction with a reference input step response, and a low overshoot is usually desired. However, it will be shown that, for the particular

45

configurations studied in this thesis, there are some [overshoot] performance trade-offs between responses caused by a disturbance input and those caused by a reference (setpoint) input. In some cases, the low overshoot requirement for a reference input response will have to be relaxed in order to achieve efficient disturbance rejection. Once à satisfactory combination of A T p and 7 / is found, the controller is finalized and implemented in a nonlinear simulation, to simulate real-system behaviour more closely. System responses to both reference and disturbance inputs are simulated, at various operating conditions.

3.2

Ram Air Channel Control
As the name suggests, a control valve is placed in the ram air channel for this

particular configuration. Figure 3.2 shows the interconnection details, and isolates six `zones' (A, B, C, D, E, and F) corresponding to the components of the system. Between these zones, air flows in the specified direction inside its respective pipe channel.

^a rn h f t^am b |
atmosphere |
Pcit

ram-air channel controller

engine

load

atmosphere
anih

Fig. 3.2: Schematic of the ram air channel control configuration

Zone A corresponds to the source of bleed air. Bleed air flows with a mass flow rate (Ib/s), at a pressure of (psia) and a temperature of Thi (°F). these values

46

are set by the particular operating steady-state condition (chosen from Table 2.2), which defines the initial conditions for the model. The source of ram air is the atmosphere, and is denoted by zone B. From the initial atmospheric values, along with the use of equations (2.34) and (2.35), the inlet pressure determined. (psia) and inlet temperature Td for the ram air stream entering the system are However, whereas the total bleed flow rate is set by initial operating (Ib/s) is calculated, based on the

conditions, the initial ram air mass flow rate

steady-state conditions (see initialization below). After a disturbance enters the system, the ram air flow rate will reflect regulatory actions of the controller, as it manipulates the ram air channel control valve opening accordingly. Zone C contains the ram air channel control valve, and is modeled by equations (2.36-2.40). These equations were developed earlier using a general variable notation, and thus some nomenclature transformation is necessary to use these equations in this particular case, as listed in Table 3.1.

General nomenclature of (236-2.40) Valve opening angle, A Valve opening area, Mass flow rate through the valve, Upstream pressure, P,, Downstream pressure. Pa
M v

Nomenclature for ram air channel control configuration
Pram

M ram

P ..
Pc,

Upstream temperature, Tc, Table 3.1: Variable nomenclature transformation for ram air channel control valve

The heat exchanger makes up zone D. The analytical state-space heat exchanger model, along with the experimental hot and cold side pressure drop equations (2.41-2.42), is used here. For this configuration, all of the bleed air flows through the heat exchanger

47

hot-side, and ram air throng the cold side. Correspondingly, Mww is used in place of , and Mrm, in place of .

After passing through the heat exchanger, bleed air is fed to the load (zone.E), simulated by equation (2.49), while ram air is dumped overboard (zone F). With the absence of bleed air bypass, the load temperature Tioad is the same as temperature at the heat exchanger exit, A temperature sensor is located just upstream of the load, and

transmits sensed load temperature 7)^oj,,to the controller, as modeled by sensor dynamics (2-53). . Since pressure loss along the length of a pipe is neglected, some equivalency statements can be drawn between the pressures at certain points of the system: · the pressure at the hot-side heat exchanger inlet is equivalent to the bleed air pressure leaving the source, Pw = · ^

the pressure at the cold-side heat exchanger inlet is equivalent to the pressure downstream of the ram channel control valve, denoted by Pd in both cases

·

the pressure at the hot-side heat exchanger outlet is equivalent to the pressure upstream of the load, Pho = Phad

·

since ram air is dumped directly into the atmosphere, pressure at the coldside heat exchanger outlet is equivalent to ambient pressure, Pco = Pamb

3.2.1 Open-loop linear model of the ram air channel control configuration
Dynamic simulations are carried out using MAILAR!Simulink software. Before any response can be obtained, whether it is open-loop or closed-loop, linear or nonlinear, steady-state initialization must first be performed, in order to determine the initial steadystate values of all system variables. Based on the chosen initial operating point, these steady-state values are calculated in a way that is consistent with the desired output

48

(initially, load temperature is at the desired set-point), the initial conditions, and the governing model equations. For the ram air configuration, the pseudo-code for steadystate initialization subroutine is as follows: (i) Obtain , Tm, P ^,,, , Td, and from the [user] chosen initial

operating point. (ii) Knowing Mbued and Phi = P^,,,, calculate Pho from the heat exchanger hot-side pressure drop equation (2.41). (iii) Determine Khad from the load impedance equation (2.49), with PhadPho` (iv) Assuming that, initially, the load temperature is equal to the set-point, use the heat exchanger model to determine the ram air flow Mram necessary to produce Tho = Tioad = Tsp, with the rest of the input variables Tm, Td, and Mbud given from (i). An iterative procedure is employed here: starting from zero, Mram is adjusted until the heat

exchanger model output Tho is as desired. (v) Once Mram is determined, ram air pressure Pd upstream of the heat exchanger is found from the cold-side pressure drop equation (2.42), with Pco = Pamb (vi) Knowing Mram, and with P,, s Pj = = Td, the valve flow

equation (2.38) is rearranged to determine the valve opening area AramFrom Aram, the opening angle Pr,,m is found using (2.36). The percent valve opening command U ram follows directly from this. The above procedure is executed prior to the start of any simulation, whether it is linear or nonlinear. The subroutine depends only on the chosen operating point, and the type of control configuration being investigated. Table 3.2, shown below, lists the initial steadyPROPERTYOF RYERSON UNIVERSITY LIBRABY
49

state values for the system variables when the ram air channel control configuration is initialized about operating condition #7.
Cc=0.24
R=639.6
Kv=0.0 15708

Ch=0.24 N=10 Tv =I.5

MCs=0.65 Mach=0.5 Tt,=24.078 Tei=117.5 4,» =11 428 P,o.d=45.106
u^=21.931

Y=1-4 F^=0.7 K,oad=104120 Tw=190 Phi=45.11 (3p,p,=0.34449

g=386.09

Tsp=190
T io a d -- 190
Pd=10.114 Aram-- 0.10382

imb=90
Tam b-- 10. II
Pho=45.106 A f iw =0.018333

Thi=380 A,. =45.11
Peo=10.11

Mmm =0.017226 Table 3.2: Initial steady-state values for operating condition #7 (ram air channel control configuration)

K|a=l

A linear open-loop model will now be developed for the ram air channel control configuration. The linear model is based on the system model equations, linearized about initial steady-state values listed in Table 3.2 (as determined by the initialization subroutine). Equivalent block diagrams representing linear component models were presented in Chapter 2 , and will now be interconnected to form the overall configuration. The resulting block diagram model is built in Simulink (Fig. 3.3), to be utilized for openloop analysis (as well as control parameter tuning in the following section). Following the initialization, the gain coefficients C/, C2, C3, C4, Cs, and C7 must be calculated before the simulation can begin, as defined in the previous chapter (with the appropriate variable substitution).

50

Thi

x" = A x+Bu y = Cx+Du m d o t_ h H eat E xchanger S ta te - S p a c e M odel

T h o = T lo a d

K

j

D

T lo a d

V a lv e D ynam ics Kv b e ta v a lv e C1 A jv a lv e C2

CT>
u ram

Tv.s+1

Poo
ii

P c in le t C4 P d

C5

Td
(P _ d -P _ c o ) C7

Fig. 3.3: Linear, open-loop plant model for the ram air channel control configuration

The linear model shown in Fig. 3.3 is in its open-loop form; that is, it does not include any feedback (sensor) and control (controller) elements yet. This model represents the plant, with control input to the valve U ram (percent valve opening command), and load temperature Tioad as its input and output, respectively. An (linear time-invariant) LTI object is created from the above model (Fig. 3.3) for analysis in MATLAB, using the built-in Control System Toolbox commands. An open-loop

response of the plant is obtained using the s t e p command, which produces the following plot (Fig. 3.4) of the output response that results when a unit-step increase in U ram (+ 1 %) is applied^:

` In this case, the system w as first initialized about operating condition #7

51

step Response From: To;T^,
0
·1

2

-3 -4

-6

-7
-8

-9

0

50

100

150

200

250

300

350

Time (sec)

Fig. 3.4: Step response of the ram air channel open-loop configuration

An increase in valve opening command, and thus an increase in ram airflow, will cause the load temperature to fall, as more thermal energy is extracted from the bleed air stream with an increase in the cold-side fluid flow rate. For this particular case, the step response (Fig. 3.4) shows a load temperature decrease of 8.34 °F for a unit step (1%) in the valve opening command signal. This means that a decrease in the controlled variable (^/oorf) requires a decrease in the manipulated variable, in order to return (decrease) Tioad to its set-point. In other words, the ram air configuration requires a positive feedback control loop to bring about regulation. Equivalent to this is using the default negative feedback convention (Fig. 3.1), with a negative unity gain in front of the controller (to reverse the sign). The open loop response also yields information about the plant's transients, and measures such as the response settling time can be easily extracted from the step response. Using MATLAB's LTI viewer tool to extract step response characteristics, the settling time of the above response is tset =176 sec. This is largely due to the relatively slow heat exchanger dynamics (see Fig. 2.7). The significance of this will become clear m the end of the chapter, when all results will be discussed and compared. One can also see from the open-loop response that the system is stable, as a new steady-state condition is reached after a finite amount of time, without any oscillation or
52

diversion. However, a better illustration of the system's stability includes looking at the system's pole-zero map, which is depicted in Fig 3.5. All of the systems poles are in the left side of the plane, thereby satisfying the stability condition.
Pole-Zero Map
0.03 0.06 0.04

^
cn

0.02

-X
3
-

0.02
0.04

-

o-

-

0.08 0

Real Axis

Fig. 3.5: Pole-zero map of the open-loop model (ram air channel control configuration)

3.2.2 Tuning of Controller Parameters for the Ram Air Channel
Control Configuration
Using positive feedback, and with a temperature sensor in the feedback path, the plant model is closed with a P/controller given by (3.2), + 1 (3.3)

Pram

1

where Kp^^, and control configuration.

are corresponding controller parameters for the ram air channel The influence of varying these parameters on the system's

performance will now be analyzed, in terms of response to a unit-step change in the reference (set-point) input. For a preliminary analysis, the loop is first closed with a simple proportional controller, for the purpose of narrowing down Kp^^^ to a smaller range of values. By testing a few arbitrary values and obtaining their corresponding responses, the value of

53

proportional gain above which the system response diverges can be quickly determined. This transition into instability occurs at around as this number is increased, as illustrated by Fig. 3.6. =
8 .6

and continues to deteriorate

s
"5 -20

Ü

-40

100

200

Time fs)

300

400

500

GOO

700

Fig. 3.6: Step response for a closed-loop system with a proportional controller gain of 10

Therefore only lower values of Kp^^ are of interest. A sweep in gain values can be easily implemented in MATLAB, starting with a wider range of gain values, and then progressively narrowing it down. Figs.
3 .7

(a) and (b) show the responses for a wider range in proportional gain

values, and a narrower range, respectively. Clearly, for increasing values of Kp^^^ , the steady-state error decreases, but at the expense of larger overshoot and decreased damping. For example, looking at the response of a system with K p ^ = 5, very large overshoot and lack of significant damping (response is very oscillatory) can be clearly seen. On the other hand, the response corresponding Kp^^=OA overshoots its steadystate value by only a very small fraction, with very little oscillation (significant damping). However, the steady-state error of the latter is quite large --more than half the value of the reference input.

54

4
u?

f

3

¥
£1.5

!
C

1.
f O
-1
-2

f '

0

100

200

303

400

500

600

700

0

100

200

300

400

500

600

700

Time (s)

Time (s)

(a)

(b)

Fig. 3.7; Unit step in reference input responses for varying proportional gain: (a) in the range of [0.5-5] at increments of 1.5, (b) in the range of [O.l-l.O] at increments of 0.1

On its own, the above analysis is not sufficient in determining the proportional gain, since the effect of variation will differ somewhat once a PI controller is put

in the control loop, due to addition of the integral control mode. However, preliminary proportional gain analysis is helpful in quickly eliminating the range of values in that are obviously off the mark (in terms of overshoot and steady-state error). Having narrowed down the range of expected proportional gain values, the integral term is now added to the proportional term in the control loop, thus forming a P/controller. The gain sweep exercise can now be performed again. It will be slightly more involved, as there is an extra parameter ) to tune. However, having narrowed down the range of Kp^^

will alleviate this process greatly. Fig. 3.8 shows gain sweeps in Kp^^^ , at increments of 0.1, at various values of the integral time constant . Too small of an integral time constant causes the system

response to diverge, as seen in part (a). At the other extreme, integral time constant that is too large means that it will take a long time to eliminate the steady-state error, as shown in (b), where the response is only very slowly moving towards its eventual steadystate unity value.

55

Tl

=25

Ti
1.5

=1000

5 »

* 2

S>

-10

0

100

200

300

400

500

600

700

0

100

200

300

Time (s) (a)
1.4

Time (s)

400

500

600

700

(b)
1.8

Ü. 1.2

5 »

i::
_o 0.8

^ 0.8

c

0.6

| 0.6
1 0.4

£ 0 .4

0.2

0

100

200

300

Time (s)

400

500

600

700

0

100

203

300

Time(s)

400

500

003

700

(d) (c) Fig. 3.8: Proportional gain sweeps for different values of integral time constant

The above results give a quick method of visualizing the affect of varying controller parameters, especially when there is a need to narrow down the range for a combination of proportional gain and integral time constant values. Based on these visual results, a more detailed analysis can be performed in this smaller range of values for and . Taking advantages of MATLAB's Control Toolbox tools such as

LTI Viewer, numerical values for percent overshoot and settling time can be obtained from the response curves of the closed-loop system (for a unit-step in the reference input), and can be conveniently listed (Table 3.3) as a function varying control Parameters.

56

ram

"

0.2

Kr

=

0.3

Kp, =0.4
74.2 857 54.7 525 44.4 435 38 367 33.6

K,

=

0.5

7 } ram = 5 0

O S(% )

17.7 355

44.4 572 24.8

61.3 759 41.7 486 31.1 401 24.5 405

85.3 935 65.9 557 55.8 477 49.5 464 45.3

T/ram" 75 7' /ram=100 7>ram=125 7>ram=150

Q.y(%)
354 N/A

360 14 279 7.18 459 2.49

tsAs) Q5(%) osr/o)

530 N/A 716 N/A

20

465 902 419 372 531 Table 3.3: Percent overshoot and settling time for a response to a unit-step in reference input, as functions of controller proportional gain and integral time constant

Table 3.3 gives the performance measures, in terms of overshoot and settling time, for the system's response to a unit-step increase in reference (set-point) input, as a function of various combinations of controller parameters and . The lowest

settling time in the table is 279 seconds, corresponding to Kp^^^=0.2 and T,^^^=100. The percent overshoot for these particular values is 14%. Thus, for the ram air channel control configuration (linearized about operating condition #7), a P I controller is chosen with the following values^: ^f/ram W "
1+
-

0 2

lOOf

(3.4)

3.2.3 Closed-loop nonlinear simulations for the ram air channel control configuration
Nonlinear simulations are implemented using a MATLAB program The dynamics of the system are simulated by solving the model equations every time step dt. It should be noted that although nonlinear system equations are used, the same statespace heat exchanger model is employed. Recall that this model is in itself a linear
®Note that this choice might change if other measures of performance, such as rise time or peak time, are considered. For full code listing, see Appendix.

57

model, linearized about a certain operating point.

However, contrary to the linear

simulation model, here the heat exchanger subroutine is linearized with every control step (at local operating point), and thus it is linear in a very small range (within the control step). In other words, the heat exchanger matrices A ^ ,C and D are continually updated every control cycle, and thus their elements reflect current conditions. Hence the implementation is not truly nonlinear, but rather a hybrid technique that implements a linear heat exchanger model within an overall nonlinear model. As long as the control time step dt is kept small, this implementation is fairly close to being fully nonlinear, and will thus be referred to as so. The ram air channel control nonlinear simulation, as programmed using MATLAB, is outlined in the following steps:
1

) initialize the model based on chosen operating condition (initialization subroutine)

2

) input the type and size of disturbance to be simulated

3) start control loop subroutine, to be executed every cycle, until the end of the simulation is reached (time = duration): determine the valve opening area Aram from (2,37) an iteration procedure is performed to calculate the ram airflow M ram aud ram air valve downstream pressure Pd, such that both the valve flow rate (2,39) and the cold-side pressure drop (2,42) equations are simultaneously satisfied, and making use of the fact that pressure downstream of the valve is equivalent to the pressure at the cold-side heat exchanger inlet, Pd update the heat exchanger input matrix U =

bkeJ

n

whose elements will change according to disturbances (eg, a step increase in T),,), and due to system regulation (changes in Mram will be reflected in the control input)

58

-

call the heat exchanger subroutine and obtain A ^,C ,D matrices, based on current operating point values

-

update the heat exchanger state vector X (2 . 1 1 ) calculate the heat exchanger outlet temperature Tf,o (2 . 1 2 ) determine the sensed temperature (2.53) and (2.54) from the sensor dynamics

-

based on the error between sensed temperature and load temperature, produce an error signal and feed it to the controller

-

based on the control signal U ram , obtain a new valve opening angle, using the valve dynamics model (2.36)

-

increment simulation time by the control time step dt, and repeat the loop

4) plot the results For equations describing the system dynamics (state equation, sensor and valve dynamic equations), numerical integration is used. In order for the numerical method to be accurate, a small time step dt must be used. After trying numerous values of dt, a value of dt = 0 . 0 1 sec was chosen, as it is small enough for the numerical method to yield accurate results and, at the same time, keeps the computational time reasonably low. Nonlinear simulations for two types of inputs are now demonstrated: (i) step increase in temperature set-point (reference input), and (ii) step increase in bleed air temperature (disturbance input). The initial operating point is the same as for the preceding linear analysis (operating condition #7), and therefore all of the steady-state values listed in Table 3.2 apply in this case as well. The PI controller is implemented, with proportional gain = 0 . 2 and 7)^^ =
100

, as determined in the previous section.

For the reference input simulation, a unit-step increase is applied to the temperature set-point {Tsp increase from 190 °F to 191 °F) at time t = 0 sec. The response is shown in Fig. 3.9 below, in terms of load temperature, measured [load] temperature, and valve angle position response. The nonlinear temperature response shows an

59

overshoot of 14.5 % and settling time of 279 sec, values that are close to those upon which the original controller was chosen, and therefore confirm the earlier [linear] results.

0.0172 0.0171

5 .190.8

1 0.0171

I0
» 0.017 5 1 9 0 .4 E 0.017 0.0189 O C0.0169 0.0168 100 200 300 400 500 600 700 100 200 300 400 500 600 700

Time (sec)

Time (sec) (b)

(a) Fig. 3.9: Response to a unit-step increase in temperature set-point

=0.2, 7}^,,=100): (a) load

temperature (solid curve), measured temperature (dotted curve), (b) ram air flow rate

For a disturbance input, the change in bleed air temperature % (as entering the system) is considered. A 40 °F step increase in bleed temperature is assumed at time t=0 sec (T/ii increases from 380 °F to 420 °F). The resulting system response curves, in terms of temperature and ram airflow rate, are shown in Fig. 3.10 (a) and (b) below.
195 0.0195

S'

194

«

0.019

0.01B5

(0 0.018

.3

191

E 0.0175

193

0

0.017 100 200 300 400 500 600 700 100 200 300 400 500 000

Time (sec)

Time (sec) (b)

(a)

Fig. 3.10: Response to a 40 ®F step increase In bleed air temperature (ATp^^ =0.2,

=100): (a)

load temperature (solid curve), measured temperature (dotted curve), (b) ram air flow rate

60

As mentioned before, the controller parameters were tuned by analyzing' the system's response to a reference input. As disturbance rejection is particularly important, the effect of changing the values of and on the response due to disturbance

input is also analyzed. It was found that increasing the controller proportional gain will reduce the overall integral error (area under the temperature response curve), but has little effect on response settling time. The same increase in gain causes a significant overshoot increase in the response to a step in reference input, as well as decreased damping (reflected by the more oscillatory response shape). These findings are demonstrated by simulation results shown in Fig. 3.11 below, for a PI controller with 7)TM.= 100.
192 192

= 0.8 and

f 191.5

191 g" 190.5 190 190 199.5
0 100 200 3^ 400 500 GOO 700

0

1O0

200

300

400

500

600

700

Time (sec)
(a)

Time (sec)
(b)

Fig. 3.11: System response to reference and disturbance inputs

=0.8, 7}^^^ =100), load

temperature (solid curve), measured temperature (dotted curve): (a) unit step in set-point (b) 40 °F step increase in bleed air temperature

Particular details of the initialization procedure, along with linear and nonlinear models presented in this section, apply to the ram air channel control configuration. The second control configuration, bypass channel control, is the focus of the next section, and shares a lot of similarities, in terms Of controller design and simulation procedures. Therefore, the same steps will be performed in the next section as were applied to the ram air channel control configuration.

61

3.3

Bypass Channel Control
For this bleed air system configuration (Fig. 3.12), a portion of the bleed air flow

bypasses the heat exchanger and rejoins the stream downstream, after which the merged stream continues to flow to the load. A control valve is now located in the bypass channel, thus giving this configuration its name. Control is achieved by adjusting the ratio of bypass to total bleed air flow, and its implementation is the subject of this section.

3.3.1 Configuration Details

m ain bleed channel
^ bleed main

{7 /i/. PHin

engine
bleed

load
U h h I

had s

bleed bypass channel
^ b leed bypass

F

bypass channel controller

Fig. 3.12: Schematic of the Bypass Channel Control Configuration

The source of bleed air (zone A) is the same as for the ram air channel control configuration: bleed air flows with a mass flow rate (Ib/s), at a pressure of

^,,,(psia) and a temperature of Fw(°F), as set by initial operating conditions from Table 2.2. The source of ram air (zone B) remains unchanged as well: inlet pressure (psia)

and inlet temperature Td (°F) for the ram air stream entering the system are determined from initial atmospheric conditions using (2.34) and (2.35). However, as there is no control valve in the ram air channel, initial ram air mass flow rate by the cold-side heat exchanger pressure drop (2.42), with (Ib/s) is now set

= Pd, Pamb = Poe.

62

Zone C contains the bypass channel control valve, and is modeled by equations (2.36-2.40). Transformations in variable notation for using these equations in the case of bypass channel control configuration are shown in Table 3.4.

1

General nomenclature of (236-2.40) Valve opening angle, A Valve opening area, Mass flow rate through the valve, Upstream pressure, P,, Downstream pressure, Pj
M v

Nomenclature for bypass channel control configuration
Pbvmss ^bvnass

bleed bypass

^hin ^load

Upstream temperature, Tm Table 3.4: Variable nomenclature transformation for the bypass channel control valve

As before, the state-space heat exchanger model, along with experimental hot and cold side pressure drop equations (2.41-2.42), is used for zone D. However, for this configuration, not all of the bleed air flows through the heat exchanger hot-side, as some of the bleed air is being bypassed. Correspondingly, Mtieedmam is used in place of and Mram in place of . ,

Downstream of the heat exchanger, the main bleed flow is merged with the bypassed portion of the bleed flow in zone G. The temperature of the bypass flow is unchanged from the bleed air inlet temperature (% ), while the temperature of the main bleed flow exiting the heat exchanger is Tho, as governed by the heat exchanger model. The resulting temperature of the mixed flow is the temperature delivered to the load (zone E), with T w determined by (2.51). The resulting flow rate is the sum of the main and bypass flows, which is equal to the original bleed air flow rate:
A f Meed bypass ·

MM eedm am +

63

Again, some equivalency statements are made between the pressures at certain points of the system, as a result of neglecting pipe-flow pressure losses: · the pressure at the hot-side heat exchanger inlet is equivalent to the bleed air pressure leaving the source. P m = · the pressure at the cold-side heat exchanger inlet is equivalent to the ram air channel inlet pressure, Pd = Pd» · the pressure at the hot-side heat exchanger outlet is equivalent to the pressure upstream of the load, Pho = Pioad · since ram air is dumped directly into the atmosphere, pressure at the coldside heat exchanger outlet is equivalent to ambient pressure, Pco = Pamb

3.3.2 Open-loop linear model of the bypass channel control configuration
The initialization procedure is first performed, for the bypass channel control configuration, in order to obtain the initial steady-state values for subsequent simulations. The initialization subroutine for this configuration differs somewhat from the previous case, and is given by the following steps: (i) (ii) O btain^,,, Tm, Pd,,, Td, and fi*om the initial operating point.

Knowing Pd= Pd,, and , Pco = Pamb , determine the ram air mass flow rate Mram ffom the cold-side heat exchanger pressure drop (2.42).

(iii)

It is assumed that, initially, the load temperature is at its set-point value. The ram air flow rate and the heat exchanger hot/cold side inlet temperatures are known. Using the heat exchanger model and the mixed flow equation (2.51) simultaneously, determine the correct ratio of bleed bypass that must exist in order for the load temperature to equal its setpoint value. In other words, using two sets of relations, an iterative

procedure is implemented until the values of M budmam and M bkedbypa,, (two unknowns) are found that satisfy the desired result (Tioad = Tip).
64

(iv)

Once M buedm ain is found, determine the pressure at the load Phad from the hot-side heat exchanger pressure drop (2,41), making use of the fact that Pload --Pho and Phi-- P/iin'

(v) (vi)

Determine Kioad from the load impedance equation (2.49). Knowing Mu«dhyp^ , and with P,, s , P j = Pioad, T,, = Tm, the valve flow

equation (2.38) is rearranged to determine the bypass valve opening area Abypass- From Abypass, the valve opening angle ^bypass is found using (2.36), and the corresponding percent valve opening command U bypass follows directly from this. Using the initialization subroutine for operating condition #7, the following initial steadystate values for the bypass channel control system result (Table 3.5).

Cc=0.24 R=639.6 Kv=0.015708 T,mb=90 Pamb=10.Il Pho=45.107
M b leed b yp a s,

Ch=0.24 N=10
Tv= 1 .5

MC,=0.65

7=1.4 Frec=0.7 K,,,ad=104120 Th,,= 118.26 Phi=45.11 Pbvi«ss= 1.0437 K,,=l

g=386.09 O ram -- 1.5 T,,,=190 T,,,aH=190 O bypass 1 0 Abvnaa,= 0.39034 Ubypass= 66.446

Mach=0.5
t,,=24.078

Thi=380 =45.11 Pco=10.11 =0.005025 A/ ram -- 0.27304 5R=0.2741

Tei=117.5 P,,,,=l 1.428 P,ow=45.107
M bleed

=0.018333

MiWma/n= 0.013319

configuration)

A linear open-loop model is presented next, based on the system model equations (in their block diagram form) as applied to the bypass channel control configuration, and is linearized about initial steady-state values listed in Table 3.5. As in the previous case, the resulting Simulink model of the plant, shown in Fig. 3.13 below, will be utilized for open-loop analysis and controller parameter tuning.

65

H eat E xchanger S ta te - S p a o e M odel T_hl T ho

C11

C 12 Cl 3 B ypass V alv e D ynam ics Kv Tv.s-H CM C3 m d o t_ b le e d CIO P h jn le t C4 P lo a d B eta_ b y p as3 A _bypas3 C lb C2 T Jo ad

m _ d o t_ b leed b y p a3 5

CS

.fP hi-P ho)

Fig. 3.13: Linear, open-loop Sim ulink model of the plant (bypass channel control configuration)

Following the initialization, the gain coefficients C/, C2 , C3 , C4 , C5 , Cg, C n, C12, Q j and C14 are calculated, as defined in Chapter, 2 (with the appropriate variable substitution). The plant's input and output are U bypass (percent bypass valve opening command) and Thad, respectively. As in the previous case, an LTI object, for the above plant is created, to be analyzed using MATLAB's Control Toolbox commands. An open-loop response of the plant is obtained using the s t e p command, which plots the output response resulting from unit-step increase in U bypass (+1%), as seen in Fig. 3.14.

66

step Response

From :
1.6

To:T^^^

1.4 1.2

I ·s I

Q.

0. 6 04

'-

0.2

Time (sec)

Fig. 3.14: Step response for the bypass channel open-loop configuration

The open-loop response shown above is quite different from that of the previous ram air channel control configuration (Fig. 3.4). The most noticeable difference is the very short settling time (5.72 sec). In fact, this response has the shape of a typical firstorder step response, with a time constant of about 1.5 seconds. Recall that the control valve is modeled by a first-order transfer function, with a time constant T v= 1.5 sec. The plant's open-loop response seems to suggest that the load temperature response to a change in control input is governed entirely by valve dynamics, without the slow heat exchanger transients coming into play at all. The reason behind this behaviour becomes clear when one considers what is happening with the heat transfer for this specific set of conditions. Because the cold-side (ram air) flow rate is many times larger than the hot-side (main bleed air) flow rate, a small variation in thermal energy (fluid flow rate multiplied by fluid temperature) carried by the hot-side fluid will not affect the output (hot-side fluid outlet temperature) by any significant amount. This was already demonstrated in the heat exchanger modeling section (see Fig. 2.7) of Chapter 2. Therefore, in this case, the slow heat exchanger dynamics play virtually no role'' in the path from the control input to the controlled

" The heat exchanger dynamics are present at all times; however, their effect is so small in this particular case that they appear to be absent from the linear model's response.

67

variable (load temperature), as the only significant impact on the load temperature wdl come ftom variations in thermai energy carried by the bypass channei (and whose transients are based on valve dynamics only), rather than that carried by the main Weed channel passing through the heat exchanger. O f course, for a ciosed-loop system, temperature sensor dynamies wili affect the speed of the response. Furthermore, the same conclusions cannot be made about aii disturbance inputs, especiaily those that affect the thermal energy carried by the much larger ram air channel flow. Consider a change in atmosphene conditions (e.g., ambient pressure and/or temperature), and thus a change in overall thermal energy carried by the ram air flow: such a disturbance would surely have a significant impact on energy transfer in the heat exchanger, and thus on the hot-side outlet temperature ( W . Thus, for such eases, the heat exchanger dynamics would come into play, and one would expect the overall system response to be slower. The discussion section at the end of this chapter will examine these observations flitlher, in light of reference input and disturbance input simulation results demonstrated in this section. Returning to the open-loop response, it is seen that an increase in valve opening command of 1% causes the load temperature to rise by 1.6° F. This means that an increase in the controlled variable (T w ) requires a decrease in the manipulated variable ), in order to return (decrease) T/w to its set-point. In other words, the bypass control configuration requires a negative feedback control loop to bring about regulation. This will be consistent with the notation adopted in Fig. 3.1. A look at the plant's pole-zero map, as shown in Fig. 3.15, establishes its stability, as all of the poles are in the left-hand side of the complex plane.

68

Pole-Zero M ap

02
0.15 0.1 ^ 0.05

-X
-0.05
-

0.1

-0.15

-0.7

-0.6

-0.5

-0.4

-0.3

-OZ

-0.1

Real Axis

Fig. 3.15: Pole-zero map of the open-loop model (bypass channel control configuration)

3.3.3 Tuning of Controller Parameters for the Bypass Control Configuration
Using negative feedback, and with a temperature sensor in the feedback path, the plant model is closed with a PI controller given by
1+

W

-

bypass

-

1
bypass^

(3.3)

where

, and 7}^^, are corresponding controller parameters for the bypass

channel control configuration. The same tuning procedure is used here as in the previous configuration: the effect of varying controller parameters on system performance will be analyzed by looking at response curves resulting from unit-step changes in the reference (set-point) input. Fig. 3.16 shows some response curves for various values in when the

loop is closed with a simple proportional (P) controller only. Again, this is a simple preliminary step to narrow down the proportional gain to a smaller range of reasonable values. When only P control is implemented, these results show that in order to have

69

small steady-state error and short settling time, large initial overshoot should be expected, as seen in Fig. 3.16 (a).

6

1.6

CL

}:
c

I 0.8
5 0.6

! Ü

.= 0.2

0

50

Time(sf (b)

Time(s)
(a )

Fig. 3 16:

S w eeps in

fo r p r o p o rtio n a l c o n tro l: (a)

wide ra n g e 11-5], (b ) n a r r o w e r ra n g e

10.2-1.2]

The Steady-State error will be eliminated by adding integral action, and therefore smaller values In proportional gain can be chosen to reduce the ovemhoot (which will however increase the settling time, as will be discussed shortly). The integtal teim is added to the proportional controller now, and the analysis continues with the tuning of and T , ^ , together. Figure 3.17 shows gain sweeps in for various

values o f the integral time constant T , ^ , . As before, these responses aid in further narrowing down the range of parameter values.

70

=0.5
g* 1.4
= 1.1

= 100

0.8

·o a -10

g 0 .6

O 0.4

g ^0.2 o
Time (s^
(a )
=

= 0.1

50

0

50

Time (s)
(b )

100

150

20
= 1.1

=30

f
£ 1 .5
Q .

O

= 0.1

= 0.1

Time (S)
(c)

60

70

Time (s)
(d )

Fig. 3.17: Sweeps in proportional gain for PI control, for variousvalues of integral time constant

A final analysis is carried using the LTI viewer tool to obtain exact numerical values for overshoot and settling time measures, as a function of proportional gain and integral time constant. The results within this small parameter range are listed in Table 3.6, which gives the performance measures, in terms of overshoot and settling time, for the system's response to a unit-step increase in reference (set-point) input, as a function of various combinations of controller parameters in terms of overshoot and settling time, are given by giving form to the following PI controller: and
* bypass

. The best values, = 0.9 and T / bypass = 3 0 *
*

71

PI bypass

{s) -- 0.9

1 + -

305

(3.5)

I^Pbyposs 0-7
-

I^Pbypas, -0-8
33.4

I^Pbypass

-1-0
59.2 57 53.8

I^Pbypass - 2 - 0

2' /i^a,,=20 "25
-30

OSVa tsAs)
OSVo

20.5 72 14.6 40.4

46.5 61.5 40.8 49.1 37.6 31.1 34.8 95.1 33.1

178 28.4 171 27.2 166 24.5 164 22.3 161

66.6
27.9 47.9 24.4 60

'^Ibypass

48.1
50.3 33.4 47.6 84.4 46.1

"^Ibypass

OS^/o hAs) O S'^/a fsel(S)
OSVo

11.2 82.8 9.11 124 7.54

2/typo*,-35 ^Ibypass=^^

22.2
108 20.5

140 114 20.7 158 126 Table 3.6: Percent overshoot and settling time for a response to a unit-step in reference input, as functions of controller proportional gain and integral time constant

It must be noted that this controller was tuned to give best results, in terms of overshoot and settling time, on the basis of the reference input. It will soon be demonstrated that such a choice is not the best for disturbance rejection, in term of response speed for this kind of input. The improvement in response speed for larger values of proportional gain is suggested by the last column of Table 3.6, and will be addressed shortly in the next section, which presents the nonlinear simulations for system response to both reference and disturbance inputs.

3.3.4 Closed-loop nonlinear simulations for the bypass channel
control configuration
The nonlinear simulation procedure is similar to that used in the previous configuration. The following are steps making up the MATLAB program'^ for nonlinear simulations, as applied to the bypass channel control configuration:

For full code listing, see Appendix.

72

.1)

initialize the model based on chosen operating conditions (initialization subroutine)

2) 3)

input the type and size of reference/disturbance input to be simulated start the control loop subroutine, with the following executing every cycle (until the end of the simulation is reached); determine the valve opening area Abypass from (2.37) using four equations to solve for four unknowns (Phad, Mbued , M bheJmain, M bkedbypas, ), un Iteration in Phad is performed until all the variables converge and mass conservation between the main and bypass flows is satisfied (first equation), Mww= Mu^dmam + Mbkabypcm, where each flow rate is determined by a separate set of relations (each a function oîPhaè, giving the other three equations: (i) (ii) M bleed is calculated using the load impedance equation (2.49) Mb le e dm a in Is calculatod from the hot-side heat exchanger pressure drop (2.41) (iii) Mb le e d b y p a ss Is determined using the bypass valve flow-rate equation (2.39)
T

update the heat exchanger input matrix U -

P / jI ,71.,

bleed main ,

r,

call the heat exchanger subroutine and obtain A ^ ,C J ) matrices, based on current operating point values update the heat exchanger state vector X (2.11), and calculate the heat exchanger outlet temperature 7*,, (2.12) calculate the temperature of the mixed flow using (2.51), equivalent to the load temperature Thad

73

-

determine sensed temperature and (2.54)

from the sensor dynamics (2.53)

-

based on the error between sensed temperature and load temperature, produce an error signal and feed it to the controller subroutine

-

based on the control signal U bypass (returned by the controller subroutine), obtain a new valve opening angle, using the valve dynamics model (2.36)

-

increment simulation time by the control time step dt, and repeat the loop

4)

plot the results

Nonlinear simulations for two types of inputs are now demonstrated: (i) step increase in temperature set-point (reference input), and (ii) step increase in bleed air temperature (disturbance input). The initial operating point is the same as in the preceding linear analysis (operating condition #7), and therefore all of the steady-state values listed in Table 3.5 apply. A PI controller is first implemented with proportional gain and 30, as determined in the previous section.

For the reference input simulation, a unit-step increase is applied to the temperature set-point (Tsp increase from 190 °F to 191 °F) at time r= 0 sec. The response is shown in Fig. 3.18, in terms of load temperature, measured [load] temperature, and bypass flow ratio (defined as the ratio of bypassed flow to total bleed flow, M bhfdbypass IMbleed ). Tho load tempeiature curve has an overshoot of 37.8 %, and a settling time of 31.2 sec, values that are very close to those obtained for the same input and controller parameters in linear simulations.

74

191.5

0.281

 S

O J
191 ic

0.279 0.278

g . 0.277 il90.5 0.276 0.275 0.274

100

0

20

40

GO

80

103

Time (sec)

(a)
bypass

(b)

Fig. 3.18: Nonlinear simulation response to a unit-step increase in reference input, A T p flow ratio

=0.9,

=30: (a) load temperature (solid curve), measured temperature (dotted curve), (b) bypass

For a disturbance input, the change in bleed air temperature Tm is considered again, in the form of a 40°F step increase at time f=0 sec {Tm increases ffom 380 °F to 420 °F). The resulting system response curves, in terms of temperature and bypass ratio, are shown in Fig. 3.19 (a) and (b) below.

200
u.

0.28

C D 198

0.27

194

o

192

0.23

100

0

20

40

GO

80

100

Time (sec)

(a)
=0.9,

(b)

Fig. 3.19: Nonlinear simulation response to a 40 °F step increase in bleed air temperature =30: (a) load temperature (solid curve), measured temperature (dotted curve), (b) bypass flow ratio

75

As seen in Fig. 3:19, the temperature response to a disturbance input takes longer to settle down - in this particular case, the settling time is approximately 85 seconds. The response speed can be improved, for disturbance inputs, by re-adjusting the controller parameters. An increase in proportional gain greatly improves the response speed, as does (to a lesser degree) lowering of the integral time constant (but not too low, as the system will begin to diverge). However, increasing values of will have an

adverse effect on the overshoot response for reference inputs, as was already seen in Table 3.6. Thus, there is a pronounced trade-off between performance measures for reference and disturbance inputs. To illustrate this concept, simulations are carried out

for the same reference (unit step increase in temperature set-point) and disturbance (40°F step increase in bleed air temperature) inputs, but with the controller parameters adjusted for disturbance rejection p e r f o r m a n c e : , =2, Fig. 3.20 below.
193

25. The results are shown in

200

u.

198

I
I 191.5 191

I

e 198

d

192

190

0

20

40

60

80

100

0

20

40

BO

100

Time (sec)
(a)

Time (sec)
(b )

Fig. 3.20; Nonlinear simulation response to reference and disturbance inputs, Kp/^^^ =2.0, =25, load temperature (solid curve), measured temperature (dotted curve): (a) unit step increase in temperature set-point (b) 40 °F step increase in bleed air temperature

Clearly, the increased proportional gain has the affect of decreasing the settling time for disturbance-input responses, but at the expense of a vast increase in overshoot for the reference input response. This trade-off in performance measures will be further

76

revisited in the subsequent section, along with a thorough comparison and discussion of all the results for both control configurations.

3.3.5 Comparison and discussion of simulation results for ram air channei control and bypass channei control configurations
In the previous two sections, a number of results were obtained for the first two control configurations, namely ram air channel control and bypass channel control. These results will now be discussed and compared, to form a basis and motivation for the proposed ram-air-plus-bypass control configuration of the next chapter. The ram air channel control configuration was implemented first, and system responses to both reference and disturbance inputs were simulated (at a chosen operating condition). For this system to match a unit-step increase in the reference input (set-point temperature), it must decrease the thermal energy extracted from the bleed air. This is reflected in Fig. 3.10 (b) by the decrease in ram air flow rate, fi' om the initial steady state value of Mrm, =0.017226 Ib/s to a new value of Mram =0.01706 Ib/s. In terms of a

disturbance input, a 40 °F step increase in bleed air temperature is applied, with the resulting response shown in Fig. 3.11. As expected, an increase in ram air flow rate is necessary to counter the increase in thermal energy carried by the bleed air. To return the load temperature to its set-point value for this particular increase in bleed air temperature, a ram airflow increase from is required. As a result of slow heat exchanger dynamics being present in the control loop, the response time of this control scheme is rather large. The effect of the ram air control valve is `delayed', since it must first work its way through the heat exchanger, before making any impact at the load. Thus, the physical configuration itself places certain limits on response time. Furthermore, as is revealed by simulations of this control system, the heat exchanger response time itself is quite slow for this particular case. With a bleed air flow rate of =0.018333 Ib/s, the range of ram air flow rates from the =0.017226 Ib/s to a new value of =0.019234 Ib/s

above-discussed simulations are very close to that of the bleed air flow rate. As was demonstrated (see Fig. 2.7) in the heat exchanger modeling section of Chapter 2, when

77

the hot-side and cold-side fluids (with similar heat capacities) have flow rates that are close to each other, the result is particularly slow heat transfer dynamics. This effect, specific to this system and the particular operating and atmospheric conditions, only adds to the overall slow response time characteristic of the ram air channel control configuration. This control scheme does have some desirable features. Its biggest advantage is that it does not `waste' ram air - that is, there is no `overcooling' (as for cases with a hotside bypass), and the amount of ram air used is the lowest necessary value. Also, the heat exchanger lag can sometimes be desirable: for sudden temperature changes in both hot and cold side airstreams, the effects of such disturbances will not be as abruptly felt at the load. If there are components present at the load that are very sensitive to, for example, sudden temperature variations, this control strategy would alleviate such effects. In terms of P I controller parameter tuning, it was shown that the integral error can be decreased by increasing the proportional gain, as can be seen when comparing Fig. 3.10 (a) and Fig. 3.11 (b), w i t h =0.2 and =0.8, respectively. However, no

significant improvement in response time is achieved by such increases in (contrary to the case of bypass control). Furthermore, the decreased integral error comes at a price of decreased reference input response performance --as seen in Fig. 3.11 (a), larger overshoots result when higher values of Kp^^^ are used. Furthermore, in

responses to both reference and disturbance inputs, increases in proportional gain reduce the damping of the response, making it more oscillatoiy than those with a lower value of ^Pram ' The bypass channel control configuration Was analyzed in the same way as the former, in terms of system response to both reference and disturbance inputs. For an increase in load temperature set-point, the system responds by increasing the bypass flow rate (Fig. 3.18). On the other hand, for a disturbance input in the form of a 40 °F step increase in bleed air temperature, the bypass valve must close by a certain amount, as confirmed by the resulting response of Fig. 3.19. The improvement in response time is evident from both of the above mentioned results. Whereas in the case of ram air channel control, it took roughly 279 seconds for the response to a reference input to come within

78

± 2% of its steady state value, the same result was accomplished by the bypass control configuration in 31.2 sec. For a disturbance in bleed air temperature, the ram air control configuration took approximately 420 seconds to settle (Fig. 3.11b). Using the bypass control configuration, settling time for the same disturbance input was improved to 87 seconds (Fig. 3.19a), which was further improved to approximately 20 seconds, after some adjustments were made in the controller parameters in light of disturbance rejection improvement. The above results are in agreement with some of the studies found in [7,17], namely in terms of emphasizing the advantage, in terms of response time, of placing a bypass on the stream whose temperature is to be controlled (bleed air stream). With the heat exchanger dynamics missing from the control loop, the controller's actions are thus felt immediately (neglecting transport lag) via the bypass channel. The faster response time is therefore a general characteristic of the bypass channel control configuration. For the cases analyzed in these simulations, there are some additional features that contribute to the overall decrease in response time. First of all, the amount of bleed air flow that is bypassed is quite significant: at initial steady-state conditions, the bypass ratio is 27.48%. This is a direct consequence of the comparatively large ram air flow: without a control valve in the ram air channel, ram air flow rate is determined by the heat exchanger cold-side pressure drop and the operating point (airspeed, atmospheric pressure), and is equal to M ram=0.27304 Ib/s in this particular case (operating condition #7). Since the load temperature is a function of both main and bypass bleed airstreams, a larger bypass ratio gives the bypassed flow increased `weight', in terms of influencing the load temperature, whereas the influence of the other stream experiences a slight decrease. Hence, manipulation of the bypass flow rate has a more pronounced effect on the controlled variable for a system with higher bypass ratios, and thus a faster response, since the heat exchanger dynamics do not come into play for changes in thermal energy carried by this flow. Perhaps even more significant is the change in the heat exchanger response time itself. For the ram air configuration, the hot and cold side fluid flow rates were within close proximity of each other, resulting in sluggish heat exchanger dynamics. This is quite different when the bypass control strategy is being employed; here the cold side

79

fluid flow rate ( Mram =0.27304 Ib/s) exceeds that of the hot side fluid (M buedmain =0.013306 Ib/s initially) by more than an order of magnitude. The result is that the heat exchanger dynamics are quite fast, as was demonstrated in Fig. 2.7 (a), where the cold-side fluid flow rate was much larger than that of the hot-side fluid. As a result of the above factors, the bypass channel control configuration can achieve fast regulatory control, for both reference and disturbance input variations. In terms of disturbance rejection (as in cases with bleed air temperature increase), maximizing the speed of the response by fine tuning the PI controller parameters will result in a controller whose reference input response will suffer somewhat (in terms of overshoot), but will deliver excellent transients for both types of inputs. Furthermore, performance in terms of overshoot of the [reference input] response can be relaxed, in light of some of the larger deviations in load temperature that are caused by some disturbance inputs. For example, as a result of the bleed air bypass, disturbances in bleed air are immediately felt at the load (neglecting transport lag), as seen in simulation results shown in Fig. 3.19 and 3.20. These abrupt jumps in load temperature, caused by disturbance in bleed air, are in most cases, larger than overshoots caused by small setpoint [reference] variations. The speed of the response is thus very important, in order to eliminate any jumps or overshoots in load temperature quickly and effectively. The major disadvantage of the bypass channel control strategy is inefficient ram air usage. Whereas in the case of ram air control configuration, the ram air flow rate is somewhere in the vicinity of 0.018 Ib/s, the bypass configuration (for these particular cases) uses significantly more ram air: A fm m=0.27304 Ib/s. The difference is more than tenfold of the former value. This trade-off between efficient ram air usage and efficient system response speed is addressed by a new proposed control strategy, which is the subject of the next chapter.

80

CHAPTER 4 RAM-AIR-PLUS-BYPASS CONTROL CONFIGURATION
With the main motivation of this work being efficient temperature response and efficient ram air usage, a third control strategy is proposed to achieve both objectives. Termed ram-air-plus-bypass control, it takes advantage of the former two control configurations discussed in Chapter 3. Control valves are placed in both ram air and bypass channels, with each valve being driven by an independent actuator. The details of this particular control configuration are shown in Fig. 4.1 below. The physical interconnection of its individual components is a combination of the previous two control configurations. Thus, the zones labelled in Fig. 4.1 are equivalent to those presented in the previous cases. The variable notation for the ram air channel valve and the bypass channel valve are as given in Tables 3.1 and 3.4, respectively.

m ain bleed channel
^ bleed main

P ç h ile t

ram air channel control

h i. 4 H inkt
en g in e lo ad

had s

bleed bypass channel
^ bleed bypass

F

bypass channel control

F ig . 4.1: S c h e m a tic o f th e ram-air-plus-bypass c o n tro l c o n fig u ra tio n

In addition to controlling load temperature, a secondary controlled variable is introduced, in terms of bypass valve opening. Before the controller design is presented, consider some qualitative features of this system, based on what was already deduced

81

from the results of the previous two configurations discussed in Chapter 3. The concepts of the following paragraphs form the basis behind the proposed control strategy, which is discussed in detail in the following section. Generally speaking, for the bleed air system considered in this study, a larger bypass flow is accompanied by larger ram air flow to yield the same mixed [load] temperature. An increase in thermal energy carried by the bypass channel must be balanced by an equivalent decrease in thermal energy carried by the other [main bleed air] stream, as governed by (2.51). Since the total bleed flow Mbked is equal to the sum of the main and bypassed bleed air streams, an increase in bypass flow (M bleedbypass) entails a decrease of same size in the main flow (M bleedmam)- However, this by itself is generally not sufficient, and the hot-side outlet temperature of the main bleed channel Tho must decrease as well, in order for the load temperature to remain unchanged. The result of increased bypass flow is thus an increase in ram air flow, required to cool the main bleed air stream to a [sufficiently] lower temperature (Tho). Equivalently, a large ram air flow rate will require a significant amount of bypass, as more ram air is being utilized than is necessary, resulting in overcooling of the main bleed air channel. This feature becomes more pronounced with larger ram air flow rates, or equivalently, larger bypass flow rates. For the proposed ram-air-plus-bypass control configuration, there are a very large number of combinations of ram and bypass valve openings possible to yield the desired set-point temperature. Consequently, the opening of the bypass valve can be set to a desired initial value (valve opening set-point), and the corresponding ram air valve opening will follow from the mathematical model of the bleed air system and the desired steady-state conditions [desired load temperature]. It is desired to have some bypass flow, in order to give the system some of the quick response characteristics associated with placing a bypass on the controlled stream. However, since a reduction in ram air usage is sought along with fast transients, it is desired to have a low bypass flow. By setting the bypass valve opening set-point to a value corresponding to a low

bypass flow (e.g., 10% of the total bleed flow), it is ensured that the system is not

82

overcooled to a large extent.

The value of desired bypass ratio BR is somewhat

arbitrarily chosen - it is up to the user to specify the exact [desired] value of bypass flow. Unless specified otherwise, a value of BR=Q.\ (10% bypass flow) is used in the subsequent simulations. Control laws for both ram air channel and bypass channel will be defined next, along with PI controller parameter tuning examples, using linear methods. An LQoptimal controller will then be proposed for the bypass controller, to further improve the efficiency of the temperature response. A nonlinear simulation procedure and results will be the subject of the following chapter.

4.1

Traditional PI Control
Two separate controllers are implemented within this control configuration: the

bypass channel controller and the ram air channel controller. The hypothesis is that efficient temperature regulation will be achieved by the bypass channel controller, while the [slower acting] ram air controller will regulate bypass valve opening, so that it returns to its predefined set-point value. This secondary control action will ensure that a certain [low] amount bypass flow will always be present and that this amount will follow its setpoint during dynamic operation. When the system is subjected to a disturbance in one of its variables, thereby causing changes in temperature at the load, the bypass controller will manipulate the bypass flow in order to quickly restore the set-point temperature by changing the bypass valve opening accordingly. Following such regulatory actions of the bypass control valve, the ram air controller will slowly bring back the bypass valve opening to its original value This will ensure that the two key desired

characteristics of this system will always be present: (i) quick temperature regulation will be guaranteed by the presence of a bypass flow, and (ii) efficient ram air usage will be ensured by keeping the bypass flow at a low value (about 10% of the total bleed flow), thus keeping the overcooling to a small level. Both controllers are implemented using PI control, as was demonstrated in Chapter 3 for the previous control configurations. The controller design and implementation will be addressed in the following section. At the end of this chapter, an

83

10-optimal controller will be proposed for the bypass channel controller, to further improve temperature response performance.

4.1.1 Control Law
With the bypass PI controller defined in (3.5), the corresponding control law is given by the following equation. f ^bypass
^

K JC -IP bypass jy
/ bypass

^
^

. /

(4.1) and

where U bypass is percent valve opening command to the bypass valve, and

byp a ss ^re the bypass controller proportional gain and integral time constant, respectively. The temperature error is defined as the difference between set-point

temperature and actual load temperature (as measured by the sensor), E,emp=T,p-Ti^^ . (4.2)

Similarly, for the ram air channel PI controller defined in (3.3), the corresponding control law is given by

^ram ~ '

.

(4.3) 7)^^^

where U ram is percent valve opening command to the ram air valve, and

are the proportional gain and integral time constant, respectively. The ram air channel control is driven by the error between bypass ratio set-point and its current value, as defined by
^ b yp a ss ^ bypass ^bypass

'

(4*4)

For reasons discussed at the beginning of this chapter, the bypass flow should be a relatively small portion of the total bleed flow, and thus, unless otherwise specified, a value of 10% bypass ratio is used, where bypass ratio is defined as the ratio of bypass

84

flow rate to total bleed flow rate {BR --M ueedbypass I Mtued'). The bypass valve percent opening command (directly related to bypass valve opening angle) that yields this desired bypass ratio at initial conditions becomes the bypass valve opening set-point This set-point value can be changed accordingly and will be demonstrated by simulation results, discussed later in the thesis. In terms of load temperature set-point, the same value is used, namely Tsp = 190 °F. This value is not expected to change, but nonetheless, reference input analysis will be carried out for demonstration and completeness, to demonstrate how the control strategy would deal with this kind of input. As disturbances in various system variables arising from changing engine and/or atmospheric conditions will be much more common, disturbance rejection is emphasized. In fact, the starting point for controller parameter tuning will be a reference input response, as is standard practice, but these values will be re-adjusted in light of improving the response for disturbance inputs. The same concept was already suggested by some preliminary studies of the previous two configurations and will be revisited in light of this third control strategy as well.

4.1.2 Linear Open-Loop MIMO Plant Model
As for the previous control configurations, the system equations, in their block diagiam form, are applied to this partieular control configuration to obtain a linear openloop model o f the plant. Note that in this case, a M M O model is constructed, as there are two control inputs to the plant (input to the ram air control valve bypass control valve T w and bypass valve opening command Fjg. and input to the and two controlled variables, or outputs (load temperature
4 .2

below shows the linear open-

loop plant model, as built in SImulM. This plant will be used in subsequent open-loop analyses and controller tuning procedures.

85

H eat E xchanger S tate-S pa ce Model

^ =A xi-B u
y = Cx4-Du

T ho

m dot ram Ram Air Valve Dynamics Beta ram u ram Tv.sf1 A valve

(P_ci-P_co)

T load Bypass Valve Dynamics Beta bypass u_bypass Tv.sf1

cib

m dot bleed

Ph in et P load

m_d o t b leed byp ass

^P- hl-P-ho?
m dot b leedm ain

> dD
U_byp ass

Fig. 4.2: Linear, open-loop MIMO model of the plant for the ram-air-plus-bypass control configuration

The linear coefficients C7,C8,Cio,Cj2,Ci3 and Cj4 are as defined in Chapter 2, with ^ir,C 2r,C3r,C4r,Csr and Cib,C2b,C3b,C4b,Csb Corresponding to coefficients of the valve flow manipulation model of Fig. 2.10, as applied to the ram air and bypass control valves, respectively. As before, these coefficients are calculated using initial steady-state values, as determined by the initialization subroutine demonstrated in the following paragraph.

86

The initialization subroutine is similar to those presented for the previous two configurations, differing mainly in the way bleed air and ram air flow rates are calculated initially. For ram-air-plus-bypass control configuration, this preliminary initialization subroutine consists of the following steps: (i) Obtain Tm, Pamb, Tamb, Mach and Mbleed from the initial operating from the ram air source equations (2.34)

point, and determine Td and and (2.35). · (ii)

With the bypass ratio initially at its desired value of 10% (BR=0.1) and Mbleed known, values for M bieedbypass and M bleed,,ai,, follow directly.

(iii)

Using two relations, the heat exchanger hot-side pressure drop (2.41) and the bypass valve flow equation (2.39), determine unknown variables and
A b y p a ssPhad

An iterative process is implemented that solves the two

relations simultaneously, until the results converge. (iv) From Abypass, obtain the bypass valve opening-angle fibypass, and the corresponding percent valve opening command
U bypass

to the valve. This .

value becomes the bypass valve opening set-point, (v) (vi) Determine Kioad from the load impedance equation (2.49).

With the load temperature initially at its set-point {Tioad = Tsp) and M bieedbypass and M bleedm a in loiown, the heat exchanger hot-side outlet temperature Tho follows from (2.51). Using an iterative loop, solve the heat exchanger model for the ram air flow rate M ra m that will yield, along with the rest of the heat exchanger input variables, the hot-side fluid output temperature of Tho.

(vii)

Once M ra m is determined, ram air pressure Pd upstream of the heat exchanger is found from the cold-side pressure drop equation (2.42), with P CO -- P amb

87

(viii)

Knowing A/ram, and with P,, = P^.,,, Pd = Pd, T,, = Td, the valve flow equation (2.38) is rearranged to determine valve opening area Aram- From Aram, the Opening angle Pram is found using (2.36). The percent valve opening command U ram follows directly from this.

Thus, initial steady-state values of the system variables are determined by the above procedure, based on the simulated operating point, as chosen from Table 2.2. For subsequent linear models used in this chapter for tuning purposes, the system is initialized about operating condition #7. Table 4.1 lists the corresponding steady-state values for the variables describing the system.

Cc=0.24
R=639.6 Kv=0.015708 Tamb-- 90 Pamb=10.11 Pho=45.107
bleed bypass

Ch=0.24
N=10

MC,=0.65

7=1.4

g=386.09

Mach=0.5
t«=24.078

Free-- 0.7
K,oad=104120 Thn=168.89 Phi=45.11 Pbvnass-- 0.57443

dram 1
T,p=190
T,,,ad=190
dbypass 1 0

Tv =1.5
Thj-- 380

Tci=117.5

=45.11
Pco=10.11 -- 0,0018332 Mrem =0.019794 Aram=0.11932

P,,.,,=l 1.428
P|oad=45.107 M w w =0.018333 Pram=0.57443

Abypass=0.12606
Ubypass

Ktj-- 1
BR =0.1

36.57

M bleedmain =0.0165 ^b^s^=36.57

Pci=10.114

Uram=23.529

Table 4.1: Initial steady-state values for operating condition #7 (ram-air-plus-bypass channels control configuration)

With the aid of MATLAB's Control Toolbox commands, an LTI object is created to represent the plant, from the above Simulink block diagram model. Step responses are obtained for this LTI model and are shown below. Fig. 4.3 shows the load temperature response to a unit-step increase in the bypass valve (ubypass) and the ram air valve opening command («rom), respectively. For the same step inputs. Fig. 4.4 shows the corresponding response in bypass valve opening command U bypass-

88

step Response From: u, From: u,ram

100

200

300

100
Time fsec)

200

300

Fig. 4.3: Step responses from the two inputs {utypass and
Step Response

to the load temperature

From : 2

.

From: u.

'

0

0.2

0.4

0.6

0.8

1 0

0.2

0.4

0.6

0.8

1

Time (sec)

ranti to the bypass valve opening command Fig. 4.4: Step responses from the two inputs {utypass and U
a bypass

The load temperature response to a step input in ram air valve input looks almost identical to that obtained earlier for the ram air channel control configuration (Fig. 3.4), differing only in the overall steady-state change (which is a result of different conditions affecting the load temperature for this control configuration). A greater difference is evident from the temperature response to a step in bypass valve input shown for this control configuration, compared to that obtained previously for the bypass channel

89

control configuration (3.14). In addition to the quick rise (owing to fast control valve dynamies), the slow-decaying heat exchanger dynamics are evident for this configuration. Whereas before (for bypass channel control) the many times larger ram air flow rate rendered the effect of changes in the hot-side (main bleed channel) flow rate virtually negligible, the hot-side and cold-side flow rates are fairly close in magnitude in this case, and thus a change in main bleed channel flow has an impact on load temperature which can no longer be ignored. The step responses from the two control valve inputs to the bypass ratio output, shown in Fig. 4.4, yield some important observations. It is clear from the above

responses that the ram air valve input has no direct effect on the bypass ratio, which has significant implications on the control system design. Since the proposed strategy is to place the ram air controller in charge of regulating the bypass ratio, this task can be accomplished only indirectly. As will be described shortly in greater detail, this will be possible only when the bypass control loop is closed. Once that is the case, manipulating the ram air valve, and thus causing a corresponding change in load temperature, will drive the bypass valve controller to change its opening accordingly, in order to move the load temperature back to its set-point. Thus, the bypass control loop will be designed first. Using controller parameters obtained from the bypass channel control configuration as an initial estimate, they will then be fine-tuned to deliver efficient disturbance rejection for this particular configuration. Once the bypass loop is closed, design of the ram air channel controller will follow. As the bypass controller is first designed without considering the actions of the ram air channel controller, some final tuning in the controller parameters will be analyzed after both controllers are implemented, as there is bound to be some coupling between their eontrol actions, which is initially neglected. Simulation results will be presented to validate the control design process.

90

4.1.3 Bypass Channel Controller
As was done previously, the bypass control loop is closed using negative feedback, with the temperature sensor in the feedback path, and with the same PI controller as defined by (3.3). The closure of this loop is illustrated by Fig. 4.5 below.

sensor

^ te m p
temperature set-point

bypass controller

PLANT

disturbance input Fig. 4.5: Closing the bypass control loop

Some preliminary step responses will now follow, for the linear model with only the bypass loop closed. However, these responses will change somewhat once the ram air channel control loop is closed. In addition, the nonlinear simulations, which are subject of the next section, might require Anther fine-tuning of the control parameters. Thus, the following tuning responses (Fig. 4.6, Fig. 4.7) are presented for demonstrating the steps taken in the implementation of the two controllers and act only as rough estimates, to be improved upon with the nonlinear simulations of the next chapter.

91

=25
Li.

=o

0 .3 1.5

c O .5

JC
-rX Time (sec)

150

0

50

100 _150^ Time (sec)
(b)

250

(a) Fig. 4.6: Responses for varying proportional gain, with

=25: (a) unit step reference

(temperature set-point) input, (b) disturbance input (40 °F step increase in bleed air temperature)

=15

=15
2 ,2 .5

U .
4

s *

I 3 e
.E .E 0.5

g 1 o 0 0

o D J

50

Time (sec)
(a )

1 00

150

200

-0.5

0

50

1 O 0

Time (sec)

150

200

250

(b) =15: (a) unit step reference

Fig. 4.7: Responses for varying proportional gain, with

(temperature set-point) input, (b) disturbance input (40 "F step increase in bleed air temperature)

The controller parameters will likely change somewhat with further fine-tuning, but nonetheless, some important observations can still be made from the above step responses. Most importantly, note that it takes the system much longer to completely attenuate disturbances, which can be easily seen by comparing Fig. 4.6 (b) to Fig. 3.20 obtained earlier from the bypass control configuration. This is partly due to the now more pronounced effect of heat exchanger dynamics, whereas in the previous case, the

92

4.1.3 Bypass Channel Controller
As was done previously, the bypass control loop is closed using negative feedback, with the temperature sensor in the feedback path, and with the same PI controller as defined by (3.3). The closure of this loop is illustrated by Fig. 4.5 below.

sensor

·temp

temperature set-point

bypass controller

PLANT

disturbance input Fig. 4.5: Closing the bypass control loop

Some preliminary step responses will now follow, for the linear model with only the bypass loop closed. However, these responses will change somewhat once the ram air channel control loop is closed. In addition, the nonlinear simulations, which are subject of the next section, might require further fine-tuning of the control parameters. Thus, the following tuning responses (Fig. 4.6, Fig. 4.7) are presented for demonstrating the steps taken in the implementation of the two controllers and act only as rough estimates, to be improved upon with the nonlinear simulations of the next chapter.

91

=25

=25
Li-

O )

=c =4

32.5
Q.

Q.

3

c 0.5

o
Time (sec)

1 0 0

0

50

Time (sec)

150

(a)

(b)

Fig. 4.6: Responses for varying proportional gain, with

=25: (a) unit step reference

(temperature set-point) input, (b) disturbance input (40 °F step increase in bleed air temperature)

= 15

g 2.2.5 ir ," D 3 » 5

r
I ''

1 ' c 0.5
0 I o 1 0 0
Time (sec)

0 )

200

-0.5

50

1O 0

150
Time (sec)

200

250

K X )

(a)

(b)

Fig. 4.7: Responses for varying proportional gain, with T ' /iypasi

(a)

step reference

(temperature set-point) input, (b) disturbance input (40 °F step increase in bleed air temperature)

The controller parameters will likely change somewhat with further fine-tuning, but nonetheless, some important observations can still be made from the above step responses. Most importantly, note that it takes the system much longer to completely attenuate disturbances, which can be easily seen by comparing Fig. 4.6 (b) to Fig. 3.20 obtained earlier from the bypass control configuration. This is partly due to the now more pronounced effect of heat exchanger dynamics, whereas in the previous case, the

92

much greater ram air flow rate to main bleed flow rate ratio rendered such effects negligible. However, as is suggested by the responses of Fig, 4,7 (b), the response to a disturbance input (bleed air temperature) can be improved greatly by tuning the parameters appropriately. As can be seen from Fig, 4,7 (b), with K p ^ ,= 6 and =

15, the system is quick in returning the load temperature relatively close to its set-point value, with the remaining error slowly dissipating until it is eliminated altogether. Again, as was already pointed out in Chapter 3, the improvement in disturbance rejection will come at the expense of increasing the overshoot in the case of a temperature set-point change, but this overshoot will diminish very quickly, as seen by the corresponding responses in Fig, 4,7 (a). subsequent simulations. Thus, with the aim of emphasizing efficient disturbance rejection, controller parameters that yield the best results in this area will be chosen for

4.1.4 Ram Air Channel Controller

With the bypass loop closed, the ram air controller will be implemented in much the same way. First, an LTI object is obtained for the plant with the bypass loop closed, to be used for open-loop and step responses, with ram air valve percent opening command U ram as the input and bypass valve percent opening command U bypass as the output. This LTI model is obtained from a Simulink model of the system shown in Fig, 4,7 (with the bypass control loop closed). The ram air controller parameters will be tuned to yield a satisfactory response; however, since emphasis is placed.on temperature response rather than bypass valve opening response (it will suffice if the bypass valve opening is slowly restored), the values of and Tj^^ will be chosen accordingly.

For the time being, the bypass controller parameters used in the following demonstrations are and 7 ) ,^ ,= 15, Once the LTI model is created, an open-loop step response is obtained (Fig, 4,8) to determine whether negative or positive feedback should be used to close the ram air control loop.

93

step Response From: To: u,
9

8
7

6

I

5

2 1 0 0 100
200 300 400 500 600 700

Time (sec)

Fig. 4.8: Open-loop response in the bypass valve percent-opening for a unit-step increase in u,,tm with the bypass control loop closed

The open-loop response of Fig. 4.8 hints at expected slower transients of the ram air control loop, in addition to indicating an increase in output for an increase in* input. As a result of this, negative feedback is required to bring about regulation of the bypass valve opening via the ram air channel controller. The ram air loop is thus closed with a PI controller, yielding a folly closed ram-air-plus-bypass control system, as shown in Fig. 4.9 below.
sensor temperature set-point

·fenip

bypass controller ram-air controller disturbance input »"

had

PLANT

bypass valve opening set-point

Fig. 4.9: Ram-air-plus-bypass control system, with both control loops closed

Values for the ram air controller parameters

and

will be quite

different from those used in the ram chaimel control configuration, as it is the bypass

94

ratio that is to be controlled in this case (as opposed to load temperature in the earlier configuration). However, through some quick tuning, and using the same gain-sweep method of earlier procedures, the ram air controller parameters can be determined. The plots below (Fig. 4.10 and Fig. 4.11) show a few gain sweeps after the range of both parameters has been greatly narrowed down with prior trials. 1 -5 g g > 0.2
0.4

Ti

=30

^ 05 o

ram
ram

-0.4

1 0 0

Time (sec)
(a)

200

1 0 0

Time (sec)

200

400

(b)

Fig. 4.10: Gain sweeps for a unit step increase in bypass valve opening set-point (reference input): (a) bypass valve opening response, (b) load temperature response

g

u.

I

I
g
ram
--I

ram

.= 2

1

o

10 0

Time (sec)
(a)

200

00 0

i O
400

10 0

Time (sec)

200

300

400

(b)

Fig. 4.11: Gain sweeps for a 40 °F step increase in bleed air temperature (disturbance input): (a) bypass valve opening response, (b) load temperature response

These responses suggest efficient load temperature response, as well as eventual re-establishment of the bypass valve opening set-point, given that the right combination

95

of PI controller parameters is chosen. From the above results, the bypass and ram air controller parameters, as designed for operating condition #7, are; 2' / ,^ = 3 0 . These parameters promise to yield good response characteristics for this multi-loop, multi-variable control configuration, for the particular operating condition at hand. Their determination was presented more for demonstration purposes - for the purposes of nonlinear simulations of the following chapter, they might be further fined-tuned in light of additional disturbance input simulations, as well as simulations carried out at different operating conditions. The final section of this control strategy chapter presents a new [hybrid] control law for this ram-air-plus-bypass control configuration. It strives to further improve load temperature response performance, as well as give the system ability to self-tune, thus making it more practical in terms of on-line implementation.

4.2

LQ/PI Self-tuning Control
The P/-control parameters (proportional gain and integral time constant) for both

controllers were tuned at a chosen operating condition, derived from typical mission data of Table 2.2. To obtain satisfactory system responses at varying operating conditions (especially in cases of significant variations), these parameters should be tuned accordingly, to maintain efficient temperature regulation. It would be of great practical value to give the system the ability of automatically adjusting some control parameters (e.g., self-tuning) when implemented in on-line situations. Forrest et al. [8] implemented a primary LQ controller in their study of super-heater control, proposing periodic plant sampling and controller self-tuning for their outer loop controller. A similar concept will be applied to this case, although the ram-air-plus-bypass configuration differs quite significantly in structure and control loop closure, as well as by being multi-variable in both input and output. In addition to the self-tuning characteristic, it is also worthwhile to investigate whether system response performance can be further improved by applying Zg-optimal

96

control to the temperature regulation system. This last control method will be compared to the more traditional PI control of the previous section, using similar simulations as those carried out in Chapter 5. Before any design, however, the distinction of precisely what is to be optimized must be clarified, as the rest of the controller design will follow from such a definition. Essentially, the goal is to optimize the carrying out of the initial objectives, which consist of (i) efficient temperature transient response, and (ii) efficient ram air usage. Since earlier analysis suggests that achieving both objectives involve trade-offs in terms of the degree to which each one is satisfied independently, the matter really comes down to optimizing a combination of these objectives. The simulations shown in the previous chapter suggest that, on the one hand, bypass channel control seems to maximize (optimize) the speed of the temperature response, while on the other hand, ram air channel control minimizes (optimizes) the usage of ram air. They also suggest that combining aspects of both methods (as is the topic of this chapter) to yield the ram-airplus-bypass control configuration is the best solution for satisfying both objectives simultaneously. Recall that the presence of bleed air bypass flow carries with it some of the fast response features characteristic to such configurations. To ensure non-excessive ram air usage, the desired amount of the bypass bleed flow is relatively low (i.e., 10% of total bleed flow), and thus the bypass valve opening set-point is set to a value that will yield such bypass ratio at initial conditions. This set-point is regulated during the simulation by the ram air channel controller, as was discussed in the preceding section. Optimizing ram air usage means minimizing the amount of ram air used, which is directly related to choosing the amount of bleed air bypass --the lower the bypass, the less ram air is being `wasted' (this is optimized for 0% bypass, or ram air configuration, where no ram air is wasted). The bypass valve opening set-point can be readjusted by the user, should the use of ram air become more/less of importance. In this way, ram air usage is "optimized" by the user, so to speak. With the bypass ratio set, and thus the bypass valve opening set-point defined, the task remains to optimize performance of the temperature transient response for this

97

system. It is the purpose of the bypass controller to bring about temperature regulation efficiently. This task can be optimized by using the I g technique for the bypass controller, as will now be demonstrated. The self-tuning procedure for the LQ bypass controller will also be presented at the end of this chapter. Note that the ram air control law remains the same; that is, the ram air controller will remain of the PI control type, as opposed to being changed to an Zg-optimal, as for the bypass controller. Since emphasis is placed on temperature performance, it is not desirable to optimize the bypass valve opening regulatory action (outer ram air control loop), as this would interfere with the [optimized] temperature response (inner bypass control loop). It is quite sufficient to simply restore the bypass valve opening to its setpoint after some time has elapsed. Since changes in the ram air control valve will affect load temperature, and these changes are driven by changes in bypass valve opening (which responds to changes in load temperature), optimizing the ram air channel control loop would likely be detrimental to the performance of the temperature control loop (bypass controller). Again, it is quite sufficient for the ram air control loop to simply restore the bypass valve opening set-point, without putting paramount importance on response time, as opposed to the case of temperature regulation. The control loop structure remains the same as shown in Fig. 4.9: that is, the bypass control loop and the ram air channel control loop are closed in the same manner, with identical controller inputs (Etemp, Ebypass) and outputs (ubypass, tiram )^ The P I control law, however, is now changed to i^-optim al for the bypass controller, as described below.

4.2.1 LQ`Optimal Bypass Controller
The LQ method calculates an optimal gain matrix Kiq that minimizes the following performance index function: ® J(u)= j{x^Qx + u^Ru}dt, 0 " (4.5)

where Q and R are [user specified] `penalty' weights associated with respective state deviations and overall control effort. Some trial and error is usually necessary to

98

determine the Q and R values that yield the best results. Fig. 4.12 below shows the schematic of the proposed LQ control for the bypass controller.
integrator
·temp

LQ-optimal controller gain

State
,vectQL

bypass open-loop state-space model LQ Bypass Controller
Fig. 4.12: Bypass LQ controller schematic

From the optimal-gain state feedback, control law for the bypass LQ controller is thus defined as u bypass (4.6)

where U bypass is percent valve opening command to the bypass valve, Kiq is the optimalgain state feedback vector, and X the augmented state-feedback vector, as defined by the following. The augmented state vector consists of two parts. The first is a vector of states that is determined by the `bypass open-loop state-space model' (as seen in Fig. 4.12), based on controller output U bypass, and the state-space model that represents the plant from the bypass valve input to the load temperature. This model is extracted from the full plant Simulink model of Fig. 4.2, in a state space representation that describes the openloop path from input to output T w . The system matrices Aiq and :fi/^ correspond to those of this open-loop single-input-single-output {SISO) model. In order to output the states rather than the load temperature, Qq is an identity matrix and Diq is a zero matrix. This will reduce the state-space output equation to Y=X, thus outputting the states. An additional integrator state is added to the above state vector in order to eliminate the temperature error

99

"

i,=-\E,,,,dt,

·



(4 -7 ) , where the augmented

resulting in an augmented state equation, x = A^^^x + state vector is x =[%/
K _ lq

The Z,g gain is calculated using MATLAB's/qrr command:

= l q r ( A _ a u g ,B _ a u g ,Q /R ) , matrices, and the [augmented] system matrix

and is based on the [user specified] 0 and

Aaug, and the column of input matrix Baug (corresponding to the bypass valve control input), as defined below:

 ^aug

'0 - c / 0

and

aug

=

0  A.

(4.8)

In the above, C/ corresponds to the integrator state, and Aiq and Biq are the plant's system matrices, as defined above. The Q and R matrices are user specified, and allow different values to be set corresponding to each state (for Q). In the following simulations, the Q matrix is split up into two `sections', the first pertaining to the integral of temperature error, and the rest to the system states: 0 =
weight ! ^

0

I .cnweights I

(4.9)

Some trial and error is usually necessary to determine the Q and R values that yield the best results.

4.2.2 Self-tuning approach
The advantage of implementing an LQ bypass controller, besides decreased temperature response integral error, is that the optimal state-feedback gain matrix Kiq is calculated, and can thus automatically adjust with changing system%conditions. Its determination is based on a linear plant model (fi-om bypass vâlvè*?inbüt ' to load temperature output), which is linearized at the current operating cdhditi6h -éhd is described by system matrices Aiq, Biq, Qq, and Diq. Furthermore, the estimated states that

100

are fed back to the LQ controller are determined based on the same linearized model, with Qq and Dig altered so that the output equation yields the estimated states as outputs, instead of the load temperature. To make the bypass controller robust over the entire range of operating conditions, the plant's key variables can be sampled repeatedly (every sampling period), thus updating the variables upon which Aiq, Biq, Qq, and Dig are based. This linear model can thus be updated every time the plant is sampled, and the LQ controller gain matrix will be automatically re-calculated based on this. This gives it a self-tuning ability, which the P I controller did not have (its controller parameters will have to be pre-defined as functions of varying conditions). Since the ram air PI controller parameters chosen for the PI/PI control strategy were already proven to yield good results, the same values are used for the LQIPI control strategy. This means that some scheduling of the ram air controller parameters is still necessary, as the optimum values will change with the operating conditions. When the plant is sampled to update the ig-bypass controller, the current operating conditions can therefore be used to correct the ram air controller parameters.

101

CHAPTER 5 SIMULATION STUDIES OF THE RAM-AIRPLUS-BYPASS CONTROL CONFIGURATION
This chapter presents the nonlinear simulation results of the proposed ram-airplus-bypass control configuration described in Chapter 4, The simulations are carried out using MATLAB v6.5 software. The steps taken by the program'^ once a simulation is executed are as follows: 1) Input user specified parameters: operating condition, heat exchanger

model dimension, type and size of input (reference and disturbance), duration of simulation. 2) Based on the chosen operating condition, perform the initialization subroutine described in Chapter 4 to determine initial steady-state conditions. 3) The dynamic simulation now follows, contained within the control loop subroutine. The loop repeats every control step dt until the duration of simulation is reached, executing the following steps within every cycle: determine the bypass valve opening area Abypass and the ram air valve opening area by applying (2.37) to each

an iteration procedure is performed to calculate ram air flow rate Mram and ram air valve downstream pressure Pd, such that both valve flow rate (2.39) and cold-side pressure drop (2.42) equations are simultaneously satisfied, and making use of the fact that pressure downstream of the valve is equivalent the pressure at the cold-side heat exchanger inlet, Pd

For full code listing, see Appendix.

102

using four equations to solve for four unknowns (P w , Mbked , Mbked m ain, M bieedbypass ), un Iteration In Pioad Is performed until all the variables converge and mass conservation between the main and bypass flows is satisfied (first equation), Mbked = Mbkedmam +M bieedbypass, whoro oach flow rate is determined by a separate set of relations (each a function oïPhad), giving the other three equations: (i) (ii) Mbked is calculated using the load impedance equation (2.49) M bleedmain Is calculatod from the hot-side heat exchanger pressure drop (2.41) (iii) M bieedbypass Is determined using the bypass valve flow rate equation (2.39)
T

update the heat exchanger input matrix U = Phi ) Pci ) call the heat exchanger subroutine and obtain on current operating point values

bleedm a in, -Af n

matrices, based

update the heat exchanger state vector % (2.11), and calculate the heat exchanger outlet temperature 7*0 (2.12) calculate temperature of the mixed flow using (2.51), equivalent to the load temperature Piopj determine sensed temperature 7' ,^j,,from the sensor dynamics (2.53) and (2.54) produce the temperature error signal from (4.2) and bypass error signal defined in (4.4), and feed them to the bypass controller and ram air controller subroutines, respectively

103

-

using the appropriate control law for each controller, produce the controller outputs U bypass and U ram , which become the respective valve percent opening commands

-

from the valve opening commands, update the bypass and ram air valve opening angles using the valve dynamics model of (2.36)

-

increment simulation time by the control time step dt, and repeat the loop

4)

plot the results

The bleed air is to be supplied to the load at a temperature of 190 °F (temperature set-point Tsp), in light of disturbances to the system, arising from varying engine load and/or ambient surroundings. To keep from unnecessary ram air overcooling, the bypass valve opening set-point Ui^s,p (%) is set at a value that yields a bypass flow ratio of 10% (BR = 0.1) at initial conditions. A step change in engine bleed air inlet temperature Thi is used to demonstrate a change in engine operating conditions. Directly related to the ambient temperature, as well as the aircraft's speed, a step change in ram air inlet temperature Td is used to simulate a disturbance that arises from either the surroundings, engine load, or both. Finally, a step change in bypass valve opening set-point (%

valve opening angle) is included (reference input for the ram air channel controller), as it is related to ram air usage, and will yield results that aid the coneluding discussions. For the subsequent simulations, these three types of inputs are applied to the system at time t ~ 0 sec, and are defined as follows; Input A: A 40 °F step increase in bleed air inlet temperature Tm (from the initial steady state value) Input B: A 20 ® F step decrease in ram air temperature Td (caused by changes in ambient temperature and/or aircraft speed) Input C: A 2% step decrease in bypass valve opening set-point u bypass^

104

The table of initial operating conditions (Table 2.2) is derived from typical mission data. In addition to simulating several types of inputs, simulations for different operating conditions are carried out and presented here, in order to demonstrate the system performance at various differing engine loading and atmospheric conditions. Three different operating conditions are chosen, to represent three very different situations. They are re-stated for convenience in Table 5.1 below, along with their corresponding mission data.

Operating Condition N o.#

Bleed Air Bleed Air Bleed Air Ambient Ambient Mass Pressure Temperature Pressure Temperature Flow (op) (psia) (°F) (psig) (Ib/s) 0.4 0.018333 380 35 14.7 130 0.5 0.018333 35 380 10 10.11 90 0.7 0.108333 30 380 20 6.76 -10 22 Table 5.1: Operating conditions and corresponding mission data selected for nonlinear simulations Altitude (kft) Mach

Operating condition #5 represents take-off on a hot day, and from a control point of view, is the worst condition out of these, due to high ram air inlet temperature (since this is the cold-side fluid). Operating condition #7 characterizes a typical operating point, with medium values for altitude and airspeed. Finally, operating condition #22 is included to simulate the system at higher altitudes and airspeeds, and with much lower ambient temperatures. For each operating condition, the particular initial steady-state conditions will be determined and listed, along with control parameters for both the bypass and ram air controllers. These parameters are already in their fine-tuned form, in order to provide good disturbance rejection, for the particular operating point at hand. The simulation conditions and results are presented below in sub-sections 5.1 and 5.2. The first sub-section deals with simulations that pertain to the traditional P I controllers, while the second sub-section presents simulations for the LQ/PI control strategy, discussed at the end of Chapter 4. All simulation results will be discussed and compared in the following chapter, in order to draw final conclusions and suggestions for this research work.

105

5.1 PI Control Simulations
5.1.1 Operating Condition #5
C c = 0 .2 4 R = 6 3 9 .6 K v = 0 .0 1 5 7 0 8 T .m h = 1 3 0 P « n ib = 1 4 .7 C h = 0 .2 4 N =10 Tv= 1 .5 T h i= 3 8 0 ^ ,.= 4 9 .7 P c o = 1 4 .7 M C ,= 0 .6 5 Y = 1 .4 F re o = 0 .7 K w d=104120 Tho" 1 6 8 .8 9 P h i= 4 9 .7 g = 3 8 6 .0 9 dram 1 *5 T ,,= 1 9 0 T|oad" 1 9 0

Mach=0.4
T,3 = 2 4 .0 7 8 T e i= 1 4 8 .8 8 = 1 5 .8 9 9 P io a d = 4 9 .6 9 7

dbypass 1 *0
A bypasa=0.1 2 0 0 9 ^ b y p a ss~ 3 5 .6 6 9

P h o = 4 9 .6 9 7

P b v n a ss~ 0 .5 6 0 2 9 K ts = l

M bieedbypass = 0 . 0 0 1 8 3 3 1 Mbleed m a in= 0 . 0 1 6 5
« .^ ,^ = 3 5 .6 6 9

M m m = 0 .0 3 3 1 8 3 A ra m = 0 -1 7 8 5 6

M w w = 0 .0 1 8 3 3 3

Pram=0.45341 ^Pram

B R = 0 .1

P c i= 1 4 .7 0 8

u,,ra=28.865

=30

bypass =10

^P'bypass = 5 Table 5.2: Initial steady-state conditions, at operating condition #5, with 10% bypass flow ratio

194

33

u. 1 9 3
cn 35

(a)
§ 190 1B9 188

10 0
Time fsec)

150

200

0
0.105

50

109

150

200

0.055 0.05 ^ 0.045 (C) 0.04 S 0.035 0.03 g

0.1
0.095 0.09 0.085

1 0 0
Time (sec)

150

200

0.08

0

50

1 O 0

150

Fig. 5.1: System response to input W at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

106

193.5

S
193 S.

37.5 37 36.5 33 35.5

E C
I

I
1

1S9.5

" E g â L 0
50 103 Time (sec) 150

1E9

200

0

50 Time (sec)

150

200

0.035

0.12
0.115

Î
1

0.03

Î
I 0.105

I m
i

0.025

0.1 0.02
103 Time (sec)

200

0.095

0

50

100
Time (sec)

150

Fig. 5.2: System response to input B at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

a

ê

1M .0
(a)

&

35.5

34.5

I
33.5 159.8 150

200

0 0.1

50

100

150

0.035

I
I
I
0.03

0

0.095

1 S
^

2.

I
0.025

0.09

1 0 0
Time (sec)

150

0.055

0

50

100
Time (sec)

150

200

Fig. 5.3: System response to input C at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

107

5.1.2 Operating Condition #7
Cc=0.24 R=639.6 Kv=0.015708
Tamb=90

Ch=0.24 N=10
T v =1.5

MQ=0.65 Mach=0.5 Tt5=24.078 T.i=117.5 P^,,,=l 1.428 P|oad=45.107 =0.018333 Pram=0.57443
^ P ram

7=1.4 Frec=0.7 R|oad" 104120 Tho=168.89 Phi=45.11 Pbvnass=0.57443 K,a=l BR=0.1
^/ram = 5 0

g=386.09
dram=1.5

Ts,=I90 Tload" 190
^bypass"" Abypass~0* 12606 l^ bypass 36.57

Thi=380
= 4 5 .1 1

P«mb=10.11 Pho=45.107
bUedbypass

Pco=10.11 " 0.0018332 Mram =0.019794 Aram=0.11932

Pci=10.114
bypass = 1 5

M bked main = 0 . 0 1 6 5
bypass ^ = ^ 6 . 5 7

Uram=23.529

=2

^ P b yp a ss

Table 5.3: Initial steady-state conditions and controller parameters, at operating condition #7, with 10% bypass flow ratio
194

g

!
5 190 199

i

I
1 0 0
Time (sec) 150

IBS

200

0
0.105

50

100
Time (sec)

150

200

0.04 ^ 0.035 0.03 (C) 0.025 g

0.1
0.095 0.09 0.085

0.015

1 00
Time (sec)

150

200

0.08

0

50

100

150

200

Fig. 5.4: System response to input .< 4 at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

108

c
(a)

C D 37.5 o 189.8

"8

189.6 189.4

.3

1 00
Time (sec)

150

200

0
0.103

50

150

200

I a
I

0.022 0.021 0.02
0.019

0.104

ce 0.102 0.1 100
Time (sec) 150 0.098

.2
^

m 0.018 0.017 0.016

100
Time (sec)

150

200

Fig. 5.5: System response to input B at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio
190.8

g c ·I
I 190.4 190.2

36.5 36

f

I " ë 34.5
100
Time (sec) 150

200 0.1
.2 0.095

100
Time (sec)

150

200

0.022

I
0

0.02
0.018 0.016 ^ 0.014 0.09

E

1

1

§
5

0.012

190 Time (sec)

150

200

0.085 150

200

Fig. 5.6: System response to input C at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

109

5.1.3 Operating Condition #22
C c = 0 .2 4 R = 6 3 9 .6 K v = 0 .0 1 5 7 0 8 C h = 0 .2 4 N =10 Tv= 1 . 5 T h i= 3 8 0 M C ,= 0 .6 5 7 = 1 .4 F r e c = 0 .7 K ioad ~ 2 5 5 3 . 4 T h o ~ l 6 8 .8 8 P h i= 3 6 . 7 6 g = 3 8 6 .0 9 d ram = 1.5 T sp = 1 9 0 Tload" 1 9 0

Mach=0.7
T ,s= 1 2 . 9 3 1 T c i = 3 4 .1 8 .5 9 1 8

T «m h-- -10
P a r a b ~ 6 .7 6

n , . - 36-76
P c o = 6 .7 6

d b yp ass" "!»^ Abypass= 0 . 2 5 7 7 7 ^bypass 53.104
P c i= 6 . 7 8 4 8

Pho= 3 6 .7 2 7

P ioad= 3 6 . 7 2 7

P bvoass" Ku=l

0 .8 3 4 1 6

MbUedbypass = 0 . 0 1 0 8 3 7

ram ~ 0 . 0 7 4 9 7 1

bleed " 0 . 1 0 8 3 3
P TM ,= 0 . 7 1 8 8 9 B R = 0 .1

Aram = 0 .4 3 7 3
M bleed main = 0 . 0 9 7 4 9 6 ^ b ^ e , , = 5 3 .1 0 4

U ram = 45.766

^ P ram = 0 . 1 8

Tlran, = 3 0

T,

/ bypass

= S

^P bypass = 5 . 5

Table 5.4: Initial steady-state conditions, at operating condition #22, with 10% bypass flow ratio

194

o

(a)
g 193 199 198

100
Time fsec)

150

200

0 0.11 0.1
0 0.09

50

100

150

200

0.095 0.09 « 0.095

1

(c)
0.08 1= 0.07 S 0.075 0.07 0.03

1 0 0
Time fsec)

150

0.05

0

50

100

150

Fig. 5.7: System response to i n p u t a t operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

110

192

64

C

I
I

191 Ë 190 1B9 IBS 187 o 60

I g3
%

(a)

(b)

0

50 Time fsec)

150

200

0

50

100
Time (sec)

150

200

0.078 0.076 & I IP « 0.074 0.072 0.07 0.068

Ü .IÜ

0.14

i 013 5

%0.12
0.11
0.1

!§ ^

1O0
Time (sec)

150

200

0

50

100
Time (sec)

150

200

Fig. 5.8: System response to input B at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

53.5 190.3 Ë 52.5

I

(a)
190.1

o 51.5

1B9.9

0

50

100
Time fsec)

150

200

50.5

0

50

100
Time fsec)

150

0.0755

0.102 0.1
% 0.098 0.093 0.094 0.092

g

&

0.075

I I
3 «
3

0.0745

R
S

0.074

m

100
Time (sec)

150

200

0

50

100
Time fsec)

150

200

Fig. 5.9: System response to input C at operating condition #22: (a) load temperature, (b) bypass vaive opening, (c) ram air mass flow rate, (d) bypass flow ratio

ill

5.2 LQJPI Control Simulations
For subsequent simulations, the penalty weight parameters Q and R (determined by some preliminary trial and error) are used with the following values: g= "100000 1 0  ITE,,gig),i 1 0 0 I SD yg g lg fjtg^ 0 1100

i? = 0.1

5.2.f Operating Condition #5
194 193 o

(a)

189

1 O 0
Time fsec)

150

200

0

50

100

150

200

0.04

0.105

O 0.035
0.03 (C) a 5 0.025 0.02 0.015 g

0.1
0.095 0.09

0.08

1O0
Time fsec)

150

200

0

50

100

150

200

Fig. 5.10: System response to input at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

112

1&D.1

37

" Ë

189.9

o 3Ô

189.8

189.7

0

50

100
Time (sec)

150

200

35.5

0

50

100
Time fsec)

150

200

0.035

0.108 0.108

I I a I

ê

0.03

f

d :
"

0.104
0.102
0.1

%

0.025

m

0.02

0.098
100
Time fsec) 150

200

0

50

100
Time (sec)

150

Fig. 5.11: System response to input B at operating condition #5: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

a

1M .15 150.1

& 35.5

s
I

I I

34.5 190.05 33.5 189.95

1
100
Time fsec) 150 200

100
Time (sec)

150

200

0.035

0.1

Î
* Ë

0.03

.2 0.095

I «

:
0.025

^ 0.09
0.085
100
Time fsec^ 150

0.02

200

0

50

100
Time fsec)

150

200

Fig. 5.12: System response to input C at operating condition US: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

113

5.2.2 Operating Condition #7
194 Lu 193

g

i

I
191 189

35.5

I 1
_

34.5
100
Time fsec)
0.03 0.028 0.028 0.024

150

200

100
Time fsec)

150

200

-------------1 ---------------------------

0.1

I 6
3

O 0.085 g (c) g.
!S

J
j

(d)

I ^

a 0.022
0.02
0.018 50 109

t

0.08

150

200

0.085

50
Time fsec)

150

200

Time fsec)

Fig. 5.13: System response to Input .< 4 at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

g

I
^

o*
189.95

1
i

1
I "g
s

189.9

a
189.85

I
100
Time fsec)

36.5

150

0

50

100 Time (sec)

150

200

0.022 0.021 0.02
0.019 0.018 0.017 0.016

0.104 0.103

g

0.102

i

R S 0.101 0 3
0.1 1O0
Time (sec)

150

100
Time fsec)

150

200

Fig. 5.14: System response to input B at operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

114

S'

s
o'

36.5

1 1 S 0 .1 h 1B9.9

!

K £ 34.5 100
Time fsec) 150

I 1

35.5

200

0
0.1
0.098 o 0.093

50

100
Time fsec)

150

200

0.022

0.018

M 0.094 È 0.092 0.09

J

0.013

0.014

1O0
Time fsec)

150

200

0.088 150

200

Fig. 5.15: System response to input Cat operating condition #7: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

115

5.2.3 Operating Condition #22
194 193 o & 191 190 1E9

(a)

100
Time {sec)

150

0
0.11
0.1
g S 0.09 0.08 0.07 O.OS

50

100

150

200

0.095 0.09 « 0.085 0.08 5 0.075 0.07

100
Time fsec)

150

0

50

1O0

150

Fig. 5.16: System response to input ^ 4 at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

g
190 g* 189.8 189.6 189.4

I I I
100
Time fsec) 150

200

0
0.13 0.125

50

100
Time fsec)

150

200

0.078 0.076 ® 0.074 a 0.072 0.07 0.068

I

I I ^
100
Time fsec) 150

0.12
0.115

0.11
0.105

200

0.1

0

50

100
Time fsec)

150

200

Fig. 5.17: System response to Input B at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

116

53.5

L k

I

g
E

c
52.5

1 1
I
I I
i

^ 5-

190

I 1
0
60

I

51.5

199.93

100
Time (sec)

150

200

0
0.102 0.1

50

100
Time (sec)

150

200

0.075

0.0745

g

O

0.098 0.096 0.094

0.074

5 " c a
100
Time (sec) 150

0.0735

200

0.092

0

50

100
Time (sec)

150

200

Fig. 5.18: System response to Input C at operating condition #22: (a) load temperature, (b) bypass valve opening, (c) ram air mass flow rate, (d) bypass flow ratio

117

CHAPTER 6 DISCUSSIONS

This chapter will discuss the preceding modeling and simulation studies of the bleed air temperature control system. Features specific to the system and operating conditions studied in this thesis project are discussed in light of simulation results obtained for various control configurations. The control configurations and control laws studied are discussed and compared, along with the effect of controller parameters on the system response. The influence of varying operating conditions is investigated, in terms of analyzing the control system response at different operating points. Some practical issues are considered, with respect to application of the proposed control configuration to real-life scenarios, and suggestions are made that will aid the system to function efficiently over a wide range of operating conditions.

6.1

Heat Exchanger and Bleed Air System Modeling
The simplified bleed air system model was built by considering the individual

components that make up the overall system, and their corresponding interconnections within the overall structure. The modeling is analytical in nature and thus results in nonlinear equations that can be used to derive a nonlinear model or that can be linearized at a given operating point for use in linear modeling. The overall model is a somewhat simplified version of the actual system dynamics, owing to a number of assumptions that were made, but is nonetheless suitable for control system design and simulation purposes. One of the contributions of this thesis was the modeling of an air-to-air cross-flow heat exchanger, for use in both steady-state and dynamic analysis. The model developed here is unique in several aspects. First of all, although it is an analytically derived model, physical characteristics of the heat exchanger (apart from flow configuration) enter the model indirectly, through empirically-determined equations that relate the overall heat transfer coefficients (2.9, 2.10), and heat exchanger pressure drops (2.41, 2.42), as

118

fonctions of hot-side and cold-side fluid mass flow rates. In this form, the model can represent a variety of sizes and shapes of cross-flow heat exchangers, as long as the necessary data related to physical characteristic of the heat exchanger are provided. This data should be provided in the form of empirical relations for the overall heat transfer coefficient and the heat exchanger hot-side and cold-side pressure drops, as functions of hot and cold fluid flow rates. The heat exchanger model subroutine allows the user to set the

accuraey/complexity of the model, through specifying the plate-partitioning dimension N. Thus, a simpler, less accurate model (smaller value of N) can be used for preliminary controller design purposes, as the computational time will be kept to a minimum. On the other hand, model accuracy (and thus complexity and computational time) can be increased by increasing N, for use in final nonlinear simulation to represent the heat exchanger with increased accuracy. Furthermore, the heat exchanger model developed in this thesis uses a mix of differential and algebraic equations to relate the hot and cold fluid temperatures. In the relevant heat exchanger modeling literature [6,14,19,21], the general approach was to use hot and cold side fluid temperatures at each lump to form the state vector. As all these examples were either of parallel or counter-current types of heat exchangers, such a representation results in a model order of 2A, where N is the number of elements or lumps. However, for a cross-flow type exchanger, this kind of representation would result in a model order of 2N^. Because of this exponential model-order growth, characteristie to cross-flow heat exchangers, it would be worthwhile to reduce the overall model order, if possible. The state-space heat exchanger model developed here thus uses the heat exchanger core [lump] temperatures to form the state-vector, while the corresponding hot-side and cold-side fluid temperatures follow fi-om these via algebraic equations. By using the core temperatures [of each lump], the order is cut in half ( N \ equal to the number of lumps that make up the heat transfer plate. The heat exchanger model is linearized at a particular operating point, and it accepts hot-side and cold-side fluid inlet temperatures and flow rates as its input matrix, as was done previously in other heat exchanger modeling studies [6,10,21]. Thus, the

119

heat exchanger model can be used as a stand-alone module to simulate the effects of changes in one of these inputs, in both linear and nonlinear scenarios. By isolating the flow rates in the input matrix, the heat exchanger module is readily suitable for applications within a larger control system, since the flow rates are directly related to the controller outputs (valve opening commands). Demonstrations of dynamic responses of the heat exchanger model as a stand alone module were shown in Chapter 2. Such simulations are useful in yielding the time response and steady-state changes at various operating conditions and thus gaining a greater understanding of the heat transfer behaviour and its effect on the overall system. For example, the significant difference in its transient behaviour for varying hot-side and cold-side fluid flow-rate ratios is visually demonstrated by Fig. 2.7.

6.2

Preliminary Control Configurations
In Chapter 3, the ram air channel control and bypass channel control

configurations were introduced, and analyzed. These configurations are not new, but were nonetheless presented in order to obtain some specific results, when implemented in the bleed air temperature system studied in this thesis. A comprehensive discussion of these preliminary strategies was presented at the end of the chapter, and will only be quickly summarized here for convenience. The ram air control configuration showed the classical over-damped response to a change in reference input, as expected. It is noticeably slow, because of slow heat exchanger dynamics (due to the proximity between flow rates of the hot and cold fluids). Increasing the proportional gain has very little effect on improving the slow transients, although it does diminish the absolute integral error (lEA) for a disturbance input response. This improvement, however, comes at a cost of decreased damping (a more oscillatory response), and greater overshoot in the response to a reference input. The main advantage of this configuration lies in the fact that it is the most efficient method in terms of using the least ram air, as there is no unnecessary overcooling of the hot-side heat exchanger flow, which arises with the presence of bleed air bypass. In addition.

120

because there is no bypass, disturbances must first work their way through the heat exchanger before being felt at the load; as a result, there are no sudden temperature jumps due to step increases in inlet temperatures at the load. As expected and suggested by previous research work [7,17], the bypass configuration is much faster in providing temperature control. This is a result of directly manipulating the bypass flow, and thus being able to affect the load temperature almost immediately. However, when the bypass control configuration is applied to this

particular system, this effect is much more pronounced than is normally the case. For example, in their studies of heat-exchanger-plus-bypass systems [7], Rotea et al. state that an open-loop step response is characterized by a sudden change followed by slowly decaying dynamics. An open-loop step response for this system'"* (Fig. 3.14) shows the sudden `jump' (the jump is not instantaneous in this case due to the presence of valve dynamics, which are absent in [7]), but does not show any slow decaying dynamics. This is a result of the particular conditions present; namely, the huge difference in the ram air and bleed flow rates. Because the cold-side (ram air flow) rate is many times larger than the hot-side flow rate, changes in thermal energy of the hot-side fluid (bleed air temperature or main bleed flow rate) have only a very small impact on load temperature. The result is that only the bypass channel flow has any significant impact on load temperature, in light of disturbances in the bleed air flow rate or temperature. To be precise, there is some contribution fi*om the heat exchanger hot-side flow and therefore some slow decaying dynamics, but these are so small that they are neglected when compared with the contribution to load temperature delivered by the bypass flow (governed only by valve dynamics). The bypass control configuration has fast response characteristics but has the disadvantage of wasting large amounts of ram air. Without a control valve in the ram air channel, the flow is given by the pressure difference between inlet ram air pressure and the ambient pressure (a pressure drop that increases with aircraft speed) and, in this case, ends up being much larger than is necessary. Thus, there is significant overcooling of the bleed air channel passing through the heat exchanger, resulting in a larger amount of

At operating condition #7

121

bypass flow needed to deliver the desired temperature. It was also shown that the bypass configuration response is very sensitive to the controller proportional gain, which is something that shall be explored fiirther within the proposed ram-air-plus-bypass configuration.

6.3 Ram-Air-Plus-Bypass Control Configuration
The proposed ram-air-plus-bypass control configuration is presented in Chapter 4, and simulation studies of its dynamic responses are given in Chapter 5. It features control valves in both ram air and bypass channels, each manipulated by an independent controller. The faster bypass controller action provides temperature regulation, in a manner similar to that of the bypass channel control. The ram air controller provides regulatory action for the amount of bypass flow, by controlling the bypass valve opening to the desired valve opening set-point, which is defined at the onset of simulation to be such as to cause a 10% bypass flow ratio. The key aspect of this control configuration is that there exist different combinations of ram air and bypass valve openings that will yield the same load temperature at some operating point. The importance of this should not be underestimated, as it is this flexibility that allows the control system to retain the fast transients, characteristic to systems with a bypass on the controlled stream, as well as low ram air usage (as compared to the pure bypass control configuration). It is thus desirable to have some bypass flow (for efficient transient behaviour) and to maintain it at a relatively low value (to keep the extra ram usage low). For the pure bypass channel control described in Chapter 3, the bypass flow ratio at initial steady-state conditions (operating condition #7) is BR = 0.2741. This value is quite large (more than a quarter of the total bleed air flow is being bypassed) and is necessary in order to counter act the excessive overcooling due to a very high ram air flow rate {Mram= 0.27304 Ib/s). The advantage of employing valves in both channels and setting their respective opening so that the bypass flow ratio is low becomes immediately evident once the ram-air-plus-bypass control configuration is employed. Table 5.3 shows the initial steady-state conditions for this control configuration at operating condition #7,

122

and, for this particular set of conditions and a desired bypass flow ratio of 10%, the corresponding ram air flow rate is Mmm =0.019794 Ib/s. This is more than a tenfold improvement in ram air usage over the pure bypass channel control configuration. A comparison of ram air usage between the three control configurations studied in this thesis can be seen in Table 6.1 below, which lists the initial and final steady-state values of ram air flow rate for two performance inputs (as simulated at operating condition #7), for each control configuration.

Input A

Input B

Initial steady-state
Ram air channel control Bypass channel control 0.017226 Ib/s 0.27304 Ib/s

Final steady-state
0.019235 Ib/s 0.27304 Ib/s

Initial steady-state
0.017226 Ib/s 0.27304 Ib/s

Final steady-state
0.015272 Ib/s 0.27304 Ib/s

0.019794 Ib/s 0.023304 Ib/s 0.019794 Ib/s Ram-air-plus0.017105 Ib/s bypass control Table 6.1: A comparison of ram air mass flow rate for the three control configurations studied in this thesis

From initial steady-state conditions of the ram-air-plus-bypass configuration (Table 5.3), the hot-side heat exchanger flow is given by Mbleed,,am= 0.0165 Ib/s. Thus, the relative sizes of the heat exchanger hot-side and cold-side fluid flow rates are once again in close proximity to each other, resulting in slow heat exchanger dynamics, as well as a larger steady-state change in the hot-side outlet temperature Th o for disturbances in hot/cold inlet temperatures or flow rates. It follows that, unlike in the case of the pure bypass control configuration, the heat exchanger dynamics play a much more significant role when the bypass flow is much lower, as is the case for the proposed control strategy. This is demonstrated by the open-loop step response (from utypass to T w ) shown in Fig. 4.3, where a sudden change in load temperature (due to the bypass flow) is followed by slow decaying dynamics, resulting from the contribution of the main bleed air channel (governed by heat exchanger dynamics). As a result, the transient behaviour of the ramair-plus-bypass control should be expected to be worse than that of pure bypass control. This is true; however, the presence of a bleed air bypass, although low, will ensure that
123

some of the quick response time characteristics will still apply, if the right values for the controller parameters are chosen. It will now be shown that to guarantee fast temperature response transients, to both disturbance and set-point inputs, relatively high values of the bypass controller proportional gain are required. The simulation results listed in Chapter 5 were obtained for controllers that were tuned for disturbance rejection and thus already show satisfactory transient response times. However, there is a trade-off in some performance values between reference-type input and disturbance-type input responses, in terms variations in controller proportional gain, as already discussed in tuning procedures for both pure bypass channel (Chapter 3) and the bypass controller in the proposed multi-channel control configuration (Chapter 4). To demonstrate why higher proportional gains are required for this configuration and the corresponding trade-off in temperature set-point response (in terms of increased overshoot), consider the following exercise. Fig. 5.4 (a) shows the response to a 40 °F step increase in bleed air inlet temperature, with the corresponding controller parameters listed in Table 5.3 6, = 15, Kp^^,, = 2, =

= 30). Using identical system and controller values, a

simulation is carried out for a 1 °F step increase in load temperature set-point. The two temperature responses are shown in Fig. 6.1 below. -

134 133

138 135

I" IK
I 131 g 133 S 132 131 130 150

I IK
1.183
183

200

0

50

1 O 0
Time (sec)
(b )

150

(a)

Fig. 6.1: Temperature response to disturbance and reference inputs, operating condition #7, high proportional gains: (a) 40 °F step increase in bleed air temperature, (b) 1 °F step increase in load temperature set-point

124

The response to a disturbance input, reproduced from Fig. 5.4 (a), illustrates the quick disturbance rejection attained with high values of proportional gain = 6,

= 2). However, note that this set of control parameters causes almost a 500% overshoot in response to a step increase in temperature set-point input. To see the effect of changing the proportional gain, consider now the same system, at the same operating condition, but with the bypass and ram air proportional gains reduced to a third of the above values { K p ^ ^ = 2, Kp^^^ - 0.67)'^. Figure 6.2 below shows the response to both reference and disturbance inputs.

194

192.5 192

I
191 S 199 199 IBS

I

191.5 191 199.5

1 D D

209 Time (sec)

400

199

0

1 00
(b)

200

400

(a )

Fig. 6.2: Temperature response to disturbance and reference Inputs, operating condition #7, low proportional gains: (a) 40 °F step Increase In bleed air temperature, (b) 1 °F step Increase In load temperature set-point

By comparing Fig. 6.1 with Fig. 6.2, it can be seen that decreasing the proportional gain reduces overshoot of the reference-type input response, but at the expense of increased settling response time. Since the goal of this thesis is to provide efficient disturbance rejection with low ram air usage, the simulation results of Chapter 5 use control parameters that are tuned for fast transient response (higher values of proportional gains). The preceding exercise was included to illustrate that this is in fact required of this control configuration, in order to provide fast temperature control. Possible suggestions for dealing with undesirably
The value o f ram air channel controller proportional gain was also reduced in order to diminish the m agnitude o f tem perature response oscillations. This effect is addressed shortly, following this discussion.

125

high overshoots of the set-point response will be further investigated in the `practical issues' section of this chapter. The other regulatory action is performed by the ram air controller. This ram air channel control action is indirect in nature, because it first requires that the bypass control loop is closed. Thus, the proposed configuration is essentially an inner-outer multi-loop control structure, where the inner control loop represents the bypass controller action, while the outer control loop represents the ram air controller. In this way, the bypass control action is also inherently included in the outer ram air control loop. This is because the ram air controller can regulate the bypass valve opening only indirectly, through manipulating the load temperature - by pushing it away from the set-point value in order to create a temperature error to drive the bypass valve in the direction of its valve opening set-point. Thus, there will be some back-and-forth temperature response behaviour that goes along with this ram air control action, which should show up as oscillations in the temperature response. The simulation results of Chapter 5 use ram air controller parameters that are already tuned so that such oscillations are diminished, but this feature can be easily demonstrated by increasing the value of the ram air controller proportional gain. Consider again the system response to input A, at operating condition #7 and controller parameters as defined by Table 5.3. To demonstrate the oscillatory effect on temperature response arising from the ram air channel control action, the response is simulated for the same scenario, differing only in increased ram air controller proportional gain (from
194

= 0.2 to Kp^^^ = 0.7), and is shown in Fig. 6.3.

9

192 o

188

100
Time (sec)

150

200

100
Time (sec)

150

200

(b) Fig. 6.3: Response to Input A, operating condition #7, with increased ram air proportional gain: (a) temperature response, (b) bypass valve opening response

(a)

126

As can be seen from these results, large values of ram air controller proportional gain are not desirable, as they will cause the temperature response to be too oscillatory. On the other hand, values of that are too low will cause the bypass valve opening

regulation to take unnecessarily long time. Although the speed of this response is not as important as that of the temperature response, the ram air controller proportional gain should be chosen such that it provides as good of a time response as possible, before making the temperature response oscillations too significant. The preceding discussions were included to illustrate some of the decisions, with respect to the influence of key controller parameters on overall system response, that were made in order to produce the simulation results of Chapter 5. These simulations studies were conducted in order to demonstrate satisfactory disturbance rejection performance of the proposed multi-control strategy, at various operating points and for various disturbance inputs, with the bypass and ram air controller parameters tuned accordingly. Furthermore, two different types of control laws were used: (i) the more traditional PUPI approach, with TV-type control law for both the bypass and ram air controller, (ii) a hybrid Lg/P/m ethod, where the ram air controller is unchanged but the bypass controller is replaced by an ZQ-optimal control law. The PUPI results will be discussed first, with a comparison of LQIPI to PUPI results following at the end of this section. The first input (input A) simulates a change in engine operating condition and is represented by a step increase in engine bleed air temperature % . The temperature response, at various operating conditions (Fig. 5.1, Fig. 5.4, Fig. 5.7) shows the same general behaviour. There is sudden jump in load temperature at time t=0 sec, due to the bypass flow; frirthermore, the fact that transport lag was neglected in the system model means that a step change in bleed temperature will appear immediately at the load. The size of this jump is directly related to the size of the bleed air temperature step disturbance and other operating conditions. After the sudden jump, load temperature quickly dips below the set-point and then quickly rises once more. This quick up-down motion is the result of the valve located in the bypass valve - its effects can be felt at the load very quickly and are governed by valve dynamics only. Thus, the bleed air

127

temperature disturbance is attenuated rather quickly: within 50 seconds, the temperature error is very small, and the subsequent curve changes only slightly. However, it is important to note that the load temperature is still changing, as the ram air channel controller is still acting to push the bypass valve opening back to its set-point value. Nevertheless, the temperature response can be said to be settled after 50 seconds (with slight variations thereafter), while the bypass valve set-point is restored after roughly 125 seconds. The second disturbance input (input B) simulates a change in atmospheric and/or engine load conditions and is represented by a step decrease in ram air inlet temperature Teh shown in Fig. 5.2, 5.5 and 5.8 for the three simulated operating conditions. Note the absence of the sudden jump in load temperature at time /=0 sec, which was present in the previous case. This is because a disturbance in ram air temperature must work its way through the heat exchanger first. The response to this kind of input is characterized by an initial dip below the set-point temperature, due to the decrease in temperature of the main bleed channel exiting the heat-exchanger (the cooling is increased with lower ram air temperature). The relative size of the dip depends on the size of the disturbance and the operating conditions, as can be seen by comparing the temperature response of Fig. 5.2 (operating condition #5) to that of Fig. 5.8 (operating condition #22). This decrease in load temperature will drive the bypass controller to increase its opening, and this action soon takes over in moving the temperature back to its set-point. Thus, after a short amount of time has elapsed, the temperature decrease peaks and changes direction, as a result of bypass valve action. The temperature response continues in an oscillatory manner for a short period, owing to the combined control action of both the bypass and ram air controllers, before settling down. Once again, the temperature error is mostly diminished after roughly 50 seconds have elapsed, with slight temperature variations thereafter, owing to the regulatory action of the ram air controller. The last input involves a step decrease in the bypass valve opening set-point (input C). Thus, this case simulates a reference type input, for the ram air channel controller. This type of input is included in light of the fact that the bypass valve opening set-point will have to vary somewhat with changing conditions, in order to keep a 10% bypass ratio goal, as will be discussed shortly in the practical issues section.
128

The

simulations shown in Fig, 5.3, 5.6, and 5.9 demonstrate the ram air controller action, with the bypass loop closed. In order to decrease the bypass valve opening to match the new decreased [valve opening] set-point, the ram air controller must cause an initial increase in load temperature, in order to initiate bypass controller action. This is reflected by the responses for this case: initially, the ram air valve opening is decreased (reflected by a decrease in the ram air flow rate) and, as a result, the temperature response increases at first. This initial increase peak is characteristic of this type of input and can be seen throughout the various operating conditions. The combined actions of the ram air controller and bypass controller eventually lead to the settling of load temperature at its set-point and the settling of the bypass valve opening at its new [lower] set-point. Note that in all cases, lowering the bypass valve opening set-point results in lower bypass ratio and slightly lower ram air flow rate, for the same load temperature set-point. The actual size of this decrease in both bypass ratio and ram air flow rate depends on the particular operating conditions, as well as the actual size of the bypass valve set-point step decrease. The importance of this will become clear shortly, when some practical issues will be discussed, in terms of simulations studies. The above discussions apply to simulation results at various operating conditions. The exact values and curve shapes change somewhat from one operating condition to another, but, with the proper choice of controller parameters for the specific operating point, the general response behaviour remains the same for the types of inputs discussed above. This last point is important, because it states that, in order to maintain efficient temperature response and ram air usage, as in the case of simulation results shown in Chapter 5, parameters o f the bypass and ram air controllers will depend^ pnghefcurrent operating condition. This means that some sort of P I controller parameter scheduling might be necessary in order ensure that correct controller values are being used for the corresponding operating condition. Comprehensive simulation studies can be carried out to determine the best values of controller parameters for changing operating conditions, in the manner demonstrated in this thesis but extended to a much larger number of operating conditions. Such an analysis would perhaps yield functions that would relate the controller parameters to some key variables that make up the operating conditions. The controller parameters could then be periodically updated based on the latest

129

operating values, making the.control system more robust and efficient over a wide range of operating conditions. One way to improve on this, and at the same time improve on the overall temperature response, is to apply a self-tuning Z,g-optimal control law to the bypass controller, as was presented at the end of Chapter 4. Simulation results are listed for this control strategy at the end of Chapter 5, for the same types of inputs and operating conditions as the pure PI control cases. For comparison purposes, results (operating condition #7) for both control strategies are superimposed on the same plots, shown in Fig. 6.4-6.6 below (one for each type of input). The PUPI control strategy is shown by the dotted [blue] line, while the LQIPI control strategy results are shown by the solid [red] line.
184

u. 1 0 3
182

g
I 35

,5

180 188 188
100

s
K 34

I
150
200

D

50

100

150

200

Time fsec)
(a )

Timefsec)

(b)

Fig. 6.4: Comparison ofP//P/control with ZQ/P/control, at operating condition #7, with inputs: (a) load temperature response, (b) bypass valve opening response

100.4
100.2

37.5

S 0
g* 180.8 180.6 180.4
100

1
: m
200

0

50

100

200

Time CsecT
(a )

Time fsecT

(b)

Fig. 6.5: Comparison of P//P/control with Zg/PAcontrol, at operating condition #7, with input B: (a) load temperature response, (b) bypass valve opening response

130

37

35 34 33
100 Urne (sec) (a )

0

50

100 Time (sec)

150

200

(b)

Fig. 6.6: Comparison of P//P7 control with Xg/P/control, at operating condition #7, with input C: (a) load temperature response, (b) bypass valve opening response

The above figures illustrate that the absolute integral error is reduced when a PIbypass controller is replaced by the LQ-type controller. This is also the case at other operating points, as can be seen by a similar comparison of simulation results for operating conditions #5 and #22, as listed in Chapter 5. Although the temperature response to a change in bypass valve opening set-point. Fig. 6.6 (a), takes slightly longer to settle down than that of original P//P/control strategy, this LQIPI method is successful in improving overall bypass controller performance. To be precise, the LQ bypass control law is not completely optimal, as the bypass controller gain calculation did not consider the closure of the ram air control loop. However, the above results, along with the additional results for other operating points in Chapter 5, nonetheless show the great improvement in the temperature response (in terms of the absolute integral error). Furthermore, the improved bypass control performance has the effect of improving ram air control action as well. Although the ram air controller uses the same PI control parameters as before, it benefits from improvement in bypass control performance, since the bypass control action is inherent in the ram air control loop. Before obtaining the results for the LQfPI control technique, some trial and error is first necessary to determine the correct weighting factors for the 10-controller penalty matrices Q and R (see Chapter 5 for the spécifie values used). However, once this was done, the same values were retained for the rest of the simulations, over different operating conditions. The optimal values of the Z0-gain feedback matrix are then calculated, based on the [linear] bypass open-loop model (AiqJBiq,QqJ)iq) that represents

131

the current operating conditions. The same model will also calculate the estimated states (for feedback to the Lg-controller), with only the bypass valve opening command as input (see Fig. 4.12). This forms the basis behind the self-tuning ability of the Zg-bypass controller. For the Zg-bypass controller to self-time with changing operating conditions, the plant is to be periodically sampled, and the open-loop model matrices Aiq,Biq,CiqJ)iq should then be updated to reflect the latest set of operating conditions. For the LQtPI results presented in Chapter 5, such an update (and controller parameter calculation) was made only once, at the beginning of the simulation. The results show that, in light of disturbances and thus changes in the plant's parameters, the controller model designed at the onset of the simulation is nonetheless sufficient to bring about control. This suggests that a short sampling period is not necessary, and it should be sufficient to sample the plant within larger time intervals (on the order of minutes, not seconds). However, these arguments need to be supported by more simulations and experimental results.

6.4

Simulation Studies of Practical Issues
It was found earlier that in order to achieve efficient (fast) disturbance rejection,

relatively high proportional gains are necessary for the ram-air-plus-bypass control configuration. However, with such controller parameters, a step change in load temperature set-point was shown to cause excessive overshoot. Although disturbance rejection is emphasized in this thesis, a temperature set-point change might be necessary fi-om time to time, depending on the desired conditions at the load. Hence, additional analysis into improving the temperature set-point response, while retaining efficient disturbance rejection response (for the most part), is of practical value. It was suggested earlier that reducing the values of bypass and ram air controller proportional gains (^Pbypass' ^Pram) ^iU roduco the overshoot caused by a step in temperature set-point. It is possible to program the controller so that it would automatically adjust the proportional gains when a temperature set-point change is applied. Consider the following exercise.

132

The system is initially at operating condition #7; A disturbance enters the system at time /=0 sec in the form of a step in bleed temperature (input A). At time /=100 sec, a unit step increase in load temperature is applied to the system. For the first case, shown in Fig. 6.7 (a), the controller parameters remain unchanged throughout. For the second case, shown in Fig. 6.7 (b), the bypass and ram air controller proportional values are reduced to 25% of their original value and remain at these values until the set-point change is met (e.g., for the next 200 seconds).

198 196 ^

194 193 192

g- 192 190 188
100

5

190 189

150 200 Time (sec)
(a )

250

300

188

0

50

100

150 200 Time (sec)

250

300

(b)

Fig. 6.7; Load temperature response for input at (=0 sec, followed by a unit step increase in temperature set-point at f=100 sec: (a) controller parameters unchanged throughout, (h) proportional gains decreased at the time of the set-point change

The first case, as expected, shows a large overshoot, after a step in temperature set-point is applied. In the second case, the decrease in proportional gains results in much a smaller overshoot. However, note that now the response following the set-point change is somewhat sluggish; whereas, in the first case, following a large overshoot, the set-point was met quite quickly. This further confirms that higher gains are necessary to deliver quick response transients for this control configuration. analysis: Consider another in this case, the step change in temperature set-point is followed shortly

thereafter by a step decrease in ram air inlet temperature Tc/(input B) at /=140 sec. For the first case, the proportional gains, adjusted to 25% of their former value once the change in temperature set-point is applied, remain at these altered values for another 200 seconds; whereas, in the second case, the original proportional gains are restored after 20 seconds.

133

The degraded disturbance rejection performance in the first scenario is clearly seen from Fig. 6.8. When the disturbance input B enters the system at /=140 sec, the controller proportional gains are still in their `set-point input' form (25% of former values), and thus the temperature response suffers. Once the gains are restored (reset) to their former values (at t=300 sec), the response improves once again and quickly achieves the temperature set-point. This improvement in disturbance rejection, once the former gain values are restored, is clearly seen when considering the second scenario, shown in Fig. 6.8 (b). Since the proportional gain values are reset 20 seconds after they have been altered (at /=120 sec), the system regains its efficient disturbance rejection characteristics, so that when a disturbance enters at /=140 sec, it is attenuated rather quickly.

194

194

^

193
192

I
g 191

S

193 199 198

S h-

190
189

100

200
Time (sec)

300

400

183

0

100

200
Time (sec)

300

400

(a)

(b)

Fig. 6.8: Load temperature response to Input A at t=0 sec, a unit step increase in temperature setpoint at t=100 sec, and Input B at t=140 sec: (a) adjusted proportional gains restored 200 seconds after set-point change, (b) proportional gains restored 20 seconds after set-point change

The following conclusions can be deduced from the preceding exercises. First of all, in order to reduce the overshoot in temperature response when a change in temperature set-point is applied, it is advisable to temporarily reduce the [bypass and ram air] controller proportional gains to a fraction of their current value (e.g., 25%). Second of all, it is important that this change lasts for only a short period of time (e.g., 20 seconds), after which the proportional gains should be restored to their original value. The reason for this is because, while the gains are in their reduced form, the disturbance rejection of the system is rather poor. Even a short span of reduced proportional gains, such as 20 seconds, is enough eliminate any excessive [initial] overshoots that would

134

otherwise result from to temperature set-point variations. At the same time, the control system will return to its efficient disturbance-rejection form shortly thereafter. Of course, it is quite possible that a disturbance will enter the system even during this short `reduced performance' period. In that case, the response performance will suffer, but only for a short while, as it will quickly improve once the controller proportional gains are restored. This simulation study was carried out with classical PUPI control laws, but the same concepts should apply if the PI bypass controller is replaced with the LQ bypass controller. Although the LQ gain matrix is optimized for minimum integral error, it will nonetheless cause a large overshoot for a step in temperature set-point, similar to the PHPI case where the PI controllers are tuned to give the best disturbance rejection characteristics. Thus, for the case of an LQ controller, some of the gains inside the gain matrix should be reduced to decrease the overshoot when a temperature set-point input is applied. The obvious choice would be to reduce the gain on the integral error state. For disturbance rejection performance, this gain is quite large, in order to bring down the integral error quickly. However, in light of the temperature set-point change, this particular gain could be decreased to a fraction of its value, for a short period of time, in order to produce a similar response behaviour to that just discussed in the above paragraphs. Further analysis into this matter would prove helpful, if an LQ controller is to be used in place of a F7 bypass controller.

In addition to load temperature, the proposed ram-air-plus-bypass control configuration is to provide regulatory action for the amount of bleed air bypass by keeping it near some desirable [low] fraction of the total bleed flow (e.g. 10% o f the overall flow). The proposed control system does this by turning the bypass valve opening into a controlled variable, to be restored after it varies due to temperatureregulatory action. For a given operating condition, the bypass valve opening set-point is set to correspond to the bypass valve opening that will result in 10% bypass flow. Then, through the action of the ram air control loop (which includes the bypass control loop within it), the bypass valve opening will be made to follow this set-point value.

135

However, to strive for a certain bypass flow ratio, this bypass valve opening setpoint will depend on bleed air conditions, namely, total bleed air flow rate and bleed air inlet temperature and pressure. For example, from the tables of initial steady-state values presented in Chapter 5, the bypass valve opening set-points for operating point #7 and operating point #22 are «(,^^,^^=36.57 % and «^^,^^=53.10 %, respectively. This is mainly due to large difference in the bleed air flow rate at these two different operating points. On a much smaller scale, consider also the simulations for input A at a particular operating point. In these simulations, the bypass valve opening is eventually restored to its set-point, but the bypass ratio is no longer exactly at 10%. As a result of the higher bleed temperature, the bypass flow given by equation (2.40) will be slightly lower. This can be seen, for example, from Fig. 5.4, where the new bypass ratio has a value of 5/2=0.098, even though the bypass valve opening is restored to its initial set-point. These examples suggest that some sort of corrective action for the bypass valve set-point will be necessary, especially if the system is to retain the bypass flow ratio near a desired value during a wide range of operating conditions. This is the reason why simulation studies of Chapter 5 included changes in bypass valve opening set-point, as such input variations will be common. To illustrate such corrective action, consider again the case of Fig. 5.4: the system is initially at operating point #7, with a step in bleed air temperature (input A) applied at t=0 sec. In addition to this original simulation, a step of +0.5% in bypass valve opening set-point is applied at (=200 sec. Fig. 6.9 shows the corresponding response to the scenario described above. Note that the increase in bypass valve opening set-point raised the bypass ratio back to around 5/2=0.1.

136

g. 36

(a)
35 S 190 189

0

100

200
Time (sec)

300

0

100

200
Time (sec)

300

400

0.04 o « ^ S 0.035 0.03 0.025 0.02 0.015

0.11
0.105

d :

0.1

g . 0.095 0.09 0.085 400

100

200
Time (sec)

300

100

200
Time (sec)

300

400

Fig, 6.9: System response to Input A at t=0 sec, and a step increase of 0.5% in bypass valve-opening set-point at t=200 sec

For practical applications, such corrective action in the bypass valve opening setpoint should be automated, in order to continuously have the desired bypass flow ratio. One possible way would be to perform a comprehensive analysis of all possible operating condition scenarios and then pre-schedule the bypass valve opening set-points as functions of changing operating conditions, in a manner similar to the pre-scheduling of PUPI control parameters. With a change in operating conditions, the bypass valve opening set-point would be updated to correspond to the most recent operating condition. A slight variation, and perhaps an improvement on this, would be sampling the plant to obtain the current engine and atmospheric conditions and then, based on these, calculating the bypass valve opening set-point in a manner similar to the calculations performed at the onset of each simulation exercise (initialization subroutine). and does not need to be frequent. In terms of determining the correct bypass valve opening set-point, it is sufficient to recalculate it only when major variations in either the bleed air flow rate take place.
137

This

repeated sampling could coincide with that used for the Xg-controller self-tuning process

As seen from Fig. 6.9, and is demonsfrated further by additional simulation results in Chapter 5, even large step changes in bleed air temperature do not require any significant corrective action [in at a given operating condition. Thus, the corrections in

bypass valve opening set-point do not need to take place continuously, since, for a given ^bypass,p * the [steady-state] value for bypass ratio is not likely to fluctuate wildly unless there are major changes in the total bleed air flow rate. The bypass ratio might vary slightly between the successive set-point updates; nevertheless, the precise desired value of 10% does not need to be followed strictly. It is satisfactory enough if the bypass ratio is somewhere near 10% of the overall bleed flow, and therefore low. As long as the bypass valve opening set-point is updated from time to time, in light of major changes in bleed air flow rate, the bypass ratio will not stray too far from the desired value. There is yet another way to accomplish the same regulatory action. This is the method of direct flow control, in which the bypass ratio is controlled directly rather than the bypass valve opening, to which it is related. However, this would require an additional flow sensor in the bypass channel and would thus add further complexity to the model. Furthermore, the overall process would have additional delay, as a result of flow sensor dynamics. Issues could also arise with the accuracy of such a sensor, since the bypass flow is expected to be quite low and might require an expensive flow sensor in order to measure it properly. However, such a method would eliminate the need of updating the bypass valve opening set-point with major changes in operating conditions and could be the subject of some further research work. The technique of regulating the bypass valve opening is thus a lot simpler, as the bypass valve opening does not need to be measured but follows directly from the calculated bypass controller output U bypass' Thus, no additional dynamics result from this method, as opposed to the flow control method. This is in agreement with the goal of efficient temperature response, one of the main objectives of this thesis.

Something that has not been discussed yet, but can be mentioned in support of the ram-air-plus-bypass configuration, is the redundancy feature that an extra valve gives the

138

overall control system. It is true that the first two configurations (bypass channel control and ram air channel control) are simpler, and thus less expensive and easier to maintain. However, the proposed multi-valve control strategy will not only deliver efficient temperature response and low ram air usage, but also, with slight alterations, has other advantages. For example, if a valve should fail in one of the first two [single control valve] configurations, the system will not be able to deliver temperature control. On the other hand, if a valve should fail in the ram-air-plus-bypass configuration, the other control valve should still be able to deliver temperature control. In case of bypass valve failure, the control law for the ram air controller would have to switch to regulate the load temperature, instead of the bypass valve opening. Thus, this configuration contains hardware redundancy and is more tolerable to failure, and thus more reliable. Before moving on with the final conclusions, it should be noted that some of the operating points in Table 2.2 do not work with the model in the way it is presented here. These are the cases for which the aircraft is not moving, and thus Mach = 0. In these cases, according to the model described in this thesis, there will be no pressure drop (see 2.36) in the ram air channel to cause any airflow. It would seem that an external device such as a pump is required to produce some airflow in these conditions. Additional information and analysis are necessary in order to properly model these conditions as well. For the purposes of this thesis, only the operating conditions for which the aircraft is moving, and therefore ram air flow is induced from the resulting pressure drop, apply to the bleed air system model.

139

CHAPTER? CONCLUSION 7.1 Concluding Statements
This thesis addresses temperature control of an engine bleed air system used on typical aircraft. The main objective of this research work was to investigate the possibility of reducing the ram air usage while retaining efficient temperature response in light of disturbances to the system'^. This was done by first analyzing two existing control configurations, in terms of their implementation within this particular bleed air system. Based on the findings obtained from these preliminary analyses, a third control configuration was proposed to improve on existing strategies, in terms of satisfying both efficient temperature response and low ram air usage objectives. Simulation studies were performed to demonstrate the success of this proposed configuration, as well as investigate some practical issues that might arise in the application of such a control system. The ram air channel and the bypass channel control strategies are not new and have been used for a variety of heat-exchange applications in the past. When applied to the bleed air system model developed in this thesis, each of these control configurations was found to serve well one of the thesis objectives, while sacrificing the other. The ram air channel control configuration saves ram air usage, at the expense of slow temperature response transients. In other words, this configuration does not `waste' any ram air, as just the right amount of ram air is being used to cool down the hot bleed air. However, its temperature control performance is sluggish, owing to the slow heat exchanger dynamics present in the control loop. Consequently, the response time is large, thus violating the efficient temperature response objective. The advantage of placing a bypass on the stream whose temperature is to be controlled, in terms of improving the response time, was indicated from relevant literature [7,17]. Because of the control valve located in the bypass channel, the

16

A summary of the research work presented here can be found in [24]

140

controller's actions sidestep the heat exchanger dynamics, and are thus felt almost immediately (neglecting transport lag) at the load. The faster response time is therefore a general characteristic of the bypass channel control configuration. air system of this thesis. This was further confirmed by analysis of the bypass channel control configuration, as applied to the bleed In fact, in this particular application, the fast response characteristic of this configuration is even more pronounced, as the heat exchanger dynamics themselves are particularly fast, owing to the large difference in the hot-side (main bleed air) and cold-side (ram air) fluid flow rates'^. The bypass channel configuration was therefore found to deliver excellent disturbance rejection performance, in terms of very short response time. However, with respect to ram air usage, the bypass channel control configuration performs very poorly when applied to the bleed air system at hand. The ram air flow, governed only by the pressure drop across this channel, is unnecessarily large, resulting in excessive overcooling of the main channel, and thus, equivalently, in a large bypass flow. Therefore, this control configuration violates the efficient ram air usage objective. A third control strategy is proposed, termed ram-air-plus-bypass control configuration, in an attempt to improve the two former configurations and deliver efficient temperature response, along with relatively low ram air usage. The idea behind this method is to have a certain amount of bypass flow, and thus give the control system some fast response behaviour characteristic to bypass configurations, but to keep this amount low enough so that only slight overcooling of the main channel occurs (resulting in savings in ram air usage). This is only possible if control valves are placed in both bypass and ram air channels. Thus, the key aspect of this control configuration is that there exist different combinations of ram air valve and bypass valve openings that will yield the same load temperature at a given operating point. This characteristic is a feature of the ram-air-plus-bypass control configuration only. For example, for the bypass control configuration, the bypass valve opening (and thus, the bypass flow) will depend on the ram air flow, which is fixed by the atmospheric conditions. It is this flexibility that allows this final control configuration to retain the fast transients (characteristic to

See Chapter 3, "Bypass Control Configuration", for a more detailed analysis.

141

systems with a bypass on the controlled stream), as well as low ram air usage (as compared to the pure bypass control configuration). It is thus desirable to have some bypass flow (for efficient transient behaviour), but to keep this value relatively low (to keep the extra ram usage low). Thus, some sort of regulation in this respect is also required in order to keep such conditions throughout the dynamic operation of the system. For this purpose, a new controlled variable is introduced: the bypass valve opening. This opening will be indirectly controlled by the ram air channel controller to follow the desired bypass valve opening set-point. Thus, the bypass channel controller forms an inner loop and brings about temperature regulation, while the ram air channel controller forms an outer loop that works to eventually restore the bypass valve opening to its set-point value. The idea is, therefore, to quickly bring the temperature to its set-point, and then to slowly return the bypass valve opening to its [valve opening] set-point, by manipulating both ram air and bypass control valves. This multi-loop, multi-variable control strategy was investigated using simulations studies at a few representative operating conditions. Classical PI control laws were used, with the parameters tuned to yield the best disturbance rejection performance at a particular operating point. The advantages of replacing the inner bypass controller with a Ig-optimal control law were also investigated and are discussed in the Chapter 6. It was found that, in terms of time response, the ram-air-plus-bypass control configuration out-performs the ram air control strategy, given that the controller parameters are tuned for disturbance rejection performance at that particular operating point. In most simulation results, the temperature error is reduced to a very small value in a rather short period of time (within 40-60 seconds in most cases), with a complete elimination in steady-state error with further elapsed time. These slight temperature variations continue for some time, as a result of the ram air controller regulatory action, but are generally small enough to consider the temperature response as settled. In terms of ram air usage, the proposed control strategy does not outperform the ram air configuration, as this objective is maximized by the latter. However, it uses only slightly more ram air, due to a relatively low bypass ratio. On the other hand, the

142

proposed strategy vastly out-performs the bypass control configuration in this respect. These findings are numerically demonstrated in Table 6.1, found in the previous chapter. The vast improvement in ram air reduction over the bypass channel control is immediately evident. From the same table, it can also be seen that, although not better, the ram air usage for the proposed strategy is only slightly worse than that of the ram air channel control configuration. In conclusion, the proposed ram-air-plus-bypass control configuration was found to improve on the former control configurations, in terms providing the best solution method to satisfy a combination of both thesis objectives. It was found to provide efficient disturbance rejection performance, comparable to that of the bypass control configuration, while improving on the ram air usage of the latter by a significant margin. It can thus be concluded that the proposed configuration proves to be an improved control strategy in terms of satisfying both low ram air usage and efficient disturbance rejection.

7.2

Recommendations for Future Research
Additional research can be carried out in several areas pertaining to this thesis.

First and foremost, there is a strong need to validate the simulation studies of the proposed control configuration with experimental results. Thus, one area of possible future research can include the development of a physical bleed air system apparatus that would represent the real system. It might not be possible to exactly replicate this system, especially the heat exchanger, whose exact physical characteristics are confidential and only certain empirical relations are given. However, it should suffice if the physical apparatus simply shares some common characteristics with the bleed air system described in this thesis. The proposed control configuration can then be tested in experimental settings, to determine its performance in such conditions. Further improvements can be also made in the bleed air system modeling. This is important, because a more accurate plant model will give the simulations more validity by being able to represent real system behaviour more closely. The control valve model can be made more complete by modeling valve hysteresis and saturation. Modeling fluid

143

transport lag would also move the model closer to real system behaviour. A more accurate model would represent the plant more accurately in nonlinear simulations and could thus be considered to yield results that are closer to what occurs in a real system. Another direction for future research lies in a more comprehensive study of the control system behaviour at a larger number of operating conditions. Such a study could focus on optimal controller parameters as functions of operating conditions and could thus be used for pre-scheduling the control parameters, to make the overall control system more robust. Furthermore, more research work can be carried out to continue investigating some of the practical issues raised in the discussions of Chapter 6, such as trade-off between disturbance rejection performance and excessive overshoots for set-point response, or the need of corrective action for updating the bypass valve opening set-point with major variations in bleed air conditions. To this end, an analysis into using flow control to regulate the bypass flow directly can be carried out to investigate the advantages and disadvantages of such a technique.

144

APPENDIX
I) MATLAB Script for the Nonlinear Simulations for the Ram Air Channel Control Configurations 18
clear all; clc; OperatingCondition»» [%Pin 30 35 20 0 35 35 35 35 35 35 35 35 20 10 30 13 35 20 20 25 20 30 25 35 35 35 35 35 30 35

Ta 130 30 130 0 130 20 90 10 50 -10 10 -25 -40 -25 -40 -30 -40 -40 10 -30 50 -10 90 10 110 15 130 20 130 30

Pa 14.70 14.70 14.70 14.70 14.70 14.70 10.11 10.11 6.76 6.76 4.37 4.37 2.15 2.15 2.15 2.15 2.15 2.15 4.37 4.37 6.76 6.76 10.11 10.11 12.23 12.23 14.70 14.70 14.70 14.70

M 0.0 0.0 0.0 0.0 0.4 0.4 0.5 0.5 0.7 0.7 0.8 0.8 0.85 0.85 0.85 0.85 0.85 0.85 0.85 0.85 0.7 0.7 0.5 0.5 0.4 0.4 0.4 0.4 0.0 0.0

Wh Thi 1.1 380 1.1 250 1 . 1 300

1.1
1. 1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1. 1 1. 1 6.5 6.5 6.5 6.5 6.5 6.5 6.5 6.5 5.5 5.5 5.5 5.5

mission mission mission mission 0 mission 380 mission 380 mission 380 mission 380 mission 380 mission 380 380 mission mission 380 mission 380 mission 380 mission 380 mission 380 380 mission 380 mission 380 mission 380 mission mission 380 380 mission mission 380 380 mission 380 mission 380 mission 380 mission 380 mission mission 380 250];% mission

segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment

data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data

#1 #2 #3 #4 #5 #6 #7 #8 #9 #10 #11 #12 #13 #14 #15 #16 #17 #18 #19 #20 #21 #22 #23 #24 #25 #26 #27 #28 #29 #30

OpConNum-input(*\nPLEASE CHOOSE THE OPERATING CONDITION NUMBER (1-30, typical No.#7):'); N»input('Dimension of NxN heat exchanger model (integers only): N = '); Pin=OperatingCondition(OpConNum,1); T_amb"OperatingCondition(OpConNum,2); P_amb=OperatingCondition(OpConNum,3); Mach=OperatingCondition(OpConNum,4); W_H-OperatingCondition(OpConNum,5)/60; T_HI=OperatingCondition(OpConNum,6); T_H=190; d_ram-1.5; A_open ram=pi*d_ram*d_ram/4 ; C_H-0.24; C_C-0.24; M»xl; C_M=x2; R - 639.6; g-9.80665/0.0254; Gamma « 1.4; T_V-1.5; % % % % % % Bleed inlet pressure in psig Ambient temperature Ambient pressure Mach number Total bleed flow in lb/sec Bleed air inlet temp, in deg. F % % % % % Controlled temperture in deg. F Valve diameter in inch Valve full-open area in inch'"2 Hot side fluid specific heat Cold side fluid specific heat

% Gas constant, inch/Rankine % Gravity inch/sec''2 % valve time constant

P_HI-Pin+P amb; % Bleed inlet pressure in psia T_CI-(T__amb+460)* (1+0.2*Mach''2) - 460 % Ram air temperature (deg. F) F_rec=0.7; % Recovery factor pressure differential=0.7 P_C_inlet · (P_amb* ( (l+0.2*Mach^2) ^3.5) -P_amb) *F__rec+P__amb; % Ram air pressure P CO»P amb % the ram air is dumped to the atmosphere

(psia)

'* In the following code listings, the constants Xl,x2,x3,x4,x5,x6,x7,x8,x9,xl0,xl I,xl2,xl3,xl4 correspond to the heat exchanger data derived experimentally. The author is bound by a confidentiality agreement not to release the exact values of these parameters.

145

p_H=P_HI-x3*W_H"'2-x4*W_H; K- (P_H-P_amb) /W_H''2;

% hx hot side pressure drop % calculate the downstream impedance steady-state calculation

W C-0; % start with a flowrate of zero flag-0; % set flag to zero, to be used in the subsequent loops % loop that iterates the tenths while flag-- 0; W_C"W_C+0.1; % increment by a tenth [T_HO,X ]=HX_Steady(T_HI,T_CI,W _ H ,W _ C ,N ); % call heat exchanger subroutine if T_HO < T_H flag-1; % set flag to 1 when the cold flow rate is too high % (the hot air outlet falls below the setpoint) end end W_C-W_C-0.1; % return the flow rate to the value before it became too large flag-0; % reset the flag % loop that iterates the hundreths while flag-- 0; W_C-W__C+0.01; [T__HO,X] -HX_Steady (T_HI,T_CI,W_H,W_C,N) ; if T_HO < T_H flag-1; end end W_C-W_C-0.01; flag-0; while flag-- 0; W_C»W__C+0.001; [T_HO,X] -HX_Steady (T__HI,T_CI,W_H,W_C,N) ; if T_HO < T_H flag-1; end end W_C-W_C-0.001; flag-0; while flag-- 0; W_C-W_C+0.0001; [T_HO,X ]-HX_Steady (T_HI,T_CI,W__H,W _ C ,N ) ; if T_HO < T__H flag-1; end end W_C-W__C-0.0001; flag-0; while flag-- 0; W_C=W_C+0.00001; [T_HO,X]-HX_Steady(T_HI,T_CI,W_H,W_C,N); if T_HO < T_H flag-1; end end W_C-W_C-0.00001 ; flag-0; while flag-- 0; W_C-W_C+0.000001; [T_HO,X] -HX_Steady (T_HI,T__CI,W_H, W_C, N) ; if T_HO < T_H flag-1; end end flag-0; % the above process can be continued until the desired accuracy is reached P_CI-x5*W_C^2+x6*W_C+P_C0; % cold side pressure drop across heat exchanger ratio_c-P_CI/P_C_inlet; terml-sqrt(((2*Gamma*g)/ ( (Gamma-1)*R)) * (ratio_c^(2/Gamma)-ratio_c^((1+Gamma)/Gamma))); A_ram=(W_C*sqrt(T__CI+4 60) )/(P_C_inlet*terml) ; Beta_ram=acos (1- ( (4*A_ram) / (pi*d_ram^2) ) ) ; Beta_ram_initial-Beta_ram; fprintf(*\n*); disp(*Steady state temperature at the load:*); T_load-T_HO fprintf(*\n\n*); d i s p ('Steady state ram air flow rate:');

146

w_c
fprintf(*\n\n*); % calculate the A,B,C,D matrices for the chosen flow regime if (W_H < 0.25 && W_C < 0.1083333) Cl-x7;
C2-X8;

C3-X9; C4"xlO; [A,BrC,D]-ABCD(T_HI,T_CI,W__H,W_C,X,Cl,C2,C3,C4,N) ; elseif (W_H > 0.25 && W_C < 0.1083333) Cl-xll;
C2-X12; C3-X9; C4-X10;

[A,B,C,D]-ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); elseif (W_H < 0.25 && W_C > 0.1083333)

C I- xTT
C2-X8; C3-X13; C4-X14;

[A,B,C,D]»ABCD(T__HI,T_CI,W_H,W__C,X,C1,C2,C3,C4,N) ; elseif (W_H > 0.25 && W_C > 0.1083333) Cl-xll;
C2-X12; C3-X13; C4-X14;

[A,B,C,D]-ABCD(T_HI,T__CI,W_H,W_C,X,C1,C2,C3,C4,N) ; end

%********************************************************
% The nonlinear model simulation initialization
^

* :»);

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Interval-input(*\nENTER THE DURATION OF THE SIMULATION [SECOND] fprintf(*\n*); d i s p ('ENTER THE INPUT NUMBER:'); d i s p ('1. +40 deg. F step in bleed temperature'); d i s p ('2. -20 deg. F step in ram air temperature'); d i s p ('3. +1 deg. F step in temperature setpoint'); d i s p ('4. +40 deg. F step in ram air temperature'); Simu-input{'\ n '); T_H_setpoint-T_HO; T_HS-T_HO; DT-0.01; Print_Interval-l/DT; t - 0 :DT*Print_Interval:Interval; t-t *; record_index-0; Y_valve-0; % ram controller parameters KP-0.8; Kv-(pi/2)/100; Ti ram-100;

M2-0; Error_previous»0; % introduce steady state variables T_HI_ss-T_HI;
t " c i _ s s -T~CI; w " h _ s s -W_H; W_C_ss=W_C; X ss-X; del_X-X-X_ss; T_HO_ss-T_HO;

%********************************************************
% The nonlinear model simulation starts here
%

*

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * ^

plot_index-l; time-0; T_H_P(plot_index)-T_HO; t " h S_P( plot_index)-T_HS; Beta_ram_P(plot_index)-Beta_ram; W_C_P(plot_index)-W_C;

147

% setup the disturbance if Simu-- 1 T__HI»T_HI+40; elseif Simu==2 T_CI=T_CI-20; elseif Simu==3 T_H_setpoint«T__H_setpoint+l; elseif Simu==4 T_CI=T_CI+40; end for loop_counter=0:D T :Interval; % core program (executes every time step) starts here A_ram = (pi*d_ram^2) /4* (1-cos (Beta__ram) ) ; % Calculate HX hot side flow and pressure W_H « ((x4^2+4*(P_HI-P_amb)*(K+x3))^0.5-x4)/(2*(K+x3)); P_H-K*W_H^2+P_amb; % Calculate cold side flow and pressure ratio_ram = P_CI/P_C_inlet; if ratio_ram < 0.5283 ratio_ram = 0.5283; end term_ram=sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) )* (ratio_ram^ (2/Gamma) ratio_ram"' ( (1+Gamma) /Gamma) ) ) ; WCl = (A_ram*P_C__inlet*term_ram) /sqrt (T_CI+4 60) ; WC2 = ( (x6^2+4*(P__CI-P_CO)*x5)-^0.5-x6)/(2*x5) ; while (abs(WC1-WC2)>0.000001); ratio_ram - P_CI/P_C_inlet; if ratio_ram < 0.5283 ratio_ram = 0.5283; end term_ram*sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) )* (ratio_ram"' (2/Gamma) ratio__ram'' ( (1+Gamma) /Gamma) ) ) ; WCl = (A_ram*P_C_inlet*term_ram)/sqrt(T_CI+460); WC2 - ((x6^2+4*(P_CI-P_CO)*x5)''0.5-x6)/(2*x5); if WC1>WC2 P_CI=P_CI+0.0000002; else P_CI»P_CI-0.0000002 ; end end W C-(WCl+WC2)/2; % heat exchanger model % calculate the A,B,C,D matrices for the current flow regime if (W_H < 0.25 && W_C < 0.1083333) Cl»x7; C2=x8; C3=x9; C4"xlO; (A,B,C,D]=ABCD(T_HI,T__CI,W_H,W_C,X,C1,C2,C3,C4,N) ; elseif (W_H > 0.25 && W_C < 0.1083333) Cl=xll; C2=xl2; C3=x9; C4=xlO; [A,B,C,D]=ABCD(T_HI,T__CI,W__H,W_C,X,C1,C2,C3,C4,N) ; elseif (W_H < 0.25 && W_C > 0.1083333) Cl=x7; C2»x8; C3=xl3; C4=xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W__C,X,C1,C2,C3,C4,N) ; elseif (W_H > 0.25 && W_C > 0.1083333) Cl=xll; C2=xl2; C3=xl3; C4=xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); end

% deviations in the input matrix from steady state values

148

de1_THI-T_HI-T_HI_ss; de1_TCI-T_CI-T_CI~s s ; del_WH"W_H-W_H_ss; de 1_WC=W__C-W_C_s s ; % setup the input matrix ü U(l,l)-del_THI; ü(2,l)-del_TCI; ü(3,l)-del_WH; ü(4,l)-del_WC; del_X=del_X+(A*del_X+B*U)*DT; % update the state, ie. T_M % calculate the output, T HO y -C * d e l_ X + D * ü ; T HO-T HO ss+Y; % end of heat exchanger model % Calculate the temperature of the mixed flow T_H»T_HO; T__S-5.94/(0.001+W__H''0.351) ; % sensor time constant T~HS-T_HS+ (T__H-T_HS) *DT/T_S; Temp__Error-T__H_setpoint-T_HS; % PI ram controller -------------------------------Ml-KP*Temp_Error; %M2»M2+ ( (Kp__ram*Temp_Error) /Ti_ram) *DT; M2-M2+ ( (KP*Temp_Error) /Ti_ram) *DT; U_ram=Ml+M2; Error_previous=Temp_Error; % Valve dynamics Y_valve-Y_valve+(Kv*U_ram-Y_valve)*DT/T_V;

% Valve opening angle Beta_ram=Beta_ram_initial-Y_valve; if Beta_ram>pi/2 Beta_ram=pi/2; end if Beta__ram<0 Beta_ram=0; end % --------------------------------------------------------% core program ends % -------------------------------------------------------time-time+DT; record_index=record_index+l; if record_index-=Print__Interval d i s p (*Time simulated {%)*); disp (round(time/Interval*100)); plot_index«plot_index+l; record__index=0 ; % Record data for plot T_H__P (plot_index) »T__HO+of fset; T_HS_P (plot_index) -T__HS+of f set; Beta_ram_P(plot_index)=Beta_ram; W_C_P(plot_index)=W_C; end end fprintf(·\nSIMULATION DONE\n *);

%********************************************************
% Plot simulation results
%

*

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

figure; plot(t,T_H_P, 'r-\t,T_HS_P, 'b:*);

149

PRO PERTYO F fW ERSONUNlVERSHY LIBRARY

grid; xlabel(*Time (sec)*) ylabel('T_h, T_h_s (deg. F ) *) title('Load Temperature T_h (red solid line) and Sensor Measurement T_h_s line)·); figure; plot(trBeta_ram_P,*r-'); grid; xlabel('Time (sec)') y label('Beta (rad)') title('Ram Air Control Valve Position'); figure; plot(t,W_C_P,'r-'); grid; xlabel('Time (sec)') ylabel C W _ C (Ib/s) ' ) t itle('Ram Air Channel Flow Rate');

(blue dotted

II)

MATLAB Script for the Nonlinear Simulations for the Bypass Channel Control Configurations
clear all; clc; >in
30 35 20 0 35 35 35 35 35 35 35 35 20 10 30 13 35 20 20 25 20 30 25 35 35 35 35 35 30 35

Ta
130 30 130 0 130 20 90 10 50 -10 10 -25 -- 40 -25 -40 -30 -40 --4 0 10 -30 50 -10 90 10 110 15 130 20 130 30

Pa
14.70 14.70 14.70. 14.70 14.70 14.70 10.11 10.11 6.76 6.76 4.37 4.37 2.15 2.15 2.15 2.15 2.15 2.15 4.37 4.37 6.76 6.76 10.11 10.11 12.23 12.23 14.70 14.70 14.70 14.70

M
0.0 0.0 0.0 0.0 0.4 0.4 0.5 0.5 0.7 0.7 0.8 0.8 0.85 0.85 0.85 0.85 0.85 0.85 0.85 0.85 0.7 0.7 0.5 0.5 0.4 0.4 0.4 0.4

Wh
1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 6.5 6.5 6.5 6.5 6.5 6.5 6.5 6.5

Thi
380 250 300 0 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 380 250]

0.0 0.0

5.5 5.5 5.5 5. 5

% mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission % mission ;% mission

segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment

data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data

#1 #2 #3 #4 #5 #6 #7 #8 #9 #10 #11 #12 #13 #14 #15 #16 #17 #18 #19 #20 #21

#22
#23 #24 #25 #26 #27 #28 #29 #30

OpConNum«input('\nPLEASE CHOOSE THE MISSION SEGMENT DATA NUMBER (1-30, typical #7):'); N«input('Dimension of NxN heat exchanger model (integers only); N = '); Pin»OperatingCondition(OpConNum,1); T_amb=OperatingCondition(OpConNum,2); P_amb=OperatingCondition(OpConNum,3); Mach-OperatingCondition(OpConNum,4); W_H»OperatingCondition(OpConNum,5)/60; T~HI"OperatingCondition(OpConNum,6); T H-190; d_ram=l.5; d_bypass" l; R = 639.6; g«9.80665/0.0254; Gamma -1.4; C_H-0.24; C C-0.24; % % % % % % % Bleed inlet pressure in psig Ambient temperature Ambient pressure Mach number Total bleed flow in lb/sec Bleed air inlet temp, in deg. Controlled temperture in deg.

% ram channel valve diameter in inch % bypass channel diameter % Gas constant, inch/Ranlcine % Gravity inch/sec"'2

150

% System other variables M-xl; C M-x2; t " v -1,5;
% * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

% Steady-state
%

(initial condition)

calculation starts here *

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

P_HI-Pin+P_amb; % Bleed inlet pressure in psia A_opened_bypass =pi*d_bypass*d_bypass/4 ; % bypass valve full-open area in inch^'Z P_CO-P__amb; % dumping ram air into the atmosphere T_CI-(T_amb+460) * (1+0.2*Mach''2) - 460; % Ram air temperature (deg. F) F_rec"0.7; % Recovery factor pressure differential" 0 .7 P__C_inlet=(P__amb* ( (l+0.2*Mach'~2) ^3.5) -P_amb) *F_rec+P_amb; % Ram air pressure (psia) % calculate the ram air flow asgiven with a fully opened valve in the channel A_ram-pi*d_ram*d_ram/4 ; % bypass valve full-open area in inch''2 P%CI-P_CO+0.00001; % initial guess % Calculate cold side flow and pressure ratio_ram - P_CI/P_C_inlet; if ratio_ram < 0.5283 ratio_ram - 0.5283; end term_ram=sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) )* (ratio_ram'' (2/Gamma) ratio_ram'' ( (1+Gamma) /Gamma) ) ) ; WCl - (A_ram*P_C_inlet*term_ram) /sqrt (T_CI+460) ; WC2 - ((x6^2+4*(P_CI-P_CO)*x5)^0.5-x6)/(2*x5); while (abs(WC1-WC2)>0.00001); ratio_ram - P_CI/P_C_inlet; . if ratio_ram < 0.5283 ratio_ram = 0.5283; end term_ram=sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) )* (ratio_ram"" (2/Gamma) ratio_ram"' ( (1+Gamma) /Gamma) ) ) ; WCl - (A_ram*P__C_inlet*term_ram) /sqrt (T_CI+460) ; WC2 - ((x6^2+4*(P_CI-P_CO)*x5)^0.5-x6)/(2*x5); if WC1>WC2 P CI-P CI+0.000002; else P CI-P CI-0.000002; end end W_C-(WCl+WC2)/2; % Iteration to calculate HX hot side flow W_H1 W H1-W_H;
w " h 10-0;

while [abs(W_H1-W_H10)/W_H1] > .00001; [T_HO,X)"HX_Steady(T_HI,T_CI,W_H1,W_C,N); % call heat exchanger subroutine % New estimated hot and by pass flows [W_Hln, W_H2n] =FlowSplit(T_HI,T_HO,T_H,W_H); W H10-W_Hln; w " h 1-(W_H10+W_H1)/2; end W_H2-W_H2n; % Calculate the load pressure P_H and valve angle for the given flow W_H1 and W H2 P_H-P_HI-x3*W_H1^2-x4*W_Hl; % hot side hx pressure drop Beta_bypass=acos(l-(W_H2/(A_opened_bypass*P_HI)*sqrt(T_HI+460))/(2*1.4*386/(1.4l)/638.6*((P_H/P_HI)"(2/1.4)-(P_H/P_HI)''((1.4+l)/1.4)))"(l/2)); Beta_bypass_initial=Beta_bypass; A_bypass=(pi*d_bypass^2)/4*(1-cos(Beta^bypass)); % calculate the impedance at the load K - (P_H-P_amb)/W_H^ 2; fprintf(*\n*); d i s p ('Steady state temperature at the load:*); T_load-(T_H0*W_H1+T_HI*W_H2)/W_H fprintf(*\n\n*); disp('Steady state ram air flow rate:*); W_C fprintf(*\n\n*); % calculate the A,B,C,D matrices for the chosen flow regime

151

if (W_H < 0 . 2 5

&& W_C < 0 . 1 0 8 3 3 3 3 )
C1-X7;

C2=x8; C3=x9; C4=xlO; [A,B,C,D]=ABCD(T_HI,T_CI,W__H,W_C,X,C1,C2,C3,C4,N) ; elseif (W_H > 0.25 && W_C < 0.1083333) Cl=xll; C2=xl2; C3=x9; C4=xlO; [ A, B, C, D] =ABCD (T_HI,T_CI,W_H, W__C, X, Cl,C2 ,C3,C4 ,N) ; elseif (W_H < 0.25 && W_C > 0.1083333)
C1-X7;

C2=x8;
C3-X13;

C4=xl4; [A,B,C,D]»ABCD(T__HI,T__CI,W_H,W_C,X,C1,C2,C3,C4,N) ; elseif (W_H > 0.25 && W_C > 0.1083333) Cl=xll;
C2-X12; C3-X13;

C4=xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W__H,W__C,X,C1,C2,C3,C4,N) ; end

W_Ho=W_H; BRatio-W_H2/W_H
% * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

% The nonlinear model simulation initialization

Interval-input(*\nENTER THE DURATION OF THE SIMULATION [SECOND] fprintf(*\n*); disp('ENTER THE INPUT NUMBER:*); d i s p ('1. +40 deg. F step in bleed temperature*); d i s p (*2. -40 deg. F step in bleed temperature *); d i s p (*3. +1 deg. F step in temperature setpoint*); d i s p (* 4. +20 deg. F step in ram air temperature *); Simu-input(*\n*); T_H_setpoint-T_H; T_HS=T_H; DT-0.002; Print_Interval=l/DT; t- 0 :DT*Print_Interval/20:Interval; t-t *; record_index-0; Y valve B-0; % Controller parameters **************** KP-0.4 ; Kv-(pi/2)/100; Kp_bypass-KP*Kv; % proportional control Ti_bypass=30; M2-0; % introduce steady state variables T_HI_ss=T__HI; T_CI ss-T_CI; W_Hl" ss=W_Hl; W_C_ss-W_C; Xss-X; del__X-X-X_ss; T HO ss-T HO;

:*);

% The
^

nonlinear

model

sim ulation

starts

here
* * * * * * * * * * *

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

plot_index-l; time-0; T__H_P (plot_index) =T_H; T~HS_P(plot_index)=T_HS; BRatio_P(plot_index)-BRatio;

152

W_H2_P (plot_index) =W_H2; % setup the disturbance if Simu==l T_HI-T_HI+40; elseif Simu-- 2 T_HI=T_HI-40; elseif Simu-- 3 T_H_setpoint-T_H__setpoint+l ; elseif Simu»" 4 T_CI-T_CI+20;

end for loop_counter=0:D T ;Interval;
% ---------------------------------------------------------------------------------

% core program (executes every time step) starts here A_bypass - (pi*d_bypass^2)/4*(1-cos(Beta_bypass)); % Calculate HX hot side flow W_Hl-(-x4+sqrt(0.028224+7.2*(P_HI-P_H)))/2*x3; % Calculate Bypass flow ratio_bypass-P_H/P__HI; if ratio_bypass < 0.5283 ratio_bypass - 0.5283; end term_bypass-sqrt(((2*Gamma*g)/ ( (Gamma-1)*R)) * (ratio_bypass^(2/Gamma)ratio_bypass'' ( (1+Gamma) /Gamma) ) ) ; W_H2-(A_bypa s s * P_HI*te rm_bypa s s )/sqrt(T_HI+4 60); % Calculate W_H W_H-( (abs (P_H-P__amb) )/K) ^ (1/2) *sign (P_H-P_amb) ; del_f low- (W__H1+W_H2) -W_H; if abs(del_flow)>0.00001 if del_flow > 0 P H-P H+0.000001; else P H-P H-0.000001; end % Calculate HX hot side flow W_H1-(-x4+sqrt(0.028224+7.2*(P_HI-P_H)))/2*x3; % Calculate Bypass flow ratio_bypass-P_H/P_HI; if ratio_bypass < 0.5283 ratio__bypass = 0.5283; end term_bypass-sqrt(((2*Gamma`g)/ ( (Gamma-1)*R)) * (ratio bypass^(2/Gamma)ratio_bypass^((1+Gamma)/Gamma))); W_H2-(A_bypass*P_HI*term_bypass)/sqrt(T_HI+460); % Calculate W_H W_H-((abs(P_H-P_amb))/K)" (l/2)*sign(P_H-P_amb); del_flow-(W_H1+W_H2)-W_H; end BRatio-W_H2/W_Ho; % heat exchanger model ---------------------------------------------------% calculate the A,B,C,D matrices for the current flow regime if (W_H < 0.25 && W_C < 0.1083333)
C1-X7; C2-X8;

C3-X9;
C4-X10;

[A,B,C,D]-ABCD(T_HI,T_.CI,W_H,W_C,X,C1,C2,C3,C4,N); elseif (W_H > 0.25 && W_C < 0.1083333) Cl-xll;
C2-X12;

153

C3»x9; C4«*xl0; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); elseif (W_H < 0.25 && W_C > 0.1083333) Cl=x7; C2=x8; C3=xl3; C4"xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); elseif (W_H > 0.25 && W_C > 0.1083333) Cl-xll; C2=xl2;
C3-X13;

C4=xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); end

% deviations in the input matrix from steady state values del_THI-T_HI-T_HI_ss; del_TCI=T_CI-T_CI_ss; del_WHl=W_Hl-W_Hl_ss; de1_WC=W_C-W_C_ss; % setup the input matrix U U(l,l)-del_THI; U(2,l)-del_TCI; U(3,l)-del_WHl; U(4,l)=del_WC; del_X=del_X+(A*del_X+B*U)*DT; % update the state, ie. T_M % calculate the output, T_HO Y=C*del_X+D*U; T HO=T HO ss+Y; % end of heat exchanger model % Calculate the temperature of the mixed flow T_H-(T_H0*W_H1+T_HI*W_H2)/ (W_H1+W_H2);

T_S=5.94/(0.001+W_H*0.351); % sensor time constant T~HS-T_HS+(T_H-T_HS)*DT/T_S; Temp_Error= (T_H_setpoint-T_HS); error_bypass=Temp_Error; % PI bypass controller ------------------------------Ml-KP*error_bypass; M2=M2+((KP*error_bypass)/Ti_bypass)*DT; U_bypass**Ml+M2; % Valve dynamics Y_valve_B=Y_valve_B+(Kv*U_bypass-Y_valve_B)*DT/T__V; % % Valve opening angle Beta_bypass=Beta_bypass_initial+Y_valve_B; if Beta_bypass>pi/2 Beta_bypass=pi/2; end if Beta_bypass<0 Beta_bypass=0; end % -----------------------------------------------------------% core program ends

time=time+DT; record_index=record_index+l; if record_index==Print_Interval/20 d i s p C T i m e simulated (%)*); disp(round(time/Interval*100)); plot_index=plot_index+l; record_index=0; % Record data for plot T_H_P(plot_index)=T_H; T_HS_P(plot_index)=T_HS;

154

BRatlo_P(plot_index)-BRatio; W_H2_P(plot_index)-W_H2; end end fprintf(*\nSIMULATION DONE\n');

% Plot simulation results
^

*

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

figure; plot(t,T_H_P,'r-',t,T_HS_P,'b:'); grid; x l a b e l C T i m e (sec)*) ylabel(*T_h, T_h_s (deg. F ) ») t itle(*Load Temperature T_h and Sensor Measurement T_h_s *);

figure; plot(t,BRatio_P,*r-*); grid; xlabel(*Time (sec)*) y l abel(*W_H_2/W_H (Ib/s)*) ti t l e (*Bypass Ratio*);

III)

MATLAB Script for the Nonlinear Simulations for the Ram-Air-Plus-Bypass Control Configurations
clear all; clc; >in
30 35 20 0 35 35 35 35 35 35 35 35 20 10 30 13 35 20 20 25 20 30 25 35 35 35 35 35 30 35

Ta

Pa

M
0.0 0.0 0.0 0.0 0.4 0.4 0.5 0.5 0.7 0.7 0.8 0.8 0.85 0.85 0.85 0.85 0.85 0.85 0.85 0.85 0.7 0.7 0.5 0.5 0.4 0.4 0.4 0.4

Wh
1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 6.5 6.5 6.5 6.5 6.5 6.5 6.5 6.5

Thi
380 % mission 250 % mission 300 % mission 0 % mission 380 % mission 3 8 0 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 380 % mission 2 5 0 ] ; % mission

130 1 4 . 7 0 30 1 4 . 7 0 130 1 4 . 7 0 0 14.70 130 1 4 . 7 0 20 1 4 . 7 0 90 1 0 . 1 1 10 1 0 . 1 1 50 6.76 -10 6.76 4.37 10 4.37 -25 -40 2.15 -25 2.15 -40 2.15 -30 2.15 2.15 -40 2.15 -- 40 4.37 10 4.37 -30 6.76 50 6.76 -10 90 1 0 . 1 1 10 1 0 . 1 1 110 1 2 .2 3 15 1 2 . 2 3 130 1 4 . 7 0 20 1 4 .7 0 130 1 4 .7 0 30 1 4 . 7 0

0.0 0.0

5. 5 5. 5 5. 5 5. 5

segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment segment

data data data data data data data data data data data data data data data data data data data data data data data data data data data data data data

#1 #2 #3 #4 #5 #6 #7 #8 #9 #10 #11 #12 #13 #14 #15 #16 #17 #18 #19 #20 #21

#22
#23 #24 #25 #26 #27 #28 #29 #30

OpConNum-input(*\nCHOOSE THE OPERATING CONDITION NUMBER (1-30); *); N-input(*\nINPUT THE NxN HEAT EXCHANGER DIMENSION: N - *); % for steady-state calculations, we use 15x15 for accuracy Pin«OperatingCondition(OpConNum,1); T_amb-OperatingCondition(OpConNum,2); P_amb"OperatingCondition(OpConNum,3); Mach-OperatingCondition(OpConNum, 4 ); W_H"OperatingCondition(OpConNum,5)/GO; T_HI»OperatingCondition(OpConNum,6); % % % % % % Bleed inlet pressure in psig Ambient temperature Ambient pressure Mach number Total bleed flow in lb/sec Bleed air inlet temp, in deg. F

155

T H-190; % temperature setpoint at %Bypass_setpoint=0.03824; % BR=0.1 %Bypass__setpoint«0.04012; % BR=0.1 %Bypass_setpoint=0.07735; % BR=0.1 %Bypass_setpoint=0.08205; % BR=0.1

the for for for for

load op#5 op#7 op#14 op#22

%Bypass__setpoint=0.1529; % BR=0.1 for op#5 Bypass_setpoint»=0.1605; % BR=0.1 for op#7 %Bypass_setpoint=0.3282; % BR=0.1 for op#22 Kv-(pi/2)/lOO; % valve gain to convert percentage to angle d ram»1.5; % ram channel valve diameter in inch d_bypass=l; % bypass channel diameter R = 639.6; % Gas constant, inch/Rankine g= 9 .80665/0.0254; % Gravity inch/sec*2 Gamma =1.4; C_H=0.24; C_C=0.24; C v = s q r t (2*Gamma*g/((Gamma-1) * R ) ); % check % System other variables M=xl; C_M=x2; T_V=1.5;
% * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

% Steady-state
^

(initial condition) calculation starts here *

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

P_HI-Pin+P_amb; % Bleed inlet pressure in psia A_opened_ram=pi*d_ram*d_ram/4; % ram valve full-open area in inch*2 A_opened bypass=pi*d bypass*d_bypass/4; % bypass valve full-open area in inch*2 P_CO=P_amb; % dumping ram air into the atmosphere T_CI=(T_amb+460)*(l+0.2*Mach*2) - 460; % Ram air temperature (deg. F) F_rec=0.7; % Recovery factor pressure differential=0.7 P_C^inlet=(P_amb*((l+0.2*Mach*2)*3.5)-P_amb)*F_rec+P_amb; % Ram air pressure (psia) A_bypass=Bypass_setpoint*A_opened_bypass; % force the bypass to be 20% opened at steady state % iteration to calculate the main & bypass flowrates W_Hl_upper=W_H; W_Hl_lower=0; flowsum=0; while abs(W_H-flowsum)>0.000001 W_H1=(W_Hl_upper+W_Hl_lower)/2; P_H=P_HI-x3*W_Hl*2-x4*W_Hl; % hot side hx pressure drop ratio_bypas8=P_H/P_HI; if ratio_bypass < 0.5283 ratio_bypass = 0.5283; end term_bypass=sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) )* (ratio bypass* (2/Gamma) ratio_bypass*((1+Gamma)/Gamma))); W_H2=(A_bypass*P_HI*term_bypass)/sqrt(T_HI+460); flowsum=W_Hl+W_H2; if flowsum>W_H W_Hl_upper=W_Hl; else W HI lower=W HI; end end W_C_max=-0.04300291545+0.0002429543246*sqrt(31329+(P_C_inlet-P_CO)*0.8232e7); % we have T_HI, T_CI, W_H1, and the desired T_H, and hence need to calculate % the corresponding W__C that agrees with the steady-state heat exchanger % results W_C_uppe r=W__C_ma x ; W_C_lower=0; T_load=0; while abs(T_load-T_H)>0.001 W__C* (W_C_upper+W_C_lower) /2; (T__HO,X]=HX_Steady (T__HI,T__CI,W__H1,W_C,N) ; % call heat exchanger subroutine T_load= (T_H0*W_H1+T_HI*W_H2) /W__H; if T_load>T__H " W_C_1ower=W_C; else W_C_uppe r=W C ; end

156

end % calculate the corresponding initial valve angles Beta_bypass=acos(1-((4*A_bypass)/ (pi*d_bypass*2))); Beta_bypass_initial=Beta_bypass; Beta_bypass_setpoint=Beta_bypass; U_bypass_setpoint=Beta_bypass/(pi/2)*100;; W_Ho-W_H; BRatio-W_H2/W_H BRatio_setpoint"BRatio; % ram air channel P_CI-x5*W_C*2+x6*W_C+P_C0; % cold side hx pressure drop rati o_ram-P_CI/P_C_in1e t ; if ratio_ram < 0.5283 ratio_ram » 0.5283; end term_ram-sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) )* (ratio_ram* (2/Gamma)-ratio_ram* ( (1+Gamma) /Gamma) ) ) i A_ram- (W_C*sqrt (T_CI+460) )/(P_C_inlet*term_ram) ; Beta_ram-acos(1-((4*A_ram)/ (pi*d_ram*2))); Beta_ram_initial=Beta_ram; % calculate the impedance at the load K - (P_H-P_amb)/W_H*2; fprintf(*\n*); disp(*Steady state temperature at the load:'); T_load fprintf('\n\n*); d i s p C S t e a d y state ram air flow rate:');

w _c
fprintf('\n\n'); % calculate the A,B,C,D matrices for the chosen flow regime if (W_H < 0.25 && W_C < 0.1083333) Cl-x7; C2-X8; C3»x9; C4=xlO; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); elseif (W_H > 0.25 && W C < 0.1083333) Cl=xll; C2=xl2; C3-X9; C4"xl0; [A,B,C,D]-ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); elseif (W_H < 0.25 && W_C > 0.1083333) Cl«x7; C2-X8; C3-X13; C4»xl4; [A,B,C,D]-ABCD(T_HI,T_CI,W_H,W C,X,C1,C2,C3,C4,N); elseif (W_H > 0.25 && W__C > 0.1083333) ~ Cl-xll; C2-X12; C3=xl3; C4**xl4 ; tA,B,C,D]-ABCD(T_HI,T_CI,W_H,W_C,X,Cl,C2,C3,C4,N); end

%

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

% The nonlinear model simulation initialization
%

*

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

Interval-input('\nENTER THE DURATION OF THE SIMULATION [SECOND] fprintf('\n'); disp('ENTER THE INPUT NUMBER:'); d i s p C l . +40 deg. F step in bleed temperature'); disp('2. -20 deg. F step in ram air temperature'); disp('3. +1 deg. F step in temperature setpoint'); Simu-input('\n'); T_H_SGtpoint-T_H;
t " h s -T_H;

:');

DT-0.01; Print_Interval-l/DT; t-0:DT*Print Interval/2 :Interval;

157

t" t *; record_lndex=0; Y_yalve_R=0; y__valve__B=0; % ram air controller proportional controller constant %Kp_bypas5-0.2 ; % op7 Kp_bypass=6; Ti_bypass=15; Kp_ram=3; Ti__ram=30; % op22 %Kp_bypass=l; %Ti_bypass=15; %Kp_ram=0.3; %Ti_ram=60; M2b=0; M2r=0; U_bypass=0; % introduce steady state variables T_HI_ss=T_HI; T_CI_ss=T_CI; W_Hl_ss=W_Hl; W C ss=W C; X__ss*X; del_X=X-X_ss; T HO ss=T_HO;

m

% The nonlinear model simulation starts here
^

*

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *

plot_index=l; time=0; T_H_P(plot_index)=T_H; T_HS_P (plot__index) =T_HS; Beta_ram_P(plot_index)=Beta_ram; Beta_bypass_P(plot_index)=Beta_bypass; W__H2~P (plot^ndex) =W_H2; W_C__P (plot_index) =W_C; BR_P(plot_index)=W_H2/W_H; %T_H_setpoint_P(plot_index)=T_H_setpoint; %T_HI_P(plot_index)-T_HI; %P_HI_P(plot_index)=P_HI; %error_ram_P(plot_index)=0; %error_bypass_P(plot_index)=0; % setup the disturbance if Simu==l T_HI=T_HI+40; elseif Simu-=2 T_CI=T_CI-20; elseif Simu»" 3 T_H_setpoint=T_H_setpoint+l; end for loop__counter=0:DT:Interval;

% core program (executes every time step) starts here A_ram =(pi*d_ram*2) / 4 * (1-cos(Beta_ram)); A__bypass = (pi*d_bypass*2) /4* (1-cos (Beta bypass) ) ; % Calculate cold side flow and pressure ratio_ram = P_CI/P_C_inlet; if ratio_ram < 0.5283 ratio_ram = 0.5283; end term_ram=sqrt ( ( (2*Gamma*g) / ( (Gamma-1) *R) ) * (ratio_ram* (2/Gamma) ratio ram*((1+Gamma)/Gamma)));

158

WCl - (A_ram*P C inlet*term_ram)/sqrt (T__CI+4 60) ; WC2 - ((x6*2+4*(P_CI-P_C0)*x5)*0.5-0.177)/(2*x5); while (abs(WC1-WC2)>0.00001); ratlo_ram - P_CI/P_C_in1e t ; if ratiq_ram < 0.5283 ratiq_ram - 0.5283; end term_ram-sqrt ( {(2*Ganuna*g) / ( (Gamma-1) *R) ) * (ratio_ram* (2/Gamma) ratio_ram*((1+Gamma)/Gamma))); WCl - (A_ram*P_C_inlet*term_ram)/sqrt(T_Cl+4 60); WC2 - ((x6*2+4*(P_CI-P_C0)*x5)*0.5-0.177)/(2*x5); if WC1>WC2 P CI=P CI+0.000002; else P_CI-P_CI-0.000002; end end W_C-(WCl+WC2)/2; % Calculate HX hot side flow W_Hl"(-x4 + s q r t (0.028224+7.2*(P_HI-P_H)))/2*x3; ratio_bypass-P_H/P_HI; if ratiq_bypass < 0.5283 ratio_bypass - 0.5283; end term_bypass-sqrt(((2*Gamma*g)/ ( (Gamma-1)*R)) * (ratio_bypass*(2/Gamma)ratio_bypass*((1+Gamma)/Gamma))); W_H2"(A_bypass*P_HI*term_bypass)/sqrt(T_HI+460); % Calculate W_H W H-( (abs (P_H-P_amb) )/K) * (1/2) *sign(P__H-P_amb) ; del__flow- (W_H1+W_H2)-W_H; if abs(del_flow)>0.00001 if del_flow > 0 P_H-P_H+0.000001; else P H-P H-0.000001; end % Calculate HX hot side flow W_Hl-(-x4 +sqrt(0.028224+7.2*(P_HI-P_H)))/2*x3; % Calculate Bypass flow ratio_bypass=P_H/P_HI; if ratio_bypass < 0.5283 ratio_bypass » 0.5283; end term_bypass-sqrt(((2*Gamma*g)/((Gamma-1)*R))*(ratio_bypass*(2/Gamma)ratio_bypass*((1+Gamma)/Gamma))); W_H2 - ( A_bypa s s * P__HI * te rm_bypa s s )/sqrt (T_HI+460) ; % Calculate W_H W_H-((abs (P_H-P_amb) )/K) * (1/2) *sign (P_H-P__amb) ; del_flow= (W_H1+W_H2)-W_H; end

BRatio-W_H2/W_Ho; % heat exchanger model % calculate the A,B,C,D matrices for the current flow regime if (W_H < 0.25 && W_C < 0.1083333) Cl-x7; C2-X8; C3»x9; C4»xlO; [A,B,C,D]=ABCD(T_HI,T_CI,W H,W_C,X,C1,C2,C3,C4,N); elseif (W_H > 0.25 && W_C < 0.1083333) Cl-xll;
C2-X12;

elseif

C3"x9; C4-xlO; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); (W_H < 0.25 && W_C > 0.1083333) Cl=x7;

159

elseif

C2=x8; C3=xl3; C4=xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N); (W__H > 0.25 && W__C > 0.1083333) Cl'xll; C2=xl2; C3»xl3; C4=xl4; [A,B,C,D]=ABCD(T_HI,T_CI,W_H,W_C,X,C1,C2,C3,C4,N);

end

% deviations in the input matrix from steady state values de1_THI=T_HI-T_HI_ss; del_TCI=T_CI-T_CI_ss; del_WHl=W_Hl-W_Hl_ss; del_WC=W_C-W_C_ss; % setup the input matrix U U(l,l)=del_THI; U(2,l)=del_TCI; U(3,l)=del_WHl; U(4,l)=del_WC; del_X=del_X+(A*del_X+B*U)*DT; % update the state, ie. T_M % calculate the output, T_HO Y=C*del_X+D*U; T HO=T HO ss+Y; % end of heat exchanger model % Calculate the temperature of the mixed flow T H-(T H0*W_H1+T_HI*W__H2)/(W Hl+W H2) ;

T_S=5.94/(0.001+W_H*0.351); % sensor time constant T_HS=T_HS+(T_H-T_HS)*DT/T_S; u_bypass=Beta_bypass/(pi/2)*100;

Temp_Error=(T_H_setpoint-T_HS); Bypass_Error=-UJbypass;

error_ram=(Bypass_Error); error_bypass=Temp_Error;

% ram air controller --------------------------------% PI ram controller -----------------------------Mlr=Kp_ram*error_ram; M2r*=M2r+ ( (Kp_ram*error_ram) /Ti_ram) *DT; U_ram=Mlr+M2r; % Valve dynamics Y_valve_R=Y_yalve_R+(Kv*U_ram-Y_yalve_R)*DT/T__V; % ram air valve opening angle Beta_ram=Beta_ram_initial+Y_yalve_R; if Beta_ram>pi/2 Beta__ram-pi/2; end if Beta_ram<0 Beta_ram=0; end

% bypass controller -----------Mlb=Kp__bypass*error_bypass;

160

M2b*M2b+ {(Kp__bypass*error_bypass) /Ti bypass) *DT; U_bypass»Mlb+M2b; % Valve dynamics Y_yalve_B»Y_valve_B+(Kv*U_bypass-Y_valve_B)*DT/T__V; % Valve opening angle Beta_bypass"Beta_bypass_initial+Y_valve_B; if Beta_bypass>pi/2 Beta_bypass-pi/2; end if Beta_bypass<0 Beta_bypass-0; end
% --------------------------------------------------------------

% core program ends

time»time+DT; record_index"record_index+l; if record_index--Print_Interval/2 d i s p C T i m e simulated (%)*); disp(round(time/Interval^lOO)); plot_index=plot_index+l; record_index=0; % Record data for plot T_H_P(plot_index)-T_H; t " h S_P (plot_index)»T_HS; Beta_ram_P(plot_index)-Beta_ram; Beta_bypass P(plot_index)=Beta_bypass; W_H2_P (plot" index) -W_H2 ; W__C_P (plo t_i ndex )=W__C ; BR_P(plot_index)-BRatio; %T_H_setpoint_P(plot_index)=T_H_setpoint; %t " h i _P( plot_index)-T_HI; % p " h I_P( plot_index)=P_HI; %error_ram_P(plot_index)-error_ram; %error_bypass_P(plot_index)=error_bypass; end end fprintfCXnSIMULATION DONE\n');
% ********************************************************

% Plot simulation results
%

*

********************************************************

figure; plot(t,T_H_P,'r-',t,T_HS_P,'b:'); xlabelf'Time (sec)') ylabel('Load Temperature (deg F ) ' ) title('Load Temperature Response'); figure; plot(t,Beta_bypass_P,'r-'); x lab e l ('Time (sec)') ylabel ('Beta_b_y_p_a__s__s (rad) ') t i t l e ('Bypass Valve Opening Angle');

figure; plot(t,W_C_P,'r-'); xlabel('Time (sec)') ylabel('Mass flow rate (Ib/s)') title('Ram Air Channel Flow Rate'); figure; plot(t,BR_P,'r-'); xlabel('Time (sec)') ylabel('BR') ti t l e ('Bypass Ratio');

161

IV)

MATLAB Subroutines used in the above scripts (HX_Steady, ABCD, FlowSplit) HX Steadv.m
% given the incoming hot/cold flow rates, as well as the hot/cold inlet % temperatures, this subrouting returns the steady-state value of the hot % air outlet temperature function [T_h_out,state]=HX_Steady(T_hit,T_cit,W_ht,W_ct,N);

C_H=0.24; C_C=0.24; M*xl; C_M=x2; % calculate the hot & cold heat transfer coefficients, as functions of % TOTAL hot and cold flow rates if (W_ht <= 0.25) H_ht = x7*W_hf'x8; else H ht = xll*W ht*xl2; end if (W_ct <= 0.1083333) H ct = x9*W ct^xlO; else H__ct = xl3*W_ct*xl4; end % transform applicable variables to a per cell basis W_c = W__ct/N; W_h= W_ht/N; H_c = H_ct/(N*N); H_h = H_ht/(N*N); m = M/(N*N); % evaluate relevants terms to be used in later equations a = l-exp(-H_h/(W_h*C_H)); b » l-exp(-H~c/(W__c*C__C) ) ; gamma- (-W_h*C__H*a-W__c*C__C*b) / (m*C M) ; theta- (W_h*C__H*a) / (m*C_M) ; zeta=(W_c*C_C*b)/ (m*C_M); % state space representation: % X_dot = * AX + BU Y = CX + DU

% creation of the averaging matrix AVE for i-l:N; AVE(l,i)»l/N; end % formation of the A matrix % initialize the A matrix with zeros for i" l:N*N; for j=l:N*N; A(i,j)-0; end end % setup the diagonal 'chunks' for k-l:N; row_index=k*N-(N-1); column_index=k*N-(N-1); for 1«0:N-1; i=row_index+l; j-column__index+l; A(i,j)=gamma;

162

end counter-N-1; for n-0;N-2; for z-1:counter; l=row_lndex+z; j-column_index+n; A{i,j)-zeta*b*(1-b)^(z-1); end row__index-row_index+l ; counter-counter-1; end end % do the rest of the matrix counter-1; for 0 - 2 :N; i-o*N-N; j-0; for p-1:N*(N-counter) i-i+1; j-j+1; A(i, j )-theta*a* (1-a) end counter-counter+1; end

(counter-1) ;

% formation of the B matrix for q-l:N; row_index-q*N-(N-1); counter-0; for r-l:N; i-row_index+counter; B(i,l)-theta*(l-a)*(q-l); B(i,2)-zeta*(1-b)^counter; counter-counter+1; end end % formation of the C matrix counter-N; for y-0:N-l column_index-counter*N-(N-l); row_index-l; for w-0;N-l i-row_index+w; j-column_index+w; C(i,j)-a*(l-a)^y; end counter-counter-1; end C-AVE+C; % formation of the D matrix for x-l:N D(x,l)-(l-a)*N; D(x,2)-0; end D-AVE*D; % setup the input matrix U U(l,l)-T hit; U(2,l)-T]cit; % find out the state state values for X % 0 - AX + BU state-inv(A)* (-B*U); % find out the state-state output Y-C*state+D*U; % equal average the hot-side outputs to get the total % outlet temperature T h out-Y;

(average) hot side

ABCD.m
% forms the A,B,C,D matrices to be used in the state space representation

163

function [A,B,C,D]-ABCD_var(T_HI,T_CI,W_H,W_C,X,Cl,C2,C3,C4,N); % assign the states to the relevant variables % Tm_ij=Tm(i,j)=X((i*N-N)+j),l); for i-l:N; for j" l:N; Tm(i,j)-X((i*N-N)+j,l); end end C_H-0.24; C_C-0.24; M-1; c_m*0,65; m«M/(N*N); % hx core mass on a per cell basis % overall heat transfer coefficients H_H-C1*W_H'^C2; % H_C=C3*W_C*C4; % a-l-exp(-Cl*W_H*C2/(N*W_H*C_H)); % b-l-exp (-C3*W_C^C4/(N*W__C*C_C) ) ; % psi" (-W_H*C__H*a/N-W_C*C_C*b/N) / (m*c_m) ; % theta=W~H*C__H*a/ (N*m*c_m) ; % beta=W_C*C_C*b/(N*m*c_m); % tl-W_H*C_H; % t2-W_C*C C; % t3-- C_H*a/N; % t4-- C_C*b/N; % t5=W_H"'2*N*C_H; % t6-W_C*2*N*C_C; % t 7 - e x p ( N * W _ H * C _ H ) ); % t8-exp(-H_C/(N*W_C*C_C)); % t9-H__H/t5; % tlO-H_C/t6; % tll«-t9*C2+t9; % tl2-- tlO*C4+tlO; % tl3-tl*tll*t7; % tl4-t2*tl2*t8; % tl5-t3+tl3/N; % tl6»t4+tl4/N; % M»m*c_m; % NM=N*m*c_m; % % creation of the averaging matrix AVE for i-l:N AVE(l,i)-l/N; end % formation of the A matrix % initialize the A matrix with zeros for i=l:N*N for j»l:N*N A(i,j)-0; end end % setup the diagonal 'chunks' for k=l:N row_index=k*N-(N-1); column_index=k*N-(N-l); for 1" 0:N-1 i=row_index+l; j=column_index+l; A(i,j)»psi; end counter»N-l; for n=0:N-2 for z»l:counter i=row_index+z; j-column_index+n; A(i,j)=(t2*b*2/NM)*t8*(z-l); end row_index=row_index+l; counter=counter-l; end end

164

% do the rest of the matrix counter-1; for 0 - 2 ;N i-o*N-N; j-0; for p-1:N*(N-counter) i-i+1; j-j+1; A(i,j)-(tl*a*2/NM)*t7*(counter-1); end counter-counter+1; end

% formation of the B matrix % first two columns (wrt T_HI and T_CI) for q-l:N row__index-q*N-(N-1) ; counter-0; for r-l:N i-row_index+counter; B(i,l)-theta*t7*(q-1) ; B(i,2)-beta*(1-b)^counter; counter-counter+1; end end % third column (wrt W__H) for i-l:N B(i,3)-tl5*Tm(l,i)/M+C_H*a*T_HI/NM-tl3*T_HI/NM; % first 'chunk' B31 end for q-2;N row_index-q*N-(N-l); counter-0; for r-l:N i-row_index+counter; FTRST_TERM-tl5*Tm(q,r)/M; inside_term-T_HI; for 2 - 1 :q-1 new_term=t7*inside_term+a*Tm(z,r); inside_term-new_term; end SECOND_TERM-(C_H*a/NM)*new_term; THIRD_TERM«(-tl3/NM)*new_term; first_inside_term=T_HI; second_lnside_term=0; for z-l:q-l
new _term -tll*t7*first_inside_term +t7*second_inside_term -tll*t7*Tm (z,r); first_inside_term =t7*first_insid e_term +a*T m (z,r); ~ second_inside_term =new_term ;

end FOURTH_TERM-(tl*a/NM)*new_term; B(i,3)-FIRST_TERM+SEC0ND_TERM+THIRD_TERM+F0URTH_TERM; counter-counter+1; end end % fourth column for q-l:N row_index-q*N-(N-1); counter-0; i-row_index+counter; B(i,4)-tl6*Tm(q,l)/M+C_C*b*T_CI/NM-tl4*T_CI/NM; % first row in each 'chunk' counter-1; for r-2:N i-row_index+counter; FIRST_TERM=tl6*Tm(q,r)/M; inside_te rm-T_CI; for z-l:r-l new_term=t8*inside_term+b*Tm(q,z); inside term-new term; end SECOND_TERM»(C_C*b/NM)*new term; THIRD TERM-(-tl4/NM)*new term;

165

first_inside_term=T_CI; second_inside__term=»0; for z-l:r-l new_term=tl2*t8*first_inside__term+t8*second_inside_term-tl2*t8*Tm(q, z ) ; first_inside_term=t8*first_inside_term+b*Tm(q,z); second_inside_term=new_term; end FOURTH_TERM= (t2*b/NM) *new__term; B(i,4)=FIRST_TERM+SECOND_TERM+THIRD_TERM+FOURTH_TERM; counter-counter+1; end end

% formation of the C matrix counter-N; for y-0:N-l column_index-counter*N-(N-1) ; row_index-l; for w-0:N-l i-row_index+w; j«column_index+w; C(i,j)=a*t7*y; end counter=counter-l; end C_qriginal=C; C-AVE*C;

% formation of the D matrix % initialize with zeros % initialize the A matrix with zeros for i-l:N for j-l:4 D(i,j)-0; end end % first column for j-l:N D(j,l)-t7^N; end % third column for j-l;N first_inside_term=T_HI; second_inside_term=0; for counter-1:N new_term=tll*t7*first_inside_term+t7*second_inside_term-tll*t7*Tm(counter,j); first_inside_term=t7*first_inside_term+a*Tm(counter,j); second inside term-new term; end D(j,3)=new_term; end D_original-D; D-AVE*D;

FlowSplitm
function[wh,wb]- flowsplit(thi,tho,tm,wt) wh-wt*(thi-tm)/ (thi-tho); wb-wt-wh;

166

REFERENCES
[1] Kutz M., "Temperature Control", John Wiley & Sons, Inc., New York, 1968. [2] Mikles J., Fikar M., "Process Modelling, Identification, and Control I.: Models and Dynamic Characteristics of Continuous Processes", STU Press, Bratislava, Slovak Republic, 2000. [3] Smith C. A., Corripio A. B., "Principles and Practice of Automatic Process Control, 2"** ed.", John Wiley & Sons Inc., New York, 1997. [4] Katayama T., Itoh T., Ogawa M., Yamamoto H.: "Optimal Tracking Control of a Heat Exchanger with Change in Load Condition", Proceedings o f the 29"' Conference on Decision and Control, pp. 1584-1589, Honolulu, Hawai, December 1990. [5] Paruchuri V. P., Rhinehart R. R., "Experimental Demonstration of Nonlinear ModelBased-Control of a Heat Exchanger", Proceedings o f the American Control Conference, pp. 3533-3537, Baltimore, Maryland, 1994. [6] Varga E. 1., Bokor J., Hangos K. M., "Robust Analysis of Potential Large Overshoots in Heat Exchanger Networks", Proceedings o f the American Control Conference, pp. 1422-1426, Baltimore, Maryland, 1994. [7] Rotea M. A., Marchetti J. L., "Integral Control of Heat-Exchanger-Plus-Bypass Systems", Proceedings o f the 1997 IEEE International Conference on Control Applications, pp. 151-155, Hartford, CT, October 5-7, 1997. [8] Forrest S., Johnson M., Grimble M., "LQG Self-Tuning Control of Super-Heated Steam Temperature in Power Generation", Second IEEE Conference on Control Applications, pp. 805-810, Vancouver, B.C., September 13-16, 1993. Orzylowski M., Kaluzniacki T., Rudolf Z., Nowicki G., "Precise Temperature Control for Measurement Purposes", ZEEE, pp. 16-21,1999.

[9]

[10] Mizoguchi M., Onuma H., Ito H., Takami 1., Akasaka N., Fukuda T., "Temperature Control of a Plate Heat Exchanger Using an Observer", SICE, pp. 22-27, Nagoya, July 25-27,2001. [11] Harris C., Kelly K., Wang T., McCandless A., Motakef S., "Fabrication, Modeling and Testing of Micro-Cross-Flow Heat Exchangers", Journal o f Microelectromechanical Systems, Vol. 11, No. 5, December 2002.

167

[12] Zandi B., Lewis H., Lewis J., Severson M., "Simplified Modelling of Complex Compact Heat Exchanger Systems", 2004 IEEE Inter Society Conference on Thermal Phenomena, 2004. [13] Incropera P.P., DeWittD. P., "Fundamentals of Heat and Mass Transfer, 4`''ed.", John Wiley & Sons, New York, 1996. [14] Xia L., De Abreu-Garcia J. A., Hartley T. T., "Modelling and Simulation of a Heat Exchanger", IEEE International Conference on Systems Engineering, (Ohio), pp. 453-456,1991. [15] Roetzel W., Xuan Y., "The Dynamic Behaviour of Heat Exchangers", WIT Press, 1998. [16] Kays W.M., London, A.L., "Compact Heat Exchangers", McGraw-Hill, New York, 1964. [17] Shinskey F.G., "Process Control Systems", McGraw-Hill, New York, 1979. [18] Gonzales Lozano, C. A., "Temperature Control of Solar Air Conditioning Systems", Master of Science Thesis, University of Puerto Rico, 2004. [19] Maschke B. M., Chantre P., "Bond Graph Modeling and Parameter Identification of a Heat Exchanger", ASME Dynamic Systems and Control, Vol. 55-2, pp. 645-652, Chicago, USA, November 7-11 ,1994. [20] Mutambara A. G. O., Al-Haik M. S. Y., "EFK based Parameter Estimation for a Heat Exchanger", Proceedings o f the American Control Conference, pp. 3918-3922, San Diego, California, June 1999. [21] Fazlur Rahman M. H. R., Devanathan R., "Modelling and Dynamic Feedback Linearisation of a Heat Exchanger Model", IEEE Vol. FA-2-5, pp. 1801-1806,1994. [22] Bao G., "Fault- tolerant Flow Sharing Control for Engine Bleed Air System of an Aircraft", Master of Engineering Science Thesis, University of Western Ontario, 2003. [23] Frederick D., Chow J., "Feedback Control Problems using MATLAB and the Control System Toolbox", Brooks/Cole Publishing Company, Pacific Grove, 2000. [24] Hodal, P. and Liu, G., "Bleed Air Temperature Regulation System: Modeling, Simulation and CovXroX," IEEE International Conference on Control Applications, pp. 1003-1008, Toronto, Canada, 2005.

168


