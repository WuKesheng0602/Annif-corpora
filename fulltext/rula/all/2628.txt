DEVELOPMENT OF A SOOT CONCENTRATION ESTIMATOR FOR INDUSTRIAL COMBUSTION APPLICATIONS By Sepehr Bozorgzadeh B.Sc. in Mechanical Engineering, Sharif University of Technology, Tehran, Iran, 2012

A thesis Presented to Ryerson University in partial fulfillment of the requirement for the degree of Master of Applied Science In the Program of Mechanical and Industrial Engineering

Toronto, Ontario, Canada, 2014 Â© (Sepehr Bozorgzadeh) 2014

AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A THESIS
I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required final revisions, as accepted by my examiners.

I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

I understand that my thesis may be made electronically available to the public.

ii

Abstract
DEVELOPMENT OF A SOOT CONCENTRATION ESTIMATOR FOR INDUSTRIAL COMBUSTION APPLICATIONS Sepehr Bozorgzadeh Master of Applied Science Mechanical and Industrial Engineering, 2014 Ryerson University, Toronto, ON, M5B 2K3, Canada

Soot emissions from combustion devices are known to have adverse effects on the environment and human health. Thus, the development of techniques to reduce soot formation and emissions remains an important goal of researchers and industry. This study leverages existing knowledge in soot modelling and soot formation fundamentals to develop a stand-alone, computationally inexpensive soot concentration estimator, to be linked to CFD simulations as a post-processor. The estimator was developed using fluid parcel tracking techniques that can track entire history to which a particle or fluid parcel has been exposed. Preliminary results suggest that the estimator is capable of predicting peak and emitted soot volume fractions in atmospheric pressure flames.

iii

Acknowledgments
Firstly, I would like to thank my supervisor, Dr. Seth B. Dworkin, for providing me with this research opportunity and for sharing his great depth of knowledge and guiding me through my thesis work. I would not have been able to complete this degree without his time, patience, and encouragement. I would also like to thank my colleagues, Ali Khosousi and Armin Veshkini for their time and help during my studies. I should also thank the Faculty of Engineering and Architectural Science at Ryerson University and NSERC for financial support. No words can adequately do justice to thank my parents and my brother, who have always supported me. Without them, I would never have been able to study abroad.

iv

Table of Contents

AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A THESIS ................................. ii Abstract ........................................................................................................................................................ iii Acknowledgments........................................................................................................................................ iv List of figures .............................................................................................................................................. vii List of tables................................................................................................................................................. ix Nomenclature ................................................................................................................................................ x 1. Introduction ............................................................................................................................................... 1 1.1. Motivation .......................................................................................................................................... 1 1.2 Objectives ........................................................................................................................................... 2 1.3 Outline of the thesis ............................................................................................................................ 3 2. Background and literature review ............................................................................................................. 4 2.1 Soot formation .................................................................................................................................... 4 2.1.1 Soot modeling ............................................................................................................................ 11 2.1.2 Laminar coflow diffusion flames ............................................................................................... 13 2.2 Temperature effect on soot formation ............................................................................................... 16 2.3 Mixture fraction and soot formation ................................................................................................. 18 3. Soot prediction model development ....................................................................................................... 21 3.1 Theory and methodology background .............................................................................................. 21 3.2 Lagrangian particle tracking ............................................................................................................. 23 3.3 Generating Polynomial Functions ..................................................................................................... 25 3.3.1 Generating 2D functions ............................................................................................................ 27 3.3.2 Generating 3D functions ............................................................................................................ 27 3.3.3 Generating 4D and 5D functions ............................................................................................... 29 3.4 Generating tables .......................................................................................................................... 31 3.4.1 Generating the 2D Table ............................................................................................................ 31 3.4.2 Generating the 3D Table ............................................................................................................ 35 3.4.3 Generating the 4D table ............................................................................................................. 36 4. Result and discussion .............................................................................................................................. 39 4.1. Use of polynomial functions ............................................................................................................ 39 v

4.1.1 3D functions ............................................................................................................................... 40 4.1.2 4D functions ............................................................................................................................... 43 4.1.3 5D functions ............................................................................................................................... 44 4.2 Use of tables...................................................................................................................................... 50 4.2.1 Interpolation ............................................................................................................................... 50 4.2.2 Using 3D tables .......................................................................................................................... 53 4.2.3 Using 4D tables .......................................................................................................................... 57 5. Conclusion and Future work ................................................................................................................... 66 6. References ............................................................................................................................................... 69 7. Appendices.............................................................................................................................................. 74 7.1 Appendix A ....................................................................................................................................... 74 7.1 Appendix B ....................................................................................................................................... 75 7.2 Appendix C ........................................................................................................................................ 76 7.3. Appendix D ...................................................................................................................................... 78

vi

List of figures
Figure Figure 2.1: TEM photographs of soot aggregates. (Figure reproduced from [10].) Figure 2.2: A rough picture for soot formation in premixed flames. (Figure reproduced from [16].) Figure 2.3: Formation of 2-ringed species through HACA sequence. (Image reproduced from [18].) Figure 2.4: Soot particles formation pathway. (Figure reproduced from [33].)
9 10 14 14 17 8

Page
6 7

Figure 2.5: Schematic of the burner configuration. (Figure reproduced from [28].) Figure 2.6: Laminar coflow C2H4 /air diffusion flame of Santoro et al. [29]. Figure 2.7: Comparison between Primary particle diameter of large aggregates and predicted soot concentration from simulation. (The figure reproduced from [37].) Figure 2.8: Changing of the soot volume fraction (predicted at h = 50 mm) with temperature. (The figure reproduced from [37].) Figure 3.1: Represents the temperature contour in a co-flow diffusion flame. Figure 3.2: Curve fitting application in MATLAB [49].
26

18

24 28 30

Figure 3.3: LAB Fit first page, the software was used for generating 4D and 5D functions [50]. Figure 3.4: Shows the process of generating libraries in two dimensions. Figure 4.1: Comparison of numerical (present mechanism) and experimental (Santoro flame) along the annular pathline of maximum soot concentration. (The figure reproduced from [7].) Figure 4.2: Projection of 3D graph of fv vs. Th, C2H2_h. The data comes from Ethylene-air Santoro flame. Figure 4.3: The fitted surface to the Santoro flame's data. Figure 4.4: A comparison of the predictions from the 5D function that using data from Santoro flame with computed fv along the streamline of maximum soot. Figure 4.5: A comparison of the predictions from the 5D function that is generated from Santoro flame data with computed fv along the streamline of maximum soot. Figure 4.6: A comparison of the predictions from the 5D function that is generated from
vii

33 39

41

42 45

47

49

Santoro flame CFD data with computed fv along the streamline of maximum soot. Figure 4.7: The process of 3D interpolation. Figure 4.8: 3D table generated from Ethylene-air Santoro flame data. Figure 4.9: 2D projections of the 3D table that is generated from 16 streamlines of Santoro flame data. Figure 4.10: A projection of a 3D table (fv vs. Th, MFh), using Santoro and Smooke flames. Figure 4.11: A projection of a 4D table (fv vs. Th, MFh, O2_h), using Santoro and Smooke flames. Figure 4.12: fv versus Th along the pathline of maximum soot in the Ethylene-air Santoro flame. Figure 4.13: fv versus Th, along the centerline in the Ethylene-air Santoro flame. Figure 4.14: fv versus Th, along the pathline of maximum soot. Figure 4.15: fv versus Th, along centerline of Santoro flame. Figure 4.16: fv versus Th, along maximum streamline of Smyth flame.
60 62 63 64 59 58 56 52 54 55

viii

List of tables
Table Table 3.1: Data that is used for making an example. Table 3.2: A simple 2D table Table 3.3: 2D table (fv=G (Th)) Page 32 32 35

ix

Nomenclature

English letter symbols fv MFh O2_h C2H2_h C6H6_h A1 A1h PAH HACA Th mc mh mmix OHh Soot concentration Integrated mixture fraction history Integrated oxygen history Integrated acetylene history Integrated benzyne history Benzyn Integrated benzyne history polycyclic aromatic hydrocarbons H-abstraction-C2H2-addition Integrated temperature history Carbon molecular mass Hydrogen molecular mass Molecular mass of the mixture Integrated hydroxide history

x

1. Introduction
As the transportation industry continues to expand and concerns over the environment and climate change continue to rise, emissions of combustion-generated soot (black carbon particulate) is a growing concern. Soot emissions have been identified as significantly contributing to Arctic thawing. In addition the presence of these particles in the atmosphere is linked to various respiratory diseases including emphysema. Thus, the development of techniques to reduce soot formation and emissions remains an important goal of researchers and industry.

1.1. Motivation
Combustion processes have a key role in burners, power production devices, and the transportation industry. The emission of combustion-generated black carbon particulate (soot) is a serious threat to human health and is a growing concern. Populations living in big cities show higher rates of lung and heart diseases because of high concentrations of pollutants that contain compounds such as nitrogen oxides, carbon monoxide, and particles (soot) in the atmosphere [1]. Moreover, both small and large soot particles can cause significant problems: small soot particles in the atmosphere absorb sunlight and make the air warm, while larger and darker particles, which fall to the ground, are capable of melting snow and ice, since dark particles absorb sunlight [2]. Industries and combustion device designers have to reduce soot particles generated from combustion because of environmental and health issues. Therefore, searching for and developing techniques to reduce soot formation and emissions has become an important concern for researchers and industry. In the design of industrial combustion devices, such as engines, detailed numerical modelling and computational Fluid Dynamics (CFD) simulations have become commonplace. Current capabilities allow for simulation of the chemical reactions, ignition, and burning of fuels, inside a realistic engine geometry. Data from these simulations aid in the engine design, construction, and improvement processes. However, the inclusion of soot formation within these
1

simulations is challenging, and of such high computational cost that in most cases, accurate soot modelling is intractable. This intractability is a major problem for Westport Innovations Inc., in Vancouver, Canada, for example, who produce natural gas/diesel hybrid truck engines. They use CFD as a design tool, but have so far been unable to incorporate a viable soot model in their simulations. As a response to increasing concern for the environment and public health, stricter soot emission regulations are expected in Canada in the coming years. Therefore, it is a major objective of the combustion industry in Canada to develop novel numerical techniques to include accurate soot formation modelling in these simulations.

1.2 Objectives
This study seeks to leverage existing knowledge in soot modelling and soot formation fundamentals to develop a stand-alone, computationally inexpensive soot concentration estimator, to be linked to CFD simulations as a post-processor. The estimator will be developed using fluid parcel tracking techniques that can track the size of a soot particle based on its history. Such a tool will allow engineers in industry to further leverage their existing CFD simulation data to estimate the soot emissions that would be associated with any particular engine or burner design, thereby leading to lower-emitting devices. Although CFD simulations conducted in industry often involve multiphysics in complex geometrical configurations of high pressure engines, the present work focuses on laboratory scale flames. This study will constitute the preliminary steps in laying the foundation for a new numerical technique that can be enhanced and expanded to practical applications after it has reached sufficient maturity. The main goal of this project is designing and programming a soot concentration estimator which predicts the maximum amount of soot concentration and also amount of emitted soot in atmospheric pressure laminar flames.

2

1.3 Outline of the thesis

In this thesis chapter two talks about the literature review and the background that is related to this study. For a century, combustion has been one of the most significant areas of research in mechanical engineering. Therefore, there exists a large body of numerical and experimental studies; the most relevant of which are reviewed in the present work. Chapter three explains the theory behind this study and also the methodology that is used for developing the new numerical techniques. The strategy is chosen based on the literature and our understanding of soot formation and oxidation. In Chapter four, detailed results of implementing and testing a variety of proposed methodologies are presented, and finally, the overall conclusions of the thesis are presented in Chapter 5.

3

2. Background and literature review
In order to understand how best to approach the generation of a soot prediction algorithm, it is important to contextualize soot formation in terms of the dominant effects on particle growth. These effects include temperature and mixture fraction, which are discussed in the following sections.

2.1 Soot formation
Soot formation is considered to be an extremely complex phenomenon that includes thermodynamics, particle dynamics, heat transfer, and multiphase flow. In order to understand this complexity, it is necessary to consider the progress of numerical modeling of combustion and soot formation that has been made in recent years [3-7]. For designing industrial combustion devices, different numerical modeling such as Computational Fluid Dynamics (CFD) simulations has typically been utilized. The available models are capable of simulating chemical reactions, the burning of fuels, ignition and other processes in a real engine. Combustion device designers can use the data from simulations to make product performance more efficient. However, studying and simulating soot formation has high computational cost, and is considered to be quite challenging; as a result, it is neglected in most industrial device simulations. Yet, as mentioned, soot has a significant role in polluting air [3, 7, and 32]. Due to the growing environmental and climate change concerns, as well as recent emissions standards and regulations, there is a need to find better ways to include soot formation in these simulations. Soot formation has been one of the most important issues related to combustion devices. Therefore, it has been widely studied for many years. Although studying soot formation always has been important, because of the complexity of its modeling, it is not understood well. Studies on soot formation processes are mostly focused on investigating the relationship of hydrocarbon fuels to soot, the reason behind this relation, and how it effects soot production in different combustion process. The amount of soot particles formed depends on the combustion process,
4

temperature, pressure and also the species which exist in the process. Furthermore, the final mass of particles emitted from the system could vary based on the particle after-burning process and oxidation, which depends on the combustion process [9]. Soot formation begins with particle inception. Regardless of the type of the flame, fuel goes through pure or oxidative pyrolysis. For non-aromatic fuels, the precursors undergo cyclization, which causes aromatic rings to be created. Aromatic rings are hydrocarbons that contain benzene, or some other ring structure such as pyridine and Pyrazine. In the majority of cases, the elements that form the large aromatic structures are oxidized at the same time [9]. As hydrocarbons undergo pyrolysis, they mostly produce smaller hydrocarbons, particularly acetylene (C2H2). Formation of the first aromatic species form aliphatic hydrocarbons is the first step in soot formation. The additions of aromatic species along with smaller alkyl species, which form larger polycyclic aromatic hydrocarbons (PAHs), allow other aromatic species to grow. The smallest identifiable soot particle has the diameter of the order of a nanometer and the mass of around 1000 amu, which is produced by continuing growth of the PAH [9]. Williams and coworkers [10-12] have researched the structure of soot using thermophoretic and molecular beam methods. They showed that tiny spherical primary particles form soot. All of the particles have approximately the same diameter and are collected into aggregated form. Figure 2.1 shows that the soot aggregates consist of spherical soot particles and they all have nearly constant diameters. The figure also illustrates that each aggregate consists of different numbers of primary particles.

5

From a premixed flame

From a diffusion flame

Figure 2.1: TEM photographs of soot aggregates. (Figure reproduced from [10].)

One area of soot formation that is well understood is the soot formation pathway. Palmer and Cullis [13], Haynes and Wagner [14], Glassman [8], Kennedy [9], and Frenklach [15], have done detailed reviews on soot formation. A variety of complex and concurrent chemical and physical processes are involved in soot formation. Soot formation begins with the pyrolysis of the fuel and formation of soot precursors (mostly acetylene and benzene). In theory, pyrolysis as a chemical process is generally defined by a gas-phase chemical kinetic mechanism that determines species inputs for the soot formation processes. A rough illustration of the soot formation pathway is presented in figure 2.2:

6

Figure 2.2: A rough picture for soot formation in premixed flames. (Figure reproduced from [16].) The precursor species keep growing from gas phase collisions, and gradually, this growth leads to soot nucleation, which forms emerging soot particles. Among all soot formation mechanisms, nucleation is among the least understood. Several principal proposals have been made to interpret the general nature of soot particle nucleation. The common idea in [17], supported by other studies [18, 19], is that soot particles form via PAH collisions. The PAH soot formation pathway, the formation, and growth of aromatic species link soot formation to the main combustion zone gas-phase chemistry. After forming the first aromatic ring, it can turn into larger multi-ringed aromatic species (i.e., PAHs) via the H-abstraction-C2H2-addition (HACA) reaction sequence [18] along with ring-ring condensation [19]. These pathways are illustrated in Figure 2.3:

7

Figure 2.3: Formation of 2-ringed species through HACA sequence. (Image reproduced from [18].)

Large PAH species come from the growth of aromatics. Formation of the more stable molecular transitional phenulacetylence happens in the dominant route (Fig. 2.3). In the minor route, all the reactive transitions are radicals and the molecular species produced are relatively unreactive side products. For some sizes, the collision of PAH species leads them to `stick' to each other and form PAH dimers. Subsequently, it is possible that PAH molecules collide with dimers and form PAH trimmers and so on. Concurrently, each PAH species can grow in size by means of molecular chemical growth reactions. Due to the chemical activity of the soot surface, soot can grow in size under heterogeneous surface reactions after nucleation. With most examined conditions so far, an abundance of acetylene has been observed when surface growth happens [15, 18]. In the soot surface growth pathway suggested by Frenklach et al. [15, 18], the H atom from the C-H bond is

8

abstracted by the reaction between radical hydrogen with the soot surface (i.e., the C-H bond). This reaction causes the formation of an active surface site. C2H2 molecules can react with the aforementioned active surface site and increase the size, mass, and carbon content of a particle. Considering another suggested soot growth pathway, the collision and the subsequent compression of PAH species on soot surfaces causes PAH-soot surface condensation to occur [20]. Even though there is not a consensus among researchers about which pathway is governing for soot growth. Depending on system conditions, HACA surface growth or PAH condensation can be the main mechanism for predicting soot. Brownian motion enables soot particles to collide with each other and form larger particles. When a PAH-PAH collision occurs, there are three possible outcomes, bouncing off (nothing), coalescence, or coagulation. When the particles are more solid, they become similar to two golf balls after they stick together. This phenomenon is called coagulation. Coagulation does not modify the total mass of soot particles, but it affects soot number density, soot particle size, and generally soot morphology. Thus it has a crucial role in the forming process of soot particles. Depending on soot size characteristics, particle constituents, ambient temperature and residence time, thermal deforming may happen after soot particle collisions. The restructuring rate may be different for different particles with various size and age. Therefore, for young particles, soot particle collision may lead to a coalescence phenomenon [21], in which the two particles become one particle and combine with each other in a liquid-like manner. Generally, when there is a state of moderate-restructuring rate, the particles which collide with each other are more likely to combine together forming a neck region that bridges them together. Although a lot of studies have been conducted on particle restructuring, this area is not yet fully understood. There are a lot of unanswered question about the kinetics of soot particle restructuring, such as dependence of the phenomenon on particle material property and size characteristics. There is not a strong coagulation model that can properly interpret particle coalescence, aggregation, and neck formation simultaneously. For some system conditions, coagulation has been assumed to follow an implicit assumption that every single collision can lead the particles to `stick' to each other and this phenomenon is irreversible. Recently, Kellerer et al. [22], and D'Alessio et al. [23], suggested that with flame temperature conditions, soot coagulation might not be 100% effective, i.e., colliding soot particles may not always be able to stick together because of the so-called "thermal rebound effect" [23]. Figure 2.4 shows the soot particle formation pathway with
9

different processes. In the first step, fuel gets decomposed into small molecules that form aromatics. Nucleation happens, and aromatics combine to form 3D structures. Structures grow to spherules via surface reactions and condensation. The spherical products coagulate into soot molecules.

Figure 2.4: Soot particles formation pathway. (Figure reproduced from [33].)

Coagulation and surface growth lead soot particles to grow to larger sizes. From the point at which soot starts to grow in each flame, at some point in time and space, soot particles enter a region where oxidative species exist. Soot particles are oxidized and become gaseous products in this region. While some systems emit soot, after complete soot oxidation, no soot is present in the flame. Because of the abundance and reactivity of O2 and OH species, they are considered to have the most oxidizing effect among all the species [24]. O2 has the dominant role in fuel-lean regions, while OH is has most important role in fuel-rich regions. Aggregate structural variation can be caused by soot oxidation. According to experimental studies, soot aggregates can split in the oxidation region [24]. The soot aggregate
10

chain fragments at some certain points, where the oxidation-included soot surface regression weakens the bond strength holding established primary particles together. This phenomenon can play an important role in the forming pathway of soot particles in the oxidation region. Although this oxidation-driven soot aggregate fragmentation has been detected, no modeling of it in a flame is available yet. Moreover, oxidation-driven fragmentation has little effect on soot volume fraction and soot yield, so that modelling has received little attention as it is not necessary to obtain accurate results in many cases when global characterization, such as soot emission, is desired.

2.1.1 Soot modeling

One of the most common approaches to studying soot is the development of modeling capabilities of soot formation and oxidation. Fundamentally, modeling enables researchers to understand soot formation and oxidation mechanisms better. In industry, combustion device designers are looking for soot formation and oxidation models that enable them to improve the combustion devices' efficiency and reduce emissions. This process is achieved through developing an understanding of the conditions that lead to soot formation and then tuning engine or device conditions to avoid such situations. They try to enhance thermal device performance by improving radiative heat transfer or by reducing the amount of soot emitting from their devices in order to meet more particular environmental standards. Furthermore, flame dynamics simulation programs can better predict fire propagation if they use soot formation and oxidation models [2, 8]. Soot models have greatly improved in the past years. According to a study by Kennedy [9], soot models can be divided into three classifications: empirical soot models, semi-empirical soot models, and detailed soot models. Empirical soot models come from experimental phenomenological correlations of soot construction rates with combustion conditions such as pressure and temperature. These kinds of models are easily understandable, easy for implementation, and they do not require much computational cost. The low computational cost requirement is the main reason that this kind of modeling is so common in the literature related to gas turbines and diesel engines. More complex soot models would render these simulations
11

intractable. Although the application of the aforementioned models is common, the loss of comprehensive understanding into the soot formation processes is its weakness. In the next step of soot formation/oxidation modeling, semi-empirical soot models are purported to incorporate physical, chemical aspects, and experimental data of the phenomenon. Fairweather et al. [25] proposed a two-equation soot model, which has been used widely. This model neglects the aggregate structure and polydispersity of soot particles; thus, although the semi-empirical soot model can give some insight into soot formation mechanisms, it is not powerful enough to deliver detailed soot properties such as soot aggregate structure and size distribution. Another weakness of this model type is that it does not resolve combustion chemistry into details properly. Therefore, for studying the effects of aromatic species on soot, researchers cannot use this type of model, and since the aromatic species themselves are toxic and thus of great research importance, researchers often seek other models. Various approaches have been developed for modeling soot formation under simultaneous nucleation, coagulation, oxidation and surface growth processes. There are some methods in the literature that represent these approaches including the method of moments [4], the sectional method [26], and the stochastic method [27]. Investigating the mean properties and the size distribution of soot particles can be achieved using a sectional aerosol dynamics model. The sectional models that have been used are usually not capable enough to model soot aggregate structure, since they solve for only one variable per section such as soot mole fraction. Park et al. [27] proposed an advanced sectional model that solves two equations (number densities of primary particles and aggregates) per section, in order to model the evolution and coagulation of the fractal-like soot aggregates. Soot formation in plug flow reactors [27] and shock tubes [32] has been modeled with high accuracy using the aforementioned model. There are usually some steps which should be followed for modeling soot formation and oxidation. The first component of an accurate model is the prediction of the flow field by solving the Navier-Stokes equations [34]. Another step that should be considered is modeling of chemical reactions using gas-phase chemistry equations [35]. Solving soot-gas chemistry and soot aerosol dynamics equations is a part of the modeling of soot structure as well as soot nucleation and surface growth/oxidation reactions [35]. One of the components is modeling of

12

thermal radiation by solving radiative heat transfer [17]. During past few years, almost all researchers have used these steps in order to model soot formation and oxidation [7, 9].

2.1.2 Laminar coflow diffusion flames

From all the flames, coflow diffusion flames have been one of the primary focuses in our research group. Thus most of the CFD modeling that is used is based on coflow diffusion flames. Laminar coflow diffusion flames are systems for which there is an abundance of experimental data that can be accurately modelled using CFD; therefore, they present an appropriate testing bed for new model development. Steady axisymmetric laminar coflow diffusion flames, among different combustion configurations, have a reasonably simple flow field and hence are pertinent to study both numerically and experimentally. Moreover, a platform for studying the evolution of soot aggregates and the relations between soot formation and gasphase chemistry in multi-dimensional scales can be provided by studying these flames. This kind of flame provides opportunities to investigate both soot formation and oxidation processes by encompassing regions from soot nucleation and also soot oxidation. Furthermore, threedimensional measurements of flame and soot quantities can be facilitated since both soot formation and oxidation in these flames cover a wide region. The aforementioned reasons have motivated researchers to pay attention to this type of flame. Santoro et al. [28] were pioneers in investigating the non-smoking laminar coflow C2H4/air diffusion flame that has been extensively studied by many researchers subsequently [3, 9, 15, and 24]. Figure 2.5 shows a schematic of the burner for this type of experiment:

13

Figure 2.5: Schematic of the burner configuration. (Figure reproduced from [29].)

Investigating this flame from a soot particle structure point of view has provided comprehensive measurements. Soot researchers and modelers can use these experiments to test the accuracy of their soot aggregate formation models and to obtain insights into the soot aggregate formation phenomenon. The structure of the fuel passage allows fuel to have a laminar smooth exit flow. A series of screens was used in the air passage with a section filled with glass beads. In order to further smooth the air flow, a ceramic honeycomb section was used in the final section of the air passage. Santoro et al. [28] have used a steady laminar coflow diffusion flame in their experiments. Results from the experiments enable people to learn about soot evolution zones and soot aggregate morphological formation in the Santoro et al. [28] flame. Figure 2.6 shows different zones and evolution areas in the flame:

14

Figure 2.6: Laminar coflow C2H4 /air diffusion flame of Santoro et al. [28]

From Figure 2.6 it can be seen that soot formation/oxidation occurs in two main regions. Nucleation for soot particles occurs in the lower section of the flame. As soot particles move to upper sections, coagulation, surface growth, and condensation occur for the soot particles to grow. These phenomena lead soot particles to obtain an aggregated shape. Subsequently, the soot particles enter the next level of the flame and get oxidized. In these kinds of flames, no soot can be found after oxidation, as it is completely oxidized. If some soot remains after oxidation, it will continue existing out of the flame [3].

15

2.2 Temperature effect on soot formation
Temperature is one of the most important parameters that affect soot formation. Ciajolo et al. [36] showed that temperature effects on soot formation in rich combustion has usually been studied by considering the compositional changes of the burned gases that contain carbon and oxygen and also temperature changes in laminar, premixed flames. Various parameters change the formation of soot particles, such as temperature, pressure, oxygenated additives, and fuel type. Temperature has a more significant role than the other parameters. Graham [38] realized that soot volume fraction displays a bell-shaped behavior as a function of temperature when aromatic fuels undergo pyrolysis in shock tubes. Similar phenomenon was observed by Frecklach et al. [3] for non-aromatic fuels. At low temperatures, soot volume fraction increases as the temperature rises; at higher temperatures, the soot volume fraction decreases as the temperature decreases. The maximum value of soot concentration varies over various configurations and different types of fuels [37]. The fluctuation that soot concentration shows by changing temperature makes it clear that temperature changes should be considered in studies regarding soot concentration. Zhao et al. [39] realized that the soot particles that are formed from low temperature flames express a small volumetric carbon to hydrogen ratio compared to typical PAH molecules found in flames. Harris and Weiner [40] measured the carbon to hydrogen ratio in flames with higher temperatures. They realized that the particles with higher residence times in the flame became more carbonized (larger C/H ratio). They also measured the carbon-to-hydrogen ratio of soot particles in turbulent flames. Figure 2.7 shows a comparison between predicted and measured soot volume fraction. It is clear that the soot volume fraction decreases as temperature increases. A soot model used by Blanquart and Pitch [37] was able to predict the decrease of soot volume fraction for different flames with good precision. This behavior was in agreement with the bell-shaped behavior of the soot volume fraction with temperature.

16

Figure 2.7: Primary particle diameter of large aggregates at right, soot volume fraction at left solid line: prediction from simulations; symbols: from experiment with different measurement procedure, i.e., gravimetric sampling, laser extinction. (The figure reproduced from [37].)

Blanquart and Pitch [37] also analyzed the effect of the temperature on soot volume fraction by changing the burner exit velocity. A comparison between predicted soot volume fraction at different temperatures for h=50 mm above the burner surface and at h=10 mm with experimental data is shown in figure 2.8 Since the curve of the graph which shows soot volume fraction versus temperature is bell-shaped, the location of the pick of the curve was estimated very well.

17

Figure 2.8: Changing of the soot volume fraction (predicted at h = 50 mm) with temperature. Solid line: predicted, symbols: experiment. (The figure reproduced from [37].)

According to the aforementioned studies [37] and bell shaped behavior of soot volume fraction graph versus temperature, considering temperature in modeling and studies related to soot formation is necessary. Therefore, in our study temperature is considered as one of the variables that are used for soot volume fraction prediction.

2.3 Mixture fraction and soot formation
Mixture fraction is one of the most important variables that can be considered in studying soot formation. Mixture fraction (MF) occurs when a single inlet stream of pure fuel flows together with a single stream of pure oxidizer, leading to a single product, as in the following equation:

18

MF =

=

[

]

(2.1)

Where mc and mh are the mass of carbon and hydrogen in the mixture and mmix is the total mass of the mixture. This conserved scalar is useful in dealing with diffusion flames where the fuel and oxidizer streams are initially separated [41]. Mixture fraction can be one of the most important parameters that affect soot formation. Y. Xin et al. showed that mixture fraction has a significant role in determining the heat transfer release rate [42]. The mixing process can also be shown by mixture fraction [43]. Using mixture fraction enables us to omit system dependencies and can assist in a general physicochemical understanding of the flame structure [44]. Xia et al. [45] have investigated the flame and soot structure of counter flow diffusion flames by considering C2H4 and C3H8 and interpreting C/O ratio space as a function of mixture fraction (stoichiometric). Their results reveal that a pure and direct understanding of how the structure is affected by mixture fraction can be realized in C/O ratio space. The reason is that unlike physical or mixture fraction space, stoichiometric mixture fraction does not affect the flame location. The numerical results have also proven that C/O ratio space is a fundamental variable in the sense that, for a specified fuel, mixture fraction and strain do not affect the flame zones and critical reactions [45]. Diffusion flames can be interpreted in one of the physical spaces or mixture fraction spaces. Although the physical space is easier to scale, it is not appropriate for a general understanding of flame processes such as soot inception. The main reason is that the scale is dependent on system parameters, configuration and boundary condition [45]. Composition at flame boundaries changes the flame structure in mixture fraction space. Mixture fraction can be changed by varying fuel or oxygen mass fraction at the boundary [45]. Xia et al. [45] and others showed that mixture fraction (Zst) can inhibit or even eliminate soot formation in non-premixed systems. At high flame temperature and low strain rates the same phenomena can be seen [46]. Therefore, one of the parameters that reflect the effect of fuel changes is mixture fraction. Bisetti et al. [47] showed that since soot mostly forms on the rich side of the flame, soot moves relative to curved mixture fraction iso-surfaces because of differential diffusion interactions between the gas phase and soot. Soot growth and also oxidation rates vary by
19

changing temperature and mixture fraction composition. Local mixture fraction not only provides limited information related to quantities such as soot concentration and number of densities, it also has the main role in controlling the nucleation, oxidation rates, and condensation. The reason is that soot differential diffusion effects among soot and gas-phase species cause soot to experience significant motion in mixture fraction space. For instance, in a candle flame, soot moves towards the flame sheet where it gets oxidized due to differential diffusion. The process has the same effect on soot burnout in diesel engines and aircraft engine combustors. Particle nucleation can get really well localized in mixture fraction space during the simulation. The strong dependence of PAH to the local dissipation rate makes nucleation rates a function of both mixture fraction and the scalar dissipation rate [47]. In this section, some of the parameters that have a significant role in soot formation and oxidation have been discussed. In the following sections, the theory and methodology that this study is done based on, can be found.

20

3. Soot prediction model development
Since the main goal of this study is designing and generating a soot concentration estimator without using additional CFD modeling, choosing the appropriate strategy and methods which provide a tool of low computational cost and high accuracy is the primary focus. The most accurate answer with the lowest amount of computation is desirable. The following sections describe the general theory behind the estimator's development and the associated methodology.

3.1 Theory and methodology background
There are two different methods for describing liquid and air flow: the Lagrangian approach and the Eulerian approach. The Lagrangian approach follows a particle as it moves through space with time. Each particle moves on a particle pathline and this approach can be thought of as from the point of view of riding on the particle. The Eulerian approach provides an observation of the entire flow instantly. In this approach, from a mathematical point of view, fluid flow is described via a coordinate system which can be located anywhere in space. Therefore, the Eulerian approach mostly captures the data from the whole fluid at a certain time, and can be thought of as viewing the fluid or particles that flow through a certain space, from the point of view of that space [34]. Partial differential equations (PDEs) in fluid mechanics can be solved using various discretization methods. Basically, the discretization methods work based on the Eulerian approach explained above. The finite volume method (FVM) expresses the conservation of quantities (energy, pressure, etc.) in a system of partial differential equations. FVM can be used to approximate PDEs which can be different in their mathematical characterization (elliptic, hyperbolic, and parabolic), in various fields such as fluid mechanics, chemistry, dynamic reliability, etc. The main function of discretization methods is that they relate partial derivatives of unknown fields, such as pressure, temperature, concentration, or molar fraction, to variables such as space, and time. In FVM, a mesh is constructed that resides in various sections of the

21

domain where the space variables exist. Each element of the mesh is called a control volume. A balance equation can be obtained from the integration of the PDE over each control volume. Then, the balance equation is discretized with respect to a set of discrete unknowns. In the present work, combustion flow field solutions generated using FVM from an Eulerian viewpoint are processed using Lagrangian particle tracking. In this way, the pathline, history, and local conditions to which a soot particle is exposed can be numerically tracked, processed, and analyzed. One flame from Santoro et al., [28] known hereafter as the 'Santoro flame', and five flames from Smooke et al. [29] with different fuel dilution ratios, known hereafter as the 'Smooke flames' (32, 40, 60, 80, and 82 percent), are used in generating the libraries and functions. The details on each flame are as follows: Santoro flame; the fuel that is used in this flame is Ethylene. The flame that was used in Santoro's experiment is a co-flow laminar diffusion flame that operates in atmospheric pressure. The flame is nonsmoking and air is used as an oxidizer, the fuel flow rate is 3.85 cm 3/s, the fuel velocity is 3.98 cm/s, the air flow rate is 713.3 cm3/s, the air velocity is 8.90 cm/s. Experimental data is available for different soot characteristics for this flame (primary particle size, soot volume fraction, soot aggregate number density, residence time of the particles along their pathline, species concentration, local conditions such as temperature and pressure). The dimensions of the burner that Santoro used is as follows (figure 2.5): the flame burner has two concentric brass tubes of 101.6 mm and 11.1 mm. The fuel flows through the central passage and the air goes through the outer tube. The fuel tube is 3 mm longer than the exit plane of the air tube. Also a chimney, made of a brass cylinder, with a 405 mm length was used to shield the flame from laboratory air currents. Smooke flames; the fuel that is used in these flames is ethylene with different dilution ratios of nitrogen (32, 40, 60, 80, and 82 percent). The flame that was used in Smooke's experiment is a co-flow laminar diffusion flame that operates in atmospheric pressure. The flame is nonsmoking and air operates as the oxidizer. The fuel flow rate is 0.044 cm3/s, fuel velocity is 35 cm/s (coldflow velocity), the air flow rate is 687.16 cm3/s, and the air velocity is 35 cm/s. The dimensions of the burner that Smooke used are as follows (figure 2.5): the flame burner has vertical brass

22

tubes of 4 mm and 50 mm diameters, with thickness of 0.38 mm. The fuel flows through the central passage and the air goes through the outer tube.

3.2 Lagrangian particle tracking

Our research group has been using the Eularian approach with the aforementioned discretization methods to predict important local variables such as particles and fluid velocities, pressure, temperature, and species concentrations in flames [30]. Using the Eularian approach, group members and their collaborators have developed a code that models soot formation in different flames [30, 31]. Our research group has simulated various detailed data sets, which are validated against experimental data, and our understanding of soot formation forms the basis of the estimator generation. Furthermore, the data sets from the detailed simulations are used as a basis for the present calculations. Based on the simulations that our research group have done, we propose a Lagrangian analysis using an Eularian framework. Based on the literature [48], particle mass in a flame is a function of local conditions and past experienced conditions, species mole fraction, furthermore the residence time that each particle experiences. The pathline that soot particles followed can be affected by the process of thermophoresis which causes them to diffuse out of one streamline and into another Figure 3.1 shows the contours of temperature in a co-flow diffusion flame [28] and the black line represents one of the pathline that soot particles follow:

23

Figure 3.1: Represents the temperature contour in a co-flow diffusion flame. The black curve shows a streamline.

The formation and destruction of soot particles is a function of different variables that can be shown in equation 3.1: ) ) ) ) ) (3.1)

T(t) is the temperature experienced by the soot particle at any point in time (t), yi(t) is the mole fraction of species at the certain time (t), fv(t) is soot volume fraction (which generally can represent soot mass or soot concentration) at the certain time t, and P(t) is the local pressure of the gas at the certain time. By considering particle histories instead of species mole fraction by themselves or their local conditions, the effect of residence time of the particles is considered as well. According to Veshkini et al. [31], surface character is a much stronger function of temperature history, than of a local temperature and the residence time has a crucial role in soot concentration.
24

Theoretically, the formation or destruction of a soot particle is determined entirely by its history from inception to oxidation. Aggregated or summed history is one method of quantifying a particle's history. For example, integrated temperature history can be an indicator for relative heat transfer into the particle. The aggregated history of each variable can be expressed by the integral of each of them with respect to residence time. The mathematical definition of integrated temperature and mixture fraction histories can be found in the following equations: (3.2) 

(3.3) 

In the present work, these integrals will be numerically evaluated by the post processor. The species concentration and also temperature of the particles can be calculated along streamlines. Then, theses integrals will be calculated using the residence of the particles. Using a soot estimator that works with species histories and local conditions instead of CFD modeling means that some species which are less important will be neglected. Although the more variables that are considered, the more accurate the prediction and estimation, it is not possible that all the species that affect soot formation and oxidation be considered. In the following sections, the methods that are used for generating a soot concentration estimator will be discussed.

3.3 Generating Polynomial Functions

In order to predict soot concentration based on the species that have a crucial role on soot formation, generating polynomial functions using the results of detailed CFD simulations is proposed. The functions will be used to determine soot concentration from integrated variable histories. Based on the literature, the important variables are local conditions (T, P), species concentration, mixture fraction (carbon indicator), and residence time (t) [48]. A well-validated
25

fully-coupled, detailed code [7] will be used to generate and calibrate a database of soot formation correlations. The process of generating each function variable is as following: when the particles move along their pathline (Figure 3.1), they can be tracked using the postprocessor that our group is using and was explained before. Based on the local velocity inside each control volume through which a soot particle passes, the size of that control volume, the product of the residence time and local variable being considered, gets summed into its numerically integrated value. From all the species histories, the ones that are considered to have the more significant roles in soot concentration are used as variables in the function. Soot volume fraction can be shown by temperature history (thought of as a twodimensional correlation or, alternatively, a line on an xy-graph); however, if soot volume fraction requires temperature and C2H2 histories, than it can be thought of as a surface on a 3D graph; or, if it requires temperature, C2H2 and OH, than it can be visualized as a surface in 4D; if O2 is also needed, than the surface is in 5D; and so on. The desired function (F1) that predicts soot concentration (fv) can have different variables and dimensions. If it is assumed that integrated exposure histories are sufficient for capturing the residence time effects, then a correlation for soot volume fraction can be expressed as: ( ) (3.4)

The procedure that was followed to generate various functions consists of different steps: The process begins by developing a library of flame data (temperature, velocity, species and soot concentrations at each control volume in a computational domain) that is generated from CFD modeling which has been done by our research group, or is in the literature. At the next step, important species histories and also temperature history are computed using the aforementioned Lagrangian postprocessor. Based on our knowledge of soot formation, important variables are proposed for generating appropriate polynomial functions. The next step is determining polynomial functions with different degrees using a curve fitting code and software that employs nonlinear regression, and least squares methods (i.e., 2D: fv=F (Th), 3D: fv=F (Th, MFh), and so on.). After generating functions, the validity of the function generation can be estimated by using an R-squared. By testing different functions that are obtained from different variables, different R-squared values are obtained with respect to each set of variables that generates each function.
26

3.3.1 Generating 2D functions

Investigating the potential of the polynomial functions as a tool for predicting soot concentration starts with 2D polynomial functions. The function consists of one main variable that represents temperature history (Th), as temperature is known to be the primary factor affecting soot formation [48]. In other words, at this step, Th as the only variable that predicts soot concentration (equation 3.5) is investigated. While it well known that carbon concentration (richness) in the gas also plays a strong role in soot formation, the generation of 2D functions is used here for demonstrative purposes. ) (3.5)

The function (F2) is generated using a linear least squares method which finds the closest line that goes through the graph that shows soot concentration versus temperature history. The code used in this part was written in FORTRAN 95. The code receives the data points from CFD modeling that our research group has been done before as the entry and finds the closest line that goes through the data points. 2D functions are insufficient to consider multiple variables simultaneously, such as temperature and mixture fraction, therefore, higher order functions are considered next.

3.3.2 Generating 3D functions

After considering temperature history as the main variable that affects soot formation, species histories are added to the function that does the prediction in order to increase accuracy. In other words, the more variables added to the function (increasing the dimensionality), the more accurate the predictions. Theoretically, if every variable could be considered, then accuracy would only be limited by the type of integral function employed. Moreover, considering more variables (C2H2_h in this case) reflects the effects of them in soot formation on the accuracy of the predictions. By adding another variable, the prediction function becomes 3D (equation 3.6). ( )
27

(3.6)

In the equation F3 is the function that is obtained from the curve fitting using CFD simulation data and fv represents soot concentration. The reason that C2H2_h is chosen is that, according to literature [48], C2H2 is one of the most important species that affects soot formation. Moreover, C2H2 also reflects the effect of carbon on soot formation, which is considered to be a contributor to soot formation [48]. Figure 3.2 provides an image of the application MATLAB [49] which was used for curve fitting in three dimensions; it also generated the 3D graph of the fitted function and original data.

Figure 3.2: Curve fitting application in MATLAB [49].

In the left side of figure 3.2 the variables that are considered in curve fitting can be chosen under the X data, Y data and Z data names. In the middle and top of the window, there are some available types of the functions (polynomial, interpolant, etc.) that can be chosen for curve fitting. After choosing the type of the function and variables, the window on the left shows the result of the curve fitting. There is also a graph in the middle that permits visualization of the variable data and also the result of fitting a 3D function (a polynomial surface). In the Figure, black curves show the data and the surface represents the fitted function.

28

3.3.3 Generating 4D and 5D functions In order to consider the effects of more species' histories on the function that will be used to generate predictions of soot concentration, the dimension of the function must increase. Except for acetylene concentration history and temperature history that were covered in the previous sections, the effects of other important variables that affect soot formation are investigated in next chapter. Since oxidation is one of the main processes that has an important role in soot formation, it is an important factor to consider when producing the prediction function. Therefore, O2_h is one of the variables that are added for generating the function at this step. After oxygen history and mixture fraction history (as a carbon indicator) benzene (C6H6_h) is considered in producing the 4D and 5D functions (equations 3.7 to 3.11). The reason is that based on the literature [48], benzene is one of the variables participates in soot formation. In fact, different 4D and 5D functions with different variables are produced for prediction (different combination of variables, with different polynomial degrees). Each function has a correlation coefficient that shows the accuracy of the curve fitting. Choosing variables that produce the most accurate functions can be possible by comparing the correlation factors belong to the variable combinations. The following equations represent the functions that are produced based on proposed variables that are thought to have the most important roles in soot formation. ( ) ( ( ( ) ) ) ) (3.7) (3.8) (3.9) (3.10) (3.11)

In following section, the main reason of considering these variables and their combinations in different functions will be provided. The curve fitting tools in MATLAB do not permit curve fitting for functions with more than three dimensions. Therefore, software is needed that can do curve fitting for higher

29

dimensions. The curve fitting process was performed using LAB Fit [50]. LAB Fit is software that works to process experimental and numerical data. LAB Fit is capable of doing curve fitting using least square, nonlinear regression methods, and Levenberg-Marquardt algorithms. There is the option that enables users to write their own fitting function, with up to six independent variables (in this study the max number of independent variables were 4, for 5D functions). Apart from the abilities of the software that was used in this study, there are some other available options (plotting graphs, determining propagated error, etc.) [50]. Figure 3.3 shows the main page of the software.

Figure 3.3: LAB Fit first page, the software was used for generating 4D and 5D functions [50]. In the right side of the window of LAB Fit, there are buttons that can be used for entering the data. Excel or text files can be imported. Forms of the fitting functions and number of variables can be chosen by pressing the `New' button from the tool bar in the left side of the main page of the software.

30

3.4 Generating tables

Other methods, beyond the fitted function that was previously discussed, can be used for data analysis and producing a tool for soot concentration prediction. Using tabulated data is an option that may provide more accurate predictions than the prediction from the functions and the reason is that in tabulating data, calculations are more flexible and they are not limited to a function. Since, in curve fitting process, calculations are limited to form of the functions. The procedure used to generate libraries, based on important variables and results of CFD simulations, is similar to what is used in producing functions; the process begins by developing a library of soot formation correlations from detailed flame simulations. Then important species histories, temperature history, and also mixture fraction history are computed using the Lagrangian postprocessor. Based on the knowledge of soot formation, as well as our understanding obtained from investigating the importance of each variable in producing functions, the structure of a library is organized using important variables, including the choice of variables and dimensionality. The next step is tabulating data from CFD simulations (the same data used for generating functions). Proposed variables become library entries. For example, the total range for Th (0-M K.s) is divided into n small bins/sections ((M-0)/n K.s widths on the Th scale). Other variables undergo the same process and different libraries with various dimensions can be obtained (i.e., 2D: fv=G (Th), 3D: fv=G (Th, MFh), and so on).

3.4.1 Generating the 2D Table

The goal is to generate 4D or 5D tables to replace the 4D and 5D functions and predict soot with higher accuracy. Calculations for generating functions are limited to the form of those functions; however, libraries provide no such limitation. The data from CFD simulations for all streamlines is used for flame data that is binned into the sections and averaged to generate each library entry. The obtained average soot concentration value in each section represents the midpoint of each section along the Th axis. In order to explain the procedure of generating library that is used for prediction, table 3.1 which shows bunch of arbitrary data and variables is used. Table 3.1 represents some sample data that is going to be averaged in two different sections (as
31

an example), and a simple 2D table can be generated from this data. In the table, X is the independent variable and Y is dependent. In order to use X values to predict Y, the range of X is divided by two (number of sections that is chosen for making the example), and the average Y value in each section represents the mid-point of each section from the X axis. Table 3.1: Data that is used for making an example. Data Y X 10 0.4 12 0.5 11 0.9 9 1.1 14 1.7 10 1.8 15 1.2 20 1.9 14 1.75

The first section on X axis is from 0 to 1, and the second one is from 1 to 2. The average of Y values for the first section after calculations becomes  and for the second section (from 1 to 2) becomes  , the mid-point is 0.5, and the mid-point

of X range is 1.5.Therefore, the two by two, 2D table that is obtained from the calculations can be found in table 3.2.
Table 3.2: A simple 2D table

 

11 0.5

14 1.5

The same process can be used for producing a 2D table for predicting soot concentration using temperature history. For practical use, the number of sections is greater, and the mid-point values for each temperature history are different. Figure 3.4 represents the process of generating each library. As an example, in figure 3.4a three different streamlines are used for these demonstrative calculations (depicted in Figure 3.4a). The graphs show soot concentration versus temperature history. The data in this graph was obtained by Lagrangian processing of three different streamlines in a validated set of flame simulation data. The total range for temperature history (140 K.s) is divided by an arbitrary number of sections, 30 in this case (figure 3.4b). The orange lines separate each section, which has length. The red rectangular marks

are the mid-point of the sections. The axis of temperature history in Figures 3.4b and c is limited,
32

zooming in on only 8 bins in the figure in order that the averaging process can be shown more clearly. In figure 3.4c, the data points that are related to mid-point of the sections are averaged to produce the soot concentration prediction value, denoted by a red circle. The yellow squares are the soot values with respect to the mid-point of the sections that were averaged to produce the soot prediction value.

9
8 7 6

a

fv (ppm)

5 4 3 2 1 0 0 20 40 60 80 100 120 140

Max Streamline Streamline_2 Streamline_3

Th (K.s)

33

9 8 7 6

b

fv(ppm)

5
4 3

Max Streamline Streamline_2 Streamline_3

2
1 0 42 52 62 72 82 92

Th (K.s)

9 8

c

7
6

fv (ppm)

5 4 3 2 1 0 42 52 62 72 82 92

Max Streamline

Streamline_2
Streamline_3

Th (K.s)

Figure 3.4: Shows the process of generating libraries in two dimensions.

Generally, a large variation in the points that are averaged in a single bin (when the yellow rectangles are spaced far apart) is undesirable. It means that soot volume fraction cannot
34

be accurately predicted from the independent variables alone (in this case temperature history only). As more variable histories are considered, and the dimensionality of the tabulating procedure is increased to 3D, 4D, etc, the curves (or multidimensional surfaces) collapse onto each other, in the limit of infinite dimensionality; the curves would coincide and become the predictive data with no averaging necessary. A sample of a 2D table that is obtained from this procedure is shown in table 3.3: Table 3.3: 2D table (fv=G (Th)) fv Th ... ... 0.5 2 0.7 2.25 0.83 2.5 0.9 2.75 0.91 3 1.09 3.25 1.14 3.5 ... ...

The code that generates the 2D table is written in Fortran95 [51] and it can be found in Appendix A. The algorithm that the code follows is the same as what is explained in the figures above. First, the code receives the flame data as the entry. Then, the data that represents temperature history is binned into sections and gets averaged to generate each library entry. The number of sections can be entered as a user-defined input. The data that has been used for generating Table 3.3 comes from different flames (Santoro and Smooke flames) [27, 28]. The main reason of using different flames is that, the more flames that are used for generating soot concentration estimator, the more general are the predictions. In other words, using more flames in the calculations considers different flame characteristics and it provides more general predictions in after generation of the estimator tool.

3.4.2 Generating the 3D Table

Increasing the dimension of the library, or the number of concerned variables, makes its predictions more accurate. When libraries or functions are used instead of CFD modeling in order to predict soot concentration, the effects of the variables that are not considered in the calculation are neglected. Therefore, considering more variables and species histories provides

35

libraries that are more accurate. However, because of high computational cost, adding too many variables is also not desirable. For increasing the dimensionality of the library, the next variable that is considered is mixture fraction history (MFh). As mentioned before, mixture fraction is one of the important variables that has a significant role in soot formation; it represents the amount of carbon locally in the gas phase and it considers all the species that contain carbon in the flame. Therefore, it can capture many of the effects of numerous other species that contain carbon and contribute to soot formation with minimal increase in the library dimensionality. The significant amount of participation of lots of species that take part in soot concentration and also its role in soot formation [48] makes considering it crucial. By adding mixture fraction history to the variables that were used in the 2D table that was discussed in the previous section, soot concentration will be predicted using temperature history and mixture fraction history. The strategy that was presented in producing 2D tables is used for the 3D table but with more variables (figure 3.4). Data from various streamlines in different flames that are binned into the sections are averaged to generate each library entry. For generating 3D tables and adding MFh, the same process is done as for temperature history. Each axis that is assigned to each variable (MFh and Th in this case, and fv as the outcome) can be divided by a number and that would make the number of library entries. For example, if each axis is divided by 30 (dividing the total range for that variable), the whole library becomes 30 by 30 by 30 (27,000 entries).

3.4.3 Generating the 4D table

Oxidation is one of the processes that have a significant role on soot formation and it can be linked to soot reduction [2]. Therefore, considering oxidation in the library would be expected to increase the accuracy of the estimation. After adding temperature history and mixture fraction history O2_h, which represents oxidation, is added to the variables that are considered for generating a prediction library. The same strategy that was used for generating 2D and 3D tables is used for the 4D table (equation 3.12).

36

(

)

(3.12)

Similar to libraries with fewer dimensions, if the range of each axis is divided by a certain number of sections, for example n, the total entry numbers of the table becomes nÃnÃnÃn. As mentioned before, the accuracy of the predictions generally increases when more variables are considered in generating libraries. When more variables are considered, the effect of more species is considered in the calculations. Because of time limitations, expanding the table to 5D is not done in this study, but may be valuable in future studies. Different methods that were used for generating a soot concentration estimator were demonstrated in this theory and methodology section. The results and outcomes of predictions from each method and comparisons of them with the actual data from validated CFD modeling, shows the next steps that make the predictions more accurate. Based on the soot predictions from the methods that were used in the beginning of the study and also the results that come from them, finding the appropriate methods for increasing the accuracy of the predictions became possible. The results with respect to the methods explained in this section will be presented in the following chapter. A list of the factors that can affect the prediction accuracy is as follows: a. In generating functions and libraries, the assumption is that the considered variables are independent. For example, MFh does not affect O2_h or other variables. Therefore, the effect of each variable on others is not considered. b. In the averaging process in generating libraries, the number of sections along each dimension's axis is 30. If the computational cost could be ignored, increasing the number indefinitely would lead to more accurate predictions. The reason is that the data sets that are closer to the midpoint of each section would be used for the averaging process. c. In calculating integrated histories all the integrals are obtained based on the residence time of the particles along their pathline. However, getting weighted integrals from species concentration and T by just considering the values of them that affect soot formation may increase the accuracy of the predictions. Each considered variable cannot affect soot formation in all of their concentration values. Therefore, calculating integrated histories based on the effective values of species concentrations and also temperature maybe beneficial. For example Th is calculated from
37

its minimum value in a pathline for a particle to its maximum value, while Th affects soot formation when its values are high. Thus, calculating Th using the values of temperature that affect soot formation may increase the accuracy of the predictions. d. Although the species that are considered in generating libraries and functions are the ones that have the most significant roles in soot formation, the number of species that participate in combustion is higher (approximately 100 species) and not all of them are considered in the calculations.

38

4. Result and discussion
In the following sections, the results of the work toward generating a soot particle concentration estimator will be presented. In this project a large database, which has been developed by our research group, is used to generate functions and libraries. The CFD code used to generate the database is well-validated with different experimental data. The code is also validated with the experimental data with different soot characteristics (i.e., primary particle size, soot volume fraction). Figure 4.1 shows a comparison between the experimental data from the Santoro flame and the result from the CFD modeling code (labelled as 'present mechanism' in the figure) that is used in this study. The figure shows that the CFD code is very well validated.

fv (ppm)

Z (cm) Figure 4.1: Comparison of numerical (present mechanism) and experimental (Santoro flame) soot volume fraction along the annular pathline of maximum soot concentration. (The figure reproduced from [7].)

4.1. Use of polynomial functions
The procedure for producing the appropriate polynomial function was explained in the previous chapter (3.3). One of the parameters that can be used to show the accuracy with which the generated function follows the CFD data is the correlation coefficient (R2). The different software programs that generate fitted functions (LAB Fit and MATLAB) normally calculate this parameter. The closer the correlation coefficient becomes to one, the higher the accuracy of the curve fitting becomes. In LAB Fit and MATLAB software tools, the calculated correlation factor

39

comes from a comparison between the original data (CFD modeling in this case), and the fitted function. The functions can be tested by using streamline data from one of the flames with variables that are used in generating functions, and also soot concentration. As a result of the CFD calculations, the soot concentration values for data sets are available, and these can be compared to the soot value result from the newly generated prediction functions. First, streamline data obtained from previous calculations of flames are used for the test. However, a better test of the functions' predictive capability would be to test it out on flames with data that was not used in the function generations. Therefore, after the first tests, streamline data from other flames that were not used for generating the functions are used for testing. As discussed in chapter 3, the process of generating functions starts in three dimensions (i.e., soot is correlated to two variables) and then, if the predictions are not accurate enough, the dimension of the functions is increased by adding more variables in order to obtain more accuracy. The generated 3D functions are produced by the MATLAB curve fitting tool, and the 4D and 5D functions are produced by LAB Fit software.

4.1.1 3D functions

The process of finding an appropriate 3D function starts with choosing the appropriate variables that, based on the literature [48], have the most significant roles in soot formation (Th and C2H2_h). Figure 4.1 shows two graphs (3D view of fv (ppm) versus Th and C2H2_h. The data comes from a Santoro flame and each curve represents data from one streamline.

40

Figure 4.2: Projection of 3D graph of fv vs. Th, C2H2_h. The data comes from Ethylene-air Santoro flame. Using the curve fitting MATLAB tool, different polynomial functions for surfaces can be fitted to the data that is shown in figure 4.2. After testing different forms of polynomials (2nd, 3rd degree, with different combinations of the variables), the most correlated generated 3D functions (fv vs. Th and C2H2_h) can be found in figure 4.3. The black curves are the original data from the Santoro flame (the data points in figure 4.2), and the colored surface represents the fitted function.

41

Figure 4.3: The fitted surface to the Santoro flame's data (black curves).

The equation of the fitted surface is in equation 4.2. x1 and x2 are independent values that represent Th and C2H2_h respectively, and a to b are the constant values of the equation. The correlation coefficient (R2) is 36% which, in this case, comes from the comparison between the fitted surface and the data to which it is being fitted. According to the correlation coefficient, the accuracy of the fit is not high. (4.1) + +

R2=36%

The considered variables in this curve fit are Th and C2H2_h. The reason for the low correlation coefficient might be the number of considered variables. In other words, some variables that have a significant role on soot concentration may not be included and so soot concentration cannot be considered a function of these two variables alone. Replacing variables might solve
42

this problem; however, omitting Th is not the solution. According to the literature [48], and the results of testing different fitted functions (where the function in an equation obtained after testing various polynomial functions with different variables), temperature has the most significant role in soot formation. Moreover, replacing C2H2_h is unlikely to be the solution for this problem, since according to testing functions with different variables, considering C2H2_h makes the functions more accurate. Therefore, attention is turned to increasing the dimension of the function (4D).

4.1.2 4D functions

Since some of the processes that effect soot concentration are omitted in generating 3D functions. Additional variables are needed to obtain more accurate functions. Oxidation, which leads to soot reduction, can be considered using O2_h. For generating 4D functions, the variables become O2_h, C2H2_h, and Th (F=fv(O2_h, C2H2_h, Th)). The procedure for generating functions is the same as for 3D functions. The curve fitting software receives the general form of the function as the input, which in this case is a second degree polynomial. Different functions with various polynomial forms are tested for obtaining the most accurate 4D function. Equation 4.2 shows the 4D function with highest correlation coefficient that predicts soot concentration. The variables are shown by x1 to x3 and y, and a to g which indicates the constants.
,

(4.2)
)+f )

)

R2=46%

As was expected, after increasing the number of variables, the correlation factor increases to 46% (it was 36% maximum with 3D functions). The increase occurs as a result of adding O2_h. The correlation coefficient value is generated based on the comparison between the original data from the Santoro flame and the generated function fit to those data. The accuracy presented by R2 is not high, but it still reflects the effect of the increase in the number of considered variables.

43

In order to further increase the accuracy of the prediction functions, more variables can be added. In this case, instead of a 4D function, a 5D function can be used. As more variables are considered, it is expected that the accuracy of the prediction increases. Based on the literature [48] and our knowledge of soot formation, one of the species that has a crucial role in soot formation is OHh. Therefore, this variable is considered when generating a 5D function. By increasing the dimension of functions from 3D to 4D and from 4D to 5D the computational cost increases.

4.1.3 5D functions

In order to increase the number of variables and the accuracy of the prediction functions, the next added variable is OHh. Therefore, the new function becomes 5D (F=fv(O2_h, C2H2_h, Th, OHh)). It is expected that adding more species to the considered variables along with using the appropriate form of the polynomial will lead to a more accurate function. Different forms of polynomial functions have been tested which are shown in equation 4.3. The data that was used for generating these functions comes from the Santoro flame. The most accurate function that has the highest correlation coefficient is circled in red.

,
1) ) 2) ) 3) ) ) ) ) )+f ) ) ) ) )+f ) ) ) )+f )

(4.3)

The polynomial form that generates the most accurate function is the first one which is a standard second degree polynomial. The symbol y represents soot concentration, x1 to x4 represent other variables, and the letters `a' to `i' are the constants.

44

For testing the prediction accuracy, streamline data from the Santoro flame [28] can be used. The function (equation 4.3) uses flame data as the input, and calculates the predicted value of soot concentration. Figure 4.4 shows a comparison between the original data from the Santoro flame (solid line) and the predictions from the most accurate function that is produced (dashed line).

30 25 20

fv (ppm)

15 10 5 0 0 50

Soot_Th fv computed

fv predicted Soot_Th (fitted)

Th (K.s)

100

150

Figure 4.4: A comparison of the predictions from the 5D function that is generated from Santoro flame data with computed fv along the streamline of maximum soot. The graph shows fv versus Th. The dashed line indicates the predicted amount of fv and solid line shows the computed value from CFD modeling. In the soot formation field, the first half of the dashed line, where the amount of soot concentration increases, is called the growth region and the other half. The prediction in the growth region has good accuracy. The part of the graph that soot concentration reduces is called the oxidation region. The function that is used cannot predict soot concentration in the oxidation region. The results of this graph suggest the efficacy of using two separated functions for the growth and oxidation regions. In other words, all the data in the Santoro flame that belongs to the growth region can only be successfully used for generating a prediction function in the growth region, and the same strategy would be used with the data belonging to the oxidation region.

45

Equation 4.4 shows the most accurate prediction function for the growth region. The variables are Th O2_h, C2H2_h, and OHh.

,
) )+ f )

(4.4) )

The correlation coefficient (61%) indicates that the accuracy of the prediction is not high. Therefore, finding separated functions for two different regions of the Santoro flame with these variables does not increase the accuracy of the prediction in the growth region. The second function that is generated for the oxidation region can be found in equation 4.5. The same variables are used, but the correlation coefficient increases when using a separate function for the oxidation region.

,
) ) +f )

(4.5) )

Figure 4.5 represents a comparison between the original data from the Santoro flame and the result from prediction. Both the growth and oxidation regions are shown in the graph. The graph in the top shows the growth region and the one below, the oxidation region.

46

Growth region
10 8 6 4 2 0 0 50

Oxidation region R2 = 62%
Soot_Th Soot_Th (fitted)

fv (ppm)

100

150

Th (K.s)

10 8 6 4 2 0 0 50 100 150

R2 = 84%
Soot_Th Soot_Th (fitted)

fv (ppm)

Th (K.s)

Figure 4.5: A comparison of the predictions from the 5D function that is generated from Santoro flame data with computed fv along the streamline of maximum soot. Two different 5D functions for the growth and oxidation regions are used. Both graphs show fv versus Th. Dashed lines indicate the predicted amount of fv and solid lines show the computed value from CFD modeling.

Finding two different functions for separate parts of the Santoro flame increases the accuracy of the predictions for the oxidation region. After considering all the variables again, it is realized that using another variable such as a carbon indicator instead of C2H2_h in the calculation might be beneficial. Mixture fraction is a variable that considers all of the species that contain carbon [41] and it is a better indicator for carbon than C2H2_h since it considers more species. Moreover, considering O2_h as one of the variables that can have a significant role in soot formation in the growth region may not be a good decision since for this flame, oxidation is confined to the oxidation region. Therefore, using O2_h instead of C6H6_h in the growth region,
47

which, as seen in the literature, is one of the species that affects fv, may also be beneficial. For the oxidation region, the other variables that were considered in the previous function are considered again. For the growth region, the prediction function is F=fv(MFh,C6H6_h, Th, OHh) and for the oxidation region, the function is F=fv(O2_h, MFh, Th, OHh). Equation 4.6 represents the prediction function that is obtained for the growth region. According to the correlation coefficient, the accuracy with which the function followed the CFD data increased after replacing C2H2_h with MFh and removing O2_h and adding C6H6_h.

,
) ) +f )

(4.6) )

Since MFh is a better indicator for carbon than C2H2_h, and since other species that are considered in the growth region have a significant role in the growth region, such as C6H6_h, an increase in the predictions from the function can be seen. For the oxidation region, the variables that are considered are Th, MFh, OHh, and O2_h. The C6H6_h that is considered in the growth region is omitted and O2_h is used instead, in order to better consider the oxidation process. Equation 4.7 represents the prediction function that is obtained. (4.7) ) ) +f ) )

48

According to the correlation coefficients for the functions that are obtained for the growth and oxidation regions, separating flames into two regions is quite effective. Moreover, considering O2_h only in the oxidation region, and C6H6_h only in the growth region, is also effective. The reason is that, C6H6_h mostly affects the process of soot formation, when O2 can be mostly found in the oxidation region. Figure 4.6 represents a comparison between the original CFD data from the Santoro flame and the result from a prediction using the new functions shown above. Both the growth and oxidation region are shown in the graph. The graph on the top shows the growth region and the one below shows the oxidation region.
Growth region Oxidation

10

R2=87%
Soot_Th

8

fv (ppm)

6 4 2 0

0

50

Th (K.s)

100

150

10 8 6 4 2 0 0 50

R2=86%
Soot_Th

fv (ppm)

Th (K.s)

100

150

Figure 4.6: A comparison of the predictions from the 5D function that is generated from Santoro flame CFD data with computed fv along the streamline of maximum soot. Two different 5D functions for the growth and oxidation regions are used. They show fv versus Th. Dashed lines indicate the predicted amount of fv and solid lines show the computed value from CFD modeling.

49

The results illustrate that by choosing appropriate variables and also splitting flames into two different sections, the accuracy of the prediction function increases. Although the strategy that is chosen to increase the accuracy of the predictions is quite effective for the Santoro flame, this strategy is only effective for co-flow diffusion flames where the growth and oxidation regions are distinct. Therefore, for other flames, such as premixed flames, that do not have separated regions for the growth and oxidation, a more effective strategy for increasing the accuracy of the prediction from functions is needed.

4.2 Use of tables
Since the strategy of separating the flame's sections is not effective for all combustion systems, to increase the accuracy of the predictions, tabulating data is used instead of functions. Similar to the process of generating the function, integrated histories from CFD modeling data from different flames was tabulated.

4.2.1 Interpolation

As discussed in Chapter 3, tabulated data is used as a tool for soot concentration prediction. The outcome of the calculations for tabulating data are tables with different dimensions, such as 2D, 3D, and 4D tables, which relate soot concentration to variable histories. The entries of the libraries are Th, MFh, and O2_h. In order to use the libraries as predictive tools, some interpolation techniques are required. As discussed in the theory and methodology sections, flame data is binned into the sections and averaged to generate each library entry. In order to calculate the predictions that come from the libraries, streamline variables are interpolated to generate the concentration. For example, for 3D tables with the entries Th and MFh.

50

The method that is used for interpolating data in a 3D table (fv vs. Th, MFh) is spatial interpolation. Figure 4.7a illustrates the process. If it is assumed that the X axis represents Th, the Y axis shows MFh, and the Z axis represents fv, and also A, B, C, and D points are library entries, the point P is a data point from a streamline. Each of the library entries has a value on the Z (fv) axis (Za, Zb, Zc, and Zd). The Z value of P, which is the prediction of soot concentration, can be obtained using the other points' coordinates. Figure 4.7b shows the tope view of the 3D figure 4.7a.

Z ( f v)
Figure a Za Zc A C
P

Zb Zd

B D

Y (MFh)

X (Th)

Figure b

Figure 4.7 The process of 3D interpolation. Figure b shows a top view of figure a. According to the figure, the mathematical equations that are used for obtaining the value of point P on the Z axis, which can be thought of as the soot concentration value, are as follows:

51

ZE and ZW can be obtained using ZA to ZD values: (4.8) (4.9)

Because of the same reason: (4.10) Thus: [ ] [ ] (4.11)

While these equations can be found in standard numerical analysis texts, they were rederived as part of the present work to facilitate expansion to higher dimensions. The value of soot concentration can be obtained from the above equations. ZA to ZD are soot concentration values with respect to the library entries A to D (A and B for MFh, C and D for Th). The predicted value of soot concentration in 3D can be obtained from the above formulas. Although, for 4D tables another dimension is added and the formulas get bigger, the same strategy is used. In addition to the interpolation method that was just explained for finding the prediction value, there is another method that can be used to obtain the prediction of the libraries: the minimum spatial distance of data points from the library points. Basically, for each data point, the library point that has the minimum spatial distance to it becomes the outcome of the prediction. The code that calculates the predicted values can be found in the Appendix B. The code first receives the library data and the variable histories that will be used for the prediction. Then the code for each data points finds the data points that have the minimum distance from each data that is the target of the prediction. The equation that the code uses to calculate the spatial distance is as follows:  ) ) ) (4.12)

52

X, Y, and Z are library data points and M, N, and P are variable histories that are used for the predictions. Equation 4.12 shows the formula that is used for 3D tables. The equation that can calculate distance in 4D space is similar to equation 4.12; in 4D spaces, just one other variable is added for the 4th dimension. The reason that two different methods are needed for using the libraries and generating predicted values is that the result of the prediction can be different when different methods are used. If storage limitations prevent high resolution in the libraries, then the minimum distance method may be preferable, as it will prevent the influence of distantly related streamlines on the prediction for the point of interest.

4.2.2 Using 3D tables

The variables that are used in generating a 3D table are fv, Th, and MFh. The reason for considering these variables in a 3D table is that, in generating functions Th and MFh have the most significant roles on fv,. Therefore, the 3D table becomes (fv vs. Th, MFh) where Th and MFh history are library entries that are generated from tabulating CFD modeling data. Figure 4.8 shows the 3D table that is generated from tabulating the variable histories from the Santoro flame CFD data. Th and MFh are library entries and each range for the entries has been divided into 30 sections. Thus, the library in figure 4.8 is 30 by 30 by 30.

53

fv (ppm)

Th (K.s) MFh (s) Figure 4.8: 3D table generated from Ethylene-air Santoro flame data. The figure shows fv versus MFh and Th. The data comes from 16 streamlines.

The 2D projections of the figure (above) are presented in figure 4.9. The upper graph in figure 4.9 shows soot concentration versus Th, and the lower one shows soot concentration versus mixture fraction history. The maximum value of soot concentration in the 3D table when the Santoro flames are concerned is 8 ppm, which is close to the maximum value from CFD modeling.

54

9 8 7 6 5 4 3 2 1 0 0 20 40 60 80 100 120 140 160

fv (ppm)

Th (K.s)
9 8 7 6 5 4 3 2 1 0 0 0.02 0.04 0.06 0.08 0.1

3D (fv vs. Th, MFh)

fv (ppm)

MFh (s) Figure 4.9: 2D projections of the 3D table that is generated from 16 streamlines of Santoro flame data. The figure at the top shows fv versus Th, and the one at the bottom indicates fv versus MFh.

After generating the 3D table, which considers MFh and Th as variables based on CFD data from the Santoro flame, five flames studied by Smooke et al. [29], hereafter referred to as 'Smooke flames' with different dilution ratio (32, 40, 60, 80, and 82 percent) were considered in generating the library so as to improve the fidelity of the predictions. A new 3D table was generated using six different flames (one Santro and five Smooke flames). Figure 4.10 shows the 2D projections of the 3D table, which illustrates fv versus Th and MFh.

55

3 2.5

2

fv (ppm)

1.5 1 0.5 0

0
3 2.5

50

Th (K.s)

100

150

3D (fv vs. Th, MFh)

fv (ppm)

2

1.5
1 0.5 0 0 0.02 0.04 0.06 0.08 0.1

MFh (s) Figure 4.10: 2D projections of a 3D table (fv vs. Th , MFh), using Santoro and Smooke flames (with 32, 40, 60, 80, and 82 nitrogen dilution ratio). The figure at the top represents fv versus Th, and the one at the bottom shows fv versus MFh.

After adding five more flames to the algorithm that generates the library, generating a 3D table with MFh and Th as variables, the maximum value of fv decreases to 2.5 ppm, which is lower than the maximum value in the Santoro flame (8 ppm). This is a problem because it means that the library could not be used to predict peak soot concentration in the Santoro flame. This underestimation indicates that there is a problem either with the variables chosen or with the dimensions of the table, or both. The variables that are chosen here are less likely to be the source of the problem, since this combination of variables led to functions, which best followed the CFD data, as explained in the previous section. Therefore, a solution is first pursued with the
56

number of dimensions not the variables that are used here. The number of variables is increased to three and the table becomes 4D.

4.2.3 Using 4D tables

To generate a 4D table, O2_h is added to the variables used in generating the 3D table. Each flame has its own fv values, and in the averaging process in generating the library, the high number of low fv values decrease the averaged value of fv in the library. However, when the O2_h is added, this problem can be solved due to different distributions of fv before averaging. Considering O2_h and adding it to Th and MFh makes the maximum fv value in the 4D table close to CFD modeling data. Consistent with the function generation outlined previously, soot volume fraction cannot be considered to depend on temperature history and mixture fraction history only. Therefore, in the 3D case, it is likely that soot volume fractions, which were not related to similar conditions, were being averaged into a single bin. Figure 4.11 shows the 2D projection of the 4D table that is generated from the Santoro flame and five Smooke flames.

57

9 8 7 6 5 4 3 2 1 0
0 50

fv (ppm)

4D table Th (K.s)
100 150

(fv vs. Th, MFh, O2_h)

9 8 7 6 5 4 3 2 1 0 0 0.02 0.04 0.06 0.08

fv (ppm)

MFh (s) Figure 4.11: 2D projections of a 4D table (fv vs. Th , MFh , O2_h), using Santoro and Smooke flames (with 32, 40, 60, 80, and 82 Nitrogen dilution ratio). The figure at the top shows fv versus Th, and the one at the bottom indicates fv versus MFh.

According to the figure, the maximum value of fv increases back to 8 ppm, which is close to the maximum value in CFD modeling data (8.5 ppm), the source of the calculations. After generating 3D and 4D tables, and after considering different flames (five Smooke flames and the Santoro flame), it is found that the 4D table, which considers Th and MFh and O2_h, is the best choice to use for prediction calculations. In order to test the prediction of the 4D table that can be seen in figure 4.12, flame streamlines data can be used. The flame data from CFD modeling is interpolated with the method
58

previously explained (not using the minimum spatial distance method). The streamline that has the maximum value of fv is tested in figure 4.12. The library that is used in this figure for prediction comes from Santoro flame data; Smooke flames were not used in generating the library that is used for these predictions.
9 8 7 6 5 (Soot vs. Th , MFh, O2_h) Soot_Th (code)

fv (ppm)

4 3 2 1 0 0 50 100

Th (K.s) Figure 4.12: fv versus Th along the pathline of maximum soot in the Ethylene-air Santoro flame. The solid line shows the computed fv from the detailed CFD code. The dashed line shows the predicted fv from using a 4D table. The contour at the right shows temperature in the Santoro flame and the black curve represents the maximum soot streamline along which the data is plotted.

The dashed line represents the streamline of maximum CFD soot data, and the solid line shows the predicted curve which comes from interpolation from the 4D library. The figure in the right represents the temperature contour and the black curve on it shows the streamline that is tested in this graph. The predicted maximum value for fv is close to that of the validated CFD data. The prediction for the oxidation region of the streamline has good accuracy. The accuracy of the prediction is not high in the growth region; the location at which soot begins to grow is not correctly predicted by the 4D library. Moreover, for non-smoking flames, where all the soot
59

particles become oxidized, predicting the location of the burn out is important. The location of the burn out in the figure is predicted very well. In order to further test the 4D table, which is generated from the Santoro flame streamlines, centerline of the Santoro flame can be tested. Predictions from the 4D library is shown along the centerline of the Santoro flame and compared to the original data from CFD modeling in figure 4.13. The solid line represents the centerline data of the Santoro flame, and the dashed line indicates the predicted curve, which comes from interpolation from 4D table. The figure on the right represents the temperature contour and the black curve on it shows the streamline that is tested in this graph.
1.4 1.2 1.0

Soot_Th (code)

fv (ppm)

0.8 0.6 0.4

0.2
0.0 0 20 40 60 80

Th (K.s) Figure 4.13: fv versus Th, along the centerline in the Ethylene-air Santoro flame. The solid line shows the computed fv from the detailed CFD code. The dashed line shows the predicted fv from using a 4D table. The contour plot at the right shows temperature in the Santoro flame and the black curve represents the centerline along which the data is plotted.

The maximum amount of fv that the solid line curve predicts is very close to the maximum of the dashed line. However, the dashed line still does not accurately predict the rate of soot growth. It

60

can be seen from the figure that while soot begins to grow immediately, the 4D library does not predict soot growth until a temperature history of 20 K.s. The location of the burn out in the figure is predicted very well. In order to increase the accuracy of the predictions, more flames can be added to the calculations that generate the 4D table. The variables remain the same, and as explained previously, now the five Smooke flames with different dilution ratios are considered. Considering six flames instead of one helps the obtained library to predict more flames. For future use and testing with other flames, the accuracy of the predictions will be higher using this information. To try to improve the predictive capability of the 4D library, and broaden its applicability, additional data was added to the algorithm that generates the library entries. This data comprised five flames from Smooke et al. [29] with different dilution ratios. However, the change in the quality of the comparison was negligible. The next attempt at improving the comparison involved employing a different interpolation strategy (minimum spatial distance that was explained previously). Figure 4.14 shows the result from testing of the 4D table that is generated from six flames along the streamline of maximum fv in the Santoro flame. The solid line represents validated CFD data, and the dashed line shows the predicted curve which comes from interpolation in the new, higher fidelity 4D library. The method of testing in this graph is the minimum spatial distance. The reason for choosing this method over the interpolation method is that it generates more accurate predictions.

61

9 8 7 6 5

fv (ppm)

4

3
2 1 0 0 20 40 60 80 100 120

Th (K.s) Figure 4.14: fv versus Th, along the pathline of maximum soot. The solid line shows the fv from the detailed CFD code. The circles show the predicted fv from using a 4D table that is obtained from six flames. The method of interpolating from the library is the minimum spatial distance. The contour plot at the right shows temperature in the Santoro flame and the black curve represents the streamline of maximum soot along which the data is plotted.

The maximum value of fv from the prediction from the library is close to the maximum value from CFD modeling. The prediction starts out with good accuracy in the growth region, up until a temperature history of about 20 K.s. After that point, the prediction no longer follows the CFD data. The estimate of the amount of fv in the oxidation region is very accurate, as illustrated by the circles. Moreover, according to the prediction from the circles, the amount of emitted soot is zero, which is consistent with the CFD results. In order to test the accuracy of the predictions for the 4D table that is generated from six flames, another streamline can be tested; the centerline of the Santoro flame. Figure 4.15 shows the comparison between the data from CFD modeling and the data from prediction using the 4D library. The solid line represents the centerline of the Santoro flame, and the circles shows the

62

predicted curve, which comes from interpolation. The method of finding fv values from the library uses minimum spatial distance. The accuracy of the predictions that come from this method is higher than when the standard interpolation method is used. In this graph, it can be seen that the prediction data follows the CFD data very well, albeit with more scatter.

1.8
Soot_Th (code) f computed

1.6 1.4

v

fv predicted Soot_Th (Min_D)

1.2

fv (ppm)

1.0 0.8 0.6 0.4 0.2 0.0 0 20 40 60 80

Th (K.s) Figure 4.15: fv versus Th, along centerline of Santoro flame. The solid line shows the computed fv from the detailed CFD code. The circles show the predicted fv from using a 4D table that is obtained from six flames. The method of using the library is minimum spatial distance. The contour plot at the right shows temperature in the Santoro flame and the black curve represents the centerline along which the data is plotted.

Different libraries have been tested with some streamlines, but only on data from flames that were used to generate the libraries themselves. Until to this point, in order to test the prediction accuracy of the libraries, data sets were used that originally generated the library themselves. Moreover, the next step in testing the prediction capability of the libraries with another flame data that is not used in generating the libraries. Moreover, the location of the burn out in the figure is predicted very well.

63

The streamline of maximum fv of a flame, studied by Shaddix and Smyth [52], hereafter referred to as `Smyth flame', can be used to test the accuracy of the libraries. The streamline of maximum fv is used for the test (figure 4.16). The solid line is streamline data from CFD modeling and circles are predicted values. The method of testing in this graph uses the minimum spatial distance, as it has proven advantageous over standard interpolation. The circles in the graph can show the trend of fv versus Th in the Smyth flame and they can estimate the amount of emitted fv, which is zero. Moreover, the order of magnitude of the streamline of maximum fv is predicted well. However, the library falls short of being able to predict the peak soot concentration.
18 16 14 12 Soot_Th (code) Soot_Th (min_d)

fv (ppm)

10

8
6 4 2 0 0 20 40 60 80 100 120

Th (K.s)

Figure 4.16: fv versus Th, along maximum streamline of Smyth flame. The solid line shows the computed soot volume fractions from the detailed CFD code. The circles show the fv from using a 4D table that is obtained from six flames. The method of using the library is minimum spatial distance.

Result of soot prediction from functions with different variables and dimensions and also generating 3D and 4D tables, indicate that libraries are an improved choice over functions in

64

predicting for fv. The reason is that, calculations in producing functions are limited to their form of them, when calculations in generating libraries are not limited.

65

5. Conclusion and Future work

CFD has become a common tool in the transportation and power generation industries that utilize combustion. The CFD simulations used in these fields do not normally employ soot formation models, as these models tend to be complex and too computationally cumbersome. The present thesis sought to lay the foundation for a new type of computational tool that could estimate soot concentrations based on CFD results in a computationally efficient, and accurate post processor strategy. Different strategies have been used in this study for designing a tool that estimates soot concentration, but all were based on a Lagrangian fluid parcel tracking model that related soot concentration to the integrated history to which a particle, or fluid parcel containing particles, had been exposed. The present work considered polynomial functions and multidimensional lookup tables, or libraries. Using polynomial functions was the first strategy that was chosen to predict soot concentration. First functions were generated that related soot concentration to temperature history, and later to both temperature history and acetylene history. It was shown that these functions were not capable of producing accurate predictions for soot volume fractions. For example, the conditions that lead to the data that were used to generate these functions corresponded to soot volume fractions in excess of 8 ppm, however, the functions were not capable of predicting any soot volume fractions over 3 ppm. When another level of dimensionality was added to the function generating strategy, considering oxidation, the predictions improved. The predicted soot concentration closely followed the correct values obtained from validated CFD data in the growth region of the flame. Using two different polynomial functions for the growth and oxidation regions of co-flow diffusion flames generated more accurate predictions. However, this strategy could not be used for all types of flames, since in many systems such as pre-mixed flames, growth and oxidation regions cannot be clearly separated. However, generating and testing these functions were still valuable as it helped clarify the role of each species on soot prediction. Therefore, this understanding was beneficial to the process of generating lookup tables, or libraries and to choosing the right species that make the predictions from libraries more accurate.

66

Tabulating the relationships between variable histories and soot concentration from the CFD modeling data was the next strategy that was used for generating a soot estimator tool. First, 2D and 3D libraries (based on one and two variable histories, respectively) was employed, but only for the purposes of formalizing the overall strategy and methodology. Using 4D tables based on data from the CFD simulations of various flames made the prediction of the maximum soot concentration and also the amount of emitted soot from a flame possible. Predictions were made for both flames that were used to generate the libraries, as a preliminary test, and also predictions were made for a completely new flame system that was not involved in the library generation. The 4D library was able to predict peak soot concentrations and the non-smoking nature of the flames with reasonable accuracy. Although estimating the maximum amount of soot concentration with good accuracy, and also predicting the amount of emitted soot from a flame is an excellent achievement, further generalization and broadened applicability of the library strategy could be achieved with the following methods, which due to the limitations of a master's thesis, were not part of the present work: 1. Increasing the dimension of the libraries: Due to computational cost and time limitations, libraries with higher dimensionality than 4D were not generated. Increasing the dimension of libraries, means that more species histories could be considered in the tabulating process and the effects of additionally considered species would be reflected on the soot concentration predictions. Therefore, it may increase the accuracy of the predictions that come from the library. 2. Testing the sensitivity of the tables to the number of sections/bins for each library entry: The maximum number of sections for each entry was 30 (a 4D table was 30 by 30 by 30 by 30; 810000 entries in total). Increasing the number of sections means that the width of each bin decreases, and resolution increases, it may increase the accuracy of the predictions from the library. 3. Non-dimensionalizing the variables that are used in the libraries may increase the accuracy of the predictions based on them. The reason that the suggested modification in the variables may be beneficial is that, the difference between the considered flames should be reflected in the variable. One of the examples of these modifications on the variables can be using Th/Th_max (the temperature accumulated up to a local point, divided by the maximum value of temperature history in a flame) instead of Th as one of the library entries.
67

4. Considering data from more flames in the library tabulating process: Six different flames were used for generating libraries (one from Santoro et al. [28] and five from Smooke et al. [29]) Multiple streamlines (135 in total) were considered from each of these six flames. Adding more CFD modeling data from other flames to the libraries may increase the accuracy of the predictions and broaden the applicability of the libraries. The reason for this improvement would be that the characteristics of different types of flames would be considered in the libraries through the tabulating process. Therefore, the accuracy of the predictions from generated libraries may increase. All the strategies that were suggested above come from the experience that is obtained from doing this study, and although there is no guarantee of increasing the soot concentration estimation accuracy from libraries, the recommended strategies may be beneficial. This thesis has conceived of a completely new and novel strategy for computationally efficient prediction of soot formation in combustion systems. The present work has laid the groundwork for a strategy and methodology never before seen in the soot formation literature. Preliminary development of algorithms and testing on laboratory-scale flames has been successful and shows promise. It is recommended that this methodology is studied further, applied to a broader array of combustion systems, and eventually tested in industrially relevant combustion systems through collaboration with company partners.

68

6. References

[1] Environmental Health Investigation Branch, Government of California (www.ehib.org). [2] M. Jacobson, "Strong radiative heating due to the mixing state of black carbon in atmospheric aerosols," Nature, 409 (2001) 695-697. [3] M. Frenklach, H. Wang, "Detailed modeling of soot particle nucleation and growth," Proceedings of the Combustion Institute, 23 (1990) 1559-1566. [4] M. Frenklach, H. Wang, "Ethane oxidation at elevated pressures in the intermediate temperature regime: Experiments and modeling," Springer Series in Chemical Physics, 59 (1994) 162-90. [5] F. Liu, H. Guo, G. J. Smallwood, . L. GÃ¼lder, "Numerical modelling of soot formation and oxidation in laminar coflow non-smoking and smoking ethylene diffusion flames," Combustion Theory and Modeling, 7 (2003) 301-315. [6] M. S. Celnik, M. Sander, A. Raj, R. H. West, M. Kraft, "Modeling soot formation in a premixed flame using an aromatic-site soot model and an improved oxidation rate," Proceedings of the Combustion Institute, 32 (2009) 639-646. [7] S. B. Dworkin, Q. Zhang, M. J. Thomson, N. A. Slavinskaya, U. Riedel, "Application of an enhanced PAH growth model to soot formation in a laminar coflow ethylene/air diffusion flame," Combustion and Flame, 158:9 (2011) 1682-1695. [8] I. Glassman, "Soot formation in combustion processes," Proceedings of the Combustion Institute, 22 (1988) 295-311. [9] I. M. Kennedy, "Models of soot formation and oxidation," Progress in Energy and Combustion Science, 23 (1997) 95-132. [10] W. D. Erickson, G. C. Williams, H. C. Hottel, "Light scattering measurements on soot in a benzene air flame," Combustion and Flame, 22 (1964) 127-132.

69

[11] W. H. Dalzell, G. C. Williams, H. C. Hottel, "A light-scattering method for soot concentration measurements," Combustion and Flame, 14 (1970) 161-169. [12] B. L. Wersborg, J. B. Howard, G. C. Williams, "Physical mechanisms in carbon formation in flames," Proceedings of the Combustion Institute, 14 (1973) 929-940. [13] H. B. Palmer, C. F. Cullis, "The formation of carbon from gases," Chemistry and Physics of Carbon, 1 (1965) 265-325. [14] B. S. Haynes, G. H. Wagner, "Soot formation," Progress in Energy and Combustion Science, 7 (1981) 229-273. [15] M. Frenklach, "Reaction mechanism of soot formation in flames," Physical Chemistry Chemical Physics, 4 (2002) 2028-2037. [16] H. Bockhorn, "A short introduction to the problem - structure of the following parts," in Soot Formation on Combustion, Mechanism and Models (H. Bockhorn, ed.), (1994) 3-7. [17] F. Liu, G. J. Smallwood, . L. GÃ¼lder, "Application of the statistical narrow-band correlated-k method to low-resolution spectral intensity and radiative heat transfer calculations effects of the quadrature scheme", International Journal of Heat and Mass Transfer, 43 (2000) 3119-3135. [18] M. Frenklach, D. W. Clary, W. C. Gardiner Jr., S. E. Stein, "Detailed kinetic modeling of soot formation in shock-tube pyrolysis of acetylene," Proceedings of the Combustion Institute, 20 (1984) 887-901. [19] M. Frenklach, D. W. Clary, W. C. Gardiner Jr., S. E. Stein, "Effect of fuel structure on pathways to soot," Proceedings of the Combustion Institute, 21 (1986) 1067-1076. [20] J. Appel, H. Bockhorn, M. Frenklach, "Kinetic modeling of soot formation with detailed chemistry and physics: Laminar premixed flames of C2 hydrocarbons," Combustion and Flame, 121 (2000) 122-136. [21] R. A. Dobbins, R. A. Fletcher, W. Lu, "Laser microprobe analysis of soot pre-cursor particles and carbonaceous soot," Combustion and Flame, 100 (1995) 301-309.
70

[22] H. Kellerer, R. Koch, S. Wittig, "Measurements of the growth and coagulation of soot particles in a high-pressure shock tube," Combustion and Flame, 120 (2000)188-199. [23] A. D'Alessio, A. C. Barone, R. Cau, A. D'Anna, P. Minutolo, "Surface de -position and coagulation efficiency of combustion generated nanoparticles in the size range from 1 to 10 nm, " Proceedings of the Combustion Institute, 30 (2005) 2595-2603. [24] K. G. Neoh, J. B. Howard, A. F. Sarom, "Effect of oxidation on the physical structure of soot," Proceedings of the Combustion Institute, 20 (1984) 951-957. [25] M. Fairweather, W. P. Jones, R. P. Lindstedt, "Predictions of radiative transfer from a turbulent reacting jet in a cross-wind," Combustion and Flame, 89 (1992) 45-63. [26] M. D. Smooke, C. S. McEnally, L. D. Pfefferle, R. J. Hall, M. B. Colket, "Computational and experimental study of soot formation in a coflow, laminar diffusion flame," Combustion and Flame, 117 (1999) 117-139. [27] S. H. Park, S. N. Rogak, W. K. Bushe, J. Z. Wen, M. J. Thomson, "An aerosol model to predict size and structure of soot particles," Combustion Theory and Modeling, 9 (2005) 499513. [28] R. J. Santoro, H. G. Semerjian, R. A. Dobbins, "Soot particle measurements in diffusion flames," Combustion and Flame, 51 (1983) 203-218. [29] M. D. Smooke, M. B. Long, B. C. Connelly, M. B. Colket, R. J. Hall, "Soot formation in laminar diffusion flames," Combustion and Flame, 143 (2005) 613-628. [30] N. A. Eaves, A. Veshkini, C. Riese, Q. Zhang, S. B. Dworkin, M. J. Thomson, "A numerical study of high pressure, laminar, sooting, ethaneÂ­air coflow diffusion flames," Combustion and Flame, 159:10 (2012) 3179-3190. [31] A. Veshkini, S. B. Dworkin, M. J. Thomson, "A soot particle surface ageing model applied to laminar ethylene/air diffusion flames," Combustion Institute Canadian Section Spring Technical Meeting, Toronto, Ontario, May 13-16, 2012.

71

[32] J. Z. Wen, M. J. Thomson, M. F. Lightstone, S. N. Rogak, "Detailed kinetic modeling of carbonaceous nanoparticle inception and surface growth during the pyrolysis of C6H6 behind shock waves," Energy and Fuels, 20 (2006) 547-559. [33] S. B. Dworkin home page, access date August 21, 2013, Retrieved from http://dworkin.blog.ryerson.ca/ [34] F. Kreith, "Fluid Mechanics," Boca Raton (2000). [35] N. A. Eaves, "The effect of pressure and conjugate heat transfer on soot formation modelling," M.Sc. Thesis, University of Toronto, 2012. [36] A. Ciajolo, A. D'Anna, R. Barbella, A. Tregrossi, A. Violi, "The effect of temperature on soot inception in premixed ethylene flames," Symposium (International) on Combustion, (1996) 2327-2333. [37] G. Blanquart, H. Pitsch, "Analyzing the effects of temperature on soot formation with a joint volume-surface-hydrogen model," Combustion and Flame, 156 (2009) 1614-1626. [38] S. C. Graham, "The collisional growth of soot particles at high temperatures," Symposium (International) on Combustion, 16 (1977) 663-669. [39] B. Zhao, K. Uchikawa, H. Wang, "A comparative study of nanoparticles ion premixed flames by scanning mobility particle size, small angle neutron scattering, and transmission electron microscopy," Proceeding Combustion Institute, 31 (2007) 851-860. [40] S. J. Harris, A. M. Weiner, "Surface growth of soot particles in premixed ethylene/air flames," Combustion Science and Technology, 31 (1983) 155-167. [41] S. R Turns, "An introduction to combustion: concepts and applications," McGraw Hill (2011). [42] Y. Xin, J. P. Gore, K. B. McGrattan, R.G. Rehm, H. R. Baum, "Fire dynamics simulation of a turbulent buoyant flame using a mixture-fraction-based combustion model," Combustion and Flame, 141 (2005) 329-335.

72

[43] A. Santamaria, N. Yang, E. Eddings, F. Mondragon, "Methane combustion over unsupported iron oxide catalysts," Combustion and Flame, 157 (2010) 33-42. [44] L. B. Ebert, J. C. Scanlon, C. A. Clausen, "On the identity of soot," Carbon, 28 (1990) 912914. [45] F. Xia, G. S. Tablonsky, R. L. Axelbaum, "Numerical study of flame structure and soot inception interpreted in carbon-to-oxygen atom ratio space," Proceeding of the Combustion Institute, 34 (2013) 1885-1892. [46] A. Galvez, M. Herlin-Boime, C. Reynaud, C. Clinard, J. N. Rouzaud, "Carbon nanoparticles from laser pyrolysis," Carbon, 40 (2002) 2775-2789. [47] F. Bisetti, G. Blanquart, M. E. Mueller, H. Pitsch, "On the formation and early evolution of soot in turbulent nonpremixed flames," Combustion and Flame, 159 (2012) 317-335. [48] I. Glassman, R. A. Yetter, "Combustion," Elsevier (2008). [49] MATLAB version R.10.0. Natick, Massachusetts: The MathWorks Inc., 2010. [50] W.P. Silva, C.M.D.P.S., LAB Fit Curve Fitting Software (Nonlinear Regression and Treatment of Data Program) V7.2.48 (1999-2011), online, available at the world wide web at :< www.labfit.net>, date of access: September, 2013. [51] Silverfrost Fortran 95 for Windows version 7.00, 2012. [52] C. R. Shaddix, K. C. Smyth, "Laser-induced incandescence measurements of soot production in steady and flickering ethane, propane, and ethylene diffusion flames," Combustion and Flame, 107 (1996) 418-452

73

7. Appendices

7.1 Appendix A

clc A=esi; B=zeros(30,30,30,1); C=zeros(1,27000); D=zeros(800,4); E=zeros(800,4); ii=0; kk=0; jj=0; for i=0:30 for j=0:30 for l=0:30 kk=0; for k=1:4000 if (A(k,2)>=0.0030166666*i && A(k,2)< 0.003016666*(i+1)) if (A(k,3)>=5.10366666*j && A(k,3)< 5.10366666*(j+1)) if (A(k,4)>=0.000245*l && A(k,4)< 0.000245*(l+1)) kk=kk+1; jj=jj+1; ii=ii+1; if (A(k,2)>=0.004525-0.00301704/2 && A(k,2)<0.004525+0.00301704/2) if (A(k,3)>=68.8995-5.1032/2 && A(k,3)< 68.8995+5.1032/2) if (A(k,4)>=0.001348-0.000245/2 && A(k,3)< 0.001348+0.000245/2) D(jj,1)=A(k,1); D(jj,2)=A(k,2); D(jj,3)=A(k,3); D(jj,4)=A(k,4) end end end B(i+1,j+1,l+1,1)=B(i+1,j+1,l+1,1)+A(k,1); end end end C(i+1+31*(j)+961*l,1)=(0.0030166666/2.+0.0030166666*i); C(i+1+31*(j)+961*l,2)=5.10366666/2.+5.10366666*j; C(i+1+31*(j)+961*l,3)=0.000245/2.+0.000245*l; C(i+1+31*(j)+961*l,4)=B(i+1,j+1,l+1,1)/kk; end
74

end end end

7.1 Appendix B

This code written in MATLAB [49] predicts soot concentration based on CFD modeling data from a 2D table. The code receives 2D table and also CFD modeling data as entries and calculates the interpolated amount of soot concentration as an output. clc A_table=data_table; A_code=data_code; A_out=zeros(194,1); for i=1:194 for j=1:29 if (A_code(i)>=A_table(j,1)&& A_code(i)<A_table(j+1,1)) A_out(i)=A_table(j+1,2)-((A_table(j+1,2)A_table(j,2))/(A_table(j+1,1)-A_table(j,1)) )*(A_table(j+1,1)A_code(i)) end if (A_code(i)>=A_table(30,1)) A_out(i)=A_table(j+1,2)-((A_table(j+1,2)A_table(j,2))/(A_table(j+1,1)-A_table(j,1)) )*(A_table(j+1,1)A_code(i)) end end end

75

7.2 Appendix C

This code written in MATLAB [49] predicts soot concentration based on CFD modeling data from a 3D table. The code receives 3D table and also CFD modeling data as entries and calculates the interpolated amount of soot concentration as an output. Clc close all A_table=data_table; A_code=data_code; A_out=zeros(194,1); for i=1:194 %for k=1:194 for j=1:870 k=i; if(A_code(i,1)>=A_table(j,1)&& A_code(i,1)<A_table(j+30,1)) if (A_code(k,2)>=A_table(j,2)&& A_code(k,2)<A_table(j+1,2)) d1=abs(A_code(i,1)-A_table(j,1)); d2=abs(A_code(i,1)-A_table(j+30,1)); d3=abs(A_code(k,2)-A_table(j,2)); d4=abs(A_code(k,2)-A_table(j+1,2)); k1=(d4/(d3+d4))*(d2/(d1+d2)); k2=(d3/(d3+d4))*(d2/(d1+d2));

76

k3=(d4/(d3+d4))*(d1/(d1+d2)); k4=(d3/(d3+d4))*(d1/(d1+d2));

A_out(k)=k1*A_table(j,3)+k2*A_table(j+1,3)+k3*A_table(j+30,3)+k* A_table(j+30+1,3) end end end for j=871:900 if (A_code(i,1)>=A_table(j-30,1)&& A_code(i,1)<A_table(j,1)) if (A_code(k,2)>=A_table(j,2)&& A_code(k,2)<A_table(j+1,2)) d1=abs(A_code(i,1)-A_table(j-30,1)); d2=abs(A_code(i,1)-A_table(j,1)); d3=abs(A_code(k,2)-A_code(j,2)); d4=abs(A_code(k,2)-A_code(j+1,2)); k1=(d4/(d3+d4))*(d2/(d1+d2)); k2=(d3/(d3+d4))*(d2/(d1+d2)); k3=(d4/(d3+d4))*(d1/(d1+d2)); k4=(d3/(d3+d4))*(d1/(d1+d2)); A_out(k)=k1*A_table(j-30,3)+k2*A_table(j30+1,3)+k3*A_table(j,3)+k4*A_table(j+1,3)+1 end ; ;

77

end end end end

7.3. Appendix D

This code written in MATLAB [49] predicts soot concentration based on CFD modeling data from a 4D table. The code receives 4D table and also CFD modeling data as entries and calculates the interpolated amount of soot concentration as an output.
clc

close all A_table=data_table; A_code=data_code; A_out=zeros(300,1); c1=zeros(8,2); c2=zeros(8,2); for i=1:184 for j=1:29100 k=j; c=j; if (A_code(i,1)>=A_table(j,1)&& A_code(i,1)<A_table(j+1,1)) if (A_code(i,2)>=A_table(k,2)&& A_code(i,2)<A_table(k+31,2)) if (A_code(i,3)>=A_table(c,3)&& A_code(i,3)<A_table(c+961,3)) zm=abs(A_table(c,3)-A_table(c+961,3)); ym=abs(A_table(k,2)-A_table(k+31,2)); xm=abs(A_table(j,1)-A_table(j+1,1)); z1=abs(A_code(i,3)-A_table(c,3));

78

z2=abs(A_code(i,3)-A_table(c+961,3)); y1=abs(A_code(i,2)-A_table(k,2)); y2=abs(A_code(i,2)-A_table(k+31,2)); x1=abs(A_code(i,1)-A_table(j,1)); x2=abs(A_code(i,1)-A_table(j+1,1)); A_out(i)=(z2/zm)*(y2/ym)*(x2/xm)*A_table(j,4)+(z2/zm)*(y2/ym)*(x 1/xm)*A_table(j+1,4)+(z2/zm)*(y1/ym)*(x2/xm)*A_table(k+31,4)+(z1 /zm)*(y2/ym)*(x2/xm)*A_table(c+961,4)+(z2/zm)*(y1/ym)*(x1/xm)*A_ table(c+32,4)+(z1/zm)*(y2/ym)*(x1/xm)*A_table(c+962,4)+(z1/zm)*( y1/ym)*(x1/xm)*A_table(c+961+31+1,4)+(z1/zm)*(y1/ym)*(x2/xm)*A_t able(j+961+31,4); end end end end for j=26100:27000 k=j; c=j; if (A_code(i,1)>=A_table(j,1)&& A_code(i,1)<A_table(j+1,1)) if (A_code(i,2)>=A_table(k-30,2)&& A_code(i,2)<A_table(k,2)) if (A_code(i,3)>=A_table(c-900,3)&& A_code(i,3)<A_table(c,3)) zm=abs(A_table(c,3)-A_table(c-900,3)); ym=abs(A_table(k,2)-A_table(k-30,2)); xm=abs(A_table(j,1)-A_table(j+1,1)); z1=abs(A_code(i,3)-A_table(c-900,3)); z2=abs(A_code(i,3)-A_table(c,3)); y1=abs(A_code(i,2)-A_table(k-30,2)); y2=abs(A_code(i,2)-A_table(k,2)); x1=abs(A_code(i,1)-A_table(j,1)); x2=abs(A_code(i,1)-A_table(j+1,1)); A_out(i)=(z2/zm)*(y2/ym)*(x2/xm)*A_table(j1,4)+(z2/zm)*(y2/ym)*( x1/xm)*
79

A_table(j-930,4)+(z2/zm)*(y1/ym)*(x2/xm)*A_table(k+30900,4)+(z1/zm)*(y2/ym) *(x2/xm)*A_table(c,4)+(z2/zm)*(y1/ym)*(x1/xm)*A_table(c+31900,4)+(z1/zm)* (y2/ym)*(x1/xm)*A_table(c+1,4)+(z1/zm)*(y1/ym)*(x1/xm)*A_table(c +31,4) +(z1/zm)*(y1/ym)*(x2/xm)*A_table(j+30,4); end end end end end

80


