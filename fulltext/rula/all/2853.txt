FLIGHT SIMULATOR SYSTEM FOR RESEARCH AND TEACHING APPLICATION

by

Siju Thomas, B.E Aeronautical Engineering Anna University, 2010

A report presented to Ryerson University

in partial fulfillment of the requirements for the degree of Master of Engineering in the Program of Aerospace Engineering

Toronto, Ontario, Canada, 2013 © Siju Thomas

Author's Declaration
AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A THESIS I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research. I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my thesis may be made electronically available to the public.

ii

Abstract
The rapid development of digital computers have led simulation to play a major role in the field of engineering by providing answer to questions that were impossible to clarify during the design phase a few years ago. This advancement has led simulation to play a major role during testing and development of new flight designs. The aerospace department at Ryerson University noticed the requirement of flight simulators that can be used for teaching and aid in research topics related to flight dynamics and stability control. The setting up of Mixed reality Immersive Motion Simulator (MIMS) lab made this possible. This project focused on conducting detailed study of all the software used in the flight simulator. A prototype of the flight simulator was set-up and used as the test bed to have hands-on experience of the simulation software. The project also looked into the capabilities of CAE Flightscape Insight software. This software is used by airlines, air transport authorities and manufactures around the globe for data analysis and simulation. The report gives a brief introduction to flight simulation and the different models that are used to recreate the flight. The author conducted a detailed study and explains in brief, the use of software acquired to create flight instrument panel for different aircrafts. The architecture of the prototype and the main Ryerson flight simulator is described and a detailed study of the MaxFlight FS3000 full motion flight simulator is carried out. The prototype was built where all software was tested and the best were selected to be installed in the Ryerson main simulator. The later part of the report discuss in detail a methodology created by the author to integrate the data obtained from Flightscape Insight with the MaxFlight full motion flight simulator. The methodology created was first tested to change the Prepar3d's dynamic data in the prototype. This methodology was later modified and used to change simulation in the full motion simulator which uses Prepar3d to run the simulation.

iii

Acknowledgements
The author wishes to offer his sincerest gratitude to his supervisor, Dr. Joon Chung, who has supported the project with his patience and knowledge whilst allowing the author room to work in his own way. The invaluable assistance and support received from fellow colleagues is also greatly appreciated. Besides author would like to thank his parents and friends, who provided constant support and encouragement in all difficulties.

iv

Contents
List of Tables ............................................................................................................................... viii List of Figures ................................................................................................................................ ix Nomenclature ................................................................................................................................. xi 1. Introduction ............................................................................................................................. 1 1.1 What is simulation?............................................................................................................... 1 1.2 History................................................................................................................................... 2 1.2.1 The Early Simulation ..................................................................................................... 3 1.2.2 Analog Computing ......................................................................................................... 4 1.2.3 Digital Computation....................................................................................................... 5 1.3 Benefits of Simulators........................................................................................................... 6 2. Simulation Models .................................................................................................................. 9 2.1 Equations of Motion ............................................................................................................. 9 2.2 Aerodynamic and Engine Models ....................................................................................... 13 2.3 Gear and Weather Models .................................................................................................. 14 2.4 The Output Systems ............................................................................................................ 16 2.5 Hardware's Data Acquisition .............................................................................................. 17 3. Software Review ................................................................................................................... 18 3.1 X-Plane ............................................................................................................................... 18 3.1.1 Plane Maker ................................................................................................................. 19 3.1.2 Working of X-Plane ..................................................................................................... 21 3.2 Prepar3d .............................................................................................................................. 22 3.2.1 Model Converter and Placer ........................................................................................ 23 3.2.2 The Software Development Kit (SDK)........................................................................ 23 v

3.3 SimAVIO ............................................................................................................................ 26 3.3.2 The Creation of Instrument Panel ................................................................................ 28 3.4 CAE Flightscape ................................................................................................................. 29 3.4.1 Flightscape Insight Animation ..................................................................................... 30 3.4.2 Insight Analysis and Insight FDM ............................................................................... 31 3.5 Simulink .............................................................................................................................. 32 4. Hardware ............................................................................................................................... 34 4.1 Flight Controls - Yoke (Control Column) ...................................................................... 34 4.2 Flight Controls ­ Rudder Pedals ..................................................................................... 35 4.3 Frontal Display and Main Instrument Panel ................................................................... 35 4.4 Processing Units.............................................................................................................. 36 4.5 Cockpit Audio System .................................................................................................... 38 5. The Simulator........................................................................................................................ 39 5.1 Prototype ............................................................................................................................. 40 5.2 The Main Flight simulator .................................................................................................. 41 5.3 MaxFlight Full Motion Simulator....................................................................................... 45 5.3.1 The Hardware in MaxFlight......................................................................................... 46 5.3.2 The software and control window................................................................................ 49 6. Integrate Flightscape to the MaxFlight simulator ................................................................. 50 6.1 Data Acquisition ................................................................................................................. 51 6.1.1 Instruments for data acquisition ................................................................................... 51 6.1.2 Gathering the RAW data.............................................................................................. 54 6.2 The Customization of Prepar3d Model ............................................................................... 55 7. 8. Conclusion ............................................................................................................................ 58 Future Work .......................................................................................................................... 60 vi

Appendix 1 .................................................................................................................................... 64 Appendix 2 .................................................................................................................................... 66 Appendix 3 .................................................................................................................................... 67 Appendix 4 .................................................................................................................................... 69

vii

List of Tables
Table 1 Longitudinal Directional Derivatives ------------------------------------------------------------ 12 Table 2 Lateral Directional Derivatives ------------------------------------------------------------------- 13 Table 3 Ryerson main simulator processor specification ----------------------------------------------- 37 Table 4 Ryerson simulator second processor specifications ------------------------------------------- 37 Table 5 Specification of the prototype processing unit ------------------------------------------------- 38 Table 6 Comparison of Different Simulation Software ------------------------------------------------- 43

viii

List of Figures
Figure 1 Different types of simulation depending on the purpose.................................................. 2 Figure 2 The Antoinette Trainer [3]................................................................................................ 3 Figure 3 The Link Trainer along with the instructor's table [3]...................................................... 4 Figure 4 Tactical Avionics System Simulator at Ft. Monmouth, New Jersey [7] .......................... 5 Figure 5 Modern day simulation package [9] ................................................................................. 6 Figure 6 A concept Aircraft undergoing simulation testing ........................................................... 7 Figure 7 A Fixed based Boeing 787 flight Simulator ..................................................................... 8 Figure 8 The architecture of the flight Simulator ........................................................................... 9 Figure 9 The Standard Atmosphere Graph ................................................................................... 15 Figure 10 X-Plane screenshot of a military aircraft approaching the airport ............................... 16 Figure 11 The CH data acquisition hardware (Pedal, Throttle quadrant and Yoke) .................... 17 Figure 13 The X-Plane Software loading screenshot ................................................................... 19 Figure 14 The Wire frame mesh in the plane maker software ...................................................... 20 Figure 15 X-Plane model showing the position of the element break and force created ............ 21 Figure 16 Prepar3d Aircrafts Selections Window ........................................................................ 23 Figure 17 A simulation of Beachcraft aircraft tail view ............................................................... 24 Figure 18 The Found Bush Hawk Cockpit designed at Ryerson .................................................. 27 Figure 19 Screenshot of Flightscape Insight Viewer [23] ............................................................ 29 Figure 20 Flightscape Animation screenshot [24] ........................................................................ 30 Figure 21 A Simulink model to calculate the longitudinal movements with its subsystem ......... 32 Figure 22 A Hotseat triple screen flight simulator [17] ................................................................ 34 Figure 23 Architecture of the prototype........................................................................................ 41 Figure 24 CATIA Model of the Main Flight Simulator ............................................................... 42 Figure 25 The Ryerson Simulator architecture ............................................................................. 44 Figure 26 The MaxFlight FS3000 installed at a museum [27] ..................................................... 45 Figure 27 Dimensions of the MaxFlight FS3000 [27] .................................................................. 46 Figure 28 The joystick control in MaxFlight FS3000 flight simulator [27] ................................. 48 Figure 29 The method for Flight Data Acquisition. ..................................................................... 55 Figure 30 The conversion of RAW data to simulation in Prepar3d ............................................. 56 ix

Figure 31 Flowchart of the Raw data conversion and modification of model in prepar3d being implemented into the MaxFlight FS3000 ..................................................................................... 57

x

Nomenclature
a*atm amsl b  sound speed ratio speed of sound at mean sea level wing span, ft mean aerodynamic chord, ft acceleration due to gravity altitude above sea level, ft X body axis moment of inertia Y body axis moment of inertia X-Z body axis moment of inertia mass of the aircraft X body axis angular velocity component Y body axis angular velocity component Z body axis angular velocity component wing reference area dynamic pressure engine thrust temperature mean sea level X body axis translational velocity component Y body axis translational velocity component Z body axis translational velocity component pressure at mean sea level reference velocity true air speed state space rate of change vector longitudinal center of gravity location x- force derivative with respect to i z- force derivative with respect to i pitching moment derivative with respect to i

g h Ix Iy Ixz m p q r S Q T Tmsl u v w pmsl uo Vt 

Xcg Xi Zi Mi

xi

where i is the following u   forward speed angle of attack time rate of change of angle of attack pitch axis angular rate elevator control deflection throttle control deflection yaw axis velocity component time rate of change of yaw axis velocity component

q

e T w  

  a atm e r

angle of attack sideslip angle aileron control surface deflection pressure ratio elevator control surface deflection rudder control surface deflection

xii

1. Introduction
1.1 What is simulation?
The use of computational domain for the imitation of real life system and reproducing them in the environment created by solving different equation or models can be referred to as simulation. Computer simulation is at present an integral part of all research and development in subjects related to physics, chemistry, biology, medicine, psychology, social science, and engineering. Figure 1 shows different types of simulation like structural mechanics, CFD and flight simulation that are used for engineering purposes at present. All simulations are defined by different models which help simulate real life condition of the system in the computational domain. These models represent equations corresponding to different behaviours or characteristics of the particular system/process within a physical environment. The model is representation of the system, whereas operation of the system over time is simulation. These models and subsystem can be used to research and gain new insight into upcoming technologies or explore its limitation. It can also be used to analyse the performance of certain very complex system by using analytical technique. The simulation requires a very sophisticated computational domain to solve each of the defined models. Therefore, the accuracy and speed of solving the model always depends on the computing power and the accuracy of the model developed. Simulation refers to an instance when the model is run or different models run simultaneously. The development of a simulation always refers to development of the models that can be used to simulate an object and recreate the most accurate behaviour of that object in a particular environment. Simulations have different purpose depending on the field of study or the purpose of simulation. The most common areas where simulation is used are optimization (fluid and structural), safety engineering, testing, training, education, and video games. There are different types of simulations like physical simulation, interactive simulation and human in loop simulation. [1] These simulations can be used to visualise effects of different conditions and corresponding courses of action taken by the user. In this report the main focus is laid upon interactive simulation which deals with physical simulation. The simulation used includes a human operator so that each time the outcome will differ based on given input like in a flight 1

simulator. Simulation is used to recreate the system when they cannot be used for gathering the data for analysis. This can be due to problems related to accessibility, or it's dangerous to operate, or the system is still in development phase or it may simply not exist.

Figure 1 Different types of simulation depending on the purpose Simulations have different purpose depending on the field of study or the purpose of simulation. The most common areas where simulation is used are optimization (fluid and structural), safety engineering, testing, training, education, and video games. There are different types of simulations like physical simulation, interactive simulation and human in loop simulation. [1] These simulations can be used to visualise effects of different conditions and corresponding courses of action taken by the user. In this report the main focus is laid upon interactive simulation which deals with physical simulation. The simulation used includes a human operator so that each time the outcome will differ based on given input like in a flight simulator. Simulation is used to recreate the system when they cannot be used for gathering the data for analysis. This can be due to problems related to accessibility, or it's dangerous to operate, or the system is still in development phase or it may simply not exist.

1.2 History
Simulation developed in parallel with the rapid advancement in the field of information technology. The large-scale development of simulation gained importance with the Manhattan 2

Project during World War II, which was used to model the process of nuclear detonation [2]. But the actual use of simulation for flight training dates back much earlier than the Manhattan project. The first type of flight simulator was not based on computation. It was a simple barrel mounted setup. The Antoinette trainer seen in figure 2 was the first devise used as a mechanical simulator. The trainer had two wheels mounted on the left and right side of the pilot, where one is used for the pitch and the other for the roll. These types of simple mechanical systems were used during the early part of the nineteenth century for the purpose of pilot training. The mechanical systems could simulate the flight characteristics which filled the need of effectively prepare the pilots for the task of flying.

Figure 2 The Antoinette Trainer [3]

1.2.1 The Early Simulation
The Antoinette trainer or the barrel trainer was the first simulator for the purpose of flight training. These trainers were not effective to solve the problem of training the pilots, but laid the foundation for different types of simulators to follow. During the World War I, double seated trainer aircrafts were developed to help new recruits for their initial training. [4] These training were expensive and could be fatal. Then the link trainers were developed in 1927, which was the most reasonable simulator at that time. The link trainer used pneumatic systems to tilt the cockpit and used pressure gauges to recreate the aircraft's instrument panels. Later the link model was used to simulate both the environment inside the cockpit and also the dynamic behavior of the aircraft using the empirical models. Link trainers were used until the 1950s and kept updating 3

with the latest instrumentation and dynamics of the aircrafts. The instructors were provided with a plotting table to monitor the track flown and give feedback to the students.

Figure 3 The Link Trainer along with the instructor's table [3]

1.2.2 Analog Computing
Invention of analog devices led simulation industry to shift its focus towards the electronic era during the Second World War. Feedback control systems evolved with development of servomechanism. The high gain amplifier with resistive feedback was able to provide acceptable values solving the equations of motion. The amplifiers with capacitive feedback provided an integrating action by which the differential and integral equation could be solved. [5] These characteristics of analog system in developing and solving the equations evoked special interest, which lead to the development of analogue computation as major engineering discipline. The improvements in the field of analogue computation helped in increasing the fidelity of the flight models using the amplifiers and potentiometers. Using these electrical devices, a circuit could be configured to model the differential equations of an aircraft's dynamic model. This was used to replace the mechanical system used. [6] These systems had a lot of pros but the cons were also large as the values produced were unreliable. This led to the need of frequent and complicated calibration and the equation had to be scaled such that it does not over shoot the voltage range. These electrical circuits were oversized and had high voltage requirements. The simulator used a number of subsystems which consisted of these circuits. The final size of the 4

simulator was huge sizing up to a full complex as seen below in Figure 4, which is an analog system developed for the tactical mission training for the US air force. This was the period which saw the commercialisation of the simulation industry with airlines appreciating the use of simulators for training pilots. The interest of commercial airliners positively changed the industry as a whole. It led to further development in simulation by using newer technology and producing high fidelity simulators to train pilots.

Figure 4 Tactical Avionics System Simulator at Ft. Monmouth, New Jersey [7]

1.2.3 Digital Computation
With the development of transistors in the mid-1960 came the age of digital computation. There was rapid development in digital computation with the introduction of main frame computers. The processor speeds increased and simultaneous instruction could be processed by the computer at the same time. [6] This computing power along with CRT (cathode ray tubes) and projectors were used in the next generation of simulation devices. The advancement in development of semiconductors paved way for the creation of newer and faster processors having higher memory and storage capacity. This helped in the development of different high fidelity simulators and computational devices. Flight simulation was at the forefront of these developments with the use of the high speed processors and newer more dynamic visual projections. Simulation jumped to a whole new level where the dynamic equation could be solved in real time and real flight experience could be provided without leaving the ground. The advancement was not limited to the visual and computation systems of the simulator. Motion 5

based flight simulators were developed having high fidelity, which could simulate the same effect as that experienced in the aircraft during flying. The G-force and the corresponding human factor analysis could be analysed on ground. The newer system led to the development of more advanced technique for solving problems that were never foreseen and helped in training new pilots. The development and use of these instruments were taken more seriously with the Civil Aviation Authority (CAA) and the Federal Aviation Administration (FAA) forming guidelines for the certification of simulators. These guidelines form the basis of the International Civil Aviation Organisation (ICAO) document for flight simulators. [8] These developments also saw the increase of research in simulation for the purpose of flight training and also for the ease of studying subjects like flight dynamics and stability control. The Figure 5 below shows a whole variety of flight training devices provided by CAE that are being used for different purposes. The simpler devices can be used to provide hand-on experience for studying flight characteristics and also help researchers. The more sophisticated devices could be used for providing training for pilots.

Figure 5 Modern day simulation package [9]

1.3 Benefits of Simulators
Flight simulators have now found a very important and essential part to play in both the civil and military pilot training. These devices allow pilots and crews to practice and prepare them for potentially life threatening situations that can't be replicated anywhere other than the simulator. This system allow military pilots to rehearse their complex missions and dangerous manoeuvres giving them ample training and experience before moving to a real life mission.

6

With safety being the priority of the aviation industry, operations of all related activities are conducted after proper training. Simulators have added to the efforts of the industry by reducing the fatalities involved in training by providing the pilot and crew with hands on experience before taking up live flights. The advancement in simulation techniques have enabled airlines to incorporate different failure or accident situation during the training of their pilots and crew so that they are aware of similar situations. One such success story is of the Apollo 13 crew, where they were able to cope with the malfunction on the spacecraft due to many hours of simulator training. [10] Another major benefit of simulator in the profit driven airline industry is by cutting short the amount spend on training. This is achieved by the reduction in actual amount of airborne hours and converting the training into the ground based simulators, which is estimated to be ten times cheaper than the real flight training.[6] Simulators can operate throughout the year working continuously for almost 23 hours a day with just periodic stops to change the occupants. Simulator is the best option for budget airlines and other operators who otherwise will have to invest heavily on just training. This also helps in training pilots for a new type of aircraft being purchased, where pilots and other crews can be ready with hands on experience on the simulator. This requires very less time on the aircraft to familiarize. The new systems developed in recent times have made the maintenance of the simulator really easy and any faults in the system can be regularly monitored in order to give a very reliable system. If the simulation system complies with the CAA and FAA guidelines, the hours spend on the simulator can be converted into flying hours. These hours are a must for completing pilot license training.

Figure 6 A concept Aircraft undergoing simulation testing

7

The next major benefit of the flight simulator is for its engineering uses. The use of simulation for engineering purposes can be seen in multiple disciplines. This range from sophisticated systems used to design new aircrafts, just like the concept flight developed in simulation shown in figure 6 to those used by maintenance engineers. The simulation devices are also used by engineering students for the better understanding of courses like flight dynamics and stability and control. These tools give an edge to the engineers who can use the simulator during the design phase to study faults and then make design changes. Today sufficient analytical tools exist to predict the stability and control characteristics of an aircraft design with a high level of accuracy before the first prototype is built. This will save both time and money for the manufacturers as faults would be found during the initial design phase rather than the later part (e.g: first test flight) as it would have been if not for the simulator. These benefits have led to research simulator's becoming an inevitable tool while studying the handling characteristics and designing the aircraft's control systems

Figure 7 A Fixed based Boeing 787 flight Simulator [3] The Flight Simulator at Ryerson University is being setup keeping the engineering benefits in mind so that the system can be used as a tool to help students understand the courses better. This will be used for conducting research on topics related to flight dynamics and stability and control. The wide screen and dual seat cockpit mock-up of the Boeing 787 flight simulator in figure 7 can be used as a reference for the simulator to be fabricated. This will be detailed in the later part of this report. 8

2. Simulation Models
The main component that defines a flight simulator is the quality of simulation software. The software consists of a set of systems and subsystems that will predict the flying quality of the simulation. It consists of models that decide how different equations of motion and other data interfering with the simulated system will be solved. The input parameters for solving these equations are given to the system to solve either by the user or by using data sets in the software. The figure 8 below gives a typical organization of the flight simulator.

Figure 8 The architecture of the flight Simulator

2.1 Equations of Motion
The equations of motion determine the state of the simulator at any point of time; this can be considered the focal point which has to be solved in order to find the characteristics of the flight. The equations always depend on data that are inputted to the system to solve and output the desired results. The data input includes the pilot control, winds, aerodynamic data, the weather, the engine response etc... It is the equations of motion which will derive the flight 9

parameters like forces acting, attitude, altitude, heading and the velocities. In most flight simulators the equation of motion is updated at a rate of 50-60 times per second and the computed forces are applied to the aircraft simulated in 1/50-1/60th of a second. [6] The airplane have six degrees of freedom (DOF) three translational and three rotational along with numerous elastic degrees of freedom. The equation of motion for aircrafts use a bodyfixed coordinate system, as it is more convenient in selecting parameters like the center of mass which will lay on the origin of the coordinate system. The equation of motion for flight is a vast topic to be discussed in this report, so the author briefs only the dynamic stability of the aircraft in the longitudinal and lateral axis. The equations defined here are in the form of the first order state variable as given below x = Ax + B where A and B are the system matrix and x is the state vector while  gives the control vector The longitudinal state space equation in the time derivative from is given by
T x = u w  q 

(1)

(2)

state vector is defined as

The control vector that contains the elevator and thrust input deflection is given by = [e T]T (4)

x = [u w q ]T

(3)

Stability derivatives in the longitudinal direction can be formulated as Xu Xw 0 -g Zu Zw u0 0 A=   (Mu + Mw 0  Zu ) (Mw + Mw  Z w ) M q + M w  u0  0 0 1 0 Xe XT   Ze ZT   B= Z   M + M Z  Me + Mw  e  T  T w   0 0

(5)

The input control matrix for the longitudinal stability derivative is given by

(6)

These equations (1-6) will be solved by using the aerodynamic constants given in table 1 below. The lateral state space equation is also formulated in the first order differential format and is

10

represented by state vector, state variable and control vector as given above for the longitudinal motion. Then the lateral state vector in the time derivative from is given as  T x =  p r  x = [ p r ]T = [a r]T (7)

The state vector is defined as

(8)

The lateral control vector contains the aileron and rudder input deflection, and is given as (9)

Then the lateral state variable matrix and the input control matrix of the lateral stability derivative is formulated as  u0  A =  L N 0
Y Yp u0 Yr g cos 0 u0

The equation for lateral motion (7-11) can be solved by calculating the lateral stability derivatives as given in table 2. The equations to determine the motion of the aircraft can be solved using the coefficients or stability derivatives. Stability derivatives are dimensionless aerodynamic coefficients provided for calculating longitudinal movements and the pitching moment. The stability derivatives for equations (1-7) can be calculated as given in the tables below X ­ Force Derivatives Xu -QS(CDu + 2CD0 ) = mu0 Z ­ Force Derivatives Zu -QS(CLu + 2CL0 ) = mu0 Pitching Moment Derivatives Mu QSc (CMu + 2CM0 ) = Iy u0 M = QSc CM Iy

0   B =  Lu Nu  0

Lp N 1

- 1 -

Lr N 0

u0





 0   0  0 

(10)

 Lr   Nu  0 
u0

Yr

(11)

u forward speed  angle of attack

X =

-QS(CD - CL0 ) m

11

Z =

-QS(CL + CD0 ) m

 Rate of change of  q Pitch axis angular rate w yaw axis velocity component Xw =

Z =

-QSc CL 2mu0 -QSc CLq 2mu0

M =

QSc CM 2Iy u0 QSc  2 CMq QSc CM Iy u0 QSc  2 CM QSc CMe Iy 2Iy u2 0 2Iy u0

-QS(CD - CL0 ) -QS(CL + CD0 ) Zw = mu0 mu0 QSc CZ Zw  = mu0 Ze = m

Zq =

Mq = Mw =

w  Rate of change of w e elevator control deflection Xe = -QSCDe m

-QSCLe

Mw  = Me =

Table 1 Longitudinal Directional Derivatives The lateral motion of the aircraft can be found using equations in a similar way as done for the longitudinal equation. The equations (7-11) can be solved by finding out the aerodynamic coefficients that are dimensionless. The lateral stability derivatives are given as in the table below Y ­ Force Derivatives   =  20 Rolling Moment Derivatives  = p =   2  2 0  Yawing Moment Derivatives  = p =   2  2 0 

 sideslip angle p roll axis angular rate

 =

p  20 12

r yaw axis angular rate

 =

 2   = 2 0

 2   = 2 0

 aileron control deflection  rudder control deflection

 =  =

   

 =  =

   

 =  =

   

Table 2 Lateral Directional Derivatives These equations will compute the position of the aircraft in the lateral and longitudinal direction. The response will depend on the deflection in the rudder control and elevator control, computed together with other parameters. In this equation all other parameters will be derived from other models in the simulation and by inputting the stick deflection. This will help in computing the position. This will be done continuously at a rate of 50-60 times per second and the computed data are applied to the aircraft simulated in 1/50-1/60th of a second.

2.2 Aerodynamic and Engine Models
The aerodynamic models help compute the aerodynamic forces and moment to solve the simulation model just like the equations of motion. The different coefficients are defined as the function of other variables like the Angle Of Attack (AoA) or the Mach number. These databases are mostly obtained directly from the flight test data or from the wind tunnel test, and also possibly from the computational analysis (CFD) results. For aircraft manufactures and simulator developers the test data are of very high value and are never shared with universities or other institutions. So obtaining these specific data always determine the success of any simulation. For the purpose of simulation in the flight simulator the data that are provided by the commercial simulation software is used [appendix 4]. Ryerson can obtain these data from the research partners which will thereby help improve our understanding of different situations and help develop new aerodynamic models. The engine model gives specifics of the engine condition like the thrust produced and pressure developed due to the response of the pilot for certain engine controls. These engine parameters are derived by solving a set of equations using the data provided to the system. The primary necessity for any control system design is the data stored [11]. The type and model of 13

the engine contributes significantly to the state of flight so it is directly linked with different variables in the flight model. The models created for simulation don't give much importance to thermodynamics properties of the engine, but deals in-depth the engine's dynamics. This is used to derive engine thrust, fuel flow, engine pressure and rotation speed. This also includes failure modes of the engine that is acquired to simulate failures.

2.3 Gear and Weather Models
The gear model of an aircraft is used in simulation when it lands and taxies on the ground. The dynamics of the undercarriage is very different from any other dynamics of the aircraft. This data is very important to be provided as training for takeoff and landing is a priority for pilots. The combination of the aerodynamic effects at low speed and the dynamics of the undercarriage are combined to provide the actual replication of the situation. The incidence such as tyre burst and runway skids will require much detailed modeling of the undercarriage as well as the aerodynamic data. The atmosphere plays a very important role in the performance of the aircraft. The equation that is used to model the weather is straightforward and easy to implement. [12] These data are the input for many of the aerodynamic and engine model. Wind is a major contributor to the aircraft's handling and navigation. It directly affects the turbulence and flying qualities of the aircraft. In real life situation wind plays a very important part during the flight planning for airline operations. Simulations will use data acquired from different sources for creating the weather model. The major source includes weather monitoring companies or else data can be generated using different weather simulation software. With investigation into major air accidents, authorities have included the effects of microburst and wind shear into account for weather modeling [13]. The geo-potential altitude will take into account the reduction of gravity with change in altitude and it is given by h=+
R

(12)

The other constant in the atmosphere is the temperature lapse that is the rate at which temperature varies which can be found by T=TO-TLH 14 (13)

The Pressure is also another constant is computed by P=P0  
0 0  ln 0  

(14)

After getting the temperature and pressure of the air, the density can be calculated using the gas law
 0 

The atmospheric model also consist the speed of the sound that depends on the temperature of the air.

= .


(15)

These equations are all used to form the standard atmosphere model which is shown below in figure 9. The effect of the atmospheric properties follows that Boyle's law when inside the troposphere.

a=

0



(16)

Figure 9 The Standard Atmosphere Graph [12] 15

2.4 The Output Systems
The output systems used for flight simulation are the sound, visual and the motion systems. The visual system gives the user (pilot or training crew) real time visual images of the flight. The visual system is required to give a graphical representation of the dynamics and motion of the aircraft. The visual database contains fields, aircraft, roads, lakes, coasts, trees, forests, vegetation etc. as shown in figure 10. The quality of the visual output depends on the graphics engine that is used; this can also have an effect on the rendering of the images when the pilot makes different manoeuvres. This effect called as visual latency in always a problem if the computational speed is not appropriate.

Figure 10 X-Plane screenshot of a military aircraft approaching the airport The sound produced by these aircrafts is also an important factor for the fidelity of the flight, as flight is always a very noisy environment. The sound files are used to increase the fidelity of the system, these sound include engine noise, warning, alarm, radio, ground rubble, etc... The general practice of reproducing these sounds is to analyse the source of the sound and generating the appropriate waveform. [14] This is done using a digital signal processor which synthetically produces these sounds. There is another method where the real sound is recorded and stored, but this takes a longer time and required additional hardware to capture the exact sound. The other major output for the simulation is the motion based system. For a standard simulator there are six linear actuators which move into different positions to replicate the different effects the pilot would experience when airborne. The systems have very fast response actuators to eliminate jerked motions. The true motion of an aircraft can never be replicated on 16

the motion simulator, but this can be used to add fidelity of the system. The motion systems have actuation equations to move the platform to desired positions. The functions of a motion platform are done keeping the occupants safety as its top priority. The detailed explanation on the output systems used for Ryerson simulators will be detailed in chapter 3 and 4.

2.5 Hardware's Data Acquisition
Most of the professional flight simulators are an exact replica of the aircraft flight deck. They will have the primary flight controls, which includes every levers selector knobs and switches used in the aircraft as in figure 11 given below. These instruments mostly provide discrete data where as some of them provide analogue data. Most of the simulators have several hundred inputs which are handled by a single processor used for data acquisition.

Figure 11 The CH data acquisition hardware (Pedal, Throttle quadrant and Yoke) [15] The capturing of data is very critical for the consistency of the simulator. The software that acquires the data is responsible for excluding any delay that can form during the data capture. The delay happens mainly if an analogue system is used and the data have to be converted from analogue to digital using a converter. For the simulator designed the primary controls are provided with digital input and the instrument panel is provided using a digital touch screen, details of all the data acquisition instruments and technique are explained in chapter 4.

17

3. Software Review
The previous chapter discussed the different models used for creating a simulation and how these models can help recreate the behaviour of an aircraft in computational domain. With advancement in production and development of computing devices, the cost of fabricating flight simulators has come down. Software companies like Microsoft took advantage of this and created commercial flight simulation for gaming and training purposes. There are a number of commercially available software packages in the market which has incorporated aircraft dynamics to a certain level of accuracy. Some of the software is used by government agencies and manufacturers to study different aspects of flights dynamics during the design phase. Investigation authorities use them to visualise the final minutes of an accident. The software for Ryerson simulator was selected after conducting detailed study and reviewing the best and most viable options.

3.1 X-Plane
X-Plane is one among the most advanced simulation software, which has a very powerful solving mechanism available for personal computers. It is equipped with a large database having realistic aircraft models and sceneries. The engineering capabilities of X-Plane are well advanced and can be used to perform detailed flight dynamics analysis. The different tools available with this software can create and predict the flying qualities of fixed and rotary-wing aircraft with high precision. It can be used to predict the performance and handling of a flying object that have been modeled in the plane maker software. It is also a great tool for pilots, helping them stay sharp on their flying skill with help of simulators or a laptop having X-Plane. The same software can be used by engineers and researchers to predict how a new airplane or a modified aircraft will fly, and students can explore the field of flight dynamics. X-Plane has a comprehensive library of aircrafts ranging from gliders, propeller aircrafts and jetliners to very sophisticated space shuttles. The atmosphere model is also very elaborate, having details till the stratosphere and visual model of the earth in high resolution from 74O north to 60O south latitude. The user have the option to land at any of the 33,000 airports or test their flying skills trying to land on aircraft carriers, oil rigs, frigates that have been modeled to pitch and roll with the tossing of the waves. [15] Weather is modeled in variable form ranging from 18

clear skies and high visibility to thunderstorms with controllable wind, wind shear, turbulence, and micro bursts. Actual weather conditions can be downloaded from the internet, allowing users to fly in the exact same weather that exists at their current location [15]. The most important tool in the package for the engineers is the Plane Maker. This software allows users create custom aircraft or modify existing designs, and Airfoil Maker allows users create airfoil performance profiles custom designing airfoil. The detailed architecture of the software having tools to design and develop newer models led to the decision of selecting X-Plane as the primary simulation software for Ryerson simulator

Figure 12 The X-Plane Software loading screenshot

3.1.1 Plane Maker
Plane Maker is a program that is provided along with X-Plane that will help the user design aircrafts or make modification to existing designs. The software is very flexible and can be used to create nearly any design imaginable. But after creating the model, for obtaining the output characteristics the physical specifications of the airplane should be available. This includes parameters like weight, wing span, control deflections, engine power, airfoil sections, etc. The preliminary model of the aircraft is meshed and divided into a certain number of parts to calculate forces acting on each region. Figure 13 shows a model in the X-Plane meshing tool. XPlane uses the blade element theory and breaks the design into several parts. Then the software solves for the force and moment on each part and integrates it over the whole surface to find the parameters to predict how that plane will fly in the real world. 19

. Figure 13 The Wire frame mesh in the plane maker software The following steps provide a workflow sequence to be used for modeling in Plane Maker [16]: 1. Decide on an existing design or concept to be created. 2. Create the fuselage, wings, and the tail of the aircraft. This can be done by importing pictures of the aircraft or the CAD drawings to plane maker 3. Create secondary objects, such as landing gears and engine nacelles. 4. Setup systems and internal properties that include the engines, electrical systems, weight and balance, and viewpoint parameters. 5. Set up any additional features of the aircraft, such as added weapons or special controls. 6. Create a 2-D instrument panel. 7. Test-fly the aircraft in X-Plane and fine-tune the features of the aircraft from step 1-6 as needed. 8. Add textures, 3-D objects, extra liveries, etc. The aircraft models are saved as .acf files, which can be read by the X-Plane software. They also have customizable instrument panels and texture paint that can be used to increase the fidelity of the simulator [15]. X-Plane also has an Airfoil maker tool which can be used to custom design any airfoil if the appropriate data are obtained. The data required to model airfoil are the coefficient of lift 20

intercept, coefficient of lift slope, coefficient of lift, immediate drop at stall etc. This custom airfoil can be used for developing a new design. Also available are a library of existing airfoils which can be selected for building a wing and used with any design. [16] This software was reviewed and used in the lab to develop aircraft simulation for the found aircraft and KLA 100 which was a success. The aircraft was developed and test flown to the satisfaction of the users.

3.1.2 Working of X-Plane
X-Plane works in a very different way as compared to other normal flight simulation software. The program assimilates the aircraft shape and then computes the flying quality by using a familiar process known as 'blade element theory ' which is normally used to determine the behavior of the propeller. Using this principle the blade is broken down into several sections and the force acting on each element is determined. The forces are integrated along the length of the blade and also over one revolution to determine the force over the whole propeller in one whole revolution of the blade. The elements are broken down in X-Plane as shown in figure 14. The same principle is used in X-Plane, where the whole plane is divided into smaller elements and then integrated to get the force in the whole aircraft. The force is then converted into acceleration and then integrated to get velocity and then again integrated to get the position.

Figure 14 X-Plane model showing the position of the element break and force created During initialization X-Plane breaks the wing, stabilizers and the propellers into smaller elements as specified by the user. The number of elements is specified while creating the aircraft using plane maker. The maximum limit is set at ten elements per part. X-Plane will apply other 21

parameters like finite wing lift-slope reduction, finite-wing CLmax reduction, finite-wing induced drag, and finite-wing moment reduction appropriate to the aspect ratio, taper ratio, and sweep of the wing, horizontal stabilizer, vertical stabilizer, or propeller blade. The Compressible flow effects are considered using Prandtl-Glauert principle. [16] Then the forces acting on the aircraft are determined and the whole calculation is done over again and again with 15 cycles of calculation done in one second.

3.2 Prepar3d
Prepar3d is the simulation software from Lockheed Martin. This software was acquired from Microsoft and was previously called as the Flight Simulator X (FSX). This software provides a visual simulation platform that will allow users to create different scenarios dealing with aviation, maritime and ground vehicles. The atmosphere is modeled similar to other applications where the user can use models from any part of the virtual world, from the waters to sub orbital space. Prepar3D furthers the development of Microsoft ESP, which is an application that enables the simulation of the real world. Prepar3d have a huge library of aircrafts and plugin to choose from, where the plugin's are developed by enthusiasts and amateur developers. This wide access to the library is provided by maintaining compatibility with the FSX. This access allows all the add-ons used in FSX to be used within Prepar3D. Prepar3d also have an enhanced developer kit which can be used to custom design training methods according to the requirement of the user. It also has an external platform for simulation development known as Software Development Kit (SDK). This will enhance the user's accessibility to the simulation code and help customize and input data. The variation of the same aircraft like the ones shown in figure 15 is defined using the SDK. This will help differentiating different versions of the same aircraft and storing them in different files for user convenience. This is detailed in section 3.2.2. SDK is of much interest for engineers and researchers, as this platform can help update or custom design parameters which can then be used for simulation.

22

Figure 15 Prepar3d Aircrafts Selections Window

3.2.1 Model Converter and Placer
Model converter and model placer are the add-on software that can be used to customize the simulation scenery in Prepar3d. Model Placer is a very useful application that allows users to place large numbers of 3D models, such as trees and building along with other natural and manmade features on the Prepar3D globe in an automated fashion. The model placer application works on a command line tool that will first create a .xml file. This file will be used as an input to the bgl compiler (part of the SDK) to generate a feature placement bgl file. [17]. Model Converter is also a command line open flight model conversion tool. This tool allows users convert the flight models from any other simulation to the Prepar3D model format. This includes models such as buildings, trees and natural scenery along with man-made features that can be converted and placed in the simulation. Model Converter converts open flight to X files, which is a model exchange format that has a lot of similarities to .xml format. Then the converter tool XtoMDL is used to converts the X file to the final runtime model format *.mdl. [17]

3.2.2 The Software Development Kit (SDK)
Just like Plane maker and airfoil maker in X-Plane, SDK is a core component of Prepar3d. The simulation development kit consists of a set of tools that enables the creation and simulation of aircrafts and other objects from the real world. The primary application of 23

Prepar3d simulation development kit is the modeling of aircrafts, and the primary scenario incooperated is training. There are also other scenarios such as decision making support and game play that is envisaged. [18] In Prepar3d software package, Prepar3D.exe is the primary software which is the flight simulator and the SDK is the tool set that can be used for the creation of add-on components required for the simulation. The components that are created can be new models of aircraft, instruments, boats, buildings and other structures. The most attractive feature of the SDK is its large platform of object creation kits that can be used to develop and modify all the components of the simulation. The SDK contains mainly four major utility kits Core Utilities Kit Environment Kit Mission Creation Kit SimObject Creation Kit Core Utilities Kit The core utility kit contains the main interface that provides programmers the variable that can be used to change the aerodynamic data and the camera configuration. This helps the user define the position of the cameras and customize the simulation view, like the tail view in figure 16 or a flyby view. It also has a compiler for compiling the xml files. The main function available in this kit is the Simconnect interface that is used by the programmers. This function allows users to modify the simulation using a programming language; the main programming language used C.

Figure 16 A simulation of Beachcraft aircraft tail view 24

This component of SDK also provides the tools that can be used to custom design add-on modules that are used on the simulator. It also provides access to the simulation variables. The simulation variables help define or change the aerodynamic data of an aircraft; similarly can modify the aircraft's position and speed by editing the data table. All parameters in SDK cannot be edited. There are many variables that can only be read, and not modified or changed. [19] The SimProp compiler is used to compile xml files into binary format. The primary use of this compiler is editing and compiling autogen files and mission creation files. Environment Kit The largest tool present in the SDK is the environment kit that covers features like the weather, scenery and other features of simulation. This kit is used to render the environment in which the aircraft is flying during simulation. This kit has another feature which supports modeling known as modeling SDK, which includes the tools and describes processes with file formats. These files are needed for the creation of three dimensional environmental models that can be used during simulation. To keep the overall size of the file at minimum rendering of exact scenery is provided only at selected locations. The scenery for the regions not specified in the scenery files are filled using a program called Autogen. Autogen develops the scenery based on information such as land classification, population, density, region, and so on. The blg compiler provided along with the environment kit is having features that can be used to convert the files into the data format used by the prepar3d systems. The files that can be read by the Prepar3d simulation are mostly in the blg format. The data of scenery objects and airports are held in the blg format files. The tool set also have a terrain SDK that helps input data to form the terrain using main data like elevation, land classification, regions, seasons, etc. This also includes a special kit to control the traffic of the aircrafts around the user. A slider interface provided lets the user control the volume of traffic. The other important interface that come along with this kit is the modeling SDK that allows the user develop models of aircrafts, ground vehicles and other structures, for this a 3d model have to create in specified formats. The user can also program the required weather conditions with the help of weather SDK using the SimConnect interface. Mission Creation Kit A structured flight having a start point and then followed by a set of task or goals can be called a mission. This kit helps in setting up a mission that can be used to train pilots or crews to act during a particular crisis or to familiarize pilots with different system failures. This feature 25

can be used to enhance gameplay for nonprofessional user. The gameplay can include adventures and tutorials along with tests for evaluating skills. This will be an asset for students in particular who can have fun in a challenging environment along with polishing their flying skills. The mission can be customized as multi user or a single user simulation. Many missions are given in the tutorials which will help in developing the basics of flying. The system is very flexible and can encompass many different types of activities. The mission creation kit describes the steps that will be used to create the mission and the option of including these in the main menu. SimObject Creation Kit The aircrafts are the primary simulation objects, but it also includes all other dynamic objects that are being animated by the simulation. The simobject files include the airport ground vehicles, ships, some animals, and objects used by the mission system. All these objects need similar file structures and format so that they can be represented in a simulation. Different versions of the same aircrafts are specified by the aircraft configuration file. This kit also provides details of the different attributes such as the name, color, sound, panels, gauges, etc used to describe each aircraft. The configuration file also includes details of the various systems used in the aircraft such as engines, fuel, avionics, landing gear, physical dimensions, aerodynamics, and many other details including camera view positions and special effects. Configuration files are text files in the .cfg format that can be easily viewed and updated. When a new aircraft is created, a configuration file of a similar aircraft is used as the starting point. Then the necessary changes are made to the existing lines of coding and saved as a new .cfg file. A sample of the configuration file in provided in appendix 4. Another major SDK is the flight model where .air file format is used to provide the flight dynamics data in the form of coefficient and data tables. These data determine the flying qualities of the aircraft. A sample of the aerodynamic model is given in appendix 3. This kit also provide a panel and gauge SDK that help create the control panel for the new aircrafts or change the control panel configuration of an existing aircraft.

3.3 SimAVIO
SimAVIO is a plug-in software dedicatedly used for developing and rendering avionics instruments developed by FlyThisSim(FTS). SimAVIO can integrate with X-Plane and use its data to simulate the instrument panel; they work simultaneously on the same system or on 26

networked systems. SimAVIO simulates gauges and glass instruments in a dedicated window outside the main simulation. This software will be an advantage while fabricating a simulator. SimAVIO can be used to dedicatedly display high resolution life size instruments and navigation instruments forming the panel while X-Plane can be used for the main simulation. SimAVIO can run on the same computer as X- Plane, or it can run on another processor and communicate via LAN or other networks in place. The data transfer in-between X-Plane and the SimAVIO is fast at a rate of 30 times per second, thereby giving the user an instantaneous response. The software has the capability of loading files produced by FTS which is stored in a library. The library includes simple instruments like a single needle on a round gauge, to complex moving map displays with shaded relief, and digitally rendered analogue gauges with the panels of different aircrafts [20]. These instruments can also be created in SimAVIO using the Instrument builder. This software is being used to develop the instrument panel simulation of the Found® aircraft Bush Hawk XP at Ryerson. One of the instrumental panels developed is shown in Figure 17.

Figure 17 The Found Bush Hawk Cockpit designed at Ryerson The Instrument builder can be used to compile the models developed to the .fts format, which can be used by SimAVIO to render the instruments. SimAVIO can only be used to open .fts format files, no other files can be directly opened (such as the models in .ac format). SimAVIO works along with AC3D, which is the 3D model developing software used to create instruments [21]. So in order to utilise the software to the maximum potential AC3D was also made available at the lab along with the Instrument builder. This assisted in the development of instruments and panels. 27

3.3.2 The Creation of Instrument Panel
The flight instrument panel for the Found® aircraft Bush Hawk XP was created as part of the first project in the Ryerson prototype simulator. This instrument panel was tested using the instrument model in X-Plane. The main CAD drawing of the Bush hawk aircraft's instrument panel was received from Found® aircrafts. Then in order to view the drawing, CAD viewer software was used. This provided the instrument panel specifications. This model was then imported into the CATIA V5 where the panel is created according to the specification mentioned in the CAD drawing. The model created in CATIA does have the original dimension as obtained from Found® aircraft. Then the panel slots and divisions were marked as specified in the drawing. Then in order to obtain a better lighting the panel was modified based of the lighting options in CATIA. The panel was then imported to adobe Photoshop, because the texture for the panel can be refined and texts be added. Then using tools available in Photoshop the text was made into labels having a transparent texture. The side notes were then adjusted and put in place. The model created is then transferred to the AC3D software because the instrument builder in SimAVIO can only read 3D files that are in the .ac format. Instrument maker can't read files in any other 3D format. Then different polygons are added to the model and different functions are assigned to each of the polygon. The polygons are layered so that each of the instruments either created or taken from the SimAVIO library is not overlapping each other. The instrument panel build by the Ryerson team has both custom build and instruments taken from the SimAVIO library. The instruments created gather data required to drive the needle after interfacing with X-Plane. The coding of each instrument can be done in AC3D by opening it in the object property editor. [21] The programmer can use the script to modify or customize the setting of each instrument. The script starts with the word userdata and ends with enddata. The second line of the script will define the tool name and the next line starts with driverlist and followed by a tab. [appendix 1] Then it's the FTS variable name that is used to drive the polygon. The polygons created follow a hierarchy so as to improve the run time. The different instruments created and the script used to drive the needle is given in the appendix 1. The completed AC3D model is then compiled by the instrument builder and this is available to run in the SimAVIO software along with X-Plane simulation. The flow of event's for instrument panel creation is given in appendix 2. The instrument created was validated with the gauge reading provided by 28

X-Plane. The rendering of information from X-Plane to SimAVIO is real time without lag in any instrument behavior.

3.4 CAE Flightscape
CAE is the world's largest simulator development company with operations in over 20 countries around the world. Their product ranges from Simfinity which is a desktop based simulator to very sophisticated full motion flight simulation [figure 5]. CAE Flightscape is a subsidiary of CAE Inc. They develop high end simulation and analysis software for flight data management and for performing readouts. Major Airliners and Aircraft manufacturers around the globe use this software. This software will be used at Ryerson to improve its existing simulation capabilities and venture into new grounds using RAW data's from the aircraft's data recorders and converting them into suitable engineering formats for data analysis. These data can be directly used for any future research or for conducting analysis. CAE Flightscape is a professional flight data analysis tool that is mainly used for flight data monitoring and accident investigation. Ryerson University has been given privileged access to their Insight software package, which contains the Insight Animation, Insight Analysis and the Insight FDM (Flight Data Monitor). [22]

Figure 18 Screenshot of Flightscape Insight Viewer 29

CAE Insight is a package of advanced software designed to support the safety and investigation departments of airlines, helicopter and military aircraft operators and manufacturers. These tools enable effective study and understanding of recorded flight data. These data can be used to study and suggest improvement in flight operation, maintenance, training and most importantly safety. They are also used to support a new type of training based on analyzing the trend and performance data obtained from the trainee's simulator session.

3.4.1 Flightscape Insight Animation
The Flightscape Animation is an interactive real-time flight animation system that has the capability of Automatic Data Generation (ADG). This software allows automated flight animations by reading data directly from the Flight data recorder (FDR) and other sources in an aircraft. Majority of animation tools available in the market require a comma separated value (CSV) file that is set in engineering units to create animation, but Insight can directly read binary data and compute necessary values. This unique feature helps users have access to all the parameters in FDR at a precise relative timing. The software can be used to obtain any parameter and user can be assured that the time sequence of animation and data is accurate. The figure 19 below shows an Insight animation where details of all parameters are obtained.

Figure 19 Flightscape Animation screenshot [24]

30

The animation even shows the stick response for that instance of flight. Another major advantage of this system is that the conversion of the FDR data from the raw binary data to engineering units is possible along with direct analysis of the raw data. The conversion of raw data is normally done by formulating the data mathematically and converting to the relevant engineering data. Insight animation also have a library of instrument panels, 3D aircraft models, a Runway Model Editor and a World Terrain database that provides a high resolution terrain elevation data and satellite imagery.[24] It also has a set of tools allowing the user to build their own instruments and EFIS displays without programming. The software applies advanced analysis strategies to the data collected from simulator-based training sessions. The data acquired can be used for analysing trends and performance of the user. [22] At Ryerson the data will be derived from the MaxFlight full motion simulator. The Insight Animation provides full plotting and tabular listing of data with automatic or manual derivation of parameters required by the user. The software provides rapid generation of AVI or ISV format animations which is compatible to Insight software. Animation tool also provide a lot of analysis and processing technique for quantifying the RAW data and ensure that the animation have replicated the events accurately. The figure 18 shows a recorded isv file replayed in insight software.

3.4.2 Insight Analysis and Insight FDM
Flightscape Insight FDM, is designed for airline flight data monitoring programs. The flight data monitoring system is designed such that it allows the user to have snapshots of each event that takes place in flight by using the associated flight data. This program also provides option to configure complex algorithms where user can develop their own function giving them flexibility in obtaining desired output. The Insight FDM is software with open architecture allowing it to be integrated with other statistical tool. They are also provided with a functionality to archive RAW data. Insight Analysis is used to undertake detailed analysis and investigation of certain specific events or accidents. This software like other Insight software works directly with the RAW data's available and helps the user to plot and curve fit the data as desired. The major function of this software is its ability to derive additional parameters that were not recorded using mathematical functions. 31

3.5 Simulink
Simulink provides graphical resources for simulation that can be used for analysis and visualization by the application of model based design. Simulink is an add-on function that comes along with Matlab. It provides a block diagram environment that creates model based design which helps visualize the output as a simulation. Simulink also provide an automatically generated code for the models created; thereby help provide continuous testing and verification. This is one of the most flexible simulation tools available at Ryerson University. A simulation model can be developed by modeling equations into different groups, like the environment model, aerodynamic model, etc. The models created will solve or provide input to the main system as specified in chapter 2. The final simulation can be custom designed and mathematically refined depending on the model and then simulated by running Simulink. The code generation for an aircraft system simulation is a very long process and can have number of systems and subsystems. This software can be integrated with other flight simulation software like Flightgear to render live flight using the models created. A very simple system has been shown below which gives the longitudinal response of the aircraft, using few details like the environment, pilot input etc. Such model can be further developed to build a comprehensive simulation for Ryerson University.

Figure 20 A Simulink model to calculate the longitudinal movements with its subsystem 32

The figure 20 above is a very simple Simulink model for finding the longitudinal characteristics of the flight. The characteristics of flight are found by modeling the equations of motion for calculating the longitudinal movements as blocks. The input for this model is the angle of attack, mach number, velocity and the deflection of the control surface in degrees. This is similar to solving the equation of motion in chapter 2. The inputs will be used to solve the subsystem that will calculate the coefficients. This will in turn be used as an input to determine aerodynamic coefficient, which will be used to solve the aerodynamic forces and moments. The force and moment will be used to solve the next model that will give an output of the position of the aircraft in the Cartesian coordinates along with the velocity and acceleration. This can be used to find the position and acceleration of the aircraft due to a certain deflection in the control surface which will displace the aircraft in the longitudinal direction. This is a very simple model; a real simulation will have much detailed models referring to the different parameters explained in chapter 2.

33

4. Hardware
The hardware forms the main physical components that will enable the software to work to their optimum best. The hardware used in a flight simulator mainly consists of flight controls, visual and sound devices and the processing unit. It can be configured to have high fidelity just like the set-up in the figure 21 below. It is the processing unit that will determine the ability of the system to render graphics and interface the hardware systems with the software.

Figure 21 A Hotseat triple screen flight simulator [17]

4.1 Flight Controls - Yoke (Control Column)
The yoke, also known as the control column controls the roll and pitch attitudes of the aircraft. The ailerons which cause the aircraft to roll left and right are moved by rotating the control column. The forward and backward motion of the control column moves the elevator which in turn causes the aircraft to pitch up or down. The control columns for the flight simulator were purchased from CH products. There is a requirement of two control columns one for the prototype and other for the main simulator. The main benefit of the yoke system from CH system is its plug-n-play connectivity. The system use USB plug for connectivity and is reasonably priced compared to other control columns available in market. The CH Flight Sim yoke provides a system that has five axes of control and 20 buttons which can be configured to control various systems in the simulation. [25] It also have four traditional push buttons, two bi directional flip switches, two bi directional rocker switches 34

and one eight-way POV hat switch which can be used to configure different controls. This instrument will meet all the requirements of the prototype simulator.

4.2 Flight Controls ­ Rudder Pedals
The rudder is used to control the movement of the aircraft along the vertical axis. The rudder is connected to the pedals placed at the foot of the cockpit in front of the pilot seat. Rudder control enables the aircraft to turn in the yaw axis. By pushing down on the right rudder pedal, the rudder on the vertical stabilizer moves to the right and causes the aircraft to turn to the right. The aircraft turns to the left by pushing down on the left rudder pedal. These pedals also activate the breaks when the aircraft is on the ground. Pushing the rudder pedals forward using the toes will activate the brakes. In order to get the best performance and keeping the overall cost reasonable, the rudder pedals to be used for the simulator were purchased from CH Products. These were selected because it was best in class and had a plug-n-play connectivity. The product also provided three axes control X-Y axis for the left and right toe brakes and Z axis for selfcentering sliding mechanism of the rudder control. They also have realistic heal/toe differential brake control and rudder locking axis. [26]

4.3 Frontal Display and Main Instrument Panel
The visual recreation of the aircraft and environment using simulation software is to be output to the user using the display units. The Ryerson simulator cockpit will be displayed on multiple screens and the instrument panel set-up using touch screen. This set-up will increase the overall fidelity of the flight simulator. The main instrument panel will allow the user have greater flexibility in using the instrument systems, which can be reconfigured for different aircrafts. This objective will be achieved by recreating the instrument panel using the tools provided and interfacing it with the touch panel. The touch screens will display the primary flight instruments and navigation information. Screens can be fully customized and configured to display gauges and instruments as per individual preferences. There were different options available while selecting the screens, primary option was using LED or LCD and projectors. It was noted that LCD or LED would be the best option in the long run and also cost effective. Two 27" LG-E2711 flat panel active matrix-TFT LCD screens with a maximum resolution of 1920×1080 were used for the prototype. Then three 51" Samsung screens were acquired for the Ryerson simulator, which connected together will give a full 35

perspective of the cockpit. The simulation will be displayed by using a dedicated processing unit with dedicated graphics card. The graphic card will be able to integrate and split the display into three parts and display on the prescribed screen. An Acer touch panel T231H LCD monitor was used for setting up the instrument panel display in the prototype simulator. This panel having a response time of just 2 milliseconds and a maximum resolution of 1920×1080 was the perfect fit for the prototype. For the main simulator a 46" Samsung touch panel 460TS-3 with a resolution of 1920×1080 @60Hz having a very superior touch screen configuration system was used to setup the main instrument layout panel.

4.4 Processing Units
The processing unit is the brain of the simulation which processes all the equations and data to simulate the aircraft. There were three processing units that was configured and setup. Two of them to be networked together will manage the software programs and hardware components of the main Ryerson flight simulator. The third one was used to set up the prototype. The processing units will be installed with the Windows 7 operating system instead of the latest Windows 8 because of the technical problems found in the latter. PC-1 Server: PC-1 will function as the main server computer and will be installed with the main flight simulation program. This system will be installed with the different software used for simulation along with other software like AC3D, Matlab etc. This system will use X-Plane as its main simulation software. This processor also includes all the other simulation software that is used at Ryerson flight dynamics lab. The processing unit will function as part of the main controlling and operator station. PC-1 is configured with an Intel i7-3770K core processor 3.5 GHz with 32 GB RAM and 750 GB of hard disk capacity. It will include a sound blaster live 5.1 sound card. This will be configured and assembled in the lab. It also has a GeForce GTX670. The GeForce GTX 670 is designed to be paired with 2GB of GDDR5 memory, running at 1500MHz for a 6.0 Gbps data rate and a maximum theoretical bandwidth of 192.2GB per second. The board power is 170W which will work with the advanced diagnostics to create more efficient and lower overall power consumption. It can support up to 4 displays on a single video card, with one dual link DVI-I connector, one dual link DVI-D connector, one HDMI connector and one DisplayPort connector. The specifications of the server are given in table 3 below. PC-2: PC-2 will also be used for the main Ryerson flight simulator that will be having 36

two processing units connected to each other by a local area network. This will be used as the sub-system in the main simulator and the main working software will be SimAVIO. Computer 1 Ryerson Simulator Server Operating System Processor RAM Hard Disk Space Video card Windows 7 Inteli7-3770K core processor 3.5GHz 32 GB 750 GB GeForce GTX670 2 GB Table 3 Ryerson main simulator processor specification The other software that is being tested on the prototype simulator will be installed on the main simulator for demonstration purposes. The servers and sub-system will be connected via LAN to each other. This network can be extended to other workstations provided in the lab if necessary. The processor will be used as the sub system that is used to display the instrument panel and the navigation system. This system will help rendering the display in the maximum possible resolution by easing the work load of the server. Computer 2 Ryerson Simulator Operating System Processor RAM Hard Disk Space Video card Windows 7 Inteli7-3770K core processor 3.5GHz 32 GB 500 GB GeForce GTX670 2 GB Table 4 Ryerson simulator second processor specifications PC-3: This system is used to setup the test bed or the prototype system used in the flight dynamics lab at present. This processor is used to run all the software reviewed and also includes designing software like CATIA, AC3D, etc. This system will be used to develop panels for different aircrafts by using avionics software like SimAVIO. This software will help display the main instrument panel on the touch screen system and the aircraft cockpit display on the dual screen. This system also consists of other simulation software like X-Plane that will work simultaneously with SimAVIO. Prepar3d will be used to create simulation and record them using the different kits available and replay it in the full motion simulation. The prototype is being 37

used to test the different software and study them in order to help choose the best program for Ryerson simulator. The main simulation software used in the prototype is X-Plane and Prepar3d. This software were tested and used to create different simulation models. The processor used is an Intel i7-3770K core processor 3.5 GHz with 32 GB RAM and 750 GB of hard disk capacity. It also has a GeForce GTX670 advanced graphics card. Computer 3 Prototype Operating System Processor RAM Hard Disk Space Video card Windows 7 Inteli7-3770K core processor 3.5GHz 32 GB 750 GB GeForce GTX670 2 GB Table 5 Specification of the prototype processing unit

4.5 Cockpit Audio System
In addition to a good visual system, a good sound system is essential in order to reproduce the sound from the flight simulator and to experience the true feeling of flying an aircraft. The sound is to be delivered using a Bose Companion 5 series speaker system. This system can easily connect to the computer through the USB port and does not require additional software or adaptors. The audio system will be connected to PC-1 and the cost price for this system is reasonable for the main simulator.

38

5. The Simulator
Simulation industry is growing and simulators are used by almost all the manufactures and the airliners to train their pilots. The role of simulation is also taking a shift as more engineering based simulation software are being developed. The primary use of simulator is for training. It can also be used for conducting detailed study and testing a new design for its stability and performance prior to airborne trials. Simulator can also be used for studying human factors while flying, which is the man­machine interaction study. Development of simulation model during the design phase of an aircraft can provide insight into the behavior and performance of the system. This will also provide details on the behavior of pilot in the loop and how interaction between the pilot and system will be. This will help manufacturers make modifications and help reduce the cost of production. Simulation is also used by Air transportation agencies around the globe to investigate accidents. Simulation will recreate different events that lead to the accident precise to seconds leading to the accident. Simulation can be explained as communication between the input devices and the models that is used to analysis the characteristics of an aircraft. This communication by means of electronic signals cannot be expected to even up with the required state of reality. But this can be used to help understand different complication in design and the tradeoff during design this process is called as an end to end simulation. The growing interest in the field of simulation has stirred up the passion of many universities and research institution around the world to conduct research in this field. This led to setting up of flight simulators to study and research various topics related to dynamics and stability. Depending on the purpose of simulation fidelity of the simulator also vary; some simulators won't require a major display unit as they are being used to train only using the instruments and navigation systems. Therefore based on requirements of the user a simulator is setup. With the development of unmanned aerial vehicles (UAV), simulation codes were altered and used for the development of ground control stations that have a real time display and pilot response system. The Ryerson simulator is being setup to be a useful tool for the students and to enhance the research capabilities at the Aerospace department. The simulator is setup to help students understand the subjects of flight dynamics and stability control using the software. It can also be used to enhance the research on human factors and introduce research on topics related UAV ground station from the flight simulation codes. The simulator setup will serve as a test bed for research and development of new codes and also enhance the scope of further research into areas 39

like automatic flight controls and navigation systems. The simulator installed with software capable of creating different aircraft models and tests their stability. This can thereby become a handy tool for different aircraft and rocket modeling teams in the university and also attract projects of similar concern from other companies. The simulator is being setup in three phases; the first phase included a detailed study into different software and hardware components and their working. A prototype of the flight simulator was built to study the software and understand the fidelity of each hardware system. This setup was also used for building instrument panel models for Found Aircraft and also aircraft models in X-Plane. The second phase includes setting up the Ryerson Simulator and improving the software capabilities by including CAE Flightscape. The third phase will be the installation of the MaxFlight Full motion flight simulator and integrating it along with the CAE Flightscape.

5.1 Prototype
The prototype was setup as a test bench to conduct detailed study of different software that is to be used on the Ryerson simulator. The software tested includes X-Plane, Flight Simulator X, Preper3d, which are all used on the main simulator. Though many simulation software are installed, the simulator will primarily work on a professional version of X-Plane form Laminar Research. SimAVIO is interfaced with X-Plane and is used to display the navigation system and the instrument panel. Both the software work simultaneously on the same system as explained in section 3.3 and 4.4. The other simulation software are used for understanding and developing the solution for specific problems using the custom tools and simulation creation techniques. Matlab is installed so that Simulink which is a simulation model development platform can be used for creating custom designed models. Software like AC3d and gauge maker are also installed so that it will help in the creation of new panels and instruments using SimAVIO Instrument builder. This simulator will also be used to visualize the data that has been processed on Flightscape Insight animation. This was done using an Insight viewer which is installed along with the other software. The figure 22 below shows the architecture of the prototype that was built at the flight dynamics lab. The simulator consists of a dual monitor for the main simulation to be displayed and a smaller touch panel that will be used as the instrument panel. The prototype is equipped 40

with control systems that were brought from CH controls. The three monitors will be inter linked and displayed simultaneously without the use of video splitters as the graphics card enable video splitting and support all three displays at ones.

Figure 22 Architecture of the prototype The PC-3 as explained in section 4.4 was used as the only processing unit on the prototype. The simulator has a dual screen display and a touch screen panel that is used to as the Instrument display unit. The touch screen is used to increases the fidelity of the simulator system. The display system use NVDIA GFX680 video card which don't need a video splitter but simultaneously run three display units. The video card has three slots of which two were occupied by the two LG-E2711 monitors used for displaying the main simulation and the third port was occupied by the Acer T231H touch screen panel. The system is controlled using a yoke system from CH systems. The control system also has a pair of pedals and a throttle quadrant used for the simulator from CH systems. The seat for the pilot was brought from PlayseatTM. Most of the control systems used was plug and play devices so; the issues related to integrating the devices were removed. The interface for the touch panel was available in the configuration disk provided along with the devise.

5.2 The Main Flight simulator
The Ryerson fixed base simulator will be the main equipment used in the MIMS lab. It will be used for conducting tests and demonstrating final simulations. This system will be using 41

the same software used in the prototype. The main difference between the prototype and main simulator will be the hardware and the configuration of the hardware. The main software to be used on Ryerson simulator was selected keeping in mind that the simulator is designed for engineering, teaching and high fidelity graphics output. This simulator is set-up such that both its software and hardware can be updated easily. The Laminar research's X-Plane was preferred as the main simulation software because it is compatible with SimAVIO and also has a higher degree of customization. Similar customizations can be done on Preper3d but creating complex structure requires in-depth knowledge of other programming languages. Prepar3d will be used for recording simulation and editing the aerodynamic models in SDK. The table 6 below gives comparative details of different software used.

Figure 23 CATIA Model of the Main Flight Simulator The figure 23 above gives the perspective of how the final simulator will look using CATIA. The main flight simulator will be used to completely utilize the capabilities of the professional X-Plane software. The professional version of X-Plane is certified by FAA for use in training simulators. Using this software alone won't make the Ryerson simulator eligible for certification, because the hardware used are not as specified by the FAA regulations. The certification is not required as the simulator is setup for engineering purpose and not pilot training.

42

This system will mainly be used to study the flight dynamics and different performance parameters of an aircraft. The simulator will also be installed with the Flightgear software that is compatible to interface with Matlab and Simulink, therefore it can be used to render the models and create a simulation. This will also be used to demonstrate the interfaced model of the CAE Flightscape with prepar3d which will be used in the full motion flight simulator.

Specification Operating System

X-Plane Compatible with MAC and Windows OS

Prepar3d MS Windows 7(64 bit)

Flight Simulator X MS Windows 7, Vista or XP

Processor Memory Hard Disk Space Video card

Multi core 3.0 GHz 4 GB+ 40 GB 1.0 GB+

Quad Core 2.0 GHz 4 GB+ 20 GB 1-1.5 GB+(GDDR5or better)

2GHz 1 GB+ 4 GB 128 MB or more

Aircrafts

30 by default and 1400+ Can be downloaded

24 by default more can be downloaded online

24 by default more can be downloaded online

Scenery

33000
o

airports

and 45

High and

detailed 45

High

detailed

earth from 74o north airports to 60 south Engineering Use

24900 airports with 38 cities

airports with 39 cities

Develop New Designs Develop new design Develop new design for aircraft and for aircraft and

scenery Ease of Use Plug-in SimAVIO Development Kit EASY Yes Difficult No

scenery Difficult No SDK

Plane Maker, Airfoil SDK Maker

Table 6 Comparison of Different Simulation Software

43

The Simulator is setup as shown in the figure 24 below. It has three monitors to display the main simulation. There is another screen which is touch configured and running on a separate processing unit. The touch screen will be used as the cockpit instrument panel. The system is having three 51" monitors from Samsung with thin bezel. These screens are used so that when mounted and put on display it will simulate the cockpit of the aircraft without any disruption of the bezel. These three monitors are connected to the main processing unit PC 1 [section 4.4] which has a graphic card that will split the display on its own without the need of having an extra video splitter. There is another processing unit PC 2 that will be running the SimAVIO software as explained in section 4.4. The two processing units will be integrated using the local area network (LAN); using the LAN and two processing units the software can function together and provide a higher rendering speed. The two processing units will run the aircraft simulation and avionics simulation simultaneously. The two systems will interact via LAN and thus reduce the glitch that may be caused by running the software on the same system. If required, using the second processor user can add an instructor's station to the simulator as mentioned in figure 24.

CAN ADD AN OPTIONAL STATION FOR INSTRUCTOR

Figure 24 The Ryerson Simulator architecture

44

5.3 MaxFlight Full Motion Simulator
The MaxFlight FS3000 is a full motion two seat flight simulation system. This system helps in recreating the motion and effects that will be experienced by the pilot if flying a real aircraft. The system has a HD projection system that will give life depth clarity for the simulation created. The system runs on Prepar3d simulation software form Lockheed Martin and the older versions use the Flight Simulator X (FSX) from Microsoft. The motion of FS3000 simulator is synchronized with the movement derived from the equations of motion of the Prepar3d or FSX. The motion simulator can also be used to replay recorded flight using a video files. The simulator recreates the movements associated with the video or according to the control of the pilot, using the two 360-degrees revolute motors [27]. At Ryerson the recording can be done on the Ryerson Simulator using the professional Preper3d software and used to run on the full motion simulator. The figure 26 below shows the FS3000 installed at the London Science Museum.

Figure 25 The MaxFlight FS3000 installed at a museum [27] MaxFlight full motion simulation system is a fixed equipment weighing over one tonne. The system consists of two attachment points holding the seats in place where pitching effect of the system takes place. The seat is also attached to another motor that will roll the system according to inputs from the recorded flight. The hardware requires a floor area of 21.13 sq.m and a ceiling of 3.88 m in order to fit. The system as a whole is run on an Intel compatible PC which is windows 7 compatible. The display is mounted inside the seat case, which is a HD 3D projection enabling a very efficient visual experience. The software is also remote diagnosable 45

via the internet or using LAN. The specification and mounting of the seat are illustrated in the figure below.

Figure 26 Dimensions of the MaxFlight FS3000 [27]

5.3.1 The Hardware in MaxFlight
The MaxFlight FS3000 system consists of two main computers that are used to run the simulator. The main processing unit is the motion computer that is installed with the motion software and the motion card. The motion card is similar to the graphics card having output ports to send out processed signals. Similar to the graphic cards, motion card also have an external interface board having ports to connect the sensors. The sensors will feed the signals of motion to be replicated to the system. Other ports are used to carry motion signals to the VFD (variable Frequency driver). VFD will control the two motors which provide motion to the system by varying the motor speed and torque. This can be achieved by varying the input frequency and voltage. The normal operation of the system is carried out by sending out a positive '+' or negative '-' 10 volt signal to the VFD from the motion card installed. This indicates the command for the direction and speed of operation of the system. It also consists of a set of sensors like the optical encoders used by the simulator for providing information to the system. The sensors are placed in the pitch and roll motors which allow the motion card to read their position and thus notifying the current position in terms of the pitch and roll. Another sensor is provided to inform the system if the simulator is docked and passengers are being loaded. A similar sensor is fitted 46

to the top of the left and right side which let the simulator know if the machine is full up and ready for operation. They are also provided with a breaker sensor which when tripped will halt the machine. [27] It has other sensors for keeping a check on safety, like the canopy sensor to determine the canopy is closed. The safety harness sensor is used know the passengers are safe and e-stop which is connected to a red button inside the simulator so that the passenger can stop it themselves. The simulator has three main axes of motion, the pitch, roll and the vertical lift that is used to put the machine into its position to start the operation. It consists of two motors for the pitch and roll movements and a lifting jack to get it into position. The pitch motor is a five horsepower (HP) 208-volt-3-phase 60Hz VAC drive motor that is controlled by a frequency drive inverter. [27] It can rotate in both clockwise and anti-clockwise direction. The other motor being used is a regular AC motor working on 380 volt, with a power off break system along with an optical encoder that is attached to the output spur. The gearbox for the pitch motor is mounted in the right angle to the pitch shaft and attached to a cycloidal gearbox. The gearbox has a guide system to lock itself and attach to the face of the pitch motor by a torque arm. The pitch motor is driven by the variable frequency drive that is directly connected to the computer. The computer will send signals with accordance to the motion of the aircraft and the variable drive will send the necessary voltage and frequency to the motor there by determining the speed and direction of the system. The pitch control system also has a relay that controls the release of breaks electrically by closing one of the circuits. There is also a manual break release system that is used to manually level the machine. The second motor in the system is the roll motor which is similar to the pitch motor having a 3 HP 208-volt-3-phase 60Hz VAC drive motor, controlled by a frequency drive inverter. This rotates the cockpit in the clockwise and anticlockwise direction. The roll motor is attached to the gearbox with a ratio of 73 to 1 reduction. The drive shaft of the roll motor passes through the gearbox and is locked to the shaft. It functions just like the pitch motor. [27] The other major system in the MaxFlight simulator is the vertical lift system which uses a hydraulic system consisting of two rams and a hydraulic power unit. This is used to raise and lower the position of the main assembly consisting of the cockpit to its ride and loading positions. A counterweight system is used to balance the simulator. This is done according to the weight of the passengers and by having an equal force to balance the system. The operation is 47

carried out in a special sequence. When the passengers are seated and the simulator ready to begin the system is raised to its operational height that is approximately two inches automatically as instructed by the motion computer. Then the pitch break is released and the cockpit will either move nose down or tail down according to the system balance. Then encoders will relay the signals telling the program the system is nose heavy or tail heavy and subsequently send a drive signal to move the counterweight to the proper position. This is done till the unit come and pass the level mark at zero degree where the signal relay stops. All the control signals are relayed from the motion control card which sends packets of signal through a digital relay instructing the lift motor to output the hydraulic fluid to the ram and thus raising the unit. The check valves of the systems are controlled by the motion cards connected by separate optical relays. [27] The other hardware in the system includes the primary and secondary restraints that are provided for the safety and comfort of the occupants. The simulation is controlled by the occupants using the flight control stick, which is used to input the data for manoeuvring the aircraft. The flight control stick provides control along all three axes. The figure 28 below shows the control stick.

Figure 27 The joystick control in MaxFlight FS3000 flight simulator [27] The controls are provided on the side of both the seats but only one will act as the primary controller for any given time. The flight control can be switched by pressing a button

48

that is placed in-between two seats. It also has a throttle stick which can be moved up and down to increase and decrease the speed; it also has a trigger that is to switch the air breaks.

5.3.2 The software and control window
The simulation in MaxFlight simulator is run by Prepar3d from Lockheed Martine or the older models are installed with Flight Simulator X from Microsoft. [27] The main interface used by MaxFlight is the G3EH motion inverter client which will control the pitch, roll and the lift independent of all other commands. This program is used to test and troubleshoot the inverters and motors that are installed in the system. It is also used to initialize and auto tune the system. The system's dispatch computer is networked and can be controlled through a virtual network connection (VNC) using the command computer. The command computer is used to control the operations of the simulator's motion and software. This also sets the system to its operational height, start, stop and then lower the system when required. The dispatch program is the interface that helps the onboard dispatch computer and the command computer integrate with each other. It is the main interface and should be up and running all the time the simulator is in use. It gives detail report on the state of the machine and operation being carried out. Without this the simulation will not appear on the onboard system so it is automatically set to run during boot-up. Another major interface that is used to connect the joystick, simulation software and G3EH motion together is the FSX Joystick interface. This also run along with Preper3d and is automatically loaded on boot-up. [27]

49

6. Integrate Flightscape to the MaxFlight simulator
MaxFlight simulator is a motion platform system working on Preper3d flight simulation software. The motion platform gives the user the exact movement as experienced by the pilot in an aircraft. The simulation is integrated with motion by synchronizing the data output of the simulation with the motion card, which is used to position the pitch and roll motors. The yaw movement can be recreated by using the pitch and roll movements together. Flightscape Insight filled the requirement of having advanced software to analyse and output data at Ryerson. Flightscape is used to analyse, simulate and retrieve data in engineering format. Software serves as the back bone of any system and the quality of simulation depends on the code and data used. This knowledge led to the idea of using data from the professional software to simulate aircrafts and use the simulation in the full motion simulator. The first thought was to completely replace the flight simulation software (Preper3d) on MaxFlight full motion simulator with Flightscape Insight. This was not a viable option because integrating Flightscape with MaxFlight would require a new interface. So it was considered to replace the aerodynamic data in Preper3d using data retrieved using Flightscape. Flightscape as a simulation software can be better categorized as a flight animator which will help recreate a particular length of the aircraft's flying time in simulation. This is done by reading the data from the FDR directly. This function of reading data directly in RAW format helps giving high fidelity simulation. The user can visualize the flight movement along with the pilot's reaction exactly as in real flight. The direct syncing of Flightscape with MaxFlight simulator was considered but was not practically possible at this point due to the technical difficulties. The main difficulty will be faced in integrating the dynamic system of the motion system with the software. The alternative considered for this problem was trying to integrate the main simulation software of MaxFlight with Flightscape. The advantage of implementing the alternative is that the current software and motion platform need not be altered. The functioning of any simulation software is always dependent on the models used [chapter 2]. Therefore modifying the aerodynamic model in Preper3d will change the simulation. The aerodynamic model in Prepar3d can be modified using the data from Flightscape and thus the recreated flight will have the same fidelity. This procedure will provide the same simulation without altering the main software in the motion simulator. 50

6.1 Data Acquisition
To understand how to alter the aerodynamic data it is important to know how the data is acquired and subsequently used in the simulation models. The data acquisition for the simulation is the most difficult part and is normally obtained from manufactures or the Airline operators. This data is often taken from the aircraft's flight data recorder and converted into the useful engineering format. Flightscape use RAW data in binary format, directly obtained from the Flight Data Recorder to recreate the flight. Prepar3d use data stored in its database to solve the equations of motion and then recreate the animation. The aerodynamic data in Prepar3d is saved as tokens and the engineering units are stored in aircraft (.air) files. These aircraft files consist of flight dynamic data in terms of coefficients and the corresponding data tables. The data in these models can be altered by modifying the .air files. The altered data will include the data that are converted to the engineering format using Flightscape Insight software. Following this method the simulation in Preper3d can be altered.

6.1.1 Instruments for data acquisition
The information regarding the stated of flight is provided to the pilot using different instruments on the aircraft. These parameters are also recorded and stored in different flight data storage systems. The recorded data will mostly be re-written after a certain interval of time so that the storage devices will not occupy much space. The parameters obtained are the measure of speed, distance, altitude, direction, temperature, pressure and rpm. These parameters are acquired using different sensors like temperature sensors, pressure probes, transducers, potentiometers, strain gauges, aircraft data buses etc. The values obtained using these instruments are passed on to a digital system where data is converted to digital format. The digital signals are then transferred to different recording instruments and stored or processed further to be given as an output. The major sensors used to acquire data are the following. Pressure Gauges The pressure gauges in an aircraft are used to measure the pressure in different parts of the engine and airspeed indicator. The pressure gauges that gives out direct reading are used to indicate the pressure at which the engine oil is being distributed or the pressure at which the fuel is being drawn from the tanks. These instruments are also used to determine pressure in different 51

systems where there is movement of any fluid (liquid/gas). It is also used for the functioning of instruments like gyroscope, fuel air pressure in the intake manifold etc. The pressure sensors are of different types like hydraulic pressure gauges, diaphragm gauges, suction gauges all these are used to derive the pressure from different parts of the aircraft. The pressure values are in the form of analog signals that will be transferred to different instruments for storing or conversion to digital format. Pitot Static System The pitot static system is the primary pressure measurement instrument in the aircraft. The head of the pitot static tube is connected to three of the primary instruments in the aircraft the altimeter, air-speed indicator and the rate of climb indicator. These instruments form the primary cluster in any aircraft cockpit. The head of the pitot static tube is mounted outside the aircraft. The head is placed where the turbulence is minimal in the line of flight of the aircraft like the leading edge of the wing, nose section, and the vertical stabilizer. The front of the tube is directly exposed to the full force of the wind and the rear end will have two opening on the top and bottom surface. It is placed such that the system will give accurate read outs of atmospheric pressure in static or still condition. Temperature Sensors The temperature in different parts of the aircraft is required for its smooth functioning. The temperature of different components like engine cylinders, carburetors, engine oil, exhaust gas temperature, are all recorded and monitored to keep in check the condition of the corresponding parts. There are different types of temperature sensors used in aircrafts to measure the heat transmitted in different parts of the system. Electrical resistance thermometers are widely used to measure the carburetor's free air and oil temperature. This thermometer works on the principle of change in the electrical resistance with change in temperature. The thermocouple thermometer indicators are also used in aircrafts to measure the exhaust temperature in turbojet engines or the cylinder temperature in air cooled reciprocating engines. Other Sensors In aircrafts different sensors are used to gather parameters like deflection of the wings the vibration etc. These sensors are fitted on different structural elements where deflection and vibration take place. Strain gauges and potentiometers are used on the aircraft to check the deflection caused in different parts of the aircraft. The potentiometer is used to correctly measure 52

deflection on the control surfaces. These instruments are used to keep in check the serviceability of each part. The data derived from these sensors are recorded and analysed using trend analysis or data monitoring systems during routine maintenance checks. ARNIC 429 ARNIC or Aeronautical Radio Incorporate is a major communications and systems developer for aircrafts. The ARNIC 429 is a Digital Information Transfer System (DITS) which is the prominent bus system used in most aircrafts. This is the standard specification used for the communication of aircraft systems with the avionics equipment. The DITS used in the ARNIC 429 is a Mark 33 standard unidirectional bus system transmitting messages at a rate of 12.5-100 kbps to other systems. [28] ARNIC 429 is used in almost all modern aircrafts with exceptions that use other specifications that help reduce weight. But the alternative data transfer system used is less reliable compared to the ARNIC 429. The military aircrafts use a standard bi-directional protocol specified as MIL-STD-1553 which is a military standard transfer system. [28] ARNIC data bus has two wires twisted together to transmit signals of the size of 32 bit. The signal is self-clocking separating the words in sequences by a null of 4 bit time. The protocol enables the ARNIC 429 to have up to 20 receivers and a minimum of one receiver on each wire pair. [28] The ARNIC data is always transmitted as 32 bits, which contains the label (bits 1-2), the source/destination identifier (SDI Bits9&10), data (Bits 11- 29), the sign/status matrix giving condition of the equipment (SSM 30&31) and the parity (Bit32). The data can be of different format ranging from Binary Coded Decimals (BDC), Discrete Data, Maintenance Data and ISO Alphabet character data. [28] There are other ARNIC formats that are used in aircrafts like the ARNIC 573 which is the Flight Data Recorder (FDR) output format. It uses a Harvard Bi-phase bit encoding which uses a 12 bit words encoded in frames, each frame consisting of data from different avionic subsystems. Flight Data Acquisition Unit. The Flight Data Acquisition System (FDAU) or the Digital Flight Data Acquisition System (DFDAU) is a mandatory instrument that should be line replaceable. It is used to process the data that is stored in the crash survival kit. The FDAU can acquire data from the primary sensors in both digital and analog format. Then it records the data specified by the regulatory authorities to the Flight Data Recorder (FDR). Most of the aircraft's input and output data are transferred in the standard ARNIC format. 53

Digital Flight Data Recorder The Digital Flight Data Recorder (DFDR) or the Flight Data Recorder (FDR) is very commonly known as the Black box. The instrument is used for recording data that are required by the regulatory authorise. The instrument is made crash proof so that it can be recovered giving details of the last 30 minutes of the flight in FDR and almost 25 hours of the data in the DFDR. This is achieved due to the recent developments in high storage capacity devices. FDR is always placed in the safest position of the aircraft. Most of the FDR use emergency transmitter locator to locate the FDR in a case of crash or accidents. These data are used not only for investigation in the case of an accident but also used to improve the airplane system design and to predict potential difficulties that the airplanes face with its age. Quick Access Recorder The Quick Access Recorder (QAR) is a miniature device that stores data that are being recorded to the FDR. These data can be retrieved easily during the maintenance or scheduled stop for quality assurance purposes. The data are stored in the systems CF cards and then mounted to the specified flight data management system. This is used to monitor the defects and maintain the quality of the service. Air Data Computer An Air Data Computer (ADC) is a very important instrument in the glass cockpit system where a number of different parameter like computed and true airspeed, altitude, temperature and mach number are stored. The data is gathered using the raw data from the sensors like pressure probes, pitot static tubes etc. This is not a storage device but gives and interprets important data from the raw form to digitally interpreted signals. This is where a digital readout is obtained on a flight.

6.1.2 Gathering the RAW data.
The sensors present in the aircraft collect data by the use of various instruments like temperature sensors, pressure probes, voltages, transducers, potentiometers, strain gauges, aircraft data buses etc which is stored as digital signals in the Digital Flight Data Acquisition Unit (DFDAU) or the Flight Data Management Unit (FDMU). All these data are transferred using the ARNIC 429 data transfer interface system (DTIS). The ARNIC is a 32-bit value that will have five fields. This data is either directly read or is transferred to the Flight Data Recorder 54

(FDR) and stored in the RAW binary format. The RAW data can be read out using different software. The Flightscape Insights software at Ryerson can be used to read these binary data files and converted into engineering numbers. This can be used to derive values that are not obtained directly from the data recorded by the use of mathematical conversions. The retrieved data in the form of comma separated values (CSV) are used in most of the simulation software including Prepar3d. The figure 28 below will give a better understanding of the data acquisition method.

Figure 28 The method for Flight Data Acquisition.

6.2 The Customization of Prepar3d Model
The data which is obtained as explained in the previous section can then be used as the simulation data for running the simulation in Preper3d. The .air files in Prepar3d which hold the aerodynamic values in the form of token can be modified and new data can be used to run the simulation. The flight model SDK is a part of the SimObject creation Kit in Prepar3d. The data in the aircraft files are formed into token sets which will define one of the many aerodynamic parameters that are defined in the air file. The .air files are first written as an assembler file in the .asm format. This part is simple as the user just has to save the notepad containing the data in the .asm format to make it the assembler file. [29] The assembler file is then converted into the `air' format by using an asm2air converter. The asm2air converter is a part of the SDK and compiles the .asm file to convert it into .air file. The data to be added in the notepad should be in a format 55

that is specified by Preper3d; each token represents each parameter. The tokens start with "Token _Begins name" and ends with "Token _End". [Appendix 3] The length of the token should not be altered or exceed that specified value which is shown as the length. [29]

Figure 29 The conversion of RAW data to simulation in Prepar3d The Tokens are written using C program and it should include the file but as these files are already specified in the Asm2Air compiler it need not be specified again. The basic stability and flight dynamic parameters required to compute the aerodynamic parameters are the following AIR_80_LIFT_PARAMS, AIR_80_DRAG_PARAMS, AIR_80_PITCH_PARAMS, AIR_CM
_ALPHA, AIR_80_ROLLPARAMS,AIR_80_YAW_PARAMS, AIR_80_SIDE_FORCE_PARAMS,AIR_ CL_ALPHA. [29] For all the tables except the mach integer table element count should be specified. If any table exceeds the maximum count the values will be discarded and the values within the limit taken to produce the simulation. The sample format of the token is given in appendix 4. The data input can be in any of the following format

· · ·

64-bit Floating point data 32-bit integers 16-bit integers When all the parameters are written in the notepad, the file can be saved as an assembler

file and then converted to a .air file using the compiler. The .air file is then placed it in the aircraft configuration folder. Then the file that is saved should be referred in the configuration file. This procedure is easy as the .cfg file can be opened using the word pad and referring the Sim as the entry of the aircraft configuration file [appendix 3]. Once this is done the model is ready to be used by Preper3d for the simulation. This was tested by using some sample data's on 56

the Mooney bravo aircraft model. The sample .air and .cfg file are presented in the appendix 3 and 4. The aircraft file is then run and the simulation of the corresponding aircraft is obtained. The modified flight models can be run on the MaxFlight FS3000 using the same interfaces present in the simulator. A further study of the software has shown that a plug-in FDR called Sz FDR can be used to simulate a particular length of flight in Prepar3d. This can be done using the data obtained from the FDR of the aircraft and converting it into the comma separated value using the Flightscape Insight software. This data when inputted to the Sz FDR can simulate the specific length of flight this will be really useful while studying the human factors and conducting investigation into some accidents. The flow chart in figure 30 explains in detail how the data from FDR can be converted and used in the MaxFlight. The data from the FDR in engineering format can be used to record a flight in the Ryerson simulator and then the recorded flight can be replayed on the MaxFlight simulator. The same FDR can be used to capture the flight data of the simulator which can be analysed using the Flightscape, thus creating a loop.

Figure 30 Flowchart of the Raw data conversion and modification of model in prepar3d being implemented into the MaxFlight FS3000 57

7. Conclusion
This project was initiated for setting up a high fidelity flight simulation system at Ryerson University using the latest hardware and software available commercially. The main objective of the flight simulator is to function as a tool for research and data analysis. This system can be used for better understanding and conducting research on topics related to flight dynamics and stability and control. The main objectives of the project are the following · · setting up a flight simulator at Ryerson University integrate the RAW data from aircraft to the full motion simulator to be installed at Ryerson University A detailed study of different commercial software was conducted and the functioning of the software was considered before selecting the software used on the Ryerson Simulator. The main criteria followed for this selection was the capability of each software to simulate and modify the aircraft and its parameters as desired by the researcher or student. The Mixed reality Immersive Motion Simulator (MIMS) lab being setup provides the capacity to present visual and vestibular effects. This will simulate the experience of riding on a roller coaster, flying an airplane or moving in any other real or imaginary vehicles in 3D space. This is achieved by the use of a fullmotion (360-degree pitch and roll) cockpit with HD video and surrounds sound. The simulator has the capability to be customized by the user as well as to be pre-set by an experimenter. The customization of the models will help the user visualize the outcome of any modification to the design or test a new design as a whole. The prototype was setup and used as a test bed to study the software and conduct initial trial of all the software that are to be installed in the main Ryerson Simulator. The simulator will provide the ideal environment to test new design and create actual representation of the instrument panel. This will also provide a test bed to test new technologies in the electrical and flight controls systems of the aircraft. The study also looked into one of the most advanced flight simulation and analysis software from CAE Flightscape and its use in the flight simulation laboratory. This project also gave the opportunity to study about MaxFlight Full motion platform, which enabled better understanding the capabilities of the full motion simulator. The study was then focused on converting the data availed from the aircraft to engineering data and then be replayed in the full motion simulator. A methodology was formulated to convert 58

the RAW data from the aircrafts to the required engineering format and then to subsequently use the engineering data in the commercially available simulation package. This can be done by converting the RAW data into the engineering format using CAE Flightscape Insight software and then inputting into the Prepar3d by altering the Aircraft file (.air). This would alter the characteristics of the aircraft and changes the flights response, thereby leading to the change in the full motion simulator. The report also includes a detailed study on the methodologies used to convert the file to different formats and also shed light into creating simulation models for new aircrafts. The project that is being done for Found Aircraft is also mentioned and the use of SimAVIO and its Instrument builder program is detailed. This project is the first step forward for the evolution of Ryerson flight Simulator to be used a powerful tool for both academic and research purposes. The insight that simulator provides students will help them better understand the subject and modify and develop the system.

59

8. Future Work
This project has played a pivotal role in setting up the Mixed reality Immersive Motion Simulation (MIMS) lab at Ryerson University. The lab will have the capacity to perform studies on both fixed based and motion based simulator. It also paves way for more research and exposure for students in the field of stability and dynamics. There remain topics in the field of flight dynamics and control that was not touched upon during the course of this project due to time constraints. Much of the future work will still remain on integrating the full motion simulator using the data from Flightscape Insight. Projects for creating instrumental panels and custom designing aircrafts in X-Plane will continue. There can be new research in the field of man-machine interaction, by studying the human factor involved during flying. The next major area to lay focus in future will be the development of a customized code for Ryerson University. This can be done in Matlab or by using the models in Simulink and integrating it with Flightgear simulator which will render its graphical properties to help simulate the aircraft based on the code developed. The software from Flightscape can be put to maximum use if data form small Aviation companies or Flight schools can be analysed at Ryerson. This data can then be used to recreate the flights aerodynamic models and be simulated on the full motion simulator. The MIMS lab along with the SAE team at Ryerson can take advantage of the facilities to model and test-fly new designs to check for the designs stability and control characteristics. The scope of the simulation lab is numerous and has to be further explored. There remains a lot of work to be done but this project undeniably has set the ball rolling and will provide a jump start for future works.

60

Bibliography
[1] J. B. Sokolowski, "Principles of Modeling and Simulation," in Hoboken, NJ, 2009. [2] Elart von Collan and Karl Baur, "Fabrication, operation,Disposal and Transport of Nuclear fuel," in Nuclear Fuel Quality Handbook , Skultuna Sweden, ANT International, 2010. [3] "Aerotoons.com," March 2010. [Online]. Available: http://aerotoons.com/blog/2010/03/. [Accessed 12 January 2013]. [4] D. Allerton, "Flight Simulation-past,present and future," Aeronautical Journal, pp. 651-663, 2002. [5] M. Baarspul, "A review of flight simulation techniques.," Progress in Aerospace Sciences, pp. 1-20, 1990. [6] D. Allerton, Principles of Flight Simulation, Wiltshire: John wiley & Sons, Ltd, 2009. [7] M. D. Piolen, "Martin Mareitta Aerospace Simulation Test Laboratory," Martin Mareitta Aerospace Simulation Test Laboratory , New Jersey. [8] A.White, "G-seat heave motion cueing for improved handling in helicopters," in AIAA Conference, Boston, 1989. [9] CAE, "cae.com," CAE Inc, 2012. [Online]. Available: http://www.cae.com/civilaviation/simulation-products/. [Accessed 12 January 2013]. [10] A. R. Society, "The impact of flight simulation in aerospace," Royal Aeronautical Society, London, 2009. [11] B. Kaczmarck, B J Waycechowsky and Cardullo F.M, "A comparison of several numerical integration algorithms employed in real-time simulation," in AIAA Flight Simulation Technologies Conference, New Orleans, 1991. [12] T. R. Beal, "Digital Simulation of Atmospheric turbelence," Journal of Guidence Control and Dynamics, pp. 125-138, 1993. [13] I Besselink, D Cowling. D. W Kruger, "Aircraft Landing gear Dynamic: Simulation and control," in Vehicle System Dynamics, 1997, pp. 110-180. [14] G. Blackman, "A review of display systems for flight simulation," in RAeS Conference 61

Flight Simulation Technologies, Capabilities and Benefits, London. [15] L. Research, "X-Plane Version 10," Laminar Research, 2012. [16] R. Laminar, "Plane Maker Manuel," Laminar Reserch, 2012. [17] "http://msdn.microsoft.com," 2 January 2009. [Online]. Available: http://msdn.microsoft.com/en-us/library/cc526948.aspx#SolutionDeployment. [Accessed 12 December 2012]. [18] Preper3d, "Simulation Developement Kit Manuel," 2012. [19] L. Martin, "SDK Overview," Lockheed Martin, Florida, 2009. [20] SimAVIO, "flythissim.com," 2008. [Online]. Available: http://www.flythissim.com/professional.aspx. [Accessed 28 December 2012]. [21] Flythissim, "Instrument Builder," Flythihssim.com, 2009. [22] C. Flightscape, "Flightscape Insight Manual," CAE Flightscape, 2012. [23] N. A. Campbell, "Aviation safety investigations & reports," Austerlian Transport Safety Bureau, 2005. [24] Flightscape, "Flightscape.com," CAE, 2012. [Online]. Available: http://www.Flightscape.com/product_service/insight-animation/. [Accessed 27 December 2012].

[25] P. CH, "Ch Flight Sim Yoke Manuel," Ch Products, 2010. [26] P. CH, "Rudder Control Manuel," CH Products, 2011. [27] F. J. McClintic, "MaxFlight FSVC-HL Operators Manual," MaxFlight Corparation, NJ. [28] E. Condor, "ARNIC Protocol Tutorial," Condor Engineering Inc., CA, 2004. [29] I. Preper3d, "Simulation Object Configutation Files," Prepar3d, 2010.

62

[31] P. Caro., "Flight Training and Simulatuon," in Humen Factors in Aviation, CA, Academic Press, 1988, [32] N. A. Campbell, "Evaluating Computer Graphics Animations of Aircraft Accidents and Incidents," Austerlian Transport Safety Bureau. [33] CAA, "Flight Data Monitoring, A Guide to Good Practice," Civil Aviation Authority, Norwich, 2003. [34] P. Lawn, "The Enhancement of a Flight Simulation System with Teaching and Research Application," Concordia University, Montreal, 1998.

63

Appendix 1
Instrument
Airspeed indicator userdata needle driverlist copilot_0/1=0:var_Vind_kias _ copilot_0/1=1:var_Vind_kias_cp startangle 0 stopangle 360 stopvalue 400 startvalue 20 enddata

Needle Driver Code

Fuel flow userdata needle driverlist engn_0/1=0:var_nodriver _ temp1_0/1=0:var_nodriver _ 1=1:var_FF1_lb/h startangle -135 stopangle 135 stopvalue 180 startvalue 0 enddata

Artificial Horizon userdata slider driverlist copilot_0/1=0:var_horzbug_stby _ copilot_0/1=1:var_horzbug_stby_cp instlimitupper 0.1 instlimitlower -0.6 startvalue -10 stopvalue 10 enddata

64

Instrument Turn Indicator

Needle Driver Code

userdata multidriveneedle driverlist fdir_mode>0:action_1 _ fdir_mode=0:state_hide action translatey:#fdirdpitch*instscale:0.015 _ rotatez:#fdirdroll*instscale:-1 enddata

Directional Gyro userdata needle driverlist copilot_0/1=0:var_hding_mag_vac _ copilot_0/1=1:var_hding_mag_vac_cp startangle 0 stopangle -720 startvalue 0 stopvalue 720 enddata Altimeter
userdata needle driverlist copilot_0/1=0:var_alt_ind _ copilot_0/1=1:var_alt_ind_stby startangle -360 stopangle 16200 stopvalue 45000 startvalue -1000 enddata

65

Appendix 2
This figure below gives the procedure for creation of an instrument panel. 1. The sketch of the instrument panel viewed and assessed in CAD viewer. 2&3. The CAD drawing is made into a solid instrument panel. 4 The model imported into Adobe Photoshop to add texture and improve the graphics. 5. The panel is then imported into AC3D and the instruments are added from the SimAVIO instrument panels builder. The codes used to run each of the instruments are read from files in X-Plane, The codes are given in Appendix1.

66

Appendix 3
The code given below is the configuration file in Prepar3d saved in the .cfg format. The highlighted lines have been altered to include the modified aircraft file. The modified file was saved as test piston.air in the configuration. Then the aircraft file is referred as sim= test piston, this means all the data for simulation for the aircraft will be taken from the specified aircraft file.
Configuration Files Prepar3d title=Beech Baron 58 Paint1 sim=test piston model= panel= sound= texture=1 kb_checklists=Beech_Baron_58_check kb_reference=Beech_Baron_58_ref atc_id=N71FS ui_manufacturer="Beechcraft" ui_type="Baron 58" ui_variation="White/Blue Stripes" ui_typerole="Twin Engine Prop" ui_createdby="Lockheed Martin" description="With the wonderful control harmony that is the hallmark of the Bonanza line, the Beech Baron 58 is considered a classic light twin. The Baron 58 is the spiffed-up version of a time-tested favorite, made more modern by its new Continental Special engines. The Baron combines the attractiveness of Beechcraft design with the reliability of twin engines, resulting in a gorgeous workhorse of an aircraft." FlightControls=FlightControls Aero= PistonEngine=PistonEngine Prop=Prop [fltsim.1] title=Beech Baron 58 Paint2 sim=Beech_Baron_58 model= panel= sound= texture=2 kb_checklists=Beech_Baron_58_check kb_reference=Beech_Baron_58_ref atc_id=N71FS ui_manufacturer="Beechcraft" ui_type="Baron 58" ui_variation="White/Red Stripes" ui_typerole="Twin Engine Prop"

67

ui_createdby="Lockheed Martin" description="With the wonderful control harmony that is the hallmark of the Bonanza line, the Beech Baron 58 is considered a classic light twin. The Baron 58 is the spiffed-up version of a time-tested favorite, made more modern by its new Continental Special engines. The Baron combines the attractiveness of Beechcraft design with the reliability of twin engines, resulting in a gorgeous workhorse of an aircraft." FlightControls=FlightControls Aero= PistonEngine=PistonEngine Prop=Prop

68

Appendix 4
The code given below is part of the flight dynamics data file. In the code given below only the aerodynamic data is included. The flight model can be altered by changing the aerodynamic parameters. This file is saved as an aircraft file (.air) in the configuration folder and referred in the configuration file given above. Sample Piston Engine Airplane Flight Dynamics File include asm.inc ; include this in ALL .asm files! include airtoken.inc ; definitions of token macros include sim1.inc ; definitions of token values .data sim_data label byte ;******START OF AERODYNAMIC DATA ;**** BEGINNING OF REQUIRED AERODYNAMICS ************************ ;The following 6 blocks define the base stability and control derivatives ;Lift, Drag, Pitch, Side Force, Roll, and Yaw. TOKEN_BEGIN AIR_80_LIFT_PARAMS REAL8 0.000000 ; CL spoiler REAL8 1.2 ; CL flaps REAL8 0.000000 ; UNUSED REAL8 0.715988 ; CLih REAL8 -0.273018 ; CLde REAL8 0.000000 ; UNUSED TOKEN_END TOKEN_BEGIN AIR_80_DRAG_PARAMS REAL8 0.065 ; CDo REAL8 0.07 ; CD flaps REAL8 0.007000 ; CD gear REAL8 0.000000 ; CD spoiler TOKEN_END TOKEN_BEGIN AIR_80_PITCH_PARAMS REAL8 2.133893 ; CMih REAL8 -1.6 ; CMde REAL8 -0.051200 ; CMde due to propwash REAL8 -2.601277 ; CLq REAL8 0.988016 ; CL adot REAL8 2.0 ; CM adot REAL8 -28.770823 ; CMq REAL8 -10.000000 ; CMq due to propwash REAL8 0.0 ; CMo REAL8 -0.07 ; CM flap REAL8 -1.066947 ; CM delta trim 69

REAL8 0.020000 ; CM gear REAL8 0.000000 ; CM spoiler TOKEN_END TOKEN_BEGIN AIR_80_SIDE_FORCE_PARAMS REAL8 -0.569647 ; CyB REAL8 0.038363 ; CyP REAL8 0.018805 ; CyR REAL8 -0.153025 ; Cy Delta Rudder TOKEN_END TOKEN_BEGIN AIR_80_ROLL_PARAMS REAL8 0.045 ; ClB REAL8 -0.9 ; ClP REAL8 -0.061076 ; ClR REAL8 0.000000 ; Cl Delta Spoiler REAL8 -0.269225 ; Cl Delta Aileron REAL8 0.010 ; Cl Delta Rudder TOKEN_END TOKEN_BEGIN AIR_80_YAW_PARAMS REAL8 0.099757 ; CnB REAL8 0.034553 ; CnP REAL8 -0.524805 ; CnR REAL8 -3.000000 ; CnR due to propwash REAL8 0.000000 ; UNUSED REAL8 0.000000 ; UNUSED REAL8 -0.002345 ; Cn Delta Aileron REAL8 0.063277 ; Cn Delta Rudder REAL8 0.002048 ; Cn Delta Rudder due to propwash TOKEN_END ;CL vs. Alpha ;The first entry defines the number of data points (maximum 47 entries) TOKEN_BEGIN AIR_CL_ALPHA dd 13 ; Number of Entries REAL8 -3.142, 0.000 REAL8 -2.356, 0.500 REAL8 -1.571, 0.000 REAL8 -0.366, -1.528 REAL8 -0.078, 0.000 REAL8 0.017, 0.590 REAL8 0.262, 2.096 REAL8 0.288, 2.183 REAL8 0.314, 2.096 REAL8 0.340, 1.528 REAL8 1.571, 0.000 REAL8 2.356, -0.500 REAL8 3.142, 0.000 TOKEN_END 70

;CM vs. Alpha ;The first entry defines the number of data points (maximum 47 entries) TOKEN_BEGIN AIR_CM_ALPHA dd 13 ; Number of Entries REAL8 -3.142, 0.000 REAL8 -0.550, -0.545 REAL8 -0.375, -0.545 REAL8 -0.305, -0.273 REAL8 -0.288, -0.227 REAL8 -0.271, -0.189 REAL8 0.000, 0.000 REAL8 0.271, 0.189 REAL8 0.288, 0.227 REAL8 0.305, 0.273 REAL8 0.375, 0.545 REAL8 0.550, 0.545 REAL8 3.142, 0.000 TOKEN_END ;**** END OF REQUIRED ************************************************ ;**** GROUND EFFECT ************************ ;Scalar on Lift due to ground proximity (max 11 entries) ;IN: Ratio of wingspan / height above ground ;OUT: Scalar on CL TOKEN_BEGIN AIR_GROUND_EFFECT dd 11 ; Number of Entries REAL8 0.054000, 1.250000 ; REAL8 0.100000, 1.160000 ; REAL8 0.200000, 1.096100 ; REAL8 0.300000, 1.060000 ; REAL8 0.400000, 1.040000 ; REAL8 0.500000, 1.030000 ; REAL8 0.600000, 1.024200 ; REAL8 0.700000, 1.021300 ; REAL8 0.800000, 1.016100 ; REAL8 0.900000, 1.010000 ; REAL8 1.000000, 1.000000 ; TOKEN_END ;**** END OF GROUND EFFECT ************************

AERODYNAMICS

71


