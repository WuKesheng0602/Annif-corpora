ONLINE DECISION SUPPORT SYSTEM FOR WATER REUSE SYSTEM PLANNING

By Thomas Tiveron, Bachelor of Civil Engineering Ryerson University, 2010 A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the Program of Civil Engineering

Toronto, Ontario, Canada, 2013 ©Thomas Tiveron 2013

AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A THESIS I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research. I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my thesis may be made electronically available to the public.

ii

Abstract
The need for the development of water reuse systems has never been higher due to depleting potable water sources, and the global migration of citizens to urban centers. While water reuse systems are a viable solution to these emerging problems, the implementation of them are often plagued by the increasing number and complexity of water treatment processes available. Therefore, the development of a decision support system (DSS) could aid engineers in their attempts to find solutions. This thesis contains the methodology and development of the DSS, WTRNetDSS Online. This web-based DSS uses a simple geographic information system (GIS) interface that takes the user's input of water resource recovery facilities (WRRFs) and potential reclaimed water end users and through the implementation of a multi objective genetic algorithm returns a set of optimal solutions. WTRNetDSS Online successfully determined optimal solutions for the case study of irrigation for Chicago area golf courses.

iii

Acknowledgements
Over the course of this thesis many different people have aided in its completion and although I am sure a few will have been forgotten, I am ever thankful for their help. Firstly, I am forever grateful to Dr. Darko Joksimovic for his excellent guidance, willingness to allow me to work on this project of his, and the many long meetings that almost never seemed to be long enough. I would also like to thank Professor Dr. James Li, whom helped show me the importance of setting structure to a long project and for his insight. I would like to especially thank my parents Cathy and Robert Tiveron for supporting me in my decision to continue into graduate studies. It was truly through their endless faith and support that this thesis has been completed. I am grateful to the examining committee for my thesis; Dr. Songnian Li, and Dr. Joseph Chow for reviewing my thesis, as it was through their suggested refinements that my thesis could be called complete.

iv

Table of Contents
ABSTRACT ................................................................................................................................................ III ACKNOWLEDGEMENTS ....................................................................................................................... IV TABLE OF CONTENTS ............................................................................................................................. V LIST OF TABLES .................................................................................................................................... VII LIST OF FIGURES ................................................................................................................................ VIII LIST OF EQUATIONS ............................................................................................................................... X LIST OF SYMBOLS AND ABBREVIATIONS ..................................................................................... XII CHAPTER 1 ­ OVERVIEW ...........................................................................................................................................1 1.1 1.2 Introduction ................................................................................................................................................1 Research Objectives and Thesis Outline ....................................................................................................3

CHAPTER 2 ­ LITERATURE REVIEW ........................................................................................................................... 7 2.1 Water Reuse................................................................................................................................................7
History............................................................................................................................................................... 7 Wastewater Treatment....................................................................................................................................... 8 Distribution Systems ....................................................................................................................................... 11 Guidelines and Regulations ............................................................................................................................. 14 Public Education ............................................................................................................................................. 15 Water Reuse Summary .................................................................................................................................... 17

2.1.1 2.1.2 2.1.3 2.1.4 2.1.5 2.1.6

2.2

Decision Support Systems ........................................................................................................................ 18
Introduction ..................................................................................................................................................... 18 Types of Decision Support Systems ................................................................................................................ 18 Decision Support System Components ........................................................................................................... 19 Optimization.................................................................................................................................................... 23 Decisions Support Systems Summary ............................................................................................................. 24

2.2.1 2.2.2 2.2.3 2.2.4 2.2.5

CHAPTER 3 ­ WTRNETDSS ONLINE ....................................................................................................................... 25 3.1 3.2 3.3 3.4 3.5 Introduction .............................................................................................................................................. 25 Programming Language & GIS Tool Selection ........................................................................................ 26 Distribution System .................................................................................................................................. 27 Treatment System ..................................................................................................................................... 36 Optimization ............................................................................................................................................. 40
Genetic Algorithm ........................................................................................................................................... 40 Tournament ..................................................................................................................................................... 43 Crossover ........................................................................................................................................................ 44 Mutation .......................................................................................................................................................... 45

3.5.1 3.5.2 3.5.3 3.5.4

v

3.5.5 3.5.6

Fitness ............................................................................................................................................................. 45 Ranking ........................................................................................................................................................... 52

3.6

Summary .................................................................................................................................................. 56

CHAPTER 4 ­ CASE STUDY ...................................................................................................................................... 59 4.1 4.2 4.3 4.4 4.4.1 4.4.2 4.5 Introduction .............................................................................................................................................. 59 Chicago Model Information ..................................................................................................................... 59 Genetic Operator Parameters .................................................................................................................... 68 Optimization Results ................................................................................................................................ 69 Solution Spaces .................................................................................................................................... 69 Optimal Front System Layouts ............................................................................................................ 79 Conclusion ................................................................................................................................................ 89

CHAPTER 5 ­ SUMMARY AND CONCLUSIONS ........................................................................................................... 91 APPENDIX A - WTRNETDSS ONLINE INPUT PARAMETERS ..................................................................................... 93 APPENDIX B - WTRNETDSS ONLINE OUTPUT VALUES .......................................................................................... 94 BIBLIOGRAPHY ...................................................................................................................................................... 106

vi

List of Tables
Table 1: Canadian Guidelines: Water Reuse Quality ................................................................... 15 Table 2: Business DSS Categories ................................................................................................ 19 Table 3: Platform Comparison ...................................................................................................... 26 Table 4: Silverlight 5 Compatibility ............................................................................................. 27 Table 5: Original Route Information ............................................................................................ 29 Table 6: Optimized Route Information ......................................................................................... 30 Table 7: Knowledge Base - Wastewater Unit Processes .............................................................. 36 Table 8: Influent Water Quality & Starting Unit Processes ......................................................... 39 Table 9: Unit Pipe Cost - Coefficients .......................................................................................... 48 Table 10: Treatment Train Unit Process Total Cost Equations .................................................... 50 Table 11: Unit Process Land Requirement Equations .................................................................. 52 Table 12: Pareto-Optimal Front Example - Rank 1 Details .......................................................... 53 Table 13: Case Study - Chicago WRRFs Locations ..................................................................... 59 Table 14: Case Study - Calumet Node Details ............................................................................. 65 Table 15: Case Study - Chicago WRRF Flow Data ..................................................................... 68 Table 16: Case Study - Summary of Optimization Runs .............................................................. 70 Table 17: Case Study - Individual Cost Reduction in Pareto-Optimal Front ............................... 74 Table 18: Case Study - 50 Generations - -Indicator Comparison ............................................... 78 Table 19: Case Study - 100 Generation - -Indicator Comparison ............................................... 78 Table 20: Case Study - -Indicator Comparison - 50 Generations x 200 Individuals - 5 Trials... 79 Table 21: Lowest & Highest Percent Demand Satisfied - Individual Chromosome Analysis ..... 80 Table 22: Case Study - WRRF Chromosome Unit Processes ...................................................... 88 Table 23: Case Study - Chicago Golf Course Locations .............................................................. 93 Table 24: Pareto-Optimal Front Example - Full Details ............................................................... 94 Table 25: Case Study - Lemont Node Details .............................................................................. 97 Table 26: Case Study - North Side Node Details ......................................................................... 99 Table 27: 50 Generations x 100 Individuals - Generation 1 Full Report.................................... 103

vii

List of Figures
Figure 1: WRRF and UP Relationship ........................................................................................... 2 Figure 2: Methodology Flowchart .................................................................................................. 5 Figure 3: California & Florida - Irrigation & Supply ................................................................... 14 Figure 4: Dummy Node Placement Flowchart - Part 1................................................................. 29 Figure 5: Dummy Node Placement Flowchart - Part 2................................................................. 30 Figure 6: Dummy Node Example - Supply Node ......................................................................... 31 Figure 7: Dummy Node Example - Demand 1 ............................................................................. 32 Figure 8: Dummy Node Example - Unoptimized Routes ............................................................. 33 Figure 9: Dummy Node Example - Optimized Routes ................................................................. 34 Figure 10: Knowledge Base - Unit Process Combination Rules .................................................. 38 Figure 11: Treatment Train Construction Flowchart .................................................................... 40 Figure 12: An Example of Pareto-Optimal Front ......................................................................... 53 Figure 13: NSGA-II Crowding Distance ...................................................................................... 55 Figure 14: NSGA-II Child Population Selection .......................................................................... 56 Figure 15: Case Study - Chicago WRRFs Locations & Selection................................................ 60 Figure 16: Case Study - Calumet Full Distribution Network ....................................................... 62 Figure 17: Case Study - Lemont Full Distribution Network ........................................................ 63 Figure 18: Case Study - North Side Full Distribution Network ................................................... 64 Figure 19: Case Study - Calumet Route Details ........................................................................... 67 Figure 20: Case Study - GA Parameter Testing............................................................................ 69 Figure 21: Case Study - 1 Generation - 100 Individuals - Multi-Rank Plot ................................. 71 Figure 22: Case Study - 100 Generations - 100 Individuals - Multi-Generation Plot .................. 73 Figure 23: Case Study - 50 Generations - Rank 1 Comparison .................................................... 75 Figure 24: Case Study - 50 Generations - Cost per Percent Comparison ..................................... 75 Figure 25: Case Study - 100* Generations - Rank 1 Comparison ................................................ 76 Figure 26: Case Study - 100* Generations - Cost per Percent Comparison ................................. 76 Figure 27: Case Study - 50 Generations x 200 Individuals - 5 Runs............................................ 79 Figure 28: Case Study - Low Demand Satisfied - Calumet Distribution Network ...................... 81 Figure 29: Case Study - Low Demand Satisfied - Lemont Distribution Network........................ 82 viii

Figure 30: Case Study - Low Demand Satisfied - North Side Distribution Network................... 83 Figure 31: Case Study - High Demand Satisfied - Calumet Distribution Network Part 1 ........... 84 Figure 32: Case Study - High Demand Satisfied - Calumet Distribution Network Part 2 ........... 85 Figure 33: Case Study - High Demand Satisfied - Lemont Distribution Network ....................... 86 Figure 34: Case Study - High Demand Satisfied - North Side Distribution Network .................. 87 Figure 35: Case Study - Lemont Route Details .......................................................................... 101 Figure 36: Case Study - North Side Route Details ..................................................................... 102

ix

List of Equations
Equation 1: Haversine Formula .................................................................................................... 35 Equation 2: Haversine Formula - Arranged for Distance ............................................................. 35 Equation 3: Route Length ............................................................................................................. 36 Equation 4: Percent Demand Satisfied ......................................................................................... 41 Equation 5: Life Cycle Cost .......................................................................................................... 41 Equation 6: Total Demand ............................................................................................................ 46 Equation 7: Total Demand Satisfied ............................................................................................. 46 Equation 8: Distribution System Cost........................................................................................... 46 Equation 9: Annual Distribution System Cost .............................................................................. 47 Equation 10: Annual Distribution System Construction Cost ...................................................... 47 Equation 11: Total Distribution System Pipe Cost ....................................................................... 47 Equation 12: Unit Pipe Cost ......................................................................................................... 47 Equation 13: Capital Recovery Factor .......................................................................................... 48 Equation 14: Distribution System Operation & Maintenance Cost .............................................. 48 Equation 15: Total Treatment Train Cost ..................................................................................... 49 Equation 16: Treatment Train Cost per WWRF ........................................................................... 49 Equation 17: Treatment Train Capital Cost .................................................................................. 49 Equation 18: Treatment Train Construction Cost ......................................................................... 49 Equation 19: Treatment Train Unit Process Total Cost ................................................................ 50 Equation 20: UP Cost - Type 1 ..................................................................................................... 50 Equation 21: UP Cost - Type 2 ..................................................................................................... 50 Equation 22: UP Cost - Type 3 ..................................................................................................... 50 Equation 23: UP Cost - Type 4 ..................................................................................................... 50 Equation 24: UP Cost - Type 5 ..................................................................................................... 50 Equation 25: UP Cost - Type 6 ..................................................................................................... 50 Equation 26: UP Cost - Type 7 ..................................................................................................... 50 Equation 27: Treatment Train Land Cost ..................................................................................... 51 Equation 28: Treatment Train Land Requirement ........................................................................ 51 Equation 29: UP Land Req. - Type 1 ............................................................................................ 52 x

Equation 30: UP Land Req. - Type 2 ............................................................................................ 52 Equation 31: UP Land Req. - Type 3 ............................................................................................ 52 Equation 32: UP Land Req. - Type 4 ............................................................................................ 52 Equation 33: UP Land Req. - Type 5 ............................................................................................ 52 Equation 34:  - Indicator.............................................................................................................. 77 Equation 35: Unilateral Improvement Required (%) .................................................................... 77

xi

List of Symbols and Abbreviations
ASR = Aquifer Storage and Recover CSA = Canadian Standards Administrators DSS = Decision Support System EPA = Environmental Protection Agency Eq. = Equation GA = Genetic Algorithm GIS = Geographic Information System MBR = Membrane Bioreactor NSGA = Non-Dominated Sorting Genetic Algorithm OS = Operating System RBC = Rotating Biological Contactors TT = Treatment Train URL = Uniform Resource Locator UIR = Unilateral Improvement Required UP = Unit Process VB = Visual Basic WRRF = Water Resource Recovery Facility WWTP = Wastewater Treatment Plant

xii

Chapter 1 ­ Overview
1.1 Introduction
Around the globe there is a growing shortage of potable water to meet the basic needs of the world's citizens. In fact, the World Health Organization reported that while only one fifth of the world's population live in a water scarce region, it is due to the lack of proper infrastructure that water scarcity affects one third of the population (World Health Organization, 2009). Both of these issues; depleted water sources and inadequate water infrastructure, may be aided through the construction of water reuse systems. While these systems can be referred to by various names including water reclamation, water recycling and water reuse, they are mostly using the same underlying ideology of repurposing a typically disposed of wastewater flow. The two main components of water reuse system are the wastewater treatment component and the distribution system component. It is through the proper treatment of a wastewater flow that water reuse systems can be implemented as a solution to water scarcity as it creates a new source of water, a new water supply (Miller, 2006) and the construction of the distribution system component would allow for the needed water delivery. Due to these benefits, water reuse has been growing in use globally to replace both non-potable and potable water in various applications. Even by using reclaimed water for a non-potable application a regions potable water supply is improved. The potable water supply is improved due to the fact the reclaimed water can be used for an application that doesn't require potable water, but originally potable water would have been used. The water reuse systems introduced above are very complex as they require various aspects of other water systems all working together. A water reuse system requires not only a water resource recovery facility (WRRF), which is the facility where wastewater treatment occurs, but also a distribution network to deliver its reclaimed water. Designing a WRRF along with a distribution system is a daunting task due the large number of possible options. A WRRF contains multiple processes, individually known as unit processes (UP), which are combined together to treat the influent wastewater to a specific level to exit the facility as effluent (Figure 1). Therefore, depending upon the influent quality received at the WRRF and its required effluent quality the number and specific UP choices will be different.

1

Figure 1: WRRF and UP Relationship

It has been found that when drawing upon a possible total of 44 different UPs and combining them in combinations of up to 16 UPs there are 1.76*1013 total possible WRRFs. In addition it was determined that through restricting the combinations by a set of heuristic rules and varying the influent quality the number of WRRFs possible could be reduced to as low as 3,000 feasible solutions (Joksimovic, 2006). However, even after selecting an appropriate treatment train the planner/designer is still required to create an efficient distribution system and select the customers to be supplied. All these decisions highly increase the number of design options, especially in complex systems that may contain multiple treatment plants. Therefore, to aid in the planning and design selection of an optimal water reuse facility and distribution system, a decision support system (DSS) is suggested as it can greatly improve the search for efficient water reuse schemes-through computerized calculations. Water reuse is a viable source of water for our future, albeit due to the complexity of the systems that support its treatment and distribution, it may seem like an overwhelming option. Through the creation of an effective and all-encompassing decision support system (DSS), the planning of an integrated water reuse system can be simplified and this could assist in further acceptance and implementation of water reuse program (Adewumi, et al., 2010). The problems of water scarcity and lack of advanced water infrastructure are global problems and for a DSS to be able to aid in solving these problems the DSS must be usable globally as well. Therefore, through creating an online DSS that aids in greater water reuse system acceptance and construction would be a good way to attempt to address the problems globally.

2

WTRNet, presented by Joksimovic (2006), is a DSS that aids in the development and analysis of water reuse systems by accounting for the interactions of the various components of a water reuse system (i.e. treatment trains, distribution system, and the end-users). WTRNet was originally created to give those whom plan systems, as well as decision-makers a systematic way to evaluate a large number of alternative solutions. It would do so through efficiently screening integrated water reuse system alternatives and identifying the most promising solutions to the user. When presenting solutions to the user WTRNet was to include not only suggestions for WRRFs, but also include a distribution system design where the user would specify the locations of its components. To expand upon the original successes of WTRNet, this thesis reviews the methodology required for the creation of an online version of WTRNet. Through moving its functionality to the internet water system planners, managers, and decision-makers worldwide would have the opportunity to easily access this DSS. Upgrading the underlying programming of WTRNet was essential due to the fact that it was originally coded in Visual Basic 6, which has lost its support from Microsoft (Microsoft, 2010). Thus one was unable to install and run WTRNet on any current (Windows 7 and 8) computer system. In addition to upgrading the underlying programming, by moving online WTRNet it would be able to take advantage of the many only web-based mapping tools that have become available. Through the use of a mapping tool, the new WTRNet would be able to automate more of the distribution system construction then before when the user had to input all the parameters.

1.2 Research Objectives and Thesis Outline
The main purpose of this research is to develop a web based DSS with a geographic information system (GIS) interface for optimal planning and preliminary design of centralized and decentralized wastewater treatment facilities and distribution systems for wastewater reuse applications. For the planning phase of a project the DSS could aid in the creation of broad system goals, as well as reducing the many alternative solutions that could be considered to a manageable list of just a few promising alternatives to be chosen for further development. The smaller list of chosen alternatives can also then benefit from the DSS as it can aid in the some of the initial cost estimating and end-user selection.

3

The construction of the decision support system requires the completion of many steps. Figure 2 shows an outline of the main steps that must be completed and their order. The DSS is being modeled after WTRNet, so a thorough analysis of its components was completed. A programming environment (tool for web application development) must be selected that will allow for the greatest programming flexibility and ease of use. After determining an environment and the reusability of WTRNet's components, the DSS construction is performed using a GIS interface that will be a key part of the upgraded DSS. The GIS interface must have global coverage as this will allow for a larger user base, which is a main goal behind moving the DSS to the internet. Once the main components of the DSS have been constructed, the system has to undergo extensive testing and a case study to assess the real world usability of the DSS.

Literature Review: Water Reuse, WWTP, Distribution Systems, DSS and Optimization

Programming Environment Review & Selection

Constructing Webbased GIS Interface, for Distribution System

DSS Construction: Database, Model base, Knowledge Base, User Interface

Assessing WTRNet Component's Reusability

Updating WWTP Optimization Algorithms

4

Extensive Testing & Case Study

Project Finalization

Figure 2: Methodology Flowchart

Due to the many components that are required for a water reuse system, an in-depth literature review was completed in Chapter 2. Here not only are all the components of a water reuse system reviewed, but also the components for decision support systems and optimization. It was through the thorough review of all of these complex systems, a DSS for water reuse schemes could be created. While Chapter 2 deals with the general components and functions of the parts of required to upgrade WTRNet; Chapter 3 discusses the ways in which each component was created for the construction of WTRNetDSS Online. In Chapter 3, the specifics of each component and how they have been adapted to work for WTRNetDSS Online are analyzed. Each of its sub-components are discussed; development environment and language selection, GIS interface, treatment trains (WRRF UP layout), distribution systems, the genetic operators (for optimization), and the ranking and selection criteria. Chapter 4 demonstrates WTRNetDSS Online's ability to handle a real world case study. WTRNetDSS Online is used to analyze the water reuse opportunities in the Chicago area for golf course irrigation. Concluding the report is Chapter 5, where the functionality and usability of WTRNetDSS Online are summarized. Completion of the goals of the research are discussed, along with ideas and recommendations for future research on the topic. There are also two appendices following 5

Chapter 5; Appendix A covers additional information about WTRNetDSS Online, while Appendix B contains additional material directly related to the Chicago case study examined in Chapter 4.

6

Chapter 2 ­ Literature Review
2.1 Water Reuse
2.1.1 History

The idea of water reuse is beginning to gain acceptance in the western world; however, it has been being used by other parts of the world for many centuries and in some cases millennia. The earliest cases of water reuse dates back to the Minoan civilization in ancient Greece, over 3000 years ago. They used wastewater to irrigate their fields during water shortages. The same practice has been documented of farmers in Germany and in the UK during the 16th & 18th century, respectively. In the 1800s, unintentional water reuse began to happen as cities were dumping their wastewater in close proximity to their drinking water sources. Soon afterwards many waterborne illnesses were linked with these practices and better wastewater and intake water solutions were implemented (Vigneswaran & Sundaravadivel, 2004). Throughout the 1900s there were many notable water reuse projects built in the United States. In 1942, a pipeline of 2.4m in diameter and 7.2km long was constructed from the Baltimore Back River activated sludge plant to the Bethlehem Steel Company. This pipeline supplied 4.5 m3/s of reused water to be used for cooling. This was important for Baltimore as they were able to significantly reduce their fresh water demand on an already limited upland supply, as well as reducing the flow of effluent back into local surface water. While this case of constructing a water reuse system for a single user was successful, this is not always the case as in Phoenix, Arizona. In 1982, Phoenix constructed a 58 km long pipeline to supply secondary treatment effluent to the Palo Verde Nuclear Power Plant for cooling, at a rate of 3.9 m3/s. The city and the power plant were soon being sued by a Phoenix land developer over the rights to the reclaimed water. The land developer felt that the water was needed for residential and commercial construction in the local Phoenix area. While the lawsuit was not successful, the nuclear power plant did reconstruct its cooling system so that it only required half of its original cooling water (Okun, 1996). Since the 1960s water reuse projects have become much more common in some parts of the world. Some of the factors for this increase have been: the rapid population growth in the arid 7

west and humid southern United States, stricter regulations on wastewater effluent, water reuse presentations, guideline, and regulation formation (Asano, et al., 2007). While the first factor is fairly simple to understand, as water reuse can aid in a reduction of potable water demand in areas already struggling with water shortages, the other reasons are more complex. Stricter regulations on wastewater effluent are able to increase the amount of water reuse projects, because plant operators are able to reduce the amount of effluent they are releasing by finding users for it. As well, expensive plant upgrades can be offset if it is known that once a certain effluent quality is met, the effluent can be sold. In Honolulu, a water reuse plant was constructed adjacent to their wastewater treatment facility and provides two different grades of water, termed R-1 and RO. R-1 is acceptable for irrigation and is sold at $0.17/m3 ($0.65/1000 US gallons), while the RO grade water receives reverse osmosis treatment and is sold at $1.32/m3 ($5.00/1000 US gallons) (McKenzie, 2004). Through the creation of water reuse presentations, guidelines, and regulations the public has become more receptive to the use of water reuse for various applications. The public has become more accepting of the implementation and use of reused water because they are being made aware of the benefits of its use and that the reused water is treated to a safe and appropriate level for each specific application. While water reuse is often portrayed as a new idea to solve blooming water shortage and quality issues, it is in fact an old process that has been being used for centuries to help populations deal with these problems. From ancient Greece to well into our foreseeable future, water reclamation will play an important role in guaranteeing the availability of potable water for most of the world's population. 2.1.2 Wastewater Treatment

Wastewater treatment is commonly split into three main categories; primary, secondary, and tertiary treatment. Furthermore, primary treatment tends to be subdivided into preliminary and primary, and tertiary into advanced treatment methods and disinfection (Davis & Cornwell, 2012). Primary treatment is split into two categories; preliminary and primary, each to accomplish a different task. Preliminary treatment mainly consists of removing large objects from the wastewater stream. To do this bar racks and screens are used to trap the objects. These objects consist of any large solids that may be found in the wastewater such as sticks, plastic 8

bags and other solids. The racks and screens are usually cleaned automatically. Following the removal of large solids the wastewater enters an equalization basin, this step is not to perform any level of treatment, but store excess wastewater and release it into the treatment plant during low flow times, therefore equalizing the flow for the following treatment processes (Cornwell, et al., 2008). Usually the first treatment process of the subcategory primary treatment is the primary settlement basin. This is either a rectangular or circular basin that is used to reduce the forward velocity of the wastewater and thus allowing for the heavier suspended solids to settle out of the flow. These tanks are skimmed on the bottom to remove the build-up of sludge in the tank and across the top to remove oils, grease, and other floatables that were not removed by the racks and screens (Cornwell, et al., 2008). Secondary treatment is the biological treatment phase of the treatment train and can be performed through a variety of processes. Some of the commonly used secondary treatment processes are; activated sludge treatment, trickling filtration, and rotary biological membrane. Activated sludge is a biological treatment process that requires two tanks; aeration and clarifying tank. In the aeration tank the primary effluent is mixed by either injected air or a stirring arm. Through this process microorganisms are able to interact with the organic compound and they consume them. If there is adequate available oxygen, the microorganisms consume all the organics and grow in size and clump together. These clumps, called flocs proceed in the wastewater to the second tank, the secondary clarifier, where due to their increased weight they settle to the bottom. This allows for clean water to be collected from the top of the tank. The flocs that settle are called activated sludge and while some of the sludge is disposed of, a portion of it is returned to the aeration tank, so that the microorganisms can continue to consume organics (Cornwell, et al., 2008). Another form of secondary treatment is trickling filters. Trickling filters are similar to the activated sludge treatment process and also require a clarifier. In this process the wastewater from the primary treatment is sprayed over a media, where the wastewater works its way through the void space. The media is usually either stones, slats, or a plastic material, and is the base on which the microorganisms attach themselves too. As the wastewater works its way down through the voids in the system, the organics are able to interact with the microorganisms and are 9

consumed. The trickling filter system does not actually filter the wastewater; its media provides a large amount of surface area for the microorganisms and wastewater to interact. Typically, stone or slat trickling filters are only constructed to about 1-3m deep, while plastic media trickling filters have been built up to 12m in depth. As the microorganisms grow in size they tend to fall off of the membrane and stay suspended in the wastewater until it moves onto the secondary clarifier and settles out. Rotation biological contactors (RBCs) use the same treatment mechanism as the trickling filters, by supplying a surface for the microorganisms to bond to and washes wastewater over it. The microorganisms are able to bond to disks, often 3-3.5m in diameter, and these disks are mounted on a rotating shaft that is semi-submerged in the wastewater. As the disks rotate they carry wastewater into the air where its organics are consumed by the microorganisms. As with the trickling filter process, once the microorganisms reach a certain size they fall off of the disks and go into the secondary clarifier, where they are removed through settlement (Cornwell, et al., 2008). The final stage of treatment for wastewater is the tertiary treatment processes. These processes further treat the wastewater for specific constituent removal. Some of the unit processes that are often used in tertiary treatment are disinfection, granular filtration, and membrane bioreactors (excellent for wastewater reuse applications). Disinfection is the most commonly used process for tertiary treatment and is usually done so by exposing the water to chlorine as either a gas or a liquid. However, chlorine is not the only disinfectant; UV irradiation, ozonation, and peracetic acid can be used (Lazarova, et al., 1998). Peracetic acid and ozone irradiation follow the same treatment method as chlorine; peracetic acid is added as a liquid and ozone is bubbled in as a gas. The disinfection method that differs is UV irradiation which is performed by using a lamp that emits radiation into the wastewater for disinfection (Gehr, et al., 2003). Another popular tertiary treatment for further suspended solid and BOD5 reduction is granular filtration. The wastewater is passed through sand that has been graded so that the water passes through progressively finer particles, thus trapping the constituents. This method of filtration can achieve TSS removal that is close to 100% (Cornwell, et al., 2008). One new tertiary treatment that is gaining popularity in wastewater reuse applications is membrane bioreactors (MBR). This treatment option in some cases can replace the secondary 10

treatment or be used instead of the secondary clarifier. As well, due to its compact size, containment and expandability, it can be an excellent choice for satellite treatment facilities. MBR treatment has been shown to be economical for small wastewater treatment plants. MBR treatment is able to compensate for influent of varying quality and flow. They have constituent removal performances of up to 98% BOD, 98% COD, 82% nitrogen, 97% phosphorous, and 5log E. Coli (Copeland, et al., 2007). 2.1.3 Distribution Systems

2.1.3.1

Overview

Water distribution systems serve a very simple purpose, which is to deliver water of an appropriate quality to a user in sufficient quantity and at a usable pressure. In most potable water distribution systems the amount of water required covers all aspects of the user's needs, from drinking, bathing, irrigating, and fire suppression and this is often in excess of 300L/capita/day. The quantity of water required in the United States of America has been seen to vary from a low of 197 L/per Capita/per day in Wisconsin and a high of 825 L/per Capita/per day in Utah (Mays, 1999). For a water reuse distribution system depending on the specific user's needs the system can be tailored to the appropriate size. Once the specific supply needs have been determined, the specifics of each component of the distribution system can be designed. Every distribution system has three main components; piping, pumping and storage (Ysusi, 2000).

2.1.3.2

Piping

When designing a distribution system for multiple users there are three main distribution system types; loop, grid, and branched (tree) networks. In a loop system large mains surround the area the users are in. The mains are then connected with arterial mains and the water is distributed from these pipes to the users through individual service connections. A looped system has many benefits such as having less headloss and there are no dead ends in the network where water may remain unused and risk its quality being reduced. A grid system is laid out in a checkerboard plan with a single main transmission line in the center of the system, instead of on the outskirts, as in the loop system. Usually in a grid system the capital cost may be reduced, as the main transmission line pipe size can be decreases as the distance from the supple increases. In a tree (or branched) distribution system, the same capital cost savings can be noticed as a grid

11

system; main pipeline (trunk) is able to be reduced in size, as users closer to the plant have been supplied. When additional users are required to be added to the system pipe branches are constructed straight to them from either the main trunk or branch of the system. These systems are beneficial for locations that do not require the high degree of reliability that the looped and grid systems have. Branched distributions systems may also require periodic flushing of the end points to remove any stagnant water. After a distribution system design has been selected there are many other requirements one must be able to satisfy. Many areas have placement requirements for reclaimed water pipelines, such as horizontal and vertical distances from potable water lines. These distances are put into place to attempt to minimize the chances of cross contamination and mistakes such as plumbing a potable service to the non-potable main. Often when dual pressurized systems are constructed, not only are the two systems spaced an appropriate distance from one another, they may also be installed in different coloured piping to reduce the risk of confusing the two systems. Other selection choices will have to be made such as piping material: ductile iron, steel, PVC, or HDPE; valve and hydrant placement (Asano, et al., 2007).

2.1.3.3

Pumping

Most water reuse systems only require one pumping station, with the exception of very large systems that may require booster pumps for distant storage tanks. A pumping station can be either above or below ground, depending on site requirements, although aboveground stations are preferred for ease of access. The stations also require some form of security around the pumps, either fencing or a building, as well as metering and a reliable power source. For reclaimed water service centrifugal pumps are most often used and come in a few varieties, depending on the space and pumping requirements. For applications where the required flow changes it is possible to use a variable-speed pump for increased efficiency (Asano, et al., 2007).

2.1.3.4

Storage

Storage in a potable water distribution system serves many purposes such as meeting the fire demand, ensuring uninterrupted supply during pump outages, equalizing pressure, and balancing water use. For a water reuse system many of these same needs can be met through the construction of a storage system reservoir. As well, the problems that exist with the storage of 12

potable water are all true for non-potable water; however, in most cases non-potable storage causes greater difficulties. The issues with water quality due to storage can be related to the water chemistry, microbiological contamination, and the physical water properties (Grayman & Kirmeyer, 2000). Storage is often determined as either short term, up to a week, or long term. Short term storage would be appropriate for a golf course where their water needs are only in the morning and evening, so that the water produced during the off hours can be stored for when it is needed. The storage for these kinds of systems are often a concrete or steel tank, with a small pumping system. Long term storage is for seasonal usages and requires the construction of reservoirs or lakes, as the required tank would be much too large (Asano, et al., 2007). When designing a storage facility for water reuse, it is important for the designer to analyze the total demand of the system and how much it is able to supply. Shown below in Figure 3 are the irrigation requirements for California and Florida, which show that California has one large peak in demand, while Florida has a lower peak but three other high use periods throughout the year. The differences between these two graphs are due to the rainfall and evaporation characteristics of each state. Due to these differences a storage site in California would be required to hold 150 days of water and Florida's storage site would only need to hold 90 days of storage. For areas that have a large seasonal variance in water reuse demand and a limited capacity for covered surface storage, aquifer storage and recover (ASR) may be a viable option. This is the process of pumping the excess reclaimed water into a subsurface aquifer and then pumping it out later when required. The storage capacity of ASR is essentially unlimited and is a good option when traditional storage options are not financially feasible (US EPA, September 2004).

13

Figure 3: California & Florida - Irrigation & Supply

(US EPA, September 2004) 2.1.4 Guidelines and Regulations

Currently, the handling of water reuse varies highly from country to country and sometimes even within a country. One main concept that needs to be understood for one to adequately understand the differing degrees of government control over water reuse activities is the difference between guidelines and regulations. Regulations are an explanation of the underlying legislation or law. This means that regulations explain the practical applications and informants of a law or legislation. In contrast, guidelines do not carry any legal weight. While guidelines can be further interpretations of laws, they are often used to advise one in what can be considered best practices (Canada, 2006). In Canadian guidelines for water reuse for toilet and urinal flushing were only recently developed (Health Canada , 2010). While the current guidelines only provide information for this single use, they state that a more comprehensive guideline is to be developed as Canadian interest in water conservation increases. The guidelines also refer one to the building code updates in CSA Standard B128.1-06/B128.2-06 for the implementation of non-potable plumbing. This national guideline is being developed on a risk based analysis, where potential risks are determined and an attempt is made to mitigate their damages as oppose to reacting afterwards. The water quality requirements proposed by the guidelines are as follows in Table 1. 14

Table 1: Canadian Guidelines: Water Reuse Quality Water Quality Parameters Parameter BOD5 TSS Turbidity E. Coli Thermotolerant Coliform Total Chlorine Residual Units mg/L mg/L NTU CFU/100mL CFU/100mL mg/L Median  10  10 2 Not Detected Not Detected 5 Maximum  20  20 5 200 200

(Health Canada , 2010) Table 1 only shows the required value of chlorine residual; however, any method of primary disinfection can be used. The table is enforcing the addition of chlorine to maintain the water's quality throughout storage and in the distribution system. After a system has been constructed, it will require testing for 30 days with at least 5 tests of each of the parameters in Table 1. Once the testing returns 5 tests, in a 30 day period, that are within the values of the table, then the frequency of testing can be reduced. However, if any future test results have values that are higher than the maximum, testing must return to 5 samples every 30 days until the test results are within the table's values again (Health Canada , 2010). While this is a national guideline, British Columbia is the only province that has standards for water reuse of various applications from toilet flushing to irrigation. Alberta allows for irrigation with treated municipal wastewater. The Canadian guidelines are incomplete for all wastewater reuse possible applications, although it is an important first step in the creation of a complete set of regulations. As more water reuse projects are created and able to meet Health Canada's stringent guidelines, the government will be able to expand on the success. 2.1.5 Public Education

One of the largest barriers to the widespread use of water reuse is the lack of public knowledge and acceptance. Studies have shown that people who consider themselves to be knowledgeable about water resources are generally more accepting of water reuse than the general public (Dupont, 2011). Many people in research from around the world have issues 15

dealing with the idea of consuming reclaimed water and the term `Yuck Factor' has been coined to deal with their feelings. Cities such as Singapore and San Diego have been able to put a positive spin on the terminology they use when dealing with public calling their reclaimed water, NEWater and Repurified Water, respectively (Po, et al., 2003). Often it is found that the public understands the importance of water conservation and the many benefits that are available through the implementation of a water reuse system. However, the public states that there is a mental barrier in agreeing to drink the reclaimed water. As well, many people are worried of the perceived health risks they believe are associated with water reuse. These perceived health risks can range from lethal pathogens, to the safety of the chemicals that are used to treat the water. When children are involved the concerns are even higher, as adults worry that children would confuse the two water sources and become ill (Roseth, 2008). The use of the reclaimed water greatly impacts the public's opinion on the acceptability of its use. For instance, there are far fewer people opposed to the idea of using reclaimed water to irrigate golf courses, or parks, or to flush their toilets. However, once the reused water was being used to irrigate crops or for clothes washing, the number of people opposed to the application increased, as these activities are associated with greater personal interaction with the applications. Therefore, it can be determined that as the chance of contact or duration of contact with the reused water increased, so did the public opposition to the application (Miller, 2008). Another important factor that affected public opinion on water reuse is how environmentally friendly they considered themselves to be. People that had already taken water conservation action inside their homes were more willing to accept reused water for toilet flushing. Many people also stated that moving into a neighbourhood with a dual plumbing system would be motivated by the fact that they would feel positive doing something for the environment (Po, et al., 2003). The WateReuse Association's executive director Wade Miller supported many of the above mentioned ways to gain public acceptance for wastewater reuse (Miller, 2008). Stating that the lack of public acceptance is the largest barrier to any reuse project; Mr. Miller formed a list of seven steps to aid in gaining public acceptance:

16

1. Agreeing on terminology 2. Positive branding 3. Properly communicating risks 4. Complete necessary research on microconstituents 5. Educate politicians 6. Embrace all stakeholders 7. Educate the public on the value of water As shown above, the basis of these seven elements has been supported through the many projects of various researchers. The importance of the wastewater reuse community agreeing on set positive terminology will aid in reducing public confusion and acceptance. As well, by completing research on what microconstituents are in the effluent and their affects, the correct risks associated with various qualities of water reuse can be explained to the users. While the public has various opinions on the acceptability of wastewater reuse; it is only through public support that these projects can be built. 2.1.6 Water Reuse Summary

In the future the world will have no choice but to turn to water reuse to supply our ever growing cities and population with potable water. Before all the specific details of any water reuse project can be determined it is an important task to begin educating the public, so that they can accept and support the project from the beginning. Designing a water reuse system consists of many aspects ranging from; supply and storage requirements, distribution, centralized, decentralized or satellite treatment facilities, specific treatment process selection and water quality requirements. The development of an inclusive decision support system will allow developers and city planners to sift through the many options available, so that they can focus on a few alternatives that are best for their project. While many water reuse projects have the same overlying challenges, each project will have its own specifics that need to be analyzed.

17

2.2 Decision Support Systems
2.2.1 Introduction

In today's global society there is an almost limitless amount of information available for one to use when making any decision. While this is beneficial in many cases, the ability of a single human to go through the volumes of information and retain it to make informed decisions is limited. Due to this limitation along with the growing complexity of data, decision support systems (DSS) have been developed to aid in this process. These systems have been being developed for many decades, with early advocators supporting them in the 1970s. Scott Morton, defined them as "interactive computer-based systems, which help decision makers utilize data and models to solve unstructured problems" (Gorry & Morton, 1971). This definition stresses the importance of a DSS to be able to handle large amounts of data and present it to the decision maker in an informative and not overwhelming way. For the field of wastewater treatment, it has been due to research and system advances that have increased the number of unit processes available for use. This increase has made it more difficult to select an optimal system heuristically. Due to this increased difficulty to select optimal treatment systems, decision support systems (DSS) have been developed to aid engineers and designers in the selection of unit processes for wastewater treatment trains. 2.2.2 Types of Decision Support Systems

DSS are capable of handling a variety of complex problems. Due to this, DSS have been successfully created for numerous industries with a broad range of applications. Some of the most common applications for DSS are management science, operational research, graphics, artificial intelligence, visual interactive modeling (Eom, et al., 1998), water and wastewater treatment (Hamouda, et al., 2009). For business applications DSS are becoming an important tool for all levels of management. Many companies are now dealing with a global marketplace and to keep their management informed with the information they require is an ever growing task. DSS are able to aid the company's decision makers, by collecting and sorting all the required data for a particular decision. Most business related DSS needs can be sorted into nine categories that are shown in Table 2. 18

Table 2: Business DSS Categories Problem Type Unstructured Semi-structured Structured Strategic Planning E-Commerce Forecasting Dividends Management Control Career Paths Budgeting Purchasing Operational Control Grievance Assignments Billing

(Courtney, 2001) There are many engineering applications that benefit from the use of DSS, especially many project management situations. These DSS are formed in a similar manner to some business based DSS shown in Table 2 above. Another engineering application where DSS are becoming needed is for wastewater treatment facility design, as it is increasingly more difficult for planners to be able to determine the correct combinations of the many unit processes and to achieve an optimal balance of technological, economical, and various other social factors (Garrido, et al., 2010). Some studies have indicated that for the optimal wastewater treatment design to be selected 20 principles must be analyzed and these principles range from the quantitative; chemical, physical, and microbial water properties, economic factors, to qualitative principles such as public opinion and perceived acceptance (Tchohanoglous, et al., 2003). Therefore, due to the complexity of water treatment systems DSS are an important tools for developers. 2.2.3 Decision Support System Components

DSS are developed for many applications from engineering to business management. No matter what the end application of a DSS is, it was created in order to aid users in making complex decisions. Due to the common underlying properties of DSSs, they are composed of some common components which are (Turban & Aronson, 1998):      Data Management Subsystem Model Management Subsystem Knowledge Management Subsystem User Interface Subsystem The User

19

Some DSS are broken down into different components; however upon reviewing the content of these components they often can be related back to the aforementioned five components. For example, a DSS created for water reuse system designs in South Africa states its components as; general information, engineering/technical evaluation, social perception evaluation, institutional perception evaluation and water resources evaluation, with a Java created user interface (Adewumi, et al., 2010).These components relate to the basic five DSS components, as the general information would be in the data management subsystem, the evaluation criteria would branch between the model management subsystem and the knowledge management subsystem. Therefore, while various DSS can be subdivided into a variety of subsystems, most DSS can be separated to the data management subsystem, model management subsystem, knowledge management subsystem, user interface subsystem, and the user.

2.2.3.1

Data Management Subsystem

The data management subsystem of a DSS is the sections of the program that is in control of all the information the system uses to aid in the decision making process. In relation to wastewater treatment DSS, this subsystem would contain all the unit processes and their specifications such as: land use, energy requirements, labour requirements, etc. This subsection has four main components which are the database itself, the database management system, the query facility, and the data directory. The database of a DSS can either be initially created as a part of the system, input by the user (only valid for small systems), or extracted from various sources. The type of database selected requires the creator of the DSS to determine what the required flexibility of the program is. If the database has the ability to be updated, either by the user or by automatically extracting the data, this is done through the database management system. The database management system ensures that the updated information is useable by the DSS. The query facility is used to complete data acquisition requests from the DSS. The complexity of this component will determine the variation of information available to the user. Finally, the data directory is an index of all the data within the database. The purpose of the data directory is to quickly allow the user to determine what information is available within the database, as well as the data's source, if it is updatable (Turban & Aronson, 1998).

20

2.2.3.2

Model Management Subsystem

The model management subsystem is the component of the DSS that performs all the data manipulation. This subsystem is the software that contains all the operations that can be completed by the DSS. As with the database management subsystem the model management subsystem can also be subdivided into its various components. These components are the model base, model base management system, model directory, model language, and model execution, integration, and command processor (Turban & Aronson, 1998). The model base is the group of functions that the DSS is able to perform. A DSS can contain just a single model, or multiple depending on the complexity of the system. These models can be classified into four different kinds (Kroeber & Watson, 1986). The first kind, strategic models are often used to aid in management decisions. These models often rely on external data and present outcomes of a broad scope. The second kinds of models are tactical models. These kinds of models are often used to determine resource allocation. Thirdly, operational models are used for daily tasks such as scheduling and inventory control. The final kinds of models are termed model building blocks and routines. This kind of model includes random number generators, regression analysis, present-value computations, etc. and these building blocks are often assembled into routines to perform a desired task (Turban & Aronson, 1998). The model base management system is used to allow the user to create new models. Using the model building blocks and routines in the model base, the management system is able to link them together appropriately to perform new tasks. For the model base management system to be able to sort through the model base it requires the model directory. Similar to the database directory, it is a catalogue containing all of the models in the model base and their uses. The modeling language is the programming language chosen by the DSS designer. There are many programming languages to choose from and depending on the DSS final application, an appropriate selection should be made. The model execution, integration, and command are the components of the model base subsystem that the user interacts with. While the model base management system can be used to form new models, the user must direct it in how to do so (Turban & Aronson, 1998).

21

2.2.3.3

Knowledge Management Subsystem

DSS are used to find solutions for many complex unstructured and semi-structured problems and due to application often require additional expertise to construct appropriate solutions. The knowledge management subsystem contains one or more intelligence systems that are able to aid the DSS in forming correct solutions. These intelligence systems can be: knowledge based which aid in the selection of steps to a mathematical decision; intelligence based which aid the user in building, and applying the various models in the model base; and decision analytic which are used to integrate theoretical methods of uncertainty. The intelligence systems that are used in a DSS to aid in its decision making are the components of the knowledge management subsystem (Turban & Aronson, 1998).

2.2.3.4

User Interface Subsystem

This is the part of the DSS that the user accesses to get the DSS to perform tasks of their choosing. While many DSS contain the appropriate information to complete tasks, most do not gain widespread acceptance due to an inconvenient user interface. The user interface subsystem must contain many components; some of the most important components are the actual graphical user interface, the ability to store input and output data, examples to guide the user on how to use the DSS, the ability to accept a variety of user input devices, and to present the data in a variety of output formats. The user interface must be designed to be as flexible as possible so that the largest numbers of users are able to perform operations with the DSS (Turban & Aronson, 1998).

2.2.3.5

Summary

To create a useful DSS all of the subsystems must be built to an appropriate level functionality. While the user interface is often the component of a DSS that is lacking, a DSS with an excellent interface, but a poor model or data base will be just as poorly received by potential users. A DSS should be constructed to suit the needs of the final DSS subsystem, the user. Determining the potential scope of users for a DSS will be important to determine how the rest of the DSS should be constructed. As well, many users will approve of a DSS that is open source as this allows them to either discover how the DSS was constructed and therefore how well it suits their needs, and to modify the DSS to suit their individual needs.

22

2.2.4

Optimization

For a wastewater reuse treatment plant and distribution system design, the DSS will be able to create a very large number of alternatives. It is due to the number of alternatives that the DSS has to be able to evaluate all of the possible scenarios and present the user with a select number of optimal alternatives. For the DSS to be able to present optimal alternatives a series of simulations and algorithms have to be constructed. While the system could be constructed statically at a peak flow scenario, modeling the system dynamically would allow the DSS to evaluate a real world scenario. Due to the large number of total possibilities in the system, heuristic programming may be used to limit the number of scenarios the DSS has to evaluate. Some of these rules for the system may consist of treatment process order, and / or the number of treatment process a single plant can have. There are a variety of methods that can be used to select an optimum solution; some of these methods include genetic algorithms, Monte Carlo simulation, aggregate objective function, etc (Hamouda, et al., 2009). Aggregate objective functions is a well-known optimization method in which all the various decision variables to be optimized are sorted into a single equation via weighted averages. An example of a wastewater treatment DSS that uses this method for optimization was created for South Africa (Adewumi, et al., 2010). Through the use of a Monte Carlo simulation many good wastewater treatment train alternatives can be generated; however, it does not directly find the optimal one. A Monte Carlo simulations generate purely random samples of a solution space as a search technique. This method has also been used to analyze what unit processes are important for creating sustainable fresh water treatment trains and which unit processes tend to be redundant (Chen & Beck, 1997). Genetic Algorithms (GAs) have also been shown to work well as an optimization tool for a DSS where the user is looking for the best solution or set of solutions in a very large sample space. GAs use the principles of genetic inheritance, Darwin's `the strongest survive', to search for the best alternative. In a GA an initial population of individuals, a subset of the total solution space to begin the search with, is created. Each individual contain their unique 'chromosome' which contains the information required to create a solution, as well as a fitness value/values and a rank. The fitness value/values for each individual is calculated by the design objectives that the 23

GA is trying to optimize; while the rank is a value of how the individual compares to the other individuals in the population (Deb, et al., 2002). The initial population is then run through various genetic operators; tournament, crossover, and mutation. Each of these genetic operators treats the individual in a manner similar to that of a real world organism in a population. The tournament operator (Section 3.5.2) gives the better individuals more mating opportunities, the crossover operator (Section 3.5.3) performs the mating and produces offspring individuals with inherited data from the parents, and the mutation operator (Section 3.5.4) will create a single offspring by randomly changing an individual. After the genetic operations have been performed on the initial population, all offspring have their fitness values calculated. The offspring population is then combined with the initial population and the strongest individuals become the parent population for the next generation of individuals (Michalewicz, 1999). While GAs are an excellent choice for handling the optimization for a DSS, it must be noted that due to the randomized starting point of each algorithm run, that even when using the same parameters the algorithm may find different solutions. Therefore, an analysis of the results is difficult, especially if the optimal solution is unknown. When creating DSSs to handle complex decisions with many alternatives genetic algorithms may offer a good technique to optimize the results. 2.2.5 Decisions Support Systems Summary

For everyone from business managers to city planners DSS are an important tool for them to be able to make informed decisions. In water and wastewater treatment projects, as the number of unit treatment processes increases along with their complexity DSS are becoming a critical tool for designers and engineers to use. It is important for a designer of a DSS to take into consideration a broad range of possible users and what level of flexibility they would require of the DSS. While the aforementioned development requirements for a complete DSS is a large list, it will be of great importance that the first point, which is that each component is designed for the maximum flexibility, is met so that the DSS has the ability to meet all current and future user needs.

24

Chapter 3 ­ WTRNetDSS Online
3.1 Introduction
To aid city planners and engineers in the increasingly difficult task of designing a complete and comprehensive water reuse system, research has been carried out in various fields from optimal distribution system layouts (Lejano, 2006), advanced water treatment processes (Clara, et al., 2005), optimal treatment process combinations (Garrido, et al., 2010), and reviews of how to gain support for the construction of these projects (Miller, 2008). WTRNetDSS Online has been created to take into account the many various components and advanced research in all the fields required for water reuse systems. At its core, WTRNetDSS Online continues where WTRNet left off. WTRNet was originally created to aid in the planning and preliminary designs of water reuse projects. While it was a good DSS and useful at finding optimal solutions, through the use of GAs, from a very large number of possible project designs (Joksimovic, 2006), there were a few short comings WTRNetDSS Online was created to address. Firstly, the creation of WTRNetDSS Online was to be a web-based application. Creating a web-based application would allow for the DSS to be used on a variety of operating systems (Table 4), as well the DSS may also be run in the safety of a web browser by a user whom would not be comfortable installing software designed from an unknown source on their computer. In addition WTRNetDSS Online would be able to handle optimizing systems that contain multiple WRRFs for water reuse applications, where its predecessor only dealt with a single WRRF. This added ability would allow for the modeling of water reuse systems for larger cities that may have multiple WRRFs, but also for decentralized and satellite treatment options. The final upgrade for WTRNetDSS Online would be an easy to use GIS based interface that would be able to automatically generate the distribution system for the user, instead of requiring the user to input it. These functional improvements on WTRNet, along with updating the source code to a modern programming language creates a highly usable DSS for water reuse applications that takes into account the recent advancements in web-based applications and GIS availability. 25

3.2 Programming Language & GIS Tool Selection
In an attempt to delay any future compatibility issues, it was decided that choosing an internet application platform that would support multiple browsers and operating systems (OS) would be of upmost importance. The platforms that were considered were Javascript and Google App Engine, Python with Django, and Microsoft Visual Basics (VB).Net with Silverlight. These alternatives were also evaluated for compatibility and ease of use with the available free mapping tools. These tools were GRASS GIS, Google Maps API, Bing Maps API, and Esri ArcGIS Online. Each platform was compared on the standards of; ease of learning, ease of code translation, compatibility with OSs, compatibility with web-browsers, compatibility with mapping tools, and estimated future support. In Table 3 each platform is ranked out of 3, with 1 being the best and 3 being the worst, the information contained within the table represents the opinion of the thesis author. Upon analyzing the platform choices it was determined that Microsoft VB.Net with Silverlight would be the best choice. This selection was made because not only did it have excellent browser and OS support (Table 4), but it also supported the greatest array of mapping tools. VB.Net and Silverlight also had a good amount of tutorials to aid in the learning of the platform, and for ease of translating WTRNet's legacy VB 6 code to VB.Net would be the easiest transition. As well, Microsoft was developing Silverlight 5, a new iteration of Silverlight, showing that it would be supported in the coming future, and they also have an extensive support library at http://msdn.microsoft.com/library/default.aspx.
Table 3: Platform Comparison Python & Django 1 3 2 2 3 2 Javascript & Google API 3 2 1 1 3 1 Microsoft VB.Net & Silverlight 2 1 1 1 1 1

Ease of Learning Ease of Translation Compatibility OSs Compatibility WebBrowsers Compatibility Mapping Tools Estimated Future Support

26

Table 4: Silverlight 5 Compatibility OS Windows Vista Windows 7 Windows 7 SP1 Windows Server 2008 SP2 Windows Server 2008 R2 SP1 Windows Server 2003, Windows XP SP2, SP3 Macintosh OS 10.5.7 + Internet Explorer 9      Internet Explorer 8      Internet Explorer 7      Firefox 3.6 +      Safari 4+      Chrome 12+     

 

 

 

 

 

 

(Microsoft, 2011)

3.3 Distribution System
Upon choosing VB.Net with Silverlight as a developmental platform, the next step was to determine which mapping tool would perform best for WTRNet Online. Of the four mentioned above, GRASS GIS could not be considered as it only worked with Python, and Google Maps API only worked with Javascript; therefore, Bing Maps API, and Esri ArcGIS Online were the only two remaining options. It was found that ArcGIS required the addition of a client library that called Bing Map directories to run services such as geocoding, and routing (ArcGIS, 2012). Therefore, it was determined that using Bing Maps API directly, instead of ArcGIS to call Bing Maps API, would be the best choice. One of the main upgrades to the original WTRNet is the map based interface the user interacts with. The interface allows the user to create the two nodes (locations on the map) of interest to the user. The supply type node is the location of a source of reclaimed water. In the original WTRNet the system could only have one supply type node and so the system designs were typically based on a centralized system based around the location of a municipal WRRF. WTRNetDSS Online expand on this functionality giving the user the ability to have systems with multiple supply type nodes and due this can design decentralized systems with possible supplies 27

away from the main municipal WRRFs. The second type of node that the user can create is the demand node. Demand nodes are the location of potential end-users for the reclaimed water. To be able to add these nodes to the map interface the Bing Maps plug-in has been modified to allow for the user to click and input the locations of both supply and demand nodes; while a modified routing program creates a branched distribution network from the supply nodes to the demand nodes. A third type of node, a dummy node, is created by WTRNetDSS Online automatically and cannot be modified by the user. The purpose of a dummy node it locate where the branches of the branched distribution system occur and the process of locating these branches is expanded upon below. The first step in creating the branched distribution network was to create the shortest routes from each supply to each demand point along the road network. Once there were two shortest routes (directly from supply to demand along the road network), they were inspected for intersections and if there was one found a dummy node was placed at the intersection. Intersections were able to be found, as each route is made up of smaller links connecting "waypoints" sent from the routing service to display the route on the map. If a dummy node was placed (intersection found), then the routes were recreated with a single route going from the supply node to the dummy node then two additional routes to each of the individual demand nodes. This process is explained in the flowchart (Figure 4 and Figure 5) and the results are shown in the Figures 6 through 9 as they would appear in the WTRNetDSS Online's interface. In Figure 6, a single supply node is placed onto the map, this corresponds with the top "Supply Node" circle in the flowchart below. Figure 7, shows the automatically created route from the Supply Node to the first Demand Node, the "Route to Demand 1" arrow of the flowchart, while when attempting to continue through the flowchart the process is blocked by "Are There 2 Completed Routes". Figure 8 displays the automatic route to the second demand node and here the process is able to continue through the flowchart past the first query. Figure 9, shows the final optimized routes from the "Supple Node" to both "Demand Node 1" and "Demand Node 2" through "Dummy Node 1".

28

Supply Node Route to Demand 1 Route to Demand 2

Demand Node 1

Demand Node 2

Are There 2 Completed Routes? No Wait for more points Yes Proceed to Route Optimization
Figure 4: Dummy Node Placement Flowchart - Part 1

Table 5: Original Route Information Route 1     Link List (link1, ..., linkn) Route Length From Node (Supply) To Node (Demand1)     Route 2 Link List (link1, ..., linkn) Route Length From Node (Supply) To Node (Demand2)     Route n Link List (link1, ..., linkn) Route Length From Node To Node

29

Route 1

Route 2

Compare Link Lists

Update Route 2 to next route. When Route n is reached, update Route 1 to next route (Route 2) and repeat.

Intersection Found? No Yes Place Dummy Node & Recall Routing
Figure 5: Dummy Node Placement Flowchart - Part 2

Table 6: Optimized Route Information     Route 1 Link List (link1, ..., linkn) Route Length From Node Supply To Node DummyNode1     Route 2 Link List (link1, ..., linkn) Route Length From Node DummyNode1 To Node Demand1     Route 3 Link List (link1, ..., linkn) Route Length From Node DummyNode1 To Node Demand2     Route n Link List (link1, ..., linkn) Route Length From Node To Node

30

Figure 6: Dummy Node Example - Supply Node

31

Figure 7: Dummy Node Example - Demand 1

32

Figure 8: Dummy Node Example - Unoptimized Routes

33

Figure 9: Dummy Node Example - Optimized Routes

34

One important value for the calculation of the total system cost is the cost of the distribution system; the other factor is the WRRF associated costs (See Equation 7). To accurately calculate this cost the length of each route is required. The routes are created through a series of waypoints along it which are connected to draw the path. These waypoints are how the Bing Maps - Routing Service returns the route information. While some waypoints are close together and the distance between them could adequately be found as if they were on a flat plane; some waypoints are far apart and the curvature of the Earth's surface should be taken into account. For this reason, all of the distances between waypoints, which are then summed to solve the length of the route, are calculated using the Haversine Formula (Equation 1) for distance across a curved surface. In the Haversine formula shown below, in the left side of the equation d/r is the central angle in radians.
Equation 1: Haversine Formula   ( ) = ( -  ) + ( ) ( )( -  ) 

d = distance between two points along sphere r = radius of the sphere 2 , 1 = latitude of point 2 and latitude of point 1 2 , 1 = longitude of point 2 and longitude of point 1 As well, an estimate of 6371 km was used for Earth's radius. While the Earth isn't perfectly spherical the distance from the poles and equator to the center range from 6353 km to 6384 km, but 6371 is the accepted mean radius (Princeton University, n.d.). Equation 1 can be rearranged to solve for the distance and this formula is shown below, Equation 2. The total route length formula is Equation 3, where n = the number of waypoints - 1, or the number of distances calculated; and dm = first distance.
Equation 2: Haversine Formula - Arranged for Distance  -   -   =    ( ( ) + ( ) ( )  ( ))  

35

Equation 3: Route Length


  =  
=

3.4 Treatment System
The constructions of treatment trains in WTRNetDSS Online are created through a guided random selection that queries an extensive knowledge base. The knowledge base is that same as the knowledge base in the original WTRNet and is shown in Table 8. The knowledge base contains all of the information associated with each UP to appropriately calculate costs (Section 3.5.5), as well as combination rules Figure 10. To begin a treatment train the first UP is selected based upon the quality of the influent water. The possible water qualities used as a source of reclaimed water are raw sewage, primary effluent, or secondary effluent. Each water quality source has various UPs that can be the starting UP of the TT for that water quality source and their allowed starting UPs are shown in Table 7. After a beginning process is selected the UP Combination Rule Matrix (Figure 10) is queried to determine which processes may follow the beginning process. A list of all possible following processes is constructed and a single UP is randomly selected from that list and placed at the end of the treatment train being constructed. Once the new UP has been added to the end of the treatment train, it becomes the new determining factor for which UPs can be added next. The new final UP is found in the same matrix discussed above and its list of possible following UP is constructed. One UP is then randomly chosen from that list and added to the treatment train. This loop is continued until a UP is added to the TT that cannot be followed by another UP (disinfection UPs). The flowchart shown in Figure 11 demonstrates this process. This approach follows the same method and knowledge base that was devised for the original WTRNet.
Table 7: Knowledge Base - Wastewater Unit Processes

Category
Preliminary

ID
1 2 3 101 102

Unit Process Name
Bar Screen Grit Chamber Coarse Screen Fine Screen Sedimentation w/o Coagulant

Primary

36

103 104 105 106 107 201 202 203 204 205 206 207 Secondary 208 209 210 211 212 213 214 301 302 303 304 305 306 307 Tertiary 308 309 310 311 312 313 314 315 401 402 Disinfection 403 404 405

Sedimentation w/ Coagulant DAF w/ Coagulant Membrane Filtration Actiflo® Stabilization Pond : Anaerobic High Loaded Activated Sludge + Sec. Sedim. Low Loaded Activated Sludge w/o de-N + Sec. Sedim. Low Loaded Activated Sludge w/ de-N + Sec. Sedim. Trickling Filter + Secondary Sedimentation Rotating Biological Contactor Submerged Aerated Filter Stabilization Pond : Aerobic Stabilization Pond : Aerated Stabilization Pond : Facultative Constructed wetland: Free-Water-Surface Flow Constructed wetland: Subsurface Water Flow Membrane bioreactor Excess Biological Phosphorus Removal Phosphorus Precipitation Filtration over fine porous media Surface filtration Micro filtration Ultra filtration Nano filtration Reverse osmosis Granular Activated Carbon Powdered Activated Carbon Ion exchange Advanced oxidation ­ UV/O3 Advanced oxidation ­ UV/H2O2 Soil Aquifer Treatment Maturation pond Constructed wetland - polishing Flocculation Ozone Paracetic acid Chlorine dioxide Chlorine gas Ultraviolet radiation

(Joksimovic, 2006)

37

Figure 10: Knowledge Base - Unit Process Combination Rules

38

Table 8: Influent Water Quality & Starting Unit Processes

Influent Water Quality
Raw Sewage

ID
1 2 3 107 201 202 203 209 201 202 203 204 205 206 207 208 209 210 211 212 213 214 301 302 303 307 308 312 313 314 315 401 402 403 404 405

Allowed Starting Process Unit Process Name
Bar Screen Grit Chamber Coarse Screen Stabilization Pond: Anaerobic Ponds High Loaded Activated Sludge + Sec. Sed. Low Loaded Activated Sludge w/o de-N + Sec. Sed. Low Loaded Activated Sludge w/ de-N + Sec. Sed. Stabilization Pond: Facultative High Loaded Activated Sludge + Sec. Sed. Low Loaded Activated Sludge w/o de-N + Sec. Sed. Low Loaded Activated Sludge w/ de-N + Sec. Sed. Trickling Filter + Sec. Sed. Rotating Biological Contractor (RBC) Submerged Aerated Filter (SAF) Stabilization Pond: Aerobic Stabilization Pond: Aerated Stabilization Pond: Facultative Constructed Wetland: Free Water Surface Flow Constructed Wetland: Subsurface Water Flow Membrane Bioreactor Excess Biological Phosphorous Removal (EBPR) Phosphorous Precipitation Filtration Over Fine Porous Media Surface Filtration Micro Filtration Granular Activated Carbon (GAC) Powdered Activated Carbon (PAC) Soil Aquifer Treatment (SAT) Maturation Pond Constructed Wetland: Polishing Flocculation Ozone Peracetic Acid Chlorine Dioxide Chlorine Gas UV Radiation

Primary Effluent

Secondary Effluent

(Joksimovic, 2006)

39

Treatment Train: (Empty) User Input Water Quality Query Table 9 for all possible starting UPs Randomly Select UP & Add to Treatment Train

Treatment Train: UP1 Query Figure 11 for all possible UPs that can follow UP1 Build list from Figure 11 for all possible UPs Randomly Select UP from list of UPs & Add to Treatment Train

Treatment Train: UP1, UP2

Repeat with next UP, until an end is reached.
Figure 11: Treatment Train Construction Flowchart

3.5 Optimization
3.5.1 Genetic Algorithm

While there is a general introduction of the underlying processes required by a GA in Section 2.2.4, this section explains the steps undertaken to create a GA that is used for WTRNetDSS Online. As previously explained, GAs use a population of individuals to represent the various design alternatives that are being analyzed. Some important components of the individual are its fitness and rank. The fitness values for each individual are calculated values based upon the optimization objectives. The rank of an individual is found by comparing its fitness values to those of the other individuals in the population. The two optimization objectives being considered by WTRNetDSS Online are the percent demand satisfied and the life cycles cost. For optimization the percent demand satisfied (Eq. 4) is to be maximized and the life cycle cost (Eq. 5) is to be minimized. Two objectives are 40

considered as if the only goal was to minimize the life cycle cost the solution would simple be to not supply any of the demand. Therefore, a bi-objective optimization may find solutions closer to those the user was searching for in using the DSS for, which is an efficiently priced system that supplies some amount of the potential end users.
Equation 4: Percent Demand Satisfied  =   (%) 

  =   (%)  =    (3 )  =   (3 )
Equation 5: Life Cycle Cost  =  + 

  =    ($)  =      ($)  =     ($) As well, the GA has many project constraints that relate to the various components of a water reuse system. For WRRF construction (TT layout), the TT must consider the influent wastewater pollutants and the UPs selected must remove the pollutants to such an extent that the effluent meets the required standards for the end-user's chosen application. Therefore, variation in influent water quality and effluent water requirements will affect the life cycle cost of the WRRFs, due to the UPs selected to perform the wastewater treatment. For the percent demand satisfied, the end-users cannot demand more water than is available at the WRRFs for treatment. In a case where demand outreaches the available supply there will be a maximum demand satisfied that is below 100%. Finally, as the distribution system follows the road networks this will constrain the minimum length of piping possible for the system to deliver the reused water, and affect the life cycle cost associated with the distribution network.

41

The other component of the individual is that which contains its specific design alternative information (a sample of the solution space) and this component is often referred to as a chromosome and each chromosome consists of genes (Michalewicz, 1999). The chromosomes that are used in WTRNetDSS Online's GA have two parts that are assembled separately and then put together. The first part of the chromosome contains one or more of the potential WRRFs' treatment train layouts. After a treatment train is constructed, through the method explained in Section 3.4, it is transferred into a chromosome, so that the information can be contained in an individual. A single WRRF's treatment train can be represented as "19|25|33|31|40|0|0|0|0|0|0|0|0|0|0|0|0|0|0". This chromosome contains an ordered set of numbers, the 'genes' that represent which individual UPs are to make up the WRRF's treatment train and their order of construction, with the first gene being the starting treatment process. Each TT that is created will contain 19 'genes', as it was found to be the longest possible TT allowed by the UP combination rules (Figure 10), the unused spots contain a "0" as this contains an empty UP in the Knowledge Base. The other values represent the index location of UPs in the Knowledge Base. For the above example, it is a TT uses primary effluent as a TT influent and the UPs are connected in the following order index 19 is a "Stabilization Pond: Facultative", and is connected to index 25 which is a "Filtration Over Fine Porously Media", connected to index 33 is a "Ion Exchange", connected to index 31 is "GAC", and finally connected to index 40 "Ozone". One major upgrade for WTRNetDSS Online is its ability to optimize systems that involve more than one WRRF, in these cases multiples of the above chromosome are made and attached together in a chain. In the order that the user adds Supply Nodes, or WRRFs, to the system that is to be optimized segments of 19 genes are added to the individuals chromosome. Each of the TTs that are added to an individual's chromosome can be different to account for the differing water quality, quantities at each WRRF, as well as to account for the various treatment required by each of the end user's that each WRRF is supplying reclaimed water to. The second part of the chromosome that is required for the optimization is the allocation of end users segment. This part of the chromosome is made up of the values of 0 to the number of WRRFs present in the system, and the length is dynamic based upon how many potential end users of reclaimed water are being evaluated. The value of each spot in this segment of the chromosome represents if the user is going to be supplied with reclaimed water and from which 42

WRFF that reclaimed water will be supplied by. Similarly to the using of "0s" as a null spot holder in the TT segments of the chromosome, here the 0s means the potential end user is not included in the system design, and any integer higher represents which WRRF is supplying the user. For example, a system with one WRRF and five users may have end user segment of the chromosome that looks like 0|1|1|0|1|; while in a system with four WRRFs and ten users it may be represented as 3|2|0|0|1|4|0|2|1|0|. Once each segment of the chromosome has been determined they are put together and represent the full chromosome for an individual in the GA's population. A full chromosome for a system with two WRRFs and eight users could resemble the following: 11|28|30|44|43|0|0|0|0|0|0|0|0|0|0|0|0|0|0|12|36|27|36|40|42|0|0|0|0|0|0|0|0|0|0|0|0|0|2|0|1|1|0|2|0|1|. The GA creates one full chromosome for each individual, and the number of individuals is set by the user by the population size property. Therefore, each individual contains a chromosome which contains all of the system information, the UP layout (TT) at each WRRF, and which end users are supplied and by which WRRF. In addition to this information, each individual will hold information such as, which generation they were created or modified in, their various associated fitness values, their crowding distance, and their rank. How each is calculated is explained after the following sections on chromosome manipulation or "evolution". 3.5.2 Tournament

From the initial population, the GA is designed to give the strong or better rated individuals a greater chance of having their chromosome (system layout information) move onto the next generation. Every generation's population is moved into the genetic pool where it can then have further genetic operations performed upon them (crossover and mutation; Sections 3.5.3 and 3.5.4, respectively). Therefore, for each population to increase in overall fitness, the stronger individuals can receive a higher level of representation in the genetic pool. The process that increases these higher rated individual's chance of being in the genetic pool multiple times is the tournament process. The tournament is held for a set number of randomly selected individuals. These individuals are compared and the best ranking one is placed into the genetic pool, where it awaits its opportunity to breed, mutate, or survive unchanged into the next generation. The tournament is held N times, where N is the same value as the initial population size (Iba & Noman, 2012). Upon creating a genetic pool of identical size to the initial population 43

(or in successive generations the size of the parent population, which is the same size) the individuals in the genetic pool have further genetic operations performed upon them. 3.5.3 Crossover

One of the processes that allow the individuals placed into the genetic pool to "evolve" into the next generation is the crossover process. The crossover process mimics the function of mating in real world species. Two potential individuals, mates, are randomly selected to have their chromosomes compared and if possible segments of them will be switched between them. This switching or crossing over of portions of their chromosomes creates two new offspring with traits that they inherited from the parent population. In WTRNetDSS Online the crossover process consists of two portions, due to the fact that the chromosomes of the individuals are also segmented into two sections; WRRF layout and end user selection. Due to the fact that the mating within the WRRF layout segment is significantly more complicated, as any individual design generated through crossover must still meet the treatment train layout rules. If a successful mating cannot be performed in the WRRF segment of the chromosome the process then proceeds to perform the genetic operation on the end user segment of the chromosome. The crossover process has a set probability of occurring for any individual in the genetic pool; therefore, to start the process an individual is chosen and a random number is generated that is between 0 and 1. If the random number is within the 0 to the crossover probability range, then the individual is selected as one of the individuals and a second individual is randomly selected. The next step in WTRNetDSS Online is to attempt to perform a crossover with the two individual's WRRF segment of their chromosome. Due to the fact that there could be more than one WRRF layout in the chromosome, the developed optimization methodology determines how many WRRF segments there are and at random one WRRF layout from each chromosome is selected to attempt a crossover. To commence the actual crossover, a UP in the first individual's selected WRRF layout is randomly select. This UP is analyzed to determine which UP category it belongs to (preliminary, primary, secondary, tertiary, or sludge) and the number of UPs that are being crossed over is randomly

44

selected. For example, if a TT containing 12 UPs is selected for analysis and its fourth UP is randomly selected for crossover, the attempted crossover length will range from 1 to 9 UPs. The same operation is performed on the second individual's WRRF section and the chosen pieces of each chromosome attempt an exchange. The newly formed TTs are evaluated for meeting the TT formation rules. If they were successful in forming two new TTs, the new individuals are added to the genetic pool. If the new TTs do not meet the TT formation rules, the individuals are reset and they instead swap their entire end user selection segments. These two new individuals are then placed into the genetic pool. 3.5.4 Mutation

Similar to the crossover function, the mutation function is to evolve the current population into the next generation. While the crossover function is created to mimic mating in real life, the mutation function is to add random changes to any part of the individual's chromosome. Mutation varies from the crossover function as it only requires a singular individual. Once an individual is selected to be mutated, the chance is based upon the mutation probability value (%). At random a UP in a WRRF segment of the chromosome is selected. This UP is evaluated for which UP category it fits into and another UP from that category replaces it. As with the crossover function, switching within the category does not guarantee a successful mutation, as the new TT is reevaluated against the TT construction rules for compliance. If the TT meets the rules, the new chromosome is placed into the genetic pool as an offspring of the parent. However, if the rules are not met, the TT is returned to its original state and the end user segment of the chromosome is then analyzed. In this segment an end user is selected at random and has its supply changed. This change can be to a different treatment plant or to receiving now reclaimed water at all. 3.5.5 Fitness

The two values that WTRNetDSS Online will be using currently for its evaluation will be the values for percent demand satisfied and the life cycle cost of each system layout. The fitness values are calculated for each individual and the goal of the optimization, and WTRNetDSS 45

Online, is that through successive generations the genetic pool is gradually populated by "better" individuals. In this case, better or more optimal individuals would be those that supply a greater percent demand satisfied and those that do so at a lower life cycle cost than the other individuals in the population. Therefore, the optimizer has the mixed task of attempting to maximize the percent demand satisfied, while trying to minimize the life cycle cost analysis. The percent demand satisfied is the easier fitness value to calculate and while it was introduced by Equation 4 above, the details of its components are shown in the calculations below:
Equation 6: Total Demand
-

 ( ) =  
=



  =       =       (3 )
Equation 7: Total Demand Satisfied
 - 

  ( ) =  
=



  =           =        (3 ) The life cycle cost fitness value for each individual required a much more in depth analysis of each individual. The life cycle cost requires totaling the costs associated with the construction and operation of each WWRF in the analysis, as well as the costs associated with the distribution systems to the included end users. The equation for life cycle cost is introduced above (Eq. 5); while again the detailed equations for its components are shown below:
Equation 8: Distribution System Cost  =   

  =      ($)

46

 =      ($/)  =   ()
Equation 9: Annual Distribution System Cost  =  + 

  =      ($/)  =       ($/)  =         ($/)
Equation 10: Annual Distribution System Construction Cost  =   

 =       ($/)  =      ($)  =    ( -1 )
Equation 11: Total Distribution System Pipe Cost
 - 

 =

   
 =

 =      ($)  =      =   ()  =      ($/)
Equation 12: Unit Pipe Cost  =       

 =      ($/)  =  ()

47

Equation 13: Capital Recovery Factor   ( +  )   =   ( + ) -  

 =    ( -1 )  =     =   ()
Equation 14: Distribution System Operation & Maintenance Cost  = (/ )  

 =         ($/)  =      (%)  =      ($) The above equations are required for calculating the costs for the distribution system for the duration of the "Costing Evaluation Period". For WTRNetDSS Online, due to the lack of a fully customizable experience for the end user, a limitation set by a simple GUI, some of the above factors have been set in the formulas and unable to be changed by the user. The values that are set above as follows (Joksimovic, 2006):  = 50   = 3%
Table 9: Unit Pipe Cost - Coefficients Land Use Grassland Rural/Suburban Urban Cost Coefficient 1 47.47 96.19 129.41 Cost Coefficient 2 3.51 3.07 2.72

(Joksimovic, 2006) The values for the second half of Equation 5, the Treatment Train Cost are calculated using the following formulas.

48

Equation 15: Total Treatment Train Cost
 - 

 =


 = 



 =     ($)  =         =      () ($)
Equation 16: Treatment Train Cost per WWRF  =  + 

 =      () ($)  =     ($)  =      ($)
Equation 17: Treatment Train Capital Cost  =   ( + (  +  )) 

 =     ($)  =     ($)  =    (%)  =    (%)
Equation 18: Treatment Train Construction Cost  =   ( + (  +  +  +  +  )) 

 =     ($)  =       ($)  =    (%)

49

 =    (%)  =    (%)  =    (%)  =    (%)
Equation 19: Treatment Train Unit Process Total Cost
-

 =

  .
=

 =       ($)  =      =    () ($) For the calculation of the TT's UP total cost, a component of Equation 18, various equations are required depending upon which UP is being analyzed. The equations used to calculate the TT UP Total Cost are split into 7 different types; Types 1,2,6 are polynomial equations which are a function of the design flow, Type 3 is a function of BOD loading, Type 4 is a function of the serviced population, Type 5 is a function of the occupied land, and Type 7 is a function of the annual treated volume (Joksimovic, 2006). These equations are summarized below in Table 10.
Table 10: Treatment Train Unit Process Total Cost Equations Type 1 2 3 4 5 6 7 TT UP Total Cost Equation    = 1   2 ,   {,  ,  }   = 1  2 + 2   + 3 ,   {,  ,  }   = 1   + 2   = 1   2 + 3   + 4   = 1      = 1   2   (3 ) ,   {,  ,  }   = 1    Equation Label Equation 20: UP Cost - Type 1 Equation 21: UP Cost - Type 2 Equation 22: UP Cost - Type 3 Equation 23: UP Cost - Type 4 Equation 24: UP Cost - Type 5 Equation 25: UP Cost - Type 6 Equation 26: UP Cost - Type 7

50

 =     =    =     =   

 =    =      =     =   

(Joksimovic, 2006) The second half of Equation 16 is the TT Land Cost, the equations required to calculate this value for each individual are shown below. Similar to the TT construction costs, the calculation for the land required by unit process varies depending upon its type. Table 11 shows the five types of equations used to calculate the land requirements of the unit processes; Types 1,2,4 are a function of the flow rate, Type 3 is a function of the services population, and Type 5 is a function of BOD removed (Joksimovic, 2006). The equations in Table 11 are used in Equation 28 below.
Equation 27: Treatment Train Land Cost  = (   ) + 

 =      ($)  =     (2 )  =    ( $ ) 2

 =    ($)
Equation 28: Treatment Train Land Requirement
-

 =

 
=

 =     (2 )  =      =     () (2 )

51

Table 11: Unit Process Land Requirement Equations Type 1 2 3 4 5 TT Land Req. Equation UP Land Req = 1  2 + 2   + 3 ,   {,  ,  }  UP Land Req. = ,   {,  ,  }   UP Land Req. = 1   2 UP Land Req. = 1   2 ,   {,  ,  } UP Land Req. = 1   Equation Label Equation 29: UP Land Req. Type 1 Equation 30: UP Land Req. Type 2 Equation 31: UP Land Req. Type 3 Equation 32: UP Land Req. Type 4 Equation 33: UP Land Req. Type 5

 =     =    =     =   

 =    =     =    

(Joksimovic, 2006) 3.5.6 Ranking

One of the most complex sections of any GA is the ranking. The ranking and sorting of individuals in WTRNetDSS Online is done through a non-dominated sorting genetic algorithm, specifically NSGA-II (Deb, et al., 2002). NSGA-II was chosen to rank and sort the genetic pool created in each generation in WTRNetDSS Online, due to the fact that it would need to consider the multiple design objectives that need to be satisfied. These design objectives are the two calculated fitness values; percent demand satisfied, and the life cycle cost. NSGA-II has been shown to find a better Pareto-optimal front for many complex multi-objective problems than the Pareto-optimal front found by many other multiple objective evolutionary algorithms (Deb, et al., 2002). Multi-objective optimization problems often do not have a single optimal solution, but have a set of optimal solutions, often know as a Pareto-optimal front. The Pareto-optimal front consists of solutions to the multi-objective problem which are considered the best of the solution space; however, no better than any other solution in the Pareto-optimal front. For WTRNetDSS Online the NSGA-II algorithm is optimizing the aforementioned two objectives by attempting to maximize the percent demand satisfied, while minimizing the life cycle cost. This is illustrated in Figure 12 where the points (system layouts) along the Pareto-optimal front consist of solutions that satisfy different levels of the percent of the fulfilled demand (x-axis), at the lowest cost of 52

any of the other solutions in the current generation. Details of the Pareto-optimal front can be found in Table 12 and details of the full generation found in Table 24.

$4,500,000,000

$4,000,000,000
$3,500,000,000

Life Cycle Cost ($)

$3,000,000,000 $2,500,000,000

$2,000,000,000
$1,500,000,000 $1,000,000,000 $500,000,000

Pareto-Front Higher Ranks

$0 0.00%

20.00%

40.00% 60.00% Percent Demand Satisfied (%)

80.00%

100.00%

Figure 12: An Example of Pareto-Optimal Front

The process used to determine and individuals rank is the "Fast Nondominated Sorting" method for the NSGA-II and is explained in (Deb, et al., 2002). Deb, et al, explains that NSGAII using Fast Nondominated Sorting requires the calculation of two additional variables; the domination count, and a list of the individuals an individual is able to dominate. The Paretooptimal front is easy to find from these variables, as it is the first rank, and all the individuals that fit into it will have a domination count of 0, meaning they cannot be dominated by any individuals in the combined parent and offspring population.
Table 12: Pareto-Optimal Front Example - Rank 1 Details

Rank Demand Satisfied Life Cycle Cost ($) 87.10% $4,153,933,800 1 77.42% $3,640,168,350 1 74.19% $3,581,016,750 1 73.12% $3,291,800,850 1 53

1 1 1 1 1 1 1 1 1 1 1 1

69.89% 65.59% 48.39% 47.31% 45.17% 41.93% 33.33% 25.81% 24.73% 13.98% 9.68% 5.38%

$2,879,628,300 $2,832,255,450 $2,760,766,200 $2,598,195,150 $2,306,649,150 $1,756,150,200 $1,627,673,400 $1,621,421,550 $1,128,611,880 $817,944,885 $591,042,015 $335,346,885

Continuing to solve the second rank individuals, the first rank individuals need to be temporarily removed/ignored in the analysis. The easiest way to do this, is through the use of the second variable; the list of the individuals an individual dominates. To ignore the individuals in the first rank, the list of individuals it dominates is queried and each of the individuals in the list has their unique variable of their domination count reduced by one. Afterwards, the population is scanned for new individuals that now have a domination count of zero, and these individuals make up the second rank. This process is continued until all the ranks have been identified. After NSGA-II has given a rank to all the individuals, both the parent population and their offspring (the genetic pool), each rank must be sorted as well. NSGA-II preserves the most unique individuals over those that are in a crowded solution space. Due to this, a crowding distance, Figure 13, is calculated for each individual solution and the individuals within each rank is sorted based upon crowding distance.

54

Figure 13: NSGA-II Crowding Distance

It is vital that each rank is properly sorted by crowding distance due to the fact that NSGA-II only retains half of the combined population (parents and offspring). When this splitting location is not between ranks, individuals within a ranking group are split and therefore, it must take those in the rank with the best crowding distance (Figure 14). After the split, the retained population may be a mix of the original parents and its offspring. This group becomes the next generation's parent population.

55

Figure 14: NSGA-II Child Population Selection

(Joksimovic, 2006)

3.6 Summary
WTRNetDSS Online is a system that has been constructed of three main components; the interactive mapping GUI which aids the user in the creation of branched distribution networks, the treatment train designer, and the NSGA-II to optimize the whole system. By using a familiar mapping tool as the main GUI component of the system, Bing Maps API, has created a comfortable and easy to learn interface for the users. Users have the ability to create systems without running the optimization, if they were to choose to do their own calculations and just required the user interface. Unseen by the user, the treatment train designer relies on a knowledge base of 54 unit processes to create each of the WRRFs placed by the user. Through the methods described in above (Section 3.4), each TT is analyzed to ensure that it meets the effluent quality required by the end user that has the most stringent water quality requirements.

56

While the first two components build randomly generated system solutions, based upon the user's input, the final component the NSGA-II powers the optimization. This algorithm follows the path of a GA by creating offspring from a parent population of individuals that represent various system solutions for the entire system. Parent individuals are selected through the tournament function, so that the strongest individuals have the greatest opportunity to continue onward. The parent's offspring individuals are created through the crossover function (mating), and mutation function. As well, due to the random nature of the offspring creation, NSGA-II searches the entire solution space for the good solutions. For multi-objective problems, the NSGA-II algorithm may help in finding a set of good solutions that are represented by each generation's Pareto-optimal front - the rank 1 individuals or non-dominated individuals. The major upgrades that have been performed upon the original WTRNet to create the new version WTRNetDSS Online were; upgrading the programming language, moving the platform to the internet, the automated creation of the branched distribution network, and the ability of the DSS to handle systems that contain more than one WRRF. The programming language of WTRNet was upgraded from the obsolete VB.6 to VB.Net to allow for the DSS to run on current computer systems. As well, the DSS was modified so that it would run on the internet. The major advantages of this move are that users of any OS can use the DSS with the same functionality, and the developers can easily perform upgrades and the users do not have to be notified to install them, as they are using the most up-to-date version every time they access the website. Being moved online the DSS also now takes advantage of the Bing Maps API plug-in and its associated services. This plug-in allows for the user to build systems in their local regions without having to upload maps, as they had to in the old WTRNet. In addition to not having to upload maps to the program, the new WTRNetDSS Online uses Bing Maps Routing services to create a branched distribution network from the user's WRRFs to the potential end-users. This automated branched distribution network creation is a major upgrade from the original WTRNet that required the user to specific all of the distribution system components. Finally, the last upgrade is the ability of the NSGA-II algorithm to optimize systems containing more than one WRRF. This ability was add through the modification of the chromosome component of the individuals created for the optimization. The chromosome was modified to have multiple 57

segments representing WRRFs and the end-user segment to have integer to specify which WRRF would potentially supply an end-user. The many upgrades to WTRNet to form WTRNetDSS Online will have their functionality demonstrated in the following chapter.

58

Chapter 4 ­ Case Study
4.1 Introduction
The WTRNetDSS Online was tested and demonstrated in a case study that analyzed the feasibility and costs associated with a large scale water reclamation project in the Chicago area. This project was selected over the City of Waterloo case study (Zhang, 2004), which was analyzed by the original WTRNet (Joksimovic, 2006), as the Chicago area had multiple WRRFs. In additional to being able to demonstrate WTRNetDSS Online's ability to optimize water reuse systems that consider multiple WRRFS, Chicago has a growing need for a large scale change in its water management practices due to its limited water supply. The motivation behind this change has been largely influenced by a growing demand for potable water (25% by 2030), and increasing costs of water treatment (Meng, 2005).

4.2 Chicago Model Information
For the Chicago area an excellent opportunity for water reclamation is through irrigation as Cook County, in which Chicago is located, has 124 golf courses (Cook County Illinois Golf Courses, n.d.). Chicago has many WRRFs, which provides a useful scenario for WTRNetDSS Online to be tested for analysis of a system with multiple water reuse supply nodes (WRRFs). The three selected WRRFs for analysis were Calumet, Lemont, and North Side. Their locations are shown in Table 13 and on a map of the Chicago area in Figure 15. Calumet is in the lower right-hand corner (SE), Lemont is in the lower left-hand corner (SW) and North Side is centered at the top of Figure 15 (N). These WRRFs were selected due to the fact that their locations encircle the greater Chicago area.
Table 13: Case Study - Chicago WRRFs Locations
Name Calumet Lemont North Side Address 400 E 130 St 13 Stephen St 3500 W Howard St County Chicago Lemont Skokie Zipcode 60628 60439 60076

(Meng, 2005)

59

Figure 15: Case Study - Chicago WRRFs Locations & Selection

Of the 124 golf courses available to analyze, the list was reduced to 30 golf courses and their names and detailed location information can be found Appendix A - Table 23. The list of all potential golf courses had to be reduced from 124 golf courses to 30, due to an error running the Bing Maps Routing Service that made it not viable to create systems that contain more than 30 60

users. The error is that Bing Maps Routing Service will return a null value for a route the receiving component of the service that is waiting for the routing reply is then forced into an error, thus stopping the program. However, it should be noted that if the error is solved internally by Bing Maps Routing Service or if WTRNetDSS Online was modified in the future to work around the error, there would be no such limitation to the size of the systems a user could create These golf courses are used as potential end users and WTRNetDSS Online created a branched distribution network from each of the WRRFs to all of the golf courses. This branched distribution network is unique for each WRRF, as there is no system blending. While each user has the potential to be supplied by any of the WRRFs it is will only be supplied by a single WRRF in the final solution. WTRNetDSS Online creates all of the potential distribution systems when determining which end users will receive reclaimed water from which WRRF, but for visual clarity Figures 16 to 18 separate the total potential systems by each WRRF available to supply the end users. From the distribution systems, WTRNetDSS Online builds a list of all the nodes (locations of distribution system components). There are 3 main types of nodes; type 101 which are supply nodes or the locations of a WRRF, type 110 the location of demands (end users, for this case study golf course), and type 111 which are dummy nodes (the locations of distribution system branches). Table 14 contains the node details list that is represented on WTRNetDSS Online's GUI in Figure 15 for the Calumet WRRF. Furthermore, Figure 19 contains the route details for the Calumet WRRF; these are the lengths and locations of all the potential pipes in the branched distribution network. The details for all of the nodes for the Lemont WRRF and North Side WRRF distribution systems are in Appendix B - Tables 25 and 26, as well as the potential piping locations for Lemont WRRF and North Side WRRF Appendix B - Figures 35 and 36. In all the route details figures (19, 35, and 36) the route lengths are in meters and the "Supply Index" column contains which WRRF is supplying the pipe lengths. For this case study Calumet is supply one, therefore its index in an array of WRRFs is zero. Lemont is the second WRRF in the array index is one, and North Side is the third supply and has an index of two in the array.

61

Figure 16: Case Study - Calumet Full Distribution Network

62

Figure 17: Case Study - Lemont Full Distribution Network

63

Figure 18: Case Study - North Side Full Distribution Network

64

Table 14: Case Study - Calumet Node Details ID 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 Name Calumet Sunset Valley Golf Course Glencoe Golf Club Winnetka Golf Club Peter Jans Weber Park Golf course Robert A. Black Golf Course Sidney Marovitz - Waveland Anets Burger Brothers Golf Sportsmans Country Club Willow Hill Wilmette Golf Course Glenview Park Golf Course Indian Boundary Golf Course Billy Caldwell Edgebrook Chick Evans Bryn Mawr Country Club Arlington Lakes Golf Buffalo Grove Golf Course Bartlett Hills X -87.613 -87.8087 -87.7786 -87.7869 -87.7517 -87.7666 -87.6872 -87.7559 -87.7505 -87.7646 -87.6815 -87.6788 -87.6443 -87.6309 -87.8233 -87.7676 -87.8668 -87.7881 -87.8136 -87.7878 -87.7724 -87.7585 -87.8184 -87.7511 -87.8439 -87.6454 -87.7595 -87.7532 -88.1958 -87.7805 -87.763 -87.7289 -87.7514 -88.004 -87.8366 -87.9677 -87.8606 -88.1946 -87.904 Y 41.65916 42.17739 42.14509 42.13629 42.10479 42.10002 42.0649 42.06026 42.04828 42.03869 42.00514 41.92288 41.94905 41.84374 42.11876 42.10142 42.13831 42.13791 42.10554 42.10526 42.08048 42.07951 42.06978 41.99029 41.93812 41.87644 41.99388 41.99097 41.82467 42.03816 42.0409 42.00098 41.98737 42.06264 41.9845 42.15287 41.98677 41.99394 41.87388 Type 101 110 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 110 111 110 111 110 111 110 111 110 111

65

40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59

Mt. Prospect Golf Club Old Orchard Country Club Rob Roy Highland Woods Fox Run Golf Links Rolling Knolls Country Club Villa Olivia Streamwood Oaks Golf Club Hilldale Poplar Creek Country Club

-87.9493 -87.938 -87.9454 -87.8684 -87.9239 -87.8857 -88.1018 -87.9365 -88.0604 -88.0198 -88.2312 -88.0287 -88.2201 -88.1659 -88.1974 -88.193 -88.1192 -88.0795 -88.1374 -88.1446

42.05533 42.01802 42.08815 42.03906 42.09519 42.04751 42.15789 42.01744 42.02045 42.05643 42.0355 42.05773 42.01214 41.99519 42.02458 42.06666 42.06054 42.06395 42.05091 42.06058

110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111

66

Figure 19: Case Study - Calumet Route Details

To adequately model the irrigation of the Chicago area's golf course through water reuse various parameters were required. Table 15 shows the data on the flow volumes at each of the WRRF used in the case study. The design flow value is how much water each WRRF has been created to handle; while the program flow shows the modified units to input the flow volume into WTRNetDSS Online, which required the values to be m3/year instead of m3/day. For irrigation 67

of the golf courses the following calculations were performed; Chicago area golf courses were found to require around 7.2 * 103 m3/day based upon an area of 5.04 * 107 m2; or 1.428 * 10-3 m3/day per m2 of golf course (Anderson & Meng, 2011). Chicago area 18-hole golf courses are 8.74 * 106 m2 and 9-hole golf courses are 2.18 * 106 m2. Therefore, 18-hole and 9-hole golf courses require 1248 m3/d and 313m3/d of irrigation water respectively.
Table 15: Case Study - Chicago WRRF Flow Data Facility Calumet Lemont North Side Design Flow (103m3/day) 1340 8.7 1260 Program Flow (m3/year) 489,063,500 3,175,500 460,046,000

(Anderson & Meng, 2011) In addition to water quantity data, water quality data is also required, both for the influent to be treated at each newly constructed plant and the effluent quality required for the reclaimed water's end use of irrigation. The US EPA considers golf course irrigation part of "urban reuse" and therefore the following water quality parameters are required to be met; pH = 6-9, BOD  10 mg/L, Turbidity  2 NTU, Fecal Coliform = Not detectable/100mL, CL2 Residual = 1mg/L minimum (US EPA, September 2004).

4.3 Genetic Operator Parameters
The main optimization parameters that are needed to be set for the case study are the population size, probability of crossover, probability of mutation, and the stopping criteria, which in this case was the maximum number of generations. To align with the work previously done as a sensitivity analysis on WTRNet population sizes of 100, 200, and 300 were chosen. The probability of a crossover and mutation were set to 0.8, and 0.4 respectively, as it can be seen in Figure 20 that these values are where the original WTRNet was the most efficient at converging on an optimal solution at the selected population sizes. WTRNet's optimal solution for the sensitivity analysis was known; however, for the Chicago Case Study and WTRNetDSS Online, the optimal solution is unknown and therefore such an analysis of percentage of optimal solution reached cannot be performed.

68

Figure 20: Case Study - GA Parameter Testing

(Joksimovic, 2006)

4.4 Optimization Results 4.4.1 Solution Spaces

In the previous sections, the parameters that were required for the optimization were discussed and set for the following optimizations runs. Each of the 3 population sizes (100, 200, 300) were run for 50 and 100 generations, with the exception being the population size of 200 and 300; where only a maximum number of 95 and 65 generations, respectively. These reduced number of generations were all that was able to be completed due to the server running the optimization timing out before the completion of the 100 generations. The optimization runs are summarized below in Table 16.

69

Table 16: Case Study - Summary of Optimization Runs Number of Generations 50 50 50 100 95* 65* Number of Individuals 100 200 300 100 200 300

The effectiveness of the algorithm to appropriately rank the individuals into their proper ranks is shown in Figure 21 below. It shows the breakdown of the first generation of the first optimization run, 50 generations by 100 individuals. Only the odd ranks were shown for visual clarity; however, all individuals were in fact placed into their proper ranks. The full generation report is in Appendix B as Table 27. The best individuals, those with the lowest cost for their percent demand satisfied, are placed into the first rank and removed from the analysis. The next rank is then made up of the individuals that have the lowest cost for their percent demand satisfied (with the first rank individuals having been removed). This process is repeated until no more individuals are left.

70

$5,000,000,000 $4,500,000,000 $4,000,000,000 $3,500,000,000

Life Cycle Cost ($)

$3,000,000,000 $2,500,000,000 $2,000,000,000 $1,500,000,000 $1,000,000,000 $500,000,000 $0 0.00% Rank 1 Rank 3 Rank 5

Rank 7

20.00%

40.00% 60.00% Percent Demand Satisfied (%)

80.00%

100.00%

Figure 21: Case Study - 1 Generation - 100 Individuals - Multi-Rank Plot

In addition to showing that the algorithm is successful at ranking individuals in a generation correctly, the algorithm also needs to find, where possible, improvements. The main purpose of the optimization is to find individuals that are able to supply a greater amount of the demanded reclaimed water for a lower life cycle cost. Figure 22 shows the rank 1 or ParetoOptimal fronts of some of the generations of the first optimization run. Although, the range of the percent demand satisfied was reduced, the algorithm did in fact find individuals that were able to supply a greater amount of the reclaimed water for lower costs than the previous generations were able to. For instance the individual circled in the first generation was able to supply 65.59% of the possible end users for a life cycle cost of $2,832,255,450 (life cycle cost of the construction of 3 urban WWRF, the distribution system and system maintenance for 50 years); while the individual in the 100th generation was able to supply a similar 64.51% of the possible end users for a lifecycle cost of $1,529,496,850 - a reduction of 46%. To compare some of the generated costs with actual costs associated with construction in Chicago; it was found that two of the WRRFs included in the case study, Calumet and North 71

Side, have be analyzed to have plant upgrades. These upgrades would be to add disinfection treatment at both locations and the price associated with these upgrades have been estimated to be about $110 million for the capital cost of both installations, Calumet receiving chlorine disinfection and North Side receiving UV disinfection (Metropolitan Water Reclamation District of Greater Chicago, 2012). Therefore, the capital cost per UP in the case study could be considered to be about $55 million. While the maximum length allowed for TTs is 19 UPs, Table 21 shows the breakdown of the individual's total chromosome (system solution) and the TT layouts selected for the WRRFs ranged from 5 to 8 UPs. Extending this information to a full WRRF layout (assuming the capital cost associated with the disinfection processes would be similar to that of other UPs) this would account for the capital cost per WRRF ranging from $275 million to $440 million. Thusly, the capital costs of all three WRRFs would range from $825 million to $1.32 billion. To analyze the capital cost of the distribution system component of the life cycle cost it has been found that the installation of pipelines in Chicago range from $246 to $656 per meter (Anderson & Meng, 2011). From Figure 19, the total length of the Calumet distribution system is found to be approximately 421.81 km in length. Lemont's and North Side's distribution systems are 563.74 km and 290.90 km in length, respectively (Figures 35 and 36). These lengths result in a capital cost of a range of about $72 to $370 million dollars for systems with 100% of the demand satisfied. Using Equation 14 from Section 3.5.5, the total life cycle cost of the distribution system ranges from $180 to $ 925 million, assuming a 50 year evaluation period and an operation and maintenance factor of 3%. When the costs associated with both the WRRF construction and the distribution system are combined the range is about $1 to $2.24 billion. This range of costs was determined using values recently estimated values from upgrades and construction occurring in the greater Chicago area (Anderson & Meng, 2011) (Metropolitan Water Reclamation District of Greater Chicago, 2012). These values are slightly lower than those found in Figure 22, this may have been caused by the need for the knowledge base's costing factors needing to be updated to account new advances.

72

$4,500,000,000 $4,000,000,000 $3,500,000,000

Life Cycle Cost ($)

$3,000,000,000 $2,500,000,000 $2,000,000,000 $1,500,000,000 $1,000,000,000 $500,000,000 $0 0.00% Gen 1 - Rank 1 Gen 25 - Rank 1 Gen 50 - Rank 1 Gen 100 - Rank 1

20.00%

40.00% 60.00% 80.00% Percent Demand Satisfied (%)

100.00%

120.00%

Figure 22: Case Study - 100 Generations - 100 Individuals - Multi-Generation Plot

Figure 23 and Figure 25 show the Pareto-Optimal front of the final generations of all of the optimization trials that were run (50 for Figure 23 and 100* for Figure 25). It was expected that the optimization runs with the higher number of individuals in the population would find better optimal solutions that is solutions that supply a greater percentage of the demanded reclaimed water for a lower life cycle cost, than the runs with the lower number of individuals. This hypothesis has held mostly true; for the higher number of individuals the optimal front for each trial improved (Figure 25) where the same number of generations was successfully completed by each trial. However, for Figure 25 where the same number of generation runs were not able to be conducted the results are less conclusive, although still highly positive. It should be noted though that the Pareto-optimal front of the 200 individual trials was mostly ahead of the Pareto-optimal front of the 100 individual trial, even though it was only able to complete 95 of the 100 maximum generations. The trial with 300 individuals was only able to complete 65 out of the 100 generation runs and its Pareto-Optimal front came in between the Pareto-optimal fronts of the 100 individual trial and 200 individual trial. Another positive feature of the 100* 73

generation run is that for a similar level of percent demand satisfied it was able to find individuals at a lower life cycle cost. These comparisons are shown in Table 17. It can also be noted that while there was a reduction in the range of percent demand satisfied in Figure 22, this trend was not as apparent in the evaluations carried out in Figure 23 and Figure 25. The cause of the reduction of the range in values of percent demand satisfied is unknown at this time.
Table 17: Case Study - Individual Cost Reduction in Pareto-Optimal Front Individual 100 200 300 Generations 50 100 50 95 50 65 % Demand Satisfied 68.82 68.81 100 100 77.41 77.41 Life Cycle Cost ($) 2820633300 1597496850 3952891800 3512165400 2235577050 2205384300 Cost Reduction ($) 1,223,136,450 440,726,400 30,192,750

Another interesting aspect shown in Figure 24 - 50 generations, and Figure 26 - 100* generations; is the efficiency of adding additional users to the system. The figures show that the cost per percent demand satisfied is high for small systems (low percent demand satisfied), the cost per percent lowers off to almost a flat level after about 70% of the demand is satisfied, at about $35 million for each additional percent demand filled. For Figure 26, the results appear much more volatile than those of Figure 24; although the range of efficiencies range from about $25 million to $35 million per percent demand satisfied, while Figure 24 after the initial significant reduction range from about $25 million to $40 million per percent demand satisfied, a larger range than that shown by Figure 26. Thusly, the aforementioned conclusion holds true for both sets of data, although the appearance of Figure 26 is misleading due to scale. The optimization runs where a higher number of individuals and generations were analyzed were again able to find more efficient solutions, although from an purely efficiency standpoint the cost associated with supplying additional demand does approach a stable value.

74

$4,500,000,000 $4,000,000,000 $3,500,000,000

Life Cycle Cost ($)

$3,000,000,000 $2,500,000,000 $2,000,000,000 $1,500,000,000 $1,000,000,000 $500,000,000 $0.00% 50Genx100Ind - Rank 1 50Genx200Ind - Rank 1 50Genx300Ind - Rank 1

20.00%

40.00% 60.00% 80.00% Percent Demand Satisfied (%)

100.00%

120.00%

Figure 23: Case Study - 50 Generations - Rank 1 Comparison
$100,000,000 $90,000,000

Cost per Percent Demand Satisfied ($)

$80,000,000

$70,000,000
$60,000,000 $50,000,000 $40,000,000

50Genx100Ind - $ / % Satisfied 50Genx200Ind - $ / % Satisfied 50Genx300Ind - $ / % Satisfied

$30,000,000
$20,000,000 $10,000,000 $0.00%

20.00%

40.00% 60.00% 80.00% Percent Demand Satisfied (%)

100.00%

120.00%

Figure 24: Case Study - 50 Generations - Cost per Percent Comparison

75

$4,000,000,000

$3,500,000,000
$3,000,000,000

Life Cycle Cost ($)

$2,500,000,000 $2,000,000,000 $1,500,000,000 $1,000,000,000 $500,000,000 $0 0.00%

100Genx100Ind - Rank 1 95Genx200Ind - Rank 1 65Genx300Ind - Rank 1

20.00%

40.00% 60.00% 80.00% Percent Demand Satisfied (%)

100.00%

120.00%

Figure 25: Case Study - 100* Generations - Rank 1 Comparison
$40,000,000 $35,000,000

Cost per Percent Demand Satisfied ($)

$30,000,000 $25,000,000 $20,000,000 100Genx100Ind - $ / % Satisfied $15,000,000 $10,000,000 $5,000,000 $0 0.00% 95Genx200Ind - $ / % Satisfied 65Genx300Ind - $ / % Satisfied

20.00%

40.00% 60.00% 80.00% Percent Demand Satisfied (%)

100.00%

120.00%

Figure 26: Case Study - 100* Generations - Cost per Percent Comparison

76

In addition to reviewing the difference in life cycle cost of individuals of similar percent demand satisfied values across Pareto fronts, a comparison of total Pareto fronts was made. To perform a direct comparison of various Pareto fronts, the epsilon indicator ( - indicator) between fronts was calculated in pairs. The  - indicator between to Pareto fronts is the factor by which one Pareto front dominates the other and is used to quantify the difference between Pareto fronts when the optimal set is unknown (Chow & Regan, 2013). The  - indicator can be found using Equation 34. Pareto front A is said to dominate Pareto front B if the  - indicator is less than 1. If the  - indicator is greater than 1 then the percentage of unilateral improvement required (UIR) by front A to dominate front B can be found (Eq. 35).
Equation 34:  - Indicator

  -  (, ) =   2    1    1     2  1 =   ()   2 =   () 
Equation 35: Unilateral Improvement Required (%)







1

 = 1 -

1  - 

From the trial runs used above the resulting Pareto fronts can be compared in many ways and these are shown in the tables below. From Table 18, it can be noted that the only situation where a Pareto front fully dominates another is when the comparison is made between the 300 Individual front and the 100 Individual front; while when the reverse comparison is made the 100 Individual front is required to improve by 29.68% to dominate the 300 Individual front. Table 18 supports Figure 23, which clearly shows that as the number of individuals increase, so does the ability for the trial's Pareto front to dominate the other fronts. That is to find more optimal solutions when compared to the other 50 generation runs. However, it is harder to draw conclusive statements from Table 19, as none of the Pareto fronts dominate any of the others. Due to the fact that both the 300 and 200 individual evolution periods was stopped by the webserver timing out, it can be noted that the 200 individual trial (95 generations) was much more successful than the 300 individual trial (65 generations), as the after the same amount of 77

computational time the 300 individual run required a minimum improvement of 44.83% to dominate the 200 individual front. Alternatively, the 200 individual front only required a 1.24% minimum improvement to dominate the 300 individual front.
Table 18: Case Study - 50 Generations - -Indicator Comparison

Pareto Front A 300 Ind. 200 Ind. 300 Ind. 100 Ind. 200 Ind. 100 Ind.

Pareto Front B 200 Ind. 300 Ind. 100 Ind. 300 Ind. 100 Ind. 200 Ind.

 - indicator 1.0691 1.2360 0.91926 1.4220 1.0558 1.3676

% Improvement Required 6.46 19.09 - 8.78 29.68 5.28 26.88

Table 19: Case Study - 100 Generation - -Indicator Comparison

Pareto Front A 300 Ind. 200 Ind. 300 Ind. 100 Ind. 200 Ind. 100 Ind.

Pareto Front B 200 Ind. 300 Ind. 100 Ind. 300 Ind. 100 Ind. 200 Ind.

 - indicator 1.8125 1.0126 1.4501 1.1076 1.1940 1.2499

% Improvement Required 44.83 1.24 31.04 9.71 16.25 19.99

It must be noted that this problem is stochastic, in that the optimal solution is unknown and every trial begins from a randomized subset of the total solution space. Due to this inherent variance, some trials of the same number of individuals and same number of generations were run to analyze what differences in final Pareto fronts would be. These Pareto fronts are shown in Figure 27 for 200 individual by 50 generations ran through five trials. The variation of each trial is shown by the epsilon indicator, which was used to analyze all the possible comparisons of the five fronts (Table 20). From these values an average unilateral improvement of 18% is required.

78

$5,000,000,000 $4,500,000,000 $4,000,000,000 $3,500,000,000 Trial 1 Trial 2

Trial 3 Trial 4

Life Cycle Cost ($)

$3,000,000,000 $2,500,000,000 $2,000,000,000 $1,500,000,000 $1,000,000,000

Trial 5

$500,000,000
$0 0.00%

20.00%

40.00% 60.00% Demand Satisfied (%)

80.00%

100.00%

Figure 27: Case Study - 50 Generations x 200 Individuals - 5 Runs Table 20: Case Study - -Indicator Comparison - 50 Generations x 200 Individuals - 5 Trials

Trial 1 Trial 2 Trial 3 Trial 4 Trial 5

Trial 1 1 0.98685 1.0177 1.0713 0.95700

Trial 2 1.6427 1 1.0313 1.1302 1.0596

Trial 3 2.1934 1.3353 1 1.1558 1.0596

Trial 4 2.0884 1.2713 0.96906 1 1

Trial 5 2.5513 1.5531 1.1773 1.2740 1

4.4.2

Optimal Front System Layouts

To further illustrate the outcomes of the optimization two points (system solutions) are analyzed for the lowest life cycle cost of two opposite values of percent demand satisfied. Both trial runs with the 200 individuals were able to find solutions that satisfied the entire demand and therefore the lower costing alternative will be reviewed. The lowest value for percent demand satisfied in the Pareto-optimal fronts analyzed in Figures 23 and 25 was 15.06% from the trial run of 100 individuals through 50 generations. The full chromosomes of these individuals are shown below in Table 21. In the table, both individuals total chromosome is shown, as well as its

79

segments for each WRRF it has designed treatment for, and the selected end users to supply reclaimed water for segment. For the WRRF segments the first is for treatment at the Calumet location; WRRF 2 is the TT for at the Lemont location; WRRF 3 is the TT for at the North Side location. For the lowest percent demand satisfied its branched distribution networks are shown in Figures 28, 29, and 30; they are each supplied from the following WRRFs Calumet, Lemont, and North Side respectively. For the highest percent demand satisfied its branched distribution networks are shown in Figures 31, 32, 33, and 34. Here Figures 31 and 32 show the branched distribution system for the Calumet WRRF for clarity, 33 the Lemont WRRF, and 34 the North Side WRRF.
Table 21: Lowest & Highest Percent Demand Satisfied - Individual Chromosome Analysis

Individual
Lowest % Demand WRRF 1 WRRF 2 WRRF 3 End Users Highest % Demand WRRF 1 WRRF 2 WRRF 3 End Users

Chromosome
2 32 29 33 42 0 0 0 0 0 0 0 0 0 0 0 0 0 0 12 32 29 33 42 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 5 24 39 25 27 29 43 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 1 3 0 0 0 0 0 0 0 0 0 0 2 0 1 0 00 2 32 29 33 42 0 0 0 0 0 0 0 0 0 0 0 0 0 0 12 32 29 33 42 0 0 0 0 0 0 0 0 0 0 0 0 0 0 3 5 24 39 25 27 29 43 0 0 0 0 0 0 0 0 0 0 0 0000000000002130000000000201000 11 24 26 35 36 40 42 0 0 0 0 0 0 0 0 0 0 0 0 13 3 6 26 35 31 29 42 0 0 0 0 0 0 0 0 0 0 0 11 24 26 35 36 40 42 0 0 0 0 0 0 0 0 0 0 0 0 3 3 1 1 1 1 2 1 1 2 2 2 1 3 3 1 1 3 1 3 1 1 2 1 113112 11 24 26 35 36 40 42 0 0 0 0 0 0 0 0 0 0 0 0 13 3 6 26 35 31 29 42 0 0 0 0 0 0 0 0 0 0 0 11 24 26 35 36 40 42 0 0 0 0 0 0 0 0 0 0 0 0 331111211222133113131121113112

80

Figure 28: Case Study - Low Demand Satisfied - Calumet Distribution Network

81

Figure 29: Case Study - Low Demand Satisfied - Lemont Distribution Network

82

Figure 30: Case Study - Low Demand Satisfied - North Side Distribution Network

83

Figure 31: Case Study - High Demand Satisfied - Calumet Distribution Network Part 1

84

Figure 32: Case Study - High Demand Satisfied - Calumet Distribution Network Part 2

85

Figure 33: Case Study - High Demand Satisfied - Lemont Distribution Network

86

Figure 34: Case Study - High Demand Satisfied - North Side Distribution Network

87

The three distribution systems making up the low demand satisfied system are a lot simpler than the complex branched networks making up the high demand satisfied systems. The ability of WTRNetDSS Online to adequately place the dummy nodes, the location of a split or branch in the system (explained in Section 3.3 - Distribution System) is shown here to work well even on the complex network building scenarios shown by the high demand satisfied - Calumet system. The only notable error in the placement of the dummy nodes is where there is a potential for the route that is following a major route's off ramp, this can cause the dummy node to be placed where the two pipes split off, not at the actual intersection. However, the true location of any valves or crosses in a system would have to be modified to what available area would be near an intersection, so this issue is not critical. The other component of each individual's chromosome is the WRRFs segment and in Table 22 the index coded 'genes' are compared to the UP's identities (with the zero space holders removed).
Table 22: Case Study - WRRF Chromosome Unit Processes % Demand WRRF Calumet Chromosome 2 32 29 33 42 UP IDs Grit Chamber  PAC  Nano Filtration  Ion Exchange  Chlorine Dioxide Low Loaded Activated Sludge w/o Denitrification + Secondary Sedimentation  PAC  Nano Filtration  Ion Exchange  Chlorine Dioxide Coarse Screen  Sedimentation w/o Coagulation  PPrecipitation  Flocculation  Filtration Over Fine Porously Media  Micro Filtration  Nano Filtration  Chlorine Gas High Load Activated Sludge + Secondary Sedimentation  PPrecipitation  Surface Filtration  Advanced Oxidation UV/H2O2  SAT  Ozone  Chlorine Dioxide Low Loaded Activated Sludge w/ Denitrification + Secondary Sedimentation  Coarse Screen  Sedimentation w/ Coagulation  Surface Filtration Advanced Oxidation UV/H2O2  GAC  Nano Filtration  Ozone High Load Activated Sludge + Secondary Sedimentation  PPrecipitation  Surface Filtration  Advanced Oxidation UV/H2O2  SAT  Ozone  Chlorine Dioxide

Low

Lemont

12 32 29 33 42

North Side

3 5 24 39 25 27 29 43

Calumet

11 24 26 35 36 40 42

High

Lemont

13 3 6 26 35 31 29 40

North Side

11 24 26 35 36 40 42

88

For both of the above analyzed TT layout segments, of the high and low percent demand satisfied individual's chromosomes, WTRNetDSS Online's algorithm was placing them under the same constraints. All of the TTs were required to treat enough water to the supply the volumes required for the golf courses, while treating it to the aforementioned US EPA standards for urban water reuse; the required level for golf course irrigation. One notable aspect of the Ups selected for each of the TTs is the variation in the first UP selected, as well only two of the TTs have what would be considered preliminary treatment (low percent demand satisfied ­ Calumet and North Side). However, it should be noted that while all the WRRFs in both scenarios are treating raw sewage, due to Table 7: Influent Water Quality & Starting Unit Processes, the other UPs fall within the list of acceptable starting UPs for raw sewage treatment. These allowances for starting UPs could be modified by adjusting the list of starting processes allowed for each level of influent quality.

4.5 Conclusion
In this Chapter, the developed methodology for the optimization of large scale, multiple WRRF, water reuse systems was demonstrated on a case study to determine if it successfully accomplished the research objectives of being able to optimize such systems. The analysis was carried out on the potential systems using reclaimed water for the irrigation of golf courses in the Chicago area. This area was chosen to be analyzed due to Chicago's growing need for large scale changes in its water management practices (Meng, 2005). For this case study, WTRNetDSS Online has shown its ability to handle the large amount of location based data and deliver feasible and expected outcomes. WTRNetDSS Online used two optimization objectives; percent demand satisfied and life cycle cost, to demonstrate its proper implementation of the NSGA-II algorithm by showing the ranking outcomes within a generation (Figure 21), and through the correct advancement of the Pareto-optimal front over successive generations (Figure 22). The aforementioned figures also show that WTRNetDSS Online is able to meet the research objectives it was created to fulfill; that is that WTRNetDSS is able to find sets of optimal solutions to large scale water reuse systems that have multiple WRRFs being taken into consideration, one of the major upgrades from the original WTRNet. Furthermore, within the optimal set of solutions to the Chicago case study the individuals (unique system solutions) can be further analyzed into their components; WRRFs, and 89

distribution systems. The analysis of the distribution systems (Figures 28-34) shows WTRNetDSS Online's ability to generate branched distribution networks that not only follow the road networks, but have key locations (branches) located. The further analysis of the WRRFs designed showed WTRNetDSS Online's ability to generate random TTs following the rules set out by the TT combination rule matrix (Figure 10), although future modifications to this matrix may be a chosen form of adjustment to the methodology to constrain the possibilities.

90

Chapter 5 ­ Summary and Conclusions
When planning any large project, especially one as complex as a water reuse system there are many concerns that need to be addressed. Proper care must be taken to ensure that all of the project goals are met and these goals can range from the implementation of water treatment process that incorporate the right technology, to the various costs associated with the construction, maintenance, energy and staffing of the UPs, and even other social factors such as odour control and public acceptance. Through a thorough review of all of the components of a water reuse system; wastewater treatment, distribution systems, piping, pumping, storage, legislation, and public acceptance, and the review of DSS components; knowledge management subsystem, model management subsystem, data management subsystem, user interface, and optimization, WTRNetDSS Online is able to account for the vast majority of the important complexities associated with large scale water reuses systems. WTRNetDSS Online fulfills all of the goals that it was designed to accomplish. WTRNetDSS Online is able to be accessed by a global audience by being accessible through its location on the internet. This accessibility paired with the Bing Maps API allows for distribution systems following road networks to be constructed by the user in over 90% of European, North American, and Asian Pacific countries, as well as, major cities in Africa, Central America, and South America and major road networks in their rural areas (Microsoft, 2011). WTRNetDSS Online's ability to be ran on the internet is a major completion of some of the research objectives that were to upgrade the outdated code underlying WTRNet and to allow for easier user access. This move online accomplishes both of these goals, as well as making it easier for future upgrades. Upgrades to a the web-based application will automatically upgrade the user's experience instead of having to rely upon the user to download and install a new program package. Beyond WTRNetDSS Online's accessibility and through its use of NSGA-II and its genetic operators; selection, crossover, and mutation, WTRNetDSS Online transforms an initial population of randomly generated TTs and selected users into an optimal set of individual plant specific TTs and selected users to receive water from either a WRRF or not supplied with water.

91

The analysis of WTRNetDSS Online's handling of a large multiple treatment location case study of the Chicago area alternative irrigation for golf courses, presented in Chapter 4, was largely a success. The results of the program showed solutions being properly allocated to their appropriate Pareto-optimal fronts and the analysis of these optimal solutions were realistic results. To further hone the results of the Chicago case study, one could modify WTRNetDSS Online's handling of the costs, by creating local construction and material costs for each of the WRRFs, instead of making the costs associated with the entire Chicago area. This may improve the optimization results, if it were found that the costs associated with developing water reuse systems varied highly at any of the WRRF locations used. While WTRNetDSS Online successfully completes these tasks it was developed for, there is additional work that could be completed in the future. This additional work would include mainly further debugging of the code, specifically in areas relating to the Bing Maps API - 'Routing Service' which on occasion returns null values and thus limiting the size of systems that can be analyzed, enhanced error messaging to the user, additional GUI controls so that the user can set more variables instead of using hardcoded default values. To increase the number of individuals or run a higher number of generations, a thorough inspection of the code and optimization where possible may allow for these values to be increased. In terms of usability, thorough inspection and potential updating of all the values in the knowledge base would create better estimates of effluent qualities, and costs. Additionally, variations on total system designs could be considered such as reclaimed water blending between WRRFs in multiple WRRF systems. Currently, WTRNetDSS Online's main applications would be for users that are interested in the planning phase of local water system enhancements. As a DSS, the tool will allow the user (engineers) to analyze the required distribution system infrastructure and WRRF plant upgrades that would be required. WTRNetDSS Online would allow for them to quickly compare many design alternatives and aid in the user's selection of designs to create preliminary plans of. Through this use, WTRNetDSS Online hopes to increase public awareness of the great opportunity that water reuse could offer their communities and to aid them in evaluating feasible solutions.

92

Appendix A - WTRNetDSS Online Input Parameters
Table 23: Case Study - Chicago Golf Course Locations Sunset Valley Golf Course Glencoe Golf Club Winnetka Golf Club Peter Jans Weber Park Golf course Robert A. Black Golf Course Sidney Marovitz - Waveland Anets Burger Brothers Golf Sportsmans Country Club Willow Hill Wilmette Golf Course Glenview Park Golf Course Indian Boundary Golf Course Billy Caldwell Edgebrook Chick Evans Bryn Mawr Country Club Arlington Lakes Golf Buffalo Grove Golf Course Bartlett Hills Mt. Prospect Golf Club Old Orchard Country Club Rob Roy Highland Woods Fox Run Golf Links Rolling Knolls Country Club Villa Olivia Streamwood Oaks Golf Club Hilldale Poplar Creek Country Club 1390 Sunset Road 621 Westly Road 1300 Oak Street 1031 Central Street 9300 Weber Park Place 2045 W. Pratt 3600 N. LakeShore Drive 180 North Anets Dr. 3535 Dundee Road 1350 Willow Road 3900 Fairway Drive 800 Shermer Road 8600 West Forest Preserve Drive 6200 Caldwell Ave 6100 North Central Ave 6145 N. Golf Road 6600 North Crawford Avenue 1211 S New Wilkie Rd 48 Raupp Blvd. 800 W Oneida Ave 600 South See Gwun 700 West Rand Road 505 East Camp McDonald Road 2775 N. Ela Road 333 Plum Grove Road 11N260 Rohrssen Road 1401 West Lake St 565 Madison Drive 1625 Ardwick Drive 1400 Poplar Creek Drive Highland Park Glencoe Winnetka Evanston Skokie Chicago Chicago Northbrook Northbrook Northbrook Wilmette Glenview Chicago Chicago Edgebrook Morton Grove Linolnwood Arlington Heights Buffalo Grove Bartlett Mt Prospect Mt Prospect Prospect Heights Hoffman Estates Elk Grove Village Elgin Bartlett Streamwood Hoffman Estates Hoffman Estates

93

Appendix B - WTRNetDSS Online Output Values
Table 24: Pareto-Optimal Front Example - Full Details Individual Index Rank Demand Satisfied 0 1 87.10% 1 1 77.42% 2 1 74.19% 3 1 73.12% 4 1 69.89% 5 1 65.59% 6 1 48.39% 7 1 47.31% 8 1 45.17% 9 1 41.93% 10 1 33.33% 11 1 25.81% 12 1 24.73% 13 1 13.98% 14 1 9.68% 15 1 5.38% 16 2 79.57% 17 2 76.34% 18 2 73.12% 19 2 67.74% 20 2 65.59% 21 2 47.31% 22 2 45.17% 23 2 41.93% 24 2 25.81% 25 2 24.73% 26 2 13.98% 27 2 9.68% 28 2 6.46% 29 2 5.38% 30 3 75.27% 31 3 74.19% 32 3 73.12% 33 3 72.04% Life Cycle Cost ($) $4,153,933,800 $3,640,168,350 $3,581,016,750 $3,291,800,850 $2,879,628,300 $2,832,255,450 $2,760,766,200 $2,598,195,150 $2,306,649,150 $1,756,150,200 $1,627,673,400 $1,621,421,550 $1,128,611,880 $817,944,885 $591,042,015 $335,346,885 $4,540,133,700 $3,722,094,450 $3,291,825,150 $3,086,117,550 $2,832,348,600 $2,617,284,150 $2,309,365,350 $1,759,301,100 $1,621,429,650 $1,128,613,905 $992,116,350 $950,939,595 $875,294,235 $338,121,945 $4,505,275,350 $3,920,894,100 $3,553,933,050 $3,534,788,700

94

34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74

3 3 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6

69.89% 67.74% 65.59% 47.31% 41.93% 37.63% 30.11% 23.66% 19.36% 11.83% 10.76% 6.46% 73.12% 72.04% 70.97% 66.67% 65.59% 41.93% 37.63% 25.81% 24.73% 22.58% 19.36% 11.83% 65.59% 40.87% 33.33% 24.73% 19.36% 18.28% 10.76% 72.04% 65.59% 63.44% 48.39% 45.17% 40.87% 37.63% 33.33% 24.73% 18.28%

$3,360,343,050 $3,087,331,200 $2,833,350,300 $2,781,639,900 $2,224,767,600 $2,164,617,000 $1,804,474,800 $1,629,290,700 $1,237,794,480 $1,178,094,510 $1,141,425,675 $875,344,455 $4,062,987,000 $3,586,626,000 $3,534,788,700 $3,325,892,400 $2,833,355,700 $2,530,803,150 $2,166,062,850 $2,017,264,500 $1,996,786,350 $1,752,687,450 $1,286,436,735 $1,178,780,040 $2,836,139,400 $2,548,590,750 $2,478,528,450 $1,997,593,650 $1,508,072,850 $1,507,851,450 $1,217,942,460 $3,711,293,100 $3,295,705,050 $2,961,770,400 $2,955,771,000 $2,934,673,200 $2,759,363,550 $2,662,105,500 $2,482,874,100 $1,997,603,100 $1,517,119,200

95

75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99

7 7 7 7 7 7 7 7 7 7 7 7 7 8 8 8 8 8 8 8 8 8 8 9 9

67.74% 65.59% 62.37% 59.14% 56.99% 52.69% 49.47% 47.31% 45.17% 37.63% 33.33% 19.37% 18.28% 67.74% 64.51% 62.37% 58.07% 54.84% 52.69% 49.47% 47.31% 45.17% 19.37% 49.47% 49.47%

$4,083,052,050 $3,354,848,550 $3,317,491,350 $3,192,299,100 $3,090,999,150 $3,078,349,650 $3,053,431,350 $3,041,452,800 $2,934,682,650 $2,664,941,850 $2,662,105,500 $2,354,109,750 $1,517,193,450 $4,083,073,650 $3,507,649,650 $3,319,304,400 $3,232,337,400 $3,168,499,950 $3,078,365,850 $3,053,434,050 $3,044,547,000 $2,937,643,200 $2,355,789,150 $3,053,431,350 $3,053,438,100

96

Table 25: Case Study - Lemont Node Details ID 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 Name Lemont Sunset Valley Golf Course Glencoe Golf Club Winnetka Golf Club Peter Jans Weber Park Golf course Robert A. Black Golf Course Sidney Marovitz - Waveland Anets Burger Brothers Golf Sportsmans Country Club Willow Hill Wilmette Golf Course Glenview Park Golf Course Indian Boundary Golf Course Billy Caldwell Edgebrook Chick Evans X -87.9996 -87.8087 -87.7786 -87.798 -87.7517 -87.6872 -87.9021 -87.7505 -87.7646 -87.6815 -87.6443 -87.6422 -87.8233 -87.8293 -87.8668 -87.8672 -87.8136 -87.8638 -87.7724 -87.8657 -87.8184 -87.8406 -87.8439 -87.8693 -87.7595 -87.7877 -88.1958 -87.7805 -88.0068 -87.7991 -87.7289 -87.7513 -88.004 -88.0532 -87.9677 -88.0308 -88.1946 -88.0232 -87.9493 Y 41.6771 42.17739 42.14509 42.15252 42.10479 42.0649 41.7605 42.04828 42.03869 42.00514 41.94905 41.84708 42.11876 42.10561 42.13831 42.10573 42.10554 42.10575 42.08048 42.03108 42.06978 42.03998 41.93812 41.97286 41.99388 41.98238 41.82467 42.03816 41.71693 42.04085 42.00098 41.98744 42.06264 41.80749 42.15287 42.03059 41.99394 41.98548 42.05533 Type 101 110 110 111 110 110 111 110 111 110 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 110 111 111 110 111 110 111 110 111 110 111 110

Bryn Mawr Country Club Arlington Lakes Golf Buffalo Grove Golf Course Bartlett Hills Mt. Prospect Golf Club

97

40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58

Old Orchard Country Club Rob Roy Highland Woods Fox Run Golf Links Rolling Knolls Country Club Villa Olivia Streamwood Oaks Golf Club Hilldale Poplar Creek Country Club

-87.8675 -87.9454 -88.0052 -87.9239 -87.8684 -88.1018 -88.0136 -88.0604 -88.0352 -88.2312 -88.1173 -88.2201 -88.1659 -88.1974 -88.1983 -88.1192 -88.0295 -88.1374 -88.1203

41.98999 42.08815 42.10712 42.09519 42.03906 42.15789 42.15057 42.02045 41.98883 42.0355 41.99674 42.01214 41.99519 42.02458 42.01878 42.06054 42.03661 42.05091 42.05381

111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111

98

Table 26: Case Study - North Side Node Details ID 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 Name North Side Sunset Valley Golf Course Glencoe Golf Club Winnetka Golf Club Peter Jans Weber Park Golf course Robert A. Black Golf Course Sidney Marovitz - Waveland Anets Burger Brothers Golf Sportsmans Country Club Willow Hill Wilmette Golf Course Glenview Park Golf Course Indian Boundary Golf Course Billy Caldwell Edgebrook Chick Evans Bryn Mawr Country Club Arlington Lakes Golf Buffalo Grove Golf Course Bartlett Hills Mt. Prospect Golf Club X -87.7165 -87.8087 -87.7786 -87.7869 -87.7517 -87.6872 -87.7165 -87.7505 -87.7477 -87.6815 -87.6443 -87.6802 -87.8233 -87.7676 -87.8668 -87.7881 -87.8136 -87.7878 -87.7724 -87.7585 -87.8184 -87.7603 -87.8439 -87.7595 -87.7513 -88.1958 -87.8366 -87.7805 -87.747 -87.7289 -87.7285 -88.004 -87.855 -87.9677 -87.8018 -88.1946 -87.9788 -87.9493 -87.938 Y 42.01911 42.17739 42.14509 42.13629 42.10479 42.0649 42.01907 42.04828 42.01902 42.00514 41.94905 42.00521 42.11876 42.10142 42.13831 42.13791 42.10554 42.10526 42.08048 42.07951 42.06978 42.05536 41.93812 41.99388 41.99035 41.82467 41.9845 42.03816 42.0418 42.00098 42.01899 42.06264 41.98475 42.15287 42.15256 41.99394 42.03843 42.05533 42.01803 Type 101 110 110 111 110 110 111 110 111 110 110 111 110 111 110 111 110 111 110 111 110 111 110 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111

99

40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57

Old Orchard Country Club Rob Roy Highland Woods Fox Run Golf Links Rolling Knolls Country Club Villa Olivia Streamwood Oaks Golf Club Hilldale Poplar Creek Country Club

-87.9454 -87.8118 -87.9239 -87.8382 -88.1018 -87.9668 -88.0604 -88.0307 -88.2312 -88.0287 -88.2201 -88.193 -88.1974 -88.2024 -88.1192 -88.0795 -88.1374 -88.1446

42.08815 42.05518 42.09519 42.05461 42.15789 42.15198 42.02045 42.04292 42.0355 42.05773 42.01214 42.06666 42.02458 42.02946 42.06054 42.06395 42.05091 42.06058

110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111 110 111

100

Figure 35: Case Study -101 Lemont Route Details

Figure 36: Case Study -102 North Side Route Details

Table 27: 50 Generations x 100 Individuals - Generation 1 Full Report Rank %DemSat Life Cycle Cost 1 87.10% $4,153,933,800 1 77.42% $3,640,168,350 1 74.19% $3,581,016,750 1 73.12% $3,291,800,850 1 69.89% $2,879,628,300 1 65.59% $2,832,255,450 1 48.39% $2,760,766,200 1 47.31% $2,598,195,150 1 45.17% $2,306,649,150 1 41.93% $1,756,150,200 1 33.33% $1,627,673,400 1 25.81% $1,621,421,550 1 24.73% $1,128,611,880 1 13.98% $817,944,885 1 9.68% $591,042,015 1 5.38% $335,346,885 2 79.57% $4,540,133,700 2 76.34% $3,722,094,450 2 73.12% $3,291,825,150 2 67.74% $3,086,117,550 2 65.59% $2,832,348,600 2 47.31% $2,617,284,150 2 45.17% $2,309,365,350 2 41.93% $1,759,301,100 2 25.81% $1,621,429,650 2 24.73% $1,128,613,905 2 13.98% $992,116,350 2 9.68% $950,939,595 2 6.46% $875,294,235 2 5.38% $338,121,945 3 75.27% $4,505,275,350 3 74.19% $3,920,894,100 3 73.12% $3,553,933,050 3 72.04% $3,534,788,700 3 69.89% $3,360,343,050 3 67.74% $3,087,331,200 3 65.59% $2,833,350,300 3 47.31% $2,781,639,900 3 41.93% $2,224,767,600

103

3 3 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 4 4 5 5 5 5 5 5 5 6 6 6 6 6 6 6 6 6 6 7 7 7 7 7

37.63% 30.11% 23.66% 19.36% 11.83% 10.76% 6.46% 73.12% 72.04% 70.97% 66.67% 65.59% 41.93% 37.63% 25.81% 24.73% 22.58% 19.36% 11.83% 65.59% 40.87% 33.33% 24.73% 19.36% 18.28% 10.76% 72.04% 65.59% 63.44% 48.39% 45.17% 40.87% 37.63% 33.33% 24.73% 18.28% 67.74% 65.59% 62.37% 59.14% 56.99%

$2,164,617,000 $1,804,474,800 $1,629,290,700 $1,237,794,480 $1,178,094,510 $1,141,425,675 $875,344,455 $4,062,987,000 $3,586,626,000 $3,534,788,700 $3,325,892,400 $2,833,355,700 $2,530,803,150 $2,166,062,850 $2,017,264,500 $1,996,786,350 $1,752,687,450 $1,286,436,735 $1,178,780,040 $2,836,139,400 $2,548,590,750 $2,478,528,450 $1,997,593,650 $1,508,072,850 $1,507,851,450 $1,217,942,460 $3,711,293,100 $3,295,705,050 $2,961,770,400 $2,955,771,000 $2,934,673,200 $2,759,363,550 $2,662,105,500 $2,482,874,100 $1,997,603,100 $1,517,119,200 $4,083,052,050 $3,354,848,550 $3,317,491,350 $3,192,299,100 $3,090,999,150

104

7 7 7 7 7 7 7 7 8 8 8 8 8 8 8 8 8 8 9 9

52.69% 49.47% 47.31% 45.17% 37.63% 33.33% 19.37% 18.28% 67.74% 64.51% 62.37% 58.07% 54.84% 52.69% 49.47% 47.31% 45.17% 19.37% 49.47% 49.47%

$3,078,349,650 $3,053,431,350 $3,041,452,800 $2,934,682,650 $2,664,941,850 $2,662,105,500 $2,354,109,750 $1,517,193,450 $4,083,073,650 $3,507,649,650 $3,319,304,400 $3,232,337,400 $3,168,499,950 $3,078,365,850 $3,053,434,050 $3,044,547,000 $2,937,643,200 $2,355,789,150 $3,053,431,350 $3,053,438,100

105

Bibliography
Adewumi, J. R., Ilembade, A. A. & van Zyl, J. E., 2010. Decision Support for the Planning of Integrated Wastewater Reuse Projects in South Africa, s.l.: IWA. Anderson, P. R. & Meng, Y., 2011. Assessing Opportunities for Municipal Wastewater Reuse in the Metropolitan Chicago Area, Chicago: Illinois Institute of Technology. ArcGIS, E., 2012. Esri ArcGIS Online. [Online] Available at: http://resources.arcgis.com/en/help/silverlight-api/apiref/api_start.htm [Accessed 14 November 2012]. Asano, T. et al., 2007. Water Reuse Issues, Technologies, and Applications. New York: McGraw Hill. Canada, H., 2006. Legislation and Guidelines. [Online] Available at: http://www.hc-sc.gc.ca/ahc-asc/legislation/index-eng.php [Accessed 29 06 2013]. Chen, J. & Beck, M. B., 1997. Towards Designing Sustainable Urban Wastewater Infrastructures: A Screening Analysis, Great Britain: Elsevier Science Ltd.. Chow, J. Y. & Regan, A. C., 2013. A surrogate-based multiobjective metaheuristic and network degradation simulation model for robust toll pricing, New York: Springer US. Clara, M. et al., 2005. Removal of Selected Pharmaceuticals, Fragrances, and Endocrine Disrupting Compounds in a Membrane Bioreactor and Conventional Wastewater Treatment Plants, Vienna, Austria: Water Research. Cook County Illinois Golf Courses, n.d. Cook County Illinois Golf Courses. [Online] Available at: http://www.golfable.com/golfcourses/county/Cook_County_IL [Accessed 20 February 2013]. Copeland, A., Cole, K., Barrows, R. & Pyne, J., 2007. The Design of State-of-the-art Treatment Technology: MBR Wastewater Treatment Systems, Virginia: AWWA. 106

Cornwell, D. A., Davis, M. & Davis, M. L., 2008. Introduction to Environmental Engineering. New York, NY: McGraw-Hill. Courtney, J. F., 2001. Decision Making and Knowledge Management in Inquiring Organizations; Towards a New Decision-Making Paradigm for DSS, Orlando, Florida: Esevier. Davis, M. L. & Cornwell, D. A., 2012. Introduction to Environmental Engineering - Fifth Edition. New York: McGraw Hill. Deb, K., Pratap, A., Agarwal, S. & Meyarivan, T., 2002. A Fast and Elitist Multiobjective Genetic Algorithm: NSGA - II, s.l.: IEEE Transactions on Evolutionary Algorithms. Dupont, D., 2011. Reclaimed Wastewater: Household Views and Acceptabilitiy of Alternative End Uses. [Online] Available at: http://www.cawq.ca/en/docs/central_symp/046/abstracts.pdf [Accessed 7 March 2011]. Eom, S., Lee, S., Kim, E. & Somarajan, C., 1998. A Survery of Decision Suport System Applications (1988-1994). [Online] Available at: http://www.jstor.org/pss/3009977 [Accessed 28 April 2011]. Garrido, M. et al., 2010. Development of a DSS for the Generation of WWTP Configuration Alternatives, s.l.: International Congress on Environmental Modeling and Software. Gehr, R., Wagner, M., Veerasubramanian, P. & Payment, P., 2003. Disinfection Efficiency of Peracetic Acid, UV and Ozone After Enhanced Primary Treatment of Municpal Wastewater, Montreal: Water Research Voume 37. Gorry, A. & Morton, S., 1971. Operations Research and Management Science, Cambridge, Massachusetts: s.n. Grayman, W. M. & Kirmeyer, G. J., 2000. Quality of Water in Storage. In: Water Distribution Systems Handbook. New York, NY: McGraw-Hill.

107

Hamouda, M. A., Anderson, W. B. & Huck, P. M., 2009. Decision Support Systems in Water and Wastewater Treatment Process Selection and Design: A Review, s.l.: Water Science & Technology (IWA). Health Canada , 2010. Candian Guidelines for Domestic Reclaimed Water for Use in Toilet and Urinal Flushing, Ottawa: s.n. Iba, H. & Noman, N., 2012. New Frontier in Evolutionary Algorithms. London: Imperial College Press. Joksimovic, D., 2006. Decision Support Systems for Planning of Integrated Water Reuse Projects, s.l.: University of Exeter. Kroeber, D. W. & Watson, H. J., 1986. Computer-Based Information Systems: A Management Approach 2nd Ed.. New York: MacMillian Pub. Lazarova, V. et al., 1998. Advanced Wastewater Disinfection Technologies: Short and Long Term Efficiency, Great Britain: Elsevier Science Ltd. Lejano, R. P., 2006. Optimizing the Layout and Design of Branched Pipeline Water Distribution Systems, Irvine, California: Spring. Mays, L. W., 1999. Water Distribution Systems Handbook. New York: McGraw-Hill. McKenzie, C., 2004. Wastewater Reuse Conserves Water and Protects Waterways. [Online] Available at: http://www.nesc.wvu.edu/ndwc/articles/OT/WI05/reuse.pdf [Accessed 8 March 2011]. Meng, Y., 2005. Assessing Opportunities for Municipal Wastewater Reuse in the Metropolitan Chicago Area, Denver, Colorado: 20th Annual WateRuse Symposium. Metropolitan Water Reclamation District of Greater Chicago, 2012. MWRD - R & D Overview. [Online] Available at: http://www.mwrd.org/irj/servlet/prt/portal/prtroot/pcd!3aportal_content!2fMWRD!2fMWRDInte rnet!2fRoles!2fReports!2fTechnical!2fEffluent_Disinfection_Task_Force_Results!2fEffluent_Di 108

sinfection_Task_Force_Results [Accessed 27 July 2013]. Michalewicz, Z., 1999. Genetic Algorithms + Data Structures = Evolution Programs. New York: Springer. Microsoft, 2010. Migration & Support Strategy for Visual Basic 6. [Online] Available at: http://msdn.microsoft.com/en-us/vstudio/ee413549 [Accessed 25 August 2013]. Microsoft, 2011. Bing Maps Geographic Coverage. [Online] Available at: http://www.microsoft.com/maps/product/coverage.aspx [Accessed 22 February 2013]. Microsoft, 2011. Silverlight Compatibility. [Online] Available at: http://www.microsoft.com/getsilverlight/Get-Started/Install/Default.aspx [Accessed 1 November 2012]. Miller, W. G., 2006. Integrated Concepts in Water Reuse: Managing Global Water Needs. Desalination, 187(1-3), pp. 65-75. Miller, W. G., 2008. Public Acceptance: The Greatest Barrier to Widespread Water Reuse, Alexandria, VA: WateReuse Association. Okun, D. A., 1996. A History of Nonpotable Water Reuse Through Dual Distribution Systems, Chapel Hill, NC: s.n. Po, M., Kaercher, J. D. & Nancarrow, B. E., 2003. Literature Review of Factors Influencing Public Perceptions of Water Reuse. [Online] Available at: http://www.clw.csiro.au/publications/technical2003/tr54-03.pdf [Accessed 9 March 2011]. Princeton University, n.d. Earth Radius. [Online] Available at: https://www.princeton.edu/~achaney/tmve/wiki100k/docs/Earth_radius.html [Accessed 5 March 2013].

109

Roseth, N., 2008. Community Views on Recycled Water - the Impact of Information, Salisbury, Australia: Cooperation Research Centre for Water Quality and Treatment. Tchohanoglous, G., Burton, F. L. & Stensel, D., 2003. Wastewater Engineering: Treatment, Disposal, Reuse. New York: McGraw-Hill. Turban, E. & Aronson, J. E., 1998. Decision Support Systems and Intelligent Systems, Fifth Ed.. Upper Saddle River, New Jersey: Prentice-Hall Inc.. US EPA, September 2004. Guidelines for Water Reuse, Washington: s.n. Vigneswaran, S. & Sundaravadivel, M., 2004. Recycle and Reuse of Domestic Wastewater. In: Wastewater Recycle, Reuse, and Reclamation. Oxford: Encyclopedia of Life Support Systems. World Health Organization, 2009. Fact File - Water Scarcity. [Online] Available at: http://www.who.int/features/factfiles/water/water_facts/en/index1.html [Accessed 8 May 2011]. Ysusi, M. A., 2000. System Design: An Overview - Water Distribution Systems Handbook. New York, NY: McGraw-Hill. Zhang, C. J., 2004. A Study on Urban Water Reuse Management Modeling, Waterloo, Ontario, Canada: University of Waterloo.

110

