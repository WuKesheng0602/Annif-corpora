ENERGY EFFICIENT QPP-MAC PROTOCOL WITH DYNAMIC CYCLE LENGTH FOR SMART BUILDING WIRELESS SENSOR NETWORKS

by

Sajjadul Latif BSc, North South University, Dhaka, Bangladesh, 2010

A Master's Thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the Program of Electrical and Computer Engineering

Toronto, Ontario, Canada, 2014 Sajjadul Latif 2014

©

I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research. I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my thesis may be made electronically available to the public.

ii

Energy Efficient QPP-MAC Protocol with Dynamic Cycle Length for Smart Building Wireless Sensor Networks Master of Applied Science 2014 Sajjadul Latif Electrical and Computer Engineering Ryerson University

Abstract
The wireless sensor network is an important element of energy efficient `Smart Buildings' to collect different types of data and to optimize the energy demand management (EDM) system. It is very important to save energy of the wireless sensor network to prolong the network life-time. In this thesis, a distributed, quasi-planned Medium Access Control (MAC) scheduling algorithm with priority control has been proposed for smart building's WSN. The protocol reduces the wasted energy of sensors during idle listening, collision, and overhearing processes. The system considers multiple classes of sensors based on their roles. The protocol establishes confirmed communication for steady traffic and gives adaptive control for varying traffic load. Hence, it reduces the total energy requirement for each sensor class. It uses a novel statistically inspired algorithm to dynamically configure the cycle length for reducing latency. Overall, the new algorithm shows better energy performance than many conventional WSN MAC protocols.

iii

Acknowledgements
This research project would not have been possible without the guidance of Professor Xavier Fernando. Prof. Fernando was always willing to encourage and engage in constructive discussions that contributed solely to the completeness of this thesis. His sharp critique and careful revisions of my work reflected in elegant and successful research achievements. Warm thanks to my colleagues at the Ryerson Communication Lab (RCL) for their support. Special thanks to the Ryerson University, Center for Urban Energy (CUE), Toronto Hydro-Electric System Limited (THESL), Mitacs and Toronto Regional Conservation Authority (TRCA) for funding this research work.

iv

Dedication

This Master's Thesis is dedicated to my family

v

Table of Contents
Abstract . . . . . . Acknowledgements Dedication . . . . . Table of Contents . List of Figures . . . List of Acronyms . List of Symbols . . List of Appendices . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii iv v vi viii x xii xiii 1 2 3 5 6 6 7 9 10 13 14 15 15 16 17 18 18

1 Introduction 1.1 Net-Zero Smart Building . . . . . . . 1.2 Wireless Sensor Network . . . . . . . 1.3 Sources of Energy Wastage in WSN . 1.4 The Medium Access Control Protocol 1.5 Problem Statement . . . . . . . . . . 1.6 Thesis Organization . . . . . . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

2 Background and Previous Research Works 2.1 Medium Access Control . . . . . . . . . . . 2.2 Synchronous MAC Protocols . . . . . . . . . 2.3 Asynchronous MAC Protocols . . . . . . . . 2.4 Energy Saving MAC Protocols . . . . . . . . 2.4.1 Sensor MAC (S-MAC) Protocol . . . 2.4.2 T-MAC Protocol . . . . . . . . . . . 2.4.3 Quorum MAC (Q-MAC) Protocol . . 2.4.4 Dynamic MAC (D-MAC) Protocol . 2.4.5 B-MAC Protocol . . . . . . . . . . . vi

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

. . . . . . . . .

2.4.6 2.4.7 2.4.8

X-MAC Protocol . . . . . . . . . . . . . . . . . . . . . . . . . . . Wise-MAC Protocol . . . . . . . . . . . . . . . . . . . . . . . . . Pattern MAC (P-MAC) Protocol . . . . . . . . . . . . . . . . . .

19 20 20 22 22 24 26 26 28 29 35 36 41 46 50 51 52 54 56 61 65 67 68 69 69 71 73

3 Preliminaries 3.1 Sensor Class . . . . . 3.2 Network Distribution 3.3 Time division . . . . 3.4 Synchronization . . . 4 Protocol Design 4.1 Planned distribution 4.2 Sensor Classification 4.3 Planned scheduling . 4.4 Dynamic cycle length 4.5 Energy Analysis . . .

. . . . . - Corona . . . . . . . . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . . . . . . . . . . . . . selection . . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

. . . . .

5 Simulation Results 5.1 Sensor Wake-up Ratio . . . . . . . . . . . . . . . 5.2 Sensor Classes . . . . . . . . . . . . . . . . . . . . 5.3 Scheduling and Energy Performance . . . . . . . . 5.4 Performance of Dynamic Cycle Length Operation 6 Practical Application in the Smart Buildings 7 Conclusions and Future Work Appendices A Simulation Parameters

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

B Algorithms B.1 QPP-MAC Algorithm . . . . . . . . . . . . . . . . . . . . . . . . . . . . B.2 IEEE 802.15.4 MAC Layer Setup . . . . . . . . . . . . . . . . . . . . . . References

vii

List of Figures
1.1 1.2 Energy efficient smart building at TRCA facility. . . . . . . . . . . . . . One of the Data logging and control interfaces of the smart building at TRCA facility. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Functions of Medium Access Control. . . . . . . . . . . . . . . . . Classification of Time Division Multiple Access. . . . . . . . . . . Types of MAC protocols for wireless sensor network. . . . . . . . Periodic wake up in S-MAC protocol. . . . . . . . . . . . . . . . . Scheduling in T-MAC protocol. . . . . . . . . . . . . . . . . . . . Scheduling technique in Q-MAC protocol. . . . . . . . . . . . . . X-MAC protocol's data sending technique. . . . . . . . . . . . . . Sensor nodes' sleep/wake-up scenario due to P-MAC protocol [1]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3 4 11 11 13 15 16 17 19 21 25 26 29 31 32 39 39 41

2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 3.1 3.2 4.1 4.2 4.3 4.4 4.5 4.6 4.7

Corona distribution of different classes of sensors. . . . . . . . . . . . . . Time division for each corona level. . . . . . . . . . . . . . . . . . . . . . Hop count technique in planned distribution. . . . . . . . . . . . . . . . . Planned distribution according to grid. . . . . . . . . . . . . . . . . . . . Next hop group selection process. . . . . . . . . . . . . . . . . . . . . . . Planned scheduling using patterns. . . . . . . . . . . . . . . . . . . . . . Planned scheduling combined with planned distribution in the proposed QPP-MAC algorithm. . . . . . . . . . . . . . . . . . . . . . . . . . . . . Probability density of empty time-frames in the proposed QPP network before the dynamic cycle length selection. . . . . . . . . . . . . . . . . . Dynamic cycle length selection process. Top: Regular time cycle with fixed length. Middle: Empty time-frame selection. Bottom: Time cycle after dynamic cycle operation. . . . . . . . . . . . . . . . . . . . . . . . .

42

viii

4.8 5.1 5.2 5.3 5.4 5.5 5.6 5.7 5.8 5.9

Energy saving in different level of the protocol. . . . . . . . . . . . . . . . Wake up ratio of a sensor irrespective of its class. . . . . . . . . . . . . . Average activity levels of each sensor class. . . . . . . . . . . . . . . . . . Energy usage comparison between different classes of sensors. . . . . . . . Awake duration of a node. . . . . . . . . . . . . . . . . . . . . . . . . . . Energy performance of each corona according to the new protocol. . . . . Probability distribution of traffic load before dynamic cycle length operation for sensors with fixed x . . . . . . . . . . . . . . . . . . . . . . . . . . . . Number of unused time-frames in a duty cycle. . . . . . . . . . . . . . . . Probability distribution of traffic load with varying x . . . . . . . . . . . The cycle length comparison between Q-MAC and QPP-MAC. A smaller cycle length will result in a quick cycle refresh rate. . . . . . . . . . . . . Communication network design of a smart building automation system. . Classification of sensor nodes in smart building. . . . . . . . . . . . . . .

48 51 52 53 54 55 56 57 58 59 62 63

6.1 6.2

ix

List of Acronyms
ACK AP CCA CDMA CSMA/CA CTS CUE D-MAC DAQ EDM FDMA GHG HVAC ICT MAC NZ OSI P-MAC PV PETF PRTF Q-MAC QoS RCL RFID Acknowledgement packet. Access point. Clear channel assessment. Code division multiple access. Carrier sense multiple access with collision avoidance. Clear to send. Center for urban energy. Dynamic medium access control. Data acquisition. Energy demand management. Frequency division multiple access. Green house gas. Heat, ventilation, and air conditioning. Information and communication technology. Medium access control. Net-Zero. Open systems interconnection. Pattern medium access control. Photo-Voltaic. Pattern exchange time frame. Pattern repeat time frame. Quorum medium access control. Quality of service. Ryerson communication lab. Radio frequency identification.

x

RTS S-MAC SDMA STA T-MAC TDMA THESL TRCA WSN

Request to send. Sensor medium access control. Space division multiple access. Station (sensor node). Time medium access control. Time division multiple access. Toronto hydro-electric system limited. Toronto regional conservation authority. Wireless sensor network.

xi

List of Symbols
x µ  2 ARi Ci Cy Cydyn Cytotal Cyutil d E (0) Esave m n NET INIT nh Pi Pidle u Pv,n +1 R TA TCi tR priority constant. mean of probability density distribution of traffic load. standard deviation of probability density distribution of traffic load. variance of traffic load distribution. active ratio of a sensor node. area of corona `i' (m2 ). time cycle length (seconds). dynamic cycle length of a corona. total cycle length of a corona. utilized cycle length of a corona. duty cycle. average sleep due to pattern generation. energy saving during a duty cycle. number of `zero' bits in a pattern denoting sleep mode. number of nodes. network initialize hop count packet. next hop group. probability of finding a sensor node awake. idle power consumption by the sensor node. generated pattern for node `u' to send `v ' during `(n + 1)th ' time-frame. range of a sensor node. threshold time before the sensors go to sleep. traffic load of corona `i'. time-frame duration.

xii

List of Appendices
Appendix A Appendix B.1 Appendix B.2 List of all the simulation parameters used to validate the algorithm. The complete algorithm of the MAC protocol. Shows IEEE 802.15.4 MAC layer setup process.

xiii

Chapter 1 Introduction
Energy consumption is receiving growing global attention today due to numerous reasons including, observed deficiency of conventional resources such as fossil fuels, and increasing greenhouse gas (GHG) emission causing global warming. The problem of energy consumption is a long term concern and is not presumed to disappear by itself unless steps are taken across various fields. The residential housing sector presents a great potential to reduce the impact of the anthropogenic climate effect in the climate. The energy consumption of buildings (both residential and commercial) accounts for more than 40% of total energy consumption and about 25% GHG emissions in the world [2]. Improving energy efficiency of these structures is the least expensive way to cope with energy demand of the planet [3]. The developments of the thermal insulation and the heating system as well as the use of renewable energy are certain measures to fulfill the sophisticated demands of sustainable buildings. Net Zero energy (NZe) or Near Zero energy or Net Positive energy are initiatives that have been started around the world to address this challenge. A NZe `Smart Building ' is an establishment that consumes less

1

than or equal to the energy it produces on site [4]. In general, the energy production from decentralized renewable energy sources is not in balance with the energy requirements in these buildings. An energy demand management can help in this regard.

1.1

Net-Zero Smart Building

A Net-Zero smart building is required to be at the peak of energy efficiency and conservation. This kind of building can have multiple renewable or non-renewable energy sources connected to satisfy the demand of electricity. In this research, an Archetype sustainable energy building is studied to better realize the requirements and obstacles to achieve NZe status. This building is located at Toronto Regional Conservation Authority (TRCA), Vaughan, ON, Canada. Figure 1.1 illustrates a view of the TRCA smart building. This structure uses three different renewable energy sources along with conventional power grid connectivity. The solar photo-voltaic (PV) cell, wind turbine generator and geothermal energy generator are the renewable energy sources used in this building. There is a dual-fuel switching system in place to switch between different sources. There are hundreds of temperature, air-flow, pressure, occupancy, energy, security, and control sensors connected all over the building to gather data. The information retrieved from these sensors is analyzed to understand the energy consumption trends of the environment. Then, many control and optimization algorithms are used to reduce the total energy consumption of each equipment and appliance in the building. This entire system model is called `Energy Demand Management ' (EDM) system. The EDM system requires all the energy consuming devices to be connected to a centralized control and data acquisition (DAQ) point [5]. This is where the wireless sensor network (WSN) provides full support [6].

2

Figure 1.1: Energy efficient smart building at TRCA facility.

1.2

Wireless Sensor Network

The use of wireless sensor networks are increasing at the core of facilities management for smart buildings. Applications, such as energy monitoring and security, have become mainstream technologies. However, as the buildings are becoming progressively embedded with sensor networks, the challenge of managing and maintaining the sensors themselves also becoming ever more significant. The sensor networks have their own challenges in terms of power management, and limited processing capability. This limits the resources accessible for operations, and maintenance. A well connected smart building needs about 600-700 DAQ and control sensors within about 150 m range. Figure 1.2 shows one of the many intermediate control and data logging unit at TRCA. All

3

of the units connect hundreds of wired sensors together. Managing such a constantly changing wired network is a big challenge. Thus, all the sensors need to be connected to the central controller in a wireless manner. Wirelessly connected sensing and controlling nodes give lots of flexibility and ease of manageability. These wireless sensors also need typically 150 mW - 600 mW energy in a multi-hop network, depending on the number of nodes and the distance among them [7]. Since the NZe smart buildings are supposed to minimize the energy consumption in all possible ways, power reduction in the wireless sensor network (WSN) is also very important. Low power consuming WSN will also prolong the battery life, reduce maintenance cost, and increase the networks reliability by minimizing number of dead nodes. An aspect of operational expense is the ease of diagnosing, repairing and scheduling maintenance on the WSN. This must also take into account that unlike a typical communications network, a WSN is used for facilities management, and is part of a broader

Figure 1.2: One of the Data logging and control interfaces of the smart building at TRCA facility.

4

business management policy meant to decrease operational expenses for an industry that is most likely not involved in the ICT sector [8]. This has severe implications for both the numbers of specialized technical staff available and the rationale to invest in such staff. Thus, an energy efficient sensor network with longevity and energy efficiency is critical.

1.3

Sources of Energy Wastage in WSN

There are many different source of energy wastage in a WSN for smart buildings. Idle listening, collision, overhearing and overhead due to control packets are few major sources of energy loss in a WSN [9]. The `idle-listening' period occurs when a node actively listens for possible data reception, but there are no packets intended for that node. Typically most of the nodes in a WSN would be listening idly even if there is no activity in the network. Previous researches show that usually the idle:receive:send power ratios are 1:1.05:1.4 [10]. During idle-listening, nodes may consume up to 95% of the energy required for actually receiving a packet. During `collisions' in the network, data packets would get discarded and require re-transmission, resulting wastage of energy. `Overhearing' happens when a node picks up packets intended for other nodes. This issue wastes as much energy as receiving a packet [9]. Transmitting and receiving control packets also require a substantial amount of energy. In a data centric WSN with a central sink node, the energy depletion rate for the sensors closer to sink is much higher than sensors far away from the center. This phenomenon is known as the `energy-hole' issue [11], [12], [13]. Reducing all these energy wastage is essential for achieving a high energy efficient WSN system.

5

1.4

The Medium Access Control Protocol

Communication system can be arranged into multiple layers called OSI layer [14]. One of the lower level layer is the data link layer (OSI layer 2), which accommodates communication at the link level. Part of the duty of the data link layer is to decide which node may access the medium at a certain time. This task is known as medium access control (MAC). It is very significant in a shared medium. Since many nodes are communicating simultaneously, they may interfere each other's communication. An arrangement is required for MAC, because there are multiple nodes in the system. This arrangement should be maintained by all sensors in the network. This arrangement is commonly known as a MAC protocol. The MAC protocol consists of complex negotiations and provisions. The protocol manages the state of the sensor node (i.e. sending, receiving, or sleeping). A MAC protocol for wireless sensor networks should focus on energy usage, and ensure that sensor nodes are in sleep mode if not in use.

1.5

Problem Statement

There have been many recent developments in smart building automation systems. However, most of these works did not clearly focus on the energy requirements of the communication network itself. Many researchers worked to make the WSN energy efficient in various scenarios. But, only few of those researches were related to smart building environment. Since, the MAC protocol can manage the scheduling and data transmission needs of a sensor network very efficiently, developing an energy efficient MAC protocol is the key objective of this research.

6

In this research, a distributed, quasi-planned scheduling algorithm called `QPP-MAC ' protocol has been proposed. The QPP-MAC algorithm has been developed from the concept network of TRCA smart building. It has a `many-to-one' network architecture with one central network manager or sink. The nodes are not mobile, and are geographically distributed in a random manner with uniform mean density. The MAC protocol is developed to deal with both steady and variable traffic loads depending on the sensor's assigned role. The protocol has a traffic distribution system for periodic and steady load. Also, there is an adaptive and event based algorithm to handle variable traffic load. The new QPP-MAC protocol shows better energy performance than many conventional WSN MAC protocols.

1.6

Thesis Organization

The rest of this thesis is organized as follows. Previous research works and their scopes are discussed in chapter two. The basic types of MAC layer protocols are compared. The quorum and pattern MAC protocols that are specifically designed for wireless sensor network's energy saving are explained briefly. In chapter three, the preliminaries, environmental limitations, assumptions and network architecture is described. This chapter gives an idea of why some of the changes are made to the algorithm, along with the scope of work. The initial WSN architecture is discussed. The sensor classification and comparison are shown. The chapter four describes the detail design of the proposed MAC protocol called QPP-MAC for smart building's wireless sensor networks. The chapter also derives the dynamic cycle length operation used in the algorithm. The reason behind its implemen-

7

tation and practical use are also explained. The energy performance of the protocol is discussed in chapter five. The overall energy saving by the algorithm is derived and explained with equations. The relevancy of this protocol for the TRCA smart building is described in chapter six. This chapter gives an idea on how the algorithm is evolved to address the needs of the structure. The practical application of the protocol are shown with examples. The numerical simulation results are presented and compared with other protocols in chapter seven. The comparison of energy performance between different MAC protocols are shown. The active ratio and energy usage by the different classes of sensors are also illustrated. Then it shows the performance of the novel dynamic cycle length operation. The conclusion and plans for future work are drawn in Chapter eight. Appendix A lists all the simulation parameters used in this thesis. Appendix B.1 shows the complete algorithm using pseudocode for quick understanding. Appendix B.2 shows the MAC layer setup function in MATLAB. This function does all the operations of the sensor MAC protocol. It takes as input the number of phases, listening time, and inter-arrival time of the packets and produces as output all the statistics needed to plot the results.

8

Chapter 2 Background and Previous Research Works
In short range and low-rate wireless networks, energy saving has been one of the hottest issues. The low-rate networks, like the one used in the smart buildings, mainly focus on monitoring and control applications. These nodes are mostly expected to work on batteries. In a smart building environment, the users want to use their devices as long as possible without the need for maintenances. However, the development on battery and energy storage devices has been pretty slow compared to the advancements in networking technology. In the small sensing devices, the types used in smart building sensing applications, recharging or replacing the battery is extremely difficult. In addition, the cost and form factor of small devices make it difficult to adopt a larger capacity battery. A typical IEEE 802.15.4 wireless sensor drains 17.4 mA when it is in transmission mode [15]. The idle power consumption is surprisingly much higher at 19.7 mA. This power consumption is due to channel sampling for possible reception. Thus, a wireless sensor with two AA

9

batteries of 1600 mAh can only work for 3.4 days without even considering other modules and operations [16]. If a device is deployed in a large structure or embedded in to a large structure (i.e. smart building), the life span can be a deciding factor on the usability of the sensor. There have been many work on energy harvesting, use of low power circuitry, and controlling transmission power. However, none of these techniques are easy to implement. A cost effective and innovative approach is using Medium Access Control (MAC) to reduce energy consumption [15]. MAC have been considered as one of the most essential elements for energy saving in sensor networks. Consequently, the network can continue running for a longer period of time without any need for maintenance.

2.1

Medium Access Control

MAC is located as a sub-layer in the second layer (i.e. data link layer) of the open system interconnection (OSI) model. The data link layer defines functions to reliably exchange data between two nodes. Strictly, MAC defines methods to coordinate access order among network nodes. In practice, however, the term MAC is frequently used as representing name of the second layer. The functions of MAC more or less affect the energy consumption of a network node. These functions can be divided in to three parts as shown in Figure 2.1. The link control is the function of error control, flow control, modulation control, code control, and radio power control. The access control is the fundamental of individual access. This can be classified into TDMA, FDMA, CDMA, and SDMA [15]. Time division multiple access (TDMA) protocols divide the time axis and determine accessing order of the sensors by scheduling. Therefore, whole frequency band is used by one node at a time. The frequency division multiple access

10

Figure 2.1: Functions of Medium Access Control. (FDMA) divides the frequency into number of sub-channels and allows individual access by assigning sub-channels. Code division multiple access (CDMA) spreads the signals over the frequency bandwidth and assigns different codes for channel access. The last but not the least, space division multiple access (SDMA) protocol utilizes spatial signal differences from multiple antenna. TDMA is simple and easy to modify for specific needs. The other techniques are very complex and require complex hardware or signal processing. The TDMA can be classified into two categories as shown in Figure 2.2. The controlled access usually pre-negotiate the transmission time between sensor nodes. Thus, a centralized controller or sink node in the network coordinates the access. Time-frame allocation is guaranteed for this type. A fixed time duration is announced by the central controller, and exclusive access for only one node is agreed in the network. In this protocol, regular nodes are called station (STA), and the controller is called access point (AP). The protocol is free from collision because of the nature of control. This technique is

Figure 2.2: Classification of Time Division Multiple Access.

11

an excellent choice when the application requires low latency and low packet error rate. On the other hand, random access protocols allow fully distributed operation. A node estimates network and channel condition to determine the access time. Various protocols such as ALOHA, CSMA/CA are examples of this method [17]. These are widely used, and use request to send (RTS) and clear to send (CTS) for data transmission. The selection of proper access depends on the required performance of applications. Performance measures such as throughput, packet error rate, latency, and energy consumption affect each other. Specially, energy consumption in low rate applications has a trade-off relation with latency. Therefore, a certain level of latency bound is necessary while selecting energy consumption methods. The power management function of MAC layer is designed to minimize energy consumption of activities for transmission and reception in a sensor [15]. Typically this function is tightly associated with the access control function. It is obvious, energy consumption cannot be controlled without knowing the energy wastage sources. Collision, idle listening, overhearing, and control packet overhead are among the top energy wasting sources. The collision can be somewhat reduced or prevented by introducing controlled access. However, idle listening still accounts for 90% of the total awake time for sensors. During idle listening a node consumes almost same energy as receiving a packet. MAC layer protocol can be modified to reduce this idle listening. MAC can be designed for two different types of networks as shown in Figure 2.3. An energy-aware MAC protocol for wireless sensor networks should maximize the probability of successful transmission of packets in the network by using the least required energy in the nodes for data transfer. Hence, the overall lifetime of the nodes and the network can be maximized.

12

Figure 2.3: Types of MAC protocols for wireless sensor network.

2.2

Synchronous MAC Protocols

A synchronous MAC protocol enables communications among energy saving nodes by globally synchronizing all active durations of the network nodes. In protocols like this, both the transmitter and receiver synchronize their clocks, and then assign a specific time duration between them for data transfer. The synchronization process can be relatively simple or overly complex depending on the application. In a single hop network, all the sensor nodes can hear the broadcast from the network controller and adjust their timers. The transmission happens only during assigned times. The sensor nodes can go to sleep mode to save energy during other time-frames. In a multi-hop network, the synchronization method is bit complex. In the initialization stage of a network, all devices are in active mode. A device having the smallest value for synchronization broadcasts its own schedule periodically in a sync frame. This divides time lines into periodic block consisting active and inactive durations. A device that has received a sync packet follows the schedule in the received packet. Different synchronous protocols have been developed by several authors to effectively reduce the `idle-listening' problem in [18], [19], and [20]. These techniques reduce the energy usage by scaling down total network awake time. However, they suffer greatly from high latency and bulky synchronization overhead.

13

2.3

Asynchronous MAC Protocols

Asynchronous MAC protocols do not use any previously agreed schedules. In a single hop network, the node simply announces to the network controller that it is either in sleeping mode or data transfer mode. In a sleeping mode, the sensor will just turn off the radio and minimal energy will be used. During a data transfer mode, the sensor can transmit or receive data [15]. The central controller normally buffers any frame intended for the node and transmits when the node wakes up. In a multi-hop network, however, the process is bit different. The concept of protocol design is based on the fact that number of transmission is very small compared to number of periodic wake up. Also, the synchronization overhead consumes lots of energy and increases complexity. In these type of protocols, the node wakes up periodically and checks if there is any activity on the channel. If there is no activity, it goes back to sleep mode. In case the device has to transmit something, it uses long preamble to identify the receiver and the hops in between. In a variant of this protocol, receiver transmits the preambles instead of transmitter. The transmitter just wakes up and sense the channel. If a free channel is found, it uses RTS and CTS to transmit data. Many asynchronous protocols have been suggested by researchers in order to reduce the overhead in [21], [22], [23], and [24]. These protocols save energy by using preambles to detect the channel occupancy independently by the sensor nodes. However, the use of preambles in these protocols generally introduces longer latency. They also have limited capabilities in case of variable traffic loads.

14

2.4

Energy Saving MAC Protocols

Both the synchronous and asynchronous protocols have their advantages and disadvantages. Many researchers found ways to improve the energy saving of a sensor node by just tweaking some features of these techniques. Some well-known research works are discussed below.

2.4.1

Sensor MAC (S-MAC) Protocol

One of the very basic cluster-based synchronous energy saving protocol is the sensor MAC (S-MAC) protocol [9]. It avoids idle listening by periodically sending sensor nodes to sleep if they are not involved in any type of communication as shown in Figure 2.4. The protocol defines each node to wake up at the beginning of each time frame to check if it needs to remain active. In S-MAC protocol, nodes exchange synchronization and schedule information with their immediate neighbors at the beginning of each listen period. This ensures that two neighboring nodes would listen and go to sleep at the same time. A

Figure 2.4: Periodic wake up in S-MAC protocol. 15

node that receives two different schedules follows both. In such a case, this node belongs to two different virtual clusters. The authors also introduced adaptive listening to reduce latency. If a clear to send (CTS) is overheard, sensor nodes can briefly wake up at the end of the transmission to possibly act as the next hop. By keeping the duty cycle low, S-MAC reduces each sensor nodes power consumption. However, S-MAC still has some flaws. Its low duty cycle may result in long latency. The protocol also fails to adapt to a varying traffic. Since each node has a different traffic load, the schedule may not be optimal for all nodes.

2.4.2

T-MAC Protocol

In order to improve the above protocol further, the T-MAC algorithm is introduced in [18]. The protocol is an extension of S-MAC and adopts an adaptive duty cycle. A sensor node in listen mode will not go to sleep until there is no activity for a certain threshold time TA as shown in Figure 2.5. This protocol uses the same synchronization method as S-MAC. A power-down strategy such as this may produce the early-sleeping problem, where potential receivers go to sleep too early. This limits the number of hops a

Figure 2.5: Scheduling in T-MAC protocol.

16

message can travel in a time frame. Although T-MAC finds a way to determine a nodes active duration, it still suffers from long transmission latency.

2.4.3

Quorum MAC (Q-MAC) Protocol

A Quorum based MAC (Q-MAC) algorithm is a superior scheduling protocol, which uses frame based time division using a grid-quorum approach as shown in Figure 2.6. In this protocol, the sensor nodes are assigned a row and a column of a grid quorum. These row and columns are the time-frames during which the sensors can transfer data. The nodes can only transmit to other nodes when the designated row or column of two different nodes intersect. The sensors can sleep during the other time-frames to conserve energy. The details of the grid quorum are described in [25]. It uses a centralized multi-hop network for protocol design. The protocol divides the network into multiple coronas based on hop count. There is also a latency reduction technique introduced. Here, the nodes may choose multiple neighboring nodes for data transfer. All the nodes that are in transmission range of a certain sensor node are group together and called next hope

Figure 2.6: Scheduling technique in Q-MAC protocol.

17

group. The sensor node will send the information to any node form this group that comes faster in duty cycle. The protocol performs very effectively in steady and periodic traffic. However, there is no control to better handle varying traffic load in the Q-MAC protocol.

2.4.4

Dynamic MAC (D-MAC) Protocol

D-MAC is another protocol that uses an adaptive duty cycle [19]. By staggering active times along the data-gathering tree, D-MAC reduces the transmission latency in a `many-to-one' communication model. D-MAC achieves better performance in transmission latency, throughput, and energy conservation when compared with S-MAC. However, similar to S-MAC and T-MAC, D-MAC still has to wake up all the sensor nodes at every cycle. This is not energy efficient since light-loaded nodes may remain idle in most cycles.

2.4.5

B-MAC Protocol

B-MAC is an asynchronous mechanism that uses lower power listening and a long preamble to achieve low-power operation [13]. To reliably transmit data, a sender sends a preamble that is long enough to notify the receiver. The broadcasted preamble is typically longer than one wake-up interval, and the data transmission follows. To receive data, nodes periodically wake up and check whether there is on-going preamble or not. For example, if the receiver checks the channel every 20 ms, the preamble must be at least 20 ms long. Once the preamble is recognized, the receiver will stay awake to receive the packet. This ensures minimum periodic active duration and life-time of the nodes maximized in case of low traffic load. However, preambles wakes up all the neighbors though they are not the intended destinations. Compared with synchronous solutions,

18

the extended preamble in B-MAC produces excess energy consumption. Aside from this, after detecting a preamble, significant energy waste is also found in nontarget nodes since they have to stay awake until the end of the preamble to check if they are the ones being targeted. The long preamble also generates long delays.

2.4.6

X-MAC Protocol

X-MAC is an improvement over B-MAC [21]. The long preamble in B-MAC is replaced by a series of short preamble packets in X-MAC, which are separated by small pauses as shown in Figure 2.7. The pauses enable the target receiver to end the preamble earlier by sending an early ACK. Each short preamble contains a target address, which alleviates the energy-wastage problem of no target nodes. However, the time duration to detect short control packet is longer than that of preambles. Although short preamble packets reduce delay and energy wastage when compared with B-MAC, they may still consume more energy when compared with synchronous protocols since more preamble packets are sent.

Figure 2.7: X-MAC protocol's data sending technique.

19

2.4.7

Wise-MAC Protocol

Wise-MAC uses techniques similar to B-MAC [23]. In Wise-MAC, a receiver notifies its neighbors of the time of its next awake period through an extra field in the acknowledgment (ACK) packet. With this information, a sender can start the preamble just before the receiver wakes up. This reduces the energy consumed when sending long preambles at the expense of a field in each ACK packet and memory space to record neighbors schedules. A flaw of Wise-MAC is that it fails to adapt to changing traffic conditions.

2.4.8

Pattern MAC (P-MAC) Protocol

The P-MAC is an adaptive pattern based scheduling scheme, in which each sensor node individually determines its sleep/awake pattern according to its own traffic condition [1]. A sensor node with more data will generate a pattern with more awake periods. This pattern indicates the nodes intention, i.e., whether it will sleep or not at each time slot. The actual sleep and awake schedule for each sensor node is developed based on its own pattern and those of its neighbors. Figure 2.8 illustrates the sleep/wale-up schedule of sensor nodes due to pattern. P-MAC introduces a way to adaptively construct schedules based on the traffic conditions of the sensor nodes. The sink also can control the scheduling by using a control signal to make the sensors more or less active, thus controlling the energy efficiency. The downside of this protocol is that its functionality relies on pattern exchanges of the sensor nodes. Two sensor nodes may not be able to meet if they do not correctly receive the others schedule. This produces idle listening and wasted transmissions. P-MAC may also suffer from long transmission latency. Note that all the above mentioned protocols consider a single type of sensor. In

20

Figure 2.8: Sensor nodes' sleep/wake-up scenario due to P-MAC protocol [1]. practice, sensor nodes with varying attributes may be required in a wireless network. Their scheduling requirements and capabilities can be different. Therefore, there is a need to develop a protocol that can address all the above mentioned issues considering multiple sensor types. All the above algorithms try to reduce the energy consumption by WSN. However, a good algorithm requires to be optimized to suit a particular environment and the traffic pattern. Hence, the requirement for a MAC protocol specifically designed for the unique smart building environment.

21

Chapter 3 Preliminaries

3.1

Sensor Class

The MAC protocol is designed based on the requirement of the TRCA smart building. This archetype structure has four different energy sources and a single energy demand management (EDM) system. The system is centralized, and all the sensor nodes report to the EDM central controller. There are hundreds of temperature, humidity, air-flow, occupancy, light, energy, and security sensors installed. All these different types of sensors have varying data rate and importance. For example, there are many long term periodic data collection sensors (i.e. temperature sensors). These sensors only record data periodically and send them to central sink. These sensors are also unidirectional (i.e. sends data to one way) and never receive anything other than control signal. The other type of sensors are a little bit more active than these. They record short-term periodic information that changes quickly over time (i.e. light or energy usage). They are also unidirectional and have different energy demand than the temperature sensors.

22

Finally, there are the control sensors which produces bi-directional bursty data traffic. These sensors will require to transmit on demand and will be communicating to the central controller very frequently. The MAC protocol in this research is developed based on different traffic demands of multi-class sensors. Each sensor node has a unique ID or address. Three classes of sensors are considered depending on the traffic load, number of nodes, and traffic types. The classification is as follows Class A: These are the sensors that do not follow any specific pattern. The sensor nodes are mostly event driven, bi-directional, and may produce bursty traffic. The quantity of these sensors are very low in the network, but they are highly active. The control and security sensors are members of this class. Class B: These are data acquisition (DAQ) sensors that record short term data [5]. They wake-up less frequently than the above ones. However, they will still be following a steady traffic pattern in a single direction. There will be more class B sensors in the network than class A. Different types of energy data recording sensors belong to this class. Class C: These are the unidirectional data acquisition sensors collecting long term periodic data. They need to wake-up only few times over a long duration. These are the highest in number, but the lowest in transmission activity. The majority sensors in the network is considered to be class C sensors. Most of the periodic sensors like temperature, humidity, and air-flow sensors populate this class. These classifications are needed to control the sensors dynamically. For example, class A sensors are typically control nodes with on demand traffic. These sensors will 23

need rapid data transfer without delay, i.e. high quality of service (QoS) is needed [26]. On the other hand, the class C sensors are mostly DAQ sensors such as temperature or humidity sensors in a WSN. As these information are not changing rapidly, data transfer rate need not to be much. If the energy efficiency is controlled by clusters for different sensor types rather than globally in one setting, more energy can be saved and higher network efficiency can be achieved.

3.2

Network Distribution - Corona

The network is divided into multiple clusters called corona. The coronas are circular area centered at central sink node as shown in Figure 3.1. The corona distribution is based on the sensors range. All the sensor nodes have the same transmission range `R' meters. The area of a corona is denoted by Ci where `i' stands for corona number. The area of the corona can be calculated using the range. The area of the first corona centered at sink will be R2 . Thus, the area of corona 2 can be calculated as

C2 =  (2R)2 - C1 = 4R2 - R2 = 3R2 . (3.1)

Subsequently, the area of corona 3 and 4 will be 5R2 and 7R2 . The network model considered to develop the protocol is based on the protocol derived in [25]. There is a centralized uniformly (random) distributed network. The network nodes in our system

24

Figure 3.1: Corona distribution of different classes of sensors. model model are mostly stationary and the mobility is not considered. The communication network has a network manager or sink node. All the nodes report data to the common sink. Typically all other nodes send information to this sink and receive control data from the sink. Therefore, the network design has `many-to-one' communication architecture as show in Figure 3.1. The entire network is subsequently distributed in multiple coronas based on the hop count. If a node is 4 hops away from the sink, it is considered to be a member of 4th corona. Each corona has a circular area as derived in [25]. The area depends on the range of a sensor node. The quantity of node increases uniformly towards the outer coronas.

25

Figure 3.2: Time division for each corona level.

3.3

Time division

The system model follows time division multiple access (TDMA) technique for scheduling [15]. It is assumed that time is divided into a series of time-frames for each corona as shown in Figure 3.2. The first frame is typically used for synchronization purpose. The rest of the time-frames are distributed among the sensor nodes. The sensors follow controlled access method. Hence, sensor nodes will only wake up during their allotted time-frames. The sensors can only communicate to the sensors of the adjacent corona. Two sensors of a same corona may never have an intersecting time-frame.

3.4

Synchronization

The synchronization method is relatively simple and is described in S-MAC [9]. In the initialization stage of a network, all devices are in active mode. A device having the smallest value for synchronization broadcasts its own schedule periodically in a sync frame, also shown in Figure 3.2. This divides time lines into periodic block consisting active and inactive durations. A device that has received a sync frame sets the timer using the information of the sync. Only large time scales (in order of hundred milliseconds) are 26

involved in this time division. Hence, the system can perform very well even with slight deviation in the time-frames. This synchronization technique is very simple and will not create much control overhead. The following chapter discusses the details of the protocol design and it's performance in a wireless sensor network.

27

Chapter 4 Protocol Design
The protocol design follows a four step model; planned distribution, sensor classification, planned scheduling, and the dynamic cycle length operation. Planned distribution is nothing but the Q-MAC protocol with a latency reduction technique [25]. This ensures the control of sleep/wake-up schedules of the sensor nodes as described in section 4.1. The sensors are classified into multiple classes based on their attributes and data flow. All the sensors are assigned a priority constant value for adaptive control. The sensor classification method is described in section 4.2. Then the planned scheduling technique is applied on top of this distribution. The combination of these two algorithms create optimal sleep/wake-up plan with confirmed data transmission. More of this modified version of P-MAC technique is discussed in section 4.3 [1]. Moreover, the latency introduced by synchronous scheduling is reduced in third step using dynamic cycle length selection. The novel technique as described in section 4.4 uses statistical analysis to select optimal cycle length.

28

4.1

Planned distribution

The network nodes in the proposed system model have `many-to-one' communication architecture. In such a model, the nodes that are close to the sink deplete energy faster to accommodate the heavy flow of traffic, whereas the nodes far from the network manager barely use their energy. This issue is known as the energy-hole problem [27]. In order to solve this problem, a planned node distribution scheme is used in the MAC Layer. The entire network is distributed into multiple coronas. The area of a corona Ci depends on the range of the sensors. Let's consider, the range of a sensor is R. Then, the area of first hop corona will become R2 . At the beginning of the network initialization, the system initiates a `NET INIT' packet. This packet is basically a counter and sent from the sink node to find the lowest number of hops to reach a certain node. The sensors will send back the counter value to sink along with the node ID after a cycle is completed. Hence, the sink node will be able to estimate the total number of coronas present in the network and the estimated distance to reach any sensor node in number of hops. Figure 4.1 illustrates the hop count process. The sink will broadcast this message to all the nodes. Therefore, all the sensor nodes have an idea about their possible locations. Later, the sensors will also be able to

Figure 4.1: Hop count technique in planned distribution.

29

choose the next of hop neighbors. A small change in the new protocol from Q-MAC is that a sensor will designate all next-hop nodes towards data transfer direction as nexthop neighbors. This helps to reduce latency by allowing less transmission delay for the sensors. If area Ci has a total `n' nodes, the system will use `n × n' grid quorum. Which depicts, the sensor nodes will have n2 time-frames. According to Q-MAC protocol, each node will wake up at least `2n - 1' time-frames [25]. The rest of the time-frames can be used for energy saving (i.e. sleeping). Figure 2.6 shows the basic quorum based time distribution. Here, the host A and B are only able to communicate during 2nd and 6th time-frames. Therefore, the rest of the time-frames can be used for energy saving. As there are lower number of nodes but higher number of traffic in lower level coronas, the sensor nodes can use smaller grids than upper levels. Since the traffic load of the sensors choose the grid size, the fixed sleep/wake-up frequency problem is resolved. The relationship between the traffic inter-arrival time and the grid size can be found in [25]. It is assuming that full load from all the nodes are applied. This means if a sensor node have a wake up time-frame assigned, it will use it to either transmit or receive data. The time cycle Cy is distributed among the nodes based on the grid quorum system as described in [25]. Therefore, `n' nodes will have n2 time-frames from `n × n' grid. However, only `n' time-frames will be used by the sensor nodes for traffic generated by same corona nodes. The rest of the (n2 - n) time-frames may be used by other purposes such as forwarding traffic or sleep. This grid based scheduling technique is shown in Figure 4.2. The example has 5 sensor nodes (i.e. STA). Five nodes create a grid of 52 time-frames. Each of these node uses one time-frame for transferring own traffic, and rest of the time-frames are used for forwarding traffic or sleep. The empty frames results in 30

Figure 4.2: Planned distribution according to grid. energy saving of the network, whereas the FW time-frames keep the traffic load flowing. The traffic loads can be calculated for a node in Ci

TCi = 1 +

Ci+1 TCi+1 (frames). Ci

(4.1)

Each node of an outer level corona is assigned the time-frames such a way that it can communicate to multiple nodes of inner corona during awake times. This ensures less delay for the sink to get data. Each node can only connect to certain nodes and these nodes are collectively known as next hop group (nh ) for that particular node. The group is created with the sensors within the transmission range of the data sending node towards the sink. The Figure 4.3 shows the next hop group creation process. In the figure, STA1, STA2, and STA3 are members of inner corona and rest of them are members of outer corona. STA1 is selecting the next hop group for sending data to outer corona. `R' is the range of STA1 and shows the next hop area. It can be observed that only STA7, STA8, STA9, STA10, and STA14 are in the 1 hop zone from STA1. Thus, STA1 selects all these sensors as the next hop group members. During data transmission, STA1 will

31

Figure 4.3: Next hop group selection process. look for one of these sensors to forward the data traffic. Algorithm 1 shows the planned distribution method used in this protocol. The nodes in a lower level corona have higher traffic loads than outer level coronas. This is because, lower level nodes from Ci-1 have to transmit both own traffic and the incoming traffic from upper level Ci . Which in turn, increases the network awake time for lower level nodes. If a time-frame duration is tR , the receive, transmit and total active duration can be calculated as follows

Total active duration = Receive duration + Transmit duration = TCi+1 tR + TCi tR (seconds) = tR (TCi+1 + TCi ) (seconds). (4.2)

Thus, active ratio for Ci becomes

32

Algorithm 1 Planned Distribution Begin Process: Network Initialization Assign NodeID to all nodes Initiate packet NET IN IT Broadcast NET INIT packet to all nodes Receive Hopcount + NodeID Create coronas and distribute nodes for all NodeID find the corona level do for all Hopcount with NodeID do new corona level for NodeID = Hopcount if Hopcount < new corona level for NodeID then new coronal level = Hopcount end if Assign NodeID = new corona level end for end for End Process Begin Process: Planned Distribution Calculate number of nodes in Corona Generate grid-quorum distribution from node quantity planned distribute time-frames to all nodes Create next-hop group using 1 hop distance if next Hopcount is 1 then assign = next hop group member end if End Process

33

Active Ratio(ARi ) =

Total Active Duration Total Length of Time Period tR (TCi+1 + TCi ) = n2 tR (TCi+1 + TCi ) = . n2

(4.3)

From the calculation of active ratio (ARi ) and next hop group, the probability of finding a next hop neighbor in Ci-1 awake as seen from Ci corona can be estimated as

Probability of an awake node in Ci = ARi . Probability of a node sleeping in Ci = (1 - ARi ). Probability of finding all next hop nodes sleeping = (1 - ARi-1 )nh .

(4.4) (4.5) (4.6)

Probability of a next hop node awake = 1 - (1 - ARi-1 )nh TC + TC = 1 - 1 - i 2 i-1 n
nh

.

(4.7)

This type of planned distribution allows a high confidence network. Here, all the nodes will have allotted time-frames for data transmission and the collision and retransmission can be avoided. However, as there is no control over varying traffic situation, the system needs to be adjusted further.

34

4.2

Sensor Classification

All the sensor nodes are classified based on the data types as addressed in chapter 3. Let's consider, A , B , C are the constants assigned as identification for node class A, B, and C respectively. This classification is merely a way to differentiate between nodes with high or low active ratio. Each node will retain its own assigned value which will be used for scheduling in the next section. Algorithm 2 illustrates the sensor classification and priority assignment algorithm. These assigned values are called priority constants. The reason behind this assignment can be realized very easily. The planned distribution with sensor classification allows a high confidence network. Algorithm 2 Sensor Classification Begin Process: Sensor Classification initiate sensor class if x  A then sensor class = A set priority = x else if A > x  B then sensor class = B set priority = x else sensor class = C set priority = x end if End Process Planned distribution with sensor classification will assign dedicated time-frames for all nodes to create high confidence data transmission network. Hence, the collision and retransmission can be avoided. However, the problem related to this distribution can be observed in Figure 2.6. The nodes wake-up to communicate during time-frames 2 and 6. Now, what if the nodes have data to send or receive only during one time-frame?

35

Also, how the time-frames will be distributed for different classes of sensors? How will the scheduling change for variable traffic? These issues are solved in section 4.3 by combining a planned scheduling scheme with the above system.

4.3

Planned scheduling

All the sensor nodes will have their dedicated time-frames after the grid distribution. In order to make sure the sensor nodes are following sleep/wake schedule according to the priority, a planned scheduling scheme is generated. The nodes can transmit their wake-up pattern to adjacent nodes and re-arrange their schedule based on information received about next hop neighbor's pattern. Some sort of synchronization is necessary between nodes in order to achieve this. The generated pattern by each node is a binary string of 1's and 0's. Where 1's means scheduled wake and 0's mean scheduled sleep. When a node transmits a pattern of 00010010, it means during next 8 time slots of the period, the node is scheduled to wake up only during 4th and 7th time slot. This pattern is not a confirmed schedule but a tentative sleep-wake plan. When a node receives similar patterns from next hop neighbors, it adjusts the sleep-wake schedule to receive data from other nodes and follows that schedule for the period. The scheme follows basic algorithm of pattern generation as described in [1]. The modified pattern equation is

36

u Pv,n +1 =

     1                     01                     0m 1                   0m+1 1                           02m 1      

node u has data to send during an intersecting time-frame irrespective of pattern bit

u Pv,n = 1, u has no data to send during next

intersecting time-frame of bit 1

u Pv,n = 0m 1, (m=N-1), u has no data to send

during next intersecting time-frame of bit 1 (4.8)
u = 0m 1, (x  m  N - 1), u has no data Pv,n

to send during next intersecting time-frame of bit 1

u Pv,n = 0m 1, (0  m 

x ), 2

u has no data to

send during next intersecting time-frame of bit 1

Here, x is the priority constant assigned to the nodes from section 4.1. The nodes will generate the patterns based on their priority constant information and traffic load. A node can increase x value to make it more energy efficient or decrease the x value to wake up during more time-frames. The nodes will train themselves using the neighbor's traffic load and own traffic plans. Figure 4.4 captures the pattern generation method adopted in this protocol. A basic difference of the new protocol from P-MAC is that

37

x is determined directly from the traffic history and different types of sensors may have different x values. Also, the new protocol generates the patterns based on the scheduling information of planned distribution. Thus, the pattern is generated only for the time-frames when there is a possible free intersecting channel in the network. Here, the intersecting channel means the time-frame where multiple sensor nodes' wake-up times intersect as shown in Figure 2.6. In this new scheme, the sensor will generate a tentative sleep/wake plan for the node and broadcast as pattern repeat time-frame (PRTF) packet [1]. The node already know when the next hop neighbors are available according to the planned distribution of section 4.1. Therefore, PRTF will be generated based on next hop neighbor's availability. When a sensor receives similar PRTFs from next hop neighbors, it adjusts the sleep/wake schedule accordingly and transmits as pattern exchange time-frame (PETF) [1]. The neighbors will save the final wake-up schedule of this node as PETF. The illustration in Figure 4.5 shows the actual sleep/wake schedule based on planned scheduling information. Sometimes multiple nodes may generate same wake-up patterns for a single timeframe. Let's consider host `X' and host `Y' are from two different corona levels. They both want to communicate to host `Z' during a single time-frame. Thus, host `Z' needs to generate own pattern based on X and Y 's pattern. However, it cannot assign the same time-frame for two different nodes. The new protocol derives a CCA (clear channel assessment) technique to address this issue [28]. If any host encounters `n' number of incoming plans for a single time-frame, it will generate a PETF to wake up during `n' time-frames when it can communicate to those nodes. The receiving node will wake up during the extra time-frames that it created. The transmitting nodes will wake up based on the schedules they created for themselves. All the sensors will wait a random back-off 38

Figure 4.4: Planned scheduling using patterns. period to sense the channel using CCA. The first one to send the packet will get access to the channel and others will go to sleep sensing a busy channel after the back-off period. The failed nodes will attempt to transmit again during the next immediate wake-up schedule known from PETF of sink. It is evident from the Figure 4.2 that, there is an insurance time-frame in case of failure. If two nodes are supposed to wake up at a certain time-frame, but there is a failure in transmission, the nodes will automatically schedule another wake up during next time-frame as shown in grey overlay in the figure. This way the integrity of the algorithm is ensured. In this pattern generation scheme, only large time scales (in order of hundred milliseconds) are involved [1]. Hence, the system does

Figure 4.5: Planned scheduling combined with planned distribution in the proposed QPP-MAC algorithm. 39

not need to have a complex synchronization method for the sensors. The system can perform very well with the synchronization scheme derived in S-MAC [9]. This reduces the complexity and control overhead of the network. The total active duration of sensor nodes in corona Ci and probability of a node awake can be found from (3) and (7) of section 4.1. The active ratio with pattern generation can be calculated using

ARi (n) =

(TCi+1 x ) + (TCi x ) , n2

(4.9)

and the probability of a next hop node awake for a node in Ci will be

Pi (n) = 1 - (1 - ARi-1 )nh =1- 1- (TCi x ) + (TCi-1 x ) n2
nh

.

(4.10)

This type of pattern generation scheme allows data aware network, where the networking nodes can choose their energy efficiency based on the traffic needs. This planned scheduling scheme, combined with previously discussed planned distribution and sensor classification, can potentially provide high confidence data aware network with high energy efficiency. The nodes or the sink can change the x value anytime to control network's energy efficiency. Only problem in this collective algorithm is that the cycle length for outer level corona gets excessively long. Thus, there is a potential risk of increased latency for large networks. The next section discusses the possible solution for this problem.

40

4.4

Dynamic cycle length selection

The above system model performs very well for a small network. However, as the network gets bigger and bigger the total cycle length Cytotal for any corona also gets longer. Eventually the lower level coronas have to accommodate for the bulk time-frame requests coming from upper level coronas. When the network's cycle length becomes too high for the upper level coronas, the sensor nodes have to wait a longer period of time to find empty time-frames. This will eventually result in high latency system. Although there are lots of empty time-frames in the DAQ cycle, those time-frames cannot be used by any sensor due to grid quorum distribution. According to section 4.1, nodes will only wake up during their intersecting time-frames dynamically. Figure 4.6 shows the distribution of empty time-frames for C1 of a 5 corona system with all subsequent coronas having

Figure 4.6: Probability density of empty time-frames in the proposed QPP network before the dynamic cycle length selection.

41

maximum allowable number of sensors. It can be observed that the above system model generates almost 200+ empty frames on average. Although, these empty frames mean energy saving, they will make the system very prone to latency issues. High latency will result in dramatic reduction in network throughput. One way to solve the above problem is to use statistically inspired cycle length. It is evident from the Figure 4.3 that these unused time-frames can be removed from the cycle without effecting data transmission. In this paper, a novel technique is proposed to control the cycle length dynamically. Figure 4.7 illustrates the dynamic cycle length selection process. The top time line shows a regular cycle with fixed length. There are lots of empty time-frames which are not being used. This time-frames can be discarded easily without effecting data rate. Middle time line shows the empty time-frames are selected for deletion. Finally, bottom time-line shows the reduced time cycle. There are still some empty time-frames in the cycle. These frames may accommodate on demand traffic requests. It can be observed from the statistical model of the traffic load distribution, the utilized cycle length `Cyutil ' has a small variance ` 2 '. The mean of the probability distribution gives a close estimation on how many time-frames are being used over a

Figure 4.7: Dynamic cycle length selection process. Top: Regular time cycle with fixed length. Middle: Empty time-frame selection. Bottom: Time cycle after dynamic cycle operation.

42

long period of time. The network can utilize the mean `µ' and standard deviation ` ' to generate dynamic cycle length `Cydyn ' which is greater than or equal to the actual utilized cycle length `Cyutil '. The probability distribution can be calculated as

n

Pi (n) =
- n

Pi (x) dx Pi (x) dxb
0

=

=

  (TC x )+(TC x )    i+1 x2 i    0

0xn (4.11) otherwise .

The mean `µ' can be calculated from the probability distribution using



µ=
- n

xPi (x) dx xPi (x) dx
0

=

= TCi+1 x + TCi x = TCi+1 x + TCi x

x dx 2 0 x n 1 dx 0 x (4.12)

n

= TCi+1 x + TCi x ln(n).

Similarly the standard deviation ` ' of this distribution is

43



=
n

(x - µ)2 Pi (x) dx
-

=
0

(x - µ)2 Pi (x) dx
n

= =

TCi+1 x + TCi x
0

(x - µ)2

1 dx x2 . (4.13)

TCi+1 x + TCi x

µ2 n - 2µln(n) - n

The sample system model is designed using the above equations. Let's consider a 5 corona network with maximum traffic load in each corona. The allocated traffic load for corona C1 can be calculated as 500 time-frames using (1) of section 4.1. Whereas actual utilized traffic load for this corona with a x value of 50% shows the mean traffic load is only 274 packets and the standard deviation is 4.23  5. In our system, we proposed the optimal cycle length for this system will be µ + 2 . Therefore, a dynamic cycle length (Cydyn ) of (274 + 10 =) 284 time-frames should be enough to accommodate the traffic load of the corona. The extra time-frames will be used by the sensors in case of transmission failure. We are assuming each time-frame can accommodate any packet size generated by the sensor nodes. Algorithm 3 shows the summary of planned scheduling and dynamic cycle length operation system model. The proposed algorithm uses a very simple synchronization technique to synchronize the clocks as described in Section 3.4. In this method, only large time scales (in order of milliseconds) are involved. Therefore, if there is a small amount of jitter, the system won't have any serious performance issue. However, if the time deviation is more than

44

Algorithm 3 Planned scheduling and Dynamic cycle length operation Begin Process: Planned Scheduling initialize pattern check priority value x =priority if DataToSend = 1 then pattern = 1 u =1 then else if DataToSend = 0 and Pv,n pattern = 01 u else if DataToSend = 0 and Pv,n = 0m 1 and m = N - 1 then pattern = 0m 1 u = 0m 1 and x  m  N - 1 then else if DataToSend = 0 and Pv,n pattern = 0m+1 1 x then else if DataToSend = 0 and 0  m  2 2m pattern = 0 1 end if generate PRTF based on grid information and pattern transmit PRTF to neighboring nodes if timef rame assign == 0 then accept schedule and confirm PETF else go back to step 44 end if End Process Begin Process: Dynamic Cycle Length Selection calculate µ and  cycle length = µ + 2 assign cycle length to specific corona End Process

45

20%, the system should re-synchronize the clock using a `Sync' frame. Refer to Figure 3.2 where the first frame is a Sync frame. The system will allocate a Sync frame for entire network after a few cycles for re-synchronization. If the time fluctuation is high, the frequency of this Sync frame will be higher. However, if there is less than 20% deviation in the time cycle, the system will not schedule the Sync frame. The WSN network in consideration mostly has one way traffic towards the sink. However, there are some two way traffic conditions when the sink node sends out the Sync packet or issue the change of x for class A sensors. This may create some collisions in the network if there is not enough empty time frames in the network and the x value changes suddenly. In such cases, the system will adopt the re-transmission method described in Section 4.3. Although there can be some time fluctuation and collisions in special cases, the system will not have any serious stability issue. Considering that, there is no feedback mechanism in the network, the system will never see any serious performance degradation or instability.

4.5

Energy Analysis

The saved energy for this algorithm can be calculated using sleep time. For any timeframe tR in the period, the length of sleeping interval is (1 - awake time)tR . The awake time after planned distribution can be calculated using the traffic load. If traffic load for corona `i' is `TCi ' then the energy saving with only planned distribution will be

Edist =

1-

TCi + TCi-1 n2 46

nh

tR Pidle .

(4.14)

Here, Pidle is the idle energy required by the sensor node and Edist is the saved energy after planned distribution. With sensor classification implemented in the system. The sensor nodes have the ability to save more energy. However, the planned distribution is needed to be implemented in order to use the priority control of the sensor nodes. The sensors will save energy based on the `x ' constant assigned to them. Therefore, the energy saving with the planned scheduling and sensor classification becomes

Epriority =

1-

TCi x + TCi-1 x n2

nh

tR Pidle .

(4.15)

The Epriority in this equation is the measure of energy saving with sensor classification and the planned scheduling implemented. For the new system the nodes will be sleeping through the entire time length when there is no data to send or receive. The average number of sleeping frames in a pattern is calculated in [1] as E (0). If Cyutil is the utilized cycle duration and d is duty cycle, then the sleeping time interval becomes

St =

E (0)tR d. Cyutil

(4.16)

In effect, the additional energy saving by each node in the new system can be given by

Esave =

E (0)tR dPidle (1 - Pi-1 )nh . Cyutil

(4.17)

47

Here Pidle is the idle power consumption for any node (i.e., when the node is awake but not sending or receiving any data). For a total `n ' number of nodes in the network that are not transmitting or receiving any data, the total energy saving is

Esave

E (0)tR dPidle (1 - Pi-1 )nh =n Cyutil E (0)tR dPidle 1 - =n
TCi x +TCi-1 x n2 nh

(4.18)

Cyutil

.

(4.19)

The ability to control energy saving adaptively by changing x gives more flexibility without increasing network complexity. Figure 4.8 illustrates the progression on energy savings by QPP-MAC protocol. The synchronization method that is used in this protocol is very simple, and slight deviation in time may not pose any serious issue. In this research, a distributed, quasi-planned scheduling algorithm with priority control has been developed. The Q-MAC concept is the backbone of this protocol, but it is significantly improved to solve more diverse problems. The new MAC algorithm has

Figure 4.8: Energy saving in different level of the protocol. 48

been developed for a `many-to-one' network with one central sink. The nodes are not mobile, and are geographically distributed in a random manner with uniform mean density. The entire network is divided into multiple coronas as described in [25]. The system is designed to deal with both steady and variable traffic loads depending on the sensor's assigned role. Three different types of sensors are considered. The protocol has a traffic distribution system for periodic and steady load. Also, there is an adaptive and event based algorithm to handle variable traffic load. The sensors are trained to wake up only when they can transmit or receive from next hop member. The nodes are aware about their next hop neighbor's availability from grid distribution and tentative patterns. The latency introduced by asynchronous scheduling is reduced by the new algorithm with dynamic cycle length operation that uses realistic packet length based on data type. All these features make the algorithm robust and usable in smart building's wireless sensor network. The new protocol shows better energy performance than S-MAC, Q-MAC, P-MAC and many other conventional MAC protocols mentioned in [9], [1], and [25].

49

Chapter 5 Simulation Results
After introducing the QPP-MAC protocol, the dynamic cycle selection, and the general architecture of priority based scheduling, this chapter attempts to put all pieces together and demonstrate the system performance. Short of building a real system, a numerical simulation approach has been taken. A numerical simulation model is developed in MATLAB to validate the performance of the new protocol. This in particular will enable the quick comparison of the proposed options, compared to the already established solutions. This chapter shows the feasibility and accuracy of the proposed algorithm. Each node is simulated as an entity endowed with a limited amount of energy at setup, and the energy consumption is recorded for each operation as a combination of operation time and power consumed during the operation. The power consuming events are the transmission of a message, the reception of a message, and the sensing of channel occupancy. Number of iterations are necessary to verify the performance and adaptability of the solution. The simulation parameters are obtained from the Safe-Plug T M and TRCA building's embedded sensor's specifications. The table in Appendix A shows the param-

50

eters adopted in the simulation. The algorithm and simulation meant to provide design guidelines for integrating the MAC protocol in the EDM system of smart building.

5.1

Sensor Wake-up Ratio

A distributed network is created following grid quorum based system [25]. The network is divided into number of coronas. Each corona has node capacity directly proportional to the area. The quantity of the nodes increases as the area increases from the centralized location. All the nodes in the corona try to maximize the use of resources. The scheduling pattern is generated according to the pattern generation algorithm described in chapter 4.1. It employs the priority constant for dynamic scheduling for different sensor classes. The simulation results in Figure 5.1 show the node wake up ratio is reduced in each

Figure 5.1: Wake up ratio of a sensor irrespective of its class.

51

corona level for the new algorithm. It can be observed that the nodes in lower level coronas wake up more as compared to upper level coronas. This can be explained using the grid-quorum algorithm. The nodes in inner corona have to transfer own traffic as well as forward traffic from outer level coronas. Thus, awake time increases. The protocol is also capable of handling large number of nodes efficiently.

5.2

Sensor Classes

All the sensors are grouped into various classes at the beginning of network initialization. The need for this grouping can be realized from the simulation results. Figure 5.2 illustrates average activity levels by various classes of sensors over multiple cycle. It is evident that class A sensors are more active than class B or C. However, the number of

Figure 5.2: Average activity levels of each sensor class.

52

class A sensors are the lowest in the system. Hence, this activities do not increase the traffic flow of the network much. The simulation results show that the class A sensors will deplete energy faster if the priority scheduling is not considered. In such a case, the network manager can change the priority constant for class B or class C sensors to facilitate the forwarding traffic. Thus, all the forwarding traffic only flows through `B' or `C' class sensors. This will reduce the potential energy-hole issue to some extent. This simulation result also tells us that a sudden change in traffic flow of the class A sensor will have a very little impact on the overall traffic load of the system. A small change in the traffic pattern and scheduling will not pose serious threat for the integrity of the network. It can be observed from Figure 5.3 that class A sensors consumed the highest amount

Figure 5.3: Energy usage comparison between different classes of sensors.

53

of energy as compared to other classes. This is due to the fact that these sensors have higher awake durations than other classes. However, the activity of these nodes can easily be controlled by the central manager or EDM system. If there were no classification, then class B and class C sensors would wake-up during the same number of time-frames as class A. Hence, the energy consumption by those two classes of sensors would be same as class A. The use of sensor classification and priority based scheduling manage energy consumption in each class independently to improve overall energy performance of the system.

5.3

Scheduling and Energy Performance

The Figure 5.4 shows the average receive and transmit duration of a node during a duty cycle. It can be observed that the receive duration is lower than the transmit duration, due to the fact that the nodes need to transmit both their own traffic and forwarding

Figure 5.4: Awake duration of a node.

54

traffic. They also need to confirm the successful transmission with ACK packet and close the connection. During data transmission, a part of the frame is also used for sensing of the channel using CCA, and establishing connection using RTS and CTS packets. Hence, total awake duration is increased. The new protocol shows reduction in both transmit and receive duration as compared to Q-MAC. The average energy consumption for a sensor node in each corona is shown in Figure 5.5. It is assumed that there are 10 corona levels and all coronas have maximum allowable sensor nodes. It is clear from the figure that the energy consumption by proposed QPP-MAC protocol is much lower than regular S-MAC and Q-MAC. This proves the effectiveness of the new algorithm in terms of energy savings. The new proposed algorithm, discussed in this research, has distributed nodes with planned scheduling.

Figure 5.5: Energy performance of each corona according to the new protocol.

55

Therefore, theoretically the new system should perform well in both static and variable traffic load situation. Furthermore, the Q-MAC and S-MAC protocols are developed for generic network environments. Hence, the similarity of the new QPP-MAC with the S-MAC and Q-MAC will make it easily deployable in other generic centralized multi-hop networks.

5.4

Performance of Dynamic Cycle Length Operation

The illustration on Figure 5.6 shows the probability distribution of the traffic loads with fixed x over 10,000 iterations. It is evident that a large number of time-frames are left unutilized before the dynamic cycle length operation takes place. These empty

Figure 5.6: Probability distribution of traffic load before dynamic cycle length operation for sensors with fixed x .

56

time-frames are the cause of increased latency for a large network. About half of all the time-frames in a duty cycle are unused and can be discarded. It can be seen that the mean value, µsimulated  253 frames with standard deviation, simulated  2 [29]. Whereas, the actual utilized traffic load from the simulation is 255 time-frames. It proves our hypothesis that dynamic cycle length Cydyn = µsimulated + (2simulated ) is enough to accommodate all the network traffic generated or passing through the corona. Note that the network manager can change the value of x to dynamically change the network's energy performance to make it more or less energy aware. This will increase the network throughput. The Figure 5.7 shows the reliability function for unused time-frames in a duty cycle. It can be observed that the number of unused time-frames is reduced considerably in the

Figure 5.7: Number of unused time-frames in a duty cycle.

57

new protocol. This reflects high reliability of the algorithm to reduce the cycle length and subsequently latency. If there are low number of varying or on-demand traffic, the number of unused frames will be lower. In case of high flow of bursty traffic, the system will adopt optimum number of frames depending on the mean and variance of generated pattern. On the other hand, Q-MAC does not have any support for this kind of cycle length reduction. Therefore, the number of unused frames is fixed depending on number of sensor nodes and traffic generation rate. Figure 5.8 shows the effect of changing x value from the network manager. It demonstrates the number of used and unused time-frames before dynamic cycle length operation and also the number of unused time-frames after selecting dynamic cycle length with varying x . The reduced number in unused time-frames surely increases the cycle refresh

Figure 5.8: Probability distribution of traffic load with varying x .

58

rate. The µsimulated and simulated values are still satisfying the hypothesis to preserve the optimum number of time-frames based on traffic load. In case of a high QoS network, it is advisable to make the cycle length equal to the grid generated cycle length. Which means that the system will perform better if the statistics process is restarted on any change of x value. A smaller cycle length will enable a network with large number of sensor nodes to refresh quickly. It can be observed in Figure 5.9 that the cycle length is reduced for the new QPP-MAC protocol. This feature will enable less wait time for any on-demand class A sensor in the upper level corona. The overall simulation results show performance improvement over S-MAC, Q-MAC and consequently many other MAC protocols for sensor networks. The system model developed in this research is versatile and uses time division

Figure 5.9: The cycle length comparison between Q-MAC and QPP-MAC. A smaller cycle length will result in a quick cycle refresh rate.

59

technique for simple scheduling. The use of very generic synchronization technique like S-MAC sync reduces the control overhead and saves energy. It is evident that the goal to develop energy efficient wireless sensor network for smart building environment is a success.

60

Chapter 6 Practical Application in the Smart Buildings
A net-zero (NZ) (or net positive) smart building is a structure that consumes less than or equal to the energy it produces [30], [31]. The net-zero status is achieved by locally generating energy from renewable sources and by minimizing the energy requirement. Typically a NZ smart environment is equipped with many wireless communication nodes (IEEE 802.15.4) to get information from hundreds of temperature, humidity, airflow, and occupancy sensors [32]. These sensors make up the Data Acquisition (DAQ) system of the building. This data is used to automatically optimize the control algorithm for Energy Demand Management (EDM) system. These smart buildings will also periodically communicate with the power grid to get information such as pricing or time of use, and will optimize various energy parameters of the structures. The archetype sustainable model building at Kortright Centre for Conservation, Vaughan, Ontario, Canada built by Toronto Regional Conservation Authority (TRCA)

61

is used to develop a preliminary understanding on various sensing and communication requirements for this algorithm [33]. The TRCA smart building uses around 300+ temperature, airflow, humidity and occupancy sensors. Currently these sensors are wired and the objective is to replace them with distributed WSN. A conceptual WSN network diagram is illustrated in Figure 6.1. The communication sensors will also connect the smart and regular appliances in the building to EDM system. The central control server can communicate to any sensor for DAQ or control purpose. The MAC protocol in this research is evolved around the setup of this building. The wireless sensors will typically need 150 mW - 600 mW energy in a multi-hop network [34], depending on the number of nodes and the distance among them. Well-connected, energy efficient wireless networks are essential for net zero smart building realization. The first step is probably to reduce the energy wastage by the wireless sensor network. The wireless nodes in this smart building can be categorized into following categories

Figure 6.1: Communication network design of a smart building automation system. 62

Sensing Only Nodes These sensors communicate the sensed information only in one direction. They do not take part into any control mechanism. Examples are the temperature sensors. The central controller decides whether to adjust the temperature in the Heat, Ventilation and Air Conditioning (HVAC) system [10]. These are mainly class B or class C sensors of the algorithm. Sensing and Controlling Nodes These sensors, such as the Safe- PlugT M modules have the sensing as well as controlling capability to turn off certain appliances or put them in energy saving mode when required. Here the communication is duplex (bi-directional). These sensors are class A or class B nodes from the QPP-MAC protocol. In the TRCA smart building, older appliances are controlled by proprietary SafePlugT M modules. The Safe-PlugT M works as a regular receptacle but has built-in ZigBee sensors. Each appliance has a unique RFID tag [35]. The receptacles are equipped with RFID readers to identify the appliance [36]. The central controller will decide to turn on

Figure 6.2: Classification of sensor nodes in smart building. 63

or off an appliance based on the optimization requirements. The lights, temperature and security system are also controlled using IEEE 802.15.4 compliance ZigBee sensors [24]. The energy management system gets information about the status of three local energy sources (i.e., geothermal, wind and, solar) on the availability of local energy. Figure 6.2 shows the sensor classification in the TRCA facility. The energy efficient MAC protocol discussed in this research is a perfect fit for the senor network of this smart structure. The proposed algorithm supports both the control (on-demand) and DAQ (periodic) sensors. The dynamic cycle length selection along with planned distribution and scheduling provides support for network expansion to any number of sensor node used in the residential environment. Although, the smart building scenario is used to develop the protocol, the dynamic adaptability feature to accommodate many types of data traffic makes the protocol usable in any wireless sensor network environment.

64

Chapter 7 Conclusions and Future Work
`Net-Zero' Smart buildings are important part of sustainable cities. They are essential to cope with the increasing demand of renewable and green energy. The EDM system in a smart structure can help to develop energy efficient residential and commercial spaces. One big obstacle to use EDM is the WSNs frequent maintenance need. The communication network discussed in this research will enable the EDM system to achieve the expected level of energy efficiency. A highly reliable energy efficient network will require low maintenance and increased network life-time. An energy efficient communication algorithm named QPP-MAC protocol with dynamic cycle length is proposed in this research for smart building WSN. The total energy requirement by each node is reduced by the new MAC layer protocol. The quorum based distribution of nodes facilitates confirmed communication for steady traffic. The next-hop group selection reduces the energy hole problem to some extent. The novel classification method of the sensor nodes also gives options for new adaptive control and data acquisition methods. The pattern based scheduling gives adaptive control during varying traffic load. The combination of

65

quorum and pattern along with priority control improves the overall energy efficiency of the network. The new MAC protocol shows better performance than S-MAC, T-MAC, Q-MAC, and many other WSN protocols. Furthermore, the protocol derives a novel statistically inspired algorithm to dynamically configure the cycle length for reducing latency and for improving network throughput. The system is built for any fixed WSN with one sink environment where a planned network deployment is possible. The ability to accommodate both steady and varying traffic without increasing complexity or compromising energy efficiency gives this protocol an edge over many conventional MAC protocols discussed in this research. The new algorithm shows better performance in terms of energy usage and managing network resources of a smart building wireless sensor network. The low maintenance need will enable the network to sustain for a long time. However, true stainability and clean network architecture is yet to be achieved. In future, this proposed MAC layer algorithm can be implemented in `Energy-Harvesting' sensors. These sensors produce their own energy from light, heat, or mechanical potential. Thus, the sensors require very high energy management on their own to be able to cope with exponentially growing data network. The QPP-MAC protocol can be used with conventional sensors to achieve this sort of energy efficiency. Although the system is built for residential environment, it can be applicable to other structures and environments where a planned network deployment is possible. A development for commercial or industrial environment can show the true potential of this MAC algorithm.

66

Appendices

67

Appendix A Simulation Parameters

Parameters Transmission power Receiving power Sleep power Idle power x Data packet length ACK packet length Channel rate Length of time-frame tR Number of corona Number of iterations Sensor Transmission Range Number of Class A Sensors Number of Class A Sensors Number of Class A Sensors Cycle Length Cy Total Number of Sensors Threshold time TA

Value 0.69 Watts 0.36 Watts 0.03 Watts 0.24 Watts varying 32 byte 3 byte 15 kbps 100 ms 5 to 10 10,000 150 meters  15%  35%  50% dynamic 400 20 ms

68

Appendix B Algorithms
B.1 QPP-MAC Algorithm

Algorithm for QPP-MAC with dynamic cycle operation Begin Process: Network Initialization Assign NodeID to all nodes Initiate packet NET IN IT Broadcast NET INIT packet to all nodes Receive Hopcount + NodeID Create coronas and distribute nodes for all NodeID find the corona level do for all Hopcount with NodeID do new corona level for NodeID = Hopcount if Hopcount < new corona level for NodeID then new coronal level = Hopcount end if Assign NodeID = new corona level end for end for End Process

69

Algorithm for QPP-MAC with dynamic cycle operation continued Begin Process: Planned Distribution Calculate number of nodes in Corona Generate grid-quorum distribution from node quantity planned distribute time-frames to all nodes Create next-hop group using 1 hop distance if next Hopcount is 1 then assign = next hop group member end if End Process Begin Process: Sensor Classification initiate sensor class if x  A then sensor class = A set priority = x else if A > x  B then sensor class = B set priority = x else sensor class = C set priority = x end if End Process Begin Process: Planned Scheduling initialize pattern check priority value x =priority if DataToSend = 1 then pattern = 1 u else if DataToSend = 0 and Pv,n =1 then pattern = 01 u else if DataToSend = 0 and Pv,n = 0m 1 and m = N - 1 then pattern = 0m 1 u else if DataToSend = 0 and Pv,n = 0m 1 and x  m  N - 1 then pattern = 0m+1 1 x then else if DataToSend = 0 and 0  m  2 2m pattern = 0 1 end if generate PRTF based on grid information and pattern transmit PRTF to neighboring nodes

70

Algorithm for QPP-MAC with dynamic cycle operation continued if timef rame assign == 0 then accept schedule and confirm PETF else go back to step 44 end if End Process Begin Process: Dynamic Cycle Length Selection calculate µ and  cycle length = µ + (2 ) assign cycle length to specific corona End Process

B.2

IEEE 802.15.4 MAC Layer Setup

IEEE 802.15.4 MAC Layer Setup Begin Process: MAC Layer Setup if Listen period > Frame duration then Error else Initiate network end if for all All nodes do Begin: Generate Traffic Create frames with destination addresses end for Continue Process

71

IEEE 802.15.4 MAC Layer Setup continued for all All nodes do Begin: Schedule check if Schedule == 1 then Wake up and Send/Receive else Sleep mode = 1 end if end for for all All frames do Listen for back-off period for all All packets sent do Check packet length end for Schedule to send to destination end for Begin: Receive traffic for all All packets received do Check for destination address if Destination address == Node address then Keep packet else Discard packet end if end for for all All nodes do Check average delay if Delay > threshold then Increase x else Maintain x end if end for End Process

72

References
[1] T. Zheng, S. Radhakrishnan, and V. Sarangan, "PMAC: an adaptive energy-efficient MAC protocol for wireless sensor networks," in Proc. 19th IEEE International Parallel and Distributed Processing Symposium, 2005, pp. 237­244. [2] S. Mukherjee, "Opportunities and challenges with net zero energy buildings," in Proc. 23rd IEEE International Symposium on Power Semiconductor Devices and ICs (ISPSD), 2011, pp. 1­5. [3] F. Tidjani and A. Chandra, "Integration of renewable energy sources and the utility grid with the net zero energy building in republic of Chad," in Proc. 38th Annual Conference on IEEE Industrial Electronics Society (IECON), 2012, pp. 1025­1030. [4] L. Spitalny, D. Unger, J. Teuwsen, V. Liebenau, J. Myrzik, and B. Van Reeth, "Effectiveness of a building energy management system for the integration of netzero energy buildings into the grid and for providing tertiary control reserve," in Proc. IEEE Grenoble PowerTech (POWERTECH), 2013, pp. 1­6. [5] A. R. Al-Ali, I. Zualkernan, and F. Aloul, "A mobile GPRS-sensors array for air pollution monitoring," IEEE Sensors Journal, vol. 10, no. 10, pp. 1666­1671, 2010. [6] R. Brennan, W. Tai, D. O'sullivan, M. Aslam, S. Rea, and D. Pesch, "Open framework middleware for intelligent WSN topology adaption in smart buildings," in Proc. International Conference on Ultra Modern Telecommunications Workshops, 2009, pp. 1­7.

73

[7] S. Latif and X. Fernando, "A greener MAC layer protocol for smart home wireless sensor networks," in Proc. IEEE Online Conference on Green Communications (OnlineGreenComm), 2013, pp. 1­6. [8] H. Hu, G. Jenks, Y. Huang, M. Milencovic, and U. Hanebutte, "Information and communications technology based solutions in achieving building energy efficiency," in Proc. IEEE Conference on Technologies for Sustainability (SusTech), 2013, pp. 49­54. [9] W. Ye, J. Heidemann, and D. Estrin, "An energy-efficient MAC protocol for wireless sensor networks," in Proc. 21st Annual Joint Conference of the IEEE Computer and Communications Societies (INFOCOM), vol. 3, 2002, pp. 1567­1576. [10] M. Stemm, R. H. Katz, and Y. H. Katz, "Measuring and reducing energy consumption of network interfaces in hand-held devices," IEICE Transactions on Communications, pp. 1­7, 1997. [11] X. Wu, G. Chen, and S. Das, "Avoiding energy holes in wireless sensor networks with nonuniform node distribution," IEEE Transactions on Parallel and Distributed Systems, vol. 19, no. 5, pp. 710­720, 2008. [12] J. Li and P. Mohapatra, "An analytical model for the energy hole problem in manyto-one sensor networks," in Proc. 62nd IEEE Vehicular Technology Conference, vol. 4, 2005, pp. 2721­2725. [13] I. Stojmenovic and S. Olariu, "Data-centric protocols for wireless sensor networks," Handbook of Sensor Networks, pp. 417­456, 2005. [14] M. Skov, "Implementation of physical and media access protocols for high-speed networks," IEEE Communications Magazine, vol. 27, no. 6, pp. 45­53, 1989. [15] T. R. Park and M. J. Lee, Green IT: Technologies and Applications. Springer, 2011, ch. Wireless Communications and Mobile Computing, pp. 57­78. 74

[16] T. Park and M. Lee, "Power saving algorithms for wireless sensor networks on IEEE 802.15.4," IEEE Communications Magazine, vol. 46, no. 6, pp. 148­155, 2008. [17] C. Guo, L. C. Zhong, and J. Rabaey, "Low power distributed MAC for ad hoc sensor radio networks," in Proc. IEEE Global Telecommunications Conference, vol. 5, 2001, pp. 2944­2948. [18] T. van Dam and K. Langendoen, "An adaptive energy-efficient MAC protocol for wireless sensor networks," in Proc. 1st International Conference on Embedded Networked Sensor Systems. ACM, 2003, pp. 171­180. [19] G. Lu, B. Krishnamachari, and C. S. Raghavendra, "An adaptive energy-efficient and low-latency MAC for tree-based data gathering in sensor networks," Energy Efficient MAC, vol. 7, no. 7, pp. 863­875, 2007. [20] A. El-Hoiydi and J.-D. Decotignie, "Low power downlink MAC protocols for infrastructure wireless sensor networks," Mobile Networks and Applications, vol. 10, no. 5, pp. 675­690, 2005. [21] M. Buettner, G. V. Yee, E. Anderson, and R. Han, "X-MAC: A short preamble MAC protocol for duty-cycled wireless sensor networks," in Proc. 4th International Conference on Embedded Networked Sensor Systems. ACM, 2006, pp. 307­320. [22] J. Polastre, J. Hill, and D. Culler, "Versatile low power media access for wireless sensor networks," in Proc. 2nd International Conference on Embedded Networked Sensor Systems. New York, NY, USA: ACM, 2004, pp. 95­107. [23] N. Javaid, S. Hayat, M. Shakir, M. A. Khan, S. H. Bouk, and Z. A. Khan, "Energy efficient MAC protocols in wireless body area sensor networks - a survey," Computing Research Repository (CoRR), vol. 1303.2072, pp. 1­17, 2013. [24] Q. Xu, L. Rong, S. Fang, and Y. Du, "Energy-efficient scheme for IEEE 802.15.4

75

compliant device," Progress in Electromagnetics Research Symposiam, pp. 353­356, 2009. [25] C.-M. Chao and Y.-W. Lee, "A quorum-based energy-saving MAC protocol design for wireless sensor networks," IEEE Transactions on Vehicular Technology, vol. 59, no. 2, pp. 813­822, 2010. [26] G. Shah, V. Gungor, and O. Akan, "A cross-layer qos-aware communication framework in cognitive radio sensor networks for smart grid applications," IEEE Transactions on Industrial Informatics, vol. 9, no. 3, pp. 1477­1485, 2013. [27] M.-G. Kim, Y.-T. Han, and H.-S. Park, "Energy-aware hybrid data aggregation mechanism considering the energy hole problem in asynchronous MAC-based WSNs," IEEE Communications Letters, vol. 15, no. 11, pp. 1169­1171, 2011. [28] I. Ramachandran and S. Roy, "Clear channel assessment in energyconstrained wideband wireless networks," IEEE Wireless Communications, vol. 14, no. 3, pp. 70­78, 2007. [29] P. Bailis, S. Venkataraman, M. J. Franklin, J. M. Hellerstein, and I. Stoica, "Probabilistically bounded staleness for practical partial quorums," Very Large Database Endowment, vol. 5, no. 8, pp. 776­787, 2012. [30] M. Jahn, M. Jentsch, C. Prause, F. Pramudianto, A. Al-Akkad, and R. Reiners, "The energy aware smart home," in Proc. 5th International Conference on Future Information Technology (FutureTech), 2010, pp. 1­8. [31] H. Chen, P. Chou, S. Duri, H. Lei, and J. Reason, "The design and implementation of a smart building control system," in Proc. IEEE International Conference on e-Business Engineering, 2009, pp. 255­262. [32] S. Pollin, M. Ergen, S. Ergen, B. Bougard, L. Der Perre, I. Moerman, A. Bahai, P. Varaiya, and F. Catthoor, "Performance analysis of slotted carrier sense IEEE 76

802.15.4 medium access layer," IEEE Transactions on Wireless Communications, vol. 7, no. 9, pp. 3359­3371, 2008. [33] L. Bartram, J. Rodgers, and K. Muise, "Chasing the negawatt: Visualization for sustainable living," IEEE Computer Graphics and Applications, vol. 30, no. 3, pp. 8­14, 2010. [34] M. Sveda and R. Vrba, "Integrated smart sensor networking framework for sensorbased appliances," IEEE Sensors Journal, vol. 3, no. 5, pp. 579­586, 2003. [35] S. S. Kumar, M. N. Kumar, V. S. Sheeba, and K. R. K. d, "Power efficient dynamic MAC protocol (D-MAC) for wireless sensor networks," Journal of Information & Computational Science, vol. 9, no. 2, p. 17951805, 2012. [36] H. Cho, H. Jang, and Y. Baek, "Large scale active RFID system utilizing zigbee networks," in Proc. IEEE International Conference on Consumer Electronics (ICCE), 2011, pp. 429­430.

77

