STUDY OF POWER LINE COMMUNICATION MODEMS FOR AUTOMOTIVE COMMUNICATION NETWORKS
by

Peter Nisbet Bachelor of Technology in Electronics Engineering Technology RCC Institute of Technology, Concord, Ontario, Canada, 2011

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in Electrical and Computer Engineering Toronto, Ontario, Canada, 2014 c Peter Nisbet, 2014

I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

Peter Nisbet

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

Peter Nisbet

I understand that my thesis may be made electronically available to the public.

ii

Study of Power Line Communication Modems for Automotive Communication Networks, Master of Applied Science, 2014, Peter Nisbet, Electrical and Computer Engineering Program, Ryerson University

Abstract
Power line communication (PLC) technology has become very attractive in the automotive sector. As vehicle manufacturers aim to produce vehicles with improved fuel economy, comfort and technology, they are limited by current vehicle communication networks due to increased bulk and complexity. PLC technology has been suggested as a solution for this issue by utilizing existing power wires as a communication channel. However reliability is a big challenge with PLC technology, especially with critical systems such as braking, steering and engine control. This thesis studies the feasibility, reliability and possible improvements of PLC for controlling vehicle subsystems such as heating, ventilation and air conditioning (HVAC) system. In order to determine feasibility, several modems were examined for cost and ease of implementation. After selecting a modem solution, the PLC prototype modem was tested on an HVAC system test bed to control various fans, blowers and pumps over a DC power line. The PLC solution was then tested using a 2003 Ford Focus ZTS and a 2011 Ford Edge SE. The tests consisted of repeatedly sending a code from a transmitter connected to the vehicle battery while a receiver was connected to a power port inside the vehicle. The tests were run in several vehicle states e.g. Off, electronics on engine off and engine idle. The results from the tests showed that communication can be established over a vehicle power line with reasonable cost and ease. However reliability of the proposed solution needs to be improved before it can be implemented in vehicles. To improve performance of the proposed PLC solution, an impedance matching network for PLC was proposed. From current research an adaptive matching network utilizing active inductors and capacitor banks was designed and simulated. The designed matching network was simulated with several different automotive loads such as a vehicle battery and various lights. Simulations results showed the proposed matching network was capable of matching impedances with all the simulated automotive loads. When the circuit was built up and tested, there were issues with stability iii

and cost of construction. The results show that more work needs to be done before PLC can become a suitable solution in vehicle communication network. With improvements such as impedance matching, line drive ability and robust modulation schemes, it won't be long before PLC will be a viable vehicle network solution.

iv

Acknowledgment
I would like to thank the people who made this all possible. Without their support I would not have been able to complete this thesis. I would like to thank Professor Lian Zhao and Professor Minco He for your constant support, sage advice and allowing me to grow both professionally and personally. I am a better man now then what I was at the start of this journey. I would also like to thank the projects industry partners MCC with special thanks to Johnny Huang, Ken Grogan and Eric Weiss, for supplying the necessary equipment and technical expertise. I would like to thank to thank my good friends Michael Zhang, Jessica Tran and Julia Brown for taking my mind off work and being there for me when I needed it. Your emotional support means the world to me, I couldn't have done this without you. I would like to thank Jastej Gill for counselling me and helping me overcome my depression and anxiety. Your advice has transformed me and has finally brought back the smile on my face which had disappeared for so long. Lastly I would like to thank my family. My mom and dad for your immense love and support and for making me the man I am today, my brother for all the laughs and good times and my Grandfather who's immense love and wisdom is a true inspiration. I LOVE YOU ALL!!

v

Contents
1 Introduction 1.1 Research Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.1.1 1.1.2 1.1.3 1.2 1.3 1.4 Feasibility of Automotive PLC . . . . . . . . . . . . . . . . . . . . . . Reliability of PLC Modems . . . . . . . . . . . . . . . . . . . . . . . Vehicle PLC Improvements . . . . . . . . . . . . . . . . . . . . . . . 1 3 3 5 6 9 10 11 11 11 12 12 13 13 13 14 18 19 22 27

Limitations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Contributions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Thesis Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.4.1 1.4.2 1.4.3 1.4.4 Introduction and Background. . . . . . . . . . . . . . . . . . . . . . . Automotive PLC Design and Experimentation . . . . . . . . . . . . . PLC Impedance Matching . . . . . . . . . . . . . . . . . . . . . . . . Conclusion. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2 PLC Background 2.1 Vehicle Wiring Networks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2.1.1 2.1.2 2.2 Vehicle Power Network . . . . . . . . . . . . . . . . . . . . . . . . . . Vehicle Communication Networks . . . . . . . . . . . . . . . . . . . .

PLC Theory . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2.2.1 2.2.2 Channel Characteristics . . . . . . . . . . . . . . . . . . . . . . . . . Modulation Schemes . . . . . . . . . . . . . . . . . . . . . . . . . . .

2.3

Literature Review . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

vi

3 PLC System Design 3.1 3.2 3.3 Application Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Modem Selection . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . PLC Modem Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3.3.1 3.3.2 3.4 3.5 Custom Modem . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Off The Shelf PLC Modem . . . . . . . . . . . . . . . . . . . . . . . .

33 33 34 36 37 41 42 44 45 46 54 54 59 61 65 68 70 70 71 71 72 72 72 73 74 80

PLC System Design . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . PLC HVAC Test Results . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3.5.1 3.5.2 PLC Modem Suitability Test . . . . . . . . . . . . . . . . . . . . . .

SIG60 Modem Reliability Test . . . . . . . . . . . . . . . . . . . . . .

4 Impedance Matching 4.1 4.2 4.3 4.4 4.5 Impedance Matching Topology Comparison . . . . . . . . . . . . . . . . . . Active Inductor Noise Analysis . . . . . . . . . . . . . . . . . . . . . . . . . Simulation Results . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Matching Results with Automotive Loads . . . . . . . . . . . . . . . . . . .

Conclusions for the Proposed Matching Network . . . . . . . . . . . . . . . .

5 Conclusion 5.1 5.2 5.3 5.4 Review of Purpose . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . HVAC PLC Control Summary . . . . . . . . . . . . . . . . . . . . . . . . . . PLC Impedance Matching Summary . . . . . . . . . . . . . . . . . . . . . . Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5.4.1 5.4.2 5.5 Automotive PLC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . PLC Impedance Matching . . . . . . . . . . . . . . . . . . . . . . . .

Concluding Remarks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Bibliography A Abbreviation List

vii

List of Tables
2.1 3.1 3.2 3.3 4.1 4.2 CAN message bit identification [9]. . . . . . . . . . . . . . . . . . . . . . . . Modem Design Criteria. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Modem Specifications. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Modem Results with Demo HVAC System. . . . . . . . . . . . . . . . . . . . Impedance Matching Network Comparison. [39] . . . . . . . . . . . . . . . . Automotive Impedance Matching Results. . . . . . . . . . . . . . . . . . . . 17 36 47 47 55 65

viii

List of Figures
2.1 2.2 Portion of vehicle dashboard wiring harness [32] . . . . . . . . . . . . . . . . Wiring diagram of Ford Fusion high voltage power network [35] 1: High voltage service disconnect 2: High voltage battery 275V 3: High voltage wiring 4: 12V battery 5: Electronically controlled continuously variable transaxle(ECVT) 6: DC/DC converter 7: Electric A/C compressor 2.3 . . . . . . . . . . . . . . . 15 14

Various electronics and electromechanical systems controlled over the LIN bus [7] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15 16 18 19

2.4 2.5 2.6 2.7

CAN data frame including signal levels [9] . . . . . . . . . . . . . . . . . . . FlexRay network configurations [7] . . . . . . . . . . . . . . . . . . . . . . . FlexRay data frame showing Header, Payload and Trailer [10] . . . . . . . . Top: Input impedance at cigarette lighter at various operation states. Bottom: Input impedance magnitude while car is on and off. [26] . . . . . . . . . . .

20 22 23 23 24 25 26

2.8 2.9

Impulsive noise and OFDM PLC signal on vehicle power line [23] . . . . . . Impulse noise of two vehicles when an actuator is activated [22] . . . . . . .

2.10 The waveform of an ASK signal including the binary data it represents [36] . 2.11 The wave form of an FSK signal including the binary data it represents[37] . 2.12 The waveform of an PSK signal including the binary data it represents[38] . 2.13 OFDM data path block diagram[38] . . . . . . . . . . . . . . . . . . . . . . . 2.14 8 subcarrier OFDM with BPSK modulation representing the ASCI word BUY[38] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2.15 InnoTruck PLC light control system network diagram[13] . . . . . . . . . . . 2.16 Prototype wiring diagram shown in[16] . . . . . . . . . . . . . . . . . . . . . ix

26 27 28

2.17 Battery frequency response with resistive loads[16] . . . . . . . . . . . . . . . 2.18 Battery frequency response with inductive loads[16] . . . . . . . . . . . . . . 2.19 Block diagram of the proposed Ethernet PLC network[17] . . . . . . . . . . . 2.20 Proposed smart motor PLC block diagram[2] . . . . . . . . . . . . . . . . . . 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 Picture of a typical HVAC system in a car[43] . . . . . . . . . . . . . . . . . Noise spectrograph taken from the vehicles power lines[22] . . . . . . . . . . Block Diagram of PLC Modem . . . . . . . . . . . . . . . . . . . . . . . . . Transmitter Schematic of PLC Modem . . . . . . . . . . . . . . . . . . . . . Receiver Schematic of PLC Modem . . . . . . . . . . . . . . . . . . . . . . . QPSK Demodulation with k = 0.2 . . . . . . . . . . . . . . . . . . . . . . . . QPSK Demodulation with k = 1 . . . . . . . . . . . . . . . . . . . . . . . . . QPSK Demodulation with k = 2 . . . . . . . . . . . . . . . . . . . . . . . . . PCB of PLC Receiver . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

29 29 30 31 34 35 37 38 39 39 40 40 41 42 43 44 45 46 48 49 50 51 52 53 53 53 56

3.10 PCB of PLC Transmitter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3.11 Block diagram of SIG60 PLC modem [14] . . . . . . . . . . . . . . . . . . .

3.12 HVAC Test board . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3.13 Schematic of SIG60 PLC Modem and HVAC Controller . . . . . . . . . . . . 3.14 PCB of SIG60 based HVAC Controller . . . . . . . . . . . . . . . . . . . . . 3.15 External PLC modem connection transmitter side . . . . . . . . . . . . . . . 3.16 Internal PLC modem connection receiver side . . . . . . . . . . . . . . . . . 3.17 Ford Focus PLC In Vehicle Test different subsystems operating 32 packets . 3.18 Ford Edge with PLC transmitter connected . . . . . . . . . . . . . . . . . . 3.19 Ford Edge with PLC receiver connected in cabin . . . . . . . . . . . . . . . . 3.20 Ford Edge with PLC receiver connected in tailgate . . . . . . . . . . . . . . 3.21 Ford Edge with PLC receiver connected in cabin 32 packets . . . . . . . . . 3.22 Ford Edge with PLC receiver connected in tailgate 32 packets . . . . . . . . 4.1 Schematic of an active inductor in CMOS integrated circuits[41] . . . . . . .

x

4.2 4.3 4.4 4.5 4.6 4.7 4.8 4.9

Schematic of general impedance converter[39] . . . . . . . . . . . . . . . . . Schematic of proposed L match network . . . . . . . . . . . . . . . . . . . . Circuit schematic of proposed impedance matching network . . . . . . . . .

56 57 57 58 59 61 62 62 64 64 65 66 67 67 68 68 69

Schematic for reflection meter . . . . . . . . . . . . . . . . . . . . . . . . . . Schematic of the proposed L match network . . . . . . . . . . . . . . . . . . simulated inductor test circuit . . . . . . . . . . . . . . . . . . . . . . . . . . Frequency Response of Simulated Inductor with R2 =9.09k . . . . . . . . . Frequency Response of Simulated Inductor with R2 =1k . . . . . . . . . . .

4.10 The circuit test schematic in Multisim for real load impedance match . . . . 4.11 Transient response before adding matching network . . . . . . . . . . . . . . 4.12 Transient response after adding matching network . . . . . . . . . . . . . . . 4.13 The circuit test schematic in Multisim for complex load impedance match . . 4.14 Transient response before adding matching network . . . . . . . . . . . . . . 4.15 Transient response after adding matching network . . . . . . . . . . . . . . . 4.16 Variable real impedance component from 0 to 1k . . . . . . . . . . . . . . 4.17 Variable imaginary component with fixed 20 real impedance . . . . . . . . 4.18 Variable imaginary component with fixed 300 real impedance . . . . . . . .

xi

Chapter 1 Introduction
Power line communication (PLC) over the past decade has grown in popularity as an alternative to current wired and wireless solutions. PLC communicates data by using the power lines as a transmission media, the same wires that power the devices. PLC has become popular in applications such as smart metering [1, 3], home automation [5, 3] and home network and internet connectivity [4]. As power distribution networks are already established in buildings meaning PLC can be deployed without running new cables. This allows for greater flexibility and simplicity in network deployment as communication is established by simply plugging a modem into the power lines, no need to worry about routing cables [3]. Cost reduction is another benefit as there is no installation cost occurred from laying new copper or fibre optic cables. The only cost incurred is that of the PLC modem which are competitive with other wire line network technologies. Due to the benefits of ease of deployment and cost savings that PLC offers it is not surprising that applications other than those mentioned before are beginning to explore PLC as a networking solution. One notable area exploring PLC as a communication solution is the automotive industry. Vehicles have relied heavily on wire line communication, specifically local interconnect network (LIN), controller area network (CAN) and FlexRay. These three network technologies have dominated the automotive communication market due to their unmatched reliability and meeting society of automotive engineers(SAE) standards [8, 9, 10]. Over the years vehicle manufacturers have increased the application of electronic systems in 1

vehicles. These systems generally focus on three aspects: comfort, safety and performance, and reliability. Systems catering to comfort are automatic climate control, power adjustable seats, mirrors and doors, heated and cooled seats and steering wheels and infotainment systems. These systems generally rely on low speed communication networks such as LIN as the data being transmitted in these applications is very small [8, 7]. Systems catering to safety are blind spot information system, lane departure systems, collision sensing system and parking cameras. These systems generally rely on all three available vehicle communication networks, as the data being transmitted can be very small as seen in the collision sensing system or very large as seen in the parking camera application [7, 9]. Systems catering to performance and reliability are electronic control unit (ECU), power steering and braking, and drive-by-wire systems. These systems generally rely on CAN and FlexRay networks as reliability is crucial for these applications. If data arrives with errors the vehicle may not operate correctly, or could result in serious injury to the passengers. With the integration of these new technologies, improving comfort, safety, performance and reliability, current vehicle communication networks are becoming impractical to implement due to increased cost, weight and network complexity [6]. While vehicle owners may not care that their vehicles communication network is too bulky and complex, the extra bulk has a noticeable impact on the cost of maintenance, fuel consumption and performance of a vehicle [24]. The increase in network complexity makes it difficult for mechanics to troubleshoot issues in a vehicle as they must navigate the wire harness if the issue is an electrical problem. The increased bulk also makes rerouting or navigating around the wire harness difficult, due to the large number of wires [6]. As a result the mechanic repairing a vehicle must spend extra time and effort when repairing a vehicle with an electrical issue. This generally results in an increased maintenance cost which is transferred to the vehicle owner [6]. The increased bulk of the wire harness also affects the fuel economy of a vehicle, with the wiring harness typically weighing around 93Kg. While this may seem insignificant compared to the vehicles total weight, from the results shown in [24], the difference of nearly

2

100Kgs can translate to 1L/100Km reduction in fuel consumption. Lastly the increase bulk can also affect performance, from the same tests in [24] the 0-100km/h times were about 1 second different. While 0-100km/h tests only show hard acceleration performance, the extra 93Kg weight can also affect the sway of a vehicle when cornering and longer braking distance. These issues directly affect the vehicle owner without the owner realizing it. As a result vehicle manufactures have started to address this situation by re-examining the vehicles communication network [6, 24].

1.1

Research Motivation

As mentioned previously PLC offers many benefits such as cost savings, reduced weight and simplified network structure. This is why vehicle designers are investigating PLC as a possible vehicle communication network technology. But how does PLC compare to other proposed vehicle network solutions such as Ethernet, fibre optic networks and wireless? Compared to the other wire line technologies, PLC doesn't require any extra cables, only the power cables, which reduces significant bulk. However compared to the other wire line technologies, reliability is not as great which is a concern for critical data transmissions in a vehicle. Compared to wireless technology, PLC is less susceptible to interference from other devices external to the vehicle. Also some areas of the vehicle are shielded which would make wireless communication impossible to those areas. With this in mind we understand that more research needs to be conducted about PLC's use in vehicle communication networks. The research in this thesis answers three questions about vehicle PLC: is PLC feasible as a vehicle communication network technology? how reliable is PLC technology? what improvements can be made to make PLC viable?

1.1.1

Feasibility of Automotive PLC

While PLC technology is fairly established and solutions are available for home, commercial and industrial applications, they tend to target AC power networks. While solutions are available for DC power networks, they are not as plentiful as AC solutions. Because of 3

the lack of DC PLC options, we decided to examine three cases to determine the best solution for implementing PLC in vehicle. The first case examined was current DC PLC modems. Our specific attention was focused on performance and price point of the DC PLC modem. Performance of the modems was examined several ways, first being examining manufacturer application notes and datasheets [13, 14], the second way was by researching publications about the PLC modem being used on DC power networks and automotive communication [16, 15, 17]. Examining the cost of implementing the DC PLC modem was determined by examining the market price of the modem IC, the supporting circuit necessary for modem operation and performance based on the research of the modem. The second case examined adapting AC PLC modems for operation on DC power networks. To start the AC PLC modem manufacturer application notes were examined to determine if available adaptation were documented [25]. As with the DC PLC modems, specific attention was focused on performance and price point of the AC PLC modems. Again performance was determined by examining the manufacturer datasheets and application notes [11], and also for possible implementations in a DC or automotive applications [25, 12]. The price point of implementing the AC PLC modems was determined the same way as the DC PLC modems, by examining the market price of the modem IC, the supporting circuitry and performance based on research of the modems application. The third case examined designing the physical layer DC PLC modem from scratch. In order to begin designing, the characteristics of vehicle power network were examined. Channel characteristics such as noise [22, 23] and impedance [20, 21] were investigated to determine the best modulation scheme and carrier frequency of the PLC modem. Once the modem characteristics were determined, attention was made to the cost of implementation. The cost of implementation focuses on cost of constructing the PLC modem, cost of supporting circuitry, PCB footprint and performance.

4

From the three cases, three custom designed PLC modem physical layer and one off the shelf PLC modem were constructed. The three custom designed PLC modems were selected to determine overall performance when compared to the off the shelf PLC modem. The next step is to test the four selected PLC modems to determine their reliability on a vehicle power network.

1.1.2

Reliability of PLC Modems

With four potential automotive PLC modem candidates selected, the next step is to test the reliability of the modems on a vehicles power line. Mentioned previously reliable communication is essential for automotive communication networks. Technologies such as LIN, CAN and FlexRay have proven reliability track records a reliable vehicle communication networks [7, 9, 10, 8]. As passenger safety is paramount, any proposed vehicle communication networks reliability must be examined. Since the power lines are an unfriendly environment for communication signals, due to large amounts of impulsive noise, low impedance loads and paths, signal reflections and long transmission line lengths. To determine the reliability of the four proposed PLC modem candidates two tests were performed. The first test consists of a typical vehicle heating, ventilation, and air conditioning (HVAC) subsystem. The purpose of this test was to examine the performance of the three custom designed PLC modems compared to the off the shelf modem. The test was used to determine which PLC modem solution should be tested in vehicle, as any solution that failed to perform well in this test would also perform poorly in the vehicle test. The four candidate PLC modems were connected to the model HVAC subsystem, with one modem acting as a transmitter and the other modem acting as a receiver. The transmitter was connected to a car battery which powered the HVAC module, while the receiver was connected to the power terminals just before the HVAC subsystem. The transmitter would continuously send a command to the receiver which would output the received command on its output port. From the results of this test the modem with the fewest command errors was selected for in vehicle testing. 5

The second test consists of testing the modem selected from the first test two vehicles a 2003 Ford Focus ZTS compact car and a 2011 Ford Edge SE CUV. The purpose of this test was to determine the reliability of the selected PLC solution operating on the power lines in two different classes of vehicle. The test demonstrates the performance of the PLC modem on two different classes of vehicle as well different operating states and test locations within the vehicle. Like with the previous test the PLC modem was connected to the vehicle power line with one modem acting as a transmitter and the other acting as a receiver. The transmitter was connected to the vehicles battery and the receiver was connected to an available power port inside the cabin or tailgate. The transmitter would continuously send a command to the receiver; the receiver would compare the received command to the expected command 32 times. If the commands did not match the receiver would increment an error counter and display the total number of errors out of the 32 command transmissions. The test were run in several states: with the engine off electronics off, engine off electronics and HVAC on, engine idling, and engine rev vehicle in neutral. From the results of this test it was determined that improvements to the current PLC modem must be made before it is reliable enough for use in vehicle.

1.1.3

Vehicle PLC Improvements

After conducting the reliability tests, it was determined that the current PLC modem solution requires several improvements to improve the modems reliability. There are several options to improve the performance of the PLC modem several of which are: increase transmission power, utilize a different modulation scheme to combat noise, improve sensitivity of the modem and impedance matching. Increasing the transmission power will improve performance of the PLC modem however issues may arise from interference with other devices inside and outside of the vehicle. Selecting a modem that uses a different modulation scheme could also improve performance, however the price of those modems are much greater and make for unattractive solutions [11]. Improving the sensitivity of the PLC modem is a decent and relatively simple solution to realize. Simply adding a low noise amplifier can improve

6

reception over a long and low noise channel. However in cases where the received signal is severely attenuated and a very noisy load is connected close to the receiver, will still result in transmission errors. The last solution impedance matching addresses the issues from the other solutions. Impedance matching addresses the issue of impedance mismatches between the PLC modem and the channel. This is a big issue as the impedance of the power lines is time varying making typical impedance matching techniques useless. Typically PLC modem manufacturers ignore the impedance matching network, as a result power consumption is increased and signal transmission quality is poor. There has been significant research focusing on adaptive impedance matching networks for power line communication, focusing on many different techniques. An adaptive impedance matching network allows for on the fly changes of the matching network which is ideal for combating the time varying nature of the power lines impedance characteristics. Research into adaptive PLC impedance matching networks has highlighted several different techniques of realizing the matching network. The first technique utilizes capacitor banks [39, 19], which is an array of capacitors that can be switched to tune out the usually present inductive impedance of the power line. While cost of components can be low for the capacitor bank solution, the amount of PCB space necessary to accommodate the capacitors make this solution non ideal. The second technique utilizes a tapped transformer [39, 18], usually accompanied with a large capacitor which makes the power line impedance capacitive. By changing the tap of the transformer the capacitive impedance component can be tuned out. While this solution is simple to design, the cost of components is quite high as tapped transformers are fairly expensive. The third technique utilizes broadband equalizers [46], which consists of a tunable broadband amplifier and control software. Depending on the impedance difference between the modem and channel as well as carrier frequency the broadband amplifier adjusts its gain to compensate for the attenuation in the signal. The flaw with this technique is that transmission power may be restricted by regulations which would lower the effectiveness of the broadband equalizer. The

7

final technique utilizes active inductors [40, 49, 41, 44]; similar to the tapped transformer technique a variable inductance is used to tune out the large capacitance of the power line. However instead of changing taps to alter the inductance resistors values of the active inductor are changed. This allows for a compact and relatively cheap circuit to have the same functions as a tapped transformer. Active inductors is a circuit consisting of amplifiers, capacitors and resistors arranged as a general impedance converter (GIC). Adaptive matching networks utilizing active inductors offer many advantages over the other mentioned techniques. The primary advantage is a larger tuning range compared to tapped transformers and capacitor banks. The inductance value of the active inductor is tuned by changing a resistor generally a digital potentiometer. This allows for a wide variety of inductances to be realized compared to the fixed number of capacitors or transformer taps found in capacitor banks and tapped transformers. The second advantage is power consumption compared to the broadband equalizer technique, extra power is not required to improve signal strength. A true impedance match is achieved which lowers power consumption of the modems transmitter and reduces reflections on the power line. The final advantage is integration into PLC modem ICs. While capacitor banks can be realized fairly easily in integrated circuits the amount of chip area used can be quite large depending on the number of capacitors. In comparison active inductors in ICs can be realized with a single transistor and capacitor, thus taking up considerably less chip area. As mentioned before active inductors possess a greater tuning range compared to capacitor banks, which makes active inductors an attractive option for IC integration. As most of the research in active inductor impedance matching for PLC utilize transformers to improve current transfer to the load. This means an external transformer is required which takes up PCB space. We decided to explore a transformerless design which utilizes high current amplifiers to remove the need for a transformer [50]. Based on the standard general impedance converter, a high current active inductor was designed and simulated in Multisim. The simulations consisted of matching various automotive load impedances such 8

as car batteries and lights, to a transmitters output impedance. The simulations showed that the transformerless matching network was able to perform impedance matches for a wide variety of impedances found on automotive power lines.

1.2

Limitations

While the research conducted in this thesis answers the questions of feasibility, reliability and possible improvements of PLC in vehicle, there are several areas where further research is required. Firstly while in vehicle tests were performed in two different classes of vehicle, there are still other classes of vehicles which havent been tested, and could provide different results. Vehicles such as buses and trucks, hybrid and electric vehicles have different power line characteristics such as transmission line lengths, noise sources and wiring topology compared to those tested in this thesis. Obtaining data for all these vehicle classes was impossible due to the limited resources; however this leaves room for further research. Secondly tests need to be run to determine if the designed PLC solution meets SAE J1113 standards. SAE J1113 ensures that electronic devices within a vehicle do not interfere with each other; it also ensures that electronic devices operate correctly with the ambient electrical noises within a vehicle. Testing for SAE J1113 standard requires specialized equipment and test bench which was unavailable for our research. For this reason testing for SAE J1113 compatibility was omitted and left for future research. Lastly real world testing of the transformerless impedance matching circuit was omitted. This was due to instability of the active inductor when coupled to the power line. The proposed matching network also resulted in considerable component cost mainly due to the high speed current feedback op amps. As stability and price were issues with the proposed transformerless matching network, it was decided to refocus efforts on IC integration of the matching network to overcome stability and cost issues.

9

1.3

Contributions

The research in this thesis expands current knowledge of PLC for automotive communication by examining three areas: suitability, reliability and possible improvements. Most works have focused on analysis of channel characteristics of automotive power lines and few on practical implementations. Here from the channel analysis research we developed specific criteria we believe will make a PLC system suitable for automotive communication. Emphasis was placed on noise and impedance characteristics as well as cost of system implementation. From the developed specifications we set out to design three custom PLC modem physical layers and examined one off the shelf PLC modem (SIG60), which we deemed best suited for automotive PLC. We then developed an HVAC control module to test PLC with an automotive HVAC test system. We then performed in vehicle tests of the SIG60 in two vehicles: a 2003 Ford Focus ZTS and a 2011 Ford Edge SE. The tests focused on determining how reliably the SIG60 could perform in real world application. From the results we determined that the SIG60 suffered when large noise generators such as the engine, HVAC, alternator, power windows were operating. We determined that further improvements to reliability were needed before the PLC system could be implemented in vehicle. One of the improvements we looked into was impedance matching, in which we developed a transformerless impedance matching network for automotive PLC. A paper was published in the Journal of Electrical and Electronics Engineering Research under the title transformerless impedance matching network for automotive power line communication [50]. Simulations using models of automotive loads were performed on the proposed matching network, which yielded positive results. The matching network was able to provide an impedance match over a wide variety of impedance found on automotive power lines. A list of all contributions in the thesis is provided below: · Developed three custom PLC modem physical layers specifically for automotive applications. · Examined several off the shelf PLC modems for cost and performance. SIG60 was 10

selected. · Developed an HVAC control module using PLC. · Tested the SIG60 on the power lines of two vehicles: 2003 Ford Focus ZTS and 2011 Ford Edge SE. · Proposed a transformerless impedance matching network to improve the reliability of automotive PLC systems. · Had a paper published in the Journal of Electrical and Electronics Engineering Research (JEEER) under the title: transfomrerless impedance matching network for automotive power line communication.

1.4
1.4.1

Thesis Structure
Introduction and Background.

The first section of the thesis introduces the topic and provides the necessary background information. Chapter 1 introduces the topic of applying PLC in vehicles and describes the motivation, objectives, methodology and limitations of the research. Chapter 2 provides basic background theory of DC power line communication and vehicle communication network technology. This section highlights key issues with current vehicle networking technology and presents the benefits and limitations of PLC solution. Previous works on vehicle power line characteristics, automotive application of PLC and impedance matching are discussed.

1.4.2

Automotive PLC Design and Experimentation

Chapter 3 contains the market analysis, design and experiment results of an automotive PLC solution. The question of feasibility is answered by examining off the shelf and custom designed PLC modems, with specific attention to system cost and performance. Several modems are then constructed and system reliability is tested in a model automotive HVAC

11

system and in two different classes of vehicles. The results showed that further work was necessary to improve reliability of the designed PLC solution.

1.4.3

PLC Impedance Matching

Chapter 4 contains a study of one possible improvement to the designed PLC solution. Previous works in impedance matching networks are examined in detail, with specific attention on channel impedance. A transformerless adaptive matching network based on active inductors was designed and simulated in Multisim. While simulation results proved positive, market feasibility and circuit stability proved to be an issue as a result further research is required.

1.4.4

Conclusion.

Chapter 5 concludes the thesis and summarizes the motivation, objectives, results and limitations of the thesis. This chapter explains that a feasible automotive PLC solution can be implemented, however reliability must be improved and further tests must be performed before PLC can be used in vehicles. This chapter also discusses future work, applications whether PLC is a viable solution for the automotive industry.

12

Chapter 2 PLC Background
This chapter provides the necessary background information of PLC and vehicle communication network technology. The first section of the chapter provides information about vehicle wiring networks and current network technologies in modern vehicles. It also highlights the issues which spurred the research for PLC in vehicle. The second section will focus on PLC theory highlighting the differences between AC and DC power networks, channel characteristics and modulation schemes. The last section will review current PLC research and applications which this thesis expands on.

2.1
2.1.1

Vehicle Wiring Networks
Vehicle Power Network

Vehicle power networks distribute power from the battery or alternator to the electronics and electromechanical systems. These networks are DC and generally operate at 12V and charge at 14V from the alternator. The power network must be capable of providing a wide range of currents from less than 1mA to 650A or higher for a short period of time [31] in conventional gasoline and diesel vehicles. These power wires which can be relatively large generally 10AWG for high power systems [33]. These wires are routed through the vehicles wiring harness along with the much smaller communication wires. An example of a vehicle wiring harness is shown in Figure 2.1.

13

Figure 2.1: Portion of vehicle dashboard wiring harness [32]

. Previously there were prospects to adopt a new 42V power network known as PowerNet [24], with the prospect of higher power delivery without increasing conductor size. PowerNet was intended for use in high power applications such as electric power steering systems [29]. However PowerNet has been made obsolete with the introduction of hybrid vehicles high-voltage starter/generators and advancements in 12V technology [30]. As hybrid and all electric vehicles are becoming popular, we are beginning to see higher voltage DC networks generally up to 400V DC in vehicles [35, 34]. Generally these high voltage DC networks run in parallel with the standard 12V DC networks. An example of a hybrid vehicles high voltage power network is shown in Figure 2.2 [35].

2.1.2

Vehicle Communication Networks

The communication network of a vehicle allows for information to be exchanged between sensors, electromechanical systems and computer modules. These networks have become very complex as new electronics and technologies are being developed to improve comfort, reliability and fuel economy. A vehicles communication network generally handles three distinct data rates: low speed (19kbps or less), medium speed (approximately 125kbps) and high speed (1Mbps and greater) [7]. There are three dominant communication buses found in a vehicle, Local Interconnect Network (LIN), Controller Area Network (CAN) and FlexRay.

14

Figure 2.2: Wiring diagram of Ford Fusion high voltage power network [35] 1: High voltage service disconnect 2: High voltage battery 275V 3: High voltage wiring 4: 12V battery 5: Electronically controlled continuously variable transaxle(ECVT) 6: DC/DC converter 7: Electric A/C compressor

. LIN Bus The LIN bus provides communication for low data rate vehicle systems. With a data rate of 19.2kbps this communication bus typically handles the data for climate control, door locks and electric power windows, vehicle signals and lights just to mention a few [7]. Figure 2.3 details all the common devices which are controlled over the LIN bus.

Figure 2.3: Various electronics and electromechanical systems controlled over the LIN bus [7]

.

15

The LIN bus is a serial bus which can operate on one wire (using the vehicle chassis as a ground path). The network typically operates in a master and slave configuration with the vehicles ECU being the master and the device being the slave [7]. The LIN bus operates similar to universal asynchronous receiver/transmitter (UART) in which data is transmitted with a start bit, 8 bit data and a stop bit and parity is not used [8]. The bus signals swing from +12V DC to 0V DC and logic states are represented as dominant logic 0 and recessive as logic 1 [8]. CAN bus The CAN bus provides communication for medium and high data rate vehicle systems. With data rates depending on transmission line length, data rates can be expected from 50kbps at 1km to 1Mbps at 40m [7]. The CAN bus typically handles engine control communication, body control and diagnostic systems communication. Essentially any application which requires immunity to EMI or fast data rates utilizes the CAN bus [7]. Unlike LIN which is a bit oriented protocol, CAN is entirely message based, a typical CAN data frame is shown in Figure 2.4.

Figure 2.4: CAN data frame including signal levels [9]

.

The CAN bus utilizes differential signalling to transmit information. While the CAN bus can operate with one wire (using vehicle chassis as a return path) most applications are with two twisted pair wires [7]. Signalling over the CAN bus is done by using non-return to zero (NRZ) and logic levels are defined as logic 1 or recessive (0V) and logic 0 or dominant (from 2.75V to 4.5V) [7]. The CAN bus is a broadcast serial bus with each node being able to send 16

Table 2.1: CAN message bit identification [9].

Field Name Start of Frame Identifier Remote Transmit Request Identifier Extension bit Reserved bit Data Length Code Data Field CRC CRC Delimiter ACK Slot

Number of bits 1 11 1 1 1 4 0 - 64 15 1 1

Function Signals Beginning of Frame. The unique ID of the destination device. Also contains the message priority. Signals that the slave device i.e. sensor wishes to transmit data. Determines if 11 bit identifier or 29 bit identifier are used. Must be set to dominant. How many bytes of data is in the message. Data payload. Cyclic Redundancy Check. Must be recessive Signals frame has been received, usually transmitter sends recessive bit and receiver sends a dominant bit. Must be recessive. Must be recessive.

ACK Delimiter End of Frame

1 7

and receive data [9]. Since messages are broadcast over the bus every node on the CAN bus has an ID. Each device reads the ID in the message frame and will drop the data packet if the ID doesn't match. FlexRay FlexRay provides communication for high data rate vehicle systems. With data rates from 500kbps to 10Mbps, typical applications of FlexRay would be drive-by-wire systems, active suspension and adaptive cruise control [7]. FlexRay provides highly reliable and fast data links and can operate in a variety of bus topologies. FlexRay is able to operate in either single channel or dual channel modes [7]. Some of these topologies are shown in Figure 2.5.

17

Figure 2.5: FlexRay network configurations [7]

. FlexRay utilizes TDMA with a typical communication cycle consisting of: 1) a static segment, which is reserved for known data functions. 2) Dynamic segment, for data that hasn't been defined or random data. 3) Symbol window, which is used for establishing the network and network maintenance and network idle time. The symbol window is also used to maintain clock synchronization of the FlexRay bus [10]. Figure 2.6 shows the data frame structure of FlexRay.

2.2

PLC Theory

PLC utilizes a power network as a serial communication channel. Generally these networks have two wires and consist of a special modem capable of driving a signal over the low impedance power line and overcome the various noise sources. These modems vary from simple OOK modulation schemes to complex OFDM schemes depending on the application. This section will discuss the differences between AC and DC power networks, the characteristics of the DC power lines as well as typical modulation schemes used by PLC modems.

18

Figure 2.6: FlexRay data frame showing Header, Payload and Trailer [10]

.

2.2.1

Channel Characteristics

While PLC modems use typical communication techniques used in wire line communication networks. The power lines as a communications channel pose a more hostile environment, compared to other wireline communication systems. With time varying characteristics such as channel impedance fluctuations, changing signal paths and noise, the power line is not ideal and is very difficult to establish reliable and fast communication solutions. Channel Impedance The impedance of a power line is time-varying and is affected by the operation states of the devices connected to it. Each device connected to the power line represents a load impedance to the PLC modem. The actual impedance presented to the PLC modem depends on the device. For example, a motor would present a large impedance due to its inductive

19

nature [13]. However a DC power supply or battery would represent a low impedance because of its capacitive nature [13]. In applications such as automotive PLC, devices are constantly switching states and being activated and deactivated. Therefore it is very difficult to match the PLC modem impedance to the power line and it is generally ignored. Typically automotive power lines have extremely low impedances, ranging from less than 10 to above 700 [26, 21]. These impedances vary not only by device operation state but frequency as well [26, 21]. Figure 2.7 shows the impedance characteristics over a wide frequency range (DC to 100MHz) as well as different operating states of the vehicle.

Figure 2.7: Top: Input impedance at cigarette lighter at various operation states. Bottom: Input impedance magnitude while car is on and off. [26]

.

As explained previously, power line impedances are time-varying. As a result it is very difficult to design a matching network to match the modem to the channel. There is research currently being conducted to develop an adaptive impedance matching network for PLC modems utilizing various techniques such as active inductors, switched capacitor banks, broadband equalizers and tapped transformers [39, 40, 46, 41]. Most PLC manufacturers tend to ignore impedance matching in their recommended designs due to high complexity 20

and cost of implementing such a solution. Without impedance matching, PLC modems typically experience poor power transfer as shown in (2.1): 1 |VS |2 RL 2 (RS + RL )2 + (XS + XL )2

PL =

(2.1)

by minimizing the denominator (2.1) it is determined that RS =RL and that XS =XL to allow for maxmimum power transfer to the channel[42]. Unlike wireless or wire line channels, which try to match the impedance of the transmission line or device to a standard characteristic impedance such as 50. This allows for signals to be transmitted without reflections and with maximum power transfer. However power line impedances are generally complex as a result of devices such as motors and capacitive loads connected to the lines. Therefore a choice between reflectionless matching or maximum power matching must be made. Impulsive Noise Impulsive noise is very prominent in a vehicles power network, where large inductive loads are switched on and off. Impulsive noise makes PLC communication very difficult because the received signals can be masked by large noise spikes [22], resulting in corrupted data transmission. There have been studies to determine the characteristics of the impulsive noise on a vehicle power line. These studies analyzed different aspects such as operation of different devices on the power line [22], and vehicle idle and operating noise characteristics [23]. Figure 2.8 illustrates the issue of large impulsive noises. It can be seen that the noise present on the vehicle power lines can be as large if not larger than the transmitted signal. Several devices in a vehicle are responsible for generating impulsive noise. Typically these devices are motors (winshield wipers, HVAC fans, alternator), actuators and ignition system [22]. However while every vehicle has these components, the amount of impulsive noise generated will likely be different. This can be seen in Figure 2.9 where activation of an actuator in two different vehicles produces different impulsive noise results. While both vehicles may have the same actuator activated, they both generate different

21

Figure 2.8: Impulsive noise and OFDM PLC signal on vehicle power line [23]

. impulsive noise waveforms. For the case above, vehicle A had the actuator active for 95ms where as vehicle B had the actuator active for 85ms [22]. This would be highly common when different vehicles are used and shows that the impulsive noise is not only dependant on the type of device but also how long it is activated [23].

2.2.2

Modulation Schemes

PLC modems typically employ conventional digital modulation schemes such as ASK, FSK, PSK or OFDM. Depending on the application such as low data rate control or data reading, techniques such as ASK, FSK or PSK are used. However for higher data rates or robust noise applications, techniques such as OFDM or QPSK are used. Amplitude Shift Keying (ASK) ASK represents digital data by using amplitude modulation schemes. The data or modulation waveform is represented by changes in the amplitude of the carrier waveform. These changes are detected by the receiver typically through an ADC or an envelope detector. The mathematical representation and the corresponding waveform of simple binary ASK is shown in (2.2) and Figure 2.10: 22

Figure 2.9: Impulse noise of two vehicles when an actuator is activated [22]

.

y (t) = Am(t) cos 2fc t, 0  t  T

(2.2)

where A is a constant, m(t) is the modulated digital waveform, typically 1 or 0, fc is the carrier wave frequency and T represents the symbol duration.

Figure 2.10: The waveform of an ASK signal including the binary data it represents [36]

.

There are many variations of ASK employed in PLC communication. Typically low data rate systems utilize on-off keying (OOK), while quadrature amplitude modulation are used 23

in high bit rate applications. Frequency Shift Keying (FSK) Frequency shift keying represents digital data by using frequency modulation (FM) schemes. The data is represented by changes in the carrier frequency. These frequency changes are demodulated using phase locked loops (PLLs) which recovers the data. The mathematical representation and waveform of basic binary FSK is shown in equation (2.3) and the waveform is shown in Figure 2.11:

y (t) = A cos(m (t)), 0  t  T

(2.3)

where A is a constant, m (t) is the carrier frequency with modulated signal deviation, and T is the symbol duration. m (t) is given as:

m (t) = c (t) + kf Ei cos i (t)

(2.4)

where c (t) is the carrier frequency, kf is the deviation sensitivity typically in (kHz/V), Ei is the binary data typically 1 or 0 and i (t) is the modulated signal frequency.

Figure 2.11: The wave form of an FSK signal including the binary data it represents[37]

.

FSK modulation is very commonly used in narrowband PLC systems, due to its simplicity and robustness to noise compared to ASK modulation. 24

Phase Shift Keying (PSK) Phase shift keying represents digital data by using phase modulation (PM) techniques. The digital data is encoded in the phase of the carrier waveform. These phase changes are demodulated using a mixer and a carrier recovery network like a Costas loop or digitally. The mathematical representation and waveform of basic binary PSK is shown in equation (2.5) and the waveform is shown in Figure 2.12:

y (t) = A cos(c (t)) + m ), 0  t  T

(2.5)

where A is a constant, c (t) is the carrier frequency, and T is the symbol duration, m is given as: 2 (i - 1) M

m =

(2.6)

where i represents the phase state, M represents the number of allowable phase states.

Figure 2.12: The waveform of an PSK signal including the binary data it represents[38]

. While not as commonly used for narrowband PLC as FSK, PSK offers great improvements in noise performance over ASK. Typically PSK is used in applications where noise robustness is necessary in the form of differential PSK. PSK is also used in high speed PLC links in the form of QPSK, due to its ability to send twice as many bits with the same bandwidth. 25

Orthogonal Frequency Division Multiplexing (OFDM) OFDM is a digital encoding method which utilizes the principle of encoding data on multiple narrowband carrier signals. The OFDM encoded data is demodulated depending on what digital modulation scheme the subcarriers are using [38]. The OFDM subcarriers are decoded digitally with FFTs. OFDM provides many benefits such as improved data rates, improved immunity to RF interference, noise and multipath distortion [38]. A diagram of OFDM data path from transmitter to receiver is shown in Figure 2.13, an example of 8 BPSK data streams representing three ASCII letters encoded with OFDM is shown in Figure 2.14.

Figure 2.13: OFDM data path block diagram[38]

.

Figure 2.14: 8 subcarrier OFDM with BPSK modulation representing the ASCI word BUY[38]

. OFDM is a very common modulation method for very high speed PLC systems. OFDM 26

can typically be found in PLC transceivers with data rates well over 120kbit/s. Because of OFDMs resilience to noise it is used typically in industrial PLC networks.

2.3

Literature Review

PLC being a relative new concept for automotive applications, it has resulted in many works being published to determine feasibility as a replacement for current vehicle communication networks. Several of the works as were mentioned in the channel characteristics section focused on analyzing the characteristics of the PLC channel. There are several key works which focus on implementation of PLC in a vehicle. The first prominent application of PLC in a vehicle environment was the InnoTruck project conducted by Gernot Spiegelberg and Colani. The project set out to demonstrate next generation electric vehicles [13]. This project utilized PLC modems from Yamar Electronics Ltd and set out to create a light control system using PLC. Figure 2.15 shows a basic diagram of the proposed control network over the trucks power lines.

Figure 2.15: InnoTruck PLC light control system network diagram[13]

. Through use of PLC, the InnoTruck was able to drop 4kg from the vehicles wiring harness, eliminate the cost of two truck-trailer ISO-1185 cables and simplify installation and maintenance of the light control network[13]. Another prominent work in vehicular PLC implementation is shown in the masters thesis of Xiaoguang Huang. Huang explored the prospect of implementing a PLC system in vehicles and conducted extensive tests on noise characteristic of vehicle power lines [16]. This work helped spur on the research conducted in this thesis which is a direct continuation of Huang's work. The work begins by stating the differences between DC and AC power line networks, 27

automotive control advances and specific issues with PLC technology in vehicle applications with strong emphasis on noise. The work then presents a prototype PLC modem which was tested on a small DC test circuit with several loads connected to the power line. The prototype wiring diagram is shown in Figure 2.16.

Figure 2.16: Prototype wiring diagram shown in[16]

. The results revealed that PLC communication was possible with the prototype solution but there were issues with reliability [16]. The research then branched off into DC channel characteristics where the noise characteristics of the PLC channel were examined. Here the power lines of a 1997 Mazda 626 and a 2005 Chevrolet Malibu were tested during various states of operation and with different loads and systems operating. Specific examination was done on various types of loads as well. For example resistive loads and inductive loads which are typically found on vehicle power networks. The research also examined the frequency response of a car battery, as well as several loads such as different capacitances and resistive loads. The results from this research were used to determine the modem criteria necessary for the custom designed PLC modem and the off the shelf modem. Here it was recommended that a PLC modem with high carrier frequency specifically in the 5MHz-20MHz range [16] shown in Figure 2.17 and Figure 2.18: should be selected to avoid significant attenuation by the car battery. Also advanced communication techniques such as frequency hop spread spectrum could be used to overcome the noise [16]. The research highlighted four design criteria to consider for PLC design and 28

Figure 2.17: Battery frequency response with resistive loads[16]

.

Figure 2.18: Battery frequency response with inductive loads[16]

. which were considered in the selection of PLC solution in this thesis. These design criteria are noise, bandwidth, transmitting range, and cost [16]. It is clear from this application that there are great benefits for applying PLC to vehicles because of the decrease in weight and simplicity of serviceability and installation. Another prominent application of PLC in vehicle was done by Teemu Tuoriniemi, whose masters project focused on feasibility and implementation of PLC in Volvo power train sensor network. The project setup a PLC CAN network to communication sensor data from a post

29

catalytic N Ox sensor and the after treatment control module (ACM) of a Volvo FMX truck. Tests were conducted for throughput, noise and voltage gain during various vehicle operation states [15]. It was determined that while the CAN PLC modems did indeed operate over the power line, the transmission reliability was not the greatest. With at lowest 62% success rate occurring with the engine in idle mode and data flowing from N Ox sensor to the ACM [15]. While data transmission reliability may not be decent enough for sensor application in Teemu's work, it may be reliable enough for other applications. Another implementation of PLC in vehicles is found in [17]. The authors explore the prospects of implementing an Ethernet network over the power lines of a vehicle. The work set out to create an Ethernet to power line bridge using the SIG60 PLC modem as the physical layer and a Realtek RTL8019AS 10Mbps Ethernet media access controller along with an Atmel AVR ATmega128 microcontroller. The block diagram of the proposed solution is shown in Figure 2.19.

Figure 2.19: Block diagram of the proposed Ethernet PLC network[17]

. The SIG60 PLC modem allows for a maximum of 115.2kbps data rate over the power lines allowing the system to operate faster than the LIN networks 20kbps or match the 30

data rates of the low speed CAN network 125kbps [17]. The results from the research revealed that the Ethernet communication latency is within acceptable level as well as other Ethernet characteristics. It was also determined that this solution shows promise of being an acceptable replacement for the LIN bus. However more work is required to have the proposed solution be an acceptable replacement for the CAN bus. This paper has given insight to the performance of the SIG60 modem which is one of the modems considered in this thesis. By examining the results of this research it was determined that the SIG60 would provide acceptable performance over a vehicle power network. Another implementation of power line communication in a DC environment is found in the works of smart motors in [2]. While the research doesn't focus on automotive PLC specifically, it does have commonalities as the research focuses on DC power networks. The research in [2] proposes a smart motor design which utilizes the power lines as both a power source and communication channel for a servo motors. The benefits of this scheme are similar to that automotive PLC, which are reduced wire harness bulk, reduced installation and maintenance time, space saving and reduced cost of wiring[2]. This paper proposes a spread spectrum with code division multiple access (SS-CDMA) communication scheme which offer the benefits of immunity to noise interference from the PWM motor drivers and allows for full duplex communication. The proposed smart motor PLC block diagram is shown in Figure 2.20.

Figure 2.20: Proposed smart motor PLC block diagram[2]

. 31

The results of the research show that such a technique is capable of surviving the noisy environments found on the power lines of the smart motors. With a PSK modulation scheme along with spread spectrum and in the presence of additive white Gaussian noise (AWGN), both motors were able to receive their respective baseband signals with no errors. The research also focused on practical implementation of the PLC modem. With a focus on whether PLC signals can be transmitted over DC power lines. Tests were conducted over a frequency range of 200kHz-3MHz to determine the impedance seen on the power line. While the results are geared more towards robotic systems rather than vehicles, some of the principles can be extracted particularly the benefits of spread spectrum. Which was a key element used in the PLC modem designed in this thesis. It is clear that PLC can be used in vehicles to transmit data. However previous work indicates that, transmission reliability is questionable for critical applications such as driveby-wire or sensor data transmission. It is clear that several key design elements should be considered when developing a PLC solution for automotive power lines. The research conducted in this thesis utilized key design elements such as optimal carrier frequency and noise robust modulation schemes to design a PLC solution to control a vehicles HVAC system. Since an HVAC system is non critical to a vehicle's function and has a lower transmission quality, it is a good choice to examine.

32

Chapter 3 PLC System Design
In the previous Chapter, background knowledge of current vehicle communication technologies and the issue of wire harness size was discussed. Background information about PLC technology and related works of vehicle PLC was addressed as well. This chapter will focus on the feasibility of implementing a PLC solution in a vehicle, by examining: modem selection criteria, system cost and reliability on vehicle power lines.

3.1

Application Analysis

While the hope is that PLC will be able to replace most current dedicated communication networks in a vehicle, its reliability is questioned as can be seen in [15]. Therefore it was determined from this research that PLC communication should be tested in a non vital vehicle system. The system chosen was a vehicles HVAC system. The reason for this choice was due to the systems non critical nature and low data rates. Typical HVAC systems in a vehicle is shown in Figure 3.1 As seen in Figure 3.1, most vehicle HVAC systems consist of many valves, pumps, motors, sensors and an electronic control module. The goal of PLC is to relay control information from the vehicles centre console to the electronic control module without using extra communication wires. In small vehicles this may not result in a large decrease in wire harness size. 33

Figure 3.1: Picture of a typical HVAC system in a car[43]

. However in larger vehicles, such as trucks and buses which posses many of these systems throughout the vehicle, this is where the benefits will be seen. Since the HVAC system is contained within the engine bay in most vehicles, its power lines will be contaminated by noise from the alternator and other devices in the engine bay.

3.2

Modem Selection

As mentioned in the previous section there are several factors such as attenuation and noise which must be addressed when selecting a PLC modem. As mentioned in Chapter 2 there are several sources that cause attenuation over the power line. Generally the attenuation is caused by long transmission line lengths, low impedance loads connected to the power lines and impedance mismatches. With this in mind a PLC modem must be able to drive low impedance and long transmission lines. One thing to note is that the impedance seen by the modem when connected to the power line differs with frequency. Figure 2.7 shows the impedance characteristics of

34

a vehicles power line from various test points. It is clear that selecting a modem with a carrier frequency above 1MHz will be beneficial. Ideally selecting a modem in the 10 to 20 MHz range will allow for the least attenuation resulting from low impedance. Unfortunately most PLC modems do not provide matching circuits due to complexities of the time varying impedances of the power lines. Therefore the impedance matching issue is one that must be temporarily ignored. The issue of noise must also be addressed as vehicle power lines have an ample amount of noise generated by various motors and devices connected to the line. As mentioned in Chapter 2, the most prominent noise over the vehicles power line is impulsive noise, which is caused by the activation of motors and other devices in a vehicle. Figure 3.2 shows the noise spectrum measured over a vehicles power line.

Figure 3.2: Noise spectrograph taken from the vehicles power lines[22]

. It can be determined that the impulsive noise generated by the devices on the vehicles power lines cover a large amount of the spectrum. Therefore in order to counteract this, a modem with frequency hopping capabilities must be selected. Frequency hopping will allow 35

the carrier frequency of the modem to change when the current channel is noisy, allowing reliable communication over a noisy channel. While PLC modems are quite abundant for AC PLC systems, DC PLC modems are generally not as readily available. As a result, there is a limited selection of modems which could possibly be suitable for automotive application. Previously, the criteria needed to develop a decent PLC system for use in vehicles was discussed. Features such as frequency hopping, high frequency carrier signals and robust modulation are necessary to combat the effects of mismatched channel impedances and impulsive noise. Market research was done to look for suitable PLC solutions. This included examining several PLC modems available on the market as well as designing a modem from scratch. Table 3.1 highlights the desired modem specifications.
Table 3.1: Modem Design Criteria.

Field Name Carrier Frequency Modulation Scheme Data Rate Data Packaging Cost Frequency Hopping Supply Voltage

Criteria 1MHz-20MHz DPSK >100bps 8 bit binary <$15 Yes  12V

3.3

PLC Modem Design

From Table 3.1, the ideal PLC modem will possess key features such as high frequency carrier frequency, frequency hopping and a noise robust modulation scheme, to allow for successful data communication over the vehicles power lines. Also highlighted is the requirement for low cost modem solution, with a price of less than $15 per modem, which presents a big challenge for selecting an off the shelf solution and designing a custom modem.

36

3.3.1

Custom Modem

From the design criteria it was determined that a DPSK modem will be implemented in DSP. The frequency hopping section will be implemented using a PLL based frequency synthesizer. This will allow for minimal cost while satisfying the criteria mentioned above. The system block diagram is presented in Figure 3.3 and the circuit schematic for both transmitter and receiver are shown in Figure 3.4 and Figure 3.5 respectively. Low cost parts were used to keep within budget specifications.

Figure 3.3: Block Diagram of PLC Modem

.

The benefit of the proposed custom modem over the popular FSK PLC modem available on the market is the proposed immunity to common mode noise. Since the modem utilizes two data streams to encode the data onto the channel in a differential fashion, the benefits of differential signalling can be obtained. Below is the algorithm used to generate the DPSK modem on the DSPIC and the equation modelling the channel.

37

Figure 3.4: Transmitter Schematic of PLC Modem

. Algorithm 1 : DPSK DSP Algorithm
1: 2: 3: 4: 5: 6: 7: 8:

Let Q signal be inverse of I signal Phase modulate I signal with cos(c (t)) Phase modulate Q signal with sin(c (t)) Add I channel and Q channel together On receiving end multiply I channel with cos(c (t)) On receiving end multiply Q channel with sin(c (t)) Apply low pass filter to demodulated I and Q channels Subtract filtered I channel from Q channel

y (t) = x(t) + kn(t)

(3.1)

where y (t) represents the signal on the channel, x(t) represents the I and Q modulated signals, K represents the scaling factor and n(t) represents AWGN signal. From (3.1) a MATLAB simulation was conducted. The results showing the robustness of the modulation technique to common mode noise is shown below. As shown in Figure 3.6, Figure 3.7 and Figure 3.8, the injection of an interference signal resulted in low error rate in the recovery of the data. However for Gaussian white noise of very large magnitude, data corruption can occur. For the highly destructive impulsive, noise 38

Figure 3.5: Receiver Schematic of PLC Modem

.

Figure 3.6: QPSK Demodulation with k = 0.2

. frequency hopping has been used to shift the carrier frequency away from the impulsive noise frequency. The QPSK modem is implemented in DSP, which allows for a lower cost as no supporting circuitry is necessary for implementing the QPSK modem reducing cost of the system. The frequency synthesizer consists of a 4046 PLL with a VCO capable of operating from 100hz to 40MHz. This PLL was chosen because of its low cost and fairly simple circuit setup for FSK modulation and demodulation. To allow for frequency hopping capability one of VCO tuning resistors is swapped with a digital potentiometer MCP41100 by Microchip to 39

Figure 3.7: QPSK Demodulation with k = 1

.

Figure 3.8: QPSK Demodulation with k = 2

. give the microcontroller the ability to change the frequency of the VCO. Pictures of the modem PCB are shown in Figure 3.9 and Figure 3.10. A chart including the bill of materials and total cost for the modem is shown. As clearly seen this implementation for the PLC modem already exceeds our target cost of less than $15. Therefore we preferred to use the off the shelf PLC modem SIG60 as it meets our desired criteria. An alternative modem was also designed which utilized stereo FM SA615 instead of DPSK as an alternative to a DSP based modem due to limited processing power of the selected microcontroller.

40

Figure 3.9: PCB of PLC Receiver

.

3.3.2

Off The Shelf PLC Modem

From the total system cost of the two custom PLC modems designed in the previous section, we decided to examine off the shelf PLC solutions. We examined several PLC modem solutions that we thought would be suitable candidates for automotive PLC. From our findings one modem stood out, the SIG60 DC bus PLC modem by Yamar Electronics Ltd. The SIG60 PLC modem meet all the criteria mentioned, with a carrier frequency selectable from 1.7MHz to 13MHz, data rates from 9.6kbps to 115.2kbps, frequency hopping, noise robust modulation scheme and a price point of $7.45 USD [14]. The SIG60 PLC modem is specially designed for DC PLC and claims to be suitable for automotive applications. Previous works mentioned in Chapter 2 also show that the SIG60 modem is capable of automotive PLC. Compared to other solutions such as MAX2990 and MAX2991 by Maxim Integrated Products, which cost a combined $54.51 CDN, or the CY8CPLC10 by Cypress, which cost $10.67 CDN, the SIG60 appears to be the preferred solution based on price and previous applications. Figure 3.11 shows the block diagram of the SIG60 PLC modem. The SIG60 utilizes a special multiphase modem to overcome the noisy power lines. The

41

Figure 3.10: PCB of PLC Transmitter

. modem includes an integrated analog front end for receiver and transmitter and only requires external filters, crystal and coupling circuitry for operation. Unlike our custom designed PLC modem the SIG60 can transmit and receive over the same circuitry which reduces system cost by half. The SIG60 utilizes UART to communicate with the host microcontroller, the UART interface is also capable of LIN communication as well.

3.4

PLC System Design

With the SIG60 PLC modem chosen the next step is to design a system to control a model HVAC system over the power lines. With the help from our industry partner MCC, a test board HVAC system was provided to test reliability of the SIG60 modem over the DC power lines. The test board shown in Figure 3.12. The test board consists of brushed blowers, motorized valve, a liquid solenoid and a condenser fan. These components are found in current transit buses. The HVAC prototype will be controlled using the SIG60 PLC modem to transmit the control data over the power line to the HVAC control module. For this application the operating voltage is set by the current automotive standard of

42

Figure 3.11: Block diagram of SIG60 PLC modem [14]

. 12V DC (14+V DC alternator charge). As a result, the modem can be AC coupled to the power line using just capacitors as opposed to the highpass or bandpass filters found in AC PLC setups. Figure 3.13 shows the schematic of the PLC modem designed for the system. The DSPIC33F family microcontroller is used to handle the control information and supply the UART interface between PLC modem and the HVAC control module. The frequency of the carrier signal chosen is 5.5MHz with 6.5MHz as a secondary hopping frequency. The data rate selected was 19.2kbit/s. The reason frequencies of 5.5MHz and 6.5MHz were selected was due to the availability of the ceramic bandpass filters and the necessity for lower rate data transmission to allow for reliable communication. 19.2kbit/s is the standard data rate for the UART interface of the SIG60 modem. Since the control data doesn't require fast data rates 19.2kbit/s data rate is sufficient. Each device in the HVAC system was given a specific ID number which will be triggered through DIP switches connected to the master control module. The slave module will decode the ID number and activate the selected HVAC device correspondingly. Figure 3.14 shows the PCB of the HVAC PLC controller.

43

Figure 3.12: HVAC Test board

.

3.5

PLC HVAC Test Results

To determine which one of our PLC modem designs will be best suited for automotive PLC applications. The modems will be tested on the demo HVAC system consisting of two fans, one blower, a liquid solenoid and valve, provided by our industry partner Mobile Climate Control. The modems will send signals over 9m of cable with the transmitter connected to the battery end and receiver connected to the HVAC module power port. At the receiving end, the demodulated signals will be observed to determine what effects the power line had on the transmitted signal. The information obtained from this test will be used in conjunction with system cost, complexity and footprint to determine the best candidate for automotive PLC. Once a modem is selected it will be exposed to a reliability test where data will be repeatedly sent over a period of time to determine the error rate of the modem. The tests will be conducted in a 2003 Ford Focus ZTS and a 2011 Ford Edge SE.

44

Figure 3.13: Schematic of SIG60 PLC Modem and HVAC Controller

.

3.5.1

PLC Modem Suitability Test

In order to determine suitability as an automotive HVAC control system, the four modems we designed are tested. Table 3.2 shows the specifications of the modems we designed. The four PLC modems were tested on an automotive HVAC demonstration setup consisting of a liquid line solenoid, brushed blower, motorized valve, and condenser fans. The modems were tested while each device was switched on and off. Most of the modems except the SIG60 DC Bus modem failed to provide reliable communication when the brushed motor was switched on. Table 3.3 shows the results from each modem with the various HVAC devices running. A yes represents successful data transmission, while no represents a failed data transmission with the specified loads operating. As seen from Table 3.3, only the SIG60 DC Bus modem was able to communicate reliably with all the prescribed loads of the HVAC system. Looking back at the modem specifications it was also the cheapest option and the simplest solution. This made the SIG60 modem the most suitable solution for automotive PLC HVAC control.

45

Figure 3.14: PCB of SIG60 based HVAC Controller

.

3.5.2

SIG60 Modem Reliability Test

From the HVAC PLC control test the SIG60 DC Bus modem was selected as the most suitable PLC modem. Tests must be conducted to determine the reliability of the SIG60 PLC modem. The reliability test consists of operating the SIG60 modem with most of the HVAC demo loads operating. The SIG60 modem will be transmitting a repeated data sequence 32 times and the receiver will check the incoming packets to ensure the sent message was received without error. Any error data will be recorded and output on the receivers data port. The results from the reliability test show that with the HVAC demo system, the SIG60 modem is able to provide reliable data transmission to control the HVAC system. The next step is to test the system in a vehicle environment. The SIG60 modem was tested in a 2003 Ford Focus ZTS. Two tests were performed, the first test determined if control data could be sent over the vehicle power lines. The second test determined the data reliability over the vehicle power lines. Like in the previous test, a data sequence was repeatedly sent and decoded at the receiving end to observe the error rate. Figure 3.15 and Figure 3.16 show the 46

Table 3.2: Modem Specifications.

Modem Specifications Modulation Scheme Carrier Frequency Peak Current Supply Voltage Peak Power Consumption Data Rate Data Packaging Cost per modem Complexity Suitability

FSK 4046 FSK 1MHz10MHz 500mA 12V 6W 2kbps Binary bits $15.00 Medium 5/10

DPSK 4046 DPSK 1MHz-3MHz 500mA 12V 6W 10bps Manchester encoded $15.00 Medium 2/10

Stereo FM FM 1MHz-5MHz 150mA 12V 1.8W 2kbps Binary bits $20.00 High 4/10

SIG60 PSK 1.7MHz-13MHz 50mA 3.3V 165mW 19.2kbps UART-LIN $8.00 Low 10/10

Table 3.3: Modem Results with Demo HVAC System.

Device Brushed Blower Liquid Line Solenoid Motorized Valve Condenser Fan

FSK 4046 No Yes Yes Yes

DPSK 4046 No Yes Yes No

Stereo FM No Yes Yes No

SIG60 Yes Yes Yes Yes

test in vehicle test setup. The modems reliability with different operation states of the Ford Focus as well as different ignition states is shown in Figure 3.17 The Ford Focus outfitted with the SIG60 PLC modem shows that it is capable of sending signals reliably over the DC power line. When the vehicle engine is off, the modem is capable of producing fewer errors. This is likely due to the absence of noise being generated by the alternator. Out of 32 packets sent the maximum error detected was 3, which relates to 9.38% error rate. This means data transmission is fairly reliable for non critical vehicle application. 47

Figure 3.15: External PLC modem connection transmitter side

. When the engine is on, out of the 32 packets only 4 failed giving a 12.5% error rate. It should be noted that in both cases the largest amount of errors occurred when the HVAC system was operating. This can be explained due to the close proximity of the Focuses power port to the fans and motors of the HVAC system. For devices such as lights and radio, the error rate was very small. This could be related to the fact that these components are further away from the power port and also because the produce lower amounts of noise. The power windows were also found to be a high noise source when the motor was on. This can be explained by the noise that is generated by the operation of the window motors. However because of the longer distance from the power port, the effect is lower. While the tests shown in Figure 3.17, hold true for the 2003 Ford Focus ZTS sedan on that particular day, this does not mean that other vehicles will exhibit the same characteristics. The next test was conducted on a 2011 Ford Edge SE crossover, fitted with the SIG60 PLC modem. Like with the Ford Focus the transmitter was connected to the Edges battery and the receiver connected to an available power port in the vehicle. In the case of the Edge it possess three power ports located: in the centre console, behind the centre console and in 48

Figure 3.16: Internal PLC modem connection receiver side

. the tailgate respectively. For this test the receiver was tested at the power port behind the centre console and in the tailgate. This provides a greater incite on the performance of the SIG60 PLC modem as different locations are being tested and compared. Therefore effects of distance and device localization affects the results greatly. Figure 3.18 shows the setup for the transmitter of the PLC system. The SIG60 modem is connected to the vehicles battery. Figure 3.19 shows the receiver connected to the power port in the rear passenger cabin of the Edge. Figure 3.20 shows the receiver connected to the power port in the tailgate of the Edge.

49

Figure 3.17: Ford Focus PLC In Vehicle Test different subsystems operating 32 packets

. Like the tests with the Ford Focus, the reliability of the SIG60 was measured by sending 32 bits and checking to see if the correct output is picked up at the receiving end. Unlike with the Focus test, two tests were performed: one in the cabin and the other in the tailgate. Figure 3.21 shows the test results for Edge with the receiver connected to the power port in the rear cabin. Figure 3.22 shows the results for the Edge with the receiver connected to the power port in the tailgate. The results from Figure 3.21 and Figure 3.22 show the PLC solution with the SIG60 modem can communicate over the power lines of a vehicle. The results show that the performance of the modem is worse compared to that of the Ford Focus. With the engine off for the cabin test, the error rate is fairly low like it was with the Focus. The largest amount of errors occurs with the HVAC system running with 5 failed packets or 15.63% error rate. When the engine is on, the error rate increases substantially to a maximum of 15 or 46.88%, occurring when the HVAC system is running. This could be caused by the power port being located close to a blower which could be generating too much noise locally and increasing the error rate. From Figure 3.22 the results show a much more reliable connection compared to that of the cabin. The results when the engine is off show an error rate of 1 or 3.13% occurring when the HVAC system is running. When the engine is on the error rate jumps up to 2 or 6.25% occurring when the HVAC system is running and when the power windows

50

Figure 3.18: Ford Edge with PLC transmitter connected

. are used. Compared to the previous test in the cabin the lower error rate could be a result of the lack of a blower being located near the power port. This was also seen in the Focus test as well because in the Focus the power port was also located near the HVAC blowers and system. The reason the Focus had a better error rate could be because of the shorter transmission distance. Since the power port being located on the dashboard v.s. being located in the rear passenger cabin. Also the noise being generated by the alternator could be lower because of its smaller size. Lastly the Focus has fewer electrical systems compared to the Edge meaning lower number of noise generators are attached to the power lines in the Focus. From the tests, it is clear that no two vehicles have the same characteristics on their power lines. Many factors affect the power line characteristics and can result in varying performance of the PLC modem. Even with the same vehicle factors such as: the condition of the vehicle, frequency and quality of maintenance, driving characteristics and climate drastically affect power line characteristics. The test results show there are several characteristics which will affect the PLC modem regardless of differences in vehicle conditions. These characteristics are: transmission line length, proximity to noise sources such as HVAC and power motors, 51

Figure 3.19: Ford Edge with PLC receiver connected in cabin

. and attenuation by low impedance sources such as the car battery. As was discovered from the vehicle PLC reliability test, data communication is reliable enough for control of none critical systems such as HVAC systems. However for more critical systems which require very reliable data transfer, the SIG60 modem may not be able to provide the expected reliability.

52

Figure 3.20: Ford Edge with PLC receiver connected in tailgate

.

Figure 3.21: Ford Edge with PLC receiver connected in cabin 32 packets

.

Figure 3.22: Ford Edge with PLC receiver connected in tailgate 32 packets

. 53

Chapter 4 Impedance Matching
In the previous Chapter the results of the PLC system experiments were shown. From the results it was determined that the proposed PLC HVAC control system can possibly control a vehicles HVAC system. However it could not provide desired reliability in a vehicle environment for critical data communication. While the minor errors in the data transmission would not be enough to disrupt an HVAC system, for a system requiring very reliable data transmission such as drive-by-wire this solution is not acceptable. Therefore, improving reliability of PLC modems is extremely important. In Chapter 2 it was mentioned that PLC modems faced significant challenges with impedance mismatches. These impedance mismatches result in poor power transfer from transmitter to the channel which cause attenuation, reflections, distortion of the signal and an increase in power consumption [44, 46]. In this chapter, we will investigate impedance matching for PLC to determine what improvements this solution offers.

4.1

Impedance Matching Topology Comparison

While typical PLC modems neglect utilizing impedance matching techniques due to the complexities of constantly varying channel impedance. We decided to investigate if a cheap and effective impedance matching network could be developed to improve performance of our PLC solution. In order to allow for proper impedance matching an adaptive matching network must be designed. There have been several proposed matching networks utilizing 54

tapped transformers, capacitor arrays and active inductors. most have been designed for AC power networks. However the principles should be applicable to DC power networks as well. A study of the proposed matching networks performance, complexity and cost was conducted in [39], Table 4.1 shows the results of the study:
Table 4.1: Impedance Matching Network Comparison. [39]

Network Topology Fixed turn ratio impedance matching transformer with variable secondary impedance Variable turn ratio impedance matching transformer with variable secondary impedance Capacitive bank Tap changing coupling transformer

Performance Bad [38.5%]

Cost High

Complexity Medium

Good [59.89%]

High

High

Very Good [64%] Very Good [63.38%]

Medium Low

High Low

From the study conducted in [39] it shows that the simplest, cheapest and most effective option is using a tap changing coupling transformer. While this may be the cheapest topology out of those which were tested in [39], there has been some research on transformerless impedance matching networks using active inductors. However none have been implemented and there has been some issues with lack of current being provided by the active inductor elements [41, 44]. The benefit of using active inductors is that they can be easily implemented in an integrated circuit environment, which means no external components would be needed for impedance matching [41]. To illustrate the simplicity of the implementation of an active inductor in CMOS technology, the schematic of the active inductor is shown in Figure 4.1 In order to determine if this design is a practical solution without a transformer, the well established active inductor circuit shown in Figure 4.2 is used for testing. 55

Figure 4.1: Schematic of an active inductor in CMOS integrated circuits[41]

.

Figure 4.2: Schematic of general impedance converter[39]

. The equation to determine Zin is given as, Z1 Z3 Z5 Z2 Z4

Zin =

(4.1)

where Zin is the input impedance of the active inductor and Z1 to Z5 are the impedance values of the supporting circuit. In order to make Zin inductive either Z2 or Z4 must be replaced by a capacitor. To make the inductance variable, any of the other impedances can be replaced with a potentiometer. The chosen topology of the matching network will be an L match network as this will allow for lower components to be used and simplicity of implementation. The schematic of the proposed L-match network and the active inductor is shown in Figure 4.3 From here the variable active inductor will be created by replacing Z4 with a capacitor and 56

Figure 4.3: Schematic of proposed L match network

. replacing Z2 and Z3 potentiometers. This will allow for a wide tuning range for inductance values ranging from the nH to mH range depending on resistor values chosen. The variable capacitor will be realized by using a capacitor bank, allowing for greater tuning range of the matching network. The chosen structure with the inductors connected to ground and the capacitor floating is necessary due to the GIC circuit being grounded.

Figure 4.4: Circuit schematic of proposed impedance matching network

. Figure 4.4 is the matching network schematic. The circuit shown in Figure 4.3 is realized. The op amps creating the active inductor is the OPA2677. The reason this op amp was selected was because it possesses a high gain bandwidth product of 2GHz and a high output current of 500mA, which is required for a transformerless design. In order to achieve 57

a variable active inductor, two resistors in the active inductor circuit are replaced with a digital potentiometers. The potentiometers chosen are microchip MCP41100 and MCP41050, which have high bandwidth of 145MHz and 280MHz respectively. The capacitor bank consists of four capacitors of different values 1nF, 500pF, 100pF and 50pF. These values were selected because a large number of possible matching situations have capacitors which are within the range of these four capacitors. Different values of capacitors can be selected by activating the switches of U5 and U6 which are TS12A44515 by Texas Instruments. If more resolution is desired, more capacitors can be added to the capacitor bank as well as changing out the analog switches for one with more throws. The control signals for the digital potentiometer and the micro switches are controlled by a microcontroller. In this case it would be DSPIC33FJ64GP802. Any microcontroller with at least 9 open IO ports and an SPI interface for the digital potentiometer may be used. In order to achieve an adaptive matching network a method of sensing the impedance and relaying the changes to the microcontroller must be implemented. The method we decided to use is sensing reflections. The circuit is shown in Figure 4.5.

Figure 4.5: Schematic for reflection meter

. The reason that we chose to sense reflections is that this method requires little resource from the microcontroller. Only an ADC and software to calculate reflection strength, as well as control the micro switches and digital potentiometer is required. The circuit operates by sensing the signal level that is driven onto the channel or coming from the channel into the PLC modem. The signal passes through an amplifier and gets amplified by a factor of 58

3. It is then passed through a diode which rectifies the signal. It is then smoothed into a DC voltage and this DC voltage is passed to the ADC of the microcontroller. Ideally if the voltage being sensed is large then the power transfer is optimal and the matching network can lock in the values of the components. If the voltage is low then the component values are swept until the DC voltage is within the threshold voltage of 1.5Vpp .

4.2

Active Inductor Noise Analysis

A great consideration with the proposed active inductor network is its noise performance. If the active inductor generates too much noise the design can contaminate the incoming signal and reduce the reliability of the system. In order to determine the effects of the active inductor on the system, the noise model needs to be derived. From Figure 4.2 the noise model can be derived and is shown in Figure 4.6:

Figure 4.6: Schematic of the proposed L match network

. The opa2677 opamp is a current feedback opamp which means the traditional noise model of the voltage feedback opamps cannot be used. However the datasheet of the opa2677 [47] 59

provides the equations and derivation of the noise model for the opa2677 opamp. The resistors R2 and R3 are digital potentiometers mcp41100 and mcp41050 by microchip and therefore have slightly different noise characteristics than the standard resistor model. The noise characteristics of the potentiometers are given in there the datasheet from the manufacturer. The key paramaters such as input noise, input noise current of opamp are given as follows:

pA pA nV in = 24  ip = 16  ei = 2  Hz Hz Hz R2 = 100k  R3 = 1k  R4 = 1k  where ei is input noise voltage, in is inverting current noise and ip is non inverting current noise. From the opa2677 datasheet the equation for the input referred spot noise Ei can be expressed as [47]: Ei =
2 e2 i + (ip R4 ) + 4KT R4 +

4KT R2 in R2 2 +( ) NG NG

(4.2)

where NG is noise gain given by NG = 1 + R2 /R3 and 4KT is 1.6 × 10-20 J .
nV Plugging in the values the input noise is calculated as Ei = 29.48  . The output noise Hz

voltage E0 can be shown as [47]: E0 =
2 2 e2 i + (ip R4 ) + 4KT R4 + 4KT R2 NG + (in R2 ) .

(4.3)

µV Plugging in the values the output noise is calculated as EO = 2.43  . From the noise Hz

values calculated from (4.2) and (4.3) the noise values at the carrier frequency of the SIG60 of 5.5MHz is given by: 29.48nV Ei =  = 6.19µVr ms 5.5M Hz 2.43µV E0 =  = 5.7mVr ms 5.5M Hz 60

(4.4)

(4.5)

From (4.4) the noise generated by the active inductor circuit using the opa2677 opamp is found to be 6.19µVrms . From (4.5) the noise generated on the output by the active inductor circuit is found to be 5.7mVrms . With these noise values it can be determined that the noise at the input of the active inductor is below typical received signal levels of 100µV and will not corrupt the received signal. At the output the noise generated by the active inductor is much greater at 5.7mVrms or 16.12mVpp . The noise can drown out the small 100µV signals, not to mention that the noise also comes within the sensitivity of the SIG60 PLC modem. With this in mind, it is clear that this opamp in the active inductor configuration would be too noisy to use at the receiving end. However at the transmitting end, where the signal levels are much larger at 1.4Vpp , this active inductor can be used. Despite not being used at the receiving side, the matching network offers the benefits of reduced attenuation of transmitted signal and lower power consumption.

4.3

Simulation Results

With the matching topology proposed, the matching network was assembled in Multisim and several tests were conducted to determine the viability of the circuits. The first test conducted was to determine the characteristics and behaviour of the active inductor. Figure 4.7 shows the test circuit which will be simulated in multisim.

Figure 4.7: simulated inductor test circuit

. Figure 4.8 and Figure 4.9 show the frequency response of the active inductor with different 61

inductor values selected by varying the potentiometer R2 .

Figure 4.8: Frequency Response of Simulated Inductor with R2 =9.09k

.

Figure 4.9: Frequency Response of Simulated Inductor with R2 =1k

. As expected, the frequency response exhibits the expected form of an inductor. With low impedance shown at low frequencies and high impedance shown at high frequencies. Now that the behaviour of the suggested active inductor topology was verified, the next step was to test the active inductor in an actual impedance matching scenario. In order to conduct impedance matching tests, calculations were conducted to determine the component values needed to perform the match. The impedance matching component values were determined through use of a calculator for L-match networks [45]. Other techniques to determine matching component values such as hand calculations or smith charts also work. The steps are listed below along with any necessary calculations: 1. Input values for load and source impedance as well as carrier frequency into the calcu62

lator provided in [45]. 2. Replace Zin with L, Z1 , Z3 and Z5 with resistors of 1k Z2 with a potentiometer and Z4 with a capacitor of 100pF and rearrange (4.1) and solve for R2 . L= R2 = R1 R3 R5 C R2 R1 R3 R5 C L (4.6) (4.7)

3. Select the L-match network with the capacitor floating and inductor grounded and substitute L value into (4.7). 4. Adjust the matching capacitor value to that from the calculator and adjust the potentiometer R2 to the value calculated in step 3. 5. Run simulation The first test of the circuit was to determine if a match could be made between the signal generators 150 output impedance to a real load impedance of 10. By utilizing the steps and calculations mentioned earlier the necessary values for the potentiometer were calculated as Rpot =86.2k and the matching capacitor C2 =773pF. The circuit test bench is shown in Figure 4.10. The results before and after applying the matching network are shown in Figure 4.11 and Figure 4.12 respectively. As can be seen from Figure 4.11 and Figure 4.12, the matching network provided a near perfect match and improved power delivery to the load. The next test focused on a real situation where a complex impedance is present. In most cases the complex impedance found on power networks is inductive, due to motors and other inductive loads connected to the power line. Therefore the next simulation will be to match the 150 signal generator impedance to a 700+j50 (700+1.14µH) load impedance. Following the steps and calculations mentioned earlier in the section the value for the potentiometer Rpot =9.09k and C2 =100pF. The circuit test bench is shown in Figure 4.13. The results before and after adding the matching network are shown in Figure 4.14 and Figure 4.15 respectively. 63

Figure 4.10: The circuit test schematic in Multisim for real load impedance match

.

Figure 4.11: Transient response before adding matching network

. As can be seen from the results presented from the simulations of the proposed matching network, it is possible to create an adaptive impedance matching network without the use of transformers. The simulations provided information which highlighted key characteristics needed for a working physical design. It also highlighted the issue of GBWP of the Opamps, if the GBWP is too low compared to the carrier signal then instability and failed inductor simulation occur. From the tests conducted at 5.5MHz it was determined that a minimum GBWP of 2GHz is necessary to provide reliable operation. From the insights picked up from the simulations, design criteria has been developed and will be discussed in the next section.

64

Figure 4.12: Transient response after adding matching network

.

4.4

Matching Results with Automotive Loads

The simulation results from the previous section show that the proposed matching network can match a source impedance to a load impedance with both real and complex components. The next tests was to match the output impedance of a signal generator 150 to various automotive load impedances such as car battery and various lights. In the following tests the power waveform was examined before and after applying the matching network. From the observed power levels the increase in power transfer that the matching network provided is calculated. The impedance values of the components were obtained through the measurements in [20]. The impedance of the components were determined for a frequency of 5.5MHz which is one of the centre frequencies of the SIG60 PLC modem.
Table 4.2: Automotive Impedance Matching Results.

Device

State

Impedance

Car Battery Headlights Headlights Rear lights Rear Lights

N/A Off On Off On

1+j6 0.32+j5.97 2.74+j5.97 6.59+j9.3 25.2+j9.3

Power Transfer Before 42.93µW 16.17µW 122.7µW 260µW 805µW

Power Transfer After 302µW 122.6µW 734µW 1.27mW 1.68mW

Percent Increase 603.47% 658.19% 498.21% 388.46% 108.7%

From Table 4.2 it is clear that the matching network provides an improvement to the 65

Figure 4.13: The circuit test schematic in Multisim for complex load impedance match

. signal generators power transfer. For the low impedance loads such as the car battery and the headlights off, it shows that there is a very large improvement in power transfer. However for the larger impedances such as the rear lights, the improvement in power transfer is quite small, being as low as 2.08. This can be explained by the fact that the impedance of the load is becoming closer to that of the signal generator, which means the power transfer will be greater therefore the improvements will be lower. While Table 4.2 results show the power transfer of specific automotive loads Impedances on the automotive power line can vary as multiple devices are connected, this impedance can vary from near 0 to 1k [20, 26]. Therefore the impedance matching network was tested over this range as well as varying imaginary impedances as well. The results are shown in Figure 4.16, Figure 4.17 and Figure 4.18. Here both the real and imaginary component of the impedance are varied and the power transfer before and after the matching network. Figure 4.16 shows the increase in power transfer after the matching network was added for varying real impedances. As expected the major improvements in power transfer is seen away from the 150 impedance. The lower power level seen with the lower impedance value is because of the op amp current supply limit and output impedance. 66

Figure 4.14: Transient response before adding matching network

.

Figure 4.15: Transient response after adding matching network

. Figure 4.17 shows the increase in power transfer after the matching network was added for varying imaginary component and fixed 20 real impedance. As expected major improvement in power transfer is seen with the addition of the matching network. As the impedance gets larger it results in a harder time for the matching network to match the impedance because it is going outside the tuning range. Therefore a proper match is not established and lower power transfer is seen. While the larger imaginary impedances can occur in automotive power line networks it is unlikely and the imaginary component is generally much lower [20, 26]. Figure 4.18 shows the increase in power transfer after the matching network was added for varying imaginary component and fixed 300 real impedance. As expected major improvement was observed with impedances around j0. This is because the impedance is closest to the 150 signal generator impedance. Compared to the 20 tests the results are

67

Figure 4.16: Variable real impedance component from 0 to 1k

.

Figure 4.17: Variable imaginary component with fixed 20 real impedance

. much closer to the impedance before the matching network was added. This is because the impedance is larger and doesn't load down the op amps compared to the lower impedance found in the previous test. This also produces a much more stable inductor simulation, because of the lack of load on the op amp.

4.5

Conclusions for the Proposed Matching Network

From the results shown in Section 5.3 and 5.4 the proposed matching network is capable of providing matches given ideal conditions. With the active inductor using the general impedance converter, a transformerless design was created using the current feedback opamp opa2677 which has high gain bandwidth product and high output current supply. While this 68

Figure 4.18: Variable imaginary component with fixed 300 real impedance

. circuit shows promise in simulations for automotive loads, in real world tests the circuit proved to be unstable at the higher frequency of 5.5MHz of the SIG60. Another issue with this design is the footprint, as several supporting components are needed to realize the active inductor and the matching network. For a system which requires a cheap and compact solution, this matching network will pose an issue. However as active inductors and capacitor bank can be easily realized in CMOS technology, a design similar to this integrated into the PLC modem IC would be ideal. Last issue is cost, as external supporting components and extra board space is necessary for the matching network. As is this matching network can be expected to cost about $10 in addition to the PLC modem. For our HVAC PLC control system this matching network doesn't provide enough benefit in both performance and cost perspective to warrant use in our design, however there is significant potential if this design is integrated into the PLC modem IC.

69

Chapter 5 Conclusion
The work in this thesis has provided valuable information and promising results with regards to implementing PLC as a vehicle communication network. PLC is suggested as a popular solution for solving the issue of over encumbered and bulky vehicle wire harnesses, as the network infrastructure is already in place. However the question of reliability has prevented out right adoption of PLC solutions, as some systems such as steering, braking and engine control require very reliable data transmission. The work in this thesis has shown that current PLC technology provides moderate reliability, and could possibly be adopted for control of non critical systems such as HVAC.

5.1

Review of Purpose

The purpose of this thesis was to examine the feasibility of adapting an automotive HVAC system to run on a PLC network over vehicle power lines. This thesis research focused on three areas: feasibility, reliability and future improvements. As PLC hasn't been implemented in a majority of consumer vehicles, these questions needed to be answered. To answer the question of feasibility, current research implementations were examined such as the works done by Teemu Tuoriniemi [15] and Xiaoguang Huang [16] as well as channel and noise characteristics in [23, 22, 28, 27]. Here a PLC modem solution was developed at both circuit level and system level using the SIG60 DC PLC modem. The price of developing the modem solution was also examined. To answer the question of reliability tests with a 70

model HVAC vehicle unit over a DC power line were conducted to determine if control was possible. Tests were then conducted with two vehicles: a 2003 Ford Focus ZTC and a 2011 Ford Edge SE where the modems reliability was examined. The results of the reliability test indicated that communication could be established with moderate reliability. To improve reliability the solution of impedance matching was investigated.

5.2

HVAC PLC Control Summary

From the results shown in the PLC test section, it was determined that control of an HVAC system was possible, as all the modules of the model HVAC system were controlled reliably. In order to determine true functionality of the PLC modem in vehicle applications, an in vehicle test was conducted. With the Ford Focus and the Ford Edge, the modem showed that it was capable of transmitting data over the vehicles power lines during varying states of vehicle operation. The reliability with the ford focus shows an error rate of 12.5% maximum, when the HVAC system was operating and the car engine running. While the Edge had a much higher error rate of 46.88% occurring with the engine and HVAC system running. While these error rates are high specifically in the Edges case, the error rates with lighter loads such as lights, radio and windshield wipers were significantly lower averaging around 2.86% error rate. While error rates are fairly low for most applications especially when the engine is off, higher reliability is required to fully establish PLC as a suitable vehicle communication network. Improvements were required to help improve reliability of the PLC system which led to the second half of the research of this thesis.

5.3

PLC Impedance Matching Summary

From the research conducted for PLC impedance matching, it was determined that the benefits of impedance matching were not enough to warrant the extra cost associated with the supporting circuit. From the results, the proposed matching network utilized active inductors in the form of a GIC and a capacitor bank. The circuit demonstrated that it was capable of matching the source impedance of the signal generator to various automotive load 71

impedances such as the battery, and different lights. The circuit was also built up and tested. The circuit was unstable at the carrier frequency of the PLC transceiver. Due to this fact, the circuit was not tested on the power lines. While this design did not provide decent real world results, the simulated results showed promise. The design could be adapted as an IC and possibly be integrated into the PLC modem chip. This would lower the cost and bulk of the supporting circuitry of the matching network and make PLC impedance matching a viable solution. There is still plenty of research that needs to be done before a universal and feasible solution can be developed.

5.4
5.4.1

Future Work
Automotive PLC

There is still plenty of work that needs to be done before PLC can become a viable vehicle communication network. In order to improve reliability of the PLC communication system, a more robust coding scheme can be implemented. Since the SIG60 modem only transfers bits and doesn't provide any message level encoding. Secondly the designed PLC control system must undergo automotive standard checks such as SAE J1113, which ensures the designed modem doesn't interfere or is disrupted by other automotive electrical systems. Lastly the designed modem must be integrated in a test vehicle and put under extended field tests. Aside from the modem tests there is more work that can be done to improve the modems performance, such as impedance matching.

5.4.2

PLC Impedance Matching

Impedance matching for PLC has generally been ignored in favour of a simple coupling network. The results of this research show that a transformerless matching network can be realized with further work and refinement in circuit implementation. The next step of research for PLC impedance matching is to develop this proposed matching network as an integrated circuit. By integrating the design the cost of supporting circuitry, PCB size and performance can be improved. Secondly in-depth research can be conducted on adaptive 72

impedance matching and impedance detection. As current techniques require significant processing power or are not as reliable as those with more complicated designs. Work can also be done to realize a floating active inductor, as floating active inductors would allow for a larger number of matching network configurations.

5.5

Concluding Remarks

The work in this thesis has shown that PLC communication over vehicle power lines is possible and that the designed PLC HVAC control module is capable of controlling HVAC components found in vehicles. While communication was possible, there is still a lot of work that needs to be done with regards to improving reliability, as well as testing before it can be implemented in vehicles. While impedance matching can be used to improve performance and reliability of the PLC modem, a discrete solution is not optimal. As cost and PCB area is not practical, therefore an integrated solution must be developed. With the results of this research in mind, it is believed that PLC does have a future as a vehicular communication network.

73

Bibliography
[1] S.Panchadcharam, G.A.Taylor, I.Pisica and M.R.Irving, "Modeling and analysis of noise in power line communication for smart metering" , Power and Energy Society General Meeting, July 2012, Page(s): 1-8. [2] C.H. Liu, E. Wade and H.H. Asada, "Reduced-cable smart motors using DC power line communication" , IEEE International Conference on Robotics and Automation, 2001, Page(s):3831-3838. [3] H.C. Ferreira, H.M. Grove, O. Hooijen and A.J Han Vinck, "Power line communication: an overview" , IEEE AFRICON 4th, Volume:2, Sept 1996, Page(s):558-563. [4] M.S. Yousuf and M. El-Shafei, "Power line communication: an overview - part 1" , International Conference on Innovations in Information Technology, Sept 2007, Page(s):218222. [5] M.H.Shwehdi and A.Z.Khan, "A power line data communication interface using spread spectrum technology in home automation" , IEEE Transactions on Power Delivery, Volume: 11, Issue: 3, July 2012, Page(s): 1232-1237. [6] F. Benzi, T. Facchinetti, T. Nolte and L. Almeida, "Towards the powerline alternative in automotive applications" ,IEEE International Workshop on Factory Communication Systems, May 2008, Page(s): 259-262. [7] Clemson University Vehicular Electronics Laboratory "Automotive data communication buses", Internet:http://www.cvel.clemson.edu/auto/auto buses01.html. 74

[8] "Local interconnect network", http://en.wikipedia.org/wiki/Local Interconnect Network. [9] "CAN bus", http://en.wikipedia.org/wiki/CAN bus Data frame. [10] National Instruments, "FlexRay automotive communication bus overview",

Internet:http://www.ni.com/white-paper/3352/en/, Aug 21, 2009. [11] Maxim Integrated, "Power line communication(PLC) integrated analog front-end transceiver" , MAX2991 Datasheet, 2010. [12] E.R.Wade, "DC powerline communication system using a transmission line transformer for high degree of freedom applications" Masters Thesis, Massachusetts Institute of Technology, Boston, USA, 2004. [13] Y.Maryanka, "Using power line communication for harness reduction in automotive" ,Yamar Electronics Ltd, 2011, Internet:http://yamar.com/articles/Using-power-linecommunication-to-reduce-harness-in-automotive.pdf. [14] Yamar Electronics Ltd, "SIG60 UART over power line, for AC/DC multiplex network" , SIG60 Datasheet, Mar 2009, Revised:Feb 2013. [15] T.Tuoriniemi, "Automotive power line communication: A new wiring topology for powertrain sensor network" Masters Thesis, KTH School of Electrical Engineering, Stockholm, Sweden, 2013. [16] X. Huang, "Power Line Communication for Automotive Applications" Masters Thesis, Ryerson, Toronto, Canada, 2012. [17] M. Strobl, T. Waas, A. Rath, N. Balbierer, S. Moehne, M. Kucera and A. Schingale, "Using Ethernet over power line communication in automotive networks" , 10th International Workshop on Intelligent Solutions in Embedded Systems, 2012, Page(s):39-44. [18] Q.Li, J.She and Z.Feng, "Adaptive impedance matching in power line communication" , International Conference on Microwave and Millimeter Wave Technology, 2004, Page(s):887-890. 75

[19] W.H Choi and C.Y.Park, "A simple line coupler with adaptive impedance matching for power line communication" , IEEE International Symposium on Power Line Communications and Its Applications, Mar 2007, Page(s):187-191. [20] N. Taherinejad, R. Rosales, S. Mirabbasi and L. Lampe, "A Study on access impedance for vehicular power line communication" , IEEE Symposium on Power Line Communications and Its Applications, 2011, Page(s):440-445. [21] M.Aragon, M.Salinas, P.J.Riu and F.Silva, "Power line impedance characterization of automotive loads at the power line communication frequency range" ,EMC Europe 2010, 9th International Symposium on EMC joint with 20th International Wroclaw Symposium on EMC, Wroclaw, 2010, Page(s):273-277. [22] Y.Yabuuchi, D.Umehara, M.Morikura, T.Hisada, S.Ishiko and S.Horihata, "Measurement and anaylsis of impulsive noise on in-vehicle power lines" ,International Symposium on Power Line Communications and Its Applications, Rio de Janeiro, 2010, Page(s):325-330. [23] V.Degardin, M.Lienard, P.Degauque, E.Simon and P.Laly, "Impulsive Noise Characterization of In-Vehicle Power Line" ,IEEE Transactions on Electromagnetic Compatibility, Volume:50, Issue:4, Nov 2010, Page(s):861-868. [24] P.A. Janse Van Rensburg and Hendrik C. Ferreira, "Automotive power-line communication: Favourable Topology for Future Automotive Electronic Trends" , 7th International Symposium on Power-Line Communications and Its Applications, March 2003, Page(s): 103-108. [25] P. Jankowiak, " Adapting ST power line modem evaluation boards to communicate over a DC bus, STMicroelectronics, August 2012. [26] M. Mohammadi, L. Lampe, M. Lok, S. Mirabbasi, M. Mirvakili, R. Rosales and P. van Veen, "Measurement study and transmission for in-vehicle power line communication" 76

, IEEE International Symposium on Power Line Communications and Its Applications, 2009, Page(s): 73-78. [27] M. Lienard, M.O. Carrion, V. Degardin and P. Degauque, "Modeling and analysis of in-vehicle power line communication channels" , IEEE Transactions on Vehicular Technology, Volume: 57, Issue: 2, March 2008, Page(s):670-679. [28] I.S. Stievano, F.G. Canavero and V. Dafinescu, "Power line communication channel modeling for in-vehicle applications" , IEEE International Instrumentation and Measurement Technology Conference, May 2012, Page(s): 376-379. [29] "42-volt electrical system", http://en.wikipedia.org/wiki/42-volt electrical system, [30] M. Allen, "Whatever happened to the 42-volt car?," Inter-

net:http://www.popularmechanics.com/cars/news/4226979, Oct 1, 2009 [Jan 13, 2014]. [31] "Starting System Tests", http://www.linnbenton.edu/auto/fall/electric/start test.pdf. [32] Stoneridge, "Wire harnesses", Internet:http://www.stoneridge.com/products/wireharness/. [33] Tessco, "Automotive wire and wiring guide from Tessco", Inter-

net:http://www.tessco.com/yts/industry/products/itm/automotive/get wired.html. [34] Toyota Motor Corporation, "High-voltage battery", , Toyota Hybrid System - course 071, [35] Ford Motor Company, "Ford Fusion/ Mercury Milan hybrid: High voltage traction battery depowering and dismantling", Feb, 2009. [36] Macquarie University Faculty of Science, "Amplitude-shift keying (ASK) modulation", Internet:http://engineering.mq.edu.au/ cl/files pdf/elec321/lect mask.pdf.

77

[37] Universiti Electronics

Sains

Malaysia

School "Digital

of

Electrical

and Inter-

Engineering,

Modulation",

net:http://ee.eng.usm.my/eeacad/mandeep/EEE436/CHAPTER2.pdf. [38] G.M.Miller, J.S.Beasley,J.K.Vasek. "Modern Electronic Communication". Toronto, On: Prentice-Hall, 2005. [39] S.Despande, I.V.Prasanna and S.K. Panda, "An efficient impedance matching technique for improving narrowband power line communication in residential smart grids" , International Journal of Advanced Research in Electrical, Electronics and Instrumentation Engineering, Volume: 2, Issue: 7, July 2013, Page(s):3206-3213. [40] S.Despande, I.V.Prasanna and S.K. Panda, "An adaptive impedance matching technique for narrowband power line commuinication in residential smart grids" , International Journal of Engineering Research and Technology, Volume: 2, Issue: 9, Sept 2013, Page(s):157-161. [41] N. Taherinejad, R.Rosales, S.Mirabbasi and L.Lampe, "On the design of impedance matching circuits for vehicular power line communication systems" , International Symposium on Power Line Communications and its Applications, 2012, Page(s):322-327. [42] "Maximum power transfer theorem", http://en.wikipedia.org/wiki/Maximum power transfer theorem, [43] "Heating and Air Conditioning: Auto Systems Repair" http://repairpal.com/heating-ac, [44] Y.Sun and G.A.J. Amaratunga, "High-current adaptive impedance matching in narrowband power-line communication systems" ,IEEE International Symposium on Power Line Communications and Its Applications (ISPLC) , April 2011, Page(s):329-334. [45] J.Wetherell, "Impedance matching network designer"

,http://home.sandiego.edu/ ekim/e194rfs01/jwmatcher/matcher2.html,

78

[46] R. Araneo, S. Celozzi and G. Lovat, "Design of impedance matching couplers for power line communication" , IEEE International Symposium Electromagnetic Compatibility, 2009, Page(s):64-69. [47] "opa2677 datasheet" http://www.ti.com/lit/ds/sbos126i/sbos126i.pdf,

[48] "MCP411xxx/MCP412xxx datasheet" http://ww1.microchip.com/downloads/en/DeviceDoc/11195c.p [49] C.Y.Park, K.H.Jung and W.H Choi, "Coupling circuitary for impedance adaptation in power line communication using vcgic" , IEEE International Symposium on Power Line Communications and Its Applications, Apr 2008, Page(s):293-298. [50] P.Nisbet, M.He and L.Zhao, "Transformerless impedance matching network for automotive power line communication" , Journal of Electrical and Electronics Engineering Research, Volume: 6, Issue: 2, 2014, Page(s):TBD.

79

Appendix A Abbreviation List
AC ACM ADC AWGN CAN CUV DC DIP DSP FFT GBWP GIC HVAC LIN NRZ OFDM PCB PLC PLL PWM QPSK SAE SS-CDMA TDMA UART Alternating Current After Treatment Control Module Analog to Digital Converter Additive White Gaussian Noise Controller Area Network Crossover Utility Vehicle Direct Current Dual In-line Package Digital Signal Processing Fast Fourier Transform Gain Bandwidth Product General Impedance Converter Heating Ventilation and Air Conditioning Local Interconnect Network Non-Return to Zero Orthogonal Frequency Division Multiplexing Printed Circuit Board Power Line Communication Phase Locked Loop Pulse Width Modulation Quadrature Phase Shift Keying Society of Automotive Engineers Spread Spectrum with Code Division Multiple Access Time Division Multiple Access Universal Asynchronous Receiver/ Transmitter

80


