THE DEVELOPMENT OF A GEO-REFERENCING SYSTEM FOR MACHINE CONTROLLED CONSTRUCTION EQUIPMENT

by

Nicholas Muth Master of Science, Photogrammetry with Remote Sensing, University College London, London, England, 2004 Bachelor of Engineering, Civil Engineering, Ryerson University, Toronto, Canada, 2003

A dissertation presented to Ryerson University in partial fulfillment of the requirements for the degree of Doctor of Philosophy in the Program of Civil Engineering

Toronto, Ontario, Canada, 2014 © Nicholas Muth 2014

Author's Declaration

I hereby declare that I am the sole author of this dissertation. This is a true copy of the dissertation, including any required final revisions, as accepted by my examiners.

I authorize Ryerson University to lend this dissertation to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this dissertation by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

I understand that my dissertation may be made electronically available to the public.

ii

Abstract

THE DEVELOPMENT OF A GEO-REFERENCING SYSTEM FOR MACHINE CONTROLLED CONSTRUCTION EQUIPMENT Nicholas Muth Doctor of Philosophy, 2014 Department of Civil Engineering Ryerson University

Machine controlled construction equipment (MCE) continues to garner support from the construction industry due to shortages of skilled labor, constant technological advances and the importance of construction to the overall economy. MCE requires reliable, realtime geo-referencing of the equipment end-effector. However, MCE research continues to focus on relative positioning for control system design, while research dealing with geo-referencing has been mainly in the fields of aerial mapping and terrestrial mobile mapping, which can benefit from post-processing. The research described in this thesis attempts to overcome this problem by developing a real-time geo-referencing system specifically for MCE.

The total system consists of three components; an integrated DGPS/INS to geo-reference the equipment main-body; an open kinematic chain to relatively position the end-effector with respect to the main-body; and a unified model to geo-reference the end-effector. The system carrier is designed for an excavator, but the model for the development of the open kinematic chain, designed using the Denavit-Hartenberg convention, can

iii

accommodate any type of MCE. The overall objective was the development of a precise geo-referencing system that could be operated under all construction conditions and could achieve an accuracy required for the recording of exposed infrastructure which calls for a vertical component of 15mm. This required high-level accuracy in both the position and orientation, therefore, DGPS and INS were integrated. Furthermore, the positional accuracy required double-differenced carrier phase measurements

implemented using a least squares method for ambiguity resolution. Extended Kalman filters (EKF) were used for DGPS baseline estimation and DGPS/INS integration, the latter using a tightly-coupled, closed-loop architecture. Finally, error analysis was completed on the open kinematic chain to resolve the accuracy required in the joint sensors.

System testing was completed using sample data from an International Federation of Surveyors Commission mobile van test and simulated data for the open kinematic chain. Results showed that the geo-referencing system was able to achieve ±0.024m (RMSE) horizontally and ±0.034m (RMSE) in height when the excavator was stationary and executing a common digging trajectory. The accuracy achieved would allow the excavator to operate autonomously for several common construction tasks.

iv

Acknowledgements

The research and compilation of this dissertation would not have been possible without the assistance of several people. Firstly, I would like to thank the individuals and groups that provided DGPS and IMU data, without which, the DGPS/INS integration software could not have been developed and tested. To Dr. El-Sheimy, of the University of Calgary, for providing the original data set (processed DGPS data and raw IMU measurements) which allowed me to test the development of DGPS/INS Kalman filter algorithms in Matlab. To members of the `Ubiquitous Positioning' joint working group, in particular, Dr. Charles Toth, of the Ohio State University, for providing the data sets (raw DGPS and IMU measurements and post-processed reference data) that were used to develop and test the final DGPS EKF and tightly-coupled, closed-loop DGPS/INS EKF software. Dr. Toth proved an invaluable contact that I am truly appreciative for. He was both available and willing to discuss the content and extremely helpful answering questions I had regarding the data.

Secondly, I would like to express my gratitude and appreciation to my academic supervisor Dr. Mike Chapman for his guidance, support and, most importantly, encouragement throughout my undergraduate and graduate experience at Ryerson. The enthusiasm and knowledge conveyed in his teaching was one of the original reasons I pursued graduate studies. I will miss the several informal discussions we had regarding the content of this dissertation, the numerous geomatics topics and life in general. The

v

advice he gave was not only imperative in the completion of my graduate degree but a verification of the balance needed, in one's life, between work and family.

And lastly, to my wife, Michelle, I am truly grateful for the persistent love, support and encouragement you have shown over the last several years. Together we have started a journey that has seen us reach our educational endeavours, taken us nearly around the world and afforded us some unforgettable experiences. I look forward to the start of a new chapter in our lives and a continued journey that I hope never ends.

vi

Table of Contents
Author's Declaration ............................................................................................................ ii Abstract .................................................................................................................................. iii Acknowledgements .................................................................................................................v List of Tables ......................................................................................................................... ix List of Figures .........................................................................................................................x List of Appendices ............................................................................................................... xii Notation ................................................................................................................................ xiii 1 Introduction .................................................................................................................1 1.1 1.2 Background ............................................................................................................1 History of Machine Controlled Construction Equipment and Geo-Referencing

Systems .............................................................................................................................5 1.3 1.4 2 Research Contributions .......................................................................................13 Thesis Outline ......................................................................................................15

System Overview .......................................................................................................18 2.1 2.2 2.3 2.4 2.5 System Concept ...................................................................................................19 Data Acquisition ..................................................................................................23 Geo-Referencing of Equipment Main-body ......................................................26 Relative Positioning of End-Effector .................................................................36 Geo-Referencing of End-Effector ......................................................................38

3

Geo-Referencing the Equipment Body-Centre/Main-Body ...............................41 3.1 3.2 DGPS Extended Kalman Filter ..........................................................................43 Inertial Navigation Equations/Solutions ............................................................63

vii

3.3 3.4 4

DGPS/INS Integration Extended Kalman Filter ...............................................71 Attitude Initialization ..........................................................................................87

Relative Positioning of the End-Effector ...............................................................93 4.1 4.2 Forward Kinematics of an Excavator .................................................................95 Positioning the End-Effector ........................................................................... 103

5 6

Geo-Referencing the End-Effector ...................................................................... 109 Geo-Referencing System Error Analysis ........................................................... 116 6.1 6.2 6.3 Three Dimensional (3D) Positioning of the End-Effector ............................. 117 Factors Effecting the Accuracy of the Geo-Referencing System.................. 119 Error Budget ..................................................................................................... 139

7

Results and Analysis .............................................................................................. 141 7.1 7.2 7.3 7.4 7.5 System Testing ................................................................................................. 142 DGPS Extended Kalman Filter (EKF) ............................................................ 147 INS Initialization .............................................................................................. 155 DGPS/INS Integration ..................................................................................... 164 Geo-Referencing the End-Effector .................................................................. 172

8

Summary Conclusions and Recommendations ................................................. 178 8.1 8.2 8.3 Summary ........................................................................................................... 178 Conclusions....................................................................................................... 180 Recommendations ............................................................................................ 184

Appendices .......................................................................................................................... 187 References ........................................................................................................................... 189

viii

List of Tables
Table 1.1: Reviewed research characteristics .........................................................................8 Table 2.1: Sensors on the 'Ubiquitous Positioning' Mobile Mapping Vans .......................24 Table 2.2: DGPS, INS and DGPS/INS Integration characteristics .....................................29 Table 2.3: Different forms of Kalman Filter implementation. ............................................33 Table 4.1: Joint parameters for the excavator manipulated arm....................................... 103 Table 4.2: Final joint parameters for the excavator manipulated arm ............................. 106 Table 5.1: Elements of the unified geo-referencing model and their sources ................. 115 Table 6.1: Final joint parameters for the excavator manipulated arm ............................. 133 Table 6.2: Position displacement values of the end-effector from the open kinematic chain error model ................................................................................................................. 138 Table 6.3: Error sources and their magnitudes for the geo-referencing system .............. 139 Table 7.1: Sensors on the 'Ubiquitous Positioning' Mobile Mapping Van ...................... 143 Table 7.2: Sample test data for testing the geo-referencing system ................................. 145 Table 7.3: Standard deviations of baselines from EKF error covariance matrix ............ 150 Table 7.4: Root-mean-square (RMS) error of DGPS EKF position estimates ................ 152 Table 7.5: Roll and Pitch leveling errors ........................................................................... 156 Table 7.6: Yaw/Heading direct gyro-compassing errors .................................................. 158 Table 7.7: Standard deviations of DGPS/INS EKF error covariance matrix .................. 166 Table 7.8: Comparison of geo-referencing system and GPS/INS EKF positional error 176

ix

List of Figures
Figure 2.1: The geo-refencing system for machine-controlled construction equipment. ..19 Figure 2.2: The excavator geo-referencing system ..............................................................21 Figure 2.3: The Kalman Filter predictor-corrector process .................................................31 Figure 2.4: Basic approach for integrating GPS and INS ....................................................34 Figure 3.1: Tightly coupled closed-loop GPS/INS integration architecture .......................41 Figure 3.2: Double Differencing - two receivers observe two satellites at a given time ...44 Figure 3.3: Kalman filter data flow diagram. .......................................................................52 Figure 3.4: Block diagram of local navigation frame, n-frame, navigation equation updates.....................................................................................................................................64 Figure 4.1: Detailed diagram of the elements of the geo-referencing system ....................93 Figure 4.2: The excavator defined by forward kinematics ..................................................96 Figure 4.3: Vector and point transformations between two planar links' coordinate systems ....................................................................................................................................97 Figure 4.4: The links' coordinate systems and joint parameters for an elbow manipulator/excavator ......................................................................................................... 100 Figure 4.5: The links' coordinate systems and joint parameters for an elbow manipulator/excavator with the eqp-frame superimposed ................................................ 105 Figure 5.1: Geo-referencing of construction equipment ................................................... 110 Figure 5.2: Detailed diagram of the elements of the geo-referencing system ................. 112 Figure 6.1: Short-term INS error growth standard deviation - Navigation grade sensors .............................................................................................................................................. 123 Figure 6.2: Comparison of Z axis acceleration between MMQG (IMU) and GPS......... 125

x

Figure 6.3: Working range of Volvo E380DL excavator ................................................. 135 Figure 6.4: Boom and Arm of Volvo E380DL excavator ................................................ 136 Figure 6.5: Sensor SystemsTM QMI-CB-360-X CAN Bus Angle Sensor. ....................... 137 Figure 7.1: Results of least-squares and LAMBDA approach to ambiguity resolution . 148 Figure 7.2: Baseline component errors from the mean, for a stationary state ................. 151 Figure 7.3: DGPS EKF position estimation errors ............................................................ 153 Figure 7.4: Heading value from zero velocity update in GPS/INS EKF ......................... 162 Figure 7.5: GPS/INS EKF yaw/heading angle during equipment motion ....................... 163 Figure 7.6: GPS/INS EKF positional errors in the local navigation frame ..................... 168 Figure 7.7: GPS/INS EKF orientation errors ..................................................................... 169 Figure 7.8: GPS/INS EKF velocity errors in the local navigation frame ........................ 170 Figure 7.9: GPS/INS EKF total velocity error ................................................................... 171 Figure 7.10: Digging trajectory for accuracy test .............................................................. 174 Figure 7.11: Positional errors of the end-effector while executing a common digging trajectory on both a stationary (top) and moving (bottom) excavator.............................. 175

xi

List of Appendices
Appendix A .......................................................................................................................... 187

xii

Notation i.
DGPS DH EKF

List of Terms
Differential Global Positioning System Denavit-Hartenburg Extended Kalman Filter

End-Effector The device or tool representing the last link of the construction equipment i.e. the bucket on an excavator GPS HT IMU INS GUI KF LAMBDA MCE PPS RMS ZVU Global Positioning System Homogeneous Transformation Matrix Inertial Measuring Unit Inertial Navigation System Graphical User Interface Kalman Filter Least-squares AMbiguity Decorrelation Adjustment Machine Controlled Construction Equipment Pulse-Per-Second Root-mean-square error Zero Velocity Update

xiii

ii.
i-frame

Coordinate Frames
inertial coordinate frame ­ the origin is at the mass centre of the earth; the x-axis is defined by the mean vernal equinox; the z-axis is defined by the mean rotation axis of the earth; the y-axis completes the right-handed Cartesian coordinate system.

ECEF-frame or earth-centred-earth-fixed frame (ECEF) ­ the origin is defined as the mass centre of the earth; the z-axis is defined by the mean rotation axis of the earth; the x-axis is defined as orthogonal to the z-axis and lying in

the mean Greenwich meridian plane (Prime Meridian); the y-axis completes the right-handed Cartesian coordinate system. n-frame local-navigation-frame ­ the origin is defined by the user using curvilinear coordinates; the z-axis is defined by the direction of gravity and is considered down; the x-axis lies in the plane orthogonal to the z-axis and is defined by the ellipsoidal north direction; the y-axis completes the righthanded Cartesian coordinate system. b-frame body-frame - comprises the origin and orientation for which the navigation is sought. Therefore, the origin coincides with the n -frame but the axes remained fixed to the body; the x-axis is defined as the forward direction or usual direction of travel; the z-axis is up or the opposite of the usual direction of gravity and the y-axis completes the right-handed Cartesian coordinate system. eqp-frame construction equipment-frame ­ comprises the orientation for which the navigation is sought and therefore is parallel to the b -frame. The origin

xiv

coincides with the reference coordinate frame for the open kinematic chain (O-frame) or the joint of the boom of the excavator.   The transformation matrix from the ECEF-frame to the n -frame: - sin  cos   - sin  - cos  cos  - sin  sin  cos  - cos  sin  cos  0  -sin 

 

The transformation matrix from the n-frame to the ECEF-frame: - sin  cos   - sin  sin  cos   - sin  cos  0 - cos  cos  - cos  sin   -sin  

 

The transformation matrix from the b -frame to the n -frame: cos   cos     cos  sin        - sin   - cos   sin   +  sin   sin   cos   cos   cos   +   sin   sin   sin   sin   cos   sin   sin   +  cos   sin   cos     - sin   cos   +    cos   sin   sin    cos   cos   

 

The transformation matrix from the n -frame to the b -frame: cos   cos    - cos  sin  +       sin  sin  cos         sin   sin   +   cos   sin   cos   cos   sin   cos   cos   +   sin   sin   sin   - sin   cos   +   cos   sin   sin    sin   cos     cos   cos     - sin  

where,  ,  ,  denote roll, pitch and yaw, respectively

where ,  ,  denote roll, pitch and yaw, respectively

xv

iii.
  /


General Conventions
is a matrix convention representing an identity matrix with size defined by the subscript, n. is a matrix convention representing a matrix populated by zeros with a square size defined by the subscript, n. The variable, , has its motion described in the  frame, with respect to the   cos  0 Earth rotation vector resolved in the n -frame where  is  -  sin  7.292115e-5 rad/s as defined by the National Imagery and Mapping Agency Technical Report TR83502 (1991). the Latitude of the object and   is the WGS84 earth rotation rate

 frame, resolved in the  frame.

 /

  /

rotation vector resolved in the n -frame
  ,

0   -sin  0

sin  0 cos 

0 - cos  Skew symmetric matrix of the earth 0

  /

in the n -frame, R E denotes the radius of curvature in the prime vertical and R N denotes the radius of curvature in the meridian.  /
   ,  - ,

 ( ( )+ )      -    ,   where     is the transport rate and v denotes the velocities ( ( ) )   +       - , tan    (()+) 

0

 - , 0   ,

  ,  - , Skew symmetric matrix of the transport rate 0

xvi

1

Introduction

1.1

Background

The study of machine controlled construction equipment (MCE) or construction automation, has been entrenched in main stream research since the late 1980's. However, the roots of MCE ­ the study of Robotic Engineering, in particular, forward and inverse kinematics and a commonly used convention for selecting frames of reference for kinematics equations, called the Denavit-Hartenburg convention ­ has been around since the 1950's.

Over the past two decades the motivation for MCE has changed. In the beginning the research aimed to address one of two possibilities: 1. Extraterrestrial use ­ focused on the use of autonomous excavators during unmanned phases of establishing manned Lunar and Martian research stations. 2. Terrestrial excavation ­ focused on tele-operation, rather than on system requirements for autonomous operation.

This lead to a number of theoretical and experimental contributions to the field of autonomous, robotic or tele-operated excavation by Bernold (1991, 1993), Bradley and Seward (1998) and Salcudean et al. (1997).

1

The turning point for MCE came in the late 1990's and continued to accelerate into the New Millennium when transportation system construction and maintenance experienced significant advances in machine control (Kim et al., 2000). This was due to rapid advances in enabling technologies such as computing power, positioning systems (GPS, IMU), 3D modeling systems, advanced control methods and graphical interfaces (Kim et al., 2000). The continued advancement of these technologies has now reached a point where it seems there are means of meeting even the specific needs of MCE (Makkonen et al., 2005).

Today, construction remains an integral part of the overall economy and is of economic significance to many industry sectors and stakeholders. Intense competition, shortages of skilled labour and constant technological advances continues to force rapid change in the construction industry and in support of MCE (Q. Ha et al., 2002). Although advancements over the last two decades have lead to significant progress in MCE research most of the research has remained focused on control of the construction systems, for example, Vaha et al. (1993), Koivu et al. (1996), Q.P. Ha et al. (2002), Makkonen et al. (2005) and Hemami (2009). Positioning of these control systems has been done in one of two ways: 1. Relative Positioning ­ this is has been done in the majority of systems; the endeffector is positioned with respect to the equipment main-body only. 2. Absolute Positioning ­ this has been accomplished by stand alone GPS or robotic tracking systems using a total station survey instrument.

2

Research dealing with absolute, real-time positioning systems has been mainly in the fields of Aerial Mapping and Terrestrial Mobile Mapping although these systems often benefit from post-processing accuracy enhancements. The focus of the mapping system research is the much more reliable and precise technique of positioning using the integration of Global Positioning Systems (GPS) and Inertial Navigation Systems (INS). It is considered more reliable and precise because the two systems are complimentary in nature, i.e., the advantages of INS combat the disadvantages of GPS and vice-versa.

In addition to this, a MCE system, or more specifically, it's geo-referencing system can lead to several benefits in the field of construction, including, but not limited to: 1. Safety on the construction site ­ knowing the real-time locations of construction equipment/vehicles as well as safety hazards (i.e. utilities) 2. Optimization of construction tasks ­ using the location of end-effectors to complete construction tasks with known optimum trajectories 3. Precision construction ­ using the geo-referencing system to check as-built construction rather than traditional survey techniques 4. Updating preliminary survey/search, design drawings and as-built surveys ­ using the geo-referencing system to record as-built construction rather than traditional survey techniques

This research will focus on developing a geo-referencing system software program that can provide precise and reliable, real-time feedback for MCE. The system will be designed to combine information from multiple sensors and will include GPS/INS

3

integration for absolute position and orientation, and a multi-sensor link, to connect the end-effector to the GPS/INS. The amount and types of sensors will vary depending on the construction equipment, therefore a unified model for geo-referencing the end-effector is introduced, making the system applicable to all construction equipment.

4

1.2

History of Machine Controlled Construction Equipment and Geo-Referencing Systems

This section outlines the history behind this research including a review of machine controlled construction equipment and geo-referencing systems. The review will cover several studies and contributions that focus on the areas of innovation of this thesis, namely creating a computer program for a reliable unified approach for geo-referencing of multi-sensor construction equipment and the development of an optimal Kalman filter (KF) for GPS/INS integration.

1.2.1

Machine

Controlled

Construction

Equipment

and

Contruction

Automation

As stated in the introduction, research into machine controlled construction equipment (MCE) took off in the nineties due to several factors. It is important to review research on this topic because one of the key components of MCE is the positioning system. The research reviewed for this topic includes a number of valuable theoretical and experimental contributions to the field of autonomous and robotic excavation by Vaha et al. (1993), Koivo et al. (1996), and Makkonen et al. (2006) as well as various research by A. Hemami (2008). Although fully autonomous operation of a full-scale excavator has not been commercially demonstrated there have been experimental studies reported in literature including Bradley and Seward (1998), Ha et al. (2002) and Budny et al. (2002).

5

The research in MCE tends to focus heavily on the control of the excavator movement, but most projects explain the positioning system used. Below is a brief explanation of the positioning systems used by MCE research: Vaha et al. (1993) and Koivu et al. (1996) - developed similar dynamic models by applying Newton-Euler equations to each link in succession to model/monitor excavator movement. Ha et al. (2002) ­ Experimented with the control of a Komatsu PC05-7 excavator using joint angle encoders and the method of Vaha et al. and Koivu et al. to position/model the digging trajectory. Makkonen et al. (2006) ­ developed a system combining two GPS receivers and a tilt sensor mounted on an excavator to model it with six degrees of freedom. Bradley and Seward (1998) ­ developed a control system on a JCB801 360 ° track loader. A stand-alone GPS was used to geo-reference the positioning system. Budny et al. (2003) ­ developed a system to calculate the end-effector velocity by relating the oil flow into the three hydraulic cylinders through inverse kinematics. The advantage of this system was avoiding the use of sensors.

6

Figure 1.1: The robotic excavator developed by the ACFR in a trench forming task; from Ha et al., 2002.

As can be seen above, the research into MCE focuses heavily on the control of the systems. Less significance is put into the positioning systems, which are treated more as a must-have in order to test the control systems. The focus of this research is the development of a geo-referencing system computer program with the ability to operate in real-time. Table 1.1 outlines how the reviewed research relates to the objectives of this research.

7

Table 1.1: Reviewed research characteristics

Reviewed Research
Vaha et al. (1993) Koivu et al. (1996) Ha et al. (2002) Makkonen et al. (2006) Bradley and Seward (1998) Budney et al. (2003)

Sensor Devices
Joint Angle Sensors Joint Angle Sensors Joint Angle Sensors 2 GPS receivers & Joint Angle Sensors GPS receiver & Joint Angle Sensors Oil Flow Sensors & Joint Angle Sensors

Real-time Relative Geo-Referencing Accuracy Positioning Positioning System Assessment

     

        

Table 1.1 outlines the importance of real-time, relative positioning to MCE. This is of significance because relative positioning is a key-component of any geo-referencing system. This review found the common element for relative positioning is the need for a method to measure the joint variables to create an open chain/traverse between moving links of the equipment. Vaha et al., Koivu et al., Ha et al., Makkonen et al. and Hemami define a cartesian coordinate system for each link of the excavator with the origin at the excavator main-body. The Denavit-Hartenberg convention (Denavit and Hartenberg, 1955) is then applied to assign the coordinate systems systematically to each joint.

Geo-referencing the positioning system in MCE is less common (see Table 1.1). This is understandable considering the focus of MCE research is machine control. However,

8

both Makkonen et al. and, Bradley and Seward, use GPS to geo-reference their positioning systems. The research relies heavily on the GPS. Makkonen et al. use two GPS receivers and a tilt sensor to two stand-alone GPS receivers and a tilt sensor for georeferencing and, Bradley and Seward, use one DGPS receiver to provide an absolute reference frame. The use of this type of GPS, unaided by other sensors (e.g., IMU), results in an unreliable geo-referencing system due to the accuracy of the GPS technique, GPS data latency and signal loss.

1.2.2

Geo-Referencing Systems

The history of geo-referencing system dates back to the invention of the Global Positioning System (GPS). Since its inception researchers and private companies have been integrating the capabilities of GPS (positioning) and INS (orientation) to produce geo-referencing systems. A majority of this type of research has dealt with the navigation of airplanes for aerial surveying and navigation of vehicles for terrestrial mobile mapping systems.

Research into aerial navigation fits well with this research topic due to the fact that aerial navigation is concerned with three position and three orientation components. These are the same six components of navigation needed when geo-referencing the main-body of construction equipment because normal construction conditions involve uneven surfaces.

9

One would also assume that vehicle navigation parallels construction equipment navigation, however, this is not always the case. Care must be taken when reviewing research on vehicle navigation. It is common to find research on low-order vehicle positioning i.e., navigation that deals with the location of the vehicle but limits the orientation to longitudinal, lateral and yaw because they are of major interest for normal driving conditions (Tan and Huang, 2006).

A review of several geo-referencing systems resulted in a common theme amongst researcher's selection of hardware and integration algorithms. El-Sheimy (1996), Skaloud (1999), Heipke et al. (2002) and Redmill et al. (2001) all chose to use DGPS and strapdown INS in their development of geo-referencing systems requiring high-accuracy and integrate them using a Kalman filter (KF), or to be more specific, an extended KF (EKF) was used due to the non-linearity of the DGPS/INS navigation equations. However, after these choices the research varies due to the fact that the integration of DGPS and INS can be tailored to the application.

Integration design/architecture has two basic options - loosely or tightly coupled ­ based on how much the GPS and INS interacts. Within these two architectures are two options ­ open and closed loop ­ on how the resolved errors are used by the system. There has been significant research into all concepts of system integration. The arguments for choosing either form of implementation have been very balanced (Skaloud, 1999) and considered to be application specific. For example, both Skaloud and El-Sheimy use loosely and tightly coupled GPS/INS integration, although Skaloud concludes that a

10

tightly coupled EKF increases the probability of resolving ambiguities faster and with fewer satellites as compared to its loosely coupled counterpart, therefore the tightly coupled approach is recommended for direct geo-referencing.

The common development of geo-referencing systems using GPS/INS integration and a KF usually results in a geo-referencing system that is real-time or quasi-real-time. However, not all applications require real-time results. Increasingly, it was found that geo-referencing systems requiring higher-accuracies, i.e. airplane navigation for aerial mapping and mobile mapping systems, do not need to operate in real-time. This is an advantage because these systems can benefit from post-processing for further advancements in accuracy. This application will not benefit from post-processing because MCE requires real-time geo-referencing.

1.2.3

Currently Available Positioning Systems

A discussion of the history of geo-referencing systems would not be complete without mentioning the contributions of large survey instrument manufacturers. Both Leica and Trimble, in combination with large construction equipment manufacturers, produce offthe-shelf positioning systems for construction equipment. The latest developments are Leica's Powerdigger 3D and Trimble's GCS900.

Powerdigger 3D was released in 2009. This system uses a combination GPS with a pitch, roll and direction sensor to position and orient the excavator in an absolute reference 11

frame. This system is considered a black box GPS/INS integrated system. The input is characterized by obtaining information from the GPS, pitch, roll and direction sensors. The output is the position and orientation of the system generated within the black box using integration techniques and navigation equations. There are advantages and disadvantages to this type of system. It results in a simpler construction design but makes it difficult to modify the system. It results in a proprietary design with no information on the integration architecture and algorithm(s), navigation equations or link to the endeffector. Furthermore, there is no published information on sensor precision or accuracy of the system operating autonomously.

The GCS900 uses a combination of a two GPS receivers and a pitch and roll sensor to position and orient the excavator in an absolute reference frame. This system uses GPS to resolve the yaw and IMU sensors for detecting pitch and roll. This is also considered a black box system. Furthermore, based on the geo-referencing literature review in Section 1.2.2, it is not a common approach to rely on two GPS receivers to resolve the yaw angle and not include a three-axis IMU (pitch, roll and yaw sensors) for redundancy.

12

1.3

Research Contributions

The main contribution of this thesis is the development of a computer program for a georeferencing system specifically designed for construction equipment that is able to operate in real-time. The research will be based on the study of an excavator because, out of all construction equipment, it has the potential for the most complex motion. The computer program will move past current stand-alone GPS and relative positioning systems found in MCE research to develop a system that will geo-reference the endeffector by simultaneously: 1)Developing a Kalman filter based DGPS/INS integration computer program for geo-referencing the main-body of the excavator., 2) Developing a relative positioning computer programfor the end-effector, based on the DenavitHartenburg convention, that will create an open kinematic chain linking it to the georeferenced main-body. 3) Developing a unified math model and computer program to geo-reference the end-effector by combining the DGPS/INS integration and the open kinematic chain that will allow for multi-sensor integration, and hence, allow the model to be applicable to all construction equipment. The research will also address the limitations of commercially available positioning systems by providing information on system architecture and algorithms, sensor precision and system accuracy when operating autonomously. The goal for the accuracy of the system was based on the American Society for Civil Engineers (ASCE) 38-02 Standard Guideline for the Collection and Depiction of Existing Subsurface Utility Data: Dealing with exposed utilities - Quality Level A, which calls for a vertical accuracy of 15mm. The specified accuracy was

13

required for all construction environments and activities, including high dynamics, which made it impossible to use GPS alone for positioning.

The research was not based on any previously designed computer program, which meant a system would have to be built to provide a real-time environment. Therefore, the program was developed with real-time positioning techniques creating a quasi-real-time positioning system. Data for the DGPS/INS integration was generously provided by a joint research program between Ohio State University and the University of Nottingham and simulated data was used for relative positioning.

Under the overall objectives the following tasks had to be addressed: · · · · Design a suitable integration architecture for DGPS/INS Develop the DGPS/INS integration computer program Acquire appropriate DGPS and IMU test data for the system Design a suitable relative positioning system for construction equipment, from the main-body to the end-effector · · Develop the relative positioning computer program Develop a geo-referencing model and computer program for combining DGPS/INS integration and relative positioning from multiple types of sensors · Test the system in a controlled environment using simulated construction endeffector movement

14

1.4

Thesis Outline

Chapter 2 outlines the concept and the major components of the geo-referencing system. The implementation algorithm will be introduced and the hardware limitations and integration problems will be highlighted. The underlying principle of extracting 3-D coordinates from the end-effector - through a combination of forward kinematics and GPS/INS integration is briefly discussed.

Chapter 3 introduces the technique for geo-referencing the main-body of the construction equipment. This includes DGPS ambiguity resolution and baseline estimation, DGPS/INS integration and INS position/orientation estimation. The main algorithm for DGPS and DGPS/INS integration, the extended Kalman filter, is introduced. The tightly coupled ­ closed loop architecture for the Kalman filter is also defined. Finally, the inertial navigation equations, used to calculate the position and orientation of the mainbody are given.

Chapter 4 introduces the technique for positioning the end-effector of the construction equipment relative to the main-body. The concept of forward kinematics is used to define the joints and links of the excavator. Homogeneous transformation matrices and the Denavit-Hartenberg convention for establishing coordinate frames are presented to establish an open kinematic chain of the boom, arm and bucket for relative positioning. Finally, a model for positioning the end-effector is proposed.

15

Chapter 5 introduces the technique for integrating multi-sensor data for geo-referencing. The fundamental components of the multi-sensor system, and their mathematical models, are outlined. This implies different mathematical and physical models for the multisensor system, however, a general model for geo-referencing the end-effector is presented.

Chapter 6 discusses the factors affecting the accuracy of the geo-referencing system. The errors involved in 3D positioning of the end-effector is a function of the complete system, which includes DGPS position, INS position/orientation, open kinematic chain establishment and system initialization and synchronization. The procedure for 3D coordinate computation is repeated, followed by an error analysis of the entire system. Finally, an error budget is introduced that outlines the expected accuracy of the 3D endeffector position and the error contribution of each component of the unified model for geo-referencing.

Chapter 7 presents the results of several tests of the system. The system was tested using data supplied by the joint International Federation of Surveyors (FIG) Commission 5 and International Association of Geodesy (IAG) Commission 4. The particular tests used in this research were conducted on a major road near the University of Nottingham campus using two mobile mapping vans. A detailed analysis of the tests using this sample data is given in the chapter.

16

Chapter 8 finalizes the thesis by drawing conclusions from the research work. It also provides recommendations for future work.

17

2

System Overview

This chapter will present the overall system concept and major components of the georeferencing system introducing the implementation algorithms and highlighting some of the hardware limitations and integration problems. It will also introduce the principle of extracting 3D coordinates of the end-effector; using transformation matrices developed with the Denavit-Hartenburg convention to create an open kinematic chain to the georeferenced equipment main-body achieved by DPGS/INS integration.

18

2.1

System Concept

Geo-Referencing System
Angle DGPS INS

DenavitHartenburg Convention

Geo-Refencing Processor Main-body

Geo-Refencing Processor End-Effector

Figure 2.1: The geo-refencing system for machine-controlled construction equipment. Adapted from www.sensorsystems.it/sites/default/files/pdf/QMI-CAN-BUS.pdf, www8.garmin.com/aboutGPS and asn-xp.aerosoft.com/?page_id=2582

Figure 2.1 shows the conceptual design and overall data flow of the geo-referencing system in schematic form. The total system consists of: 1. Data acquisition - composed of differential GPS Master/Rover receivers, an INS measuring device and individual rotary sensors. 2. The geo-referencing processor for the equipment main-body - composed of a Kalman filter based DGPS/INS integration algorithm. 19

3. The relative positioning of the end-effector with respect to the main-body creating an open kinematic chain between the main-body and end-effector by combining angle measurements of each joint of the construction equipment. 4. The geo-referencing processor for the equipment end-effector - combining the DGPS/INS geo-referenced main-body with the relative positioning of the endeffector

The system carrier of the geo-referencing system is an excavator (Figure 2.2). The excavator was chosen because it has the potential to have the most complex range of motion; six degrees of freedom to define the position (three translations) and orientation (three rotations) of the main-body; and three degrees of freedom (one angle of rotation for each joint in Figure 2.2) for the boom-stick-bucket articulated arm. Although the computer program was designed based on the system carrier, with slight modifications to the number of rotary sensors and creation of the open kinematic chain the georeferencing system is applicable to all forms of construction equipment.

20

Rover GPS Receiver/INS IMU of INS

CPU

IMU (i.e., Rotary Angle Sensor) Target Point (end-effector)

Figure 2.2: The excavator geo-referencing system

The overall objective of the geo-referencing system was to develop a computer program that outputs geo-referenced end-effector coordinates with several construction applications, including machine control, construction safety and construction asset management (i.e. infrastructure inventory). Therefore the system was developed to be operable in a construction environment and would strive to achieve an accuracy on par with ASCE-3802: Standard Guideline for the Collection and Depiction of Existing Subsurface Utility Data, Quality Level A. This quality level is based on measurements of exposed utilities and calls for a vertical accuracy of 15mm and horizontal data accurate to applicable survey standards.

The system data acquisition has two basic components. The data acquisition for the georeferencing of the equipment main-body, which required a strap-down INS and two L1/L2 GPS receivers, and the data acquisition for the open kinematic chain between the equipment main-body and the equipment end-effector which required a rotary angle 21

sensor for each joint of the construction equipment between the main-body and endeffector. Each of these two components can then be broken down into major and minor functions of positioning. In terms of major functions, the angle sensors provide the link to position the end-effector with respect to the main-body. The position of the main-body with respect to the local control is provided by the DGPS techniques while INS provides the orientation of the main-body. In terms of minor functions, the DGPS aids the INS error propagation while the INS, in positioning and velocity mode, can bridge GPS outages, correct for GPS cycle slips, and provide precise interpolation between GPS fixes.

The geo-referencing system consists of four essential parts: data acquisition, georeferencing of the main-body, relative positioning of the end-effector by creating an open kinematic chain between the main-body and end-effector and geo-referencing the endeffector. The acquisition of synchronized DGPS and IMU data was provided by a collaborative positioning project between the Ohio State University and the University of Nottingham undertaken at the University of Nottingham. Geo-referencing of the excavator main-body was obtained through the development of a geo-referencing computer program which requires DGPS and IMU data input. The computer program is currently geo-referencing in pseudo-real-time mode. Relative positioning of the endeffector with respect to the main-body is completed in pseudo-real-time mode using simulated angle measurements to create the DH link. A brief description of each component is given in the subsequent sections.

22

2.2

Data Acquisition

As stated in the introduction this research is not based on any previously built system. Therefore in order to attain data, after a geo-referencing computer program was developed, suitable test data had to be attained.

The test data utilized for the DGPS/INS integration is from `Ubiquitous Positioning' initiative joint working group within the International Federation of Surveyors, Commission 5.5 and International Association of Geodesy (IAG), Commission 4.1.1. The participating members were the University of Melbourne, Australia, the Ohio State University, the University of New South Wales, the National Technical University of Athens, the Vienna University of Technology and the University of Nottingham with the actual tests being conducted at the latter over a four day period in May 2012. The field experiments considered different scenarios, including, indoor, outdoor and a combination of several platforms, including a train on a building roof, a foot tracker, a personal navigator, mobile mapping vans and a GPS base station over a known point on the campus of the University of Nottingham (Kealy et al., 2012).

The data sets used to complete this research focused on the data provided by the two mobile mapping vans. The road tests included movements in the parking lot, as well as, on road sections near the University of Nottingham. The experiments ranged over two days and were separated into several test track loops. The trajectory of the test tracks had both low and medium dynamics in terms of velocity and turning profiles to depict typical

23

land based vehicle dynamics. The satellite availability for these particular tests were on average approximately 95% (Rabiain, et al., 2012). The test tracks also included several GPS outages while driving under bridges. Dual frequency GPS receivers, two low-cost MEMS IMUs, a tactical (accelerometer bias: 1-10 10-3 m·s-2 , gyro bias: 1-10 deg/h (Schwarz and El-sheimy, 2007)) and navigation (accelerometer bias: 2-3 10-4 m·s-2, gyro bias: 0.003 deg/h (Schwarz and El-sheimy, 2007)) grade IMU were employed in the mobile mapping tests. The specific sensors used in the two vans for the mobile mapping test can be found in Table 2.1.

Table 2.1: Sensors on the 'Ubiquitous Positioning' Mobile Mapping Vans

Mobile Mapping System

Type of Sensor
Novatel GPS Novatel SPAN IMU

Sensor Grade/Characteristic
Dual Frequency GPS Receiver Tactical grade IMU Commercial grade MEMS IMU Commercial grade MEMS IMU Dual Frequency GPS Receiver Navigational grade IMU Commercial grade MEMS IMU Commercial grade MEMS IMU

Van 1
Systron MMQG Xsens MTi-G Leica GS10 CIMU

Van 2
Systron MMQG Xsens MTi-G

The test data for completing the relative positioning between the equipment end-effector and main-body required angle measurements for the joints of the boom, stick and bucket of the excavator. This was accomplished using simulated data of an excavator digging trajectory. . The simulated data was based on data that would be available in a real-world 24

construction environment and required a sensor that could measure the direct, relative, angle between two objects (i.e. the boom and stick), could be easily mounted on a construction equipment joint and could operate under high dynamics and a wide temperature range. For this reason, typical tilt angle sensors were not sufficient because the angle measurement was not direct i.e., it is correlated to the orientation of the excavator main-body. Typical sensors that were able to achieve these requirements are contactless, rotary angle sensors. Readily available contactless, rotary angle sensors are able to achieve 0.1°, which is acceptable for the accuracy requirements of the georeferencing system.

25

2.3

Geo-Referencing of Equipment Main-body

Determining the position and orientation of the geo-referencing system is, in its basic form, a problem of trajectory determination. The general motion of an object in space can be described by six parameters ­ three position and three orientation parameters. Therefore the measuring devices for positioning and orientation must be able to sense six independent quantities from which the six parameters are derived.

There are two basic measuring devices that can be utilized to solve the trajectory problem, an Inertial Navigation System (INS) and the Global Positioning System (GPS).

2.3.1

Geo-Referencing Devices

2.3.1.1

Inertial Navigation System

A strapdown inertial system equipped with three rate gyroscopes to sense angular velocity, and three accelerometers to sense specific force can be used to determine the trajectory of the equipment. The angular velocity measurements are integrated in time to provide orientation changes of the object relative to its last updated orientation. The specific force measurements sense the objects acceleration in three orthogonal axes. These measurements can be double integrated in time to provide position differences relative to the last updated position. Therefore, in theory, an inertial system could provide

26

all the necessary information for trajectory determination. However, in reality, due to the double integration, the time-dependent position errors will rapidly exceed the accuracy specifications set for the geo-referencing system. Furthermore, any inertial navigation system provides updates of the position based on measured changes in orientation and velocity, and therefore, require an initial approximation for absolute position and velocity.

2.3.1.2

GPS

GPS is another measuring unit that can be used for geo-referencing the system. Specifically, the technique of Differential GPS (DGPS) must be used, i.e., two GPS receivers are needed, one setup over a known point (the master receiver) and the other attached to the moving equipment (the rover receiver), for the accuracy requirements of the system. DGPS outputs ranges and range rates between the satellite and receivers to determine the position and velocity of the rover receiver (construction equipment) with respect to the master receiver.

Both the position and velocity are solved in an earth-centred-earth-fixed (ECEF) coordinate frame, therefore, in theory DGPS could provide all the necessary information for trajectory determination using the position and simple differencing techniques for orientation. However, in reality, DGPS has significant drawbacks that can lead to errors in trajectory determination including cycle slips, range and range rate measurement

27

correlation and data latency. These make it difficult to meet the accuracy requirements for the geo-referencing system with DGPS alone.

2.3.1.3

Integration

The geo-referencing of the equipment main-body therefore consists of an INS and two Leica GPS receivers. There are many advantages in combining the two geo-referencing devices, or more importantly, the contrary error behavior, of the two devices, allows the integration of the DGPS and INS to solve the majority of the disadvantages of each device in stand-alone mode. For example, in the absence of errors (e.g. cycle slips, multipath, signal loss etc...), the precise positioning accuracy of DGPS can be used to provide error updates of the INS. In turn, the precise orientation, position and velocity provided by the INS over short time intervals can aid the DGPS in the detection and correction of cycle slips and bridge short-term satellite outages. Therefore, integrating the two positioning systems provides redundant measurements for the six parameters for georeferencing and therefore improves the overall accuracy, robustness and reliability of the system. Table 2.2 outlines the advantages, disadvantages of INS, DGPS and the integration of the two.

28

Table 2.2: DGPS, INS and DGPS/INS Integration characteristics SYSTEM TYPE DGPS
· · · ·

DISADVANTGES
Data rate is low Data latency can be large Accuracy is limited by base line distance between base station and rover High accelerations of the object can have a negative effect on receiver clocks, code tracking loop and carrier phase loop Signal loss-of-lock and `cycle slips' may occur during fast maneuvers Position and attitude errors grow with time due to the need for integration of angular velocity and force measurements High quality inertial systems tend to be too expensive Increasing drift in position caused by various instruments error sources that cannot be eliminated in manufacturing, assembly, calibration or initial system alignment · · · ·

ADVANTAGES
Errors do not accumulate over time High long term stability High accuracy Geo-referenced data ·

INTEGRATION
Observations used to compensate and/or apply corrections to systematic and time-dependent INS error

· ·

INS
· ·

· ·

High sample rate High short term stability

· ·

Used to smooth observation noise of GPS Aids GPS in detecting `cycle slips' and bridging short term satellite outages

2.3.1.4

DGPS/INS Integration Algorithm and Architecture

As can be seen in the previous paragraph the DGPS and INS units are run independently and integrated on the software level. This is an approach commonly used in research of DGPS/INS integration rather than combining the two systems in a `black box' which makes it difficult to modify the system.

2.3.1.4.1

Integration Algorithm

Various options existed for the integration algorithm. In general, the algorithms can be classified into two types: post-processing and real-time applications. For many 29

applications a post-processing algorithm is acceptable, however, this is not the case in MCE. MCE needs a real-time navigation system. Therefore this research focused on the real-time, state-of-the-art integration algorithm the Kalman Filter (KF) due to its optimum performance, versatility, and ease of implementation.

The KF is a recursive, optimal estimator digital algorithm used for the integration of navigation sensor data. It is a set of mathematical equations that utilize a predictorcorrector type estimator that is optimal, in the sense that it minimizes the estimated error covariance. Simply put it uses statistical models to properly weight each new

measurement relative to past information to provide current estimates of the system variables - such as position and orientation. It is also able to determine up-to-date uncertainties of the estimates for real-time quality assessments.

The algorithm uses a predictor-corrector type estimator that works on a form of feedback control: the filter estimates the process state at some time (predictor) and then obtains feedback (corrector) in the form of measurements (noisy). The equations of the KF fall into two classes: the time update equations (predictor) and the measurement update equations (corrector) as seen in Figure 2.3. The time update equations project forward (in time) the current state and error covariance estimates yielding the a priori estimates for the next step. The measurement update equations incorporate a new measurement into the a priori estimate yielding an improved a posteriori estimate (Welch and Bishop, 2002).

30

Figure 2.3: The Kalman Filter predictor-corrector process (Welch and Bishop, 2002)

There are three limiting conditions to the Kalman Filter: 1. the system model is linear 2. the noise is white ­ the noise value is not correlated in time 3. the noise is Gaussian A problem arises because both DGPS and INS systems and processes are nonlinear. Therefore a method of linearizing the process about some known reference process is needed. The Linearized KF (LKF) uses a linearization of the system model with respect to a nominal trajectory, . This is a popular choice for navigation of objects that

follow a defined trajectory. Construction equipment does not follow a defined trajectory, therefore the Extended KF (EKF) was chosen as the integration algorithm. The EKF uses a linearization of the system model with respect to the last updated state or the current predicted state,  - . The major differences between the conventional KF outlined above and the EKF are as follows (Grewal, 2001):

31

 (-) in measurement prediction 2. use of the nonlinear function  

1. integration of the nonlinear integrand  = ( ) to predict   (-)

3. use of the Jacobian matrix of the dynamic model function, f, as the dynamic coefficient matrix, A, in the propagation of the covariance matrix, and 4. use of the Jacobian matrix of the measurement function, h, as the measurement sensitivity matrix, H, in the covariance correction and Kalman Gain equations

The time and measurement update equations for EKF can be seen in Figure 2.3.

2.3.1.4.2

Integration Architecture

Although the Kalman Filter is a popular filter for GPS/INS integration it is believed that to implement it just right is somewhat of an art and very dependent on the system at hand (Mau, 2005). For example, the choice to use EKF-vs-LKF. The question of implementation architectures for the EKF came down to two classifications based on the extent to which data from each component aid the other component's function: 1. The coupling of the two systems ­ generalized into tightly coupled or loosely coupled; with no coupling understood as no data feedback from either system to the other to improve performance. 2. The method with which the correction of the EKF is applied ­ generalized into open-loop and closed-loop.

32

Table 2.3 lists the advantages and disadvantages of each choice. More detail on the various implementations, listed in Table 2.3, can be found in Kocaman (2003).

Table 2.3: Different forms of Kalman Filter implementation. Adapted from Kocaman (2003).
IMPLEMENTATION  Open-Loop Closed-Loop  ADVANTAGES EKF estimated navigation errors are used to correct INS navigation solution only at each iteration EKF estimated navigation errors/corrections are fed into the inertial navigation processor as well as used by the INS navigation solution at each iteration The INS is continuously recalibrated using DGPS therefore strapdown INS can be used Each measuring unit has an independent KF Flexible, modular combination; easy to add sensors Small KF, faster processing Suitable for parallel processing One error state model GPS measurements can be used with less than four satellites Direct INS aiding can be used throughout GPS satellite outages DISADVANTAGES EKF estimated navigation errors are not fed back to the inertial navigation processor Only raw INS solution is used in the EKF More complex processing Blunders in GPS may affect INS performance

   

 Loosely Coupled (Decentralized)       

 

Four satellites needed for stable solution INS not used for ambiguity estimation

Tightly Coupled (Centralized)

 

More complex processing Not as flexible as loosely-coupled architecture for adding additional sensors

Due to the measuring units used and the desire for the geo-referencing system to deal with GPS data latency and satellite outages a closed-loop, tightly coupled implementation of the KF was chosen.

The

closed-loop, tightly

coupled implementation

benefits

from

the use

of

raw/uncorrelated sensor data in a single KF and the ability to constantly update the inertial navigation processor with the position, velocity and attitude errors. This also fits well with the choice of the EKF as the integration algorithm because the closed-loop, tightly coupled architecture results in a doubly non-linear implementation, i.e., non-linear

33

dynamics and non-linear measurements with the primary source of non-linearities being the attitude model.

Figure 2.4 outlines the general approach for integrating GPS and INS. Notice that the GPS and INS true values cancel out in the measurement into the EKF. Therefore only the errors of the GPS and INS are modeled, which results in an error state model.

Figure 2.4: Basic approach for integrating GPS and INS (Levy, 1997)

It should be noted that Figure 2.4 outlines the EKF implementation for GPS/INS integration. However, to meet the accuracy specifications required for the georeferencing system Differential GPS (DGPS) using carrier phase measurements must be used. DGPS improves the positional accuracy by differencing much of the temporally and spatially correlated biases in the pseudo-range measurements, including ephemeris prediction errors, residual satellite clock errors, ionospheric refraction, and, depending on the length of the baseline, sometimes tropospheric refraction. Using DGPS requires a change to the above integration architecture because differential corrections must be applied to the pseudo-range measurements. For the tightly coupled integration, the 34

pseudo-range measurements may be corrected by the GPS ranging processor or within the integration algorithms measurement model. Due to the timing of data availability a separate EKF was developed/programmed to perform differencing and correct for integer ambiguity of carrier-phase pseudo-range measurements.

35

2.4

Relative Positioning of End-Effector

This section deals with the positioning of the equipment end-effector with respect to the equipment main-body. This includes the types of sensors that were needed to accomplish this, the errors associated with the sensors and the method used to propagate the errors to analyze the effect on positioning.

The problem of positioning the end-effector with respect to the main-body was thought of as positioning a rigid body. Therefore, it was considered a forward kinematics problem between the relationship of the individual joints of the construction equipment and the position and orientation of the end-effector. The forward problem determines the position and orientation of the end-effector, given the cumulative effect of the joint variables-in an excavator these were simple revolute joints, or the angles between the links (boom, stick and bucket of excavator). The advantage was a single degree-of-freedom of motion for each joint.

Kinematic analysis rigidly attaches a coordinate frame to each link; each coordinate frame was then related and/or transformed in a sequential manner to the inertial frame of reference, in this case the main-body. Homogeneous Transformation Matrices (HT) offered the ability to locate any point on the construction equipment with respect to the inertial frame and therefore were used to transform each coordinate frame and create the basis for the relative positioning. Furthermore, the Denavit-Hartenberg Convention (DH) was implemented by systematically choosing the coordinate frames. This reduced the

36

number of parameters in the HT from the original six (3 rotations and 3 translations) to four (link length, link twist, link offset and joint angle) and reduced the number of input measurements needed to one, which is important because there is only one input measurement from each link i.e., the angle measurement.

37

2.5

Geo-Referencing of End-Effector

Given the synchronized real-time inputs of the DGPS, INS and IMU angle sensors, the end-effector can be geo-referenced. The developed program simultaneously georeferences the main-body, creates the open kinematic chain that relatively locates the end-effector with respect to the main-body and combines the two, to geo-reference the end-effector. The integration of this type of multi-sensor data requires a unified approach for geo-referencing, meaning that a model must be created that can be applied to most sensor data without the need to account for a different set of parameters for each sensor. For example, in this case the outcome is a geo-referenced end effector. To accomplish this, a unified geo-referencing model is derived for an open kinematic chain between the main-body and end-effector of construction equipment, which is essentially an opentraverse from main-body to end-effector. The open kinematic chain itself is a unified model, created through a varying amount of homogeneous transformation (HT) developed using the Denavit-Hartenburg convention, that can be applied to any type of construction equipment.

Geo-referencing the end-effector is then defined as the problem of transforming the 3-D coordinate vector,  , of the equipment frame (eqp-frame) to the 3-D coordinate vector


 of the navigation frame ( n-frame) - the frame in which the results are required. The n

frame, can be any earth-centered-earth-fixed coordinate system such as curvilinear

geodetic coordinates (latitude, longitude, height), Cartesian coordinates or Universal Tranverse Mercator (UTM).

38

Furthermore, geo-referencing the end-effector using the unified approach is possible if at
 any instant of time (t) the position of the main-body in the n-frame,  / , and the

simplified geo-referencing equation can then be written for the end-effector as:
    () =   / ( ) +  ()  ( ) +   

 rotation matrix,  , between the b -frame and the n-frame have been determined. A

(2.1)

where
 

denotes the position/coordinate vector of the end-effector in navigation frame at time, t denotes the position vector of the INS b -frame expressed in the n-frame at time, t denotes the 3-D transformation matrix that rotates the b -frame into the nframe at time, t denotes the position vector from the origin of the eqp -frame to the endeffector (ee), expressed in the eqp -frame at time, t denotes the constant vector between the eqp-frame origin and the b -frame origin ­ precisely determined by common survey methods

  /  

 



The above equation clearly outlines the ability of the model to operate without the need to account for a different set of parameters for each sensor. In its basic form it requires three pieces of information: 1. The position of an object in any earth-centered-earth-fixed n-frame. In this research this position is provided by the integration of DGPS/INS.

39

2. The rotation matrix - comprised of three rotation angles, between two coordinate frames, the n-frame and the eqp-frame. In this research the rotations are derived from the orientation of the equipment with respect to the n-frame provided by the integration of DGPS/INS. 3. The position of an object in the eqp-frame. In this research

These three pieces of information are in standard form. Individually they may be manipulated without requiring a change to the unified model. For example, the rotation matrix could be limited to only one rotation and the coordinate vector of the end-effector could be reduced or expanded to account for any number of joints/link combinations, therefore, being applicable to almost any type of construction equipment.

40

3

Geo-Referencing the Equipment Body-Centre/Main-Body

This chapter will focus on outlining, in detail, the first of three steps to complete the development of a computer program to geo-reference construction equipment. The first step is to geo-reference the main-body of the construction equipment through DGPS/INS integration. In general, this chapter will outline the physical and mathematical models used by the computer program to integrate multiple sensors (GPS receivers and IMU).

GPS Master Receiver

GPS Rover Receiver

IMU

Aiding information

DGPS EKF

Inertial Navigation Processor

DGPS/INS Integration EKF

INS Corrections

Closed-loop corrections

Integrated navigation solution (closed-loop) Figure 3.1: Tightly coupled closed-loop GPS/INS integration architecture

41

Figure 3.1 shows the conceptual design and overall data flow of the computer program that was developed to integrate DGPS and INS. The figure shows that the program can be simplified into three distinct components: 1. The estimation of the DGPS baseline between Master and Rover receiver using an EKF. 2. The closed-loop, tightly coupled integration of DGPS/INS using an EKF. 3. The final output of the DGPS/INS EKF the corrected INS navigation solution.

42

3.1

DGPS Extended Kalman Filter

This research has chosen a popular method for processing GPS observations: double differences, see Figure 3.2. This was chosen for two basic reasons: 1. Double Differences are quite insensitive to shared changes of the positions of two receivers. 2. Double Differences are very sensitive to changes of one receiver (rover receiver) relative to another (master receiver). The result is that, over time, the double differences are able to calculate a baseline vector very precisely. This is due to reason number one above. By double differencing, or finding the difference between two receivers and two satellites, the factors affecting shared changes of positions can be eliminated, namely satellite clock errors and receiver clock errors. Furthermore, given a short baseline, which is reasonable for this research given the nominal size of a construction site and considering the master receiver would be set-up over a known point on the construction site, the effects of the ionosphere are negligible (Grewal et al., 2001).

43

Figure 3.2: Double Differencing - two receivers observe two satellites at a given time (Strange and Borre, 1997).

The ability of double differencing to precisely derive the baseline is of great importance because this allows for the determination of the ambiguity (the integer number of cycles between satellite and receiver). Assuming no a priori knowledge of the baseline component it is difficult to distinguish between the baseline and ambiguities at the beginning. However, over time and observing an increasing number of satellites, a baseline can be established that fits the double differenced observations. This is the fundamental concept to double differencing ­ to establish a baseline within a fraction of a cycle of the carrier signal. Once this is accomplished the ambiguity can be fixed to its integer value.

In order to establish the accuracy needed for the geo-referencing, carrier phase measurements must be used. For this reason, double differencing was the GPS technique of choice for the geo-referencing program.

44

To complete the first part of geo-referencing the equipment main-body - estimation of the baseline between master and rover receiver using an EKF ­ it was broken into two steps. The first step estimates the baseline and floating ambiguities (as real values not integers) using a least-squares approach before passing the estimated ambiguities into the LAMBDA (Least-squares AMBiquity Decorrelation Adjustment) method, developed by Teunissen (1995) to be fixed as integers. The baseline component is then updated using the fixed ambiguity resolution. The fixed ambiguity resolution is then used in the second step to create a total state EKF to calculate precise baselines.

The data used to create the geo-referencing system was from Leica dual frequency GPS receivers. This provided access to both the L 1 & L 2 carrier signal, the coarse/acquisition (C/A) code on the L 1 signal and the precision (P) code on the L 2 signal.

The basis for both phases of the DGPS EKF is the double difference phase observation equations adapted from Grewal et al. (2001):
3.1 3.2
           ,  =  -  -  +  +   +  ,  -            ,  =  -  -  +  +   + ,  - 

(3.1) (3.2)

where,   N 

denotes the pseudo-range from satellite to receiver denotes the wavelength of the carrier signal denotes the integer ambiguities between satellite and receiver denotes the Tropospheric delay

45

k,l i,j 1,2

superscripts denote satellite numbers subscripts denote the master and rover receivers subcripts denote L 1 and L 2 carrier signals

  With the double differenced phase term,   , at a specific measurement epoch, t,

understood to be:
3.3

  ( )        =  () -  () -  () -  ()

(3.3)

3.4

  ( )        =  -   -  -  

and  understood to be:

(3.4)

The N vector contains n*q, or m, integer unknowns, where n is the number of satellites and q represents the carrier signals L 1 , L 2 . Note that the integer values are fixed in time.

Rearranging the double difference phase observation Equations 3.1 and 3.2 and assuming q represents the carrier signals L 1 , L 2 :
3.5
           -  -  +  = ,  -   -  ,  - 

(3.5)

46

3.1.1

Baseline and Floating Ambiguity Resolution

Phase one calls for the least-squares method to solve for the baseline components in X B , Y B , Z B ECEF coordinates and floating ambiguities , for carrier signals L 1 and L 2

using the carrier phase difference observations. unknowns:  = [
3.7 3.6

Therefore there are two vectors of

 = [, ... ,



 ]

(3.6) (3.7)

where, n is the number of observed satellites.

, ... , ]

Linearizing the double difference phase observations results in:
3.8

   =  +  +  

(3.8)

The matrix  relates the baselines to the phase measurements while matrix  finds the time, usually at their starting values, while the term  accounts for all fractions at the
  contribution of the integers to each double difference. The ambiguities,   , are fixed in

start and all phase changes as the observations proceed. It goes without saying that enough observations must be made to account for both the baseline and ambiguities and it is the intention of this research to achieve good precision with a short series of observations (i.e. <30s).

47

side of Equation 3.5 with respect to the baseline components. The geo-referencing problem is a 3D problem so there are three baseline components.
3.9
 -    -    -    -    -    -  

3 is the Jacobian measurement matrix composed of the partial derivatives of the left

 = 

- 

- 

- 



(3.9)

where,

X,Y,Z denotes the position of the satellite k l j superscript denotes the reference satellite superscript denotes n observed satellites subscript denotes the rover receiver

The A matrix will contain as many rows as there are observations ­ two observations for each satellite, one on each carrier signal. It is also noted that the positions of the satellite are corrected with respect to the rotation of the earth over the signal transmission time.  is the Jacobian matrix composed of the partial derivatives of the right side of

Equation 3.5 with respect to the integer ambiguities, N. This results in a matrix composed of the wavelengths  q .
3.10

 =  n

where,

 

  

(3.10)

denotes the number of satellites observed and,

48

3.11

- -  =     -

negative 1's. The location of the replaced column depends on the reference satellite.

It should be noted that  is an identity matrix with one column replaced by a column of

   

   

    

(3.11)

The least-squares solution of the unknowns is:
3.12

where,
3.13

   = [   =  
-

]  [

]

-

 [

]  

(3.12)

  -

(3.13)

The covariance matrix of the double difference,  , which is well known as an nxn matrix populated by fours in the diagonal elements and twos in the off-diagonal elements (Strange and Borre, 1997). An example of this is:
3.14

  =  

  

(3.14)

As mentioned in the beginning of this section, the solution of the ambiguity can take a number of epochs. The solution of the baseline components and the ambiguity by leastsquares can be found in Equation 3.12, but because the solution of the ambiguities requires observing the double differences over a number of epochs, the problem becomes a least-squares solution of the cumulative effects of the observations. Therefore the 49

 equations are summed over a set number of epochs before the unknown vector,  , is  solved.

The solution of the ambiguities by the least-squares method results in real numbers. This is called the float solution and is passed into the pre-programmed LAMBDA method to obtain integer solutions for the ambiguities. The baseline components are then corrected as a consequence of changing float ambiguities to fixed integers.

The number of epochs used to fix the ambiguities is based on a threshold inserted into the program. The ambiguities have the characteristics that once they have been correctly resolved they are fixed and do not change for a period of time. A threshold to check this condition can be placed on one of several values. In this program the threshold is placed on the corrected baseline values. The corrected baseline values from consecutive epochs is tested, if there is no change the ambiguities have been fixed.

3.1.2

Baseline and Rover Receiver Position Resolution

Phase two solves for the baseline components only using an extended kalman filter (EKF). The EKF is chosen because the relationship between the observation equations phase double difference ­ and the unknowns ­ baseline components ­ is non-linear and therefore must be linearised.

50

3.1.3

The Extended Kalman Filter

If the EKF is to be used to solve the baseline components as well as the DGPS/INS integration it is necessary to take a look at the characteristics and data flow of an EKF. The EKF is an extension to the original Kalman filter so that it may be applied to nonlinear systems. Therefore this section will begin with an outline of the original KF followed by an explanation of the extension to an EKF.

The KF is generally considered a predictor-corrector algorithm. It begins with the prediction of the state vector and their covariance's using a transition matrix to model the system dynamics between the states over time. This is followed by the correction of the state vector, and their covariance's, using system measurements and the apply named Kalman gain matrix, which is unique to this algorithm, developed by Rudolf Kalman (1960). Figure 3.3 outlines the basic data flow of a closed loop KF.

51

Old State Estimate
+  -1

Old Error Covariance State Transition Matrix
+ -1

System Covariance Matrix

-1

State Propagation (Predictor)

Covariance Propagation (Predictor)

-1

(3.26)
Predicted State Measurement Covariance Matrix
-  

(3.27)
Predicted Covariance

-

Measurement Matrix



Kalman Gain (3.17) 
State Propagation (Predictor) (3.36) Covariance Propagation (Predictor) (3.19)



Measurement



New State Estimate

+  

New Error Covariance

+

Figure 3.3: Kalman filter data flow diagram. Adapted from Groves (2013).

52

The basic implementation steps of a closed loop KF are as follows: 1. Populate the state transition matrix, -1

2. Populate the system covariance matrix, Q -1

+  -x, 4. Propagate/Predict the error covariance matrix -1

+ -    3. Propagate/Predict the estimated state vector,  -1

5. Populate the measurement matrix, 

7. Calculate the Kalman gain matrix,  8. Input the observed measurements, 

6. Populate the measurement covariance matrix, 

10. Update/Correct the error covariance matrix, -  +

- +    9. Update/Correct the estimated state vector,  

11. Apply the estimated state vector (error states) to applicable measurements

The basic equations that follow the implementation steps are as follows: The estimated state vector propagation/prediction:
3.15

-  +  = - - The error covariance propagation/prediction:
3.16
 + -  = - -- + -

(3.15)

(3.16)

The Kalman gain matrix:

53

3.17
 -  = -      +  

-

(3.17)

The state vector update/correction:
3.18
- +  - - - +  =   +  ( -    )    =   +  ( )

(3.18)

The error covariance update/correction:
3.19
- +  = ( -   )

(3.19)

As discussed in the system overview section, the operation of the standard KF runs on a number of assumptions, but this is not the case in a DGPS baseline processor or DGPS/INS integration navigation. For example, in a standard KF both the measurement and system models,  & F-1 (the state transition matrix, -1, is computed from -1 )

are assumed to be linear. In order to handle the non-linearity, the standard KF is extended

to handle non-linear functions of the system and measurement, h(x) & f(x), hence the name Extended Kalman filter. All of the standard KF equations are used except where the measurement and system models are formed by linearizing their non-linear functions about the state vectors (Grewal and Andrews, 2008):
3.20

 =

() 



- = 

, - =

() 



+ = -

(3.20)

Also, the state transition matrix can be formed as in the standard KF, but now using the linearized system model adapted from Grewal and Andrews (2008): 54

3.21

- = (-)

(3.21)

where,  is the sampling rate of the measuring device.

In this research the state transition matrix is formed using a power-series expansion of the system matrix, -1 adapted from Groves (2013):
3.22

- =  =

  - 

!

   =  + - +  -  + - +   





(3.22)

In this research it was an important part of the EKF design to make a decision on where to truncate the above power series expansion. This was based on the size of the estimated states and the propagation interval, with the obvious trade-off being computing time.

3.1.4

DGPS Baseline Resolution

In order to solve the baseline components for specific GPS epochs a total-state (estimated state vector, x, is composed of the GPS baseline components) EKF was used. The usual implementation of an EKF produces an error state model. However, in this research, the DGPS EKF is concerned with outputting baseline components. The total-states can be tracked by adding the initial baseline components, 0 , to the error states,  . In the general case, the measurement matrix of the EKF is formed by linearizing the non- linear measurement model, ( ), as seen in Equation 3.20, where,   , is the starting

value or initial baseline components, 0 . This results in the error states being estimated, 55

the linearized measurement model (Strange and Borre, 1997):
3.23

i.e.,  . If the initial baseline components are added to the linearization, this results in

  -   = () +  

(3.23)

Which is then used as an input into the measurement innovation of the state estimate correction:
3.24
 

 + 

=

 - 

( - (() +  +   ))

(3.24)

To complete the conversion to a total-state EKF the initial approximation of the baseline components, 0 , are added to both sides of the state update: (3.25)
 +  -   -  

3.25

 +  + +  - (() +  ))       =    +  ( - 

This is the update equation for total-state rather than the usual error-state equation. Stated simply, the Kalman filter is correcting the a priori estimate by the

measurement/observation residual. Since the correction is being made inside the EKF, the incremental change,   , becomes zero. If the steps for the implementation of the general

+ , is combined with the state transition KF are followed, the updated state vector,  

- +1 , for the next matrix,  , in Equation 3.15 to produce the propagated/predicted state, 

epoch. In this type of system, where the state vector is made up of GPS baseline

components only, there is no statistical capability to predict a baseline from the previous estimate and therefore no need for any state transition matrix. Without the state transition 56

become:
3.26

- , and error covariance matrix, - , Equations 3.15 and 3.16 respectively, state estimate, 

matrix, -1 , the propagation/prediction equations of the EKF are simplified, and the

+ -  = -

(3.26)

3.27

+ -  = - + -

(3.27)

Removing the state transition matrix is the first of two major deviations of the total-state EKF to the steps of the general case. This results in no system dynamics to model and the system error covariance matrix, -1 , in Equation 3.27 becomes a diagonal matrix based

on the standard deviation of the baseline components, or more simply put, the ability of the double differenced DGPS to resolve the baseline components.

Continuing with the general steps for implementation of a KF, the measurement matrix,  , for the baseline calculation can be obtained from the least-squares solution for the

baseline components and ambiguity resolution. Recall that the least-squares solution from the previous section involved an augmented measurement coefficient matrix comprised of the measurement coefficient matrix for the baseline components, A, and the measurement coefficient matrix for the ambiguity resolution, G. This EKF is concerned only with solving the baseline components, so the least-squares measurement coefficient matrix for the baseline components, A, is equal to the measurement matrix,  , for the EKF. The measurement model also consists of the measurement error covariance matrix,  . How the  matrix is populated is based on the types of observations used to update 57

the EKF. In the case of single-receiver positioning using pseudo-range measurements, the  matrix would be a diagonal  matrix of pseudo-range error variances,  , under the

assumption that the errors in tracking the observed satellites at a given epoch are uncorrelated. However, in this research phase double-differenced observation equations are being used to solve DGPS baseline components and correlations must be accounted

for. The result is a non-diagonal  matrix composed of the product of the variance of the double differences, D:
3.28

double-difference receiver phase observation error,  2 , and the covariance matrix for   =          -  

(3.28)

wavelength of the carrier wave,  , using the equation adapted from Jekeli (2000):
3.29

noise ratio of the receiver,  /0 , bandwidth of the phase-lock-loop,  , and the
 

where, the standard deviation of the phase error,  , can be calculated by the signal-to-

 = 

where,  is in units of metres.





/

  

(3.29)

It should be noted that this research uses phase double difference equations for the observations (see Equation 3.3), which requires four phase observations for each double difference. This results in a double difference phase error of:
3.30

, =   

(3.30)

58

In addition to the phase error, the measurement noise error covariance matrix can also account for GPS-INS synchronization errors and multipath errors. The phase multipath error from a single reflected signal component can be defined by the excess signal path (multipath delay,  ), the direct signal amplitude to indirect signal amplitude ratio

(damping factor,  ) and the carrier signal wavelength,  , as (Georgiadou and Kleusberg 1988):
3.31

, =





- 

    +   

 



(3.31)

In practice, the multipath errors are the dominant source of error when compared to the receiver phase observation error. Several studies have tested the carrier phase multipath error using short baselines (<5km), as is the case for this research, where the multipath is the dominant error over the ionospheric delay. Common results are in the range of several millimetres which is roughly ten times the receiver phase observation error. Therefore the total phase error,  for this research is:
3.32
  =  , + ,

(3.32)

because of the dual frequency GPS receiver used in this research. Then  becomes:
3.33

It should be noted that the  matrix will actually be an  matrix, where  =    , ,  

 = 

,



(3.33)

59

where,  denotes the wavelength of the carrier signal and  can be a value of one or two denoting L 1 or L 2 .

The Kalman gain can now be calculated using - ,    using Equation 3.17. The second major deviation of the total-state EKF to the general case involves the measurement innovation of the KF. The measurement innovation of the total-state EKF is:
3.34

( -  -  )

(3.34)

3.35

           -  -  +  = ,  -   -  , 

- ) side of Equation 3.5 repeated here as: and left ( 

Which is the observation residuals or, more simply, the difference between the right (  )

(3.35)

It should be noted that the observed measurements from the right-side of Equation 3.5 include the resolved ambiguity resolution from the least-squares solution in Section 3.1.1. The final update/correction of the state estimation and error covariance matrix can now be made. The error covariance correction remains unchanged from the general case, while the state estimation correction uses the new measurement innovation and Equation 3.18 now becomes:
3.36

+  - -  =   +  ( -   ) 60

(3.36)

It is worth noting again that the ionospheric refraction is considered negligible from the phase difference observations because a short baseline (<5km) on a construct site is assumed (Jekeli, 2000). However, the reader should note that the tropospheric delay remains in the observation equations and must be dealt with. For this research a simple empirical model was used, based mainly on the zenith angle. The simple model was chosen because double difference observations are being used with a short baseline assumption and any satellites with an elevation angle of <10° are omitted. With these parameters a simple model will reduce the error to a level acceptable for the required accuracy of the system. The tropospheric delay math model is (Strange and Borre, 1997):
3.37

where,  z h

 = . 

+. ()+.     () 

+ .   

(3.37)

denotes the latitude of the receiver denotes the zenith angle from receiver to satellite denotes receiver height denotes constants for temperature in degrees Calvin and air and water vapour pressure in millibars, respectively.

 ,  , 

The tropospheric delay correction is applied to the initial calculated position of the master receiver. The research uses this position as the basis for the rover receiver position ( =  +  ). Thus assuring that the tropospheric delay correction is applied consistently throughout the program.

61

The final output for the DGPS EKF is the total-state baseline components. However, the desired input for the DGPS/INS integration EKF is the corrected pseudo-range from the receiver to each observed satellite. These are calculated using the equation adapted from Jekeli (2000):
3.38
   - , = / ,,  - / ,, 

(3.38)

where, t 

denotes the GPS epoch denotes the time of GPS signal transmission at epoch, t denotes the time of GPS signal arrival at epoch, t denotes the ECEF position of the satellite denotes the ECEF position of the receiver



  /

  /

Again, the final output for the DGPS EKF is the total-state baseline components yet the equation for the corrected pseudo-range above requires earth-centered-earth-fixed (ECEF) position of the main-body and/or rover receiver. The estimate of this position is computed by adding the estimated baseline components to the known position of the master receiver. The ECEF position of the receiver must also consider the receiver antenna offsets. These are dealt with in a traditional way, by applying the difference of the master and rover receiver antenna offsets and adding the offset to the initial calculated master receiver position. It should be noted that antenna offset vectors are given in local navigation coordinates and should be converted to ECEF coordinates before application.

62

3.2

Inertial Navigation Equations/Solutions

Figure 3.1 outlines the second and third components in geo-referencing the equipment main-body. This involves the integration of the DGPS/INS, more importantly it uses an EKF to integrate the output of the DGPS (corrected pseudo-ranges) and the predicted pseudo-ranges from the INS using the corrected inertial navigation solutions at the same time of validity as the DGPS pseudo-ranges/positions. By definition it is unclear as to which is the second and third component. The DGPS/INS integration provides the errors needed to correct the inertial navigation solution, at the same time, the inertial navigation solutions are used as an input into the DGPS/INS integration EKF. This is the nature of a predictor-corrector algorithm like the EKF. In this research the second component will be the inertial navigation solutions or the inertial navigation equations. This decision is made because in order to derive the matrices and equations involved in the DGPS/INS integration EKF, the inertial navigation equations are needed as reference.

This section defines the coordinate frame that this research uses for geo-referencing. The local-navigation-frame (n-frame) is used because it has the advantage of providing a navigation solution in a form readily used in construction design. This decision does come with trade-offs. The equations are significantly more complex than those used to derive the location in inertial or ECEF coordinate systems since the orientation of the resolving axes with respect to the reference frame depends on the position of the object.

63

Figure 3.4 outlines the general data flow of the local-navigation-frame (n -frame). There are four distinct steps to describe how the angular velocities and specific force measurements from the IMU's are used to update the attitude, velocity and position of the object.

Angular Velocity (from gyroscopes)
  /

Specific Force (from accelerometers)

 /
2.
Specific Force Frame Transformation (3.42)

System Covariance Matrix

Attitude Prediction
  (-)

1.

Attitude Update (3.40)

-1

Velocity Prediction
  / (-)

3.

 

Velocity Update (3.48)

Gravity Model
 

Position Prediction

 (-)  (-)
  (+)   / (+)

 (-)

4.

Position Update (3.55-3.57)

Attitude Update

Velocity Update

 (+),  (+),  (+)
Position Update

Figure 3.4: Block diagram of local navigation frame, n-frame, navigation equation updates. Diagram adapted from Groves (2013).

64

3.2.1

Attitude Update

From Figure 3.4 the attitude update of the n -frame uses the angular velocity input from the IMU as well as both the position and velocity prediction. This is a logical idea given the orientation of the n -frame axes change as the object moves with respect to to the earth. The base of the attitude update equation is the time derivative of the coordinate
 transformation matrix,  from the body-frame (b-frame) to the n -frame (Groves, 2013):

3.39
 

        =  / - /  -  /

(3.39)

The derivative is broken into three distinct terms:
 1.   / the inertially referenced angular velocity transformed to the n-frame

 3.  /  this is the transport rate, which models the rotation of the n -frame with

 2.  /  models the rotation of the earth with respect to the inertial frame (i -frame)

respect to the Earth

Obtaining a direct solution to the integration of Equation 3.39, in general, is not possible given that the variation of the position and velocity over the attitude update interval cannot be modeled directly. However, as in the case of the state transition matrix in the EKF, which is based on the system model, F, a reasonable approximation of the attitude update can be obtained by ignoring the variation of the position and velocity and truncating the power series of the exponential terms (angular velocity, earth rotation and transport rate) to first order terms. This results in an attitude update of (Groves, 2013): 65

3.40

  (+) =

 where   / (-) and  / (-) are defined as above and the calculations of these matrices  thesis.  is the sample rate of the IMU and  is the transformation matrix from the

  -   ...   /(-) +    /(-)   (-)

  (-)  +

 

   / 

-

(3.40)

can be found in the notations section under general conventions at the beginning of this

main-body frame of the excavator (b-frame) to the local navigation frame (n-frame) defined in the notations section under coordinate frames at the beginning of this thesis.

3.2.2

Specific Force Frame Transformation

The specific force transformation is simply the transformation of the specific force measured by the accelerometers from the body-frame (b -frame) to the n-frame (Groves, 2013):
3.41
   /() =  ()/()

(3.41)

a prediction (-) and correction (+) for the attitude matrix. Given the specific-force

 () is not specifically defined at any instant in time, t, because the EKF provides both 

measurement,  /, is an average over time t +  (the INS interval time), the coordinate n-frame is (Groves, 2013):
 , can be similarily averaged to resolve the specific force in the transformation matrix, 

66

3.42

 /() = 3.2.3

 

    (-) +  (+)/()

(3.42)

Velocity Update

In the n -frame the basis of the velocity update is the velocity update of the ECEF frame (Jekeli, 2000).
3.43
   / =  /

(3.43)

 can be found in the notations section under coordinate frames at the definition of 

 is the transformation matrix from the ECEF-frame to the n-frame. The where, 

beginning of this thesis.

After differentiating, the rate of change of velocity resolved about the n-frame results in the centrifugal and coriolis terms, as well as, the applied acceleration of the ECEF-frame velocity update in addition to a transport rate brought on by the rotation of the n-frame with respect to the Earth, thus (Jekeli, 2000):
3.44
 .    /      /       /  /  .

  /



=

-

+

          -    / / /

(3.44)

The acceleration can be expressed in terms of the specific force,  / , centrifugal acceleration and gravitational vector,  / , using equations(Jekeli, 2000): 67

3.45

   / = / + /

(3.45)

3.46

      / = / -  / / /

(3.46)

The equation for the rate of change of velocity then becomes:
3.47
        / = / + / ( ,  ) -  / + / /

(3.47)

 , is modeled by the latitude and height of the main-body. As is where, the acceleration, 

the case for the attitude update, obtaining a full solution is complex. However, the short

sample rate of the IMU results in small coriolis and transport terms and a small variation of the acceleration due to gravity, and therefore, it is a rational approximation to ignore these terms. The actual velocity update equations then become:
3.48
   / (-) + / () + /  (-),  (-) -    ...   / (-) + / (-)/ (-)

where,  , is the sample rate of the IMU. 3.2.4 Position Update

 / (+)

=

(3.48)

The basis for the position update equations are the time derivatives of latitude,  , longitude,  , and height,  (Jekeli, 2000).
3.49
 

 = - /, 68

(3.49)

3.50
   

3.51

 =  =

( )+ (( )+ )  
  /,

  /,

(3.50)

(3.51)

above equations with suitable initial approximations.
3.52

The latitude,  , longitude,  , and height,  , can then be obtained by integrating the

  = +   /,() +  () 
3.53

(3.52)

  = +   
3.54

 ( ())+()

  /, ()

 +  ()  + ()

(3.53)

  = + +   (

( ())+ ())   

  /, ()

(3.54)

Again, obtaining a full solution is difficult. However, as in the previous update equations there are variations that can reasonably be ignored and assumptions that can be made. The variation of the radius in the meridian,  , and the radius of the prime vertical,  ,

with respect to the latitude over the integration interval are minimal and can be ignored.

Furthermore, if the velocity is assumed to be linear over the integration interval, which is acceptable with a short sample rate, the discrete velocity at update time can be a simple average of the predicted and updated velocities (Groves, 2013). The final position update equations then become, in order:
3.55

 (+) =  (-) -

 

  /, (-) + /, (+)

(3.55)

69

3.56

 (+) =  (-) -
3.57

 



( (-))+ (-)
  / ,(-)

  / ,(-)

+

( (-))+ (+)

  / ,(+)


  /, (+)

(3.56)

 (+) =  (-) -

 

(

( (-))+ (-))  

-

 

(

( (+))+ (+))  



(3.57)

70

3.3

DGPS/INS Integration Extended Kalman Filter

The final component of geo-referencing the equipment main-body, as outlined by Figure 3.1, is the integration of DGPS measurements and the INS solutions. This is completed by the programming of a tightly-coupled, closed-loop EKF to integrate the output of the DGPS (corrected pseudo-ranges) and the predicted pseudo-ranges from the INS (obtained using the corrected inertial navigation solutions at the same time of validity as the DGPS pseudo-ranges). The coordinate frame for the EKF was defined in the previous section by the inertial navigation solution and will be the n -frame. It should be noted that this is the more common error-state EKF rather than the total-state adaptation used to calculate the DGPS baselines. The error-state EKF was chosen for this research due to the different operation rates of typical GPS and INS measuring devices. Typical GPS receivers will operate at one to ten measurement updates per second, where as it is common for IMU devices to operate at 100 measurements per second. This allows for several options for geo-reference update rates, however, it proves more difficult to program this as a totalstate vector. Therefore, this research uses the more common error-state KF model to simplify the programming load and therefore reduce the chances of introducing programming error.

To explain the DGPS/INS EKF the basic steps for a standard KF outlined at the beginning of this section will be used, they are repeated here for convenience: 1. Populate the state transition matrix, -1

2. Populate the system covariance matrix, Q -1 71

+ -    3. Propagate/Predict the estimated state vector,  -1

+  -x, 4. Propagate/Predict the error covariance matrix -1

5. Populate the measurement matrix, 

7. Calculate the Kalman gain matrix,  8. Input the observed measurements, 

6. Populate the measurement covariance matrix, 

10. Update/Correct the error covariance matrix, -  +

- +    9. Update/Correct the estimated state vector,  

11. Apply the estimated state vector (error states) to applicable measurements

3.3.1

The System Model

The first step in creating the integration EKF is to populate the state transition matrix, -1 . In order to create the state transition matrix, the states that the matrix is being applied to must be defined. This depends on the application, inertial sensors and integration architecture. This research uses an error state EKF with an INS that provides full orientation and position solution. Therefore the error states to be modeled are a combination of the error states of the two measurement techniques being used, DGPS and INS. In a tightly coupled integration the error-state vector includes:
3.58

  =    The error states of INS, , are as follows:

(3.58)

72

3.59
   = /

where, 

 /





 



(3.59)

denotes the accelerometer bias in the three accelerometer axes denotes the gyroscope bias in the three gyroscope axes

  / denotes the error in the velocity ­ north, east, down

  / denotes the error in orientation ­ pitch, roll and yaw



3.60  = [



denotes the error in position ­ latitude, longitude, height, thus,  becomes:   ] (3.60)

3.61

The error states of DGPS, , are as follows:  


   = /

(3.61)

However, because of common errors, when the two error states are combined the total error state,   , becomes:   /    

3.62

 =  /



(3.62)

Therefore there are 15 error-states, in total, to be estimated: 1-3 4-6 7-9 Orientation error ­ pitch,  , roll,  , and yaw, 

Velocity error ­ northing, N, easting, E, down, D Position Error ­ latitude, , longitude, , height, h 73

10-12 Accelerometer Bias ­ one for each of the three orthogonal axes

13-15 Gyroscope Bias ­ one for each of the three orthogonal axes

The system model for a DGPS/INS integrated system is created separately in their own system because there is no interaction between the DGPS and INS at this level ­ the two systems interact through the measurement model. Therefore the models are combined using augmented matrices, where:
3.63

 = 
3.64

  

        



(3.63)

  =   
3.65

(3.64)

  =   

(3.65)

It should be noted from Equation 3.62 that there are no GPS states estimated due to the fact the technique of DGPS is being used. The differencing of GPS measurements across satellites in DGPS cancels out the receiver clock errors, enabling the GPS clock states to be omitted. Therefore, the augmented matrices of the system model (Equations 3.63 to 3.65) are simplified to the INS system model only.

Given the equation above, and as was discussed in Section 3.1.3, the state transition matrix, , is obtained by solving the power series expansion of the system model, F. Therefore the system model for INS must be defined. The system model for the INS is

74

calculated by taking the partial derivatives of the rate of change of errors in attitude, velocity, position and biases of the accelerometer and gyroscope. Essentially, it is a Jacobian matrix where the equations for the dynamics are adapted from Groves (2013):
3.66
         / = / / + / -  /  + / -  /   

(3.66)

3.67





 / =

         -  /  / - / +  / / -
     /   / -  /  +       /

   ( )

 ( )

 + 

(3.67)

3.68


   / - /  +  

3.69




 = 

( )+

  /,

+(

( )+ )

  / ,

 -( 
 / ,

(3.68)

3.70
 



 = (

( )+ )  

 / ,

+(

( )+ )  

  / ,   

( )+ )  



(3.69)

    where,  / - /  is the error of the earth rotation rate and,  / -  /  is the error

 = - /,

(3.70)

of the transport rate expanded from Equation 3.39. The errors of these two terms are defined by Groves (2013) as:

3.71

 /

-

  /

  = - /      

(3.71)

75

3.72

 ( ( )+ )   ( ( )+ )          -         / ,  ,  ,          -  = + +  /  / (( )+ )    ( )+ )  (( )+ )  (    -   ,     ,     (( )+ )   (( )+ )  Populating the system model matrix results in a matrix with block coefficients.
3.73

  ,

 - ,

(3.72)

 

  , , =       

, , ,  

, , ,  

     

           

(3.73)

The block coefficients are necessary substitutions because their partial derivatives result in matrices with large coefficients that make the size of the system model difficult to distinguish. For the explanation of the EKF the block coefficient model will suffice. The actual coefficients represented by the blocks can be found in Appendix A.

The total state transition matrix can then be calculated by solving the system models using the power series expansion. In the case of the INS there is a decision to be made regarding where to truncate the power series i.e., the magnitude of each higher-order term should be examined with respect to its effect on the integration program performance. It should also be noted that the EKF should be implemented at the rate of the DGPS measurements (provided a worst-case scenario of 1Hz) in order to keep the variation of variables used in the state propagation low to avoid power series convergence problems.

76

The system error covariance matrix for integration is also an augmented matrix. The INS system error covariance matrix is diagonal. The main sources of error are random walk errors. These are random walk of the attitude error due to angular velocity measurement noise ( ), random walk of the velocity error due to specific force measurement noise ( ). The total system error covariance matrix then becomes:
3.74

( ), the variation of the accelerometer bias (  ) and the variation of the gyroscope bias

/ where,   

  =   

      

     



    

     



             



(3.74)

denotes the time interval between successive accelerometer and gyroscope observations denotes the accelerometer bias correlation time denotes the gyroscope bias correlation time denotes the time interval of the state propagation, in this case the GPS measurement interval



3.3.2

The Measurement Model

Upon completion of the system model for DGPS/INS, the second half of the EKF, the measurement model can be defined. This consists of, in order, the measurement 77

-  innovation,  , , the measurement matrix,  , and the measurement error covariance,

 .

The measurement innovation for a tightly-coupled DGPS/INS EKF involves the difference between the DGPS measured pseudo-range and pseudo-range rates and those same values predicted by the corrected inertial navigation solutions at the same DGPS time of validity, t. However, when the pseudo-ranges are carrier derived, as is the case with this research, there is no benefit in using pseudo-range rates in the measurement innovation vector (Farrell and Barth, 1999). Although this research uses carrier derived pseudo-ranges, the differences of the pseudo-range rates will remain a part of the measurement innovations. The measurement differences are:
3.75
-  - - - , = ( -   )  ,  -   , ... ,  - 

(3.75)

3.76

- - - -  , =   -   ,   -   , ... ,   -   

(3.76)

where, n t 

denotes the number of satellites denotes the validated time denotes the corrected pseudo-range from the DGPS EKF (see Equation 3.38) denotes the estimated pseudo-ranges calculated with the corrected inertial navigation solutions denotes the corrected pseudo-range rates from the DGPS EKF (see Equation 3.38) denotes the estimated pseudo-range rates calculated with the corrected inertial navigation solutions 78

-  

-  

 

Then the measurement innovations vector is:
3.77

- , -  = -  , - Groves (2013), to estimate the pseudo-ranges,  - ,, and pseudo-range rates,  ,:


(3.77)

The corrected inertial navigation solutions use the following equations, adapted from

3.78

 -  -  - , = / ,,  - /,  / ,,  - /, 

(3.78)

3.79

where, st
  /

-    -  , = , / ,,  - /, 

(3.79)

subscript denotes the time of GPS signal transmission denotes the ECEF position of the satellite denotes the ECEF velocity of the satellite denotes the predicted (the `­` superscript denotes a predicted value) ECEF position of the receiver output by the inertial navigation equations denotes the predicted ECEF velocity of the receiver output by the inertial navigation equations

-  /

  /

-  /

It should be noted that the above equation uses an ECEF-frame, where as the integration EKF is based in the n-frame. This is chosen because calculating the pseudo-range directly from curvilinear positions is complex. This is an acceptable choice because the measurement innovation results in a difference of distance and is therefore not affected 79

by the change of coordinate frames. Recall that the corrected inertial navigation solutions for position,  (Equations 3.55-3.57) are solved using curvilinear coordinates. Therefore, prior to their input into the pseudo-range estimate (Equation 3.78) they must
 be converted to ECEF-frame positions,  / :

3.80

 /

antenna.

 where,  / is a vector accounting for the lever arm from the INS to the DGPS receiver

( ( ) +  )       =  ( ( ) +  )      +    / (( -  ) ( ) +  )  

(3.80)

Equation 3.80 also introduces the physical model of the DGPS/INS integration. To create a DGPS/INS integrated geo-referencing system, two pieces of hardware are required at the point to be geo-referenced - the DGPS receiver and the IMU (usually three accelerometers and three gyroscopes that provide measurements for the INS). However, it is physically impossible to locate the DGPS receiver antenna and the centre of the IMU at the same point. In most cases, because the IMU is the main source of orientation measurements, it is placed at the point to be geo-referenced and the DGPS receiver antenna is placed at some known distance away. The lever arm is the vector representing the position of the DGPS receiver antenna with respect to the IMU body-centre. Whenever the DGPS/INS integration is used to position the system the lever arm must be accounted for along with the transformation from the lever arm frame (b -frame) to the resolving frame of the position (in this case the n -frame) (Groves, 2013):
3.81
   / =  /

(3.81)

80

where,
  /     /

denotes the lever arm, which is the known difference between the GPS receiver antenna and the INS body-centre in the b -frame denotes the transformation of the lever arm from the b -frame to the georeferencing frame, in this case the n -frame denotes the lever arm resolved in the geo-referencing frame

The measurement matrix is developed to relate the measurement innovations to the error states. This results in a Jacobian matrix populated by the partial derivatives of the measurement innovations with respect to the error-states. This results in the 2   × 15

(from n pseudo-range measurements and n pseudo-range rate measurements by the number of error states) measurement matrix:
3.82

 ,

where, from Groves (2013):
3.83

        =       

  ,

   ,    ,

    



, ,  ,     

       

              - ,,]

(3.82)

, = [( ( ) +  ) ,,

( ( ) +  )    ,,

(3.83)

navigation position solution error in the NED-coordinate frame. 81

 - The line-sight-unit vector,  , , relates the measurement innovation,  , to the

To finalize the measurement model the error covariance matrix,  , for the measurements must be defined. The observed measurements used in the EKF are the corrected pseudoranges and pseudo-range rates from the double-differenced phase observations (see Equation 3.38). Since these are DGPS observations, the  matrix uses similar values to one significant difference. The EKF for the DGPS baseline components (DGPS-EKF) uses double-differenced phase observations as the measurements where the DGPS/INS EKF uses DGPS pseudo-ranges as the measurements. Consequently, this results in a significant difference between the  matrices. In the case of DGPS-EKF the  matrix is

those in the EKF used to resolve the DGPS baseline components (see Section 3.1.4) with

non-diagonal to deal with the correlated errors of the phase double-difference. However, the pseudo-range measurements of the DGPS/INS EKF resemble the single-receiver

positioning case, which results in a diagonalized  matrix with constant values of the uses the simple difference between consecutive DGPS epochs to calculate the DGPS total phase errors,  , for the pseudo-range measurements. Furthermore, this research

receiver velocity. Since the pseudo-range rate measurement is based on the receiver velocity it follows that the pseudo-range rate error is also represented by the phase error. Thus,  becomes a 2  2 diagonal matrix populated by  :
3.84

  =   

where,  is defined in Section 3.1.4 by Equation 3.32.

  

   

(3.84)

82

The total phase errors in the DGPS-EKF are defined by the wavelengths of the carrier signal. These were separated in the  matrix of the DGPS-EKF. However, in the

DGPS/INS EKF the phase measurements are linearly combined, in the precise positioning of the receiver, to calculate the corrected pseudo-ranges. This requires a linear combination of the total phase errors of the carrier waves, 1 & 2 (Wanninger and May, 2000):
3.85

 =    +    where, 1 , 2 denotes the total phase error of original signal

(3.85)

1 , 2 

denotes the coefficients of the linear combination which vary based on the type of combination (i.e., wide-lane, ionosphere free or geometry-free) denotes the total phase error of the linear combination

This research assumes a master receiver location on the construction site, and therefore, can also safely assume short baseline lengths (<5km) due to the small size of most construction sites. This allows for a geometry-free (ionospheric) linear combination of 1 & 2 since the ionospheric effects can be considered negligible for short baselines and

Forming these types of linear combinations results in the multipath effects of Equation 3.31 to be amplified. The amplification due to wide-lane and ionosphere-free are much

results in coefficients of 1 & 2 to be 1 & -1, respectively (Wanninger and May, 2000).

more significant, however, due to the coefficients of 1 & -1, the amplifications for the geometry-free linear combination are minimized. The average error is on the same order of magnitude as the larger of the two carrier wavelength errors, 1 & 2 (Wanninger 83

is dominated by the linearly combined multipath phase error commonly less than 10mm.

and May, 2000). As in Section 3.1.4 the total phase error of the linear combination, ,

The  matrix then becomes a  diagonal matrix of the total phase error of the linear combination:
3.86

  =    3.3.3

  



  


(3.86)

Correction of the Inertial Navigation Solution

The final output in a DGPS/INS EKF is the integrated navigation solution. This solution comes from the corrected inertial navigation equations discussed in Section 3.2. Therefore, the final step in the EKF is the correction to the inertial navigation equations. In a traditional integration architecture, like the one developed for this research, the EKF is error-state with a separate inertial navigation processor (see Figure 3.1). In this form, the corrections are supplied by the error-state vector on every EKF iteration. The errorstate vector model is repeated here for reference:
3.87

 =  /

  /





 



(3.87)

The closed-loop correction architecture was chosen for this research because it minimizes the size of the error-states, which has the benefit of minimizing the linearization errors in the system model (see Section 3.3.1). In this form, the orientation,  /, velocity, 84

where they are used to correct the inertial navigation equations (see Figure 3.1). In this

 / , and position,  , error estimates are fed back to the inertial navigation processor

research, the feedback occurs on every EKF iteration, however, the feedback may occur over longer periods. After each feedback the error-states of the orientation, velocity and position are zeroed.

In the closed-loop correction architecture the accelerometer,  , and gyro,  , errors are also fed back to the system. These are used to correct the IMU measurements. Unlike the orientation, velocity and position corrections, accelerometer and gyro errors must be used on every iteration of the inertial navigation equations. In this research, the inertial navigation processor stores the accelerometer and gyro error estimates and the EKF estimate changes to these errors. The accelerometer and gyro error changes are then zeroed after every EKF iteration.

The closed-loop error corrections are applied prior to the inertial navigation equations using the following equations from Groves (2013):

For the orientation errors:
3.88
    (+) = ( - / ) (-)

(3.88)

For the velocity errors:
3.89
   / (+) = / (-) - /

(3.89)

85

For the errors in position:
3.90

 (+) =  (-) -  or,
3.91

(3.90)

 (+) =  (-) - 
3.92

(3.91) (3.92) (3.93)

 (+) =  (-) - 
3.93

 (+) =  (-) -  For the accelerometer errors:
3.94
     =  - 

(3.94)

For the gyro errors:
3.95
     =  - 

(3.95)

where, (+) 

denotes the orientation, velocity and position estimates after the correction denotes the orientation, velocity and position estimates prior to corrections denotes accelerometer and gyro measurement estimates

(-)

86

3.4

Attitude Initialization

As will be seen in the following section, the INS calculates a navigation solution by integrating the inertial sensor measurements. The integration measures the change in attitude velocity and position and applies it to the previous navigation solution. Thus, before an INS can be used to provide a navigation solution, the position, velocity and orientation of the INS must be initialized. An external source is needed to initialize the position and velocity. In a DGPS/INS integrated system the DGPS solution from the previous section can be used for the position and velocity. However, because of the stationary nature of most construction equipment the DGPS solution is not well suited to provide the initial orientation. Therefore, the orientation must be initialized by the INS itself by sensing the gravity and the Earth's rotation. This process can also be referred to as alignment because in a platform INS, the inertial instruments (IMU) are physically aligned with the axes of the local navigation frame (Groves, 2013).

In the case of a stationary INS, self-alignment can be used to initialize the roll, , and

yaw, , angle initialization is not as achievable and requires navigation-grade IMU. This research utilizes navigation-grade IMU so the method of direct gyro-compassing can be used to initialize the yaw angle. In the presence of poorer grade IMU the method of indirect gyro-compassing is used.

pitch, , angles with all but the poorest quality IMU sensors. However, the heading or

87

3.4.1

Levelling

This method is used to initialize the roll and pitch. The principle behind the method is that when the IMU has no horizontal acceleration component (stationary or constant velocity INS) the only specific force acting on, and sensed by, the IMU is the reaction to gravity, which is approximately the down direction of the local navigation frame. The attitude,   , can then be solved using the equation (Groves, 2013):    
 =   , ( ,  )

3.96

 

(3.96)

 matrix The right side of the equation results in the product of the third column of the,   (defined in the notations section of this thesis) with the gravity component,  , (Groves,

2013):  ,
,

3.97

  -          = , , ( ,  ) -     

(3.97)

The solution to the above equation is over-determined and, therefore, the roll and pitch can be calculated without knowledge of the gravity using the following equations (Groves, 2013):
3.98

 = - 

  , +,

 ,






(3.98)

88

3.99

 = -  3.4.2

- , - ,



(3.99)

Gyro-Compassing

This method is used to initialize the yaw angle. Gyro-compassing is based on the fact that when the INS is stationary the only rotation it sensed by the IMU is the Earth's rotation. This is in the z direction of the ECEF-frame. Measuring this rotation in the body, or b frame, results in the yaw angle.

Direct gyro-compassing uses the gyros, directly, to measure the earth rotation. In this case the attitude,   , is obtained using (Groves, 2013):
3.100

 

=

    ( ,  ) 

   

(3.100)

Given that the only sensed rotation in the ECEF-frame is the Earth's rotation. Using the
 definition of  in the notations section of this thesis and substituting into Equation 3.100

and rearranging results in (Groves, 2013):
3.101

       =    -   

(3.101)

If the roll and pitch angles have already been determined, the idea that the Earth's rotation vector has no east component in a local navigation frame can be used to remove
 in the notations section of this thesis, the need for the latitude. Using the definition of 

89

and applying it to Equation 3.101 the yaw angle can be determined with respect to the roll, pitch and gyro rates (Groves, 2013):
3.102
   = - ,   + ,  

(3.102)

3.103

    =  ,   + ,     + ,    

(3.103)

3.104

 = -  3.4.3

 

 



(3.104)

Fine Alignment

The method of gyro-compassing, with sufficiently accurate gyroscopes, provides a good initial estimation of the yaw angle. However, most navigation applications require attitude determination to <1mrad to minimize position and velocity drift. Most attitude initialization techniques, including gyro-compassing cannot achieve this accuracy. Therefore, the coarse alignment of gyro-compassing must be followed by a period of attitude calibration or fine alignment.

Construction equipment, in particular, excavators often spend extended periods of time stationary. Therefore, a quasi-stationary technique for fine alignment can be used in this research. This method proceeds using the inertial navigation equations defined in Section 3.2 and a DGPS/INS EKF state vector and system model as defined in Section 3.3.

90

Therefore, the DGPS/INS EKF developed for this research can also accept the stationary or zero velocity measurements during the initial alignment phase.

Given the state vector of Equation 3.62
3.105

 =  /

  /





 



(3.105)

The measurement innovation and measurement matrix depend on the length of time the measuring device is stationary. For alignment periods greater than a few minutes position displacement measurements are used. For any periods shorter than this zero velocity updates should be used.

Fine alignment using position displacement measurements have the following measurement innovations,  , and measurement matrix,  (Groves, 2013):
3.106

where  is the alignment start time
3.107

 =  ( ) -  ()  = [  -

(3.106)





 ]

(3.107)

Fine alignment using zero velocity updates have the following measurement innovations,  , and measurement matrix,  (Groves, 2013):
3.108

 = - 

(3.108)

91

3.109

 = [

-







 ]

(3.109)

In both cases these measurement innovations and measurement matrices can be added as another row in the DGPS/INS EKF developed in Section 3.3 with an appropriate variance value added to the measurement covariance matrix, . The addition of the zero velocity update provides a unique advantage and makes the EKF developed for this research particularly well suited to construction equipment. Typical construction equipment movement results in many start-stop combinations. During the stop ­ when the equipment is stationary ­ the zero velocity update can be used to aid in INS calibration. The zero velocity update is chosen over position displacement because the time of stationarity is expected to be too short of a period for position displacement to be effective. The problem then becomes how the program automatically detects stationarity, as the zero velocity updates can only be applied if the equipment is stationary.

92

4

Relative Positioning of the End-Effector

This chapter will focus on outlining, in detail, the second of three steps to complete the development of a computer program to geo-reference construction equipment. The second step was to position the end-effector relative to the main-body, using an open kinematic chain. This chapter will outline the forward kinematics technique and the combination of homogeneous transformation matrices and the Denavit-Hartenburg convention used by the computer program to create a systematic procedure for relatively positioning the end-effector.

INS b-Frame Zb GPS Receiver/INS Yb

Zeqp

Yeqp Xeqp

Xb INS IMU Y0 IMU(Rotary Angle Sensors)

Zn


Z0 O-Frame ­ Inertial Frame of Reference

CPU X0

 /  





Y3

Yn Target Point/ end-effector (ee)

Z3

X3

 

n-frame

Xn

Figure 4.1: Detailed diagram of the elements of the geo-referencing system

93

Figure 4.1 shows the entire geo-referencing system for construction equipment. This shows the importance of the open kinematic chain between the end-effector and the main-body of the construction equipment, labeled in Figure 4.1 as the position vector,  .


94

4.1

Forward Kinematics of an Excavator

In the introduction to this research it was stated that the roots of machine controlled construction equipment were considered to be robotic engineering, in particular, the theory of forward and inverse kinematics. To relate that theory to this research, the problem of positioning the end-effector with respect to the main-body is considered to be positioning a rigid robot since construction equipment is considered a rigid body. By definition, a rigid body is a body with finite dimensions which maintains the property that the relative positions of all its points, defined in a coordinate frame within the body, remain the same under rotation and translation (Goldstein, 1980). Therefore, in this research the positioning of the end-effector will be considered a forward kinematics problem - noting inverse kinematics deals with machine control of construction equipment.

The solution of forward kinematics involves the development of an open kinematic chain to determine the position of an end-effector. In this research, the forward problem is to determine the position of the end-effector given the values for the joint variables of the excavator. An excavator is composed of simple revolute joints, therefore the joint variables are the angles between the links (boom, arm and bucket of excavator). The advantage of simple joints is that they have a single degree-of-freedom of motion and the action of each joint can be modeled by a single real number: the angle of rotation of the revolute joint. The objective is to determine the cumulative effect of the entire set of joint variables.

95

A typical excavator can be defined by n joints (where n = 3) with n+1 links, since each joint connects two links. Therefore the joints are numbered from 1 to n, and links from 0 to n, starting from the first joint of the excavator, as in Figure 4.2. For example, joint i connects link i-1 to link i. Now consider the location of joint i to be fixed with respect to link i-1. Therefore, when joint i is actuated, link i moves and link i-1 is fixed. The ith joint is associated with a joint variable, q i . In the case of an excavator with revolute joints, q i is the angle of rotation,  .
Zeqp Zb
GPS Receiver/INS

Yeqp Xeqp

Y1

X1

Yb

Joint 2 link 1
Xb

Z1

link 2

Rotary Sensor

Joint 1 link 0
Y0 X0 Z0 Rotary Sensor

Joint 3 link 3
Y2 Z2 X2 Z3 X3 Y3

Figure 4.2: The excavator defined by forward kinematics

is attached to link i. Therefore, whatever motion the excavator executes, the coordinates of each point on link i are constant when expressed in the ith coordinate frame. 96

Kinematic analysis rigidly attaches a coordinate frame to each link. For example,  ,  , 

resulting motion. The frame 0 , 0 , 0 , which is attached to link 0, is referred to as the inertial frame of reference. In this research the inertial frame of reference is the first joint of the excavator. To perform the kinematic analysis each coordinate frame must be related and/or transformed in a sequential manner to the inertial frame of reference (coordinate frame O) as seen in Figure 4.2. Each transformation requires a measured rotation and translation. Therefore, this research needs a uniform mathematical model that describes both translation and rotational components. This requires the use of Homogeneous transformation (HT) matrices.

Furthermore, when joint i is actuated, link i and the attached frame,  ,  ,  , experience a

4.1.1

Homogeneous Transformation Matrices

Consider the simple 2D case in Figure 4.3.

Yi-1

Yi P pi pi-1 oii-1 Oi vi Xi

vi-1

Oi-1



Xi-1

Figure 4.3: Vector and point transformations between two planar links' coordinate systems (Koren, 1985).

97

  , and translation, -1 , where, -1

 The total transformation, -1 , from coordinate system -1 to  requires a rotation,

4.1

 - =  and
4.2

   

-     

(4.1)

 - = 

where, a i is the total amount  is translated parallel to -1 To relate this to the research consider point, P, the end-effector of the construction equipment and coordinate system, -1 , the construction equipment main-body (bmust allow a vector summation of  and -1 . The ability to perform this vector

      

(4.2)

frame). Now, in order to position point, P, in  with respect to -1 , the transformation summation in a matrix form is the result of adding the component 1 to the homogeneous representation. The HT matrix of the above example is (Koren, 1985):
4.3

T

i i -1

 Rii-1 = 0 0

oii-1   1  

(4.3)

 . Note the added component 1. This results in a 2D transformation and translation, -1

 , This is referred to as a homogeneous displacement matrix representing a rotation, -1

98

being represented by a 3x3 matrix. This research deals with 3D positioning and therefore uses 3D HT matrices, which are represented by a 4x4 matrix:
4.4

 Rii-1,3 x 3 i Ti - =  1 0 0 0

oii-1,3 x1   1  

(4.4)

Consequently the 3D homogeneous representation of a vector consists of four components (Koren, 1985):
4.5

 = [





]

(4.5)

Thus, the homogeneous displacement matrix is used to transform the position vector of the end-effector, from the frame of the end-effector (ee -frame) to the frame of the equipment (eqp-frame). The limiting factor of homogeneous transformation is that an HT matrix must be developed for each joint. Figure 4.4 depicts reference frames rigidly attached to links in the case of an elbow manipulator. This represents the case of an excavator as seen in Figure 4.2.

99

X1 Y1 Y2 Z1 2 Link 2 a3 X2 Link 1 Z2 3 Link 3 P a1 Z3 Y0 X3 Y3

a2

Z0 1 X0

Figure 4.4: The links' coordinate systems and joint parameters for an elbow manipulator/excavator

Note that the configuration for an excavator manipulated arm requires three HT matrices
 and that each HT, -1 , is not constant, but varies as the configuration of the excavator is

changed. Therefore in order to position the end-effector in the eqp-frame the individual

HT matrices need to be combined. This is referred to as chaining HT matrices and results in an open kinematic chain or open traverse between the end-effector and main-body. This is done by multiplying successive HT matrices (Koren, 1985):
4.6
i -1 i 2 T ji = T j j +1T j j++ 1 ...Ti - 2 Ti -1

(4.6)

100

In this research, and with reference to Figure 4.2 and Figure 4.4, expressing the endeffector in the eqp-frame results in:
4.7
    =   

(4.7)

by notation:
4.8

where,  0 denotes the position of the end-effector in the inertial frame, or, eqp-frame and


 =  4.1.2 Implementing the Denavit-Hartenburg Convention

(4.8)

The development of the open kinematic chain was further simplified by a few assumptions, namely, the Denavit-Hartenburg convention for the selection of coordinate frames of the moveable joints. This convention can be applied to any open kinematic chain that has a single degree of freedom at each joint (revolute or translational). Furthermore, at the beginning of this section it was stated that, in the case of the excavator, all joints of the excavator manipulated arm are considered simple revolute joints with only one degree of freedom.

Applying the DH convention greatly simplifies the HT matrices. A usual 3D transformation requires six parameters ­ 3 angles and 3 translations. Upon application of the DH convention this was reduced to four ­ two angles and two translations. After numbering the links and joints of the excavator as in Figure 4.2 the DH convention was implemented by the following method (Koren, 1985): 101

1. Establish the links coordinate systems according to the following rules: a. The Z i-1 axis is chosen as the axis of motion. On an excavator link i rotates with respect to link i-1 around the positive Z i-1 axis. b. The X i axis is chosen perpendicular to Z i-1 axis (i.e., it is perpendicular to both Z i-1 and Z i ). c. The Y i axis is chosen to complete the right-handed coordinate system 2. Define the joint parameters ­ which are the four geometric quantities  , d i , a i ,  . around -1 axis.

a.  ­ is the angle between -1 and  , obtained by screwing -1 into  b. d i ­ is the coordinate of the origin of O i frame on the Z i-1 axis, i.e., the distance between the origin O i-1 frame to the intersection of the Z i-1 axis with the X i axis. In the case of the excavator d i is a constant. c. a i ­ is the distance between Z i-1 and Z i axis measured along the negative direction of X i from its origin to where it intersects the Z i-1 axis (a constant parameter). d.  ­ is the angle between the Z i-1 axis and the Z i axis, obtained by screwing the Z i-1 into Z i around the X i axis (a constant parameter).

102

4.2

Positioning the End-Effector

The coordinate selection method of the DH convention not only simplifies the HT matrices but also provides a unified math model for creating the open kinematic chain, or more simply put, positioning the end-effector in the eqp-frame. In this context, unified means that the model can be applied to all construction equipment without the need to account for a different set of joint parameters for each joint. In this case the HT matrices are set up using the DH convention such that no matter what type of joint is being used (revolute or translational) the measurements can easily be input into the model to position the end-effector. As stated previously, all of the joints of the excavator are revolute joint. Thus, using the DH convention for this research, the joint parameters for the excavator manipulated arm are:

Table 4.1: Joint parameters for the excavator manipulated arm

Joint 1 2 3

Joint parameters  di 0 0 0 ai a1 a2 a3  0 0 0

  

103

According to the DH convention, Figure 4.2 and Figure 4.4 these joint parameters are based on the inertial frame, 0 -frame, which has the Z-axis perpendicular to the plane of motion of the excavator manipulated arm and the X-axis in the excavator forward direction of motion. In order to position the end-effector appropriately the inertial frame (0-frame) must be related to the equipment-frame (eqp-frame) as is defined by the position vector of the end-effector with respect to the eqp-frame in Figure 4.1. It should also be noted that the eqp -frame is coincident with the body-frame, or b -frame, defined by the INS. Relating the 0-frame to the eqp-frame can be accomplished through the DH convention by including the eqp-frame as a DH defined coordinate system. Superimposing this eqp-frame over the inertial frame (0 -frame), as in Figure 4.5, illustrates that the direction of the X-axes of both the eqp -frame and 0 -frame coincide. This also holds by definition as the DH creation of the inertial frame defines the 0 axis

in-line with the manipulated arm of the excavator which is the forward direction of

motion of the excavator while the eqp-frame (coincident with the b -frame) defines the Xaxis as the forward direction or usual direction of travel. Superimposing also shows that the Z-axis of the eqp-frame is orthogonal to  , or pointing in the direction straight

above the excavator, lying in the plane of motion of the excavator manipulated arm while the Z-axis of the 0 -frame is perpendicular to the plane of motion. The DH convention then defines the relationship between the eqp-frame and 0 -frame using the parameter,  ,

the angle from the Z eqp axis to the Z o axis around the X o axis. The other parameters of

the DH convention,  ,  ,  , are defined as zero.  &  because the eqp -frame is superimposed on the 0-frame and therefore their origins coincide and  because

104

the excavator 0 is a constant angle of 90 degrees.
X1 Y1

 & 0 axes coincide and their there is no rotation about the  axis. In the case of

a2 Y2 Z1 2 Link 2 a3 X2 Link 1 Z2 3 Link 3 Y3

a1
2

Zeqp Z3 Y0 Yeqp Point P or ee X3

Z0 1

X0



Xeqp

Figure 4.5: The links' coordinate systems and joint parameters for an elbow manipulator/excavator with the eqp-frame superimposed

The addition of the 0 angle also adds one joint to the joint parameters for the excavator

defined by the DH convention in Table 4.1. The 0 angle is added prior to the kinematics of the excavator manipulated arm, therefore the joint added to the joint parameters of the excavator is added prior to the first joint. The final joint parameters for the excavator using the DH convention then becomes:

105

Table 4.2: Final joint parameters for the excavator manipulated arm

Joint 0 1 2 3

Joint parameters  0    di 0 0 0 0 ai 0 a1 a2 a3  0 0 0

+90°

because in the case of the excavator, links connecting the joints are constant i.e., the boom, arm and bucket have fixed lengths, the values of  are measured once and

It should be noted that in this research the parameters defined by,  , are constant. This is

considered to be constant. Only one parameter is constantly changing over time,  , the angle between the body, boom, arm and bucket or - , - and

real-time techniques with test data. The test data was simulated data based on sensor specifications from readily available sensors. As stated in the system requirements

-. The geo-referencing computer program of this research was designed using

section the types of sensors required are rotary angle sensors. These would be mounted at each joint of the excavator, see Figure 4.1 and Figure 4.2.

Using Table 4.2 the four HT displacement matrices were calculated as: For joint 0, the rotation of 90 degrees about the 0 axis.

106

4.9

 

  =  

     

 -     

    

(4.9)

4.10

    =   
4.11

Since the angle,  , is considered a constant Equation 4.9 becomes:      -        (4.10)

      =   
4.12

-       -       -      

           

                          

(4.11)

      =   
4.13

(4.12)

      =   

(4.13)

Combining Equations 4.10 to 4.13 using Equation 4.6 results in the HT displacement matrix,  , between the ee-frame and the eqp-frame: 107


4.14

 = 





   -  -    -     - +   +     +             where,  

  =    =



 -   -  -  

 -   -  -   

-  



 + (  - ) +  -   -       -               (4.14)  + ( +  ) + -   +    +       +             

denotes cos  , and denotes sin 

The position of the end-effector,  , expressed in the eqp-frame is derived from the (Equation 4.14):
4.15



position vector component (rightmost column) of the 



HT displacement matrix

  +  (  - ) +            -  -       -                =      +  ( + ) + - +  +         +   

(4.15)

108

5

Geo-Referencing the End-Effector

This section outlines the unified approach utilized to geo-reference the end-effector using data from multiple sensors, including, DGPS, INS and rotary sensors. The unified approach provides a very important math model for sensor fusion in that the model can be applied to majority of sensor information without the need to account for a different set of parameters for each sensor. For example, this research combines sensed angles (rotary angle sensors), angular velocities and specific force (INS IMU) and ranges (DGPS) by using the outputs of the geo-referenced main-body and relative positioning ­ position vectors and rotation matrices. In this way the unified approach can be applied to a varying amount of sensors without the need to change the math model. For explanation purposes, the unified geo-referencing model can be derived for a much simpler model then this research - a rigid robot arm with one revolute joint. Modifications required for more complex equipment, such as an excavator will be added as necessary.

Geo-referencing of the end-effector of a rigid robot arm (Figure 5.1) can be defined as the problem of transforming the 3-D position/coordinate vector,  , of the construction frame (n-frame) - the frame in which the results are required. The n-frame provides an absolute frame of reference for the 3D coordinate location of the end-effector. The nframe of reference is any earth fixed coordinate system including, but not limited to, local coordinate systems (Northing, Easting, Elevation), geodetic coordinates (latitude, longitude and height), earth-centred-earth-fixed (ECEF) Cartesian X, Y, Z or Universal equipment frame (eqp -frame) to the 3-D coordinate vector,  , of the local navigation

109

Tranverse Mercator (UTM). The major steps of the unified geo-referencing for this type of system are depicted in Figure 5.1 where the carrier could be any type of construction equipment.

Zeqp

Yeqp

Fixed Joint

eqp-frame

Xeqp

CONSTRUCTION EQUIPMENT CARRIER





ee
End-Effector (ee) Geo-Referenced End-Effector Position

   

 

n-frame

Figure 5.1: Geo-referencing of construction equipment

The construction equipment coordinate system, eqp-frame, continuously changes position and orientation with respect to the n-frame. Geo-referencing the end-effector is only possible if, at any instant of time, t, two pieces of information are known: 1. The position of the eqp-frame origin with respect to the n-frame, defined as the
 coordinate vector  ().

2. The orientation of the eqp -frame with respect to the n-frame, defined as the
 (). rotation matrix 

110

The unified geo-referencing math model can then be written for any end-effector position point (ee) as:
5.1
    () =  () +  ()   () 

(5.1)

where,
 

denotes the position vector from the origin of the n-frame to the end-effector, coordinatised in the local navigation frame (n-frame) denotes the position vector from the origin of the n-frame to the centre of the georeferencing sensor on the construction equipment, coordinatised in the n-frame denotes the 3-D transformation matrix that rotates the eqp-frame into the n-frame denotes the position vector from the origin of the eqp-frame to the end-effector, coordinatised in the eqp-frame denotes the measurement epoch

    

 t

Equation 5.1 is based on the simplified case for construction equipment found in Figure 5.1. This can only be considered an initial approximation of a real-world construction equipment application. The figure implies that the geo-referenced coordinates of the equipment frame origin or the first joint (Joint 1 in Figure 5.2) of the construction equipment can be directly determined. In practice, this not the case because the navigation sensors (the DGPS antenna and INS body-centre) cannot be mounted directly on the joint. Thus, the translations and rotations between the INS body-centre, bodyframe or b -frame, and the eqp-frame must be considered. The actual situation of georeferencing construction equipment is shown for an excavator in Figure 5.2. The first 111

joint of the construction equipment is clearly labeled Joint 1 in the figure and it has been assumed that the DGPS antenna and INS inertial measuring unit is mounted on top of the excavator. In this case, the excavator position and attitude are defined by the INS bodycentre and the internal axes of the IMU (b -frame).

INS b-Frame Zb GPS Receiver/INS

Zeqp
Yb

Yeqp Xeqp

Xb INS IMU Y0 IMU(Rotary Angle Sensors)

Zn


Z0 O-Frame ­ Inertial Frame of Reference

CPU X0

 /

 
   = 
Xn





Y3

Yn Target Point/ end-effector (ee)

Z3

X3

 

n-frame

Figure 5.2: Detailed diagram of the elements of the geo-referencing system

Figure 5.2 defines the vector between the origin of the b -frame and the first joint of the excavator as  . Therefore the equation for the position of the eqp-frame coordinate 112

origin is:

5.2

where,

     () = / () +  ()  

(5.2)

 

  /

denotes the position vector of the INS b-frame in the n-frame at time, t denotes the 3-D transformation matrix that rotates the b -frame into the nframe denotes the constant vector between the eqp-frame origin and the b -frame origin ­ precisely determined by common survey methods



The DGPS/INS position is the position resulting from the DGPS/INS integration. The merits of the integration of DGPS and INS was discussed in Section 2.3.1.3, however, it should be noted that the INS will operate in stand-alone mode to geo-reference the system in the event of DGPS signal loss. Furthermore, to accurately position the endeffector there must be an interpolation of the coordinates of the end-effector calculated by the relative positioning of the end-effector (  200 Hz) helps to facilitate this interpolation.


of Equation 5.1). This would be difficult

with the low data rate of the DGPS (i.e., 1 Hz). The high data rate of the INS (i.e., 100-

In addition to the transformation between the sensor frames ­ the geo-referenced b -frame and the relative position eqp-frame - rotations between the two frames must be taken into account. This rotation was accommodated in the relative positioning of the end-effector (see Section 4.2) but is worth repeating. In this research the b and eqp-frames are considered coincident. The coordinate frames of the relative positioning of the end-

113

the b and eqp -frames, where:
5.3

effector, defined by the DH convention, are rotated 90° about the 0 axis with respect to

0 =  = 

(5.3)

and are accounted for by the HT transformation matrix, Equation 4.10, repeated here as:
5.4
 

  =  

  - 

   

    

(5.4)

It follows, that since the above rotation is accounted for in the relative positioning, the
  &  are equivalent: rotation matrices, 

5.5

   () =  ()

(5.5)

By applying Equations 5.5 and 5.2 to Equation 5.1 the unified geo-referencing model or the equation for the position of the excavator end-effector can be defined as:
5.6
     () = / () +  ()   () +   

(5.6)

Equation 5.6 outlines the fact that all of the measurements/observations of the unified geo-referencing model are time dependent save for the vector  . This confirms the assumption in the relative positioning of the end-effector that the construction equipment carrier ­ in this case an excavator - is a rigid body whose rotational and translational dynamics of the b and eqp-frames are adequately described by the changes defined by 114

respect to the relative positioning eqp-frame are fixed for the duration of the georeferencing.

   / &  . This also assumes that the origin and orientation of the INS b-frame with

  The quantities  / ,  &  



in Equation 5.6 are determined by measurement in

real-time while the fourth term,  is determined pre-mission using common survey techniques. To conclude this section all of the elements of the unified geo-referencing model and the sources of their values are outlined in Table 5.1.

Table 5.1: Elements of the unified geo-referencing model and their sources

Parameter
 ( ) 

Source Unknown position vector Interpolated from the corrected INS inertial navigation equation solution for position at DGPS time (t) Interpolated from the corrected INS inertial navigation equation solution for orientation at DGPS time (t) Interpolated from the HT transformation matrices of the relative positioning of the end-effector at DGPS time (t) Measurement/Calibration

  / ( )   () 

 () 

115

6

Geo-Referencing System Error Analysis

The final accuracy of the three-dimensional (3D) coordinates computed by the georeferencing system is a function of the complete unified geo-referencing model. The model is a combination of positioning systems, including DGPS, INS position and attitude, open kinematic chain/open traverse positioning using rotary sensors, system synchronization and system initialization. The factors affecting the accuracy, as it pertains to each part of the unified model, will be discussed in this chapter. The chapter will begin by outlining the procedures involved in 3D positioning followed by the factors affecting the accuracy of the geo-referencing system. The expected accuracy of the georeferencing system and how each component contributes to the total error will be given.

116

6.1

Three Dimensional (3D) Positioning of the End-Effector

To position the end-effector, or conversely, to position any object with the end-effector, the geo-referencing position requires the following information: · Position of the origin of the open kinematic chain ­ on an excavator the base joint of the boom arm (Joint 0 ­ Figure 5.2) - as estimated from the DGPS/INS position of the main-body and the lever arm between the INS body and origin of the open kinematic chain · Orientation of the construction equipment main-body as estimated from the INS attitude · Angle determination of each joint of the open kinematic chain as measured by the rotary sensors mounted on each joint. On an excavator, the joints are located at the base of the boom, arm and bucket

According to the above points, and by the definition of the unified model for georeferencing, the system is a combination of multiple sensors and the inputs required for the system are not the direct outputs from a single measuring device. The inputs include a data acquisition component to synchronize DGPS, INS and rotary sensor data, Kalman filter DGPS baseline estimation, Kalman filter DGPS/INS integration and, finally, open kinematic chain establishment using rotary sensor angles. The entire process includes six steps:

117

1. Collecting synchronized DGPS, INS, and rotary sensor data - GPS time is used as the benchmark for the synchronization of all data measurements because GPS is well known to provide highly accurate timing information (Farrell, 2008). 2. Processing DGPS data using a Matlab implemented Extended Kalman filter to provide geo-referenced position coordinates. 3. Initializing INS orientation using a Matlab implemented Extended Kalman filter for coarse and fine alignment techniques. 4. Integrating DGPS/INS data using a Matlab implemented tightly-coupled closed loop Extended Kalman filter - Outputs of the program are GPS time-tagged, corrected INS position and orientation. 5. Creating the open kinematic chain between the main-body and end-effector using a Matlab implemented Denavit-Hartenburg homogenous transformation matrix. 6. Geo-referencing the open kinematic chain by rotating the INS­to-open kinematic chain lever arm,  (measured in system initialization), from the INS b -frame into  
     ] =  () 

6.1

 the local n-frame using the INS attitude matrix,  () , from the unified model as:

[ 

 

  

(6.1)

In theory, Step 6 also involves an interpolation of the INS position and orientation solution of Step 4, to the GPS time tag of the rotary sensor information of the open kinematic chain. A linear interpolation would suffice for the geo-referencing system due to the high-rate of INS data (100-200 Hz). However, due to the use of simulated rotary sensor information, the interpolation is not necessary.

118

6.2

Factors Effecting the Accuracy of the Geo-Referencing System

The unified model discussed in Chapter 5 contains all the major steps for geo-referencing the end-effector. These were outlined above and include DGPS positioning, INS position/orientation determination, system initialization and the determination of the open kinematic chain. Thus, the unified model was used as the basis for determining the measurement and system error contributions to the geo-referencing system.

Equation 5.6 can then be considered as the base model for analyzing the errors in georeferencing the end-effector. Some of the parameters of the model will change depending on the type of construction equipment used, but the structure will remain unchanged. For ease of analysis Equation 5.6 is repeated as:
6.2
     () =  / ( ) +  ()    ( ) +   

(6.2)

An error analysis of Equation 6.2 can be used to estimate the geo-referencing error,
  (). This was accomplished by setting up a first order error approximation of

Equation 6.2 adapted from El-Sheimy (1996):
6.3

  () = 

   /

  / + 

   

   + 

 

 

  + 



  

 

(6.3)

The first order error equation can then be simplified to (El-Sheimy, 1996):
6.4           () =  / () +  ()   () +   +  ()   () +  ()   

(6.4)

119

Equation 6.4 outlines the four major error components of the geo-referencing system that effect the accuracy. These four components are:
 1. GPS/INS position errors,  /

4. Nominal open chain kinematic errors,  () In theory, there is one error term missing. A term to reflect the time synchronization error
  between the position/orientation solution ( / ( ) &  ( )) and the rotary sensor 

3. Initialization errors, 

 2. INS orientation errors,  ()



data in the open kinematic chain (  () ) could have been added. However, due to the

use of simulated data for the open kinematic chain, the error term is not included. The other time synchronization error between the INS and DGPS is included in the

 INS/DGPS position errors,  / .

6.2.1

DGPS/INS Errors

The DGPS/INS accuracy depends on two things: 1) the error accumulation in each standalone system and 2) the effectiveness of the Extended Kalman filter (EKF) to integrate the two systems and reduce the stand-alone errors.

DGPS/INS positional errors for a mobile mapping van survey over a very short baseline (< 2 km) have an error in the order of approximately 5 cm given the consistent availability of 6 satellites. Larger errors occur during periods of satellite signal loss, 120

resulting in cycle slips/loss of integer ambiguity resolution. During these periods of time the INS is operating as a stand-alone positioning system ­ unaided by the DGPS.

The two major reasons to integrate DGPS and INS are: 1) to use the DGPS to correct the INS to avoid the accumulation of INS error over time and 2) to use the INS to combat DGPS data latency and, consequently, to bridge periods where there is no DGPS signal. The two points above are interdependent i.e., the INS bridging time is subject to the accumulation of errors of the INS over time without DGPS correction.

The ability of the INS to fill in gaps in DGPS data is based on the ability of the system to estimate short and long term INS errors overtime. The best way to test this ability is through INS bridging. The basic idea of INS bridging is to use the INS as a stand-alone positioning system during DGPS signal loss. Upon DGPS re-acquisition of the satellite signal, the position provided by the INS is used to reset the position of the DGPS receiver. If the INS position is below an error threshold, the position can be used to reestablish the integer ambiguity without the need for an ambiguity resolution algorithm. The threshold is whether the INS accuracy deteriorates by less than half a wavelength of the carrier signal - ~10 cm for L1, and ~43 cm for the wide-lane signal, when the widelane technique is used with dual frequency receivers.

To analyze the DGPS/INS position errors, the ability of the INS to aid the DGPS must be established i.e. the estimation of the INS position error over time when the INS is operating in stand-alone mode. In this mode, the INS position is affected by the gyro and

121

accelerometer biases and the initial position, velocity and alignment errors. In all cases, `initial' refers to the last DGPS aided correction of the INS. A simplified equation from El-Sheimy (1996) can be used to approximate the INS position error:
6.5

 =  +  ( -  ) + , ( -  ) +  where, 1




(6.5)

denotes initial position error denotes the final position error denotes the initial velocity error

2

1 

,1 denotes the initial accelerometer bias

denotes roll and pitch misalignment errors

Given the use of DGPS (double differencing) and navigation grade INS, typical values to calculate the stand-alone INS position error include: 1 1 ,1 DGPS/INS position errors of approximately 0.05m (fixed integer ambiguities) (El-Sheimy, 1996) DGPS/INS velocity errors typically < 0.01m/s (DGPS double differencing) (Groves, 2013) navigation grade accelerometer bias of 0.0003m/s2 (Kennedy, 2006)) roll and pitch misalignment errors of approximately 5 arc seconds which will cause a horizontal velocity error to grow at a rate of 0. (Groves, 2013) 122 25mm/s2



Substituting the above values into Equation 6.5 results in an INS position error of 0.36m after 20 seconds:
6.6  =
  

   . 

+

= 0.36

  

.    

+

 

   . 

+

 

.    

(6.6)

The results of Equation 6.6, and values for other stand-alone times, fit well with the error analysis of a navigation grade INS completed by Groves (2013). Figure 6.1 shows the results of Groves error analysis with an initial position offset of 10m. Figure 6.1 can, therefore, be used to observe the accumulation of error of the INS over time.

Figure 6.1: Short-term INS error growth standard deviation - Navigation grade sensors (Groves, 2013)

The contribution of each error component can be seen in Equation 6.6. The principal error source is the initial velocity error. The value of Equation 6.6 along with Figure 6.1 123

show that in order to have reliable bridging of DGPS outages, the computer program, during ideal DGPS conditions of high precision position and velocity output, must generate reliable short-term and long-term INS error estimations.

The individual DGPS errors are echoed by the INS due to the EKF updating process. These errors are not as serious as DGPS signal loss and the accumulation of INS error with time. The errors include, but are not limited to: · · Multipath Error ­ typically cm level error Ionosphere Errors ­ these errors can typically be cancelled out with DGPS using short baselines (in this research approximately 2km) · Initial Ambiguity Resolution Errors ­ result in a constant bias

The effect of DGPS/INS position errors on the 3D coordinates of the end-effector will result in a constant shift for all points positioned with the open kinematic chain.

6.2.1.1

DGPS/INS Time Synchronization Errors

Time synchronization errors between the DGPS and INS are another possible DGPS/INS error source. The synchronization effect appears in both the interpolated position vector,
   / , and the rotation matrix,  .

The data used to test the geo-referencing system was provided through a test conducted in Nottingham, UK as part of a multi sensor data collection campaign conducted by the joint 124

International Federation of Surveyors (FIG) Commission 5 and International Association of Geodesy (IAG) Commission 4. The particular tests used in this research were

conducted on a major road near the University of Nottingham campus using two mobile mapping vans.

The time synchronization was completed by the joint commission using the pulse-persecond (PPS) output from the DGPS receivers. GPS time was chosen as the benchmark for time synchronization due to its ability to provide highly accurate timing information (Farrell, 2008). The time synchronization was then validated using the output measurements from the various sensors. Figure 6.2 shows one of these comparisons - the Z-axis accelerations derived from the IMU and DGPS in the ECEF frame. A comparison of the results of Figure 6.2 and the accelerations in the X and Y axis (not shown here) indicated that the IMU data is time synchronized correctly to the GPS time (Kealy et al., 2013).

Figure 6.2: Comparison of Z axis acceleration between MMQG (IMU) and GPS (Kealy et al., 2013)

125

Although construction equipment is not particularly fast, an excavator has a swing speed of approximately 10km/h (based on a main-body swing radius of 3.0m and a maximum swing speed of 10rpm). Given the swing speed and a synchronization accuracy baseline of a few milliseconds, a DGPS/INS unit mounted near the edge of the main-body swing radius would result in a maximum position error of ~1cm. However, this research assumes the DGPS/INS unit to be mounted directly over the rotational pivot of the mainbody so the motion more closely parallels that of other construction equipment.

6.2.2

Initialization Errors

Lever arm errors for the lever arms between the INS body-centre and DGPS rover antenna, and the INS body-centre and the first joint (Joint 0) of the open kinematic chain (boom, arm and bucket of excavator), will affect the accuracy of cycle slip detection, measurement innovation of the EKF and the coordinates of the end-effector. The lever arm errors consist of a constant bias from the errors in the original survey performed during the system initialization. When the DGPS/INS and rotary angle sensor are initially mounted on the construction equipment, a survey is performed to compute the offset components between the INS body-centre and the DGPS rover antenna, and the INS body-centre and Joint 0. The translations are established by a total station survey. Errors for these types of surveys are typically ±0.003m.

126

A typical coarse alignment, using navigation grade INS, can be performed to an accuracy of about ±2 degrees (Groves, 2013), it is commonly followed by a quasi-stationary fine alignment using zero velocity updates (ZVU) to complete the initial alignment. Typical stationary alignment performed in this way can achieve an accuracy of 1mrad (Liu, 1994). This error will be a constant throughout the mission and can lead to errors in the excavator lever arm,  (approximate maximum of 3m, but depends on the size of the

excavator) of ±0.003m and up to ±0.01m in the end-effector position at maximum reach of 10m (see Figure 6.3).

6.2.3

Errors in Open Kinematic Chain

The error analysis of the open kinematic chain outlines how small errors about the open chain kinematics produce end-effector position changes. This section outlines the standard Denavit-Hartenberg (DH) homogeneous transformation model to illustrate the approach to error analysis incorporated by the computer program. Much like the error analysis of Equation 6.4, some of the parameters of the model will change depending on the type of construction equipment, but the structure of the error model will remain unchanged.

6.2.3.1

Single Link Kinematic Error Model

The analysis begins with the basic matrix equation for a single-link DH homogeneous transformation (HT) adapted from Mooring et al. (1991): 127

6.7

length, , and link twist,  , defined by the DH convention outlined in Section 4.1.2. It should also be noted that  = (the notation used in section 4 for HT matrices).

where the DH matrix includes the four link parameters, joint angle, , offset, , link

     =   

-           

    -       

        

(6.7)

It is assumed that all variations about the open chain kinematics are accounted for by the variations in the four link parameters. Thus, the change in a single link DH transformation matrix,  , can be defined by Mooring et al. (1991) as:
6.8

 =
6.9


 



where  denotes the link number and: =  

 +

 

 +

 

 +

 



(6.8)

(6.9)

where  denotes the link parameters, , ,  &  It should be noted that the open kinematic chain of the excavator is dominated by revolute joints, and therefore the parameters accounting for the variations in the kinematics can be simplified to the joint angle,  and link length, . However, the developed to be applicable to all construction equipment.

remainder of the error analysis will include all four parameters because this research is

128

Mooring et al. (1991):
6.10

The change in a single link DH transformation matrix,  , can now be adapted from

where,
6.11

 =    =    +    +    +    Equation 6.11 in matrix form becomes (Mooring et al., 1991):
6.12

(6.10)

(6.11)

      =  -    

-       

    -  

      +      (6.12) -    +    

The above transformation matrix can then be partitioned into the translational and rotational errors of  . The displacement or translational error component,  , is derived

from the rightmost column of matrix  :
6.13

  =       +      -     +    

(6.13)

matrix  :
6.14

And the rotational error component, , is manipulated from the first three columns of

    =          129

(6.14)

6.2.3.2

Open Kinematic Chain Error Model

The single link error analysis can now be applied to the open kinematic chain, which is made up of multiple single links. The research now has the ability to derive the translational and orientation errors of the end-effector due to the four link parameter errors of each link of the open kinematic chain. It goes without saying that the open kinematic chain error model will be comprised of 4*I link error parameters, where I denotes the total number of links in the open kinematic chain. The deviation of the endeffector from the expected position,    , can be expressed using a matrix,  ,

(1991):
6.15

composed of the single link error matrices,  , for each i link from Mooring et al.  +  = ( + )( +  ) ... ( +  )

(6.15)

Expanding and manipulating Equation 6.15 while ignoring second-order products results in (Mooring et al., 1991):
6.16

 +  =  +  =( ...   + )

(6.16)

Substituting Equation 6.10 into Equation 6.16 results in the change in an open kinematic chain DH transformation matrix,  :
6.17

 =  =( ...  ) (+ ...  ) Which, after some manipulation becomes:

(6.17)

130

6.18

-  =  = (+ ...  )  (+ ...  )

(6.18)

If a matrix, U , is defined as the product of the single link matrices,  , from link i to the end of the open kinematic chain, then according to Mooring et al. (1991):


6.19

- [  =   = + +]

(6.19)

And since  =   the error matrix of the open kinematic change is:
6.20
-  =  = +  +

(6.20)

displacements,  ,  &  , from the expected end-effector position and small matrix is defined as (adapted from Mooring et al., 1991):
6.21

Although Equation 6.20 is a valid error model,  may also be defined as small rotations  ,  &  around the  ,  &  axes, respectively. The alternate  -     -       

From Equation 6.10, Paul (1991) has shown that an alternate form of  -1  is:
6.22

   =  - 

(6.21)

   ( × )  -  ( × ) 

- = - + + =

-  ( × )    ( × ) 

  ( × ) -  ( × )  

  ( × ) +      ( × ) +       ( × ) +    

(6.22)

131

Equation 6.22 can then be used to solve for the translational error components,  ,  &  of the open kinematic chain (Mooring et al., 1991):
6.23
    =  =[+   + (+ × + )   ]

(6.23)

6.24

    =  =[+   + (+ × + )   ]

(6.24)

6.25

    =  =[+   + (+ × +)   ]

(6.25)

are the displacement and rotational errors of the single link error matrix,  , respectively
 and +1   is understood to be a dot product.

    , +1 , +1 & +1 are 3x1 unit vectors comprising the +1 matrix,  &  where, +1

It follows that, +1 and  are defined by Mooring et al. (1991) as:
6.26

 + =  + 
6.27

 + 

 + 

 + 

(6.26)

  =    

(6.27)

single links in the open chain, I , therefore, +1 is an identity matrix. 6.2.3.3 Error Analysis of the Open Kinematic Chain

It should be noted that this notation allows for the +1 matrix to exceed the number of

132

The displacement error is derived from Equations 6.23 to 6.25. These equations are composed of vectors from both the product of the individual joint/link DH transformation matrices, +1 , and the error matrices of the individual joint/link,  . It is readily seen,

because it is the product of the individual single link transformation matrices,  . However, Equations 6.13 and 6.14 show that the displacement and rotational error

from Equation 6.26, that +1 is a function of the open chain kinematics and joint angles

kinematics and joint angles and their error parameters prior to error analysis.

 ,  ,  &  . Therefore, it is necessary to define the parameters of the open chain

vectors,  &  from  , are functions of the kinematic error parameters

This research uses simulated data for the open kinematic chain. Therefore kinematic chain parameters and error parameters need to be obtained from applicable and available construction excavators and rotary sensors. Table 4.2 of Section 4.2 outlines the joint parameters of an excavator manipulated arm. Table 4.2 is repeated here for reference:

Table 6.1: Final joint parameters for the excavator manipulated arm

Joint 0 1 2 3

Joint parameters  0    di 0 0 0 0 ai 0 a1 a2 a3  0 0 0

+90°

133

Table 6.1 emphasizes the fact that the excavator is made up of simple revolute joints i.e., the only parameters that must be measured are the joint angles,  . The link lengths,  ,

of the excavator are the lengths between the rotary sensors mounted at the joints of the boom, arm and bucket. The link lengths only need to be measured once - when the sensors are mounted on the excavator. Both the link twist and offset are constants. From the above analysis, only joint angle,  , link length,  , and their error parameters,

 &  , respectively, need to be included in the error analysis. 6.2.3.3.1 Simulated and Pseudo-Real World Data

The link length can be measured using well accepted survey measurement techniques. A constant error parameter for all link lengths of ±0.003m can be used. In general, the variation in  is not as critical as that in  . The remainder of the data,  ,  &  are obtained from a Matlab simulation, the Volvo E380DL excavator - a common sized construction excavator and Sensor SystemsTM QMI-CB-360-X CAN Bus Angle Sensor, respectively. The latter two were chosen as representative equipment for the georeferencing equipment.

The simulated joint angles were generated in Matlab using a uniform random distribution. The limits of the distribution were based on the full range of motion of the Volvo E380DL excavator obtained from Figure 6.3.

134

Figure 6.3: Working range of Volvo E380DL excavator (Volvo, 2012)

The working ranges of the excavator were chosen as: · · · Boom Joint Angle: -75° to +75° Arm Joint Angle: 15° to 165° Bucket Joint Angle: -10° to 170°

135

Figure 6.4 shows the boom and arm of the Volvo E380DL excavator. The lengths obtained for the boom, arm and bucket from the Volvo E380DL brochure can be considered a good representation of the field lengths that would be measured between the mounted rotary sensors. The links obtained from the brochure will be used as the link lengths in the error analysis. The link lengths are defined as: · · · a1 = Boom Length = 6.45m

where the link length error parameter,  , is a constant and was stated previously as ±0.003m.

a3 = Bucket Length = 1.623m

a2 = Arm Length = 3.20m

Figure 6.4: Boom and Arm of Volvo E380DL excavator (Volvo, 2012)

The Sensor SystemsTM QMI-CB-360-X CAN Bus Angle Sensor seen in Figure 6.5 was chosen as the representative rotary angle sensor because Sensor SystemsTM has an international reputation for manufacturing quality angular sensors and provides one of the larger suites of rotary sensors for civil engineering and construction applications.

136

Furthermore, the representative sensor has the characteristics to achieve the desired accuracy in a construction application, which include, but are not limited to: · · · · · · · Angle range of at least 0-180° preferably a full 360° range Measure angles without direct contact Angle accuracy of  0.1° High frequency response/sample rate Resistance to shock and vibration High temperature operating range Added benefit of low cost

Figure 6.5: Sensor SystemsTM QMI-CB-360-X CAN Bus Angle Sensor. Adapted from www.sensorsystems.it/sites/default/files/pdf/QMI-CAN-BUS.pdf

±0.1° (based on the angular accuracy of the Sensor SystemsTM QMI-CB-360-X CAN Bus Angle Sensor).

The joint angle error parameter,  , used for the open kinematic chain error analysis is

137

6.2.3.4

Displacement Error of End-Effector

The error analysis was completed by developing a Matlab program using Equations 6.23 to 6.25, Matlab simulated joint angle values and the data for  and  obtained above. The Matlab error analysis used varying sample sizes of simulated data i.e. tests were run using 1000, 5000 and 10000 random generated joint angles per joint. However, the number of joint angles over 1000 did not affect the displacement error of the endeffector. This conclusion was based on mean values and the fact that both the minimum and maximum displacement occurred at the same general boom, arm and bucket joint angles for the three tests (see Table 6.2).

Table 6.2: Position displacement values of the end-effector from the open kinematic chain error model RootNumber of Mean_Square Minimum Position of Maximum Position of Total RMS Random (RMS) Error Displacement Minimum Displacement Maximum Error (m) Generated Joint Components (m) Displacement (°) (m) Displacement (°) Angles per Joint (m) Boom Angle: -22.3 Boom Angle: 1.8 px : 0.020 Arm Angle: 201.8 Arm Angle: 313.1 py : 0.025 1000 0.007 0.038 0.028 pz : 0.016 Bucket Angle: 212.6 Bucket Angle: 357.3 Boom Angle: -28.1 Boom Angle: 9.6 px : 0.014 Arm Angle: 204.1 Arm Angle: 314.1 py : 0.017 5000 0.007 0.038 0.019 pz : 0.011 Bucket Angle: 201.7 Bucket Angle: 357.7 Boom Angle: -32.9 Boom Angle: 11.0 px : 0.012 Arm Angle: 204.4 Arm Angle: 307.4 py : 0.014 10000 0.007 0.038 0.016 pz : 0.009 Bucket Angle: 200.7 Bucket Angle: 358.0

The above error analysis shows promising results when compared to the desired accuracy of the geo-referencing system. It should be noted that error components on the x, y and z axes are coordinatized in the inertial reference frame, which is a 90° rotation about the x axis from the b -frame. 138

6.3

Error Budget

Table 6.3 summarizes how each term in Equation 6.4 contributes to the final accuracy of the 3D end-effector position. Equation 6.4 is repeated here as:
6.28           () =  / () +  ()   () +   +  ()   () +  ()    Table 6.3: Error sources and their magnitudes for the geo-referencing system

(6.28)

Error term in Error Equation
  / ( )   ()

Expected Error Magnitude
±0.05m

Effect on EndEffector Position

Error Characteristics

±1mrad ±0.019m max.±0.038m ±0.003m

 () 



±0.05m total ±0.03m x-ECEF Constant translation for all points positioned by the open kinematic chain ±0.01m y-ECEF ±0.04m z-ECEF ±0.01m @ 10m or Error is a function of the distance from the INS body-centre to end-effector max. reach ±0.019m total Depends on the Boom-Arm-Bucket ±0.014m x-DH configuration of the open kinematic chain ±0.017m y-DH in 3D computation ±0.011m z-DH ±0.003m
Lever Arm between INS body-centre and Joint 0 of open kinematic chain ­ constant bias

The table indicates that the dominant error source is the DGPS/INS position error with the majority of the remaining error terms having errors <1cm. It should be noted that error components on the x, y and z axes of the  () error term are coordinatized in


the inertial reference frame, which is a 90° rotation about the x axis from the b -frame.

DGPS position error is well known to have the largest error in the vertical component. The vertical error component of the  () error term is on the y axes. Therefore, it can 139


be assumed that the limiting factor in the 3D end-effector position will be in the vertical direction.

140

7

Results and Analysis

Up to this point the theory, concept, and factors affecting the accuracy of the individual components, their integration and the initialization of the geo-referencing system have been discussed. The objective of this chapter is to evaluate the initialization results and the positional accuracy of both the individual components and the entire system. First, the ability of the DGPS Extended Kalman filter (EKF) to resolve integer ambiguities and position the main-body is presented. Then the results of introducing INS into the system are discussed. This includes the INS initial alignment and the position and orientation accuracy of the DGPS/INS integration. Finally, the ability of the geo-referencing system to position the end-effector is presented and the error propagation with respect to distance is discussed.

141

7.1

System Testing

The data used to test the geo-referencing system had two components: 1) data provided by a joint working group and 2) Matlab simulated data.

The test data provided by the joint working group was used to test the DGPS/INS integration of the excavator main-body and the geo-referencing capabilities of the system. The simulated data was used to test the relative positioning, between the end-effector and main-body, of the open kinematic chain. The two sets of data were then combined to test the ability of the entire system to geo-reference the end-effector.

The reference data used to test the accuracy of the geo-referencing computer program, developed by this research, was provided by the joint working group using Inertial Explorer software by NovatelTM. The reference data is discussed in further detail in the following section.

7.1.1

Test data

The data used to test the system was provided by an international joint working group on `Ubiquitous Positioning' within the International Federation of Surveyors (FIG), Commission 5 and International Association of Geodesy (IAG), Commission 4. Participating members included the University of Melbourne, the Ohio State University, the University of Nottingham, the University of New South Wales, the National 142

Technical University of Athens and the Vienna University of Technology. The group focused on collaborative positioning and navigation (Kealy et al., 2013).

Tests conducted by the group were completed on, or near, the campus of the University of Nottingham in one week of May 2012 and were conducted on several platforms, however, this research focuses on navigation tests of a mobile mapping van. The road tests conducted on the mobile mapping van included movements in the parking lot, as well as, on road sections near the University of Nottingham. The experiments ranged over two days and were separated into several test track loops. The trajectory of the test tracks had both low and medium dynamics in terms of velocity and turning profiles to depict typical land based vehicle dynamics. The satellite availability for these particular tests were on average approximately 95% (Rabiain, et al., 2012). The test tracks also included several GPS outages while driving under bridges. The instrumentation included on the van can be seen in Table 7.1.

Table 7.1: Sensors on the 'Ubiquitous Positioning' Mobile Mapping Van

Mobile Mapping System

Type of Sensor
Leica GS10

Sensor Grade/Characteristic
Dual Frequency GPS Receiver Navigational grade IMU Commercial grade MEMS IMU Commercial grade MEMS IMU

Mobile Mapping Van

CIMU - Honeywell Systron MMQG Xsens MTi-G

The CIMU and GNSS data was integrated using a well known INS/GNSS integration software ­ Inertial Explorer by NovatelTM. The data was then smoothed. This type of 143

technique is used if navigation information is not needed in real-time and can enhance the accuracy of the system by doing such things as using GNSS measurements taken after, during or before the test to aid in INS calibration and drift, GNSS signal outages, etc. The smoothed data was then used, by the group, as reference data for system testing (Rabiain, et al., 2012). For this reason, the CIMU and DGPS data was chosen to test the georeferencing computer program developed by this research.

In order to test that the geo-referencing computer program was working properly the raw CIMU and DGPS data was chosen as the test data. Furthermore, in order to test all components of the system, quality control constraints had to be applied when selecting sample data. Firstly, the data had to have a stationary component, preferably >60s, for GPS ambiguity resolution and INS initialization. And secondly, the data had to include typical land-based vehicle movements without DGPS cycle slips or signal loss, to ensure that testing could provide the best achievable accuracy of the geo-referencing system. With these constraints four sets of representative sample data were taken from the tests; two sets from test day May 17, 2012 and two sets from test day May 18, 2012 (see Table 7.2).

144

Table 7.2: Sample test data for testing the geo-referencing system

Test No.
1 2 3 4

GPS Start Time
397188 400680 470122 468676

GPS End Time
397269 400738 470224 468781

No. of Satellites Observed
8 6 5 6

7.1.2

Simulated Data

Simulated data had to be created to test the relative positioning of the end-effector using an open kinematic chain. As previously stated in Section 6.2.3, the excavator open kinematic chain is comprised of only revolute joints. This means that there are only two measured variables at each joint ­ the joint angle and the link length. The link length is only measured once ­ during the initialization of the system ­ when the rotary sensors are mounted at each joint. Therefore the only measured variable that must be simulated is the joint angle for each joint/link of the excavator.

There were two sets of simulated data created to test the geo-referencing of the endeffector. Firstly, a working range was defined for the joint angles for the boom, arm and bucket to mimic a common digging trajectory. The working ranges were then input into Matlab to be actuated simultaneously to simulate the digging trajectory. This data was used as a reference. The second set of data added an error based on the rotary sensors 145

introduced in Section 6.2.3. The error was simulated with Matlab using a normal distribution with a mean of zero and a standard deviation of the rotary sensor, ±0.1°. This error was then added to the reference data during simulation.

146

7.2

DGPS Extended Kalman Filter (EKF)

The DGPS EKF was used to estimate the baseline components between the master GPS receiver and the rover GPS receiver mounted on the equipment body. In order to achieve the accuracy required for this research, it was of utmost importance to use carrier phase measurements to determine those baselines. It follows, that the first test in checking the accuracy of the DGPS EKF is to measure how well it resolved the phase ambiguity.

7.2.1

Ambiguity Resolution

The solution for the ambiguity resolution was a three step process: 1. Use phase double-differencing to estimate the baseline and floating ambiguities. 2. Use the LAMBDA method to decorrelate the float ambiguities and fix them as integers. 3. Use the integers to update the baseline components.

As mentioned in the previous section, four sample sets of data were used to test the entire geo-referencing system. However, stationary periods of consistent satellite coverage (i.e., approximately 30 seconds) was much more readily available from the test data. Thus, ten sample sets of data were run to test the ability of the DGPS EKF Matlab program to resolve the phase ambiguity. The results are compiled in Figure 7.1.

147

GPS AMBIGUITY RESOLUTION
10 9 8 7 6 5 4 3 2 1 0 5 10 15 Time (s) 20 25 30 35 No. of Observed Satellites 40 45 GPS GDOP 50 55

Figure 7.1: Results of least-squares and LAMBDA approach to ambiguity resolution

Nine of the ten tests showed similar results, with ambiguities being fixed in the 15 ­ 20 second range. Test No. 1, however, raised concerns given the parameters of satellite coverage and satellite geometry are similar to several other tests that were able to fix the ambiguity nearly 2.5 times faster. Upon closer inspection of the DGPS reference data, the DGPS rover antenna in Test 1 was not as stationary as in other tests. The extended time taken to fix the ambiguities can be attributed to the fact that the receiver antenna oscillated as much as a carrier wavelength (~20cm). If Test 1 is removed from the analysis the remaining tests can be said to provide typical results (Rizos, 1999), given the number of satellites, satellite geometry, short baseline (<2km), dual frequency receivers and the use of precise P code. The time-to-fix is also promising for the geo-referencing system developed for this research, as will be seen in the results of the INS initialization/alignment.

Test Number

148

7.2.2

DGPS Baseline Estimation and Positioning

Once the ambiguities were fixed, they were used to update the baseline estimate. The updated baselines and the fixed ambiguities were then used as inputs in the EKF to update the rover position estimate (by adding the estimated baseline to the estimated master receiver position) and form the observed measurement in the measurement innovations, respectively.

diagonal populated by the square of the standard deviation of the baseline components, which, in this research, was chosen to be 0.05m. Therefore  was defined as: 0.052  =  0 0 0 0.052 0 0 0  0.052

measurement error covariance, , had to be defined. The  matrix is a simple 33

Prior to the EKF baseline calculation the system error covariance matrix,  , and the

The  matrix is a block diagonal matrix of the product of the phase variance and the double difference covariance matrix inverse. The standard deviation of the phase is a combination of the phase multipath error and the phase double difference error. In reality, the phase multipath error dominates the error term resulting in a standard deviation for the phase double difference of 0.008m. The value was obtained from testing by Wanninger and May (2000). The  matrix was then defined as:
2  0

 = 0.0082 

2 is a  matrix based on the number of observed satellites,  . where 

0 4 2 2  ,  = 2 

2  4

149

The  &  matrices were then applied to the EKF to produce baselines for the four

sample sets of data. The first set of values analysed in the baseline estimations was the error covariance matrix of the states, . This matrix showed the average standard

deviation, , in the x, y and z direction, of the ECEF-frame. The results of the 4 sample tests can be found in Table 7.3.

Table 7.3: Standard deviations of baselines from EKF error covariance matrix

Test No.
1 2 3 4

±0.003 ±0.006 ±0.011 ±0.010



±0.002 ±0.004 ±0.007 ±0.005



±0.003 ±0.008 ±0.010 ±0.007



±0.005 ±0.011 ±0.016 ±0.013



each EKF iteration, it was shown that these values stayed constant throughout the sample tests both during the stationary period and vehicular movements, which is important to note when anaylising the accuracy of the system. Test No. 1 showed the most promising results, however, this was attributed to the number of observed satellites (8) and the excellent satellite geometry (GDOP ­ 1.29). This was found to be an ideal case and not a common occurrence among the two days of testing. Tests 2-4 show more common situations of 5-6 observed satellites. To verify that the EKF covariance propagation was working properly, the deviation of each baseline estimate component was plotted against 150

Overall the results showed precise baseline estimation. Upon analysis of the  matrix for

the mean baseline estimate. Figure 7.2 shows the results of this check for Test No. 1. The figure also outlines the repeatability of the EKF to estimate baselines when the system is in a stationary state.

Figure 7.2: Baseline component errors from the mean, for a stationary state

The accuracy of the EKF and, in essence, the accuracy of the Differential GPS was tested by applying the baseline estimation to the known GPS master receiver location, taking into account the difference in antenna height. The calculated positions were first transformed into the N, E, D (North, East, Down) local coordinate system (n-frame) so that results for error analysis would be comparable to construction design. The results for the four sample data sets can be seen in Table 7.4. 151

Table 7.4: Root-mean-square (RMS) error of DGPS EKF position estimates

Test No.
1 2 3 4


±0.027 ±0.031 ±0.041 ±0.034



±0.007 ±0.013 ±0.022 ±0.021


±0.016 ±0.031 ±0.049 ±0.018


±0.0328 ±0.046 ±0.068 ±0.044

The results in the table above were obtained by comparing the DGPS EKF position estimates with the reference GPS positions, provided by the `ubiquitous position' joint working group. These results exceed expectations based on the standard deviations for the system error covariance matrix. This verified that the Matlab DGPS EKF program was in good working order. In order to analyse the results further the deviation from the reference GPS was plotted at each epoch. The results for Test No. 4 can be seen in Figure 7.3.

152

Figure 7.3: DGPS EKF position estimation errors

Figure 7.3 shows that while the absolute accuracy of the system is ±0.044 (root-meansquare (RMS) error), the relative error of the DGPS positioning follows the standard deviation values output by the  matrix while the equipment is stationary. When the

equipment is exposed to rapid motion, the relative accuracy of the GPS positioning

spikes. This leads to a change in the overall accuracy of the system, what affect this change has on the overall accuracy depends on the direction of movement. For the test in Figure 7.3, it is expected that the overall accuracy decreases when the equipment is in motion, however, the total horizontal and vertical RMS error for the stationary equipment were ±0.027m and ±0.010m, respectively, while the same values were ±0.028m and ±0.030m for the equipment in motion. Nevertheless, when this was compared to the 153

movement, it could be concluded that this will be the case whenever the DGPS rover

deviations output by the  matrix, which remained constant throughout vehicular

receiver is under higher dynamic movements i.e., the spikes in positioning are not due to DGPS error, they are the result of DGPS data latency and the discrete time positioning of a high dynamic motion. It can be concluded that given ideal positioning (i.e. zero mean error) when the equipment is stationary that a change in motion will result in a decrease in the accuracy of DGPS positioning. It is therefore important to discuss what type of movements can be expected during normal construction equipment operation when discussing the overall accuracy of the DGPS system as it is the sole provider of absolute position to the geo-referencing system.

In many instances, construction equipment operates under higher dynamic movements i.e., many start-stop combinations. This is also true in the case of the excavator, and depending on the mounted location of the DGPS/INS system, could affect the accuracy of the geo-referencing system. However, if we analyse the movements of the excavator main-body during times when the accuracy of the end-effector position is most important (i.e. while digging or grading), the main-body is actually stationary. Therefore, this system can expect accuracies in the order of the RMS error stated in Table 7.4, or better. This type of reasoning can be applied to other types of construction equipment as well i.e, a grader is under constant motion.

154

7.3

INS Initialization

Before the INS is integrated with the DGPS/EKF outputs, the INS must be initialized/aligned. This is accomplished using a two step process: 1. Coarse Alignment ­ using the levelling process and direct gyro-compassing; the levelling process is completed first 2. Fine Alignment ­ preformed after the coarse alignment has determined the heading to within 2°, enabling the small angle approximation to be used.

7.3.1

Coarse Alignment

Coarse alignment of the INS involves a two step process using two alignment techniques. The first step is the levelling process using the accelerometers to derive the roll and pitch angles. The second step, direct gyro-compassing, combines the roll and pitch angles of the levelling process with the output of the gyroscopes to derive the yaw angle.

7.3.1.1

The Levelling Process

The method for levelling was outlined in Section 3.4.1. The technique is based on the geo-referencing system being stationary and the accelerometers sensing only the effects of gravity. Any disturbing motions, for example, engine vibrations, wind buffeting or human activity (i.e. refuelling) can negatively affect the levelling process. These types of disturbances can be expected for a construction equipment geo-referencing system, as alignment will likely occur during equipment warm up, refuelling, repair, etc....

155

Coincidentally, many of these motions average out over time and therefore can be combated by simply time-averaging the accelerometer measurements over a few seconds. Using Equations 3.98 and 3.99 and the Honeywell CIMU data (Navigation Grade Accelerometer), several tests were run to calculate the initial roll and pitch of the system over various time-averaged periods. Table 7.5 shows a representative sample of the tests.
Table 7.5: Roll and Pitch leveling errors

Test No. 1 2 3 4 5

Time Averaged Period (s)
1 2 5 1 2 5 1 2 5 1 2 5 1 2 5

Roll Difference (degrees)
0.0040 0.0150 0.0162 0.0259 0.0219 0.0190 0.0184 0.0119 0.01597 0.0051 0.0168 0.0174 0.0279 0.0227 0.0185

Pitch Difference (degrees)
0.0091 0.0077 0.0074 0.0063 0.0059 0.0059 0.0045 0.0090 0.0069 0.0120 0.0057 0.0039 0.0016 0.0014 0.0043

The tests showed that the coarse alignment levelling was able to calculate the roll and pitch to less than 1-mrad. Given the grade of the IMU these values were expected (Groves, 2013). The tests also emphasized that there is no advantage to time-averaging periods greater than two seconds. Therefore, after two seconds of initialization the roll and pitch values have been determined well enough to use, not only as the inputs for

156

gyro-compassing fine alignment but as two of the three initial values for the orientation of the geo-referencing system.

7.3.1.2

Direct Gyro-Compassing

Once the roll and pitch have been determined from the levelling process, they can be combined with the Honeywell CIMU angular rates to initialize the yaw, or heading, angle. The direct gyro-compassing technique relies on the ability of the gyros to measure the Earth-rotation rate. Unlike gravity in the levelling process, small disturbing motions can be much larger than the Earth-rotation rate. Therefore, much longer time-averaged periods are needed for direct gyro-compassing. Using Equations 3.102 to 3.104, several tests were run to calculate the initial heading of the system over various time-averaged periods. Table 7.6 shows a representative sample of the tests.

157

Table 7.6: Yaw/Heading direct gyro-compassing errors

Test No.

Time Averaged Period (s)
1 5 15 25 40 1 5 15 25 40 1 5 15 25 40 1 5 15 25 40 1 5 15 25 40

Roll Difference (degrees)
-20.7179 -6.5541 -3.4183 0.3314 0.6144 -10.7060 9.1932 -1.3510 2.2559 0.5779 -36.7579 0.1467 1.9909 1.6166 1.8550 31.6045 12.7441 3.2726 2.5991 1.5061 -14.3290 1.7586 0.3120 0.0835 1.1681

1

2

3

4

5

The goal of the direct gyro-compassing is <2° accuracy. From the above table, it was shown that this can regularly be achieved with time-averaging of the gyro measurements on the order of 25 seconds. When the initialization of the heading is combined with the initialization of the roll and pitch a total initialization in the order of 30 seconds is achieved before start-up of the DGPS/INS EKF. The INS initialization time also verifies 158

the effectiveness of the ambiguity resolution or time-to-fix of the DGPS EKF. Remember that the DGPS EKF was able to resolve the phase ambiguities in <30 seconds given true stationary behaviour of the equipment.

It should be noted that the coarse alignment above was completed with supplied data from a navigation grade IMU. Given a lesser grade IMU, the direct gyro-compassing likely will not be sufficient to determine the heading to within 2°. In this case, an indirect, quasi-stationary, gyro-compassing technique may be required using a wander azimuth and position/velocity measurements in an external Kalman filter.

7.3.2

Fine Alignment

Once the heading has been determined to within <2° it can be used as an initial value, along with the initial roll and pitch, as input into a quasi-stationary fine alignment technique. This technique was discussed in Section 3.4.3 and utilizes the same inertial navigation equations and Kalman filter state vector and system model as the tightlycoupled closed-loop EKF developed for DGPS/INS integration. Therefore, the stationary and/or zero-velocity update (ZVU) measurements can be input into the DGPS/INS EKF during the initialization phase.

Section 3.4.3 introduced two possible measurement innovations; one based on position displacements and one on (zero) velocity. In theory, the quasi-stationary fine alignment using position-displacement would be the method of choice because it would provide the 159

best modelling of disturbing motions (vibrations) over time due to the standard deviation of position displacement being modelled as a constant. However, this requires a stationary condition over a few minutes and typical construction equipment movement involve many quick start-stop combinations. Velocity measurements using the ZVU technique are considered better suited to situations where the object may only be stationary for brief periods (Groves, 2013). For this reason, the ZVU fine alignment was chosen over quasi-stationary position displacement fine alignment.

As in the DGPS EKF, before the ZVU method could be tested the values of DGPS/INS EKF system and measurement error covariance matrices must be defined by the user based on a priori knowledge of the sensor equipment and positioning accuracy.

The  matrix is 15  15 diagonal matrix and is as defined by Equation 3.74:  2      03 / =  03  0  3  03 where,   03 2   03 03 03 03 03 03 03 03 03 03 03 2   03 03  03  03    03   2   

denotes the time interval between successive accelerometer and gyroscope observations denotes the time interval of the state propagation, in this case the DGPS measurement

and the values of the diagonals are chosen as:
2  2  2  2   = [0.000042 0.00152 1.0 - 72 2.0 - 122 ]

160

pseudo-range rate measurement for each observed satellite and a 3 component velocity measurement for the ZVU. The 2  2 diagonal matrix is populated by the phase error,

The  matrix is a (2 + 3)  (2 + 3) diagonal matrix due to a pseudo-range and

 , as explained in Section 3.3.2. The final three components represent the variance of 0.01m/s was chosen:  2  0 

the velocity measurement, v , due to vibration and disturbance, a nominal value of  0 

 = 

 / 

v

2



 where,  = .  & v = . /

The R and Q matrices were then added to the DGPS/INS EKF. At this point, given initial values for the position (from DGPS EKF), velocity (from DGPS EKF) and orientation (from INS initialization) the EKF could have been run alongside the inertial navigation equations to produce a navigation solution. However, in order to include the ZVU, the velocity measurement innovation had to be added to the end of the measurement innovation vector and, as a consequence, the measurement matrix had to add three rows according to the explanation of the ZVU in Section 3.4.3. Several tests were run with varying heading errors within the small angle approximation (±2°).

161

Figure 7.4: Heading value from zero velocity update in GPS/INS EKF

Figure 7.4 shows the results of one of the tests for fine alignment. The typical trend was for the yaw angle to change in the same direction unaffected by positive or negative values. The only conclusion that could be drawn from the testing was that the ZVU was unable to detect the heading error. This could be due to high dynamic vibrations, however, during the literature review it was noted that, in practice, heading errors can be weakly observable in ZVU. Nevertheless, a promising trend was noticed after the ZVU testing, that after the stationary period, when the vehicle was subject to changes in position, the DGPS/INS EKF was able to resolve the yaw/heading angle. This is expected as the EKF begins to receive measurements of position displacement and velocity changes from both the DGPS and INS, the errors between their measurements, due in part to improper heading angles, are detected in the measurement innovations. Figure 7.5 shows the results of this correction for the same test as shown in Figure 7.4. Figure 7.5 coverage of the heading error begins just prior to vehicular movement, approximately the 95 second mark. The DGPS/INS EKF was able to correct the heading error to <0.1°. 162

Figure 7.5: GPS/INS EKF yaw/heading angle during equipment motion

The results of this section show that the geo-referencing program may benefit from a quasi-stationary fine alignment using position displacement measurements. However, the sample sets of data did not provide long enough stationary periods to allow for testing of this technique.

163

7.4

DGPS/INS Integration

Now that the individual components, DGPS and INS, have been tested they can be combined using an EKF to produce two of the major components of the unified georeferencing model ­ the position of the excavator main-body,  / (), in the local

navigation frame ( n-frame) and the orientation angles of the main-body, which are used to build the rotation matrix,   (), that rotates the body-frame (b -frame) into the nframe.

As in the DGPS EKF, before DGPS/INS integration could be tested, the values of the system and measurement error covariance matrices must be defined by the user based on a priori knowledge of the sensor equipment and positioning accuracy. These values were previously discussed in Section 7.3.2 because the ZVU was added into the DGPS/INS EKF, therefore the matrices used in the ZVU are the same, or similar to, the matrices used in this section. The system covariance matrix,  , is the same as that defined for the

ZVU. This is the case because the number and type of state vectors for the DGPS/INS EKF was unchanged. The ZVU did require the addition of a velocity measurement and, therefore, the R matrix defined for the ZVU needs some manipulation. The  matrix for

and the DGPS/INS EKF measurement covariance matrix,  , becomes: 164

ZVU is no longer used. Thus, the final three values are removed from the ZVU  matrix

a 2  2 diagonal matrix because the three component velocity measurement for the

the DGPS/INS EKF changes from a (2 + 3)  (2 + 3) diagonal matrix for the ZVU to

 2   =  

 / 



 where,  = . 

Also prior to testing, the initial values and the initial state vector and error covariance matrix, , of the DGPS/INS EKF needed to be defined. The initial position and velocity

of the DGPS/INS are from the DGPS EKF and the initial orientation from the INS

initialization. In a number of cases the coarse alignment was able to initialize the heading error to ~1 mrad, therefore, those values were used for the initial heading. The initial error state vector was assumed to be a zero vector. The initial, , matrix was a diagonal

15  15 matrix populated by the uncertainties of the states.

The major steps in implementing the DGPS/INS EKF were as follows: 1. Input the predicted values and INS measurements (for the current epoch) into the inertial navigation equation to gain the original predicted position, velocity and 3D transformation matrix. 2. Use the output from the DGPS EKF and the estimated inertial navigation solution to calculate the measurement innovations. 3. Run the DGPS/INS EKF to propagate the previous error states and covariance matrix, input the measurement innovations and correct the predicted error states and error covariance matrix. 4. Update the position, velocity, rotation matrix and INS errors using the error states and zero the error state vector (closed-loop correction).

165

The DGPS/INS EKF could then be run to output the position and orientation of the INS unit. The first table of values that was analyzed was the error covariance matrix, . Given

similar sets of sample data, there were no major discrepancies between the values output by each test. In order to analyze the data the results from sample Test No. 4 will be presented here. The standard deviations from the  matrix can be found in Table 7.7.
Table 7.7: Standard deviations of DGPS/INS EKF error covariance matrix

Orientation
Roll,  (degrees) ±0.014 Pitch,  (degrees) ±0.014 Yaw,  (degrees) ±0.021 North,  (m/s) ±0.003

Velocity
East,  (m/s) ±0.003 Down,  (m/s) ±0.005 North,  (m) ±0.008

Position
East,  (m) ±0.005 Down,  (m) ±0.009

The above tables show the average standard deviations obtained from the test. In the EKF, the  matrix is output on each prediction/correction iteration. The standard stationary and in motion. Therefore the values above are representative values for the entire test. All of the precision values suggested that there were no major discrepancies. The positional accuracies showed that the INS and DGPS agreed on the positioning of the system and therefore, it is expected that the positional accuracy of the DGPS/INS will reflect the positional accuracy of the DGPS EKF system. It was important that the velocity standard deviation stayed in the order of 10-3 as it is used in the inertial navigation equations to update the position. The values of the precision for the orientation were promising, no major discrepancies indicate that the orientation did not undergo a major alteration due to poor initialization. However, it should be noted that a small bias, 166

deviations were found to be consistent throughout the test, both while the equipment was

introduced in the initialization, could go uncorrected due to gyro error. Therefore, observations of the orientation accuracy must be made. The  matrix also accounts for

the accelerometer and gyro bias. These are important values because they are used as inputs in the inertial navigation solutions. The standard deviation of the accelerometer and gyro bias were ±0.0005m/s2 and 3.33·108rad/s, respectively, which were close to the manufacturer specifications of ±0.0003m/s2 and 1.70·108rad/s, respectively.

After

the estimated

values of the orientation,

velocity and

position

were

updated/corrected by the EKF corrected error states, they were input into the inertial navigation equations along with the corrected INS measurements, to output the corrected navigation solution. The accuracy of the corrected navigation solution (orientation, velocity and position) was then checked. The reference data for the testing was the postprocessed, smoothed DGNSS/INS solution, supplied by the `ubiquitous positioning' joint commission group using Inertial Explorer software by NovatelTM.

167

Figure 7.6: GPS/INS EKF positional errors in the local navigation frame

The results of the positional accuracy can be seen in Figure 7.6. As expected, the positional errors were dominated by and parallel the DGPS EKF positional errors. The INS was able to smooth the DGPS errors due to the higher frequency of data (200Hz). As stated, this can be expected given that the DGPS was the only source of absolute positioning and, more importantly, the fact that carrier phase measurements were used resulting in high weighting of the DGPS data in the measurement covariance matrix.

168

Figure 7.7: GPS/INS EKF orientation errors

The orientation accuracy can be seen in Figure 7.7. These are important values to observe because they are dominated by the INS measurements. Figure 7.7 shows two trends. Firstly, the orientation accuracy of the roll and pitch show that while the equipment is stationary (i.e. zero velocity) the INS was able to level/correct itself, with both the roll and pitch correcting their initialization errors (~0.01°) in approximately 20 seconds. This is an expected result as the EKF, effectively, time averages accelerometer measurement errors, due to disturbing motions, as discussed in the coarse alignment. This is important because errors in the roll or pitch can cause the acceleration due to gravity to be improperly aligned causing drifting of the position and velocity solutions. For example, a 1mrad roll or pitch attitude error causes the horizontal velocity to grow at a rate of 169

10mm/s2. Secondly, the orientation accuracy of the yaw/heading angle introduced a constant bias in the heading until the equipment started to move. This is an important observation when dealing with construction equipment. On a construction site an excavator could initialize the DGPS/INS and starting digging without any movement of the DGPS/INS system. Therefore, a heading initialization error could introduce a simple error of:   (distance from the DGPS/INS unit to the end-effector) without a proper

fine alignment during initialization. Overall the results show the orientation error <1mrad, which is an indirect accuracy requirement for this research.

Figure 7.8: GPS/INS EKF velocity errors in the local navigation frame

The results of the velocity accuracy test can be seen in Figure 7.8. The velocity errors mimic those of the positional errors, in that, the errors increased when the equipment 170

underwent some type of dynamic movement, both in position and orientation. The velocity errors need to be observed because they can be adversely affected by both position and orientation errors. The effect of positional errors on velocity are direct and linear, however, the effects of orientation errors on velocity are not as obvious but can have significant effects. For example, an error in the roll or pitch will cause incorrect alignment of the force of gravity which will be sensed incorrectly by the accelerometers. This error will then be passed to the velocity because the integrated specific force measurements are used to update the velocity. This is crucial because the velocity values are then used to calculate the updated position in the inertial navigation equations. For this reason it is advantageous to observe the total velocity error in Figure 7.9. According to the results, the maximum value is ±0.022m/s with an average of ±0.010m/s during equipment movement. This was considered within the accuracy of the position solution.

Figure 7.9: GPS/INS EKF total velocity error

171

7.5

Geo-Referencing the End-Effector

Up until this point, the results have focussed on the individual components of the entire geo-referencing system. In the error analysis section, the effects of the lever arm on system accuracy were discussed. Also, in the error analysis, the error propagation of the open kinematic chain was examined. A test was completed to show the effects of the individual errors, of the joint angles and link lengths, on the ability of the open kinematic chain to relatively locate the end-effector. In the results, the DGPS and INS were tested separately, before being integrated and tested for position and orientation accuracy. The objective of this section, and this research, is to combine all of the components in the unified geo-referencing model, introduced in Chapter 5, to test the entire geo-referencing computer program developed specifically for construction equipment, and in particular, an excavator.

The inputs for this system can be seen in the equation for the unified geo-referencing model, repeated here for convenience:
     () =  / ( ) +  ()    ( ) +   

where,

  ( )

 / () denotes the position vector determined by the DGPS/INS integration integration

denotes the 3-D transformation matrix determined by the DGPS/INS

172



denotes the constant vector/lever arm between the open kinematic chain and the INS unit as determined in the initialization of the geo-referencing system

 ()



denotes relative position of the end-effector with respect to lever arm as determined by the open kinematic chain and rotary sensors

Based on the error budget in Section 6.3 the expectation is that the DGPS position error will be the key component in the positional error of the end-effector. However, the DGPS EKF output exceeded the expectations of the error budget. Given the error analysis of the open kinematic chain and the positional results of the DGPS/INS EKF it is expected that the vertical positioning error will be equally affected by the DGPS/INS and the open kinematic chain. The horizontal error is expected to be dominated by the DGPS/INS error since it is nearly two times the expected horizontal error contribution from the open kinematic chain. Given the results of the pitch and roll, they are expected to have negligible impacts on the overall accuracy of the system while the yaw angle could have a small impact on horizontal error given that a 1mrad max error and 8m max distance to end-effector (in a common digging trajectory) results in a horizontal error of ±0.008m.

Two tests were completed to observe the accuracy of the system. Both tests involved a simple digging trajectory (Figure 7.10) of an excavator over a 20 second period. One test was completed while the equipment/excavator was stationary and the other test was completed while the equipment/excavator was moving and exposed to the greater error experienced during equipment dynamics.

173

Figure 7.10: Digging trajectory for accuracy test

Each individual test included two trial trajectories: 1) under ideal conditions (assumed no errors) using the reference DGNSS/INS smoothed data provided by the `ubiquitous positioning' joint working group for the position and orientation of the excavator mainbody and Matlab simulated data, with no errors added, for the lever arm and joint angles and link lengths of the open kinematic chain and; 2) under pseudo-real-world conditions (assumed errors) using the results from the DGPS/INS integration for the position and orientation of the excavator main-body and Matlab simulated data with errors added based on the discussion in Section 6.2.3. The two trial trajectories were then differenced to test the absolute accuracy of the system. Both tests were completed in the local navigation frame (n-frame) to ensure that the results were comparable to construction 174

design. It should be noted that the link length and lever arm simulated data were based on a Volvo E380DL excavator as discussed in Section 6.2.3.3.1.

Figure 7.11: Positional errors of the end-effector while executing a common digging trajectory on both a stationary (top) and moving (bottom) excavator

Figure 7.11 shows the results of the positional error of the test in the n-frame. The figures clearly show that the positional error increases when the excavator is in motion, particularly in the vertical direction. This increased error in the vertical can be isolated to the DGPS/INS error due to the fact that the end-effector executes the same trajectory in both tests with minimal change in the pitch error, therefore, contributing a similar error to the system. The same ideology cannot be applied to the horizontal error as the equipment undergoes a significant change in the yaw angle during the trajectory.

175

Table 7.8: Comparison of geo-referencing system and GPS/INS EKF positional error

Test
DGPS/INS Stationary DGPS/INS Moving End-Effector Stationary End-Effector Moving

Root-mean-square error (m)

±0.038 ±0.033 ±0.023 ±0.045


±0.005 ±0.034 ±0.025 ±0.055


±0.038 ±0.047 ±0.034 ±0.071

The results for both tests can be found in Table 7.8 alongside the DGPS/INS positional errors for the same period of time. As expected, the accuracies of the end-effector are not dominated by one particular component of the system. The substantial change in positional errors between the DGPS/INS and the end-effector suggests that all components of the geo-referencing system contribute a significant amount to the total error. It can be concluded that the error of the system is not sensitive to any one component of the geo-referencing system in particular. In theory, the error of the system could be reduced to close to the DGPS/INS positioning error given high-quality rotary sensors mounted on the joints of the excavator. However, this is not practical because of the harsh environment the sensors would be subject to. This is in contrast to the mounting area of the INS sensors which is well protected.

The accuracy reported in Table 7.8 falls short of the American Society for Civil Engineers (ASCE) 38-02 Standard Guideline for the Collection and Depiction of Existing Subsurface Utility Data: Dealing with exposed utilities - Quality Level A, which calls for

176

a vertical accuracy of 15mm. However, it should be repeated that many of the construction tasks requiring the highest accuracy are completed by construction equipment that is either stationary or under a constant motion. Given this fact, the results of the DGPS/INS testing confirm that the DGPS dominates the positional error, and the results of the DGPS EKF, given more observed satellites (i.e. 8 observed satellites in Test No. 1) on a construction site with a clear sky view, the desired accuracy could very well be achievable.

Nevertheless, the accuracy of the geo-referencing system developed by this research does meet the requirements of several construction tasks that include but are not limited to: · · · · · Foundation excavation Grading highway sub-grades Locating existing infrastructure Pipeline trenching Residential/commercial grading

177

8

Summary Conclusions and Recommendations

8.1

Summary

The development of a geo-referencing system specifically designed for use on construction equipment, and programmed to operate in real-time, was the major objective of this research and was successfully achieved. This type of development was necessary because many of the existing geo-referencing systems are designed for aerial and mobile mapping systems, which can benefit from post-processing accuracy enhancement. Furthermore, many of the classical approaches to construction equipment positioning systems do not provide a complete 3D link to the end-effector with both positioning and orientation information. The main contribution of this research, the development and testing of a precise multi-sensor geo-referencing system for construction equipment, has been met successfully. The geo-referencing system was tested to operate continuously under controlled DGPS/INS conditions and using simulated rotary angle sensor data to generate geo-referenced end-effector positions. Three major component programs had to be designed and programmed for the geo-referencing system to be operable: 1) A DGPS carrier phase Extended Kalman filter; 2) A DGPS/INS tightly-coupled, closed-loop Extended Kalman filter; and 3) An open kinematic chain. Each program was designed specifically for the accuracy requirements of construction equipment. Furthermore, two math models were developed and programmed for this system to accept multi-sensor data. The first was created to combine sensors for any type, and number, of joint-link combination to be included in the open kinematic chain resulting in the geo-referencing 178

system being applicable to all construction equipment. The second was created to combine all the major components of the geo-referencing system including DGPS, INS and rotary sensors. The system was designed for the sensors to be mounted separately and integrated at the software level. This idea, coupled with the fact that the program was developed in an open source with a modular structure means that external sensors such as altimeters and a magnetic compass can be added easily to aid in navigation.

The research was also concerned with error analysis. To this end a program was designed and developed for analyzing the error propagation of construction equipment from the main-body to the end-effector. This type of program has two major attributes: 1) it can provide a quality control measure to analyze the ability and/or suitability of a particular piece of construction equipment to complete a construction task; and 2) it can evaluate the effects of different sensors and sensor accuracy on the entire open kinematic chain.

179

8.2

Conclusions

The following conclusions can be drawn from this research:

End-effector geo-referencing accuracy: The analysis of the absolute accuracy of the system was based on a comparison with reference data supplied by the `ubiquitous positioning' joint working group and simulated data generated for the open kinematic chain. As a result, the end-effector can be expected to achieve an accuracy of within ±0.071m RMS with horizontal and vertical components of ±0.045m and ±0.055m, respectively. It should be noted that in a stationary state, which many construction tasks are preformed in, the system was to increase its achievable accuracy to ±0.034m RMS with horizontal and vertical components of ±0.023m and ±0.025m, respectively. This is considerable enhancement and, in general, surpassed the expectations in the error analysis.

GPS ambiguity resolution: GPS was an important component of the system because it was the sole provider of absolute positioning of the system. Furthermore, in order to achieve the accuracy requirements of the system, carrier phase measurements had to be used for DPGS baseline estimation. The tests demonstrated that the least-squares approach for estimating baseline components and floating ambiguities using phase double difference observations, combined with the LAMBDA method for fixing the ambiguities as integer values was able to fix ambiguities under normal conditions (i.e., 6 observed satellites) in <25 seconds with an average of 15-20 seconds. This time period was considered successful given the time for INS initialization.

180

GPS baseline estimation: Once the phase ambiguity was determined it was applied to the baseline measurements. A total state DGPS extended Kalman filter was developed to use the updated baseline estimates and the phase double difference. The results were very precise baseline estimations with an average total standard deviation of ±0.007m. When the baseline components were applied to the known location of the master receiver the accuracy was tested. The accuracy exceeded the expectations of the error budget with an average horizontal and vertical RMS error of ±0.037m and ±0.029m, respectively.

INS initialization: System testing proved that the roll and pitch could be resolved to under 0.01° in all cases using the coarse alignment technique of leveling with two second, time-averaged accelerometer specific force measurements to reduce the effects of disturbing motions. These results could then be directly input into the DGPS/INS EKF. The system testing of the yaw/heading angle demonstrated that resolving the yaw angle using the coarse alignment technique of direct gyro-compassing required much longer time-averaging. Results showed that given a time-averaging period of 25 seconds the yaw angle was able to be resolved to <2° in all but a few tests. The 2° requirement was important because the DGPS/INS integration equations were based on small angle approximations i.e., given initial heading angles >2° significantly reduces the chances of the DGPS/INS EKF resolving the correct heading. It was also demonstrated that the DGPS/INS was able to correct for the initial error in the yaw angle when the DGPS/INS equipment is subject to significant movement.

181

GPS/INS initialization time: Given the time for calibration of the INS, the DGPS timeto-fix (the ambiguities) was considered successful. The calibration of the entire system was demonstrated to be less than 30 seconds. However, a few of the yaw angle initialization tests resulted in angle error values slightly above the 2° threshold. If these values were achieved more readily it would require the use of a quasi-stationary fine alignment to be applied, which would add minutes to the initialization time.

DGPS/INS integration: A tightly-coupled, closed-loop extended Kalman filter was designed and programmed to integrate the DGPS and INS systems. Unlike the DGPS EKF, the DGPS/INS was an error state EKF, which meant that the output was the error in the orientation, velocity and position and accelerometer and gyroscope errors. To complete the system, the errors were input into the INS navigation processor (closed-loop error correction) to be used by the inertial navigation equations, which produced the final output of corrected orientation, velocity and position. The results of the testing demonstrated that the positioning was dominated by the DGPS. This was expected due to the high weighting of the carrier phase derived DGPS positions. The DGPS/INS EKF was also able to resolve the errors in the roll and pitch during stationary periods and resolve the small angle error in the heading when the equipment was under movement.

Development of an open kinematic chain: In order for the geo-referencing system to be applicable to construction equipment a model had to be designed and programmed to link the end-effector to the geo-referenced (DGPS/INS integration) main-body. This was successfully achieved using a combination of homogeneous transformation matrices

182

developed using the Denavit-Hartenberg convention. Using this method a model was developed that could be used to design an open kinematic chain for any type, and number, of joint-link combinations. This made the model insensitive to the types of sensors used and applicable to all construction equipment.

Error propagation analysis: An error propagation analysis of the open kinematic chain was successfully programmed to analyze the effects of sensor error on the positioning of the end-effector. Similar to the developed open kinematic chain, this error analysis could be manipulated to apply to any type, and number, of joint-link combination.

183

8.3

Recommendations

Based on the research completed for this dissertation, the following recommendations are made for future work:

INS Initialization:  If lower accuracy INS systems are to be used, in an attempt to lower the system cost, new techniques for coarse and fine alignment will need to be investigated. One such technique for construction equipment, due to its static nature, would be the development of a stationary or quasi-stationary alignment for both the coarse and fine alignment using position displacement measurements. In addition to this, the initialization can be made insensitive to gyro-error by implementing the alignment in a wander-azimuth coordinate frame, thus, requiring no information on heading prior to the alignment.  Another interesting area of research would be the use of DGPS EKF output for INS alignment. If the DGPS were mounted on the outer edge the excavator a simple full 360° revolution could be used to define the three orientation angles within the small angle approximations threshold. This can be accomplished by best-fitting a circular plane to the DGPS measurements, thus defining the centre/pivot point of the excavator main-body and allowing the heading to be established.

184

DGPS/INS Integration:  The open source development of the extended Kalman filter allows for the addition of different types of sensors. An investigation into adding sensors, such as altimeters and magnetic compasses, and their effects on the DGPS/INS outputs and the INS alignment could provide positive results for the system.  Error analysis of the INS in stand-alone mode demonstrated that the INS can be useful in detecting errors in position over short time periods and therefore the INS position estimation can be used exclusively during DGPS signal loss. This leads to three possible enhancements to the system: 1) using the INS corrected solutions to detect DGPS cycle slips; 2) using the INS corrected solutions to bridge the DGPS signal outage; and 3) using the INS corrected solution to re-establish the ambiguities (given the position solution is within ~0.10m or half the L1 wavelength or ~0.40m half the wide-lane wavelength if it is being used) or be an initial estimate in on-the-fly ambiguity resolution.

Open kinematic chain:  The effects of the addition of a second sensor at each joint (i.e., on the opposite side of the joint) would be a welcome study. In theory, this will add redundancy to the open kinematic chain, add confidence in the end-effector position solution and may reduce error without the need for obtaining more expensive sensors and exposing them to the harsh environments of construction.

185

DGPS extended Kalman filter:  The addition of observations from other satellite systems such as GLONASS and the emerging European civilian run Galileo, would be beneficial and help to reduce problems with GPS signal blockage

The above research will provide experiments and challenges for years to come, but solving these problems will result in a more robust and reliable geo-referencing system that will help to advance the field of machine controlled construction equipment.

186

Appendices
Appendix A

This appendix contains the individual matrix elements of the system matrix resolved in the local navigation frame, n-frame (Groves, 2013). The explanation of the variables composing the elements can be found in Section 3.3.1. For reference the block system matrix is repeated as follows:   1 ,1 2,1 =  03   03  03 1,2 2 ,2 3 ,2 03 03 1 ,3 2,3 3,3 03 03 03   03 03 03
   03  03   03  03    1,1 = - / +  /  

 

1 ,2

 0  1  =  ( ) +      0 

-1  ( ) +  tan   ( ) +  0 0 0

0   0  0 
  ,  ( ( ) +  )2   -  , 2 ( ( ) +  )    - , tan   ( ( ) +  )2 

1,3

 / sin    = 0    ,  cos   ( ( ) +  ) cos  2   / 187

0

   /  2,1 = -

2,2

   2    ,  , tan   ,   - - 2/ sin   ( ) ( ) (     -   +           ) +              , tan   , tan  +   ,  , =  + 2/ sin    + 2/ cos    ( ) +   ( ) +   ( ) +      2 2  ,  ,   - - - 2/ cos   0  ( ) +   ( ) +   

2,3

    2     ,  sec   ,  tan   ,   ,    - - 2  cos   0 -    , ( ( ) +  )2 (( ) +  )2   ( ) +            2   ,  , sec   ,  , tan  +  ,  ,     =  + 2 ,   cos  - 2 ,   sin   0 - ( ( ) +  )2  ( ) +      2 2     ,    ,  2( )    2 0  + -   ,   sin  ( ( ) +  )2 ( ( ) +  )2  (   

2

2

3,2

1   ( ) +  = 0   0

1 ( ( ) +  ) cos  0 0 0 -

0

0   0  -1

3,3

 0   =  , sin   ( ( ) +  ) cos  2  0

0

  ,  ( ( ) +  )2     ,  ( ( ) +  )2 cos    0

188

References

American Association of State Highway and Transportation Officials (2009) Rough RoadsAhead: Fix them Now or Pay for It Later.

Allred, K. (2004) Underground Facilities The Need for Accurate Records in an Expanding Society, 3rd FIG Regional Conference Jakarta, Indonesia, October 37, 2004.

Anspach, J. (1996) Subsurface Utility Engineering: Utility Detection Methods and Applications, Symposium on the Application of Geophysics to Engineering and Environmental Problems, pp. 443-449. \

Bernold, L. (1994) In-House Study for a Consortium for Safe Excavation, North Carolina State University.

Bradley, D.A. and Seward, D.W. (1998) The Development, Control and Operation of an Autonomous Robotic Excavator, Journal of Intelligent and Robotic Systems, Kluwer Academic Publishers, Issue 21, pp. 73-97.

Budney, E., Chlosta, M. and Gutkowski, W. (2003) Load Independent Control of a Hydraulic Excavator, Automation in Construction, Elsevier, Volume 12, pp. 245254.

189

Cramer, M. (1997) GPS/INS Integration, Photogrammetric Week, Stuttgart, Germany, pp. 1-10.

Denavit, J. and Hartenberg, R.S. (1955) A Kinematic Notation for Lower-Pair Mechanism Based on Matrices, Journal of Applied Mechanics, pp 215-221.

Department of Defense World Geodetic System 1984 ­ It's definition and relationship with local geodetic systems, National Imagery and Mapping Agency, Technical Report 83502, Second Edition, 1991.

El-Sheimy, N. (1996) The Development of VISAT - A Mobile Survey System For GIS Applications, PhD Thesis, Department of Geomatics Engineering, University of Calgary.

Georgiadou, Y. and Kleusberg, A. (1988) On Carrier Signal Multipath Effects in Relative GPS Positioning. Manuscripta Geodaetica, 13, pp 172-179.

Goldstein, H. (1980) Classical Mechanics, Addison-Wesley, Massachusetts, USA.

Grewal, M.S. and Andrews, A.P. (2008) Kalman Filtering Theory and Practice using MATLAB, Third Edition, John Wiley & Sons Inc., New York.

190

Grewal, M.S., Weill, L.R. and Andrews, A.P. (2001) Global Positioning Systems, Inertial Navigation and Integration, John Wiley & Sons Inc., New York.

Groves, P.D. (2013) Principles of GNSS, Inertial, and Multisensor Integrated Navigation Systems, 2nd Edition, Artech House, London.

Farrell, J.A. and Barth, M. (1999) The Global Positioning System and Inertial Navigation, McGraw-Hill, New York.

Farrell, J.A. (2008) Aided Navigation: GPS with High Rate Sensor, McGraw-Hill, New York, 2008.

Ha, Q., Santos, M., Nguyen, Q., Rye, D. and Durrant-Whyte, H. (2002) Robotic excavation in Construction Automation, Robotics & Automation Magazine, IEEE, Volume 9, Issue 1, pp. 20-28.

Ha, Q.P., Nguyen, Q.H., Rye, D.C. and Durrant-Whyte, H.F. (2000) Impedance control of a hydraulically actuated robotic excavator, Automation in Construction, Elsevier, Volume 9, Issues 5-6, pp. 421-435.

Hasnur-Rabiain, A., Kealy, A., Alam, N., Dempster, A., Toth, C., Brzezinska, D., Gikas, V., Danezis, C. and Retscher, G. (2013) Cooperative Positioning using GPS, Low-cost INS and Dedicated Short Range Communications, in Proceedings of

191

the PACIFIC Positioning, Navigation and Timing of the Institute of Navigation (ION PNT 2013).

Hemami, A. (2008) Chapter 17 Robotic Excavation, Robotics and Automation in Construction, InTech Education and Publishing.

Heipke, C., Jacobsen, K. and Wegmann, H. (2002) Test Goals and Test Set Up for the OEEPE Test: Integrated Sensor Orientation, OEEPE Integrated Sensor Orientation Test Report and Workshop Proceedings, Official Publication No. 43, pp. 11-18.

Jekeli, C. (2000) Inertial Navigation Systems with Geodetic Applications, Walter de Gruyter GmbH & Co., Berlin, Germany.

Kalman, R. E. (1960) A New Approach to Linear Filtering and Prediction Problems, ASME Transactions, Series D: Journal of Basic Engineering, Vol. 82, pp. 35-45.

Kealy, A., Retscher, G., Alam, N., Hasnur-Rabiain, A., Toth, C., Grejner-Brzezinska, D., Moore, T., Hill, C., Gikas, V., Hide, C., Danezis, C., Bonenberg, L. and Roberts, G.W. (2012) Collaborative Navigation with Ground Vehicles and Personal Navigators, in Proceedings of the 3rd International Conference on Indoor Positioning and Indoor Navigation (IPIN), November 13-15, 2012, Sydney, Australia, 8 pgs.

192

Kealy, A., Retscher, G., Hasnur-Rabiain, A., Alam, N., Toth, C., Grejner-Brzezinska, D., Moore, T., Hill, C., Gikas, V., Hide, C., Danezis, C., Bonenberg, L. and Roberts, G.W. (2013) Collaborative Navigation Field Trials with Different Sensor Platforms, in Proceedings of the 10th Workshop on Positioning Navigation and Communication (WPNC), March 20-21, 2013, Dresden, Germany, 6 pgs.

Kennedy, S., Hamilton, J., and Martell, H. (2006) GPS/INS Integration with the iMARFSAS IMU, XXIII FIG Congress, October 8-13, Munich, Germany.

Koivo, A.J., Thoma, M., Kocaoglan, E. and Andrade-Ceto, J. (1996) Modeling and Control of Excavator Dynamics during Digging Operation, J. Aerosp. Eng. Volume 9, Issue 1, pp. 10-18.

Kocaman, S. (2003) GPS and INS Integration with Kalman Filtering for Direct Georeferencing of Airborne Imagery, Institute of Geodesy and Photogrammetry, ETH, Honggerberg, Zurich.

Koren, Y. (1985) Robotics for Engineers, McGraw-Hill Inc., New York, USA.

Levy, L.J. (1997) The Kalman Filter: Navigation's Integration Workhorse, Innovation, The Johns Hopkins University Applied Physics Laboratory, Available [Online] http://www.cs.unc.edu/~welch/kalman/Levy1997/index.html, last modified 1998.

193

Liu, Z. (1994) Comparison of Statistical Methods for the Alignment of Strapdown Inertial Systems, M.Sc Thesis, Department of Geomatics Engineering, The University of Calgary, Calgary, Canada, Report No. 20047.

Lu, M., Chen, W., Shen, X., Lam, H.C. and Liu, J. (2007) Positioning and Tracking Construction Vehicles in Highly Dense Urban Areas and Building Construction Sites, Automation in Construction, Elsevier, Volume 16, pp. 647-656.

Makkonen, T., Nevala, K. and Heikkila, R. (2006) A 3D Model Based Control of an Excavator, Automation in Construction, Elsevier, Volume 15, pp. 571-577.

Mau, S. (2005) What is the Kalman Filter and How can it be used for Data Fusion?, Available [Online] http://see-in.net/sandramau/doc/Mau05MathKalman.pdf, last modified December 2005.

Mooring, B.W., Roth, S. and Driels, M.R. (1991) Fundamentals of Manipulator Calibration, John Wiley & Sons Inc., New York.

Paul, R.P. (1981) Robot Manipulators: Mathematics, Programming and Control, The MIT Press, Cambridge, MA.

194

Redmill, K.A., Kitajima, T. and Ozguner, U. (2001) DGPS/INS Integrated Positioning for Control of Automated Vehicle, IEEE Intelligent Transportation Systems Conference Proceedings, Oakland, California, USA, August 25-29.

Rizos, C. (1999) Principles and Practice of GPS Surveying, Issue 17 of Monograph, University of New South Wales, School of Geomatic Engineering.

Schwarz, K.P. and El-Sheimy, N. (2007) Digital Mobile Mapping Systems ­ State of the Art and Future Trends, ISPRS Book Series `Advances in Mobile Mapping Technology', Taylor & Francis Group, London.

Sensor Systems, Rotary Sensors: QMI-CB-360-X CAN Bus Angle Sensor, Pamphlet, Sensor Systems - S.R.L

Skaloud, J. (1999) Problems in Direct-Georeferencing by INS/DGPS in the Airborne Environment, Invited Paper, ISPRS Workshop on `Direct versus Indirect Methods of Orientation' WG III/1, Barcelona, 25-26 November.

Strange, G. and Borre, K. (1997) Linear Algebra, Geodesy and GPS, WellesleyCambridge Press, Wellesley, MA.

195

Tan, H.S. and Huang, J. (2006) DGPS/INS-Based Vehicle Positioning with Novel DGPS Noise Processing, Proceedings of the 2006 American Control Conference, Minneapolis, Minnesota, USA, June 14-16.

Teunissen, P. J. G. (1995) The Least-Squares Ambiguity Decorrelation Adjustment: A Method for Fast GPS Integer Ambiguity Resolution, Journal of Geodesy, 70, pp. 65-82.

Uzarowski, L., Maher, M. and Farrington, G. (2005) Thin Surfacing - Effective Way of Improving Road Safety within Scarce Road Maintenance Budget. Proceedings of 2005 Annual Conference of the Transportation Association of Canada, Calgary, Alberta.

Vaha, P.K. and Skibniewski, M.J. (1993) Dynamic Model of Excavator, J. Aerosp. Eng. Volume 6, Issue 2, pp. 148-158.

Volvo (2012) Volvo Excavators: EC340D, 20024201-B, Volvo, Global Marketing.

EC380D, EC480D, Brochure, Ref. No

Wanninger, L. and Way, M. (2000) Carrier Phase Multipath Calibration of GPS Reference Stations , Proc. ION GPS 2000, Salt Lake City, UT.

Welch, G. and Bishop, G. (2002) An Introduction to the Kalman Filter, Technical Report 95-041, University of North Carolina, Dept. of Computer Science, March. 196

Wolf, P.R. and Ghilani, C.D. (1997) Adjustment Computations: Statistics and Least Squares in Surveying and GIS, John Wiley & Sons Inc., New York.

197

