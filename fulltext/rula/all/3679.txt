battery state of charge estimation and online wheel slip ratio control for autonomous wheeled mobile robot
by

Maral Partovibakhsh BSc, Amirkabir University of Technology, 2005 MSc, K. N. Toosi University of Technology, 2007

A dissertation presented to Ryerson University in partial fulfillment of the requirements for the degree of Doctor of Philosophy in the Program of Aerospace Engineering

Toronto, Ontario, Canada, 2015

©Maral Partovibakhsh 2015

I hereby declare that I am the sole author of this dissertation. This is a true copy of the dissertation, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this dissertation to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this dissertation by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my dissertation may be made electronically available to the public.

ii

BATTERY STATE OF CHARGE ESTIMATION AND ONLINE WHEEL SLIP RATIO CONTROL FOR AUTONOMOUS WHEELED MOBILE ROBOT Maral Partovibakhsh, Doctor of Philosophy 2015 Aerospace Engineering, Ryerson University

Abstract
For autonomous mobile robots moving in unknown environment, accurate estimation of available power along with the robot power demand for each mission is paramount to successful completion of that mission. Regarding the power consumption, the control unit deals with two tasks simultaneously: 1) it has to monitor the power supply (batteries) state of charge (SoC) constantly. This leads to estimation of robot current available power. Besides, batteries are sensitive to deep discharge or overcharge. The battery SoC is an essential factor in power management of a mobile robot. Accurate estimation of the battery SoC can improve power management, optimize the performance, extend the lifetime, and prevent permanent damage to the batteries. 2) The dynamic characteristics of the terrain the robot traverse requires rapid online modifications in its behaviour. The power required for driving a wheel is an increasing function of its slip ratio. For a wheeled robot moving on different terrains, slip of the wheels should be checked and compensated for to keep the robot moving with less power consumption. To reduce the power consumption, the target of the control system is to keep the slip ratio of the driving wheels around the desired value. To fulfill the above mentioned tasks, in this thesis, to increase model validity of lithium-ion battery in various charge/discharge scenarios during the mobile robot operation, the battery capacity fade and internal resistance change are modeled by adding them as state variables to a state space model. Using the output measured data, adaptive unscented Kalman filter (AUKF) is employed for online model parameters identification of the equivalent circuit model at each sampling time. Subsequently, based on the updated model parameters, SoC estimation is conducted using AUKF. The effectiveness of the proposed method is verified through experiments under different power duties in the lab environment. Better results are iii

obtained both in battery model parameters estimation and the battery SoC estimation in comparison with other Kalman filter extensions. Furthermore, for effective control of the slip ratio, a model-based approach to estimating the longitudinal velocity of the mobile robot is presented. The AUKF is developed to estimate the vehicle longitudinal velocity and the wheel angular velocity using measurements from wheel encoders. Based on the estimated slip ratio, a sliding mode controller is designed for slip control of the uncertain nonlinear dynamical system in the presence of model uncertainties, parameter variations, and disturbances. Experiments are carried out in real time on a four-wheel mobile robot to verify the effectiveness of the estimation algorithm and the controller. It is shown that the controller is able to control the slip ratio of the mobile robot on different terrains while adaptive concept of AUKF leads to better results than the unscented Kalman filter in estimating the vehicle velocity which is difficult to measure in actual practice.

iv

Acknowledgement
I would like to express my sincere gratitude to my supervisor, Prof. Guangjun Liu, for the patient, guidance, encouragement, and advice he has provided throughout my time as his student. The completion of this thesis would have been impossible without his inspiration and continuous support. Also, my deepest gratitude goes to my family for their continuous support and love.

v

Dedication

This thesis is dedicated to my parents and my brother.

vi

Table of Contents
1 Introduction 1.1 Overview and Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.2 Thesis Contributions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.2.1 Online battery parameters and SoC estimation under different power duties . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1.2.2 Dynamic model based state estimation of wheeled mobile robot . . . 1.2.3 Real-time slip ratio control over different terrains . . . . . . . . . . . 1.3 Thesis Organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2 Background and Literature Review 2.1 Battery SoC Estimation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 2.2 Mobile Robot Dynamic Model, State Estimation and Slip Ratio Control . . . 3 Estimation of Battery Model Parameters and State of Charge 3.1 Problem Formulation . . . . . . . . . . . . . . . . . . . . . . . . . . . 3.2 Lithium-Ion Battery Model Development . . . . . . . . . . . . . . . . 3.3 Parameters Identification Using AUKF . . . . . . . . . . . . . . . . . 3.3.1 The state space model . . . . . . . . . . . . . . . . . . . . . . 3.3.2 Introduction to Kalman filter . . . . . . . . . . . . . . . . . . 3.3.2.1 The process to be estimated . . . . . . . . . . . . . . 3.3.2.2 The discrete Kalman filter algorithm . . . . . . . . . 3.3.3 The extended Kalman filter (EKF) . . . . . . . . . . . . . . . 3.3.4 The Unscented Kalman filter . . . . . . . . . . . . . . . . . . 3.3.4.1 Adaptive unscented Kalman filter . . . . . . . . . . . 3.3.5 Experimental results for parameter identification using AUKF 3.4 State of Charge Estimation Using AUKF . . . . . . . . . . . . . . . . vii 1 1 3 4 4 4 5 6 6 9 13 13 14 16 16 16 17 18 20 23 26 27 32

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

3.5 3.6

3.4.1 SoC definition . . . . . . . . . . . 3.4.2 SoC Estimation by AUKF . . . . Experimental Results for SoC Estimation Summary . . . . . . . . . . . . . . . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

. . . .

32 32 34 36 39 39 40 41 44 44 46 47 47 50 50 51 57 58 58 59 59 61 63 64 68 68 71 75 76 76 77 78

4 Wheel and Robot Dynamic Model and State Estimation 4.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . 4.2 Tire Dynamics . . . . . . . . . . . . . . . . . . . . . . . . 4.2.1 Tractive force of tires . . . . . . . . . . . . . . . . . 4.2.2 Rolling resistance of tires . . . . . . . . . . . . . . . 4.3 Wheel Rotational Dynamics . . . . . . . . . . . . . . . . . 4.4 Robot Body Dynamics . . . . . . . . . . . . . . . . . . . . 4.5 State Estimation Using AUKF . . . . . . . . . . . . . . . . 4.5.1 State space model formulation . . . . . . . . . . . 4.6 Real Time Robot State Estimation: Experimental Results 4.6.1 Robot Description . . . . . . . . . . . . . . . . . . 4.6.2 Experimental results . . . . . . . . . . . . . . . . . 4.7 Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . 5 Sliding Mode-Based Slip Ratio Control 5.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . 5.2 Introduction to Sliding Mode Control . . . . . . . . . . 5.2.1 Sliding surfaces . . . . . . . . . . . . . . . . . . 5.2.2 Controller design . . . . . . . . . . . . . . . . . 5.2.3 Chattering reduction . . . . . . . . . . . . . . . 5.3 Sliding Mode Design for the Wheel Slip Ratio Control . 5.4 Online Slip Ratio Control: Experimental Results . . . . 5.4.1 Experimental setup . . . . . . . . . . . . . . . . 5.4.2 Online slip ratio control . . . . . . . . . . . . . 5.5 Summary . . . . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

6 Conclusions and Future Work 6.1 Conclusions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6.2 Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 6.3 Thesis Publications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . viii

List of Tables
3.1 3.2 3.3 4.1 4.2 Statistic List of Voltage Errors with Offline and Updated Model. . . . . . . . Statistic List of Voltage Errors with AUKF, AEKF, UKF, and EKF. . . . . Statistic List of SoC Errors with AUKF, AEKF, UKF, and EKF. . . . . . . Average Values of Coefficient of Terrain Adhesion [85]. . . . . . . . . . . . Design parameters for RLMA. . . . . . . . . . . . . . . . . . . . . . . . . . 32 34 36 43 51

ix

List of Figures
3.1 3.2 3.3 3.4 3.5 3.6 3.7 Equivalent circuit model of the battery. . . . . . . . . . . . . . . . . . . . . . The discrete Kalman filter cycle. . . . . . . . . . . . . . . . . . . . . . . . . The Kalman filter algorithm. . . . . . . . . . . . . . . . . . . . . . . . . . . The extended Kalman filter algorithm. . . . . . . . . . . . . . . . . . . . . . The wheeled-mobile robot. . . . . . . . . . . . . . . . . . . . . . . . . . . . . (a) Measured terminal voltage, (b) Measured current, (c) Measured current (magnified). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a) Cbulk and Csurf ace estimation results using AUKF vs. UKF and offline calculations, b) Re and Rt estimation results using AUKF vs. UKF and offline calculations. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . a) Measured voltage vs. estimated voltage based on updated model and offline model, b) Measured voltage vs. estimated voltage based on updated model and offline model (magnified). . . . . . . . . . . . . . . . . . . . . . . . . . . a) Measured voltage vs. estimated voltage using AUKF and UKF (magnified), b) Voltage estimation error (magnified). . . . . . . . . . . . . . . . . . . . . The overall estimation algorithm schematic. . . . . . . . . . . . . . . . . . . a) Measured voltage vs. estimated voltage using AUKF, AEKF, UKF, EKF (magnified), b) Voltage estimation error (magnified). . . . . . . . . . . . . . Voltage error covariance. . . . . . . . . . . . . . . . . . . . . . . . . . . . . a) State of Charge estimation by AUKF , AEKF, UKF, EKF, b) State of Charge estimation by AUKF, AEKF, UKF, EKF (magnified). . . . . . . . . SoC estimation error (magnified). . . . . . . . . . . . . . . . . . . . . . . . SoC error covariance. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Tire axis system [84]. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Variation of tractive force with longitudinal slip of a tire [84]. . . . . . . . . 15 19 20 22 27 28

30

3.8

31 33 34 35 36 37 38 38 40 42

3.9 3.10 3.11 3.12 3.13 3.14 3.15 4.1 4.2

x

4.3 4.4 4.5 4.6 4.7 4.8 4.9 4.10 4.11 4.12 4.13 4.14 4.15 4.16

Free-body diagram of the wheel. . . . . . . . . . . . . . . . . . . . . . . . . . Robot and tire forces. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Robot kinematic parameters. . . . . . . . . . . . . . . . . . . . . . . . . . . Wheeled mobile robot under investigation (RLMA). . . . . . . . . . . . . . . Wheel angular velocity estimation using AUKF. . . . . . . . . . . . . . . . Wheel angular velocity estimation using UKF. . . . . . . . . . . . . . . . . Wheel angular velocity estimation error for AUKF and UKF algorithms. . . Wheel angular velocity estimation using AUKF (moving forward and backwards). Wheel angular velocity estimation using UKF (moving forward and backwards). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . LIDAR-Lite laser rangefinder. . . . . . . . . . . . . . . . . . . . . . . . . . . Robot longitudinal velocity estimation using UKF. . . . . . . . . . . . . . . . Robot longitudinal velocity estimation using AUKF. . . . . . . . . . . . . . Robot longitudinal velocity estimation using AUKF (moving forward and backwards). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Robot longitudinal velocity estimation using UKF (moving forward and backwards). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . The structure of the controller/observer system. . . . . . . . . . . . . . . . . Operating control unit. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . P C - 104. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . The experimental setup. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . QN X operating system schematic. . . . . . . . . . . . . . . . . . . . . . . . a) Performance of SMC on a slippery surface based on AUKF, b) Performance of SMC on a slippery surface based on the measured data. . . . . . . . . . . The applied torque when the robot is moving on a slippery surface. . . . . . a) Performance of SMC on surface transition based on AUKF, b) Performance of SMC on surface transition based on the measured data. . . . . . . . . . . The applied torque when the robot is moving from normal surface to the slippery one. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

45 46 46 50 52 52 53 53 54 54 55 55 56 56 68 69 70 71 71 73 74 74 75

5.1 5.2 5.3 5.4 5.5 5.6 5.7 5.8 5.9

xxi

List of Abbreviations
Abbreviation AEKF AMR ANN AUKF CAN EKF IAE IMU KF MMAE OCU OCV PDF PF RLMA SMC SoC UKF UT VSCS Description Adaptive extended Kalman filter Autonomous mobile robot Artificial neural network Adaptive unscented Kalman filter Controller area network Extended Kalman filter Innovation-based adaptive estimation Inertial measurement unit Kalman filter Multiple-model-based adaptive estimation Operating control unit Open circuit voltage Probability density function Particle filter Ryerson linkage mechanism actuator Sliding mode controller State of charge Unscented Kalman filter Unscented transformation Variable structure control systems

xxii

Chapter 1 Introduction
1.1 Overview and Motivation

An autonomous mobile robot (AMR) is a machine that operates in a partially unknown and unpredictable environment. The ability of mobile robots to move around autonomously in their environment determines the best applications of such robots: tasks that involve transportation, exploration, surveillance, etc. In recent years, AMRs are increasingly being used for high-risk tasks and in unstructured environments where an extended degree of autonomy is needed, such as search and rescue, military operations, mining, and planetary exploration. Autonomous robots cannot always be programmed to execute predefined actions in unknown environments. Also, the environment might have dynamic characteristics where quick online modifications in the robot behaviour is needed. For planetary exploration missions, mobile robots are required to perform more difficult tasks in increasingly challenging terrains with limited human supervision. The performance of such mobile robots in complex environments is highly influenced by the power capability of the onboard power sources, especially in unknown areas like space where manual recharging or refreshing of the power source is not possible. It is important that the battery, as the main source of power, is reliable and capable of delivering enough power when it is required. The battery state of charge (SoC) is defined as the percentage of stored charge available relative to that after a full charge of the battery. As there is no 1

direct measurement available for the battery SoC, reliable and accurate estimation of the battery SoC is crucial for the power management system, which aims to improve the battery reliability, prolong battery lifetime, and improve the performance of the AMR, consequently. Moreover, failure in estimating the battery SoC precisely can easily cause under or overcharging situations which result in a decrease of the power-output capability and lead to irreversible damage in the battery. However, accurate SoC estimation is complicated because it is affected by many factors such as temperature, capacity, and internal resistance. In this thesis, in order to get more accurate and robust SoC estimation, the Lithium-Ion battery model parameters have been identified using an adaptive unscented Kalman filtering (AUKF) method and based on the updated model, the battery SoC has been estimated consequently. An adaptive adjustment of the noise covariances in the estimation process is implemented using a technique of covariance matching in the unscented Kalman filter context. The effectiveness of the proposed method has been evaluated through experiments under different power duties in the lab environment. The obtained results showed that the proposed method provides better accuracy both in battery model parameters estimation and the battery SoC estimation in comparison with other Kalman filter extensions. On the other hand, to fulfill advanced mission goals, autonomous mobile robots should travel much longer distance over more challenging terrains and achieve more complex scientific tasks with limited human supervision. So, wheel-terrain interaction plays a critical role in rough-terrain mobility. As wheeled mobile robots have been increasingly applied to operate in unstructured environments, wheel slip becomes an issue during the locomotion on different terrains. Based on the experimental results, the power required for driving a wheel is an increasing function of its slip ratio. So the slip of the wheels should also be checked and compensated for to keep a robot moving with less power consumption. Considering the slip ratio effect on robot power consumption, analysis should be conducted to find optimal control algorithm based on the slip ratio to minimize the power consumption. The target of the robot control system is to control the slip ratio and keep it around the optimal value. How to estimate

2

and identify the real-time optimal slip ratio is not only the premise of the robot control system, but also one of the difficulties. Due to the high nonlinearity of the system and to the presence of time-varying parameters and uncertainties, a robust control approach is needed with high accuracy which generates continuous control actions while keeping the same robustness properties with respect to uncertainties. This thesis presents a model-based approach to estimating the robot longitudinal velocity and effective control of the slip ratio applicable to wheeled mobile robots (WMR). The adaptive unscented Kalman filter is developed to estimate the vehicle longitudinal velocity and the wheel angular velocity in the presence of system parameter variations and disturbances using measurements from wheel encoders. An adaptive adjustment of the noise covariances in the estimation process is implemented using a technique of covariance matching in the unscented Kalman filter context. Then, based on the estimated slip ratio a sliding mode controller is designed for slip control of the uncertain nonlinear dynamical system in the presence of model uncertainties, parameter variations, and disturbances. Experiments are carried out to verify the effectiveness of the estimation algorithm and the controller performance. The controller is able to provide effective slip control of the mobile robot, despite uncertainties present in the robot/wheel dynamics and changing terrain conditions. It is also demonstrated that the adaptive concept of AUKF leads to better results than the unscented Kalman filter in estimating the robot velocity which is difficult to measure in actual practice.

1.2

Thesis Contributions

The works accomplished in the present thesis are divided into three main categories as the following:

3

1.2.1

Online battery parameters and SoC estimation under different power duties

In this thesis, in order to get more accurate and robust state of charge estimation, the Lithium-Ion battery model parameters are identified using an adaptive unscented Kalman filtering method and based on the updated model, the battery SoC is estimated consequently. An adaptive adjustment of the noise covariances in the estimation process is implemented using a technique of covariance matching in the unscented Kalman filter context. The effectiveness of the proposed method is evaluated through experiments under different power duties in the lab environment. The obtained results are compared with that of the adaptive extended Kalman filter, extended Kalman filter, and unscented Kalman filter-based algorithms. The comparison shows that the proposed method provides better accuracy both in battery model parameters estimation and the battery SoC estimation.

1.2.2

Dynamic model based state estimation of wheeled mobile robot

This thesis presents a model-based approach to estimating the robot longitudinal velocity. The adaptive unscented Kalman filter is developed to estimate the vehicle longitudinal velocity and the wheel angular velocity in the presence of system parameter variation and disturbances using measurements from wheel encoders. Experiments are carried out to verify the effectiveness of the estimation algorithm. It is also demonstrated that the adaptive concept of AUKF leads to better results than the unscented Kalman filter in estimating the robot velocity which is difficult to measure in actual practice.

1.2.3

Real-time slip ratio control over different terrains

In this thesis, in order to achieve accurate slip ratio estimation, based on the estimated slip from the previous section, an on-line sliding mode-based controller is designed. The control objective of the control system is to control the actual slip for the desired slip ratio in various terrain conditions. The system under control is highly nonlinear with time-varying 4

parameters. Therefore, a robust control approach is needed to generate continuous control actions while being robust to nonlinearities and uncertainties. Sliding mode approach has been selected to achieve the goal of robust slip ratio control in the presence of parameter uncertainties. The proposed algorithm has been run in real time on a four-wheel mobile robot to verify its effectiveness in controlling of the slip ratio for changing terrain conditions.

1.3

Thesis Organization

The present thesis is divided into six chapters. The present chapter is an overview of the problem in hand, motivation and the objectives of the study. In chapter 2, the research endeavors in this area are presented. In chapter 3, an equivalent circuit model adopted is described and after a brief introduction to Kalman filter and its extensions, the AUKF method is highlighted. Model parameters are estimated using AUKF consequently and the obtained results are compared with those of the UKF method and offline calculations. The SoC estimation method based on AUKF is proposed and experimental results including comparisons are presented. In chapter 4, the robot and the wheel dynamic models are presented. The adaptive unscented Kalman filter for estimating the vehicle velocity is described. After the description of the experimental setup, the experiments are conducted at different speeds for the robot to verify the effectiveness of the algorithm to estimate the system states. In chapter 5, after an introduction to variable structure and sliding mode control concepts, based on the slip ratio estimated in chapter 4, an online sliding mode controller is designed to control the wheel slip ratio on different terrrains. Then, the experimental setups are described and experiments are conducted to verify the algorithm accurately control the wheel slip based on the estimated vehicle velocity as a robot traverses on different surfaces. The dissertation ends with the conclusions and suggested future work in Chapter 6.

5

Chapter 2 Background and Literature Review
2.1 Battery SoC Estimation

So far, a variety of methods such as coulomb counting, measurement of the specific gravity of the electrolyte, impedance measurement, and artificial neural network (ANN) have been proposed to estimate the battery SoC. Piller et al. provide an overview in [1]. Later on, there have been more methods reported in [2]-[6]. The method of Coulomb counting is presently the most widely used one, which is an open-loop algorithm requiring dynamic measurement of the cell/battery current [7], but accumulation of measurement errors happens due to reliance on integration and also precise initial SoC is required in this method, which can be difficult to determine accurately. SoC can also be estimated by correlating the measured impedances with the known ones at various SoC levels over a wide range of ac frequencies [8], [9]. However, injecting signals directly into the cell to measure its impedance is not a suitable technique for AMR applications [11]. ANNs and fuzzy logic based methods have been also reported to estimate the battery SoC as well as the battery model parameters [10]-[13]. In [14] a state space battery model is approximated using an ANN. Recently, a widespread application of neural networks and fuzzy logic has been used in online estimation of SoC to improve the performance of the aforementioned methods. Yanqing [15] designed an algorithm based on neural networks which was capable of predicting SoC without knowledge of cell internal structure. Cheng et al. [16] proposed a three-layer feed-forward network in 6

order to improve immune algorithm in SoC estimation. The SoC of batteries has a nonlinear relationship with its terminal voltage and current [17]. It is usually not an easy task to obtain this nonlinear relationship. To cope with this problem, some researchers have proposed neural networks and trained them to approximate this complicated nonlinear function [1820]. Generally, these methods can estimate the battery SoC precisely without the knowledge of accurate initial SoC. However, the performance of these methods is strongly reliant on the amount and reliability of the training data. Zhang et al. applied an H observer to estimate the battery SoC based on the equivalent circuit linear state space model for a power transmission line inspection robot [21]. Kalman filtering is a popular approach to estimate the battery SoC and model parameters even when the initial SoC is unknown. In spite of higher computational cost compared with the other methods, Kalman filtering methods have shown to be a suitable technique for real-time battery power management. Extended Kalman filter (EKF) based on nonlinear state space battery models have been used for parameter identification of the battery model and online SoC estimation [22]-[25]. In [26] EKF has been employed to estimate the model bulk capacity as a system state variable. The battery internal resistance is estimated using KF in [27]. However, there are some limitations using EKF. First, linearization of the model equations could cause unstable filters if the time step intervals are not sufficiently small; secondly, the derivation of the Jacobian matrices could be complicated and cause implementation difficulties [28], [29]. The performance of EKF, the particle filter, the quadrature KF, and smooth variable structure filter in estimating the state and parameters of lithium-ion batteries has been compared in [30]. Unscented Kalman filter (UKF) as a Sigma-point Kalman filter based algorithm has been introduced which has a higher order of accuracy in estimating the mean and the error covariance of the state vector than EKF [31-32]. In unscented Kalman filter based algorithms, there is no need for the calculation of Jacobian matrices and the computational complexity is comparable to EKF [33]-[36]. UKF has been studied in [37], [38] either on electrochemical or equivalent circuit model of the battery to estimate SoC. Since the SoC needs to be estimated on-line, the necessity for a robust estimation method should be emphasized for practical operations.

7

Mohamed et al. [39] investigated the performance of multiple model-based adaptive Kalman filters for vehicle navigation using GPS. For the battery SoC estimation, the error would be large or even divergent if inappropriate values of the noise covariances are used. To improve the accuracy of EKF-based SoC estimation, the adaptive extended Kalman filter (AEKF) has been studied in [4], [40], and [41] which adaptively updates the process and measurement noise covariances. Sun et al. [42] also developed an adaptive unscented kalman filter (AUKF) to online estimate the SOC of a lithium-ion battery based on the zero-state hysteresis battery model. The algorithms used in the literature to adapt Q and R are classified into two main categories: innovation-based adaptive estimation (IAE) and multiple-model-based adaptive estimation (MMAE) [39]. The IAE approach is based on the covariance-matching technique [43] in which the discrepancy between the theoretical covariance of innovations and its actual covariance is used to adapt Q and R. Dynamic battery models have been developed based on the electrochemical cell model. Unfortunately, such battery models for various conditions are too complicated for on-line SoC estimations. It is necessary to use models with reduced complexity for the SoC estimation [44]. Dynamic models of Lithium-Ion batteries can be classified into three categories: first principle model, black box model, and equivalent circuit model [44]. The first principle model is a precise model based on electrochemistry, thermodynamics, and transport phenomena and could fully describe the characteristics of the battery power by using mathematics to describe the inner action of the battery [45], [46]. The black box model is based on measured data and statistical approaches [13], [47]. For cases in which theoretical or very complex models are difficult to solve using only existing modeling methods it would be suitable, but it cannot be applied to interpolation and extrapolation; thus, it is not appropriate for SoC estimations. The equivalent circuit model is a reduced model based on electrochemistry consisting of resistors, capacitors and voltage sources, forming a circuit network [48], [49]. The equivalent circuit model has been widely used in various types of modeling and simulation for battery management systems [26], [38].

8

2.2

Mobile Robot Dynamic Model, State Estimation and Slip Ratio Control

Autonomous mobile robots are expected to play important roles in future lunar/planetary missions. To fulfill advanced mission goals, mobile robots should travel much longer distance over more challenging terrain and achieve more complex scientific tasks with limited human supervision. Hence the control algorithms have to take into account the physical characteristics of the robots and the planetary environment in order to achieve high effectiveness of a robot traversing rough terrains. The wheel slip ratio is an important factor in terramechanics modeling and the control of planetary rovers, and it is defined as a function of the vehicle longitudinal velocity and angular velocity of a wheel [50]. Wheeled mobile robots are subject to slip during locomotion on different terrains, which leads to loss of velocity and extra consumption of energy. Based on the iodometry data obtained from the trace produced by the wheels of the robot while moving on a rough and deformable terrain, an estimation method for estimating the lateral slip is proposed in [51]. Ding et al. [52] proposed two longitudinal slip ratio estimation methods: the first one is based on visual data and analyzes the traces made by the lugs of a wheel on the terrain while the latter solves the terramechanic equations to estimate the wheels slip ratios. Yoshida et al. [53] investigated a slip based model. The wheel slip ratio is considered as a state variable and the drawbar pull is derived. How the slip ratio affects the rigid wheels tractive performance is analyzed in [54]. In many researches Kalman filters have been utilized to estimate lateral slip. [55] proposed a navigation system combining inertial measurements and sensor error model to increase measurement accuracy of the Kalman filter. A model-based Kalman filter combined with position updates from GPS are used in [56-57] to estimate vehicle side slip. However, the longitudinal wheel slip and its effects have not been specifically considered in these works. For wheeled mobile robots, [58] considers slip in the wheeled mobile robot dynamic model. Small values of slip ratios on which traction force was linearly dependent have been considered. Then a slow manifold approach has been developed to design output

9

feedback control law. In [59] anti-slip factor was introduced to represent the percentage of a wheel's angular speed that reflects the wheel's forward speed. Artificial neural network has been employed for optimal speed tracking control. In [60] introduced slip states into a generalized wheeled mobile robot kinematic model. [61] considered the slip as a small, measurable, bounded disturbance in the wheeled mobile robot kinematic model, then after a kinematic control law was developed to overcome the disturbance. In [62] wheel slip was considered uncertainty in robot dynamics and a robust control was designed to suppress it. In [63] skid-slip effect for a wheeled mobile robot was considered as disturbance on kinematic model, estimated using Kalman filter and compensated in a position tracking control. In [64] longitudinal traction force was included in an omni-directional WMR model by externally measuring the magnitude of slip. However, the ideal wheeled mobile robot model was used in control design for simplicity. In [65] lateral traction force was introduced that was linearly dependent on lateral slip, and a steering control approach was applied to lateral position tracking control for a bicycle model. In [66] longitudinal slip dynamics was considered in an omni-directional wheeled mobile robot model. However in the control law derivation, pure rolling was assumed to obtain a relationship between the driving torque and the traction force. In [67] both longitudinal and lateral tractions were introduced, which were approximated to be linearly dependent on longitudinal and lateral slip, respectively, for a reduced unicycle model representing a four wheel- drive wheeled mobile robot. In the literature, control algorithms have been developed to minimize the power consumption and compensate for the velocity loss caused by wheel slip. The control algorithm proposed in [53] tries to increase the rover maneuverability and avoid immobilization by limiting the wheel excessive force. On the basis of the analysis of the quasi-static model, including the wheel-soil interaction mechanics, [68] presented a method for wheel-ground contact angle measurement and determination of the optimal torques of a six-wheeled rover with consideration of the system constraints, in order to limit the wheel slip. The sensorbased feedback control is developed in [69] to compensate for the vehicle sideslip and wheel longitudinal/lateral slips. Considering uncertainties of the nonlinear model, the sliding mode

10

controller is designed in [70] to keep the slip ratio of the wheel at the desired value. In [52], a suboptimal control algorithm is proposed to keep the wheels slip ratios equal and the body velocity of the rover constant without calculating the slip ratio values. In [71], based on kinematics and dynamics of the rover, a sliding mode-based traction coordinating control algorithm is developed to optimize the traction force and minimize the slip ratio for the wheeled lunar rover with Rocker Bogie. The traveling velocity of the rover is regulated by a PID controller. [72] provides a comparison of the performance of the classical PID controller and the sliding mode traction controller in avoiding wheel slip during acceleration. It is shown that more stable and robust performance is achieved by sliding mode controller than the standard PID control algorithm. [73] modeled the overall wheeled mobile robot dynamics subject to wheel slip and designed a time-invariant discontinuous feedback control law to asymptotically stabilize the wheeled mobile robot model to a desired configuration. Slip ratio has been also a challenging issue in automotive research [74-77]. In [72] the fuzzy analysis is employed for calculation of the optimal slip ratio for current road condition. A PID controller is developed to control the electric motor torque to keep the slip ratio of the drive wheels around the optimum slip ratio. [78] develops a sliding mode observer for the estimation of the electric/hybrid electric vehicle velocity . The algorithm is integrated with the design of a sliding-mode slip ratio controller to establish a robust control strategy. [76] introduces a second order sliding mode controller for slip ratio control of electric vehicle. The proposed controller is coupled with a sliding-mode observer, which enables the online estimation of the tire-road adhesion coefficient; then the traction control is achieved by maintaining the wheel slip at the desired optimal value for different road conditions. [79] has employed the unscented Kalman filter to estimate the vehicle velocity and wheel angular speed of the anti-lock braking system. Unscented Kalman filter (UKF) as a Sigma-point Kalman filter based algorithm has been introduced which has a higher order of accuracy in estimating the mean and the error covariance of the state vector than extended Kalman filter and shows more efficient performance in state estimation. However, such work generally applies at significantly higher speeds than is typical for autonomous robots.

11

Taking into account the slip ratio effect on robot power consumption, keeping the the slip ratio of the wheels around the optimal value is a target of the robot control system. Estimating the real-time slip ratio is a main task of the robot control system, and it is also one of the difficulties. The slip ratio is a function of the wheel angular velocity and the vehicle longitudinal velocity. [80] estimates the longitudinal velocity and wheel slip using extended Kalman filter based on the robot dynamic model and wheel encoder and IMU measurements. The majority of the control algorithms reported in the past for slip ratio control were based on the available vehicle and wheel velocities. However, in practice, it is difficult to measure robot velocity while the measured wheel angular velocity is noisy.

12

Chapter 3 Estimation of Battery Model Parameters and State of Charge
3.1 Problem Formulation

Power management is a key factor in outdoor mobile robot autonomy. Accurate estimation of the battery state of charge (SoC) is a critical issue in power management of autonomous mobile robots (AMRs) operating in unknown environments. The performance of such mobile robots in complex environments is highly influenced by the power capability of the onboard power sources, especially in unknown areas like space where manual recharging or refreshing of the power source is not possible. It is important that the battery, as the main source of power, is reliable and capable of delivering enough power when it is required. The battery SoC is defined as the percentage of stored charge available relative to that after a full charge of the battery. As there is no direct measurement available for the battery SoC, reliable and accurate estimation of the battery SoC is crucial for the power management system. However, accurate SoC estimation is complicated because it is affected by many factors such as temperature, capacity, and internal resistance. In this research, in order to increase model validity of Lithium-Ion battery in various charge/discharge scenarios during an AMR operation in an unknown environment, unscented Kalman filter (UKF) is employed for online model parameter identification of the equivalent

13

circuit model. As precise estimation of battery SoC is highly influenced by the accuracy of the battery model, it is crucial to update the battery model parameters during a mission. The validity of the method is evaluated through experiments under various power duties for an AMR such as moving forward, backwards, on slope, and making turns in the laboratory environment. The obtained results are compared with the offline calculations. Subsequently, based on the updated model parameters, SoC estimation is conducted using UKF and the effectiveness of the proposed method is verified through experiments. Since the SoC needs to be estimated on-line, the necessity for a robust estimation method should be emphasized for practical operations. To improve the accuracy of UKF-based SoC estimation, the adaptive unscented Kalman filter is employed to estimate the battery model parameter and SoC. The effectiveness of the proposed method is verified through experiment for both battery model parameters and SoC estimation. The obtained results are compared with those of adaptive extended Kalman filter (AEKF), extended Kalman filter (EKF), and UKF.

3.2

Lithium-Ion Battery Model Development

In this research, zero-state hysteresis equivalent circuit model is adopted to estimate the battery SoC [26]. This model consists of a bulk capacitor Cbulk representing the ability of the battery to store charge, a capacitor modeling surface capacitance and diffusion effect in the battery Csurf ace , a terminal resistance Rt a surface resistance Rs , and an end resistance Re . The voltage across the bulk and surface capacitors are denoted as Vcb and Vcs , respectively. The terminal voltage and current are denoted as Vt and I where the battery current is positive for the charging mode and negative for the discharging mode. The model is shown in Fig. 3.1.

14

Figure 3.1: Equivalent circuit model of the battery.

From Fig. 3.1, the electrical behaviour of the circuit can be expressed as follows:  Vcb Vcs I     Vcb = 2Re Cbulk - 2Re Cbulk + 2Cbulk Vcb Vcs I  cs = V - 2Re C + 2Csurf 2Re Csurf ace ace surf ace    V = R I + R I + Vcb + Vcs
t t e 2 2

(3.1)

Taking the time derivative of the terminal voltage and assuming that the rate of change of terminal current is negligible ( dI  0) [22], [25] yield: dt t = [ V 1 1 - ]Vcs 2Re Cbulk 2Re Csurf ace 1 1 +[ - ]Vcb 2Re Csurf ace 2Re Cbulk 1 Rt Rt +[ - + ]I 2Re Csurf ace 2Re Cbulk 2Re Csurf ace (3.2)

In the above equations for simplicity we assume Rs = Re .

15

3.3
3.3.1

Parameters Identification Using AUKF
The state space model

Transforming (3.1), (3.2) into the state space form provides: x  = f (x, u) y = h(x, u) (3.3)

In order to update model and achieve more accurate SoC estimation, the model parameters:
1 , 1 Cbulk Cbsurf ace

,

1 Re

, and Rt are considered as state variables in the state space model as

follows: x = x1 x2 x3 x4 x5 x6 x7 = Vcb Vcs Vt
1 Cbulk 1 Csurf ace 1 Re

Rt

(3.4) (3.5)

f (x, u) = f1 f2 f3 f4 f5 f6 f7 , h(x, u) = x3 , u = I

Then we have:   f1 = - 1 xxx +1 xxx +1 xu  2 1 4 6 2 2 4 6 2 4    f = -1x x x + 1x x x + 1x u 2 2 2 5 6 2 1 5 6 2 5 1 1 1 1  f 3 = - 2 x1 x4 x6 + 2 x1 x5 x6 + 1 xxx -2 x2 x5 x6 + 1 x x u- 1 x x x u+ 2 x5 x6 x7 u  2 2 4 6 2 5 6 2 4 6 7    f =f =f =f =0 4 5 6 7 (3.6) Next, the model parameters of this nonlinear system are identified using AUKF.

3.3.2

Introduction to Kalman filter

The Kalman filter is a set of mathematical equations that recursively estimate the state of a process, in a way that minimizes the mean of the squared error. The filter supports estimations of past, present, and future states when the precise system model is unknown [88].

16

3.3.2.1

The process to be estimated

The Kalman filter estimates the state x  Rn of a discrete-time controlled process having the linear stochastic difference equation xk = Axk-1 + Buk-1 + wk-1 with a measurement z  Rm as zk = Hxk + vk (3.8) (3.7)

wk and vk represent the process and measurement noise respectively which are assumed to be independent of each other, white, and with normal probability distributions p(w)  N (0, Q) (3.9)

p(v )  N (0, R)

(3.10)

In practice, Q and R might change at each sampling time, however here we assume they are constant. The n × n matrix A in the difference equation (3.7) relates the state at the previous time step k - 1 to the state at the current step k , in the absence of either a driving function or process noise. The n × l matrix B relates the optional control input u  Rl to the state x. The m × n matrix H in the measurement equation (3.8) relates the state to the measurement zk . In practice H changes at each sampling time but here we assume it is constant. ^ x ¯k  Rn is defined to be the a priori state estimate at step k given knowledge of the process prior to step k , and x ^k  Rn to be the a posteriori state estimate at step k given measurement zk . The a priori estimate error covariance is then ¯k = E [(xk - x ^ ^ P ¯k )(xk - x ¯ k )T ] (3.11)

17

and the a posteriori estimate error covariance is Pk = E [(xk - x ^k )(xk - x ^ k )T ] (3.12)

The goal in deriving the equations for the Kalman filter is to find an equation that ^ computes an a posteriori state estimate x ^k as a linear combination of an a priori estimate x ¯ and a weighted difference between an actual measurement zk and a measurement prediction ^ Hx ¯k as ^ ^ x ^k = x ¯k + K (zk - H x ¯k ) (3.13)

^ This zk - H x ¯k in (3.13) is called the residual. It shows the discrepancy between the predicted ^ measurement H x ¯k and the actual measurement zk . The n × m matrix K in (3.13) is the gain that minimizes the a posteriori error covariance (3.12). 3.3.2.2 The discrete Kalman filter algorithm

The Kalman filter estimates the process state at some time and then gets feedback in the form of noisy measurements. So, the estimation algorithm consists of time update and measurement update equations. The time update equations project forward the current state and error covariance estimates to get the a priori estimates for the next time step. The feedback is done by the measurement update equations. The final estimation algorithm is like a predictor-corrector algorithm for solving numerical problems as shown below in Fig. 3.2 [88].

18

Figure 3.2: The discrete Kalman filter cycle.

The discrete Kalman filter procedure is as follow: · Initialization The initial state and the initial covariance are defined as: x ^ 0 = E [ x0 ] , · Time update The state prediction is given: ^ x ¯k = Ax ^k-1 + Buk-1 The predicted covariance is computed as: ¯k = APk-1 AT + Q P · Measurement update The filter gain is calculated by: ¯k H T (H P ¯k H T + R)-1 Kk = P (3.17) (3.16) (3.15) P0 = E [(x0 - x ^0 )(x0 - x ^0 )T ] (3.14)

19

The state estimation is obtained as: ^ ^ x ^k = x ¯k + Kk (zk - H x ¯k ) The estimated covariance is: ¯k Pk = (I - Kk H )P Fig. 3.3 shows the Kalman filter algorithm completely. (3.19) (3.18)

Figure 3.3: The Kalman filter algorithm.

3.3.3

The extended Kalman filter (EKF)

Kalman filter developed for linear stochastic difference equation. Another version of Kalman filter that linearizes about the current mean and covariance is called an extended Kalman filter. A general stochastic state-space model of a nonlinear model is: xk = f (xk-1 , uk-1 , wk-1 ) zk = h(xk , vk ) 20 (3.20)

In this case the non-linear function f relates the state at the previous time step k - 1 to the state at the current time step k . The non-linear function h relates the state xk to the measurement zk . The EKF extends forms a Gaussian approximation to the joint distribution of state and measurements. A first order EKF can be described as follows: · Initialization The initial state and the initial covariance are determined by: x ^ 0 = E [ x0 ] , · Time update The prediction of the state is given by: ^ x ¯ = f (^ xk-1 , uk-1 , 0) The predicted covariance is computed as: ¯k = Ak Pk-1 Ak T + Wk Qk-1 Wk T P · Measurement update The filter gain is calculated by: ¯k Hk T (Hk P ¯k Hk T + Vk Rk Vk T )-1 Kk = P The state estimation is determined by: ^ ^ x ^k = x ¯k + Kk (zk - h(x ¯k , 0)) (3.25) (3.24) (3.23) (3.22) P0 = E [(x0 - x ^0 )(x0 - x ^0 )T ] (3.21)

21

The estimated covariance is: ¯k Pk = (I - Kk Hk )P (3.26)

^ ^ where xk and zk are the actual state and measurement vectors, x ¯k and h(x ¯k ) are the approximate state and measurement vectors, and x ^k is an a posteriori estimate of the state at step k . wk and vk represent the process and measurement noise, A[i,j ] = f[i] (^ xk-1 , uk-1 , 0) x[j ] f[i] (^ xk-1 , uk-1 , 0) W[i,j ] = w[j ] h[i] ^ H[i,j ] = (x ¯k , 0) x[j ] v[i] ^ V[i,j ] = (x ¯k , 0) x[j ] (3.27)

The measurement update equations correct the state and covariance estimates with the measurement zk . Hk and Vk are the measurement Jacobians at step k , and Rk is the measurement noise covariance at step k . The EKF algorithm is shown in Fig. 3.4

Figure 3.4: The extended Kalman filter algorithm.

22

3.3.4

The Unscented Kalman filter

The Unscented Kalman filter is an extension of the Unscented transformation (UT) to the classical Kalman filter. In UT, instead of linearization required by EKF, a set of weighted sigma points are chosen deterministically in a way that the sample mean and the sample covariance of these points match those of the priori distribution. Each point is then propagated through a nonlinear function, and the predicted mean and covariance are calculated from the transformed samples [37]. For a nonlinear discrete time system, the state and measurement equations are [37], [38]: xk = f (xk-1 , uk-1 ) + wk-1 yk = h(xk , uk ) + vk (3.28)

where f and h are the nonlinear process and measurement models, respectively. xk represents the unmeasurable states vector, uk is known as the control input vector, and yk is the observed output. wk and vk are the process and measurement noise, respectively, which are both uncorrelated zero-mean Gaussian white sequences. Then, the Unscented Kalman filter algorithm is shown as: · Initialization algorithm: x ^ 0 = E [ x0 ] P0 = E [(x0 - x ^0 )(x0 - x ^0 )T ] (3.29) (3.30)

Given the state vector at step k - 1, we compute a collection of sigma points, stored in the columns of the N × (2N + 1) sigma point matrix k-1 where N is the number of states. In our case, N = 7 so k-1 is a 7 × 15 matrix. · Calculating sigma points: (k-1 )0 = x ^k-1 (k-1 )i = x ^ k -1 + ( (k-1 )i = x ^k-1 - ( (N + )Pk-1 )i i = 1, ..., N i = N + 1, ..., 2N (3.31) (3.32) (3.33)

(N + )Pk-1 )i 23

where  is a scalar:  = 2 (N + k ) - N (3.34)

where , 0    1, is a small scaling parameter which determines the spread of the sigma points and k is the a tuning parameter which is usually set to 0. · Time update: (k )i = f ((k-1 )i , uk ) with (k )i calculated, the a priori state estimate is
2N

i = 1, ..., 2N

(3.35)

^ x ¯k =
i=0

Wim (k )i

(3.36)

where Wim are weights defined as:
m W0 =

 +N i = 1, ..., 2N

(3.37)

Wim =

 2 + 2N

(3.38)

Then the a priori error covariance is calculated as
2N

¯k = P
i=0

^ ^ Wic [(k )i - x ¯k ][(k )i - x ¯k ]T + Qk

(3.39)

where Qk is the process noise covariance matrix and the weights are:
c W0 =

 + (1 - 2 -  ) +N i = 1, ..., 2N

(3.40)

Wic =

1 2 + 2N

(3.41)

Note that  is a non-negative weighting parameter used to affect the weight of the 0th sigma point for the covariance calculation. To compute the correction step, the columns of k have to be transformed through the

24

measurement function: (Zk )i = h((k-1 )i , uk )i
2N

i = 1, ..., 2N

(3.42)

^ z ¯k =
i=0

Wim (Zk )i

(3.43)

· Measurement update: Defining:
2N

¯y = P
i=0

^ ^ ¯k ][(Zk )i - z ¯k ]T + Rk Wic [(Zk )i - z

(3.44)

2N

¯xy = P
i=0

^ ^ Wic [(k )i - x ¯k ][(Zk )i - z ¯k ]T

(3.45)

Note that Rk is the measurement noise covariance matrix. Then, the Kalman gain is calculated: ¯xy P ¯ -1 Kk = P y and the measurement update is: ^ ^ x ¯k = x ¯k + Kk (zk - z ¯k ) Finally, a posteriori estimate of the error covariance matrix is computed as: ¯k - Kk Py Kk T Pk = P (3.48) (3.47) (3.46)

where Q, R, , and  are the parameters that should be determined in UKF method. It is hard to initialize the covariance matrices describing the disturbances on the system as the knowledge of the model and measurement inaccuracies is limited, but it is crucial to initialize them accurately as they affect the performance of UKF. In [26] a method is proposed which experimentally chooses the value of these matrices. In this research, an adaptive algorithm is employed to adjust the values of the process and measurement noise 25

covariances in the estimation process. 3.3.4.1 Adaptive unscented Kalman filter

The initial state x0 , initial covariance P0 , process noise covariance Q, measurement-noise covariance R, and unscented transform parameters  and  have to be determined in UKF. The influence of the initial state and covariance will become asymptotically negligible when there is a large amount of processing data. The values of  and  have little impact on improving the estimate accuracy of the UKF. But, the covariance matrices Q and R are very important to the performance and stability of the UKF. For very small R and/or Q at the beginning of the estimation process, a biased solution might result. For very large R and/or Q, filter divergence could occur. Therefore, in many adaptive filtering algorithms, the covariance matrices R and Q are the main parameters that need to be tuned online. An adaptive filter can estimate both R and Q [42]. In this thesis, the adaptive estimation of the process and measurement noise covariances is considered on the basis of the output voltage residual sequence of the battery model. So Q and R are estimated and updated recursively from the following equations [42]: Qk = Kk Ck (Kk )T N T c Rk = Ck + 2 i=0 Wi [(Zk )i - zk ][(Zk )i - zk ] where z is the measured output voltage and Ck is defined as
k

(3.49)

Ck 
i=k-L+1

ei (ei )T

(3.50)

e is the voltage residual of the battery model at time step k , Ck is an approximation to the covariance of the voltage residual at time step k , and L is window size for covariance matching. More details can be found in [42], [82].

26

3.3.5

Experimental results for parameter identification using AUKF

To evaluate the proposed method, experiments have been conducted on a battery powered wheeled-mobile robot (Fig. 3.5). The battery is a High-power Polymer Lithium-Ion consisting of 10 cells in series with the nominal capacity of 8 Ah, with a nominal voltage of 37V and maximum voltage of 42V. To conduct the experiments, the mobile robot is controlled by the Operator Controller Unit (OCU), moving the robot forward, backwards, on slope, and making turns in the lab environment using a joystick. The recorded signals include load current and terminal voltage. The load current is measured by a Fluke current probe. The terminal voltage and load current are recorded by a Tektronix Oscilloscope with the sampling rate of 1 Hz. The experiments have been conducted in the lab environment condition.

Figure 3.5: The wheeled-mobile robot.

The commands are sent from Operating control unit (OCU) and are encoded into a 16byte data set which are transmitted to the robot via the antennas and received and decoded by the Logosol Network Master Controller (LS-991). The sampled data are transferred to the host computer for real time calculation of model parameters via the serial port. The programming language for data manipulation and processing is C. Rabbit 2000 8-bit microcontroller is used as the sensor processor. The sampled terminal voltage and current are demonstrated in Fig. 3.6. The discharging current is positive and the charging current 27

is negative. Both discharging and charging processes exist in the test. But, the descending trend of the battery voltage indicates that the battery is mainly discharged during the test.

Measured Terminal Voltage 38 Voltage(V) 36 34 32 0 1000 2000 3000 4000 5000 Time (Sec)
(a)

Measured Current 20 Current(A) 10 0 -10 0 1000 2000 3000 4000 5000 Time (Sec)
(b)

Measured Current Current(A) 10 5 0 -5 1300 1350 Time (Sec)
(c)

1400

Figure 3.6: (a) Measured terminal voltage, (b) Measured current, (c) Measured current (magnified).

The initial values of the error covariance matrix, process error covariance matrix, and 28

measurement error covariance matrix are set through trial-and-error as follows: 1  0  0   P0 =  0  0   0 0  0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 1 0  0  0  0   0  0   0 1

(3.51)

  0.005 0 0 0 0 0 0    0 0.07 0 0 0 0 0     0  0 0 . 9 0 0 0 0     Q0 =  0 0 0 0.0001 0 0 0     0  0 0 0 0 . 005 0 0     0 0 0 0 0.6 0   0 0 0 0 0 0 0 0.009

R0 = 0.1 Accordingly, we chose  = 0.85 and  = 2 to incorporate the prior knowledge about the distribution of x and L = 100. First, we apply the UKF algorithm and the obtained results of the battery model parameters identification: Csurf ace , Cbulk , Rt , and Re with UKF are compared with constant values. It is verified that the parameter identification using UKF algorithm is stable. Then the adaptive algorithm is applied. The identification results of the battery model parameters: Cbulk , Csurf ace , Re , and Rt with AUKF are shown in Fig. 3.7(a) and Fig. 3.7(b).

29

20
Cbulk(F)

AUKF

UKF

Offline Calculation

15 10 0 1000 2000 3000 4000 5000

Time (Sec)

Csurface(F)

120 100 80 0 1000 2000 3000 4000 5000

Time (Sec)
(a)

0.1 Re() 0.08 0.06 0 0.06 Rt() 0.05 0.04 0 1000 2000 3000 Time (Sec)
(b)

1000
AUKF

2000 3000 Time (Sec)
UKF

4000

5000

Offline Calculation

4000

5000

Figure 3.7: a) Cbulk and Csurf ace estimation results using AUKF vs. UKF and offline calculations, b) Re and Rt estimation results using AUKF vs. UKF and offline calculations. The obtained results are compared with those of UKF method and offline calculations. How to calculate offline values is explained in details in [22]. It can be seen that the parameter identification using AUKF algorithm is stable and better performance is achieved in comparison with UKF. Also, a comparison between the estimated terminal voltage based

30

on the updated model and the offline model is illustrated in Fig. 3.8. Comparing the results with the measured values shows that more accurate results are obtained while the model is updated. From Table 3.1 it can be seen that, with the model update, the error mean is

38 Voltage(V) 36
Measured

Offline Updated

34 32 0

Measured Terminal Vol. Estimated Terminal Vol. (Updated Model) Estimated Terminal Vol. (Offline Model)

1000 2000 3000 4000 5000 Time (Sec)
(a)

Offline Updated

Voltage(V)

36
Measured

34 32

Measured Terminal Vol. Estimated Terminal Vol. (Updated Model) Estimated Terminal Vol. (Offline Model)

2000

2500 Time (Sec)
(b)

3000

Figure 3.8: a) Measured voltage vs. estimated voltage based on updated model and offline model, b) Measured voltage vs. estimated voltage based on updated model and offline model (magnified). around 0.002 V and the maximum error is 0.06 V, which demonstrates that the parameter identification algorithm leads to more accurate estimation than the offline model.

31

Index Offline Model Updated Model

Maximum 0.16 V 0.060 V

Mean 0.018 V 0.002 V

Table 3.1: Statistic List of Voltage Errors with Offline and Updated Model. The estimated terminal voltage by AUKF and UKF and measured terminal voltage are also shown in Fig. 3.9(a). We can see a good consistency between the estimated voltage and the measured one with the minor error (Fig. 3.9(b)), and AUKF provides better accuracy than UKF.

3.4
3.4.1

State of Charge Estimation Using AUKF
SoC definition

The SoC is defined as the available capacity to the nominal capacity of the battery as [40]: SoC = SoC0 - iL dt CN (3.52)

As SoC0 is the initial value of SoC,  is the columbic efficiency, and CN is the nominal Capacity.

3.4.2

SoC Estimation by AUKF

Assuming the applied input u is constant during each sampling interval, we transform equations (3.1) and (3.52) to a discrete system first:  t t - 2R  - 2R  e cbulk ) + R i e cbulk )  V = V ( e (1 - e cb,k cb,k - 1 e k - 1    t  - 2R   e cbulk ) + V (1 - e  cs,k - 1    - 2R c  t  V e surf ace ) cs,k = Vcs,k-1 (e t -   +Re ik-1 (1 - e 2Re csurf ace )    - 2R c t  e surf ace  + V (1 - e )  cb,k - 1     t SoCk = SoCk-1 + CN ik-1

32

Voltage(V)

38 36 34

UKF

AUKF

Measured

32 1000

Measured Terminal Voltage Estimated by AUKF Estimated by UKF

1500

2000 2500 Time (Sec)
(a)

3000

Estimation Error(V)

0.1
AUKF

0

-0.1
UKF

AUKF

UKF

2000 2200 2400 2600 Time (Sec)
(b)

Figure 3.9: a) Measured voltage vs. estimated voltage using AUKF and UKF (magnified), b) Voltage estimation error (magnified). where the state vector is:  Vcb   x =  Vcs  SoC 

(3.53)

Following the same procedure as explained in Section II and updating the model parameters, and also based on the fact that battery open-circuit voltage (OCV) varies almost linearly with SoC [83], the SoC is obtained from the estimated voltage across the bulk capacitor 33

indicating OCV. The overall estimation algorithm schematic based on AUKF is shown in Fig. 3.10.

Figure 3.10: The overall estimation algorithm schematic.

3.5

Experimental Results for SoC Estimation

In order to further evaluate the performance of AUKF-based SoC estimation algorithm, comparisons with AEKF, UKF, and EKF algorithms will be made. To provide a logical comparison with the above mentioned algorithms, the same procedure as explained in the previous section is conducted for all methods. A comparison has been made for terminal voltage estimation based on AUKF, AEKF, UKF, and EKF in Fig. 3.11(a). Also Fig. 3.11(b) shows that AUKF leads to smaller error than other Kalman filters extensions. The comparison is summarized in Table 3.2. Moreover, the voltage error covariance has been calculated. Fig. 3.12 shows better performance of AUKF in comparison with other KF methods. Index AUKF AEKF UKF EKF Maximum 0.060 V 0.09 V 0.11 V 0.16 V Mean 0.002V 0.008 V 0.012 V 0.020 V

Table 3.2: Statistic List of Voltage Errors with AUKF, AEKF, UKF, and EKF. The obtained result for SoC estimation with AUKF is shown in Fig. 3.14. The result 34

38 Voltage(V) 37 36 35

EKF AUKF UKF

Measured Voltage AUKF AEKF UKF EKF

Measured

34 33 2000

AEKF

2500 Time (Sec)
(a)

3000

Estimation Error(V)

0.01 0 -0.01 -0.02 2000

AUKF

AEKF

UKF AUKF

EKF AEKF UKF EKF

2500 Time (Sec)
(b)

3000

Figure 3.11: a) Measured voltage vs. estimated voltage using AUKF, AEKF, UKF, EKF (magnified), b) Voltage estimation error (magnified). is also compared with those of Coulomb counting, AEKF, UKF, and EKF. The estimation errors are shown in Fig. 3.14. It is clear that the AUKF-based algorithm can estimate the battery terminal voltage as well as the battery SoC more accurately, compared with the other three algorithms. Additionally, it can be seen that the AUKF and AEKF based estimation algorithms provide more accurate results than the EKF and UKF algorithms. Table 3.3 35

Voltage Error Covariance

2 1.5 1 0.5

x 10

-5
AUKF AEKF UKF EKF

0 0

1000

2000 3000 Time (Sec)

4000

5000

Figure 3.12: Voltage error covariance.

shows that the maximum absolute error of the AUKF algorithm is 0.10% and the absolute mean error is only 0.028%. Thus, the proposed approach of the SoC estimation algorithm is suitable for a Lithium-Ion power battery module, which can quickly reduce the model error and improve the SoC estimation accuracy. For better demonstration of the performance of the proposed algorithm the SoC error covariance for the different methods are plotted in Fig. 3.15. Index AUKF AEKF UKF EKF Maximum 0.10 % 0.22 % 0.47 % 0.71 % Mean 0.028 % 0.035 % 0.11 % 0.18 %

Table 3.3: Statistic List of SoC Errors with AUKF, AEKF, UKF, and EKF.

3.6

Summary

In this chapter, as accurate estimation of the battery state of charge is a critical issue in power management of autonomous mobile robots operating in unknown environments: · Based on an equivalent circuit model of the Lithium-Ion battery, an adaptive unscented Kalman filter is developed to identify battery model parameters, which are then used to update the battery model.

36

1
AEKF UKF

State of Charge

0.98 0.96 0.94 0.92
AUKF EKF

AUKF AEKF UKF EKF Coulomb Counting

Coulomb Counting

0.9 0

1000 2000 3000 4000 5000 Time (Sec)
(a)

0.98
State of Charge

AEKF UKF

0.96 0.94 0.92 0.9
AUKF EKF

AUKF AEKF UKF EKF Coulomb Counting

Coulomb Counting

2000

Time (Sec)
(b)

2500

3000

Figure 3.13: a) State of Charge estimation by AUKF , AEKF, UKF, EKF, b) State of Charge estimation by AUKF, AEKF, UKF, EKF (magnified). · By employing the AUKF, the battery state of charge is estimated using the updated battery model. Advantages: ­ An improved battery model can be achieved by updating the battery model parameters recursively during the mission.

37

SoC Estimation Error (%)

EKF

0
AUKF AEKF UKF

-0.5 -1

AUKF

AEKF

UKF

EKF

2000

2500 Time (Sec)

3000

Figure 3.14: SoC estimation error (magnified).

SoC Error Covariance

0.02 0.015 0.01 0.005 0 0 1000 2000 3000 Time (Sec)

AUKF AEKF UKF EKF

4000

5000

Figure 3.15: SoC error covariance.

­ AUKF not only has the advantages of UKF over EKF, but also adjusts the values of the process and measurement noise covariances recursively in the SoC estimation process. The concept of covariance matching on the basis of the output voltage residual sequence is added to the UKF algorithm for adaptive adjustment. ­ The AUKF algorithm has a low computational load and recursive SoC estimation is achieved recursively. · Experiments have been conducted to verify the effectiveness of the proposed method.

38

Chapter 4 Wheel and Robot Dynamic Model and State Estimation
4.1 Introduction

A robot is a complex system bringing together a large number of mechanical and electronic elements. It has two primary subsystems that require kinematic motion descriptions. The first subsystem is the robot body, while the second is the tire, which together with the robot system form our means of generating force through contact with the terrain. These subsystems have kinematic relationship with each other, so the over all robot motion is dependent on the kinematics of both subsystems. Models representing the system behaviour are required to describe the robot movements. For a simulator design, modeling efforts are focused on reproducing the behaviour of individual robot components as precisely as possible. Simulations of these models are time consuming and expensive. For real-time applications, simplifications are needed due to the limited calculation capacity. In this thesis, the basis for the robot state estimations is a simple model that precisely describe all dynamics of interest. Moreover, in many dynamic mechanical systems like wheeled mobile robots, it not realistic to assume that all states describing the system behaviour are measurable. Some states cannot be measured by sensors or any other physical means. Also in the design level, it is important to choose the minimal set of sensors for the control without compensating for the performance and robustness. Furthermore, most of the time the controller performance

39

relies on some important variables which cannot be measured directly due to some technical or economic reasons. So, estimators are needed. Estimation means the extraction of information of any physical variable which cannot be obtained from direct sensors by using only available data. The main objective of this chapter is to recursively estimate the state of the robot dynamic system using the noisy available measurements obtained from the system. The state space approach is adopted when modeling. An adaptive unscented Kalman filter algorithm based on the dynamic robot model is developed to estimate the wheel angular velocity and the robot longitudinal velocity. The adaptive unscented Kalman filter algorithm adaptively updates the process and measurement noise covariances which are two important factors in Kalman filtering performance and stability. The algorithm will be run in real time on a four-wheel mobile robot to verify its effectiveness in state estimation. It is also demonstrated that the adaptive concept of AUKF leads to better results than the unscented Kalman filter in estimating the robot velocity which is difficult to measure in actual practice.

4.2

Tire Dynamics

First it is necessary to define an axis system as a reference for the definition of various parameters to describe the characteristics of the tire and the forces and moments acting on it. One of the commonly used axis systems recommended by the Society of Automotive Engineers is shown in Fig. 4.1 [84].

Figure 4.1: Tire axis system [84].

40

We define the center of tire contact as the origin of the axis system. The X axis is the intersection of the wheel and the ground plane while the forward direction is considered positive. The Z axis is perpendicular to the ground plane where downwards is positive direction. The Y axis is in the ground plane, and its direction is chosen to make the axis system orthogonal based on right hand rule [85]. Three forces and three moments act on the tire from the ground. Tractive force Fx is the X component of the resultant force applied on the tire by the road. Lateral force Fy is the Y direction component, and the normal force Fz is the component in the Z direction. Mx is the moment about the X axis applied on the tire by the road. Rolling resistance moment My is the moment about the Y axis while Mz is the moment about the Z axis. Two important angles are associated with a rolling tire: the slip angle and the camber angel. Slip angle  is defined as the angle formed between the direction of the wheel travel and the line of intersection of the wheel plane with the road surface. Camber angle  is the angle formed between the XZ plane and the wheel plane.

4.2.1

Tractive force of tires

When a driving torque is applied to a pneumatic tire, a tractive force is generated at the tire-ground patch. At the same time, the tire tread in front of and within the contact patch is subjected to compression [85]. As tread elements are compressed before entering the contact region, the distance that the tire travels when subject to a driving torque will be less than that in free rolling. This phenomenon is usually referred to as longitudinal slip. The longitudinal slip ratio () of the wheeled robot, when a driving torque is applied, is usually defined by [85] =
rw -v rw rw -v v

rw  v ,0    1 rw < v ,-1   < 0

(4.1)

where v is the actual longitudinal velocity, w is the wheel rotational velocity, and rw is the equivalent rotational velocity. When a driving torque is exerted, the tire rotates without the equivalent translatory motion; therefore, rw > v and a positive value for slip results. As the tractive force applied by the tire is proportional to the torque applied by the wheel under steady-state conditions, slip is a function of tractive force. At first the wheel torque and tractive force increase linearly because, initially, slip is mostly due to elastic deformation of tire tread. This corresponds to the section 0A of the curve shown in Fig. 41

4.2 [85]. A further increase of wheel torque and tractive force results in part of tire tread sliding on the ground. In this situation, the relationship between the tractive force and the slip is nonlinear. This corresponds to section AB of the curve shown in Fig. 4.2. Based on available experimental data, the maximum tractive force of a pneumatic tire on rough surfaces is usually reached somewhere between 0.15 - 0.2 slip ratio. Any further increase in slip value beyond that may cause an unstable condition, with the tractive force falling quickly from the peak value µp N to the pure sliding value µs N , as shown in Fig. 4.2, where N is the normal force on the tire and µp and µs are the peak and sliding values of the coefficient of road adhesion, respectively [84].

Figure 4.2: Variation of tractive force with longitudinal slip of a tire [84].

A general theory which predict the relationship between the tractive force and the longitudinal slip of pneumatic tires on rigid surfaces precisely has yet to be evolved. In [84], the traction force of a pneumatic tire on rigid terrain is formulated as Ftr =
lt )) kt ilt (1 + ( 2 i (µp N kt ilt )2 µp N - i 2l2 kt i
t

  critical  > critical

(4.2)

µp N where critical = (lt k , and i, µp , kt , and lt are constants. This equation shows the t (lt +i) nonlinear behavior of the tractive force and longitudinal slip relationship when sliding occurs in part of the contact area. This corresponds to the region beyond point A of the curve shown in Fig. 4.2. When sliding extends over the entire contact patch, the tractive force Ftr is equal to

42

pN µp N . The value of the slip m where the maximum tractive force occurs is equal to µ and lt k t i corresponds to point B shown in Fig. 4.2. A further increase of tire slip causes an unstable situation, with the coefficient of road adhesion falling rapidly from the peak value µp to the pure sliding value µs . Average peak and sliding values of the coefficient of road adhesion µp and µs on various surfaces are given in Table 4.1 [85]. In practice implementation of a slip-based tire traction model such as (4.2) has many difficulties. It is needed to distinguish the cases of traction and driving forward and backward to order to calculate the slip correctly. Also the formulations are undefined when the slip is zero (w = 0 or v = 0). Furthermore, (4.2) requires separate formulations for the low and high slip scenarios (recognized by critical ). [80] introduces a differentiable traction model that captures the critical elements of the models proposed in the literature. The traction force is defined as a function of the wheel's relative velocity, rather than slip. Slip is a normalized version of relative velocity. The proposed formulation does not introduce the singularities found in slip-based ones and is relatively easier to apply within the Kalman filter framework. The simplified model is

Ftr = N (sign(r - vf )C1 (1 - e-C2 |r-vf | ) + C3 (r - vf )) where vf is the tire's forward velocity as vf = v ± 0.5v

(4.3)

(4.4)

where v is the robot yaw rate and C1 , C2 , and C3 are constants. How to find these constants are explained thoroughly in [80]. Surface Asphalt (dry) Asphalt (wet) Gravel Ice Peak value µp 0.8-0.9 0.5-0.7 0.6 0.1 Sliding value µs 0.75 0.45-0.6 0.55 0.07

Table 4.1: Average Values of Coefficient of Terrain Adhesion [85].

43

4.2.2

Rolling resistance of tires

The rolling resistance of tires on rigid terrains is mainly caused by the hysteresis in tire materials due to the deflection during rolling. Friction between the tire and the terrain caused by sliding, the resistance due to air circulating inside the tire, and the fan effect of the rotating tire on the surrounding air also contribute to the rolling resistance of the tire [85]. When a tire is rolling, the carcass is deflected in the area of ground contact. As a result of tire distortion, the normal pressure in the leading half of the contact patch is higher than that in the trailing half. The center of normal pressure is shifted in the direction of rolling. This shift produces a moment about the axis of rotation of the tire, which is the rolling resistance moment. In a free-rolling tire, the applied wheel torque is zero. Therefore, a horizontal force at the tireground contact patch must exist to maintain equilibrium. This resultant horizontal force is generally known as the rolling resistance. The ratio of the rolling resistance to the normal force on the tire is defined as the coefficient of rolling resistance [85]. The complex relationships between the design and operational parameters of the tire and its rolling resistance make it extremely difficult to develop an analytic method for predicting the rolling resistance [85]. The determination of the rolling resistance, therefore, relies almost entirely on experiments. In [80], [86] rolling resistance is modeled as a combination of static and velocity-dependant forces. The rolling resistance force can be modeled as [80]: Frst = -sign(vf )N (A1 (1 - e-A2 |vf | ) + A3 |vf |) A1 , A2 , and A3 are positive constants. (4.5)

4.3

Wheel Rotational Dynamics

Fig. 4.3 shows the free-body diagram of the wheel, where  is the traction torque, w is the wheel angular velocity.

44

Figure 4.3: Free-body diagram of the wheel.

The dynamics of the angular motion of the right and left wheels are as follow [78]: Jw   w,r = 1 - rFtrs,1 (4.6)

Jw   w,l = 2 - rFtrs,2

(4.7)

where r is the wheel radius, Jw is the moment of inertia of each wheel, i is the wheel torque applied to the i-th wheel which is  = Km I (4.8)

as Km is the motor torque constant and I is the motor current. For our mobile robot, N is the normal force and we assume that this force is equal for the front and rear wheels: Nf = Lf mg 2(Lf + Lr ) (4.9)

Nr =

Lr mg 2(Lf + Lr )

(4.10)

For each of the wheels, a separate equation of motion must be derived.

45

4.4

Robot Body Dynamics

This section develops the robot model that capture the important dynamics of the robot. The objective is to use simplified robot dynamic models as basic elements when designing real-time observers later. The coordinate system of the robot fixed body and the kinematic parameters are shown in Fig. 4.5. Fig. 4.4 shows the robot and tire forces. As shown in Fig. 4.4, tire forces consist of a normal component (N ), traction/braking component (Ftr ), and a rolling resistance component (Frst ). The traction/braking forces are negligible for the rear wheels because these wheels are undriven wheels.

Figure 4.4: Robot and tire forces.

Figure 4.5: Robot kinematic parameters.

46

The dynamics of the robot acceleration and the robot's yaw angular acceleration is:
2 4

mv =
i=1

Fi,tr +
i=1

Fi,rst

(4.11)

b J  v = (F1,tr - F2,tr + F1,rst - F2,trs ) 2

(4.12)

where m is the total robot mass, J is the robot's moment of inertia and b is the distance between front wheel centers. Traction force and rolling resistance force are denoted as Ftr and Frst , respectively.

4.5

State Estimation Using AUKF

In this section, adaptive unscented Kalman filter has been adopted and applied to the robot dynamic model to estimate the robot longitudinal velocity and filter the noise from the wheel angular velocity measured from the encoders. The concept was explained in details in chapter 3.

4.5.1

State space model formulation

It is important to introduce the state space as a basic concept to describe how a dynamic system behaves. The dynamics are then described in terms of state transitions, and it should be specified how one state is transformed into another as time passes. Consequently, the states are chosen as:   x1 = v     x = 2 1 (4.13)  x =  3 2     x = 4 v

47

where 1 and 2 are the right and left wheel angular velocity respectively. Considering (4.1), (4.2), (4.3), (4.4), (4.9), and (4.11) we have:   x  1 = f1 (x, u) =     x  2 = f2 (x, u) =  x  3 = f3 (x, u) =     x  4 = f4 (x, u) =
1 (F1,tr + F2,tr + F1,rst + F2,rst + m 1 ( - r(Ftr,2 + Frst,2 )) Jw 1 1 ( - r(Ftr,1 + Frst,1 )) Jw 2 b (F1,tr - F2,tr + F1,rst - F2,rst ) 2J

F3,rst + F4,rst ) (4.14)

x  = f (x, u) y = h(x, u) where x = x1 x2 x3 x4 f (x, u) = f1 f2 f3 f4 h(x, u) = x2 x3 u = I1 I2

(4.15)

(4.16) Then we have:  C1 sign(rx2 - x1 - 0.5x4 )(1 - exp C2 (rx2 - x1 - 0.5x4 ))    + C sign ( rx - x - 0 . 5 x )(1 - exp C ( rx - x - 0 . 5 x )) Nf  1 3 1 4 2 3 1 4   f1 =   m  +C3 (rx2 - x1 - 0.5x4 ) + C3 (rx3 - x1 - 0.5x4 )    A1 sign(x1 + 0.5x4 )(1 - exp A2 (x1 + 0.5x4 ))   -2  +A3 (x1 + 0.5x4 )   A1 sign(x1 + 0.5x4 )(1 - exp A2 (x1 + 0.5x4 )) -2Nr   +A3 (x1 + 0.5x4 )   m (4.17)  

48

  C1 sign(rx3 - x1 - 0.5x4 )(1 - exp C2 (rx3 - x1 - 0.5x4 ))     - A sign ( x + 0 . 5 x )(1 - exp A ( x + 0 . 5 x )) 1 1 1 4 2 1 4  f2 = (Km I1 - rNf    Jw + A ( x + 0 . 5 x ) + C ( rx - x - 0 . 5 x ) 3 1 4 3 3 1 4   (4.18)

  C1 sign(rx2 - x1 - 0.5x4 )(1 - exp C2 (rx2 - x1 - 0.5x4 ))     - A sign ( x + 0 . 5 x )(1 - exp A ( x + 0 . 5 x )) 1 1 1 4 2 1 4  (Km I2 - rNf  f3 =   Jw + A ( x + 0 . 5 x ) + C ( rx - x - 0 . 5 x ) 3 1 4 3 2 1 4   (4.19)

 C1 sign(rx2 - x1 - 0.5x4 )(1 - exp C2 (rx2 - x1 - 0.5x4 ))   -C1 sign(rx3 - x1 - 0.5x4 )(1 - exp C2 (rx3 - x1 - 0.5x4 )) bNf    f4 =  2J  - C ( rx - x - 0 . 5 x ) + C ( rx - x - 0 . 5 x ) 3 3 1 4 3 2 1 4   (4.20) AUKF algorithm is adopted to estimate the system states. The algorithm is explained thoroughly in chapter 3. As explained before, UKF consists of the prediction and update processes. In the two processes of UKF, constant covariance values of the process and measurement noise are used. The adopted AUKF algorithm, adaptively adjusts covariance values of the process and measurement noise. The covariance matching in the UKF framework is used for the adaptive adjustment of the noise covariances so that a residual-based AUKF algorithm can be developed.



49

4.6

Real Time Robot State Estimation: Experimental Results

4.6.1

Robot Description

To verify the effectiveness of the estimation algorithm proposed in this research, experiments are conducted on the four-wheel battery powered mobile robot in our laboratory. The wheeled mobile robot under investigation is a Ryerson Linkage Mechanism Actuator (RLMA), which is a customized product made by ESI (Fig. 4.6).

Figure 4.6: Wheeled mobile robot under investigation (RLMA).

As a data processing machine, the robot consists of data sources, a data processing device and data sinks. On the side of data sources the robot is equipped with optical encoders (QD145), voltage output temperature sensors (TC1047), two-axis precision compass with three orthogonal magnetoresistive sensors (HMR3200) and cameras (SVCG35HVT). Data processing will be done in microcontroller. A Rabbit 2000 8-bit microcontroller is used as the sensor processor. On the hand of data sinks, there are two brushless electric motors (BN34) which are responsible for the robot locomotion. For each motor the speed of the motor will be measured and the motor current will be supervised and can be used for implementing torque control. Currently, OCU can be used to send control commands to and collect information from RLMA. The communication between OCU and RLMA is achieved via an RF transmitter 50

and a data modem. The OCU commands are encoded into a 16-byte data set which are transmitted to the robot via the antennas and received and decoded by the Logosol Network Master Controller (LS-991). The design parameters for RLMA are listed in Table 4.2.

4.6.2

Experimental results

For the RLMA, two drives are dedicated to control the motors and a PC-104 board running QN X is used for high-level control. All the motors are equipped with encoders. The communication between the drives and PC-104 is achieved through a controller area network (CAN) bus. Dimensions of the test bench are 68 × 38 × 20cm. The algorithms were applied to experimental test runs. During these tests, the robot traveled approximately 10 m on the normal and slippery terrain. The robot was driven at speeds ranging from 10 to 50 cm/s. The tests were performed on nominally level terrain with the robot commanded to drive in a straight line moving forward and backward. The proposed adaptive unscented Kalman filter design is validated by experimental test moving the robot forward at the speed of 10 cm/s (Fig. 4.7). Parameter m(kg) Lf (cm) Lr (cm) r(cm) b(cm) Value 42 31.4 31.4 12 30

Table 4.2: Design parameters for RLMA.

51

Wheel Angular Velocity (rad/s)

1

0.5

0

Wheel vel (Measured) Wheel vel (AUKF) 10 20 Time (Sec) 30

-0.5 0

Figure 4.7: Wheel angular velocity estimation using AUKF.

Wheel Angular Velocity (rad/s)

1.5 1 0.5 0 -0.5 0

Wheel vel (Measured) Wheel vel (UKF)

10 20 Time (Sec)

30

Figure 4.8: Wheel angular velocity estimation using UKF.

To compare the results UKF algorithm is applied as shown in Fig. 4.8 to estimate the state variables. Also the estimation error for both filters are shown in Fig. 4.9. It can be seen that AUKF leads to smaller error than UKF. 52

Estimation Error (rad/s)

0.2 0.1 0 -0.1 -0.2 10 15 Time (Sec) AUKF UKF 20

Figure 4.9: Wheel angular velocity estimation error for AUKF and UKF algorithms.

Wheel Angular Velocity (rad/s)

2 Wheel vel (Measured) Wheel vel (AUKF)

0

-2 0

20 Time (Sec)

40

Figure 4.10: Wheel angular velocity estimation using AUKF (moving forward and backwards).

Similar experiments are conducted moving the robot forward and backwards in Figs. 4.10 and 4.11.

53

Wheel Angular Velocity (rad/s)

2 1 0 -1 -2 0 20 Time (Sec) 40 Wheel vel (Measured) Wheel vel (UKF)

Figure 4.11: Wheel angular velocity estimation using UKF (moving forward and backwards).

Comparing the results of the two methods, it can be seen that both methods properly estimate the wheel velocity, but due to its adaptive nature, AUKF can give a more accurate and smoother estimation. For this experiment a LIDAR-Lite Laser Rangefinder has been used to measure the robot velocity (Fig. 4.12). Figs. 4.13 and 4.14 demonstrate the two observers performance in estimating the robot longitudinal velocity.

Figure 4.12: LIDAR-Lite laser rangefinder.

54

Robot Velocity (cm/s)

15 10 5 0 -5 0
Robot vel (Measured) Robot vel (UKF)

10

20 30 Time (Sec)

Figure 4.13: Robot longitudinal velocity estimation using UKF.

Robot Velocity (cm/s)

15 10 5 0 -5 0 10
Robot vel (Measured) Robot vel (AUKF)

20 Time (Sec)

30

Figure 4.14: Robot longitudinal velocity estimation using AUKF. Similar experiments are conducted moving the robot forward and backwards in Figs. 4.15 and 4.16. Comparing the results of the two methods, it can be seen that both methods properly estimate the robot longitudinal velocity, but due to its adaptive nature, AUKF can give a more accurate and smoother estimation. 55

20 Robot Velocity (cm/s) 10 0 -10 -20 -30 0
Robot vel (Measured) Robot vel (AUKF)

10

20 Time (Sec)

30

Figure 4.15: Robot longitudinal velocity estimation using AUKF (moving forward and backwards).

Robot Velocity (cm/s)

20 0 -20
Robot vel (Measured) Robot vel (UKF)

-40 0

10

20 Time (Sec)

30

Figure 4.16: Robot longitudinal velocity estimation using UKF (moving forward and backwards).

56

4.7

Summary

In this chapter, based on the dynamic robot model, the AUKF is utilized to estimate the robot longitudinal velocity and obtain good filtering performance of the wheel angular speed. Experimental results show that the AUKF can provide more accurate estimation than the UKF in estimating the robot velocity which is difficult to measure in actual practice. The adaptive unscented Kalman filter algorithm adaptively updates the process and measurement noise covariances which are critical for the filtering performance and stability in the framework of Kalman filter. With the Real robot state variables estimated by the AUKF, a sliding mode controller will be designed in the next chapter to make the wheeled mobile robot effectively track the desired slip ratio in real time to reduce the power consumption without adding additional expensive hardware to the system.

57

Chapter 5 Sliding Mode-Based Slip Ratio Control
5.1 Introduction

Terrain-dependent control is required for autonomous mobile robots to safely and efficiently traverse unknown environments. The word "Terrain-dependent" means the ability of mobile robots to cope with characteristic changes on rough terrain. Thus, terrain-dependent controller makes an effort to maintain optimal driving conditions depending on such characteristic changes of terrains. For maneuverability as well as reducing power consumption, terrain-dependent control strategies are to keep optimal slip condition of robot wheels on the terrain. The slip ratio  is one of the most important state variables during wheel-terrain interactions, and it is defined as a function of the robot longitudinal velocity and the angular velocity of the wheel as in equation (4.1). On the other hand, for the mobile robots, the effective power that a motor should supply is the product of the driving torque and angular velocity. So, there is a relationship between the slip ratio and power consumption for a wheel. Therefore, the effective power increases in order to maintain the travelling velocity constant. P =  = v r(1 - ) (5.1)

The purpose of this chapter is to control the slip ratio of a four-wheeled mobile robot on different surfaces in order to reduce power consumption while the robot velocity is estimated online based on realtime measurements. Due to the high nonlinearity of the system and 58

to the presence of time-varying parameters and uncertainties, a robust control approach is needed, which generates continuous control actions while being robust to uncertainties. The sliding mode controller is employed for this control purpose. It will be shown in this chapter, that once the system reaches a sliding mode, the dynamical order of the system is reduced and the system behaviour is independent of a certain class of system parameter variations and disturbances. For these reasons, the controllers designed using sliding mode techniques, provide robust performance. To verify the effectiveness of the proposed controller and identification algorithm, experiments are conducted on different surfaces. The robot velocity is estimated through the identification algorithm discussed in previous chapter and the control command will be sent to the motor drives to control the slip ratio of the robot from the host computer.

5.2

Introduction to Sliding Mode Control

Sliding mode control is a robust control approach which provides a systematic solution to the problem of maintaining stability in the presentence of modeling imprecision. The following section is a brief introduction to the sliding mode concept [87].

5.2.1

Sliding surfaces

Variable Structure Control Systems (VSCS) are in the category of nonlinear control systems and are the systems which switch their control structure according to the state of the under control system. The state-feedback control law is not a continuous function of time. It drives the nonlinear plant's state trajectory onto a predefined surface in the state space and maintains the plant's state trajectory on this surface for subsequent time . This surface is called a switching surface. When the plant state trajectory is above the surface, a feedback path has one gain and there is a different gain if the trajectory drops below the surface. The switched control maintains the plant's state trajectory on the surface for all subsequent time and the plant's state trajectory slides along this surface. Lyapunov method is usually used to determine the stability properties of an equilibrium point without solving the state equation. Let V (x) be a continuously differentiable scalar function defined in a domain D that contains the origin. A function V (x) is said to be positive definite if V (0) = 0 and V (x) > 0 for x = 0. It is said to be negative definite if V (0) = 0 and V (x) < 0 for x = 0.

59

A generalized Lyapunov function is defined in terms of the surface to characterize the motion of the state trajectory to the sliding surface. For each chosen switched control structure, the gains are chosen so that the derivative of this Lyapunov function is negative definite, so the motion of the state trajectory to the surface will be guaranteed. Designing the surface, a switched controller is constructed so that the tangent vectors of the state trajectory point towards the surface in such a way that the state is driven to and maintained on the sliding surface. A single input nonlinear system be defined as x(n) = f (x, t) + b(x, t)u(t) (5.2)

Here, x(t) is the state vector, u(t) is the control input, and x is the output state of the interest. n on x(t) shows the order of differentiation. f (x, t) and b(x, t) are generally nonlinear functions of time and states. The function f (x, t) is not exactly known, but the extent of the imprecision on f (x, t) is upper bounded by a known, continuous function of x; similarly, the control gain b(x, t) is not exactly known, but is of known sign and is bounded by known, continuous functions of x. The control problem is to make x to track a specific time-varying state xd in the presence of model imprecision on f (x, t) and b(x, t). A time varying surface s(x, t) is defined by equating the variable s(x, t) to zero:

n-1 d ~(t) s(x, t) = ( +  ) x dt

(5.3)

Here,  is a strict positive constant which is the bandwidth of the system, and x ~ = x(t) - xd (t) is the error in the output state where xd (t) is the desired state. The problem of tracking the n-dimensional vector xd (t) can be replaced by a first-order stabilization problem in s. s(x, t) as defined in (5.3) is the sliding surface, and the system's behavior once on the surface is called sliding mode. The simplified, 1st order problem of keeping the scalar s at zero can now be achieved by choosing the control law u of (5.2) such that 1d 2 s  - |s| 2 dt (5.4)

 is a strictly positive constant. Condition (5.4) states that the squared distance to the surface, as measured by s2 , decreases along all system trajectories. So, it constrains trajectories to point towards the surface s(x, t) = 0. So, satisfying the sliding condition makes the 60

surface an invariant set which for any trajectory starting from an initial condition within the set remains in the set for all future and past time. (5.4) also implies that some disturbances or dynamic uncertainties can be tolerated while still keeping the surface an invariant set. Finally, satisfying (5.3) guarantees that if s(x(0), 0) = 0, the surface s(t) will be reached ,0)| . Assume that s(x(0), 0) > 0, and let treach be the time in a finite time smaller than |s(x(0)  required to hit the surface s = 0. Integrating (5.4) between t = 0 and treach leads to treach  s(x(0), 0)  (5.5)

Starting from any initial condition, the state trajectory reaches the time-varying surface ,0)| , and then slides along the surface towards xd (t). in a finite time smaller than |s(x(0) 

5.2.2

Controller design

The controller design procedure consists of two steps. In the first step, a feedback control law u is selected to verify sliding condition (5.4). In order to account for the presence of modeling uncertainties and disturbances, the control law has to be discontinuous across s(t). Since the implementation of the associated control switching is imperfect, this leads to chattering which is undesirable in practice as it involves high control activity and may excite high frequency dynamics neglected in the modeling. In the second step, the discontinuous control law u is properly smoothed to achieve an optimal trade-off between control bandwidth and tracking accuracy. The first step achieves robustness for parametric uncertainty, the second step achieves robustness to high-frequency unmodeled dynamics. Here, starting from the first step, Consider a simple first order system: x  (t) = f (x, t) + u(t) (5.6)

^(x, t), u(t) is the control where f (x, t) is nonlinear and/or time varying and is estimated as f input, and x(t) is the state to be controlled so that it follows the desired trajectory xd (t). The estimation error on f (x, t) is assumed to be bounded by some known function F = F (x, t), so that ^(x, t) - f (x, t)|  F (x, t) |f (5.7)

61

we define a sliding variable according to (5.2) s(t) = x ~(t) Differentiation of the sliding variable yields s  (t) = x  (t) - x  d (t) Substituting equation (5.6) in equation (5.9): s  (t) = f (x, t) + u(t) - x  d (t) The approximation of control law u ^(t) to achieve s  = 0 is ^(x, t) + u(t) + x u ^(t) = -f  d (t) u ^(t) can interpreted as the best estimate of the equivalent control. The uncertainty in f is accounted for while satisfying the sliding condition 1d (s(t)2 )  - |s(t)| 2 dt the control law is: u(t) = u ^(t) - k (x, t)sgn(s(t)) Choosing k (x, t) large enough, k (x, t) = F (x, t) +  ensures the satisfaction of condition (5.12) as: 1d ^(x, t))s(t) - k (x, t)|s(t)|  - |s(t)| (s(t)2 ) = s  (t)s(t) = (f (x, t) - f 2 dt (5.15) (5.14) (5.13) (5.12) (5.11) (5.10) (5.9) (5.8)

Hence, by using (5.13), It is assured that the system trajectory will take finite time to reach the surface s(t), after which the errors will exponentially go to zero.

62

Now, we consider the second order system in the form of x  (t) = f (x, t) + b(x, t)u(t) (5.16)

where b(x, t) is bounded as 0 < bmin(x, t)  b(x, t)  bmax(x, t). The control gain b(x, t) and its bound can be time varying or state dependent. Since the control input is multiplied by the control gain in the dynamics, the geometric mean of the lower and upper bound of the gain is a reasonable estimate: ^ b(x, t) = Bounds can then be written in the form  -1  ^ b  b (5.18) bmin (x, t)bmax (x, t) (5.17)

bmax where  = since the control law will be designed to be robust to the bounded bmin uncertainty,  is called the gain margin of the design. The control law is: -1 ^t) - k (x, t)sgn(s(x, t))] u(t) = ^ b(x, t) - [u(

(5.19)

with ^t) k (x, t)   (x, t)(F (x, t) +  ) + ( (x, t) - 1)u( satisfies the sliding condition. (5.20)

5.2.3

Chattering reduction

Sliding mode is ideal only when the state trajectory x(t) of the controlled plant agrees with the desired trajectory at every t  t1 for some t1 . This requires very fast switching. In practice, a switching controller has uncertainties which limit switching to a finite frequency. The representative point then oscillates within a neighborhood of the switching surface. Control laws which satisfy sliding condition (5.4) and lead to perfect tracking in the presence of model uncertainty are discontinuous across the surface s(t) and cause control chattering. Chattering must be reduced for the controller to perform properly. This can be 63

achieved by smoothing the control discontinuity in a thin boundary layer neighboring the switching surface B (t) = {x : |s(x, t)|  } (5.21)

where  is the boundary layer thickness, and  is the boundary layer width. Outside of B (t), the control law is chosen as before which guarantees that the boundary layer is attractive and invariant; all trajectories starting inside B (0) remain inside B (t) for all t  0; and then s inside B (t). u is interpolated inside B (t). For example, sgn(s) in (5.13) can be replaced by 

5.3

Sliding Mode Design for the Wheel Slip Ratio Control

In this thesis, for wheel slip control, a nonlinear control strategy based on sliding mode is chosen. Sliding mode controllers are known to be robust to parametric uncertainties [88]. The sliding mode control (SMC) design presented in this thesis involves design of the sliding surface, design of the sliding mode controller which keeps the system trajectory on the sliding surface, and avoiding chattering in implementation. In this section, the sliding mode controller is described to allow the wheel slip, , to track a reference input wheel slip, d . For the case of acceleration for the right front wheel we have = Differentiating (5.22) with respect to time:  2 + rx rx 2 = rx 2 - x 1 After simplification, the slip dynamic equation for acceleration is:  = f (, x) + bu  (5.24) (5.23) rx2 - x1 rx2 (5.22)

64

where f (, x) = [ -
-r2 (1-)(Ftr,2 +Frst,2 ) Jw

rx2 rx2 1 1 , b= x2 rJw ]

(5.25)

(F1,tr +F2,tr +F1,rst +F2,rst +F3,rst +F4,rst ) m

u= The sliding variable s is defined as

(5.26)

s(, t) = (

d +  )(n-1) e dt

(5.27)

 is a positive constant, and n is the order of the system. e =  - d (5.28)

d is the desired slip value. Since the system under control is of the first order, so the switching surface S is defined as equating the sliding variable to zero [89], [90]: s =  - d ^ is defined as the estimation of the nonlinear function f : f ^|  F |f - f (5.30) (5.29)

and F is some known function [90]. We also assume that the control gain b is estimated by ^ b [75]: 0 < bmin  b  bmax , Then  is defined as  -1  ^ b  , b = bmax bmin (5.32) 0<^ bmin  ^ b^ bmax (5.31)

65

Based on (5.24), 1 = x2 u, so the sliding mode controller is designed as: u=^ b-1 [^ u - ksgn(s)] On setting s  = 0 the equivalent control is given as: ^(, x) +   d] u ^=^ b-1 [f Adding a continuous control term, we have the final sliding control law u written as: ^(, x) +   d - ksgn(s)] u=^ b- 1 [ f Choose a Lyapunov function candidate as: 1 V (t) = s2 2 Taking the time deravative of 5.36 gives  (t) = ss V  Substituting for s  leads to:  d]  (t) = s[f (, x) + bu -  V Rewriting 5.38 using the expression for u, we obtain: ^(, x) +   d - ksgn(s)) + f (, x) + bu -   d + b^  (t) = s[(-f V b- 1 ] Now, rearranging different terms leads to ^(, x) + b^ d -   d ] - b^  (t) = s[f (, x) - b^ V b- 1 f b-1  b-1 k |s| which can be rewritten as ^(, x) - f ^(, x) - b^ ^(, x) - (1 - b^  d ] - b^  (t) = s[f (, x) + f V b- 1 f b-1 ) b-1 k |s| (5.41) (5.40) (5.39) (5.38) (5.37) (5.36) (5.35) (5.34) (5.33)

66

On simplifying 5.41, we have ^(, x) + (1 - b^ ^(, x) - (1 - b^  d ] - b^  (t) = s[f (, x) - f V b-1 )f b-1 ) b-1 k |s| (5.42)

^(, x) and the estimation Assumption: The nonlinear function f (, x) is estimated as f error is assumed to be bounded by some positive known function F (, x) so that |f (, x) - ^(, x)|  F (, x). Using this assumption we have: f ^(, x) - (1 - b^  d ] - b^  (t)  s[F (, x) + (1 - b^ V b- 1 ) f b-1 ) b-1 k |s| (5.43)

It should be noted that the sliding gain k should be chosen to satisfy the sliding condition: 1d  - |s| 2 dt If we choose k as k   (F +  ) + ( - 1)|u ^| (5.45) (5.44)

the time taken for reaching the switching surface is finite and when the switching surface is reached, the stability of the system is guaranteed. Note that  is a positive constant. In this thesis, the function F is calculated based on the algorithm developed in [90]. One of the main drawbacks of the switching control laws are the chattering effect. A practical approach proposed in [90] to avoid chattering is to replace the discontinuous term sgn(s) in (5.31) by a sat(s) function around the switching surface s u=^ b-1 [^ u - ksat( )]  where  > 0 is the boundary width. s sat( ) =  1 s sgn(  )
s f or|  |1 otherwise

(5.46)

(5.47)

The overall system structure is given in Fig. 5.1.

67

d
Sliding Mode Controller

T

Robot Model

y = 



Slip Ratio Estimation

AUKF

x1, x2

Terrain Terrain Parameters Parameters

Figure 5.1: The structure of the controller/observer system.

5.4
5.4.1

Online Slip Ratio Control: Experimental Results
Experimental setup

To verify the effectiveness of the proposed controller and identification algorithm, experiments are conducted on different surfaces. The robot velocity is estimated through the identification algorithm explained in the previous chapter and based on the designed controller the control command is sent to the motor drives to control the slip ratio of the robot from the host computer as shown in Fig. 5.1. This RLMA four-wheel mobile robot is used as the test bench to verify the effectiveness of the proposed identification and control algorithm. Three measurable quantities (W, , w ) are needed for control design and analysis, where W is the robot vertical weight,  is the wheel torque and w is the wheel angular velocity. The robot moves on normal and slippery surfaces. In experiments, particular components of the robot are used to measure three variables for acquiring experimental data. The wheel torque  can be calculated by a current sensor using following equation,  = Km I (5.48)

where Km is torque constant and I is motor current. The angular velocity w can be measured by the driving motor encoder. There are two brushless electric motors (BN 34) which are responsible for the robot locomotion. For each motor the speed of the motor will be measured and the motor current will be supervised and can be used for implementing torque control. Currently, an operator control unit (OCU) can be used to send control commands to and collect information from

68

RLMA (Fig. 5.2). The communication between OCU and RLMA is achieved via an RF transmitter and a data modem. The operator inputs commands with the remote controller and the commands are encoded into a 16 - byte data set which are transmitted to the robot via the antennas and received and decoded by the Logosol Network Master Controller (LS - 991).

Figure 5.2: Operating control unit.

For RLMA, three drives are dedicated to control the motors. The following requirements must be met by the driver board: · control of motor speed · measurement of the motor current · connection to the CAN-bus A PC-104 board running QN X (Fig. 5.3) is used for high-level control of the wheeled mobile robot. The original PC-104 form factor is somewhat smaller than a desktop PC motherboard. A typical PC-104 system will include a CPU board, power supply board, and one or more peripheral boards, such as a data acquisition module, GPS receiver, or Wireless LAN controller. The majority of PC-104 CPU boards are x86 compatible and include standard PC interfaces such as Serial Ports, USB, Ethernet, and VGA. A x86 PC-104 system is usually capable of standard PC operating system such as DOS, Windows, or Linux. However, is also quite common to use a real-time operating systems. Because of its small size and low energy consumption, PC-104 system is suitable to be used in a mobile robot. 69

Figure 5.3: P C - 104.

The communication between the drives and PC-104 is achieved through a controller area network (CAN) bus. CAN bus is chosen due to its ability to transmit messages in real-time, in other words the message with the highest priority will be delivered within a guaranteed latency time. Other important properties of CAN are: · bandwidth up to 1M Bit/s · differential data transmission: this is important to reduce effects of EMI (Electromagnetic interference) caused by the electric motors · large number of nodes · error recognition: CAN protocol implements several means to recognize errors like bit stuffing and CRC. · physical length of connection: at 1M Bit/s cabling can be up to 40m long. · availability: CAN bus is approved in the automotive industry, so highly reliable components are available. To ease development of prototypes a possibility to program the driver boards inside the robot via CAN-bus has to be implemented. In this thesis, the control commands are sent from the host computer to the PC-104 installed in RLMA as shown in Fig. 5.4. Initially, the PC-104 installed is under QN X running time environment (Fig. 5.5). 70

Figure 5.4: The experimental setup.

Figure 5.5: QN X operating system schematic.

5.4.2

Online slip ratio control

For showing the estimation algorithm and optimal control design for the four-wheel robot, driving experiments will be conducted on normal and slippery surfaces under the experimental conditions of wheel linear velocity of 10cm/s and 20cm/s. Obtaining the measured data the vehicle velocity will be estimated in real-time and will be used to calculate the vehicle slip ratio. The experiments are taken under these assumptions: · Both sides of terrain under left drive wheel and right one are in the same condition. · The angular velocity and drive torque of left drive wheel is the same with that of right 71

wheel. · The vehicle is running on the flat and straight road and the influence of gradient and curve can be omitted. · The change of loading weight has little influence on the gravity center of the vehicle. Based on the calculated slip ratio and the desired slip ratio for the specific terrain type, the sliding mode controller is designed to keep the vehicle slip at the desired value. To verify the performance of the controller experiments are conducted in two scenarios while the robot moves · Case I: only on one surface · Case II: with the surface transition (normal to slippery) The control codes are written in C language in QN X environment and downloaded and executed to PC-104 in the robot. Fig. 5.6 (a) shows the results of the AUKF-based sliding mode controller when the desired slip ratio is d = -0.18 and the robot is moving on a designated slippery surface in the lab environment for 6 seconds. The slip ratio has been estimated by the AUKF algorithm. Also for better demonstration of the observer performance Fig. 5.6(b) shows the controller result while the slip ratio is calculated based on the measured data. It can be seen that after a very short period of transient response, the wheel slip has approached the reference slip ratio and is tracked by the designed controller. It is also shown that better result is achieved when the slip ratio is estimated by the observer. Fig. 5.7 shows the generated torque by the controller to track the desired slip ratio.

72

0.1 Estimaed slip ratio 0 -0.1 -0.2 0 2 4 Time (Sec)
(a)

SLM Desired

6

0.1 Measured slip ratio 0 -0.1 -0.2

SLM Desired

0

2 4 Time (Sec)
(b)

Figure 5.6: a) Performance of SMC on a slippery surface based on AUKF, b) Performance of SMC on a slippery surface based on the measured data.

73

10 Torque (Nm) 0 -10 -20 -30 0 4 Time (Sec) 6

Figure 5.7: The applied torque when the robot is moving on a slippery surface.

0.2 Estimated slip ratio 0.1 0 -0.1 -0.2 -0.3 0 5 Time (Sec)
(a)

SLM Desired

10

0.4 Measured slip ratio 0.2 0 -0.2 -0.4 0 5 Time (Sec)
(b)

SLM Desired

10

Figure 5.8: a) Performance of SMC on surface transition based on AUKF, b) Performance of SMC on surface transition based on the measured data. 74

Experiments are conducted to further investigate the algorithm performance in a situation of the terrain transition. In this scenario, the terrain condition changes from normal to slippery. On the normal surface d is kept at 0.12, followed by the surface condition change to slippery at time t = 6s, the value of d is changed to -0.18. The robot travels around 1.5m on the designated slippery surface in the lab environment and goes back to the normal surface afterwards. This terrain change has been adapted well by the designed sliding mode controller as shown in Figs. 5.8(a) and 5.8(b) while better results achieved when slip ratio is estimated by AUKF. Also, the applied torque by the controller at different conditions are is shown in Fig. 5.9.

10 Torque (Nm) 0 -10 -20 -30 0 2 4 6 Time (Sec) 8 10

Figure 5.9: The applied torque when the robot is moving from normal surface to the slippery one.

5.5

Summary

In this chapter, an AUKF-based sliding mode controller has been proposed for achieving effective slip ratio control. The main contributions of this chapter are given as follows: · design of a sliding-mode slip ratio controller for the wheeled mobile robot to control the reference slip · integration of the sliding mode controller and AUKF observer to establish a robust control strategy · the effectiveness of the proposed algorithm has been verified through experiments.

75

Chapter 6 Conclusions and Future Work
6.1 Conclusions

Autonomous mobile robots are increasingly being used for outdoor missions that demand an extended degree of autonomy. The operating range of a mobile robot in complex environments is highly influenced by the availability of the internal power supply, especially in unknown areas like space where manual recharging or refreshing of the power source is not possible. Moreover, the finite capacity of portable commercial power sources is a large hindrance in mobile robotic systems and their applications. So, accurate estimation of available energy and the robot power demand is paramount to successful completion of any mission with an extended duration. Subsequently, as a key aspect of robot autonomy is power consumption, it is crucial that the rate of power consumption to be known for the coming mission. Therefore, power management unit has to deal with two tasks simultaneously: First, it has to monitor the power supply (normally batteries) constantly. This leads to estimation of robot current available power. Besides, batteries are sensitive to deep discharge or overcharge because these states cause irreversible damage to the battery. Therefore, the battery state of charge (SoC) is an essential factor in power management of the mobile robot. Accurate estimation of the battery SoC can improve energy management and efficient utilization of batteries by optimizing the performance, extending the lifetime and preventing permanent damage to the batteries. In chapter 3 of this thesis, based on an equivalent circuit model of the Lithium-Ion battery, an adaptive unscented Kalman filter (AUKF) has been developed to identify battery model parameters, which are then used to update the battery model. By employing the AUKF, the battery state of charge was estimated using the updated battery model. To verify the 76

performance of the proposed method, experiments have been conducted on a wheeled-mobile robot. More accurate results have been obtained while the model parameters were updated recursively during the experiments. The obtained results have demonstrated that the AUKF algorithm has provided improved performance in comparison with the other mentioned KF extensions. On the other hand based on the experimental results, wheel slip and the velocity loss has a major impact on the robot power consumption. The slip ratio is a function of the robot longitudinal velocity which is difficult to measure in practice. In chapter 5, the dynamic models of the robot and wheel have been presented and in order to achieve accurate slip ratio estimation, an adaptive unscented Kalman filter algorithm based on the dynamic vehicle model is developed to estimate the wheel angular velocity and the vehicle longitudinal velocity. The adaptive unscented Kalman filter algorithm adaptively updates the process and measurement noise covariances which are critical for the filtering performance and stability in the framework of Kalman filter. The proposed algorithm has been run in real time onboard a four-wheel mobile robot to verify its effectiveness in state estimation. The obtained results have been compared with those of UKF algorithm. Comparing the results of the two methods, it was shown that both methods properly estimate the wheel velocity, but due to its adaptive nature, AUKF can give a more accurate and smoother estimation. Furthermore, the control objective of the control system is to make the actual slip ratio track the desired slip ratio for various terrain conditions in order to reduce the power consumption. Due to the high nonlinearity of the system and to the presence of time-varying parameters and uncertainties, a robust control approach is needed, which generates continuous control actions while being robust to uncertainties. In chapter 6, sliding mode approach has been selected to achieve the goal of robust slip ratio tracking in the presence of parameter uncertainties, minimizing the power consumption of mobile robots. The effectiveness of the proposed controller has been verified by carrying out experimental runs while the slip ration was updated online. The controller is able to provide perfect reference slip tracking of the vehicle, despite uncertainties present in the vehicle-wheel dynamics and changing terrain conditions.

6.2

Future Work

As an extension of this thesis, we propose the following possible directions for future research. · Since the temperature variation affects the performance of the battery, it is important 77

to compensate for temperature effects in order to improve the model's predictive capability and SoC estimation. So, the future work could be focused on the effects of the temperature deviation on the performance of the battery and the robustness of the estimation algorithm under different environmental conditions. · Since the zero-state battery model cannot depict the battery relaxation and hysteresis effect, future work could be focused on building a more accurate battery model which can describe the relaxation effect with low computational complexity · For slip ratio control, since the dynamics of the robot has uncertainties due to different road surface conditions, designing an adaptive fuzzy sliding mode control could be a future scope of work. · For better verification of the proposed algorithm for tracking the desired slip ratio, more complex scenarios under various terrain types will be added to the experimental setups.

6.3

Thesis Publications

· Maral Partovibakhsh and Guangjun Liu, "Slip Ratio Estimation and Control of Wheeled Mobile Robot on Different Terrains," IEEE International Conference on Cyber Technology in Automation, Control, and Intelligent Systems, June 2015, Shenyang, China. · Maral Partovibakhsh and Guangjun Liu, "Adaptive Unscented Kalman Filter-Based Online Slip Ratio Control of Wheeled-Mobile Robot," Proceedings of the 11th World Congress on Intelligent Control and Automation, Shenyang, China, pp. 6161-66, June 29-July 4, 2014. · Maral Partovibakhsh and Guangjun Liu, "An Adaptive Unscented Kalman Filtering Approach for Online Estimation of Model Parameters and State-of Charge of LithiumIon Batteries for Autonomous Mobile Robots," IEEE Trans. on Control Systems Technology, vol. 23, no. 1, pp. 357-363, Jan. 2015. · Maral Partovibakhsh and Guangjun Liu, "Online Estimation of Model Parameters and State-of-Charge of Lithium-Ion Battery Using Unscented Kalman Filter," American Control Conference, Montreal, Canada, pp. 3962-3967, 27-29 June, 2012.  Selected as the best paper presentation in ACC 2012. 78

Bibliography
[1] S. Piller, M. Perrin, A. Jossen, "Methods for state-of-charge determination and their applications,`" J. Power Sources, vol. 96, no. 1, pp. 113-120, 2001. [2] G. L. Plett, "Extended Kalman filtering for battery management systems of LiPB-based HEV battery packs: Part 3. State and parameter estimation," J. Power Sources, vol. 134, no. 2, pp. 277-292, 2004. [3] B. S. Bhangu, P. Bentley, D. A. Stone, and C. M. Bingham, "Nonlinear observers for predicting state of charge and state of health of lead-acid batteries for hybrid electric vehicles," IEEE Trans. on Vehicular Technology, vol. 54, no. 3, pp. 783-794, 2005. [4] J. Han, D. Kim, and M. Sunwoo, "State-of-charge estimation of lead-acid batteries using an adaptive extended Kalman filter," J. Power Sources, vol. 188, no. 2, pp. 606-612, 2009. [5] R. Z. Toll and M. R. Moore, "Real time capacity prediction and uncertainty for VRLA products: a customer's [End user] perspective," Proc. IEEE 24th Telecommunications Energy Conference, Aurora, IL, USA, pp. 115-120, 2002. [6] P. Shi and Y. Zhao, "Application of unscented Kalman filter in the SOC estimation of Li-ion battery for Autonomous Mobile Robot," Proc. IEEE Int. Conf. on Information Acquisition, Weihai, China, pp. 1279-1283, 2006. [7] K.S. Ng, C. S. Moo, Y. P. Chen, and Y. C. Hsieh, "Enhanced coulomb counting method for estimating state-of-charge and state-of-health of lithium-ion batteries," J. Applied Energy, vol. 86, no. 9, pp. 1506-1511, 2009. [8] F. Huet, "A review of impedance measurements for determination of the state-of-charge or state of health of secondary batteries," J. Power Sources, vol. 70, no. 1, pp. 59-69, 1998.

79

[9] D.V. Do, C. Forgez, K. Benkara, and G. Friedrich, "Impedance observer for a Li-ion battery using Kalman filter," IEEE Trans. on Vehicular Technology, vol. 58, no. 8, pp. 3930-3937, 2009. [10] A. Salkind, C. Fennie, P. Singh, T. Atwater, D. E. Reisner, "Determination of stateof-charge and state-of-health of batteries by fuzzy logic methodology", J. Power Sources, vol. 80, no. 1-2, pp. 293-300, 1999. [11] C. Bo, B. Zhifeng, C. Binggang, "State of charge estimation based on evolutionary neural network," J. Energy Conversion and Management, vol. 49, no. 10, pp. 2788-2794, 2008. [12] B. Cheng, YL. Zhou, JX. Zhang, JP. Wang, BG. Cao "Ni-MH batteries state-of-charge prediction based on immune evolutionary network," J. Energy Conversion and Management, vol. 50, no. 12, pp. 3078-3086, 2009. [13] P. Singh, R. Vinjamuri, X. Wang, D. Reisner, "Design and implementation of a fuzzy logic-based state-of-charge meter for Li-ion batteries used in portable defibrillators," J. Power Sources, vol. 162, no. 2, pp. 829-836, 2006. [14] M. Charkhgard and M.Farrokhi, "State-of-Charge Estimation for Lithium-Ion Batteries Using Neural Networks and EKF," IEEE Trans. on Industrial Electronics, vol. 57, no. 12, pp. 4178-4187, 2010. [15] S. Yanqing, "Adaptive online state-of-charge determination based on neuro-controller and neural network," J. Energy Conversion and Management, vol. 51, pp. 1093-1098, 2010. [16] B. Cheng, Y. Zhou and J. Zhang, "Ni-MH batteries state-of-charge prediction based on immune evolutionary network," J. Energy Conversion and Management, vol. 50, no. 12, pp. 3078-3086, 2009. [17] O. Barbarisi, F. Vasca, and L. Glielmo, "State of charge Kalman filter estimator for automotive batteries," J. Control Engineering Practice, vol. 14, no. 3, pp. 267-275, 2006. [18] M. Shahriari and M. Farrokhi, "Online State-of-Health Estimation of VRLA Batteries Using State of Charge," IEEE Trans. Industrial Electronics, vol. 60, no. 1, pp. 191-202, 2013. 80

[19] X. Long, W. Junping and C. Quanshi, "Kalman filtering state of charge estimation for battery management system based on a stochastic fuzzy neural network battery model," J. Energy Conversion and Management, vol. 53, pp. 33-39, 2012. [20] L. Ho-Ta, L. Tsorng-Juu and C. Shih-Ming, "Estimation of Battery State of Health Using Probabilistic Neural Network", IEEE Trans. Industrial Informatics, vol. 9, no. 2, pp. 679-685, 2013. [21] F. Zhang, G. Liu, L. Fang, and H. Wang, "Estimation of Battery State of Charge With H Observer: Applied to a Robot for Inspecting Power Transmission Lines," IEEE Trans. Industrial Electronics, vol. 59, no. 2, pp. 1086-1095, 2012. [22] A. Vasebi, M. Partovibakhsh, and S. Bathaee, "A novel combined battery model for state-of-charge estimation in lead-acid batteries based on extended Kalman filter for hybrid electric vehicle applications," J. Power Sources, vol. 174, no. 1, pp. 30-40, 2007. [23] J. Lee, O. Nam, and B. H. Cho, "Li-ion battery SOC estimation method based on the reduced order extended Kalman filtering," J. Power Sources, vol. 174, no. 1, pp. 9-15, 2007. [24] J. Han, D. Kim, and M. Sunwoo, "State-of-charge estimation of lead-acid batteries using an adaptive extended Kalman filter," J. Power Sources, vol. 188, no. 2, pp. 606-612, 2009. [25] B. S.Bhangu, P. Bentley, D. A. Stone, and C. M. Bingham, "Nonlinear observers for predicting state of charge and state of health of lead acid batteries for hybrid electric vehicles," IEEE Trans. on Vehicular Technology, vol. 54, no. 3, pp. 783-794, 2005. [26] A. Vasebi, S. Bathaee, and M. Partovibakhsh, "Predicting state of charge of lead-acid batteries for hybrid electric vehicles by extended Kalman filters," J. Energy Conversion and Management, vol.49, no.1, pp.75-82, 2008. [27] M. Urbain, S. Rael, B. Davat, and P. Desprez, "State estimation of a Lithium-Ion battery through Kalman filter," Proc. IEEE Int. Power Electronics Specialists Conf., Orlando, FL, USA, pp. 2804-2810, 2007. [28] R. Kandepu, B. Foss, L. Imsland, "Applying the unscented Kalman filter for nonlinear state estimation," J. Process Control, vol. 18, no. 7-8, pp. 753-768, 2008.

81

[29] E. A. Wan and R. van der Menve, "The Unscented Kalman Filter for Nonlinear Estimation", IEEE Symp. Adaptive Systems for Signal Processing, Communications, and Control, pp. 153-158, 2000. [30] M. S. Farag, R. Ahmed, S. A. Gadsden, S. R. Habibi, J. Tjong, "A comparative study of Li-ion battery models and nonlinear dual estimation strategies," IEEE Transportation Electrification Conference and Expo (ITEC), Dearborn, MI, USA, pp. 1-8, 2012. [31] B. Saha, K. Goebel, S. Poll, and J. Christophersen, "Prognostics methods for battery health monitoring using a bayesian framework," IEEE Trans. Instrumentation and Measurement, vol. 58, no. 2, pp. 291-296, 2009. [32] G. L. Plett, "Sigma-point Kalman filtering for battery management systems of LiPBbased HEV battery packs Part 2: Simultaneous state and parameter estimation," J. Power Sources, vol. 161, pp. 1369-1384, 2006. [33] S. J. Julier and J. K. Uhlmann, "New extension of the Kalman filter to nonlinear systems," 11th Int. Symp. Aerospace/Defense Sensing, Simulation, and Controls, Orlando, FL, USA, pp. 182-193, 1997. [34] S. J. Julier, J. K.Uhlmann, and H. F. Durrant, "A new method for the nonlinear transformation of means and covariances in filters and estimators," IEEE Trans. Automatic Control, vol. 45, no. 3, pp. 477-482, 2000. [35] S. Sarkka, "On Unscented Kalman Filtering for State Estimation of Continuous-Time Nonlinear Systems," IEEE Trans. on Automatic Control, vol. 52, no. 9, pp. 1631-1641, 2007. [36] J.J. La Viola Jr., "A Comparison of Unscented and Extended Kalman Filtering for Estimating Quaternion Motion," Proc. American Control Conf., USA, vol. 3, pp. 24352440, 2003. [37] S. Santhanagopalan and R. E. White, "State of charge estimation using an unscented filter for high power lithium ion cells," Int. J. Energy Research, vol. 34, no. 2, pp. 152-163, 2010. [38] F. Zhang and G. Liu, "Battery state estimation using Unscented Kalman filter," Proc. IEEE Int. Conf. on Robotics and Automation, Kobe, Japan, pp. 1863-1868, 2009. 82

[39] A. H. Mohamed, K. P. Schwarz, "Adaptive Kalman filtering for INS/GPS," J. Geodesy, vol. 73, no. 73, pp. 193-203, 1999. [40] H. He, R. Xiong, X. Zhang, F. Sun, and J. Fan, "State-of-Charge Estimation of the Lithium-Ion Battery Using an Adaptive Extended Kalman Filter Based on an Improved Thevenin Model," IEEE Trans. on Vehicular Technology, vol. 60, no. 4, pp. 1461- 1469, 2011. [41] W. Junping, G. Jingang, D. Lei, "An adaptive Kalman filtering based State of Charge combined estimator for electric vehicle battery pack," J. Energy Conversion and Management, vol. 50, no. 12, pp. 3182-3186, 2009. [42] F. Sun, X. Hu, Y. Zou, and S.Li, "Adaptive unscented Kalman filtering for state of charge estimation of a lithium-ion battery for electric vehicles," J. Energy, vol. 36, no. 5, pp. 3531-3540, 2011. [43] R. K. Mehra, "Approaches to adaptive filtering", IEEE Trans. Automatic Control, pp. 693-698, Oct. 1972. [44] S. Cho, H. Jeong, C. Han, S. Jin, JH. Lim, and J. Oh, "State-of-Charge Estimation for Lithium-ion Batteries under Various Operating Conditions Using an Equivalent Circuit Model," J. Computer and Chemical Eng., vol. 41, no.11, pp. 1-9, 2012. [45] M. Catti and M. Montero-Campillo, "First-principles modelling of lithium iron oxides as battery cathode materials," J. Power Sources, vol. 196, no. 8, pp. 3955-3961, 2011. [46] P. Sikha, R. White, and B. Popov, "A mathematical model for a lithium-ion battery/electrochemical capacitor hybrid system," J. Electrochemical Society, vol. 152, no. 8, pp. 1682-1693, 2005. [47] I.Snihir, W. Rey, E. Verbitskiy, A. Belfadhel-Ayeb, and P. Notten, "Battery open circuit voltage estimation by a method of statistical analysis," J. Power Sources, vol. 159, no. 2, pp. 1484-1487, 2006. [48] M. W. Verbrugge, P. Liu, and S. Soukiazian, "Activated-carbon electric-double-layer capacitors: electrochemical characterization and adaptive algorithm implementation," J. Power Sources, vol. 14, no. 2, pp. 369-385, 2005.

83

[49] M. Dubarry and B. Y. Liaw, "Development of a universal modeling tool for rechargeable lithium batteries," J. Power Sources, vol. 174, no. 2, pp. 856-860, 2007. [50] L. Ding, H. Gao, Z. Deng, and Z. Liu, "Slip-ratio-coordinated control of planetary exploration robots traversing over deformable rough terrain," IEEE/RSJ Int. Conf. on Intelligent Robots and Systems, Taipei, Taiwan, pp. 4958-4963, 2010. [51] G. Reina, G. Ishigami, K. Nagatani, K. Yoshida, "Vision-based estimation of slip angle for mobile robots and planetary rovers," Proc. Int. Conf. on Robotics and Automation, Pasadena, CA, USA, pp. 486-491, 2008. [52] L. Ding, H. Gao, Z. Deng, K. Yoshida and K. Nagatani, "Slip ratio for lugged wheel of planetary rover in deformable soil: definition and estimation," Proc. IEEE/RSJ Int. Conf. on Intelligent Robots and Systems, St. Louis, MO, USA, pp. 3343-3348, 2009. [53] K. Yoshida, T. Watanabe, N. Mizuno, and G. Ishigami, "Slip, traction control, and navigation of a lunar rover," Proc. 6th International Symposium on Artificial Intelligence and Robotics & Automation in Space: i-SAIRAS, Nara, Japan, 2003. [54] J. Liu, H. Gao, Z. Deng, "Effect of slip on tractive performance of small rigid wheel on loose sand," J. Intelligent Robotics and Application, vol. 5314, no.1, pp. 1109-1116, 2008. [55] B. Barshan and H. Durrant-Whyte, "Inertial navigation systems for mobile robots," IEEE Trans. Robotics and Automation, vol. 11, no. 3, pp. 328342, 1995. [56] R. Anderson and D. Bevly, "Estimation of slip angles using a model based estimator and GPS, Proc. American Control Conf., vol. 3, Boston, MA, USA, pp. 2122-2127, 2004. [57] M. Wadda, K. Yoon, and H. Hashimoto, "High accuracy road vehicle state estimation using extended Kalman filter, Proc. IEEE Intelligent Transportation Systems, Dearborn, MI, pp. 282-287, 2000. [58] I. Motte, I. Campion, "A slow manifold approach for the control of mobile robots not satisfying the kinematic constraints," IEEE Trans. on Robotics and Automation, vol. 16, no. 6, pp. 875-880, 2000. [59] W.-S. Lin, L.-H. Chang, P.-C. Yang, "Adaptive critic anti-slip control of wheeled autonomous robot," J. Control Theory and Applications, vol. 1, no. 1, pp. 51-57, 2007.

84

[60] M. Tarokh, G.J. McDermott, "Kinematics modeling and analyses of articulated rover," IEEE Trans. on Robotics, vol. 21, no. 4, pp. 539-553, 2005. [61] W.E. Dixon, D.M. Dawson, E. Zergeroglu, "Robust control of a mobile robot system with kinematic disturbance," Proc. IEEE Int. Conf. Control Applications,Anchorage, AK, USA, pp. 437-442, 2000. [62] Y. Zhang, J.H. Chung, S.A. Velinsky, "Variable structure control of a differentially steered wheeled mobile robot," J. Intelligent and Robotic Systems vol. 36, no. 3, pp. 301314, 2003. [63] M.M. Michalek, P. Dutkiewicz, M. Kielczewski, D. Pazderski,"Vector-field-orientation tracking control for a mobile vehicle disturbed by the skid-slip phenomena," J. Intelligent and Robotic Systems, vol. 59, no. 304, pp. 341-365, 2010. [64] R. Balakrishna, A. Ghosal, "Modeling of slip for wheeled mobile robot," IEEE Trans. on Robotics, vol. 11, no. 1, pp. 126-132, 1995. [65] S. Jung, T.C. Hsia, "Explicit lateral force control of an autonomous mobile robot with slip," IEEE/RSJ Int. Conf. on Intelligent Robots and Systems, IROS, pp. 388-393, 2005. [66] D. Stonier, H.C. Se, C. Sung-Lok, N.S. Kuppuswamy, K. Jong-Hwan, "Nonlinear slip dynamics for an omni-wheel mobile robot platform," Proc. IEEE Int. Conf. on Robotics and Automation, Rome, Italy, pp. 2367-2372, 2007. [67] J. Ploeg, H.E. Schouten, H. Nijmeijer, "Control design for a mobile robot including tire behavior," 2008 IEEE Intelligent Vehicles Symposium, Eindhoven, The Netherlands, pp. 240-245, 2008. [68] P. Lamon, A. Krebs, and M. Lauria, "Wheel torque control for a rough terrain rover," Proc. Int. Conf. on Robotics and Automation, New Orleans, LA, USA, pp. 4682-4687, 2004. [69] G. Ishigami, K. Nagatani, and K. Yoshida, "Slope traversal controls for planetary exploration rover on sandy terrain," J. Field Robot, vol. 26, no. 3, pp. 264-286, 2008. [70] K, Gu and Y. Wei, "Dynamic Modeling and Sliding Mode Driving Control for Lunar Rover Slip," Proc. IEEE Int. Conf. Integration Technology, Shenzhen, China, pp. 36-41, 2007. 85

[71] S. Wu, L. Lia, Y. Zhao, and M. Li, "Slip ratio based traction coordinating control of wheeled lunar rover with rocker bogie," J. Procedia Engineering, vol. 15, pp. 510-515, 2011. [72] D. Ameddah and T. Benmokrane, "A comparison of a classical PID and sliding mode: traction control for fast wheeled mobile robot," Int. J. Automation and Control, vol. 4, no. 1, pp. 65-83, 2010. [73] B. Subudhi and Sh. Ge, "Sliding-mode-observer-based adaptive slip ratio control for electric and hybrid vehicles," IEEE Trans. Intelligent Transportation Systems, vol. 13, no. 4, pp. 1617-1626, 2012. [74] Q. Gu, X. Cheng, "Study on optimal slip ratio identification and traction control for electric vehicle," Int. Conf. on Mechatronic Science, Electric Engineering and Computer, Jilin, China, pp. 738-742, 2011. [75] B. Subudhi and Sh. Ge, "Sliding-mode-observer-based adaptive slip ratio control for electric and hybrid vehicles," IEEE Trans. Intelligent Transportation Systems, vol. 13, no. 4, pp. 1617-1626, 2012. [76] M. Amodeo, A. Ferrara, R. Terzaghi, and C. Vecchio, "Wheel slip control via secondorder sliding-mode generation," IEEE Trans. Intelligent Transportation Systems, vol. 11, no. 1, pp. 122-131, 2010. [77] Y. Hori, Y. Toyoda, and Y. Tsuruoka, "Traction control of electric vehicle: basic experimental results using the test EV UOT March," IEEE Trans. Industry Application, vol. 34, No. 5, pp. 1131-1138, 1998. [78] Y. Tian, N. Sarkar, "Control of a Mobile Robot Subject to Wheel Slip," J. Intelligent Robotic Systems, Vol. 74, pp. 915-929, 2014. [79] D. Kun, L. Kaijun, and X. Qunsheng, "Application of unscented Kalman filter for the state estimation of anti-lock braking system", IEEE Int. Conf. on Vehicular Electronics and Safety, Beijing, China, pp. 130-133, 2006. [80] C. C. Ward, K. Iagnemma, "A Dynamic-Model-Based Wheel Slip Detector for Mobile Robots on Outdoor Terrain," IEEE Trans. Robotics, vol. 24, No. 4, pp. 821-831, 2008. [81] G Welch, G Bishop, "An introduction to Kalman filter,"clubs.ens-cachan.fr, 1995. 86

[82] Q. Song and J. Han, "An adaptive UKF algorithm for the state and parameter estimations of a mobile robot," Acta Automatica Sinica, vol. 34, no. 1, pp. 72-79, 2008. [83] V. Johnson, A. Pesaran, and T. Sack, "Temperature dependent battery models for high power lithium-ion batteries," Proc. 17th Annual Electric Vehicle Symp., Montreal, Canada, 2000. [84] J. Y. Wong, "Theory of ground vehicles," Wiley, 4th Edition, ISBN: 978-0-470-17038-0, July 2008. [85] M. Doumiati, A. Charara, A. Victorino, D. Lechner, "Vehicle dynamics estimation using Kalman filtering," Wiley, ISBN: 978-1-84821-366-1, 2012. [86] M. G. Bekker, "Theory of Land Locomotion," Ann Arbor, MI: Univ. of Michigan Press, 1956, ch. 6 and 9. [87] C. Edwards, S. Spurgeon, "Sliding Mode Control: Theory And Applications," CRC Press, Aug 27, 1998. [88] J.-J. E. Slotine and W. Li, "Applied nonlinear control, Englewood", CA: Prentice-Hall, 1991, ch. 7. [89] Q. Xu and Y. Li, "Sliding mode control of a piezo-driven micropositioning system using extended Kalman filter," IEEE Int. Conf. Automation and Logistics, Hong Kong and Macau, pp. 427-432, 2010. [90] C. Unsal and P. Kachroo, "Sliding Mode Measurement Feedback Control for Antilock Braking Systems," IEEE Trans. Control System Technology, vol. 7, No. 2, pp. 271-281, 1999.

87

