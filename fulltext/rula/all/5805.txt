EVALUATION METHODS OF DYNAMIC FLEXIBLE TRANSPORTATION SYSTEMS

By

Shadi Djavadian Master of Engineering, University of Toronto, October 2009 Bachelor of Applied Science in Civil Engineering, University of Toronto, June 2005

A dissertation presented to Ryerson University in partial fulfilment of the requirements for the degree of Doctor of Philosophy in the Program of Civil Engineering

Toronto, Ontario, Canada, 2016 Â© Shadi Djavadian 2016

i

AUTHOR'S DECLARATION

I hereby declare that I am the sole author of this dissertation. This is a true copy of the dissertation, including any required final revisions, as accepted by my examiners.

I authorize Ryerson University to lend this dissertation to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this dissertation by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

I understand that my dissertation may be made electronically available to the public.

ii

EVALUATION METHODS OF DYNAMIC FLEXIBLE TRANSPORTATION SYSTEMS

Shadi Djavadian Doctor of Philosophy, 2016 Civil Engineering Ryerson University

Abstract With advances in mobile technologies, social networks and global positioning (GPS) in the digital world, alternative mobility systems (taxis, carpool, demand-responsive services, peer-topeer ridesharing, carsharing) have garnered interest from both public and private sectors as potential solutions to address last mile problem in public transit. Although there are number of models to optimize flexible or dynamic transit operations there has not been any methodology to evaluate equilibrium demand and effect on social welfare for these systems in an integrated supplydemand context. This study lays the groundwork for studying the equilibrium of these systems, and proposes an agent-based adjustment process to evaluate the properties of a stable sate as an agent-based stochastic user equilibrium (SUE). Four sets of experiments are conducted: (1) illustration with a simple 2-link network, (2) evaluation of a dynamic dial-a-ride policy, and (3 &4) illustration using real data from Oakville, Ontario & Manhattan, NY. The experiments demonstrate that the proposed model with multiple sample populations can generate an invariant distribution of demand and welfare effects and it can effectively be used to measure the effect of changes in flexible transport services operation policies on ridership. Moreover, this study also explores flexible transport services as two-sided markets, and extends the proposed agent-based

iii

day-to-day adjustment process to include day-to-day adjustment of the service operator(s) as a two-sided market. Additional computational experiments and a case study are conducted. Findings confirm the existence of thresholds from which network externalities cause two-sided and onesided market equilibria to diverge. The Ramsey pricing criterion is used for social optimum to show that perfectly matched states from the proposed day-to-day process are equivalent to a social optimum. A case study using real data from Oakville, Ontario, as a first/last mile problem example demonstrates the sensitivity of the two-sided day-to-day model to operating policies.

iv

ACKNOWLEDGEMENTS
"The brick walls are there for a reason. The brick walls are not there to keep us out. The brick walls are there to give us a chance to show how badly we want something. Because the brick walls are there to stop the people who don't want it badly enough. They're there to stop the other people."(Professor Randy Pausch, the Last Lecture)

I would like to thank various people who have supported me in recent years as I have worked on this dissertation and in some way those who didn't for building my character. First, I owe an enormous debt of gratitude to my parents and my brother for their support, unconditional love, and encouragement throughout my life; I would have not been able to complete this research without their continuous love and support. Second, I would like to express my deepest gratitude to my advisor Dr. Joseph Chow for his expert guidance, support, kindness, patience, understanding and encouragement throughout my study. In addition, I express my appreciation to Dr. Bhagwant Persaud, Dr. Arnold Yuan, Dr. Songnian Li, Dr. Matthias Sweet, Dr. Luca Quadrifoglio and Dr. Julia Spaniol for having served on my committee. I would also like to thank Reuben Briggs and Susanna Choy from University of Toronto, Data Management Group for providing Transportation Tomorrow Survey Data for Oakville and, KyeongSu Kim from NY Metropolitan Transportation Council for providing us with New York TAZ data. I am also grateful to the Canada Research Chairs program and NSERC Discovery Grant for funding this research. Special thanks also go to Rachel Peluso, Dr. Xintao Liu, Dr. Ahmed Shaker, Dr. Ahmed ElRabbany and my fellow graduate students from the Civil Engineering Department at Ryerson University for all their help, support and encouragement over the past three years. I am also grateful to my former colleagues from TUDelft, Dr. Thomas Schreiter and Wouter Schakel for all their help with MATLAB. Last but certainly not least, I would also like to thank my friends Neda, Jos, Sahar, Setareh, and Danoush for always believing in me.

v

DEDICATION

I dedicate this dissertation to my parents. Without their support, understanding, patience, and most of all love, the completion of this work would not have been possible.

vi

Table of Contents Author's Declaration........................................................................................ii Abstract.......................................................................................................iii Acknowledgements...........................................................................................v Dedication.....................................................................................................vi List of Tables.................................................................................................xii List of Figures..............................................................................................xiii List of Appendix Tables...................................................................................xiv Chapter 1. Introduction and Motivation .................................................................................... 1 1.1. 1.2. 1.3. Introduction .......................................................................................................................... 1 Motivation .......................................................................................................................... 3 Objectives & Research Questions ........................................................................................ 8 Objective 1 .................................................................................................................... 8 Objective 2 .................................................................................................................... 9 Scientific contribution ................................................................................................ 10 Practical innovation .................................................................................................... 11

1.3.1. 1.3.2. 1.4. 1.4.1. 1.4.2. 1.5.

Thesis Contributions .......................................................................................................... 10

Outline of the Thesis .......................................................................................................... 11

Chapter 2. Literature Review .................................................................................................... 13 2.1. 2.2. 2.3. 2.4. 2.5. 2.6. State-of-the-Art .................................................................................................................. 13 Challenges of One-Size-Fits-all Modelling of Equilibrium Demand for FTS .................. 17 User Equilibrium from a Day-to-Day Adjustment Process ............................................... 20 Agent Based Modelling ..................................................................................................... 22 FTS Operating Policy Overview ........................................................................................ 25 Concepts from Two-Sided Market Literature .................................................................... 27

Chapter 3. Problem Definition & Simulation Development ................................................... 31 3.1. Transportation Planning Example 1: Oakville, Ontario .................................................... 32 Background information ............................................................................................. 32 Problem definition ...................................................................................................... 34
vii

3.1.1. 3.1.2.

3.1.3.

Data requirements & collection .................................................................................. 36 Commuter agents................................................................................................. 36 Vehicle (driver) agents ........................................................................................ 38 Agents' environment ............................................................................................ 38

3.1.3.1. 3.1.3.2. 3.1.3.3.

3.1.3.4. The rules defining how agents interact with one another and with their environment ........................................................................................................................... 39 3.2. Transportation Planning Example 2: Manhattan, New York............................................. 40 Background information ............................................................................................. 40 Problem definition ...................................................................................................... 43 Data requirements and collection ............................................................................... 44 Commuter agents................................................................................................. 44 Vehicle (driver) agents ........................................................................................ 49 Agents' environment ............................................................................................ 49 3.2.1. 3.2.2. 3.2.3.

3.2.3.1. 3.2.3.2. 3.2.3.3.

3.2.3.4. The rules defining how agents interact with one another and with their environment ........................................................................................................................... 52 3.3. Agent-Based Transportation Simulation Tool in MATLAB ............................................. 53 Input information required by the agent-based simulator .......................................... 54 Network microsimulation module .............................................................................. 55 FTS Simulation .................................................................................................... 57 Pseudo code for within day microsimulation model ........................................... 57 3.3.1. 3.3.2.

3.3.2.1. 3.3.2.2. 3.3.3.

Agent-based transportation simulation outputs .......................................................... 59

Chapter 4. Agent-Based Day-to-Day Adjustment Process for Evaluating One-Sided Flexible Transportation Markets .............................................................................................. 60 4.1. Methodology ...................................................................................................................... 60 Synthesize N "user" agent traits over  populations .................................................. 65 Initialize FTS fleet for a given population    ........................................................ 66 Update strategy  ..................................................................................................... 66 Mode choice ........................................................................................................ 67 Departure time choice conditional on mode choice............................................ 68 Perceived travel time update ............................................................................... 68 4.1.1. 4.1.2. 4.1.3.

4.1.3.1. 4.1.3.2. 4.1.3.3. 4.1.4. 4.1.5.

Simulate stochastic dynamic loading........................................................70 Invariance condition for each population    ......................................................... 71
viii

4.2.

Computational Experiment 1: Illustration with 2-Link Network ...................................... 72 Local stability from initial conditions under Scenario 1 for one population .............. 75 Effect of Learning Rate  on speed and smoothness of convergence in Scenario 1 .. 77 Consumer surplus sample distribution as agent-based SUE ...................................... 78

4.2.1. 4.2.2. 4.2.3. 4.3. 4.4.

Computational Experiment 2: Illustration of Embedding a Dynamic DARP .................... 81 Case Study: Oakville Last Mile Problem One-Sided FTS Market .................................... 85 Oakville case study 1: objectives................................................................................ 85 FTS operating policy simulation ................................................................................ 86 Oakville case study 1: MNL estimation + desired arrival time estimation ............... 88 Oakville test scenarios ................................................................................................ 91

4.4.1. 4.4.2. 4.4.3. 4.4.4.

4.4.4.1. Scenario 1: Effect of fleet size on demand for flexible transit and consumer surplus................................................................................................................................................91 4.4.4.2. Scenario 2 & 3: Effect of alternative routing policy and other mode operations on FTS................................................................................................................................................93 4.5. Case Study: Manhattan Shared-ride................................................................................... 94 Binary logit estimation + arrival time at destination estimation ................................ 94 Manhattan test scenarios ............................................................................................. 95 Scenario 1: Effect of ride sharing on FTS demand and their impacted welfare . 96 4.5.1. 4.5.2. 4.6.

4.5.2.1.

Discussion .......................................................................................................................... 97

Chapter 5. Agent-Based Day-to-Day Adjustment Process for Evaluating Two-Sided Flexible Transportation Markets .............................................................................................. 98 5.1. 5.2. Two-Sided Transport Markets ........................................................................................... 99 Methodology .................................................................................................................... 100 Synthesize M vehicle agent traits ............................................................................. 102 Update choice  ..................................................................................................... 103 Simulation stopping criterion ................................................................................... 105 Social optimum evaluation ....................................................................................... 106 Scenario parameters .................................................................................................. 107 Results ...................................................................................................................... 109 Stability from initial conditions under Scenario 1 ............................................ 109

5.2.1. 5.2.2. 5.2.3. 5.2.4. 5.3. 5.3.1. 5.3.2.

Computational Experiments............................................................................................. 106

5.3.2.1.

5.3.2.2. Consumer surplus sample distribution as two-sided agent-based SUE under Scenario 2 ......................................................................................................................................112
ix

5.3.2.3. Significance of incorporating day-to-day adjustment process of drivers under scenario 3..........................................................................................................114 5.3.2.4. 5.4. Evaluating social optimality of equilibrium under Scenario 3 ......................... 117 Case Study: Oakville First/Last mile Problem-Two-Sided Market ................................. 119

5.4.1. Oakville case study 2: MNL estimation + desired arrival time at destination estimation................................................................................................120 5.4.2. 5.5. Oakville Case study 2: objective and test scenario................................................... 121 Discussion ........................................................................................................................ 123

Chapter 6. Conclusions and Future Research ........................................................................ 124 6.1. 6.2. 6.3. Summary .......................................................................................................................... 124 Contributions.................................................................................................................... 126 Future Research ............................................................................................................... 127

Appendix....................................................................................................130 References .................................................................................................................................. 132

x

LIST OF TABLES Table 1.1: Snapshots of some public-private partnerships with mobility services to address last mile problem...................................................................................................2 Table 2.1: Summary of studies focusing on flexible transportation services........................14 Table 2.2: Summary of studies on modeling fixed route transit systems.............................16 Table 3.1: Sample "Base Case Scenario" Oakville commuters' itinerary & socio-economic characteristics ................................................................................................................................ 37 Table 3.2: Manhattan study -modes used for H-W trips during AM peak period ........................ 41 Table 3.3: Distribution of workers by trip departure times Â­morning peak period (6:00am10:00am) ....................................................................................................................................... 46 Table 3.4: Manhattan commuters- NY2010/2011 survey-H-W trips-AM peak period-departure time range...................................................................................................................................... 47 Table 3.5: Sample departure time range to departure time conversion ........................................ 48 Table 4.1: Network attributes ....................................................................................................... 74 Table 4.2: Simulated traits of the first sampled population .......................................................... 75 Table 4.3: Initial travel disutilities for taxi and auto (min) ........................................................... 75 Table 4.4: Scenarios ...................................................................................................................... 83 Table 4.5: Sample vehicle agent (i) itinerary ................................................................................ 87 Table 4.6: "Base Case Scenario" Oakville commuters' specific mode attributes ......................... 89 Table 4.7: Oakville Case Study test scenarios summary .............................................................. 91 Table 4.8: Comparison of consumer surplus and taxi demand ..................................................... 93 Table 4.9: Manhattan Case Study test scenario summary ............................................................ 95 Table 5.1: Scenario characteristics ............................................................................................. 108 Table 5.2: Base Case Scenario" Oakville commuters' specific mode attributes (fare price included) ..................................................................................................................................... 120 Table 5.3: Oakville cast study_2 test scenario attribute summary.............................................. 122 Table 5.4: Comparison of average consumer surplus, taxi demand, fleet size, and profit per vehicle at equilibrium ................................................................................................................. 122

xi

LIST OF FIGURES Figure 1.1. The Four Step Model (source: McNally, 2007).............................................4 Figure 1.2. The Manheim/Florian Transportation Systems Analysis Framework (McNally, 2007)............................................................................................................6 Figure 2.1. Illustration of a two-sided market............................................................................... 28 Figure 3.1. Oakville station study area within the GTA. .............................................................. 33 Figure 3.2. Oakville network in proprietary simulator in MATLAB. .......................................... 39 Figure 3.3. Manhattan Network- H-W morning peak period trips made by all modes ................ 41 Figure 3.4. Manhattan Network- H-W morning peak period trips made by taxi only ................. 42 Figure 3.5. Distribution of workers by trip departure times (source: ACS2011/AASHTO 2013) 45 Figure 3.6. Distribution of workers by trip departure times Â­morning peak period (6:00am10:00am) ....................................................................................................................................... 46 Figure 3.7. Manhattan network in proprietary simulator in MATLAB. ....................................... 50 Figure 3.8. Sample speeds (mile/hr) going from TAZ1 to TAZ 3 during AM peak period using NY TLC Yellow Taxi Data........................................................................................................... 51 Figure 3.9. Agent-based transportation simulation tool framework...................................53 Figure 4.1. Key components of (a) regular RBAP and (b) proposed agent-based model under FTS setting. ................................................................................................................................... 62 Figure 4.2. 2-link example to proof proposition 1. ....................................................................... 63 Figure 4.3. 2-link example to illustrate proposed model. ............................................................. 73 Figure 4.4. (a) Total network consumer surplus and (b) taxi demand at equilibrium. ................. 76 Figure 4.5. Effect of  on single population convergence to invariance. ..................................... 77 Figure 4.6. Total consumer surplus for multiple populations at equilibrium_scenario1. ............. 78 Figure 4.7. Convergence of Scenario 1 total system travel time for populations #2, #4, #16, and #19................................................................................................................................................. 79 Figure 4.8. Comparison of consumer surplus distribution from |S|=30 simulated populations.... 80 Figure 4.9. Sample network to illustrate proposed model. ........................................................... 82 Figure 4.10 Consumer surplus distribution at simulated equilibrium for scenario 1 and in the base case scenario. ................................................................................................................................ 84 Figure 4.11. Percent change in (a) total consumer surplus and (b) taxi demand. ......................... 92
xii

Figure 4.12. Manhattan case study: Consumer surplus distribution at simulated equilibrium for scenario 1 and in the base case scenario. ...................................................................................... 96 Figure 5.1. Key components of proposed agent-based RBAP under two-sided flexible transport market. ........................................................................................................................................ 101 Figure 5.2. Simulated population consumer surplus distribution in base scenario. .................... 109 Figure 5.3. Convergence of (a) average experienced profit ($)/driver and (b) number of active drivers. ........................................................................................................................................ 110 Figure 5.4. Convergence of (a) taxi demand and (b) total consumer surplus. ............................ 112 Figure 5.5. 100-sample distribution of equilibrium (a) Consumer surplus, (b) FTS demand, (c) average expected profit per vehicle, and (d) average fleet size. ................................................. 113 Figure 5.6. Comparison of equilibrium (a) total consumer surplus and (b) FTS demand, under one-sided ("static") and two-sided ("dynamic") market assumptions. ....................................... 115 Figure 5.7. Comparison of (a) Fleet size and (b) Taxi demand and number of active assigned drivers at equilibrium under various driver profit ($) threshold ................................................. 116

xiii

LIST OF APPENDIX TABLES Table A1. "Base Case Scenario" commuter itinerary..................................................130 Table A2. "Base Case Scenario" commuter specific mode attributes...............................131 Table A3. Simulated traits of the first sampled population............................................131

xiv

Chapter 1. Introduction and Motivation
1.1. Introduction

The three main problems associated with road transportation are congestion, the collision rate and high level of pollution. According to the study conducted by METROLINX (2008) in 2006, the annual cost of travel delays, increased impact to the environment, and increased chance of vehicle collision to commuters in the Greater Toronto and Hamilton Area was $3.3 billion. In 2006 the cost to the economy in the form of GDP was estimated at $2.7 billion and the estimated costs for 2031 to commuters and economy will balloon to $7.8 billion and $7.2 billion respectively. Therefore as can be seen the "Big Three" needs in road transportation system are (Shladover, 2009):    Improving safety so that crashes are reduced in frequency and severity; Improving efficiency of use of the roadway infrastructure, to help reduce congestion; Reducing energy consumption and pollutant emissions associated with vehicular travel.

With continued rise in urban traffic congestion combined with the high cost of infrastructure enhancement, transportation engineers and planners around the world are increasingly seeking ways to better utilize transportation systems without adding more infrastructure. One solution would be providing better and more accessible public transit systems. However, the demand for transit, especially in low dense areas, is often hampered by lack of efficient and effective door-to-transit station service known as the "first mile/last mile" problem (Li and
1

Quadrifoglio, 2010). One potential solution to the last mile problem is the concept of flexible transport (or transit) services (FTS) (CortÃ©s et al., 2005; Mulley and Nelson, 2009; Quadrifoglio and Li, 2009). FTS consist of services that transport people without a fixed route and/or schedule, which is designed to accommodate door-to-door service. It includes demand responsive transit services (Schofer et al., 2003) like dial-a-ride (Wilson et al., 1976), and taxi service. Demand responsive connector (DRC) is also a type of FTS that acts as a feeder to main transit line providing riders door-to-transit services (Quadrifoglio and Li, 2009). Recent advances in Information Communications Technologies (ICT) have further made it more cost effective to operate flexible systems, and many private start-ups based on car sharing or ride sharing have arisen by leveraging such opportunities, e.g. Uber, Lyft, and Zipcar. With the emergence of above mentioned services, in recent years public agencies have started to partner with private mobility services in order to address last/first mile problem. Table 1.1 provides snapshots of some public-private partnerships (adapted from Nourinejad et al, 2016).

Table 1.1: Snapshots of some public-private partnerships with mobility services to address last mile problem

2

In addition to public-private partnerships presented in Table 1.1, starting August 17th, 2016 a community in the suburb of Denver, Colorado has been offering free Lyft rides to and from commuter rail. Moreover, Altamonte Springs community in Florida has been covering 25% of Uber rides to and from commuter rail (Bliss, 2016).

1.2.

Motivation

As shown above there is definitely a value in providing door-to-transit services using these flexible services, however public policy makers are often faced with questions such as: what fleet size should be employed and what dispatch algorithm should be used for the given fleet size. Should such a service be operated 24 hours a day, or only during peak period? What pricing scheme should be used, should there be a fixed price or variable price depending on distance traveled or look ahead strategies similar to the pricing strategies proposed by Sayarshad & Chow (2015)? Should they offer single ride or shared ride? Each of these different design decisions and operating policies lead to different level of service (LOS) which in return maybe lead to different demand and different impacted welfare. It should be noted that change in the demand for FTS will also result in the change in demand for other travel modes (switching to and from auto, fixed route transit, bike, walk, etc) and will impact overall welfare of travelers. While private companies can embrace the financial risks with operating such a service using their own capital and targeting customers to maximize profit, public agencies do not have such luxuries; services need to be accessible to a general public, and investments come from the public. As a result, public agencies hoping to operate FTS on a much larger scale require sufficient investment justification in terms of forecasting the demand for a particular operating design.
3

Since 1950's variations (with and without a feedback loop) of the four step model (FSM) presented in Figure 1.1 have been used for modeling transportation demand and determining equilibrium flows. As shown in Figure 1.1 the demand is determined through trip generation, trip distribution and mode choice, and it is considered fixed regardless of changes in the transport supply. Despite the feedback process, the only equilibration is at the route choice level, therefore the effect of any changes in supply procedure will only be reflected on route choice of travelers as opposed to their mode choice (demand for different modes).

Figure 1.1. The Four Step Model (source: McNally, 2007)

The FSM presented in Figure 1.1 was mostly developed for evaluating large scale infrastructure projects and is not for projects involving more complex dynamic policies (dynamic pricing, fleet size, schedule) that directly influence travel behaviour. In the case of FTS the demand is not fixed and varies from one day to another based on FTS level of service which is affected by operating policies and system designs. For example, imagine that there is only one taxi available (fleet size=1) and based on FSM there are two travelers that would like to use the taxi (let's call them Agent1 (1) and Agent1 (2), and the rule is that they cannot share a taxi. As a result one of the
4

agents has to wait while the other one is being served which will result in the second agent being late at its destination (Agent1 (2)). The next day, Agent1 (2) having arrived late at its destination the previous day, it will adjust its departure time to leave earlier than the previous day so it can arrive on time at its destination. However since Agent1 (1) arrived on time the previous day and didn't have to wait, it will choose to leave at the same time as previous day but since now Agent1 (2) leaves earlier than the day before, Agent1 (2) will be served first making Agent1 (1) wait and consequently be late at its destination. At the same time since Agent1 (2) left earlier than the day before, it will arrive early at its destination. On the third day both agents having experienced schedule delay (late and early) from previous days may change their departure time or even their mode choice (resulting in change in demand of FTS and other modes). Let's imagine that Agent1 having arrived late at its destination on day two decides to take auto on day three, this results in one less traveler and less profit for FTS operator and as a result the FTS operator may decide not to offer taxi service on day 4, therefore on day 4 both travelers will shift to auto. The two agents may later shift due to congestion and FTS may once again increase its fleet size based on change in demand. The two agents will keep changing their choices till they achieve minimum disutility and minimum schedule delay, and where one cannot improve its choice without making the other's situation worse than before. It can be seen that even for such a trivial example, this shift in demand for different modes as the result of supply procedure (dynamic FTS fleet size) cannot be captured using FSM presented in Figure 1.1. Therefore there is a need for a model that allows us to evaluate equilibrium demand for dynamic FTS policies and operating designs. Figure 1.2 presents the Manheim/Florian Transportation Systems Analysis Framework (TSA) (Manheim, 1979; Florian et al, 1988) for which the demand is not fixed and is equilibrated based on changes in supply procedure.

5

Figure 1.2. The Manheim/Florian Transportation Systems Analysis Framework (McNally, 2007)

This leads us to the key problem which is also the motivation behind this study: there are currently no tools for evaluating the equilibrium demand for a particular operating design of an FTS in an integrated supply and demand context as shown in Figure 1.2. Simulation appears to be one way to deal with FTS equilibrium. CortÃ©s et al. (2005) , Jung and Jayakrishnan (2014) and Atasoy et al (2015) acknowledged the lack of evaluation tools for FTS and provide a simulation-based evaluation, but only consider fixed demand for the service instead of variable demand based on dynamic policies. The question that above cited studies try to answer is that given the fixed demand what would be the optimal policy and design decision that maximize profit and level of service of FTS. However as explained earlier, what public policy makers are interested in is the equilibrium demand and their impacted welfare given a particular operating policy and design decision. In this study, this gap is addressed by laying the groundwork for studying the equilibrium of these systems and proposing an agent-based adjustment process to evaluate the properties of a stable state as an agent-based stochastic user equilibrium adopted from Nagel and FlÃ¶tterÃ¶d (2012).
6

Moreover, in recent years it has become more apparent that many transportation markets may be regarded as two-sided markets or multisided platforms (Rochet and Tirole, 2003) [RT03]. Rochet and Tirole (2006) [RT06] define two-sided markets as "markets in which one or several platforms enable interactions between end-users and try to get the two (or multiple) sides `on board' by appropriately charging each side". It has been shown that the social optimum in a two sided market can be different from a conventional one-sided market [RT03]. As such, modeling a FTS as a one-sided market where only the population of travelers vary their choices on a day-today basis may not properly capture network externalities between travelers and FTS operators if the system is naturally a two-sided transportation market. One such example of a two-sided transportation market is UberX (Hagiu, 2013). In the case of UberX, the fleet size is not fixed and varies from one day to another based on the number of drivers available on that particular day and the number of available drivers depends on factors such as available customers, operating costs and profit, etc. Cantarella et al (2015) with a simple two mode-transport system with responsive bus operator showed the importance of including day-to-day adjustment process of the transport operators in the model as well as the day-to-day adjustment process of travellers. However, no studies have been conducted to understand the structural characteristics of a two-sided flexible transportation market. Therefore in this study in addition of proposing the first agent-based dayto-day adjustment process under FTS setting (as discussed earlier), the process is also extend to evaluate two-sided transportation markets, which is the first day-to-day process with this consideration.

7

1.3.

Objectives & Research Questions

Research has shown that with advances in communication capabilities, including mobile technology, social networks and global positioning (GPS) it is possible to reduce congestion and improve the efficient use of road infrastructure by providing better access to public transit using flexible transit service (dynamic ridesharing systems (taxi, carpool, shuttle)) as a feeder to the main transit. However, before any of these options can be implemented, they have to be evaluated. At the moment there is no "one" tool to evaluate these systems and compare their performances within an integrated supply-demand context. In addition, no method has yet been defined to evaluate peerbased two-sided services where agents may choose to be a driver or a passenger, nor has the method been made operational in practice to evaluate the market equilibrium. The purpose of this research is to fill these gaps. The objective of this thesis is twofold. The two objectives and associated research questions are discussed in Sections 1.3.1 and 1.3.2.

1.3.1. Objective 1

As discussed earlier, there is a need for a tool to evaluate equilibrium demand for particular design of FTS and measure the effect of design decisions of FTS on demand and their impacted welfare. The first objective of this study is to design an agent-based day-to-day adjustment process to study the FTS-based equilibrium and evaluate its properties. The following research questions are addressed: a) Why FTS is a special case that cannot be evaluated using analytical approaches?

8

b) How will the proposed agent-based SUE under FTS setting converge under different initial conditions for one simulated population? c) Whether the proposed agent-based SUE under FTS setting with multiple simulated populations can generate invariant sample distribution of consumer surplus d) Whether the proposed agent-based SUE under FTS setting can measure the effect of different dynamic operation policies on demand and their impact welfare in an integrated supply and demand context The research in this thesis will answer the above questions and a summary of the answers is presented in Section 4 of this dissertation.

1.3.2. Objective 2

The proposed agent-based day-to-day adjustment process under FTS setting (Section 1.3.1) is then extended to include day-to-day adjustment of service operator(s) as a two sided market. Computational experiments are conducted with a simple network. The following research questions are addressed: a) What criteria is necessary to define a two-sided transportation market? b) How do we design a day-to-day adjustment process to model a two-sided transportation market? c) How do we verify whether the dynamic equilibrium of the day-to-day process is a social optimum in a two-sided market? d) How significant can the differences be in the equilibria of a two-sided market that is modeled using the proposed adjustment process versus a one-sided adjustment process?

9

The research in this thesis will answer the above questions and a summary of the answers is presented in Section 5 of this dissertation.

1.4.

Thesis Contributions

In this section the contributions of the research are summarized. In general, the research has led to the development of an agent-based day-to-day adjustment process model to find the agent-based stochastic user equilibrium and welfare effects of dynamic FTS operating policies for one and twosided flexible transport markets. In Section 1.4.1 the scientific contributions are summarized whereas the societal contributions are summarized in Section 1.4.2.

1.4.1. Scientific contribution

There is a clear gap in methodologies to evaluate the user equilibrium for flexible transport services with dynamic operating policies. This research lays the groundwork for studying the equilibrium of these systems. The proposed agent-based adjustment process in Chapter 4 evaluates the properties of an invariant state of such a process as an agent-based stochastic user equilibrium. Moreover, in Chapter 5 the proposed agent- based adjustment process is further extended to evaluate two-sided transportation markets, which is the first day-to-day process with this consideration.

10

1.4.2. Practical innovation

The proposed agent-based day-to-day adjustment process under dynamic FTS setting for one and two-sided flexible transportation markets proposed in Chapter 4 and Chapter 5 allows policymakers to evaluate system designs (e.g. fleet sizing), operating policies (e.g. dispatch/routing algorithm), or competing mode designs (e.g. fixed route transit headways) all on a common platform in terms of consumer surplus distributions. In this study the two proposed models are operationalized in MATLAB, which is an efficient setting for sensitivity analysis for academic purpose. The two models can also be operationalized on a more efficient computational setting (e.g. C++) with even-based simulation for use by public agencies.

1.5.

Outline of the Thesis

Chapter 2 presents challenges associated with one-size-fits all modeling of equilibrium demand of FTS. It also provides literature review on current day-to-day processes, agent-based modelling, and the criteria for a two-sided market. An overview of dynamic FTS operating policy is also presented in Chapter 2. Chapter 3 further illustrates research gaps and issues using real data from Oakville, Ontario and Manhattan, NY. Chapter 3 also introduces the simulation tool developed for this study in MATLAB.

11

Chapter 4 argues with an illustration for why FTS is a special case that cannot be evaluated using analytical approaches and presents agent-based day-to-day adjustment process. Moreover, Chapter 4 with the aid of computational examples verifies the proposed model and illustrates its applicability to transportation planners and policy makers using case studies. In Chapter 5 the proposed agent-based day-to-day process for a two-sided flexible transport market is introduced along with computational experiments to verify the proposed model. Chapter 6 presents conclusions and future work directions.

12

Chapter 2. Literature Review
Despite methods for specific types of FTS (e.g. Yang and Wong, 1998; Xu et al., 2015), as discussed in the previous chapter there is no one-size-fits-all framework for a public agency to make unified comparisons between different FTS service designs. Chapter 2 provides review of existing literature and explores the above mentioned research gap in more details. This chapter is organized as follows, first review of current literature on FTS and fixed route transit is provided in Section 2.1. Then, Section 2.2 presents challenges associated with one-size-fits all modeling of equilibrium demand for FTS. Having built this foundation, we then provide literature review on some of the most important works on user equilibrium day-to-day adjustment process in Section 2.3, and agent-based modeling in Section 2.4. After that an overview of FTS operation policy is presented in Section 2.5. Lastly concepts from two-sided market literature are explained in Section 2.6. It should be noted that Sections 2.2 & 2.3 are adapted from Djavadian & Chow (2016).

2.1.

State-of-the-Art

In the past 40 years there have been many studies on flexible transit specifically taxi. Table 2.1 provides brief overview of these studies.

13

Table 2.1: Summary of studies focusing on flexible transportation services

Studies

Overview

Douglas, 1972 Daganzo, 1978 Daganzo, 1984 Chang and Schonfeld, 1991

Bailey Jr. and Clark Jr, 1992

Price regulation is considered to obtain maximum use of taxi service. Analytical model is proposed to obtain average waiting and riding time for taxi. A flexible system is introduced in which the pick-up and drop off locations are centralized (checkpoints). Considering fixed route and flexible transit service, the aim is to minimize operator's and users' cost, using vehicle size and service area as decision variable. Fleet size management.

Cairns and Liston-Heyes, 1996 Arnott, 1996 Yang and Wong, 1998 Regan eta l, 1998 Horn, 2002 Lee et al., 2004 Aldaihani et al, 2004

Yang et al, 2005

Quadrifoglio et al., 2008 Yang et al, 2010

Cheng and Nguyen, 2011 Powell et al, 2011

Looks at supply-demand equilibrium under regulated and deregulated market. Taxi subsidization. Taxi supply-demand equilibrium using time-dependent network-oriented model for long-term strategic management. Dynamic fleet size management combining vehicle routing and traffic simulation. Fleet scheduling and dispatching for demand responsive services as an alternative to minibuses. Taxi dispatching is considered based on real time traffic conditions. Paramics is used to simulate taxi dispatching. An analytical model is developed for designing hybrid grid network while integrating fixed route transit with flexible demand responsive service. Taxi supply-demand equilibrium is looked at using timedependent network-oriented model for long-term strategic management. Considers MAST, proposing mixed integer programming formulation for static scheduling problem of MAST systems. Models equilibrium model to characterize the bilateral taxicustomer searching and meeting on networks, using meeting function. Decentralized dispatching is addressed. Multi-agent simulation is used to model independence of taxi drivers. A model is proposed that increases profitability by suggesting profitable locations to taxi cab drivers and in turn reducing number of cursing miles.

14

Jung and Jayakrishnan, 2011 Nourbakhsh and Ouyang, 2011

Maciejewski and Nagel, 2013

Sayarshad and Chow, 2015

Introduces optimization and simulation modeling for high coverage point-to-point transit (HCPTT). Introduces a new flexible route transit where service area resembles hub-and spoke and grid network, serving travelers in low demand areas. An agent-based activity and traffic simulator (MATSIM) is combined with dynamic vehicle routing problem optimizer tool (DVRP) to evaluate DVRP dispatch policies. The study assumed fixed demand and a day-to-day adjustment process per Cascetta and Cantarella (1991). A non-myopic dial a ride and pricing is proposed.

For more comprehensive review of current literature on flexible transit the interested reader is referred to Maciejewski and Nagel (2013), Agatz et al, (2012) , Quadrifoglio and Li (2009). As can be seen from Table 2.1 and as stated in the previous chapter the focus of the current studies have been on fleet sizing, pricing and vehicle routing. These studies mostly look at taxi service or other flexible services from the point of view of service operators where the aim is to minimize operators' and travellers' cost as such only the within day dynamics are considered and it is assumed that the system is at steady-state, meaning that current condition will be the same tomorrow and travelers will make the same choices the next day. The supply-demand equilibrium considered in these studies is based on market equilibrium where the learning behaviour of travelers is not considered. However as mentioned by Quadrifoglio and Li (2009) the demand for flexible transit varies according to the level of service of flexible transit and may change from one day to another and this is a key factor when it comes to transportation planning and is of great importance to public agencies when trying to justify one alternative over another. In addition, current studies have tried to evaluate flexible services isolated from other modes, omitting the effect of level of service of other modes on the demand for flexible transit and vice versa. Therefore from the transportation planning perspective there is a need for a tool that allows policy makers to

15

evaluate equilibrium for particular design of these services in an integrated supply-demand context, considering dynamic behaviour of the travelers. It is worth mentioning that current models can still be used for modeling within day dynamics. The aim of within day models presented in Table 2.1 is to optimize operating policy and system designs given a demand on a particular day, whereas the aim of the day-to-day model presented in this thesis is to find equilibrium demand given a particular operating design. There are also numerous models on transit assignment and equilibrium. Table 2.2 provides a brief summary of current models. It should be noted that the list provided in Table 2.2 is just an example and by no means covers the entire literature on fixed route transit.

Table 2.2: Summary of studies on modeling fixed route transit systems

Scope Route/mode choice models

Studies de Cea and FernÃ¡ndez, 1993; Wu et al., 1994; Lam et al., 1999; Kurauchi et al., 2003;

Dynamic departure time/mode split models

Tian et al., 2007; Qian and Zhang, 2011; Gonzales and Daganzo, 2012

Activity-based models

Li et al, 2010; Chow and Djavadian, 2015

Similar to flexible transit models, majority of models used for the design of fixed route transit systems are either based on steady state analysis or/and look at fixed route transit in isolation. For example, Wahba and Shalaby (2014) proposed a microsimulation learning based approach to transit assignment (MILATRAS) and looked at day-to-day dynamics and learning behaviour of the travelers, however they looked at fixed route transit in isolation. Furthermore, in their study
16

Wahba and Shalaby (2014) considered fixed demand obtained from the four step model. In their study they only looked at departure time and route choice. On the other hand Li et al (2012) looked at bi-modal transportation considering both transit and other modes of travel, however they did not consider the dynamics in travelers adjusting to any new policy measure. To the best of our knowledge there is not a model that captures day-to-day dynamics in the design of fixed route transit where at the same time considers multimodal network. It should be noted that even if such a model existed it could have not been used for flexible transit service, because as will be explained in Section 2.2, flexible transit is inherently different from general transportation systems.

2.2.

Challenges of One-Size-Fits-all Modelling of Equilibrium Demand for FTS

Consider a complete graph (, ) of potential destinations traversed by a population of size  throughout a period    (e.g. a day) using a set of  transport systems defined as directed subgraphs  (  ,  )  ,  = 1  2  ...   .  is a set of vertices or nodes and  is a set of edges or links. By default, 1 is a subgraph for walking mode and 2 is a subgraph for the road network. Travel costs on the links in 1 and 2 are assumed to be continuous functions of flow. The time-dependent route or path chosen by each traveler for each trip in    is    , which captures the departure times and links within each subgraph (including mode) traversed. This is consistent with that of Cantarella and Cascetta (1995). For  > 2, each service >2   follows a time-dependent operating policy  () where 0     . Each user has a choice set of paths

17

   ( = { }) if it involves the use of FTS, or a single path choice    if it's the use of a different mode. Then we define an FTS in Definition 1.

Definition 1. A flexible transport service (FTS) operates under a dynamic policy with adapted information,  (,  ), where  represents external stochastic information known up until time , i.e.  = { ; 0    } is defined on probability space (, , ), where  is a sample space,  is a filtration representing the set of events, and  is a mapping of the outcomes to probabilities. This external information may represent a number of different random events which include timedependent path flows,  =  (()), and the randomness represents lack of information from the choices made by travelers. In other words, we consider a problem setting with FTS that assumes travelers adjust their choices on a day-to-day basis, and choices within a day are time-dependent but not dynamically updated as the day progresses. Meanwhile, FTSs are assumed to be separate decision-makers that do have within-day dynamic choices, but those choices are dependent on the choices of travelers revealed dynamically as stochastic events. As a result, there are two implications:

1) The link cost of an FTS is a function of route choice sets provided by everyone in the population as well as the operational policy of the service,  = { ( (,  (()))) :    }. 2) The assigned path (mode/time/route) of a traveler is dependent on the sub-path traversing a FTS subgraph. The sub-path in turn is determined by the operating policy as a function of the time dependent path flows,   = {  (,  (())) :    }.

A traveler choosing to take a FTS does not select a single path from origin to destination; instead, the traveler makes choices for some dimensions of the path (e.g. desired departure times, pickup and drop-off locations, etc.) to filter out a choice set  for themselves, and surrenders that set to the FTS to select from. In turn, the FTS chooses a single route from all the sets provided by the travelers arriving dynamically. While this phenomenon appears similar to the hyperpath or optimal
18

strategy concept in transit (see Spiess and Florian, 1989), the hyperpath does not depend on another decision-maker like the FTS travelers' choice set would with the operator. In the FTS setting, the increased dependency between travelers and operator suggests a Stackelberg game. In this game, there are  +  players with  travelers in a population and  FTS operators. The travelers are assumed to have heterogeneous travel preferences, and are the leaders in this game, while the  operators are the followers. This generalized Stackelberg game is similar to the generalized Nash game proposed by Zhou et al. (2005), except the operators and population have their roles reverse. The role reversal is because the travelers need to select partial path choice set while anticipating the response of the operators based on the choices of other travelers and revealed to the operators in a within-day dynamic fashion. As noted by Zhou et al. (2005), such a game does not guarantee a unique equilibrium in the deterministic setting. In order to forecast the social impact of a particular transportation system design, it is necessary to analyze the interaction between the system and its travelers. There are two general ways to do so. First, there is the steady state equilibrium as described by Wardrop (1952). Second, there is a day-to-day dynamic model to describe these interactions. Cantarella and Cascetta (1995) pointed out that dynamic control strategies cannot be effectively modeled using the steady state equilibrium approach. A day-to-day model can capture within-day dynamics and a more general approach to demand assignment (Cantarella, 2013; Watling and Cantarella, 2013; Guo et al., 2015). Because of the intricate dependencies posed by the FTS as defined, a steady state model would not be able to model the sensitivities attributed to within-day dynamic operating policies as desired. We turn to day-to-day models.

19

2.3.

User Equilibrium from a Day-to-Day Adjustment Process

Day-to-day models have been studied for several decades because of several useful properties. First, they are effective in describing network states that reflect empirical observations (Mahmassani, 1990; Chen and Mahmassani, 2004). Second, they can be used to explain the relationship of the state with traveler behavior (Horowitz, 1984; Mahmassani and Chang, 1986; Mahmassani, 1990; Cantarella and Cascetta, 1995). Smith (1984) introduced the use of a Lyapunov function--a mapping of path flows defined to monotonically reduce the path costs every iteration--to prove convergence of dynamic adjustment processes to a non-empty set of equilibria as long as the cost-flow function is monotone and smooth. Studies have also shown that state stability can depend on the particular definition of the state (Heydecker, 1986; Smith and Wisten, 1995; Zhang et al., 2001), the stability of the state (Smith, 1979; Heydecker, 1986; Cascetta and Cantarella, 1991), and separability of link costs (Watling and Hazelton, 2003). As a result of these powerful properties, a number of variations of the model framework have been proposed. Cascetta and Cantarella (1991) represented the day-to-day process with departure time choice (doubly dynamic) as a Markov chain stochastic process, and showed that a fixed point in terms of link flow stability can be achieved if travelers have limited memory, choice probabilities are timehomogeneous, and there is at least one path from every state to every other state. Friesz et al. (1993) proposed a variational inequality formulation for the dynamic user equilibrium of the route and departure time choice problem, and proved existence when link delay operators are continuous functions. Friesz et al. (1994) sought to describe the adjustment process under information provision using an economic "tatonnement" concept.

20

In providing a unified theory of dynamic equilibria in transportation networks, Cantarella and Cascetta (1995) showed that a deterministic process always has at least one fixed point. Friesz et al. (1996) further clarified the day-to-day disequilibria with a set of mathematical axioms related to economics and nonlinear control theory, specifically distinguishing fast and slow dynamic processes. Zhang et al. (2001) rigorously proved that a stationary link flow pattern is a necessary and sufficient condition for user equilibrium path flow. Yang and Zhang (2009) summarized five types of deterministic day-to-day adjustment processes and showed that they all belong under a general class of "rational behavior adjustment processes" (RBAPs). Bie and Lo (2010) used the Lyapunov function to investigate the boundaries of the local attraction domains of stable equilibria and found that the boundaries are formed by trajectories toward unstable equilibria. He et al. (2010) and Han and Du (2012) studied link-based day-to-day traffic assignment. Smith et al. (2014) used a mode split model to compare deterministic and stochastic adjustment processes and considered new processes that combined features from the two. Guo et al. (2015) proposed a link-based dynamic system that generalizes over the earlier models. Deterministic processes are known to exhibit separable basins of attraction. Stochastic processes can provide ergodic probability distributions even for examples with non-unique deterministic equilibria, but the set cannot be separated. It has also been shown that Monte Carlo simulation of stochastic processes can reach multiple basins. To date, no day-to-day process has yet been proposed to evaluate FTS dynamic operating policies. There are features of such dynamic policies that hinder the straightforward use of, say, an RBAP. First, the system performance is not fully determined by only the travelers' choices; it also depends on the operating policy adopted by the FTS serving as an additional decision-maker. FTS

21

are inherently dynamically scheduled services, and need to be analyzed with within-day stochastic dynamics. This feature is similar to the provision of information via ITS (Cantarella, 2013) which also requires dynamic decision-making from a third party. Second, the traveler using FTS does not have full control over the route to travel; it is decided by the operating policy of the FTS. In turn, the operating policy depends on the choice sets of the travelers. In traffic networks, the route choice depends solely on the traveler. Third, it has been shown in the literature (e.g. Morlok, 1979) that demand responsive public transit cost function can be non-monotonic with respect to flow. The link costs in an FTS are dependent on the operating policy and may be non-monotonic or follow discrete step functions. Furthermore, like the fixed route transit service, an FTS may result in non-separable link costs. The combination of these points--multiple basins of attraction due to Stackelberg game, heterogeneity of travelers, and stochastic dynamic filtering of traveler choice sets to realized vehicle routes--suggest the RBAP does not apply to the FTS setting. We consider an agent-based framework for the day-to-day process instead. It should again be kept in mind that the reason we need a day-to-day model is not so much to evaluate the disequilibrium, but because a steady state model would not be able to model dynamic operator policies like dynamic dispatch, different idle vehicle repositioning/rebalancing, etc.

2.4.

Agent Based Modelling

As mentioned in Section 2.3 the performance of the FTS depends on the travelers' choices as well as FTS policy. Therefore in order to capture day to day adjustment process of each traveler, and their individual attributes, interaction between travelers and the effect on system performance an
22

agent-based approach is employed in this study. Agents interact with each other in a virtual environment where one agent's choice affects another agent's choice and ultimately the whole environment. The collective behavior of agents is called swarm intelligence. Agent-based modeling has a long history dating back to von Neumann's (1996) work on self-reproducing automat. As pointed out by Bonnel (1995) and Kim et al (2009) by employing agent-based model it is possible to use different constraints for each individual independently, so their travel decisions would be more realistic. In addition agent-based approach can model heterogeneity of travelers by taking into account different attributes of individuals. An agent-based model is made up of three components:    The agents, The agents' environment The rules defining how agents interact with one another and with their environment.

The agents in a multi-agent system (M.A.S) have several important characteristics (Wooldridge, 2002):    Autonomy: the agents are at least partially independent, self-aware, autonomous Local views: no agent has a full global view of the system, or the system is too complex for an agent to make practical use of such knowledge Decentralization: there is no designated controlling agent (or the system is effectively reduced to a monolithic system)(Liviu and Luke, 2005)

Agents interact with each other in a virtual network where one Agent's choice affects another Agent's choice and ultimately the whole network. For example imagine that there is only one taxi available and there are two Agent 1s that would like to use taxi (let's call them Agent1 (1) and Agent1 (2), and the rule is that they cannot share a taxi. As a result one of the agents has to wait while the other one is being served which will result in the second agent being late at its destination
23

(Agent1 (2)). The next day, Agent1 (2) having arrived late at its destination the previous day it will adjust its departure time to leave earlier than the previous day so it can arrive on time at its destination. However since Agent1 (1) arrived on time the previous day and didn't have to wait it will choose to leave at the same time as previous day but since now Agent1 (2) leaves earlier than the day before, Agent1 (2) will be served first making Agent1 (1) to wait and consequently be late at its destination. At the same time since Agent1 (2) left earlier than the day before it will arrive early at its destination. On the third day both agents having experienced schedule delay (late and early) from previous days they may change their departure time or mode choice. The two agents will keep changing their choices till they achieve minimum disutility and minimum schedule delay and where one cannot improve its choice without making the other's situation worse than before. This collective behavior of agents is called swarm intelligence. In recent years, agent-based modeling techniques have found many applications in transportation, particularly in travel behavior (TRANSIMS, MATSIM) and land-use models (ILUTE (Salvini & Miller (2005)), URBANSIM (Waddell et al., (2003))). There are usually two types of approaches available for an agent-based simulation. One approach uses the household as an agent whereas the other approach uses an individual as an agent. Compared to other modeling techniques, ABM provides a natural description of a system, it captures emergent phenomena, and it is a low cost and time saving approach. More detailed discussions regarding agent-based modeling can be found in Kim (2008), Bazghandi (2012), and Bazzan and Klugl (2013). Nagel and FlÃ¶tterÃ¶d (2012) presented an agent-based perspective of traffic assignment principles. They distinguished between a deterministic user equilibrium (UE) , a stochastic UE, an agent-based deterministic UE, and an agent-based stochastic UE, as shown in Definitions 2 and 3.

24

Definition 2 (Nagel and FlÃ¶tterÃ¶d, 2012). An agent-based UE (user equilibrium) implies individual travelers, additional choice dimensions, and possibly stochastic network loading. It corresponds to the particle UE, where no particle (agent) can unilaterally improve itself. Definition 3 (Nagel and FlÃ¶tterÃ¶d, 2012). An agent-based SUE implies individual travelers, additional choice dimensions, and normally stochastic network loading. It corresponds to the particle SUE, where agents draw from a stationary choice distribution such that the resulting distribution of traffic conditions re-generates that choice distribution. Nagel and FlÃ¶tterÃ¶d (2012) characterized the state conditions required for an agent-based day-today process, but did not propose any specific process for an FTS setting. We address this challenge by designing an agent-based process that converges to an agent-based SUE as defined in Definition 3. The design allows one to embed different stochastic dynamic vehicle routing problems for the operating policy. This new approach fundamentally differs from the deterministic rational behaviour adjustment process (RBAP) , which is an aggregate method that does not consider embedded vehicle routing problems (VRPs).

2.5.

FTS Operating Policy Overview

Since 1970 various vehicle routing policies have been studied for a dial-a--ride-problem (DARP) (Wilson et al., 1976; Jaw et al., 1986; Fu, 2002c; Cordeau and Laporte, 2007), focusing on both static and dynamic problem. What distinguishes, dynamic dial-a-ride problem from the static diala-ride problem is that in dynamic dial-a-ride problem vehicles' routes are modified in real-time in response to trip requests arriving in time. The dynamic dial-a-ride problem usually has two conflicting objectives identified as (a) system efforts and (b) the customer's interests (HyytiÃ¤ et al, 2012). In their study HyytiÃ¤ et al (2012) modeled the non-myopic dynamic DARP as a multi-server queue problem, where the process of modeling vehicle assignment was assumed to be similar to assigning a customer to a server in a multi-server queue. The model is non-myopic in the sense
25

that the decision is not based only upon the current information, but also includes a forecast of future conditions modeled with steady state queue characteristics. A fixed set of v uncapacitated vehicles with constant speed is assumed to provide pickup and delivery service for customers. Each trip request is assigned to a specific vehicle immediately after being requested, and the vehicle's route plan is then updated to include both the pickup location and delivery location in that order, with no request being rejected. In their study, HyytiÃ¤ et al (2012) devised a policy called mm1 that minimizes a weighted sum of the distance the vehicles travel (per passenger) and the mean passengers' travel time as shown in Eq. (1) . mm1: , [(, ) - (,   )] The relative value or cost of vehicle-route pair (, ) as a sum is defined by Eq. (2). (, ) = (, ) + (1 - ) ((, )2 +   (, ))


(1)

(2)

where  is a vehicle,  is a tour obtained for a traveling salesman problem with pickup and delivery (TSPPD),   is the previous tour updated to the time of the current customer arrival,  is the value function,  is the tour length,  is the total delay for customer  (service plus wait time, i.e. time from call in to time they are delivered). Eq. (1) allocates a customer to a vehicle  such that the added cost to their current operations is minimized compared to dispatching other vehicles.  corresponds to the minimization of the system's effort and can take values between 0 and 1. If  = 0 the algorithm assigns passengers to vehicles in such a way that only minimizes customers' travel costs, where as if  = 1 the algorithm assigns customers to vehicles in such a way that only minimizes operators cost. If  = 0.5 the algorithm takes into account both the travelers' costs and
26

operators' costs.  is used to minimize the mean travel time by anticipating future requests.  = 0 refers to a myopic system whereas  > 0 refers to a non-myopic system. Since this service is shared-use as a dynamic DARP, a customer may be delayed in being dropped off in favor of another customer if it minimizes total cost. In addition to clarify, minimization is used because this is an equation for getting the dispatch policy, not the dispatch policy value. The policy includes allocation of a customer to a vehicle (hence the v is a decision variable), and the tour assigned by the vehicle. This is a DARP with centralized dispatch. Aside from dynamic DARP, dynamic pricing has also been gaining interests among researchers and planners. Sayarshad (2015) in his study introduced a new dynamic dial-a-ride featuring non-myopic pricing based on optimal tolling of queues to fit with the multi-server queueing approximation method.

2.6.

Concepts from Two-Sided Market Literature

Two definitions from the two-sided market literature are needed to address the research questions posed in Section 1.3.2. The first is what constitutes a two-sided market. The second is the criteria for whether a two-sided market is operating in a social optimum, a monopoly, or otherwise. [RT06] gives a detailed explanation of what constitutes a two-sided market or multi-sided platform. It requires the assumption that an end user does not internalize the welfare impact of their use of the platform on other end users, resulting in Definition 4. Definition 4 ([RT06]). Consider a platform charging per-interaction charges  and   to the buyer and seller sides. The market for interactions between the two sides is one-sided if the volume of transactions realized on the platform depends only on the aggregate price level  =  +   . If by contrast volume of transaction varies with  while  is kept constant, the market is said to be two-sided.
27

[RT03] derive the conditions necessary for a monopolistic platform to operate under a profit maximizing setting as well as for a social optimal (Ramsey pricing) setting. Ramsey price is a price set by the platform that aims to maximize total welfare of both buyers and sellers. Let  be a log-concave demand function for the buyers, and   be a log-concave demand function for the sellers, and  and   be the corresponding prices for those users as described earlier, as illustrated in Figure 2.1 The profit function  is shown in Eq. (3).

Buyer Price

Seller Price



    ( )   (  )

Buyer Quantity

Seller Quantity

Figure 2.1. Illustration of a two-sided market.

 = ( +   - ) ( )  (  )

(3)

where  is a transaction cost of using the platform. Under profit maximization, the first order condition of the total profit function leads to Eq. (4).       =     (4)

For the social optimum, the net surplus for each end-user (j) is given by Eq. (5). (  ) =    ()


(5)

28

As stated by [RT06] the Definition 4 implies that in the two sided market the total surplus of the buyer depends on the number of sellers (  =   (  )) and the net surplus of sellers depends on the number of buyers (  =  ( )). Therefore total surplus for buyer (  ) and seller (  ) are defined as shown in Eq. (6) and Eq. (7), respectively.

  =    ( ) =   (  ) ( )   =     (  ) =  ( )  (  ) The social welfare  is defined as shown in Eq. (8).
 

(6) (7)

 =  ( )    () +   (  )   () ,
 

 +   = 

(8)

Letting  = -  (  ) be the elasticity of demand for the buyer and   = -  (  ) be for the seller, first order conditions of Eq. (8) lead to the following characterization of the social optimal two-sided market in Eq. (9) ([RT03]). These terms represent the ratio of elasticities multiplied by the average surpluses per transaction for each market.
 



 



 

    () [   ] = [    () ] ,      
 

 +   = 

(9)

It should be noted that as mentioned in [RT03], Eq. (9) is based on the assumption that there is perfect match between sellers and buyers that each such a pair corresponds to one potential transaction.

29

Examples of two-sided market in everyday life are: credit card companies, game consoles, search engines, recruitment platforms, social mediums, etc.

30

Chapter 3. Problem Definition & Simulation Development
Due to advances in communication technology and social networks, flexible mobility systems such as taxi, carpool and demand responsive transit have gained interests among practitioners and researchers as a solution to address such problems as the "first/last mile problem". However, for a public agency to pick up any of these alternatives and use it as a form of public transit, they first need to evaluate these alternatives and compare their performances. As discussed in the previous two chapters, even though there are an abundant number of models to optimize a flexible transit operating design, at the moment there is no "one" tool to evaluate these systems and compare their performances within an integrated supply-demand context. In Chapter 2 we discussed the challenges of one-size-fits all modeling of equilibrium demand for FTS, in this chapter, in Sections 3.1 & 3.2 , with the aid of two transportation planning examples based on real data from Oakville, Ontario and Manhattan, New York, we first illustrate these challenges, show why we need a onesize-fits all simulation tool to evaluate performance of different designs of FTS, and discuss data requirements and preparation. After that an overview of the simulation tool developed for this dissertation in MATLAB is presented in Section 3.3.

31

3.1.

Transportation Planning Example 1: Oakville, Ontario

3.1.1. Background information

To illustrate the need for a one-size-fits all frame work for FTS, we consider a real last mile transit problem in the town of Oakville, which is a suburban town in southern Ontario, Canada , located in Haltom Region. Town of Oakville, is also part of the Greater Toronto Area (GTA). According to 2011 census 185,250 people reside in the town of Oakville. Figure 3.1 presents Oakville study area within the GTA along with the activity patterns (e.g. dark blue represents work trips) of residents of Oakville who use Go Transit (an inter-regional transit system linking Oakville to Down Town Toronto) out of the Oakville Go station. Figure 3.1 is created using disaggregate household travel survey data from the 2011 Transportation Tomorrow Survey (TTS) (DMG 2014). The scope of this study is residents of the town of Oakville who commute to downtown Toronto for work during morning peak period by taking Go Transit commuter rail out of the Oakville Go Station (in zone 4014 circled in Figure 3.1).

32

Figure 3.1. Oakville station study area within the GTA

Based on 2011 household survey by TTS, of those Commuters who access Oakville Go Station for work trips from Oakville to Toronto, 73% used auto as the access mode, 19% used bus, 1% used taxi, 6% used bike and 1% walked to Oakville Go Station.

33

3.1.2. Problem definition

As can be seen from the access mode statistics given in the previous section, auto is considered a major access mode to Oakville Go Station and because of this high dependency on auto as an access mode to the station, a significant problem facing Go Transit in Oakville is that almost all its parking lots have reached capacity For the purpose of this study, let's "assume" a transit public agency would like to provide commuters better access to Oakville Go Station (last/first mile problem). One way for the public agency to achieve this goal is to provide door-to-Go Station flexible transit service as studied by Alshalalfah and Shalaby, (2012). For the purpose of this study we assume that the "taxi" service serving the commuters is the public flexible transit service providing last/first mile service and that the public agency would like to improve the current available flexible transit service in the following ways:  Improve level of service of current FTS by changing its design and operating policies: o Increase fleet size o Use alternative routing policy o Change fare price

In addition to making changes to the current flexible transit system, the public agency can improve accessibility to Go Transit Station by providing higher frequency local transit. However, the public agency does not have the luxury of investing in all these changes, as such, before picking up any of the above mentioned alternatives, they first need to evaluate these alternatives and compare their performances in an integrated supply-demand context in terms of demand and their impacted welfare. Basically what the public agency needs to know is that for example, if the fleet size of
34

flexible transit service is increased, will there be a significant shift from other modes especially auto to flexible transit and how much will it impact the total welfare of the commuters. The following questions for this case study will be answered in Section 4.4 : 1. Effects of different fleet sizes on equilibrium consumer surplus, 2. Effect of different routing strategies on equilibrium demand and consumer surplus, 3. Effect of changes in LOS of other modes on equilibrium demand and consumer surplus for FTS

To evaluate the performance of different designs and operating policy of FTS and answer the above questions, the public agency would require a tool to evaluate equilibrium demand for particular design of flexible transit service, and measure the effect of design decisions of FTS on demand and their impacted welfare within an integrated supply-demand context. As discussed earlier, tools exist for evaluating demand for fixed schedule transit service, but because flexible transit is inherently different from general transportation systems, there are currently no adequate tools to address that issue. The public agency would require a new framework to evaluate different designs of FTS that meets the following criteria:      Capture heterogeneity of travellers Capture interaction between travellers Capture impact of operation policy on travellers' choice Capture impact of travellers' choice on FTS level of service Capture day-to-day learning process of both travellers and FTS drivers (two-sided market)

To meet the above mentioned requirements, an agent-based model under FTS setting is proposed in this thesis for one and two-sided flexible transport service. In the next section we will discuss data requirements and preparation for Oakville case study to be used with the proposed model. The overview of the agent-based transportation simulation tool developed in MATLAB for
35

this case study is presented in Section 3.3 . We provide the methodology for the proposed agentbased day-to-day adjustment models implemented in the simulator in Chapters 4 & 5. The answers to the case study questions posed earlier will be provided in Section 4.4.

3.1.3. Data requirements & collection

In Section 2.4 we showed that an agent-based model is made up of three components:    The agents, The agents' environment The rules defining how agents interact with one another and with their environment.

In this case study there are two agents : one, residents of Oakville who commute to downtown Toronto daily for work by taking Go Transit out of the Oakville Got station and two, taxi vehicles (drivers). The agents' environment is the road/transit network of town of Oakville, Ontario and the rules defining the interaction between the commuters and taxi vehicles(drivers) are operating policies of the flexible transit service available in Oakville (taxi system in Oakville). 3.1.3.1. Commuter agents

To capture heterogeneity of the commuters, they are defined by their individual origin, destination, desired departure time and their socio-economic characteristics. The demand and commuter characteristics for the base case scenario are extracted from TTS 2011 household travel survey. During the study period (6:30-7:30), 2000 commuters access Oakville Go Station for work trips from Oakville to Toronto. The reason for selecting this study period is that due to large demand for parking at Oakville Go station, the majority of parking spaces are usually full before 7:00am

36

(Alshalalfah and Shalaby, 2012). Selection of only one hour peak hour period is due to the limited computational power of MATLAB, in the future studies similar to Alshalalfah and Shalaby (2012) longer study period should be considered. It is worth mentioning that even though one hour period is considered in this study, it will not affect the results since the purpose of this study is to do sensitivity analysis and to show proof of concept. The five access modes that are considered by the commuters are: bus, automobile, walk, fixed route transit and DRT (the modes listed in TTS). According to the survey data, only 17 people used taxi. In typical transportation planning problems in practice, the existing condition is assumed to be in equilibrium, which is how the networks and demand get calibrated. In our study, since we are also looking at a transportation planning example where a public agency is taking existing data and trying to assess "what-if" situations, we make the assumption of surveyed system being at equilibrium. Table 3.1 presents sample itinerary and socio-economic characteristics of Oakville commuters obtained from TTS 2011 survey for the "Base Case Scenario". It should be noted that original data obtained from TTS 2011 contains additional socio-economic characteristics of the commuters, however only the ones based on the "best estimated" logit model are given in Table 3.1. More information on that will be given in Section 4.4.3.

Table 3.1: Sample "Base Case Scenario" Oakville commuters' itinerary & socio-economic characteristics Person n
1 377 474 883 1392

departure time
6:30:00 AM 6:35:00 AM 6:40:00 AM 7:00:00 AM 7:00:00 AM

origin _TAZ
4040 4015 4007 4011 4038

destination _TAZ
4014 4014 4014 4014 4014

driver _lic
1 1 1 1 1

n_vehicle_ava ilable
1 2 2 2 2

n_licence holders
2 3 2 3 2

Go Station access mode
Transit Bike Auto Taxi Walk

37

3.1.3.2.

Vehicle (driver) agents

Vehicle (driver) agents' itinerary is defined based on commuter agents' requests. A sample vehicle agent itinerary for Oakville case study under "Base Case Scenario" is given in Section 4.4.2 . Vehicle (driver) agents can also be defined by their personal attributes. For example in the case of two-sided flexible transport market, driver agents are also decision makers and their aim is to maximize profit based on their profit threshold. In this dissertation only the profit threshold attribute of driver agents is considered. The data obtained for Oakville case study as is does not provide threshold profit for each driver, as a result arbitrary values are tested in this study. More information is provided in Chapter 5. 3.1.3.3. Agents' environment

In this study the agents' environment is the road/transit network of town of Oakville, Ontario. Figure 3.2 presents town of Oakville's road/transit network in simulation platform developed in MATLAB (more information on the simulation platform will be provided in Section 3.3). The network contains 57 OD demand zones, and the corresponding zonal scheme is extracted from TTS. The network characteristic data and layout are obtained from DMTI Spatial Inc (through Scholars Geoportal) and fixed route transit stop schedule information is from Oakville Transit. As stated earlier, looking at Figure 3.2 it can be seen that even though there are several transit lines serving Oakville Go Station (green lines in), they do not cover majority of residential areas in Oakville. It should be noted that for this case the study effect of congestion on travel time is ignored (since the focus is more on day-to-day dynamics as opposed to within day dynamics), therefore free flow speed and free flow travel times are considered. Future studies should consider the congestion effect.

38

Figure 3.2. Oakville network in proprietary simulator in MATLAB

3.1.3.4.

The rules defining how agents interact with one another and with their environment

The rules defining how agents interact with one another and with their environment is set by the operating policies (e.g. dispatch/routing algorithm, fare pricing) and system designs (e.g. fleet sizing, ride sharing) of the flexible transit service. For Oakville study, two dispatch/routing policies are considered, namely: greedy algorithm (as shown in Section 4.4.2) and dynamic DARP (as shown in Section 2.5). For the base case scenario under equilibrium sate a fleet size of 10 is considered. For the purpose of this study FTS providing only single-rides is considered.

39

The data obtained from TTS 2011 does not include taxi fare price, therefore for one-sided flexible transit market sensitivity analysis presented in Section 4.4 taxi fare price is set to 0. However, for two-sided flexible transit market sensitivity analysis presented in Section 5.4 fare price is calculated using Oakville taxi fare price guidelines, which charges commuters $4.25 for first 130m traveled and $0.25 per additional 130m thereafter.

3.2.

Transportation Planning Example 2: Manhattan, New York

3.2.1. Background information

For the first transportation planning example a first/last mile problem (many-to-one) is considered using real data from Oakville, Ontario. In this second example we look at a ride-sharing problem (many-to-many) using real data from Manhattan which is the most densely populated borough of New York City. According to 2015 census 1, 644, 518 people reside in Manhattan. The scope of this study is on residents of Manhattan who commute from home to work (H-W trips) during morning peak period (6:00am-10:00am) whose origins and destinations both are located in Manhattan. Figure 3.3 presents morning peak period home-work trips made by all available modes (as shown in Table 3.2) for only those individuals having both their origin (yellow as shown in Figure 3.3) and destination (magenta as shown in Figure 3.3) located in Manhattan. Data for Figure 3.3 and Table 3.2 are obtained from New York 2010/2011 Regional Household Travel Survey (RHTS).

40

Table 3.2: Manhattan study -Modes used for H-W trips during AM Peak Period

Paratransit Service (Access-a-ride, Dial-a-ride, etc) For-Hire Van/Jitney/Gypsy Cab Taxi (yellow, Medallion Cab) Railroad (LIRR, Metro North, NJ Transit, AMTRAK) Express Bus Roosevelt Island Tram Bike Walk

Subway (NYTCT, Staten Island Railway) Charter Bus (employer-provided or Other contracted) Shuttle Bus (Public or Employer provided) Local Bus (regular, Standard, City) Auto (Car or Small Truck) passenger Motorcycle Auto driver

Figure 3.3. Manhattan Network- H-W morning peak period trips made by all modes

41

Figure 3.4 presents morning peak period home-work trips made only by taxi only for those individuals having both their origin and destination located in Manhattan. In Figure 3.4, green dots represent pick up locations and red dots represent drop off locations.

Figure 3.4. Manhattan Network- H-W morning peak period trips made by taxi only

One thing that is worth mentioning is that both Figure 3.3 and Figure 3.4 are based on sample size of 592 people (unexpanded data from NY2010/2011 survey). The reason for not using expanded population is threefold: one, the expansion factors for the survey were not available to us; two, we are doing a sensitivity analysis as such it is not required to consider the entire
42

population; three, the computational limitation of MATLAB does not allow us to simulate large sample population. Future studies should look at entire population using expansion factor. The implication of this simplification is that the results obtained can only be used as proof of concepts and sensitivity analysis and cannot be used to draw conclusions about the network or operation policies.

3.2.2. Problem definition

As can be seen from Figure 3.3 origins are spread out all through Manhattan but destinations are highly concentrated in Midtown and Lower Manhattan. Similarly, looking at Figure 3.4 it can also be seen that taxi pickup locations are concentrated in both Upper West Side and Upper East Side whereas taxi drop off locations are concentrated in Midtown Manhattan. The high

concentration of destinations/drop offs in Midtown Manhattan, high taxi price and the fact that Manhattan is an overly populated borough, are the motivation for ride-sharing in this transportation planning example. For the purpose of this study we assume that the taxi service serving the commuters is actually a public flexible transit service providing many-to-many service. In this study we assume that a public agency is looking at changing the current design of flexible transit service from singleride to share ride. Similar to the Oakville case study, before the assumed public agency can implement the new alternative, they need to evaluate the performance of it to the base case scenario in terms of equilibrium demand and their impacted welfare. Tools exist that allow policy makers to compare the level of service of single-ride service with a ride-sharing service in terms of wait time and number of customers served, however these tools/models assume fixed demand, where
43

as in this study we are interested to know whether changing the FTS design from single-ride to shared-ride will result in shifts from other modes to taxi or not, and what would be the total change in total consumer surplus. As such we need to look at day-to-day adjustment process of the travelers and their interactions with each other and the FTS. Therefore, similar to Oakville study, to answer these questions there is a need for one-size-fits all frame work to evaluate different designs of FTS within an integrated supply-demand context. Section 4.5 provides answers to the above questions by using the agent-based day-to-day process for one-side flexible market proposed in this dissertation.

3.2.3. Data requirements and collection
3.2.3.1. Commuter agents

The scope of this study as mentioned earlier is on the residents of Manhattan who commute to work during AM peak period who have both their origin and destination located in Manhattan. The commuters' origin, destination, departure time choice and mode choice, for this study are extracted from NY2010/2011 household survey data. As shown in Table 3.2 commuters can use 15 different modes to reach their destinations. However, it is not easy to model all 15 modes in our proprietary simulator in MATLAB, as a result for the purpose of this study we only model taxi since only the level of service of taxi changes from one day to another. Other modes are considered as a generic mode other than taxi, hence there are two modes in the simulator: mode 1 (taxi), mode 2 (generic mode representing all other modes). Moreover, unlike TTS survey, the NY2010/2011 does not provide actual departure time of the commuters, instead it provides departure time range (e.g. 6:00am-10:00am), and consequently before we can use the data as input to our agent-based
44

simulation tool we need to obtain actual departure times. Obtaining actual departure times for commuters is done in two steps as discussed below: Step1: In step one current departure time range (2hr period) is converted to 30min range. To do this the demand data obtained from NY2010/2011 is fitted to the work trip departure time distribution from American Community Survey 2011. Figure 3.5 shows travel departure time distribution based on the data collected by ACS2011 as shown in AASHTO 2013 Commuting in America report. However, for this study we are only interested in the departure time distribution for the morning peak period, therefore Figure 3.5 is redrawn in Figure 3.6 for AM peak period.

Figure 3.5. Distribution of workers by trip departure times (source: ACS2011/AASHTO 2013)

45

Distribution of Workers Departure Time for Morning Peak Period
25.00 21.39 20.00 14.31 12.57 9.10 18.50 16.18 15.00

10.00

7.95

5.00

0.00 6:00-6:29 6:30-6:59 7:00-7:29 7:30-7:59 8:00-8:29 8:30-8:59 9:00-9:59

Figure 3.6. Distribution of workers by trip departure times Â­morning peak period (6:00am-10:00am)

Table 3.3 presents data used to draw Figure 3.6 .

Table 3.3: Distribution of workers by trip departure times Â­morning peak period (6:00am-10:00am)

Morning Peak H-W Departure Range 6:00-6:29 6:30-6:59 7:00-7:29 7:30-7:59 8:00-8:29 8:30-8:59 9:00-9:59 Total

% over entire day (from ACS2011) 8.70 9.90 14.80 12.80 11.20 5.50 6.30 69.20

% over morning peak range (out of 69.2) 12.57 14.31 21.39 18.50 16.18 7.95 9.10 100.00

46

Departure time (AM peak period) percentages from Table 3.3 are used to obtain 30min departure time range for demand data obtained from NY2010/2011 survey. Table 3.4 shows work trip departure time range (30min) for the demand obtained from NY2010/2011 based on ACS work trips departure time distribution.

Table 3.4: Manhattan commuters- NY2010/2011 survey-H-W trips-AM peak period-departure time range

Morning Peak H-W Departure Range 6:00-6:29 6:30-6:59 7:00-7:29 7:30-7:59 8:00-8:29 8:30-8:59 9:00-9:59 Total

% over morning peak range (out of 69.2) 12.57 14.31 21.39 18.50 16.18 7.95 9.10 100.00

# of surveyed individual corresponding to specific range 74.00 85.00 127.00 110.00 96.00 47.00 53.00 592.00

Table 3.4 is used to assign new departure time range (30min period) to the 592 individuals in the sample data obtained from NY2010/2011 survey as follows: 1. Using uniform distribution a random number between 0 and 1 is assigned to each individual in the sample 2. Sample is sorted based on the assigned random numbers 3. The first 74 people in the sample are assigned the departure range of 6:00-6:29, the second 85 people are assigned departure time of 6:30-6:59, and so on.

47

Step 2. In Step 1, the departure time range for each individual is modified from 2hr period to 30min period. In this step we convert departure time range to actual departure time as follows. 1. For simplicity each departure time range (30min period) is divided into 5min increments (e.g. 6:00, 6:05, 6:10, etc.). 2. It is assumed that each individual has the equal chance of departing at any time during their departure time range, therefore using uniform distribution a departure time is assigned to each individual. (e.g. An individual with departure range 6:006:29, has equal chance of leaving at 6:05, or 6:10, etc. , randomly we assign it to 6:05). Table 3.5 shows departure time conversion for person 1.

Table 3.5: Sample departure time range to departure time conversion Person n 1 Original departure time range 6:00-10:00 New Departure Time-range 6:00-6:29 Actual Departure Time 06:20:00 Mode used Subway

Rand

OTAZ

DTAZ

Choice Generic mode

0.00176

172.00

147.00

It is worth mentioning that since this is a sensitivity analysis study assuming uniform distribution for departure time assignment is acceptable, however for actual transportation planning studies more suitable distribution should be selected. In addition, since departure times are randomly selected, in future study more than one sample population should be considered.

48

3.2.3.2.

Vehicle (driver) agents

In this case study vehicle (driver) agents are not decisions maker and their itinerary is defined based on taxi requests of commuter agents.

3.2.3.3.

Agents' environment

In this study the agents' environment is the road network of Manhattan, NY. Figure 3.7 Presents Manhattan's road network in the simulation platform developed in MATLAB. The network contains 317 OD demand zones, and the corresponding zonal scheme is obtained from the New York Metropolitan Transportation Council (NYMTC). The network characteristics data and layout are obtained from NYS GIS Clearninghouse.

49

Figure 3.7. Manhattan network in proprietary simulator in MATLAB

Unlike the Oakville example, in this example the effect of congestion is considered. However since it is cumbersome to actually model traffic in the current simulator, congested OD travel times are estimated using New York Taxi and Limousine Commission (NY TLC) 2010-2011 data. NY TLC logs the GPS data for every taxi trip made which includes pickup/drop-off locations, pickup/dropoff times. The collected data is made available to researchers as an open data source. Since pickup/drop-off travel time are available, then it is possible to estimate the in-vehicle travel times. This in-vehicle travel time is based on actual travel time in real network, therefore it captures traffic conditions in the network.

50

For this study data from the month of September 2010 (Yellow taxi only) is used. The NY taxi data for September 2010 alone contains over a millions observations , as a result for the purpose of this study we only extract morning peak period trips originating and ending in Manhattan and taking place during weak day. From that we used sample of 300,000 trips. Following steps are conducted to obtain interzonal travel times for Manhattan network.

For each individual observation: 1. Euclidean distance (future studies should look at using Manhattan distance) between pickup location and drop of location is calculated using the longitude and latitude coordinates of pickup/drop off locations; 2. Speed between pickup location and drop of location is calculated using Euclidean distance and the in-vehicle travel time from NY Yellow Taxi Data; 3. Pickup locations and drop off locations are matched to the nearest traffic analysis zone (TAZ). Figure 3.8 provides sample speeds for TAZ 1 to TAZ 3 estimated using data from NY Yellow Taxi data.

Speed(miles/hr) distribution from TAZ 1 to TAZ 3
25.00 20.00

Speed (miles/hr)

15.00 10.00 5.00 0.00 06:00:00 06:28:48 06:57:36 07:26:24 07:55:12 08:24:00 08:52:48 09:21:36 09:50:24 10:19:12

Time

Figure 3.8. Sample speeds (mile/hr) going from TAZ1 to TAZ 3 during AM peak period using NY TLC Yellow Taxi Data

51

It should be noted that even though observations spread over the morning peak period they are not all from the same day. For example one observation can be from Monday at 8:00am and another observation can be from Tuesday of next week at 9:00am. Therefore the difference in speeds is not only due to congestion during different time slots, it is also due to data being collected on different days. To overcome this obstacle we use the average interzonal speed by taking average over the observed speeds. For example average speed from TAZ1 to TAZ 3 is 10 miles/hr. This average speed is used as input to the simulator for vehicles traveling from TAZ1 to TAZ3 as opposed to using free flow speed. This way we are able to capture effect of congestion in our simulator.

3.2.3.4.

The rules defining how agents interact with one another and with their environment

Similar to the Oakville case study, the rules defining how agents interact with one another and with their environment is set by the operating policies (e.g. dispatch/routing algorithm, fare pricing) and system designs (e.g. fleet sizing, ride sharing) of the flexible transit service. For the Manhattan study dynamic DARP (as shown in Section 2.5) is considered. For the base case scenario under equilibrium sate a fleet size of 10 is considered. The data obtained from NY survey does not include taxi fare price, however for this study fare price is calculated using NY TLC fare price guidelines, which includes fixed cost of $2.25 and $0.50 per additional 1/5mile thereafter.

52

3.3.

Agent-Based Transportation Simulation Tool in MATLAB

For the purpose of this study an agent-based continuous time transportation simulation tool is developed in MATLAB to evaluate the impact of different designs and operation policies of FTS on demand and their impacted welfare within an integrated supply-demand context. The developed simulation tool is based on the proposed agent-based day-to-day adjustment process models under FTS setting that will be presented in Chapters 4 & 5. Figure 3.9 presents the general agent-based transport simulation framework for evaluation of dynamic FTS policies; more detailed framework for the day-to-day adjustment will be presented in Chapters 4 and 5.

Figure 3.9. Agent-based transportation simulation tool framework

53

As can be seen from Figure 3.9 the framework consists of an overall agent-based day-to-day simulation environment and a microsimulation sub-module. The three main components in the agent-based simulation environment are:    the agents, the agents' interaction environment (network microsimulation module) and the rules governing agents interactions with each other and the environment.

In addition to the main components, there are also two assistant managers, namely: loading managers and feedback manager. In this study as shown in Figure 3.9 there are two types of agents, namely: commuter agents and FTS vehicle (driver) agents. Each agent has its own objective to achieve, therefore on each day it makes choices to reach its goal. Once individual commuter agents make their choices, these choices are communicated dynamically to the network microsimulation module by the commuter loading manager. The choices of FTS agents are also communicated to the network microsimulation module using FTS loading manager. Then the microsimulation model handles the dynamic interactions between the two agents based on the set of governing rules (FTS policies). Next, agents' memory is updated using feedback manager and learning model. This process is continued for days till the stopping criteria is met. More information on commuter and driver agents, their strategy set, their day-to-day adjustment process, their interactions and stopping criteria is provided in Chapters 4 & 5.

3.3.1. Input information required by the agent-based simulator

Following information/input data is required to model the key components of the simulator:
54

Commuter agents   Socio-economic characteristics (obtained from household transport survey data) Itinerary : origin, destination, desired pick up time, mode choice set (obtained from household transport survey data)

Vehicle (driver) agents  Profit threshold

Agents' environment  Network characteristics and layout (GIS shapefiles) o Links o Nodes o Free flow speeds o Transit stops schedule o Traffic analysis zones/centroids o OD free flow travel time

Rules governing interaction among agents and with their environment  FTS operating policy o Fare price o Fleet size o Vehicle routing algorithm

3.3.2. Network microsimulation module

Once the commuter loading manager communicates choices of the individual commuters to the network microsimulation module, commuters are sorted in chronological order based on their desired departure time from their origin and loaded into the network dynamically. Since the focus of this study is on day-to-day dynamics a simple within day microsimulation model is used to capture the within day interactions among and between agents. Moreover, since the focus of this
55

study is on FTS, only movements of FTS vehicles, FTS passengers and their interactions are simulated in the simulator. Following simplifications are made in this study for commuters who choose alternative travel mode: Auto trips:  Effect of congestion is ignored, therefore those commuter agents who choose to travel with auto, will experience instantaneous time-independent shortest path travel time (free
 flow travel time ( ) between their origin and destination.



No route choice is considered.

Transit trips:  Since the focus of this study is on FTS as opposed to fixed route transit, the latter is modeled as follows:  Transit stops are used to obtain access/egress walk time ( ,  )   Transit schedule is used to obtain wait time ( ) Instantaneous time of day-independent shortest path travel time is used to
 obtain in-vehicle travel time ( )



Closest transit line to the origin is chosen

56

3.3.2.1.

FTS Simulation

Flexible transit drivers as mentioned previously are modeled in the simulation as FTS vehicle agents and represented by vi. Each vehicle agent vi at each simulation time j is defined by its x positon (vi.xj) and y positon in the network (vi.yj). Vehicle agent's speed depends on the free flow speed of each link on the network. The status of each vehicle agent at each simulation time j is defined as vi.sj=1 if busy and vi.sj=0 if free. When a call for taxi is made by a commuter agent, centralized dispatching will assign commuters to FTS vehicles based on pre-defined vehicle routing algorithm. Each vehicle follows centralized routing policy and based on that it updates its path (list of nodes to visit) and its itinerary (passenger pick up, drop locations, pick up time, drop of time, etc.). More information on stochastic dynamic loading and FTS simulation is provided in Section 4.1.4 and Section 4.4.2.

3.3.2.2.

Pseudo code for within day microsimulation model

The following describes the microsimulation model capturing the interaction between and among agents. On each day   , the time of day is divided into  simulation time steps. Commuters are sorted in chronological order based on their desired departure time from their origin. Day  ends when all commuter agents arrive at their destinations (arrived=1).

57

Initialize j=1 Initialize arrived=0 While arrived =0 For c=1: total number of commuter agents If commuter (c) departs at time step j If commuter (c) chosen mode is auto  commuter (c) experienced travel time =   commuter (c) expected arrival time at destination = j +  Else if commuter (c) chosen mode is transit commuter (c) experienced travel time =  +  +   +  commuter (c) expected arrival time at destination = j +   +  +  +  Else if commuter (c) chosen mode is FTS FTS dispatcher assigns commuter (c) to vehicle (v) based on predefined routing policy Vehicle (v) itinerary and path node list are updated For v=1: total number of vehicle agents If vehicle (v) is active check to see if it has arrived at the drop of location of any of its onboard passengers or pick up location of its future customer If at the pickup location of commuter (c) commuter (c) pick up time = j commuter (c) experienced wait time = j Â­ desired departure time If at drop of location of commuter (c) commuter (c) arrival time = j commuter (c) experienced in-vehicle travel time = j Â­ pick up time Advance vehicle (v) forward in the road network, (vi.xj), and (vi.yj) are updated. If all commuters have arrived at their destinations arrived=1; Else j=j+1 ______________________________________________________________________________

58

3.3.3. Agent-based transportation simulation outputs

Following output information is provided by the developed agent-based simulator in MATLAB:

Commuter agent  Mode choice and consumer surplus at equilibrium

Vehicle (driver) agent  Profit at equilibrium

Network wide   Total consumer surplus FTS fleet size, wait time at equilibrium

59

Chapter 4. Agent-Based Day-to-Day Adjustment Process for Evaluating One-Sided Flexible Transportation Markets
In the previous three chapters we discussed the need for equilibrium modeling for FTS, presented challenges associated with it and explored current gap in literature. In this chapter, we propose an agent-based day-to-day adjustment process to evaluate impacts of FTS alternative on the behavior of travelers and answer the research questions posed in Section 1.3.1. We do this in two steps. First, in Section 4.1 we show how the FTS policies are integrated into the model leading to the agent-based SUE (adapted from Djavadian & Chow, 2016). Second, we numerically illustrate the impacts on traveler choices, as shown in Sections 4.2 & 4.3 . Lastly, in Sections 4.4 & 4.5 we apply the proposed model to the two transportation planning examples (Oakville network & Manhattan network) discussed in Sections 3.1 & 3.2 .

4.1.

Methodology

We consider a day-to-day process designed to reach an agent-based SUE. We propose using two types of agents, commuters (Agent1) and taxi drivers (Agent2), where Agent1 unobservable characteristics are simulated via Monte Carlo and Agent2 characteristics are assumed fixed and known (in Chapter 5, characteristics of drivers (Agent2) will be also considered). Inclusion of

60

Agent2 (FTS drivers) allows us to embed dynamic vehicle routing operations into the within-day dynamics. Agent 1 has predefined origin, destination and hard set desired arrival time at destination. Agent 2's itinerary is defined by Agent 1's requests. Agent2 serves Agent 1 based on predefined routing algorithm. Agent 1's mission is to arrive at its destination on time and minimize its schedule delay, in order to achieve its objective Agent1 has to make two choices: 1. Choose a mode with maximum utility (The modes modeled in the simulation are: walk, bike, drive, fixed route transit and flexible transit. 2. Choose a departure time that will minimize its schedule delay.

The following additional notation is used: : sample of Monte Carlo synthesized populations; : fleet of vehicles from FTS;  (  ,  ): subgraph for the FTS network; , : utility of unobservable traits for agent  in population   ;  : path of vehicle   ;  : arrival time vector of vehicle   ;  : cost on link    , which may depend on flows   . Individuals' unobservable traits are simulated for the population, after which a deterministic day-to-day adjustment process is executed to reach the agent-based SUE. In the case where demand is activity-based (e.g. HAPP (Recker, 1995; Chow and Djavadian, 2015) or MATSim (Maciejewski and Nagel, 2013)), schedule choice can also be considered. The process is shown in Figure 4.1. For comparative purpose, we show a conventional RBAP in Figure 4.1 (a) and the proposed framework in Figure 4.1 (b).

61

Population

DYNAMIC EQUILIBRIUM

System Characteristics RBAP

Update strategy 1+

User Paths

 

Costs  Advance to next day If stable state reached

(a)
Monte Carlo synthesis of  populations AGENT-BASED STOCHASTIC USER EQUILIBRIUM Aggregate for  populations Population    characteristics DYNAMIC EQUILIBRIUM System Characteristics with FTS

Agent 1 traits 1,

Update strategy 1  Path Choice Sets FTS operating policy 

...
Agent  traits , Update strategy 

Initialize FTS fleet

Stochastic dynamic loading  User Paths   , FTS Vehicle Paths  , Costs 

Advance to next day

If stable state reached

(b)
Figure 4.1. Key components of (a) regular RBAP and (b) proposed agent-based model under FTS setting.

62

The stochastic component of the agent-based SUE is simulated via Monte Carlo to obtain a set  of different populations. For each population, a deterministic day-to-day process is run to get to an averaged state. The collection of || state averages forms a distribution of the agent-based SUE. The following Proposition 1 is made. Proposition 1. The agent-based day-to-day process in Figure 4.1(b) converges almost surely to the agent-based SUE.

Proof. By construction, one needs to show that the day-to-day process in Figure 4.1 indeed converges to the true SUE for a known example. This proof relies on taking the basic structure of our agent based day-to-day process and applying it to a standard traffic assignment network in Figure 4.2 where the SUE is known. Consider a 2-node, 2 link network shown in Figure 4.2 with the demand of 40 travelers going from A to B.

Link 1

A

B

Link 2
Figure 4.2. 2-link example to proof proposition 1

Let: 1 = 6 + 0.21 , and 2 = 12 + 0.12 , Where: 1 + 2 = 40. Assuming a logit-based choice model with  = -0.2 , the utility functions for link 1 and link 2 are: 1 = -0.2  1 + 1 , and 2 = -0.2  2 + 2

63

Therefore, the probability of choosing link 1 is: (1) = 1+ -0.2(2-1 ),
1

Using Methods of Successive Averages (MSA), the SUE for the aggregate homogenous population is at the fixed point: 1 = 24.935, 2 = 15.065, 1 = 10.987, 2 = 13.507. Based on the results obtained from SUE, the aggregate homogenous utilities () for link 1 and link 2 are: 1 = -2.197 + 1 and 2 = -2.701 + + 2 The day-to-day process for disaggregate heterogeneous population is shown to approach the same split as aggregate SUE by reproducing its structure here. 1. Simulate  for 1000 populations of 40 individuals, such that 25 individuals would have -2.197 + 1 > -2.701 + 2 (which is the criterion for selecting link 1 under SUE) and 15 have -2.197 + 1 < -2.701 + 2 for all 1000 populations; 2. For each population, run a deterministic day-to-day adjustment process based on MSA for the simulated population as follows: a. initiate with free-flow travel times 1,0 = 6, 2,0 = 12, b. then on day  for each individual , proportion selecting link 1 is , (1) = ,-1 (1) ,-1 (1)
(-1)  (-1) 

+  if -0.21, + 1 > -0.22, + +2 , else

1

, (1) =

;

After running this for the 1000 generated populations with MSA stopping tolerance of 0.00001, the distribution of flow on link 1, 1 , has a mean of 25.00, and standard deviation of 0.0082.


In the proposed process, there are two sets of agents: commuters (Agent1) and operators (Agent2). Inclusion of Agent2 allows us to embed dynamic vehicle routing operations into the within-day dynamics. The components of our specific design of this process are described further.

64

4.1.1. Synthesize N "user" agent traits over  populations

Each of the  members of the population is synthesized for the population sample set , resulting in || unique values. Observable traits such as socio-economic characteristics of the travellers are obtained from transportation survey data, while unobservable traits are simulated to fit observed mode choices ( = 1 if user  chose mode , 0 otherwise). As an example, the utility of a mode on a particular day is shown in Eq. (10).

   = ,  + ,  + 

(10)

where  is the expected utility of mode  for user  in population  at the start of day  ;  is the expected total travel cost vector related to mode  that is updated each day  for user  of population  , it includes wait time, in vehicle travel time, schedule delay, and monetary costs such as parking cost and transit fare , mathematical definition is shown by Eq. (10).  is the set of day-to-day static attributes, e.g. socio-economic variables; , , , are the set of parameters corresponding to the attributes;  is the unobservable utility, modeled as a Gumbel distribution. All unobservable variables  are randomly drawn to fit the observed choices from sample data. In the case of multinomial logit (MNL) mode choice, it is drawn from an inverse standard Gumbel distribution (maximum) ( = 0 and  = 1) (Train, 2003). Sampling is repeated until the MNL choice matches the observed choice for each individual. Algorithm 1: Agent trait synthesis while  = 1 and  < max( ) for each :  : = -ln(- ln ),
   = ,  + ,  +  lk

65

where, -ln(- ln ), is the inverse cumulative distribution function of a standard Gumbel distribution, and  is a random variate drawn from the uniform distribution on interval (0,1). Similar methodology was also introduced by Bierlaire and Sharif Azadeh (2016) where their proposed method used for feeding optimization model as opposed to us feeding a deterministic day-to-day equilibrium models.

4.1.2. Initialize FTS fleet for a given population   

For each simulated population, a deterministic day-to-day process is then conducted. In that process, an initial condition for the system needs to be defined. The initial positions of the fleet of vehicles need to be assumed, as well as operating hours, information available to the FTS at the start of the simulation, and the path costs perceived by the users. The conditions also vary depending on the type of FTS, e.g. DRT, flex-route bus, ride-sharing service, vehicle-sharing service, taxi, and microtransit.

4.1.3. Update strategy 

1  Each individual n (agent1) has a strategy set defined by  : = { , . . ,  } where the aim is to

maximize consumer surplus (utility) and minimize schedule delay. This component describes the
 day-to-day adjustment process of the users. Each strategy  consists of two interrelated choices:

1) Choose a mode with maximum utility 2) Conditional on chosen mode, choose a departure time that will minimize schedule delay.

66

Previous studies have combined mode choice, route choice and departure choice together (Zhou et al, (2008) and Small (1982). Those studies assumed homogenous population where everyone has access to all modes and the travel time and schedule delay associated with each mode had significant effect on the chosen mode. Furthermore departure time was discretized to departure intervals as oppose to using continuous departure time. These two assumptions allowed previous studies to combine mode choice with departure time choice. However these two assumptions do not hold for last mile problem mode choice and specifically for flexible transit. For last mile problem it is important to consider heterogeneous population, where not everyone has access to all modes and where other factors affect mode choice rather than just travel time. Furthermore to model flexible transit such as taxi where Agent1 competes for scarce supply the order of Agent1 entering the system and placing request is important therefore in FTS setting, the specific arrival time into the dynamic network loading is crucial for FIFO considerations under capacity. As such, we need to treat departure time as a continuous variable as opposed to discrete time intervals. As a result, Agent1 makes a nested choice: mode is chosen and departure time choice is made conditional on the mode choice.

4.1.3.1.

Mode choice

There are different methods to model an agent's mode choice, to name a few: Random Utility Maximization (McFadden, 1972) and Random Regret Minimization (Chorus et al., 2008). In the proposed process, a multinomial logit model based on Random Utility Maximization is chosen for convenience where  is the expected consumer surplus of individual n from population  on day d as defined by Eq.(11) .

67

 =

1  (  ), 

 = 1

(11)

4.1.3.2.

Departure time choice conditional on mode choice

Once individual n chooses their mode of travel it is possible to determine departure time using expected travel time of chosen mode. Agents are assumed to have desired arrival times (Small, 1982; Hendrickson and Plank, 1984) and their objectives are to minimize late/early schedule delay as shown by Eq. (12). Given individual n has already chosen mode k at day d:
 | +  -  |  

(12)

where  is desired departure time of individual  of population  at day  determined from
 Eq. (12).  is the perceived travel time of individual  of population  for mode  on day 

going from origin  to destination  and updated each day as shown in Section 4.1.3.3.  is desired arrival time of individual n and  is individual  tolerance tolerance for being early or late, in this study  is set to 0. Therefore given  = 0, rearranging Eq.(12) , will result
 in  =  -  . It is worth mentioning that  is constant and does not change

from one population  to another; it is obtained from survey data. 4.1.3.3. Perceived travel time update

  is updated day to day for every traveller n as shown by Eq. (13) which is adapted from

Bogers et al (2007) (which is not restricted to work for only one specific mode) is adopted.
      = (1 - ),,,-1 + ,,,-1 ,,,-1 + (1 - ,,,-1 )    

(13)

68

where , 0    1, is a parameter controlling the degree of learning attributed to experience on the prior day as opposed to learning it from all past experiences. ,,, is a dummy variable; if individual  of population used mode  on interval  then ,,, = 1 , else ,,, = 0 .
 ,,s,-1 is the total travel time (including in-vehicle time and access, wait time and transfer

times were applicable) experienced by user  of population  on mode  on previous day  - 1. Since a user does not experience the level of service of every alternative on each day, they
  may learn from the collective expectations from the population.  is the collective population   s perceived attribute for mode  on day  . The collective average perceived attributes  are

updated each day via MSA, as shown in Eq.(14) . Note that the perception update is based on travel times experienced by those who used that mode only, not for all travelers. This is the same assumption adopted by Ben-Akiva et al. (1991) that there is some mechanism of information sharing between travelers from one day to the next, such as a "Current Media Reports" input.

  

  1 1 =1 ,,,-1  ,,-1 + ( = (1 - )  )      - 1  - 1 

(14)

 . On the first day, the population's initial choice is based only on  Lastly, the generalized cost  from Eq. (10) is updated as shown in Eq.(15) .

 =

 

  +     

(15)

69

 where  is the perceived monetary cost of mode  for individual  of population  on day ,

and  is the value of time. As can be seen, mode choice and departure time choice are connected
 by variable  .

4.1.4. Simulate stochastic dynamic loading

This component describes the supply side simulation of the dynamic operational policy of the FTS. As an agent-based day-to-day process, a wide variety of operating policies can be simulated: flexroute, DRT, ride-sharing, vehicle sharing, or taxis. While the operational policy is designed to accommodate user demand as a stochastic process ( (,  )), purely deterministic services (e.g. reservations the night before) or systems involving information exchange somewhere in between can also be modeled. As a result, different degrees of information flow and stochasticity can be evaluated in terms of their social impact (see de Borger and Fosgerau, 2012); as well as different time window or reservation policies (e.g. Kaspi et al., 2014; Nourinejad and Roorda, 2014); pricing policies (e.g. Furuhata et al., 2014; Chow, 2014; Sayarshad and Chow, 2015); or vehicle routing and scheduling policies (e.g. Quadrifoglio et al., 2008; HyytiÃ¤ et al., 2012; Jung and Jayakrishnan, 2014). The most significant advantage of this methodology is that the social impact of all these policies can be compared on the same platform. Each of the strategies decided by the user agents,  , are sorted into chronological order and simulated as events with corresponding actions by the FTS fleet's operational policy . The outcome of these policies determine locations and times of the fleet of vehicles, resulting in paths  for each vehicle    as shown in Eq. (16) and corresponding arrival times  in Eq. (17) .

70

 = ((),  )

(16)

 = ((),  )

(17)

The   are stochastic variables representing the way information is filtered to the operator. They convert the choice sets (()) into dynamic information. In turn, the policy  converts that information into spatial and temporal decisions for the operator's fleet. The exact filter will vary. For example, a system where people make reservations 24 hours in advance will have a different conversion than a system that is based on mobile reservations made on the spot. The arrival times  translate to experienced levels of service for the travelers, as shown in Eq. (18).  (), is the arrival of FTS vehicle v at the destination  of onboard passenger n of population  on day d associated with the desired departure time  These are then fed back to Eq. (13) and Eq. (14) for updating the next day.

 ,,, =  () - 

(18)

4.1.5. Invariance condition for each population   

As mentioned earlier we are simulating multiple populations, and each population is running a deterministic day-to-day process. The individual population    day to day process may lead to a stable state, or it may lead to oscillation or chaotic patterns. For the SUE, we choose an averaging condition to know when to stop the process (at which point the individual population might not be at a stable state), but when we aggregate up over multiple populations we end up with an invariant
71

distribution. That is our stable state from the view of a stochastic process. The following criterion in Eq. (19) is used to detect when an invariant (stable or oscillatory) condition is satisfactorily reached. ,- -  | ,--1 |  , ,--1 | |
 =1 , 

for 0    2

(19)

where   is the average total consumer surplus of the population  set equal to   = and  is the sum of the consumer surplus of all agents in population  on day   , i.e.  =  =1 ,, .  is a tolerance. After running the day-to-day process for the  populations until invariance is reached for each, there would be an invariant sample distribution for the consumer surplus. This distribution satisfies the agent-based SUE from Definition 3 by Nagel and FlÃ¶tterÃ¶d (2012) as proven earlier.

4.2.

Computational Experiment 1: Illustration with 2-Link Network

We use the simple 2-link network in Figure 4.3 to conduct the following three tests. The stability issue in this type of problem is hard to investigate, as such in this study we are not trying to prove that the stability exist , rather using the first test the aim is to use only a single population to illustrate how even for a simple network, a deterministic day-to-day model may lead to varied state. The second test shows that the proposed model with a set  of population samples of these states can nonetheless generate an invariant distribution for analysis despite those varied trajectories obtained from test 1. The reason for using a simple network is for replicability and clarity in illustration its points. A similar two link network is also used by Horowitz (1984) to

72

show the stability of stochastic user equilibrium. A larger test problems are shown in Sections 4.4 & 4.5 .

Link 1

1

2

Link 2

Figure 4.3. 2-link example to illustrate proposed model

Link 1 is a bidirectional link belonging to subgraph  ({1,2}, 1) served by taxi. Taxi initial position (depot) is located at node 2. There is only one taxi available. Link 2 is a directional link going from node 1 to node 2 and is only accessible to private cars,  ({1,2}, 2). Walking mode is assumed to be infinitely large and left out for convenience. The experienced travel time of person n traveling on link i on day d, going from origin 1 to destination 2,,,d12 , can be expressed as follows: 1,,d12 = - ,, +  ,,, +  
12 2,,s,d = - ,, + 2,,

where -,, is the free flow in-vehicle travel time (and assumed to be the same value for auto and taxi in the example). Travel time on link 2 depends on congestion level, where  is volume delay factor and 2 is flow on link 2 for population  on day  . For simplicity, the congestion effect is assumed to be independent of users' departure time choices. Table 4.1 presents the free flow travel times and parking costs for the scenarios. The taxi fare is set to 0 and parking cost on

73

link 2 relative to the taxi fare, 2 , changes from one scenario to another as shown in Table 4.1, with value of time set to $0.33/min.

Table 4.1: Network attributes

Link1_BaseCase Link2_BaseCase Link1_Scenario1 Link2_Scenario1

- 5 min 5 min 5 min 5 min

 2 min 0 min -

 5 min 5 min -

 $0.00 $1.65 $0.00 $3.63

 1 min/person 4 min/person

As shown in Table 4.1 two scenarios are considered. The "Base Case" scenario is assumed to be used to calibrate the parameters of the travelers. The demand and demand attributes are assumed for the base case. The demand for this network going from node 1 to node 2 is set to 5, where the base case equilibrium demand for taxi is assumed to be 1 and auto demand is 4. The desired arrival time for all agents is 3600 s. The utility functions are assumed to be as follows.
,,, = - 0.2,,, + ,, , ,, = - 0.2,,, + ,,

Based on observed choices in the base case scenario, the utility from unobservable traits ( ) for each agent  for a population  with respect to each alternative  is simulated with Algorithm 1. Up to || = 30 samples are drawn, with the first sample shown in for illustration. For this example the operating policy of the taxi is set to be a greedy first-come first-serve policy.

74

Table 4.2: Simulated traits of the first sampled population

Person  1 2 3 4 5

,, -1.09 -0.03 1.01 0.24 1.74

,, 0.46 -1.06 -0.30 -1.26 -0.57

Forecasted conditions in Sections 4.2.1-4.2.3 are evaluated under "Scenario 1" using the proposed model.

4.2.1. Local stability from initial conditions under Scenario 1 for one population

To test whether the proposed agent-based day-to-day process converges (and how) to the same state under different initial conditions in Scenario 1, three different starting points are considered as shown in Table 4.3. The initial travel disutility assumed by each agent in the population for each alternative starting point using the simulated traits is also shown in Table 4.3. Parameter  is set to 0.2 (20%) as suggested by Bogers et al. (2007) based on empirical estimation of . Results are presented in Figure 4.4.

Table 4.3: Initial travel disutilities for taxi and auto (min)

Sample 1 2 3

Initial taxi travel disutility (min) 5 12 10

Initial auto travel disutility (min) 20 10 16

75

Total Consumer Surplus
-15 0 -16 20 40 60 80 100 120 140

Total Consumer surplus

-17 -18 Alt1 -19 -20 -21 -22 -23 Alt2 Alt3

Iteration # (a)

Taxi Demand
6 5 4

Demand

3 2 1 0 0 20 40 60 80 100 120 140

Alt1 Alt2 Alt3

iteration # (b)
Figure 4.4. (a) Total network consumer surplus and (b) taxi demand at equilibrium.

76

As can be seen from Figure 4.4(a), after several iterations (days) the total network consumer surplus for each initial condition converges to a fixed point which is similar among all three starting conditions, suggesting that this point is locally stable. Furthermore, Figure 4.4(b) shows that after several days the demand for taxi also converges to a fixed point. At this state, three people use link1 (taxi) and two people use link2 (auto).

4.2.2. Effect of Learning Rate  on speed and smoothness of convergence in Scenario 1

In order to illustrate the effect of learning rate on speed and smoothness of convergence, different learning rates ranging from 0 to 1 are also considered for the single population sample. Results are presented in Figure 4.5 which shows that convergence is faster and more unstable with higher values of learning rate and slower, smoother and more stable with lower values of learning rate. The results obtained are in line with the findings of Kim et al. (2009).

Consumer Surplus
0.00 0 5 10 15 20 25 30 w=0.1 w=0.2 w=0.3 w=0.4 -15.00 -20.00 -25.00 w=0.5 w=0.6 w=0.7 -5.00 -10.00

Consumer Surplus

Iteration #

w=1

Figure 4.5. Effect of  on single population convergence to invariance.

77

4.2.3. Consumer surplus sample distribution as agent-based SUE

The two tests presented in Sections 4.2.1 & 4.2.2 were conducted using one generated population , in this section the distribution for the  populations is now examined. For this test 30 different populations are generated. When the 30 population samples are each dynamically loaded onto the network via the day-to-day adjustment over 200 days (CPU time: 36s/iteration) under Scenario 1 setting, a different sample distribution representing the agent-based SUE for Scenario 1 is obtained. If the resulting sample distribution of the consumer surplus exhibits central tendencies, then it confirms that there can exist an invariant distribution corresponding to stochastic route preferences of each individual, which meets the agent-based SUE requirement in Definition 3. Figure 4.6 presents results obtained for multiple populations under scenario 1.

0 0

Total Consumer Surplus_ Multiple Populations_Scenario1
50 100 150 200

Total Consumer Surplus

-5 -10 -15 -20 -25 pop1 pop7 pop13 pop19 pop25 pop2 pop8 pop14 pop20 pop26

Iteration #
pop3 pop9 pop15 pop21 pop27 pop4 pop10 pop16 pop22 pop28 pop5 pop11 pop17 pop23 pop29 pop6 pop12 pop18 pop24 pop30

Figure 4.6. Total consumer surplus for multiple populations at equilibrium_scenario1

78

As can be seen from Figure 4.6 even for such a simple example the day-to-day trajectory is smooth for some populations (e.g. # 17 and #16), but periodic (e.g. 4 and #2) or chaotic for others (e.g. # 19). This is in line with the definition of disequilibrium that states that the system may converge to a fixed point, or oscillate about a point or have a chaotic behaviour. Different convergence examples are highlighted in Figure 4.7. Looking at Figure 4.7 it can be seen that the speed and smoothness of convergence differ from one population to another due to different sensitivities to changes in the network (travel time, cost). For example, population 16 is less sensitive to changes in travel time, leading to smooth and fast convergence to a fixed point where as population 19 is extremely sensitive to the changes in the network (travel time) and as a result has slow and periodic convergence.

Figure 4.7. Convergence of Scenario 1 total system travel time for populations #2, #4, #16, and #19.

79

Figure 4.8 presents distributions of the consumer surplus across the 30 sample populations under scenario 1. The consumer surplus for scenario 1 is shown alongside that of the base case.

Figure 4.8. Comparison of consumer surplus distribution from |S|=30 simulated populations.

Figure 4.8 confirms that, despite the presence of populations leading to oscillatory or chaotic dayto-day patterns shown in Figure 4.6, there exists an invariant sample distribution of consumer surplus with central tendencies as an agent-based SUE. The conclusion obtained from these results allows us to apply the proposed model to numerically evaluate effects of different operational designs. For example, imposing the changes shown in Table 4.1 led to a decrease in consumer surplus on the average of 10 units from the Base Case to Scenario 1.

80

4.3.

Computational Experiment 2: Illustration of Embedding a Dynamic DARP

In the third experiment, we illustrate the sensitivity of the proposed model to different dynamic operating policies using the simple network in Figure 4.9. The aim of this experiment is to test the effect of fare price of FTS operating policy on equilibrium demand and their impacted welfare for multiple sampled populations. In this example, an event based dispatching algorithm based on HyytiÃ¤ et al. (2012) is implemented for the dynamic dial a ride problem. As shown in Figure 4.9, there are 22 nodes in the sample network representing many-to-one last mile service, where nodes (1) Â­ (20) are pickup locations, node (21) is a subway station and node (22) is the depot.

81

Figure 4.9. Sample network to illustrate proposed model.

For the purpose of this study, morning rush hours is considered. The number of commuters during the rush hours period is set to 20. The 20 commuters can either access the subway station by car or by taxi. All 20 commuters are assumed to want to take the 8:00am train at the subway station, so they adjust their mode choice and departure time choice to maximize their utility and minimize their schedule delay. The parameters are generally the same as in the previous section unless specified otherwise below. The experienced travel time, and experienced travel cost of person n traveling by mode k on day d, going from origin r to destination z (subway) can be expressed as follows:

82

   

 ,,s,d = - ,, +  ,,,
,  ,,s,d =  + (130 - 1)

 

 ,,s,d = - ,, + ,  ,,s,d = 0 (parking and fuel cost are assumed negligible)

where  is the base fare price ($) for an initial 130m, and  is the fare ($) for each additional 130m. Taxi fare is adapted from taxi fare in GTA and varied for different scenarios as shown in Table 4.4.  is the traveled distance (m) from customer's origin to destination. , is the total number of individuals in population  that access subway station by car on day . It should be noted that in this example since the FTS under consideration provides only single rides (no ride sharing), the only variable that is population dependent is  ,,, . In the case of FTS with ride sharing the in-vehicle travel time of FTS and distance traveled  will also become population dependent.

Table 4.4: Scenarios

Scenarios Base_Case Scenario Scenario_1

Base Price ($) 4.5 4.5

Price ($)/additional 130 m 0.25 0.01

Volume delay  5 1

The utility functions are assumed to be as follows.
  ,,, = - 0.05,,, - 0.2,,, + ,,  , ,, = - 0.24 - 0.05,,, + ,,

As shown in Eq. (15) , ,,, captures the effect of both the travel time cost and monetary cost of travel, in this example however the travel time cost is separated from monetary cost of travel. The demand and demand attributes are obtained from a hypothetical travel survey (base case). The "Base Case" scenario is used to calibrate the parameters of the travelers. Table A1 and Table
83

A2 in the Appendix capture the made up observed itineraries of each traveler and the mode attributes, respectively. Based on the observed choices from "Base Case" scenario, unobservable trait ( ) for each agent n and mode k is simulated using Algorithm 1. For the purpose of this study, up to 100 sample populations are synthesized. Each of the || = 100 population samples are run up to 500 days (CPU time: 36s/iteration) in Scenario 1 setting to evaluate the variation in their convergence properties and central tendencies of the consumer surplus sample distribution compared to the Base Case. Figure 4.10 presents results obtained for multiple populations under scenario 1.

Consumer Surplus Distribution
800 700 600

Frequency

500 400 300 200 100 0 Scenario 1 Base_Case

-50

-40

-30

-20

-10

0

10

20

30

Consumer Surplus

Figure 4.10. Consumer surplus distribution at simulated equilibrium for scenario 1 and in the base case scenario.

Looking at Figure 4.10 it can be seen that decreasing the fare price and decreasing volume delay parameter, which reflect the operating policy, leads to a measurable increase in total consumer surplus.

84

4.4.

Case Study: Oakville Last Mile Problem One-Sided FTS Market

In Chapter 3 we introduced two transportation planning case studies (Oakville & Manhattan) involving FTS for which public agencies would require a one-size-fits all transport simulation tool to evaluate impact of different design of FTS on demand and their impacted welfare. In this section the proposed model is applied to a taxi system in Oakville, Ontario, as a potential feeder service solution to the last mile problem connecting residents from home to the terminal rail station. The travelers' data and network used for tests scenarios are obtained as explained in Section 3.2.3. The FTS operating policy used for Oakville case study is provided in Section 4.4.2 . Test results are presented in Sections 4.4.4.1 and 4.4.4.2.

4.4.1. Oakville case study 1: objectives

As discussed earlier in Section 3.1.2, the inter-regional transit system in Oakville, Ontario (as showing in Figure 3.1 ) is facing the problem of having all its parking lots reaching capacity. In addition the local transit lines that serve Oakville Go station do not cover majority of residential areas (as shown in Figure 3.2), one way of tackling this problem is then to encourage public to switch from auto to flexible transit by improving the accessibility to Oakville Go Station by improving the level of service of flexible transit available (as discussed in Section 3.1.2). To implement any of these alternatives it is needed to compare their performances. The aim of this section is to answer the following questions posed in Section 3.1.2 . 1) Effects of fleet size on stable demand for flexible transit and consume surplus 2) Effect of alternative routing policy on performance of FTS
85

3) Effect of changes in LOS of other modes on performance of FTS

4.4.2. FTS operating policy simulation

For this case study a greedy first come first serve FTS operating policy is used. The FTS operation policy is defined by time-of-day dynamic updating of commuter requests. The following describes the policy simulated for the model. On each day   , the time of day is divided into  simulation time steps.
Pseudo code for flexible transit operating policy

For j=1: J If commuter (n) requests a taxi For i= 1: total number of vehicles If vehicle (i) is free Assign vehicle (i) to customer (n) Create vehicle (i) itinerary based on itinerary of commuter (n). Create vehicle (i) Path (list of nodes to visit) Update vehicle (i) status to busy If no vehicle is available to be assigned to customer (n) Check to see which vehicle (i) will become available in the upcoming time steps Add commuter (n) to the list of passengers for vehicle (i) Update vehicle (i) itinerary Update vehicle (i) Path For i =1: total number of active vehicles If all the passengers for vehicle (i) have been dropped off Change vehicle (i) status to free

86

Table 4.5 presents an example of vehicle agent itinerary from Oakville case study.

Table 4.5: Sample vehicle agent (i) itinerary

n_ID 1 366 708 1525 1697 1719 1999 2000

n_O 4038 4036 4037 4011 4023 4011 4016 4040

n_D 4014 4014 4014 4014 4014 4014 4014 4014

n_DD 1426 2075 3014 3704 4217 4361 6112 7392

n_AP 1809 2470 3530 4349 5031 5707 6292 7661

n_AD 2155 2749 4024 4681 5382 6039 6496 7883

where: n_ID :ID of customer agents (n) that are served by vehicle agent (i) n_O : pick up location of agent n n_D : drop off location of agent n n_DD: desired departure time of agent n (when call for taxi is placed) n_AP: actual pickup time of agent n n_AD: actual drop- off time of agent n

An example of vehicle agent path is as follows (corresponding to vehicle agent itinerary presented in Table 4.5. The start location of vehicle (i) is at depot located at node (4114). ().  = [4014, 4038, 4014, 4036, 4014, 4037, 4014, 4011, 4014, 4023, 4014, 4011, 4014, 4016, 4014, 4040, 4014]

In this study two routing policies are considered. The routing policy explained above is called "Routing (1)" which is based on the assumption that idle vehicles stay idle at locations other than the depot when their route is finished and when they are waiting for the next call to arrive. With
87

our proposed model, we can evaluate the policy of sending vehicles back to the depot when they are idle, which we will call "Routing (2)". To summarize the two routing policies are as follows:  Routing (1): vehicles can wait idle at locations other than the depot when their route is finished waiting for the next customer call.  Routing (2): vehicles have to relocate to depot after finishing their route and wait at the deport for the next customer call.

4.4.3. Oakville case study 1: MNL estimation + desired arrival time estimation

As mentioned in Section 3.1 for the purpose of this case study only home-to-work (H-W) trips are considered, along with five access modes: bus, automobile, walk, fixed route, transit and DRT. It is assumed that only 10 taxi vehicles (as discussed in Section 3.1.3.4) are available in the base scenario, although other fleet sizes can also have been considered. Commuters, vehicles and network characteristics are obtained as explained in Section 3.1.3. In addition to commuters' attributes we also require mode attributes, which we obtain by simulating the base case scenario using fleet size of 10 and the FTS policy described in Section 4.4.2. Table 4. presents sample commuter specific mode attributes obtained from simulation under "Base Case Scenario". For the purpose of this case study it is assumed that the flexible transit service provided is free therefore taxi fare price is set to 0.

88

Table 4.6: "Base Case Scenario" Oakville commuters' specific Mode attributes

Person n 1 377 474 883 1392

ETT_Auto (min) 3.52 1.76 6.45 4.85 5.40

ETT_Walk (min) 46.91 11.04 59.91 45.05 61.83

ETT_Bike (min) 15.64 3.68 19.97 15.02 20.61

ETT_Transit (min) 8.95 6.29 13.25 17.47 11.93

ETT_Taxi (min) 13.43 11.68 16.37 10.95 15.32

It should be noted that experienced total travel time of taxi (ETT_Taxi) includes both in-vehicle travel time and wait time. The in-vehicle travel time is the free flow travel time from origin to destination and is the same as experienced total auto travel time. The wait time is obtained from the simulation using fleet size of 10. For example the total experienced taxi travel time for person (883) is made up of 4.85min (in-vehicle time) and 6.10 min (wait time). Using BIOGEME (Bierlaire, 2003) MNL parameters are estimated using commuters' socioeconomic and mode specific attributes obtained from TTS as explained in Chapter 3. Several models were tested; the best estimated consumer surplus (utility) function (based on t-test and chisquare test) for each mode is presented below:
#       #     

,,, = 0.481 - 1.65 

+ ,,

,,, = -0.0749   ,, - 1.87    + ,,  ,,, = -0.384  ,, + ,, ,,, = 1.11 - 0.133   ,, + ,, ,,, = -0.402   ,, + ,, It is worth mentioning that in estimating the logit parameters, several models have been tested using other socio-economic characteristics of the commuters such as age, gender, income, employment, etc. The model presented above is the best model obtained. The socio-economic characteristics presented earlier in Table 3.1 is based on the above presented best model.
89

Individual commuter's origin, destination and desired departure time from origin is obtained from TTS 2011 survey as explained in Section 3.1.3.1 . However as shown in Eq. (12) the aim is to minimize schedule delay and as such desired departure time varies from one day to another where as desired arrival time at destination (Oakville Go Transit Station) is kept constant (future studies should look into flex work times), therefore we also need to obtain desired arrival time at destination for each individual commuter. One thing that should be noted the desired arrival time at destination for this study is actually the desired arrival at the Go Station for taking scheduled train not arrival at final destination (work). As mentioned in Section 3.1.3.1 it is assumed that system under "Base Case Scenario" is at equilibrium, therefore knowing individual's departure time from destination and access mode used (from TTS 2011) and knowing the travel time of the access mode used from origin to Go station (using simulation ) we can obtain desired arrival time at destination (Go Station). Sample calculation is given bellow for obtaining the desired arrival time of commuter 883 at Oakville Go Transit Station using data from Table 3.1 and Table 4. Under "Base Case Scenario",  = 0: 883,0 = 7: 00 
4040-4014 ,883,0 = 10.95 

883 = 0 Re-arranging Eq. (12):
4040-4014 883 = 883,0 + ,883,0 = 7: 10: 57

For this case study  for all the commuters is set to 0.2.

90

4.4.4. Oakville test scenarios

In order to answer the objective questions posed in Section 4.4.1, three scenarios are considered, using one simulated preference sample to illustrate the sensitivity of the welfare effects to those scenarios. As the scope of this study is a new methodology, we focus on illustrating the mechanics behind the sensitivities of one sample. A full MC simulation to obtain the sample distribution of an agent-based SUE analyzing a more diverse set of operating policies will be conducted in a future study. Table 4.7 provides the summary of scenarios tested. The base case scenario is used as a starting point for each fleet size, where mode choice and departure choice are obtained from TTS data as discussed in Section 3.1.3 .

Table 4.7: Oakville Case Study test scenarios summary

Scenario Base case Scenario 1 Scenario 2 Scenario 3

Fleet size 10 10 Â­ 40 15 15

Routing Routing (1) Routing (1) Routing (2) Routing (1)

Fixed transit frequency 6 buses/hr 6 buses/hr 6 buses/hr 15 buses/hr

4.4.4.1.

Scenario 1: Effect of fleet size on demand for flexible transit and consumer surplus

In order to investigate the effect of fleet size on demand for FTS and consumer surplus, fleet size is increased from 10 (base case) to 40 in increments of 5, with each of fleet size samples running up to 35 days (iterations) (CPU time: 1000s/iteration). One thing that is worth mentioning is that the assumption of the 10 taxi vehicles for the base case is arbitrary and that while we are using real data, as mentioned previously our analysis here is just meant to be exploratory and illustrative of

91

the trade-offs under a real data setting. The simulation results are presented in Figure 4.11. As can be seen from Figure 4.11(b) increasing the fleet size increases the demand for flexible transit which is an obvious conclusion because having additional vehicles means lower wait times/travel disutility which in turn attracts more customers. However, Figure 12(b) also shows that there exists an upper bound on demand, after which increasing the fleet size will provide the same disutility and result in the same demand level. This is due to having a finite population with demand defined by a preset number of attributes of which wait time is only one. The results suggest that it is possible to improve flexible transit level of service and increase social welfare (Figure 4.11 (a)) of everyone using Oakville Go Station by increasing flexible transit fleet size up to a certain point.

(a)

(b)

Figure 4.11. Percent change in (a) total consumer surplus and (b) taxi demand.

92

4.4.4.2.

Scenario 2 & 3: Effect of alternative routing policy and other mode operations on FTS

To test the effect of alternative routing policy and other mode operation on FTS we consider two alternative scenarios. In Scenario 2, the routing policy is modified to reflect the capability of the proposed model in simulating the welfare effects of changes in operating policy. With scenario 3 we try to illustrate capability of simulating the welfare effects of operating designs in other systems like the fixed route transit system for accessing the terminal station. Table 4. presents the results obtained from Scenarios 2 & 3, along with the results from Scenario 1. Looking at Table 4. it can be seen that obtained results clearly demonstrate the ability of the proposed agent-based day-today process in comparing the welfare effects from changes in system design and operating policy in the same simulation environment.

Table 4.8: Comparison of consumer surplus and taxi demand

Scenario Base Scenario 1: fleet 20 Scenario 1: fleet 25 Scenario 1: fleet 30 Scenario 1: fleet 35 Scenario 1: fleet 40 Scenario 2 Scenario 3

Consumer surplus (% change) -1484.34 -1405.57 (+5.31%) -1404.37 (+5.39%) -1403.43 (+5.45%) -1402.84 (+5.49%) -1402.81 (+5.49%) -1411.10 (+4.93%) -1339.26 (+9.77%)

Taxi demand 17 80 83 85 86 86 71 59

93

4.5.

Case Study: Manhattan Shared-ride

In this section the proposed model is applied to a taxi service in Manhattan, New York (transportation planning example 2 from Section 3.2) to evaluate the effect of ride sharing on the equilibrium demand of FTS and their impacted welfare. For the purpose of this case study a dispatching algorithm based on HyytiÃ¤ et al. (2012) as described in Section 2.5, is implemented for the dynamic dial a ride problem.

4.5.1. Binary logit estimation + arrival time at destination estimation

As mentioned in Section 3.2 the scope of this study is on the residents of Manhattan who commute to work during morning peak period and have both their origin and destination located in Manhattan. The travelers' data and network used for tests scenarios are obtained as explained in Section 3.2.3. It is assumed that only 10 taxi vehicles (as discussed in Section 3.2.3.4) are available in the base case scenario, although other fleet sizes can also have been considered. Similar to Oakville case study, in addition to commuters' attributes we also require mode attributes, which we obtain by simulating the base case scenario. Binary logit parameters are estimated using commuters' socio-economic and mode specific attributes.

94

The estimated consumer surplus (utility) function for each mode is presented below:

 ,,, = 0 ,,, = -2.08 - 0.0520  ,,, + ,, For each individual ,,, is calculated using Eq. (15). The desired arrival time for each individual is determined using the method explained in Section 4.4.3 .

4.5.2. Manhattan test scenarios

In order to answer the objective questions posed in Section 3.2.2 one alternative scenario is considered. For the purpose of this study, up to 30 sample populations are synthesized. Each of the || = 30 population samples are run up to 50 days (CPU time: 900s/iteration). It is worth mentioning that since this is a sensitivity analysis study using sample size of 30 populations is reasonable, however, a full MC simulation to obtain the sample distribution of an agent-based SUE analyzing a more diverse set of operating policies will be conducted in a future study. Table 4.9 provides the summary of the scenario tested.

Table 4.9: Manhattan Case Study test scenario summary

Scenario Fleet size Base Price ($) Price ($)/0.2 mile Ride sharing 10 2.5 0.50 No Base case 10 5 0 Yes Scenario 1

95

4.5.2.1.

Scenario 1: Effect of ride sharing on FTS demand and their impacted welfare

The "Base Case Scenario" obtained from the NY survey data is based on the assumption of singleride taxi service, however it has been shown in the studies that ride-sharing has been gaining interest in the recent years not only as a mean to reduce congestion but also to reduce monetary travel costs for the travelers. The aim of this section is to show the capability of the proposed model in comparing different designs of FTS namely: ride sharing and single ride FTS, in terms of equilibrium demand and their impacted welfare. To achieve the objective, "Base Case" Scenario is compared to Scenario 1 for which as shown in Table 4.9 ride sharing is allowed. In addition under Scenario 1 the taxi fare price is fixed whereas under the "Base Case" Scenario taxi fare price consists of initial fixed price and variable price based on the distance traveled. The results obtained for multiple populations are shown in Figure 4.12. As can be seen from Figure 4.12 providing shared-ride and fixed price as opposed to single ride and variable price, which reflect the operating policy and service design, results to a measurable increase in total consumer surplus.

Consumer Surplus Distribution
700 600

Frequency

500 400 300 200 100 0 0 20 40 60 80 100 120 140

Base Case

Scenario 1

Consumer Surplus
Figure 4.12. Manhattan case study: Consumer surplus distribution at simulated equilibrium for scenario 1 and in the base case scenario.

96

4.6.

Discussion

In this research we proposed an agent-based-day to day process that is embedded with dynamic routing and scheduling policies like a dynamic vehicle routing policy. The stable state properties of this process is evaluated as an agent-based stochastic user equilibrium adopted from Nagel and FlÃ¶tterÃ¶d (2012). Four sets of experiments are conducted: (1) illustration with a simple 2-link network, (2) evaluation of the dynamic dial-a-ride problem from HyytiÃ¤ et al. (2012), (3) illustration using real data from Oakville, and (4) illustration using real data from Manhattan, New York. The 2-link example demonstrates that a fixed point can exist, although even for such a simple case the process can lead to perpetual oscillations depending on simulated population. The dynamic DARP evaluation successfully demonstrates that an operating policy can be integrated with the day-today adjustment process. Sensitivity tests from the Oakville and Manhattan experiment illustrate the effectiveness of the proposed process in evaluating ridership and a single sampled consumer surplus with respect to changes in system operating parameters and system designs like fleet size , routing policy, or single-ride vs. ride-sharing. The contribution of this study is an evaluation model that allows public agencies to evaluate equilibrium demand and their impacted welfare for particular design of FTS and measure the effect of design decisions of FTS on demand and their impacted welfare within an integrated supplydemand context.

97

Chapter 5. Agent-Based Day-to-Day Adjustment Process for Evaluating Two-Sided Flexible Transportation Markets
In Chapter 4 an agent-based day-to-day process was introduced to evaluate the equilibrium for flexible transit systems under different operation policies. However, the proposed method in Chapter 4 is not defined to evaluate peer-based two-sided services where driver agents can choose to be a driver or not, resulting in dynamic fleet size, nor can it be made operationalized in practice to evaluate equilibrium for some key operational models that are gaining interest in the public, e.g. two-sided matching markets. In this chapter we address these gaps by incorporating day-to-day adjustment process of drivers in the agent-based day-to-day process proposed in Chapter 4. In this chapter we try to answer the research questions posed in Section 1.3.2 . First, in Section 5.1 we prove why flexible transport market is a two-sided market and should be considered as such. Then in Section 5.2, the proposed agent-based day-to-day adjustment process for two-sided flexible transport market is introduced. In Section 5.3 the proposed model is applied to a simple sample network for illustration and verification. After that, the proposed model is implemented in a case study to evaluate a taxi fleet serving last mile trips in Oakville, Ontario (from Section3.1 ) and the results are presented in Section 5.4.

98

5.1.

Two-Sided Transport Markets

As discussed in Section 2.6 and shown in Eq. (6) and Eq. (7), a two-sided market requires the total consumer surplus ( ) of one market to be dependent on the quantity set in the other market, i.e.   =   ( ,   ) and vice versa.  is the generalized cost to the travelers, and   is the sellers demand (in this case FTS fleet size). In this section we illustrate that flexible transport market exhibits the two-sided market characteristic. We can define the conditions needed for a two-sided market using the following assumptions and proposition.

Assumptions 1 a) The exchange platform is represented by the combination of the infrastructure network  = () and operating policy  = (  ). For example, having a fleet of 10 vehicles versus 100 vehicles will directly impact the scheduling/routing policy, which in turn also impacts the network performance. b) The system features generalized cost to travelers ( ) and a consumer surplus function for travelers who choose to use the system (  ). The generalized traveler cost may capture a number of different disutilities: travel time, schedule delay, wait time, fare cost, etc. The consumer surplus is a function of generalized cost and socio-economic characteristics ( ) of the travelers.   =   ( ,  ) c) The system features a cost to FTS operator(s) (  =   (, )) and a net consumer surplus function for number of operators who choose to provide service (  ). The cost to the FTS operator(s) should reflect the system operating costs: fuel, driver wages, vehicle depreciation, etc., offset by the fare revenue. These costs depend on the network structure (dense versus sprawled networks impact costs of service) as well as operating policy, as some are more profitable or cost effective than others. The net consumer surplus for the operator is the function of characteristics of the operators (e.g. drivers' preferences for services such as Uber) and cost to the FTS operator.   =   (  ,   ) Proposition 1. A transport service operating under Assumptions 1 is a two-sided market if the operating policy is a function of traveler demand,  = ( ) (e.g. depending on demand and where they are located in the network, operator may change fare price and routing), and the travelers' costs are functions of the operating policy and network,  =  (, )(e.g. wait time for taxi depends on routing policy of FTS and network structure).

99

Proof. In the travelers' case,   =   ( ,  ). Since  =  (, ), then from Assumptions 1a it is clear that with  = (  ) then   =   ( ,  ,   , ). In the operator's case,   =   (  ,   ).   =   (, ), and from Proposition 1 we have  = ( ), then   =   (  ,   ,  , ). Since FTS by definition has an operating policy dependent on traveler demand and travelers' costs are functions of operating policy and network like any other transport service, the following assertion can be made in Corollary 1.

Corollary 1. An FTS under Assumptions 1 is a two-sided market, categorized as a two-sided flexible transport market.

5.2.

Methodology

The agent-based day-to-day process proposed in Chapter 4 only captures the adjustment process of the travelers, in this section the proposed process is extended to include an additional adjustment process for the fleet of vehicles. We design such a process that includes day-to-day adjustments from both passengers and vehicle fleet such that their interactions may lead to agent-based SUE similar to the one described and achieved in Chapter 4. Like in Chapter 4, due to the inherent stochastic dynamic characteristics of FTS, we use an agent-based approach to simulate a sample of populations from which deterministic processes are run. The key algorithmic components of the proposed agent-based process are highlighted in Figure 5.1 for a single (instead of  different) FTS without loss of generality. The red dotted square highlights the additional components that were added to Figure 4.1(b) to incorporate dayto-day adjustment process for the vehicle fleet.

100

Figure 5.1. Key components of proposed agent-based RBAP under two-sided flexible transport market

Keeping Eq. (10) to Eq.(19) intact, additional equations are introduced in the following sections to accommodate the operator (drivers) day-to-day adjustment process. The following notations are added to the original model proposed from Chapter 4: : population of vehicle agents (to allow for autonomous vehicles, terms "vehicles" and "drivers" are used interchangeably);   : fleet of vehicles on day, d, from FTS ;  : profit($) threshold for agent ;     : choice of vehicle agent  to enter the market,     , or stay out of the market,     ;  : perceived profit ($) of vehicle     As shown above in the case of two-sided flexible transport market unlike one-sided flexible transpot market (Chapter 4), fleet size is not fixed and can vary from one day to another

101

depending on the available vehicles (drivers). The effect of this varying fleet size and choices of drivers will be explored in the upcoming sections.

5.2.1. Synthesize M vehicle agent traits

An FTS may operate as a centralized or decentralized fleet. From the perspective of day-to-day adjustments, choices from a centralized fleet may be modeled assuming homogeneous vehicles. As such, in this study we consider the more generalized case of homogenous vehicles, or decentralized fleet. Future studies should look into decentralized fleet with heterogeneous vehicles. The FTS vehicles (taxi drivers) determine their strategies as choice sets by choosing whether to enter the market on a particular and be active or not, which varies fleet size (  ). For example, an FTS similar to Uber, may have a maximum of M registered vehicles(drivers) however individual vehicles based on their perceived profit and individual profit threshold may decide to be active on a particular day or not. The choices of drivers will in return affect fleet size by varying it from one day to another, which in return will affect LOS and operating policy of FTS. The profit threshold represents the combination of unobservable costs (e.g. capital costs, market forces, etc.) that are not explicitly accounted for in the profit function. The vehicle population is synthesized by generating a profit threshold ( ) for each vehicle. In the case of a homogeneous fleet, the same threshold may be used for all vehicles. Heterogeneous fleets may have thresholds randomly sampled from normal or uniform distributions, for example.

102

5.2.2. Update choice 

1  Each individual vehicle (driver) m has a strategy set defined by  : = { , . . ,  } where the aim

is to maximize profit. This component describes the day-to-day adjustment process of the drivers.
 Each strategy  consist of choice whether to enter the FTS market and be active or not on each

day . Vehicle  chooses to be active if the perceived profit of vehicle  on day  , , , is equal or higher than the profit threshold of vehicle , as shown in Eq. (20). 1, 0, ,   , < 

  ={

(20)

 , is updated similarly to the perceived travel time  update shown in Eq. (13) in

Section 4.1.3.3 . Each day  , the vector containing vehicle IDs ([1, 2, 3, ..., m]) is randomly permuted by taking a random number between 1 and m sequentially ([10, 50, 1, 13, n, ..., 2]) to assume that each vehicle is equally likely to be assigned a customer from a dispatch, all else equal. A vehicle may not always make profit due to not being active all the time or being active but not getting assigned to a customer under the network  and operating policy . As a result, vehicles learn from their previous experience or from the collective expectations from the vehicle fleet, as shown in Eq. (18) for each day   2.

-1 -1 )  , = (1 - ),-1 +  ,-1 + (1 - 

(21)

where , 0    1, is a parameter controlling the degree of learning attributed to experience on  , is the collective fleet the prior day as opposed to learning it from all past experiences.  perceived profit on day, and ,-1 is the total experienced profit of vehicle m on day -1.

103

 is updated each day via the Method The collective perceived average assigned profit  of Successive Averages, as shown in Eq. (22).

 1 1 =1  ,-1    = (1 - ) -1 + ( )   -1

| |

(22)

where, -1 is the number of active vehicles assigned to passengers. On the first day, the fleet's initial choice ,1 is set to an exogenous  1, i.e. ,1 =  1 .

The experienced profit , of vehicle  on day  is calculated using Eq. (23).

, = , - ,

(23)

where , is the experienced fare revenue of vehicle  on day , and , is the operating cost of vehicle  on day  . If a driver is not active on day  or is active but not assigned to any passenger, , = 0.  shows the perceived average of the profit conditional on being It should be noted that  assigned to customers, as opposed to the average of the expected profit that accounts for probability of not getting any service that day. This is because the probability of not getting any service is already accounted for in the , . In other words, the probability of getting a passenger is not perceived from the events observed by the whole population, but by the day to day experiences of the vehicle. For example, if a vehicle on a given day has 30% of being assigned a passenger, where they would experience a profit of $2, then there is a 30% chance that , = 2 and 70% that

104

, = 0 on that day. This would then get relayed to the next day's perception via Eq. (21). Eq. (22) is then used to update the actual profits earned by vehicles assigned to passengers that day.

5.2.3. Simulation stopping criterion

Since there are two distinct agents present in the simulation namely user agents and vehicle agents, two distinct stopping criteria are chosen, that both need to occur. For the purpose of this study as mentioned previously we are considering centralized dispatch system with homogenous vehicles as a result we are only simulating one deterministic population of vehicles running a deterministic day-to-day process. The deterministic day-to-day process of this single population similar to the individual traveler agent's day-to-day process maybe lead to stable state or maybe lead to oscillation or chaotic pattern. If the population of vehicle agents were to be run in isolation from the population of traveler agents then we would have not need a stopping criteria. The reason for this is that as mentioned earlier a deterministic day-to-day process by itself reaches stable, oscillatory or chaotic state therefore in that case all we need to do is to let the simulation run for several days (iterations) to reach that state. However in this study since we are looking at twosided transport market and we are considering the interaction between vehicles and travelers, we are simulating one population of vehicles with multiple populations of traveler agents therefore we can use averaging method and if we aggregate up over those runs we end up with invariant distribution similar to the agent-based SUE for traveler agents. This means that even though population of vehicle agent is deterministic the outcome is stochastic because of the variation in the choices of different populations of traveler agents. This will be discussed in more details in the upcoming sections.The first stopping criterion used in this study is from Eq. (19) from Section
105

4.1.5, for traveler agents. The second criterion is for vehicle agents, selected based on the average expected profit ($) per vehicle, as shown in Eq.(24). - -  | --1 |    , --1 | | where,   is a tolerance factor.

for 0    2

(24)

5.2.4. Social optimum evaluation
The stopping point obtained from the agent-based day-to-day process can be evaluated with Eq. (9) in Section 2.5 to determine whether it is socially optimal. The translation of the abstract notation to the variables used in this process is as shown:         Buyer price,  : total cost of using FTS (wait time + fare cost) Seller price,   : operating cost for drivers Buyer demand,   : number of travelers choosing FTS mode Seller demand,   : the equilibrium fleet size Buyer elasticity,  : can be estimated using arc-elasticity of demand using another equilibrium traveler demand value for another fare price Seller elasticity,   : can be estimated using arc-elasticity of demand using another number of active assigned drivers for another fare price  Buyer welfare,   (): sum of the utility over the population of FTS users Seller welfare,    (): sum of the profit over the active fleet


5.3.

Computational Experiments

We use the simple replicable example show in Figure 4.9 from Section 4.3 to test the proposed agent-based day-to-day process for two-sided flexible transport market. For the purpose of this study the simulation platform developed in MATLAB from Chapter 3 is modified based on
106

proposed day-to-day adjustment process of driver agents and is used for both the numerical example and the case study. Moreover, an event based dispatching algorithm based on, Hyytia et al. (2012) routing policy from Section 2.5 is used. Four experimental objectives are tested: 1. whether the distribution of the state is indeed stable over a range of different initial conditions, 2. whether the proposed process for two-sided flexible market can generate invariant distribution for analysis, 3. whether the proposed model for two-sided flexible transport market differs from the proposed model for one-sided flexible transport market (Chapter 4) when applied to the same example, and 4. whether the proposed two-sided agent-based day-to-day process leads to a social optimum as defined by Eq. (9).

5.3.1. Scenario parameters

As stated earlier for this section the same sample network shown in Figure 4.9 from Section 4.3 is used. Similar as before in the simulation there are two agents, namely, travelers and vehicles, however unlike the previous example in Section 4.3 , in the example used in this section vehicle agents are also decision makers, as such their day-to-day adjustment process is also considered along with the day-to-day process of traveler agents. Following additional parameters are added to the example to capture day-to-day adjustment process of the vehicle agents as well.     Maximum fleet population is  = 20 Fleet is assumed homogeneous with  = 1  , =   ,  
, , =    + (130 - 1) ,   , where  is the total number of travelers served by vehicle  on day 



107

   

Vehicle learning rate  = 0.2 Driver value of time is  = $0.33/ The dispatch policy from Eq. (1) to Eq. (2) from Section 2.5 is evaluated in these experiments, with  = 0.5 and  = 0.   =   ~0


, Where  + (130 - 1) as explained in Section 4.3 is the fare price for an individual FTS

customer. Three scenarios are considered. The different scenario attributes are shown in Table 5.1.

Table 5.1: Scenario characteristics

Scenarios Base 1 2 3

Base Price ($) 4.5 4.5 4.5 4.5

Price ($)/additional 130 m 0.25 0.25 0.25 0.01-1.00 (increments of 0.01)


5 1 1 1


1 5 5 {0,2,4,6,8,10}

 
15
{5,10, ... ,95,100}

15 15

Figure 5.2 presents the consumer surplus distribution for the base scenario over multiple populations of commuters. Data for Figure 5 is obtained from Section 4.2.

108

Figure 5.2. Simulated population consumer surplus distribution in base scenario

The base scenario is assumed to be in steady state already, where the average of the perceived profits, PP, is $4.38 and average number of active drivers are|  | = 20.

5.3.2. Results

The results obtained from the three scenarios are presented in the next sections.

5.3.2.1.

Stability from initial conditions under Scenario 1

Scenario 1 is used to illustrate the convergence of the proposed two-sided agent-based day-to-day process to unique stable state under different starting points. Twenty different initial conditions are considered for the one of the simulated populations  of traveler agents. The initial conditions are generated by varying  1 from $5 to $100 in increments of $5. The day-to-day convergence

109

for vehicle agents is plotted in Figure 5.3, whereas the day-to-day convergence for traveler agents is plotted in Figure 5.4. As can be seen from Figure 5.3(a), the expected profit ($)/driver for each initial condition converges to a fixed point which is similar among all 20 starting conditions, suggesting that this point is locally stable. Figure 5.3(b) shows that the fleet size also converges to a fixed point of |  | = 11 vehicles for this simulated population. Similarly, Figure 5.4(a) and Figure 5.4(b) show that FTS demand and total consumer surplus also converge to fixed points, with FTS demand converging to 8 people.

Convergence of Expected Profit($)/Vehicle
100

Experienced Profit/Vehicle

90 80 70 60 50 40 30 20 10 0 0 100 200 300 400 500

Day #
5 40 75 10 45 80 15 50 85 20 55 90 25 60 95 30 65 100 35 70

(a)

110

Convergence of # of Active Drivers (Fleet Size)
25

# of Active Drivers

20 15 10 5 0 0 100 200

Day #
$25 $75

300

400

500

$5 $55

$10 $60

$15 $65

$20 $70

$30 $80

$35 $85

$40 $90

$45 $95

$50 $100

(b)
Figure 5.3. Convergence of (a) average experienced profit ($)/driver and (b) number of active drivers

Convergence of Taxi Demand
14 12

Taxi Demand

10 8 6 4 2 0 0 100 200 300 400 500

Day #
$5 $40 $75 $10 $45 $80 $15 $50 $85 $20 $55 $90 $25 $60 $95 $30 $65 $100 $35 $70

(a)
111

Convergence of Total Consumer Surplus
0 0 100 200 300 400 500

Total Consumer Surplus

-5 -10 -15 -20 -25 -30 $5 $40 $75 $10 $45 $80

Day #
$15 $50 $85 $20 $55 $90 $25 $60 $95 $30 $65 $100 $35 $70

(b)
Figure 5.4.Convergence of (a) taxi demand and (b) total consumer surplus

5.3.2.2.

Consumer surplus sample distribution as two-sided agent-based SUE under Scenario 2

In Scenario 2, each of the || = 100 population samples (from Section 4.3) are run up to 500 days (CPU time: 36s/iteration) to evaluate convergence and central tendencies of the consumer surplus sample distribution. It should be noted that for this test only one homogenous population of vehicle agents is used. Figure 5.5. shows distributions of (a) consumer surplus, (b) taxi demand, (c) expected profit per vehicle, and (d) average fleet size across the 100 sample user populations under scenario 2.

112

(a)

(c)

(b)

(d)

Figure 5.5. 100-sample distribution of equilibrium (a) Consumer surplus, (b) FTS demand, (c) average expected profit per vehicle, and (d) average fleet size

As can be seen from Figure 5.5., average profit ($)/driver and fleet size are fairly distributed even though a homogeneous vehicle fleet is used. The reason for this is that the day-to-day choices and the adjustment process of "traveler" population can affect choices and day-to-day adjustment of drivers which in return affect the level of service of the FTS. These results show that there exists a sample distribution of consumer surplus with central tendencies as agent based-SUE for both the traveler and vehicle agents.

113

5.3.2.3.

Significance of incorporating day-to-day adjustment process of drivers under scenario 3

In the two-sided market literature (e.g. Eisenmann et al., 2006), it has been shown that a analyzing a two-sided market using one-sided market pricing would result in inefficiencies. In this section significance of incorporating the day-to-day adjustment process of drivers is investigated by comparing static fleet size (not considering day-to-day adjustment process of drivers) (   =  + ) with dynamic fleet size (considering day-to-day adjustment process of drivers)(     + ). With Scenario 3, we conduct such a test by using the two-sided market day-to-day process and comparing it to the solution from the one-sided day-to-day process from Section 4.3. The one-sided day-to-day process simply assumes all 20 vehicles in the fleet are always in the market. The results are presented in Figure 5.6 for (a) consumer surplus and (b) FTS ridership demand, over a range of different fare prices. Furthermore, this section investigates the effect of fare price and driver profit threshold on taxi demand and total consumer surplus of the user population at equilibrium. It should be noted that in scenario 3, one "user" population is used. The most significant finding here is that modeling the scenario as a one-sided market will lead to overestimation of total consumer surplus and taxi demand at equilibrium when the fare price is below a certain range (~ $0.30 per 130m). At higher fare price ranges, they can be equivalent to the two-sided market condition. This makes sense, as two-sided markets can only be exploited for greater value when there is value to re-allocate costs from one market to the other. Furthermore, this comparison pinpoints the threshold where there is value to modeling the system as a two-sided market. The reason behind the above mentioned phenomena is shown in Figure 5.7.

114

0 $0.00

Total Consumer Surplus at Equilibrium
$0.10 $0.20 $0.30 $0.40 $0.50 $0.60 $0.70 $0.80 $0.90 $1.00

Total Consumer Surplus

-5 -10 -15 -20 -25 dynamic_CS_PT_0 dynamic_CS_PT_8

Fare Price /additional 130m
dynamic_CS_PT_2 dynamic_CS_PT_10 dynamic_CS_PT_4 static_CS dynamic_CS_PT_6

(a)
9 8 7 6 5 4 3 2 1 0 $0.00

FTS Demand at Equilibrium

TAxi Demand

$0.10

$0.20

$0.30

$0.40

$0.50

$0.60

$0.70

$0.80

$0.90

$1.00

Fare Price/130 m
dynamic_taxidemand_PT_0 dynamic_taxidemand_PT_6 static_taxidemand
*

dynamic_taxidemand_PT_2 dynamic_taxidemand_PT_8

dynamic_taxidemand_PT_4 dynamic_taxidemand_PT_10

(b) PT is driver profit ($) threshold, and, CS, is total consumer surplus.
Figure 5.6.Comparison of equilibrium (a) total consumer surplus and (b) FTS demand, under one-sided ("static") and two-sided ("dynamic") market assumptions.

Figure 5.7 presents FTS fleet size, taxi demand and # of active drivers at equilibrium. As can be seen from Figure 5.7(a), fare price and driver's profit ($) threshold have significant effect on fleet size, which in turn affect LOS of FTS, taxi demand and total consumer surplus of users.
115

25 20

FTS Fleet Size

Fleet Size

15 10 5 0 $0.00 -5

$0.10

$0.20

$0.30

$0.40

$0.50

$0.60

$0.70

$0.80

$0.90

$1.00

Fare Price/additional 130m
DynamicFleetsize_PT_0 DynamicFleetsize_PT_6 SataticFleetsize DynamicFleetsize_PT_2 DynamicFleetsize_PT_8 DynamicFleetsize_PT_4 DynamicFleetsize_PT_10

(a)

Taxi Demand/# of Active Assigned Drivers

9 8 7 6 5 4 3 2 1 0 $0.00 -1

Taxi Demand and # of Active Assigned Drivers (AAD) at Equilibirum

$0.10

$0.20

$0.30

$0.40

$0.50

$0.60

$0.70

$0.80

$0.90

$1.00

Fare Price / additioanl 130 m
dynamic_AAD_PT_0 dynamic_taxidemand_PT_2 dynamic_AAD_PT_6 dynamic_taxidemand_PT_8 static_AAD dynamic_taxidemand_PT_0 dynamic_AAD_PT_4 dynamic_taxidemand_PT_6 dynamic_AAD_PT_10 static_taxidemand dynamic_AAD_PT_2 dynamic_taxidemand_PT_4 dynamic_AAD_PT_8 dynamic_taxidemand_PT_10

(b)
Figure 5.7.Comparison of (a) Fleet size and (b) Taxi demand and number of active assigned drivers at equilibrium under various driver profit ($) threshold

Moreover, looking at Figure 5.7(a)&(b) it can be seen that for each driver profit ($) threshold, under specific fare price, the taxi demand and number of active drivers are equal at equilibrium
116

and is the same as number of assigned drivers (meaning all active drivers are assigned, and there is one driver per passenger). For example for profit threshold of $4.00 and fare price of $0.13, the taxi demand is 6, fleet size is 6 and number of assigned drivers is also 6, this means that there is a perfect match between drivers and customers. This is called competitive market equilibrium where there is a balance between supply and demand. That price is considered as equilibrium market fare price.

5.3.2.4.

Evaluating social optimality of equilibrium under Scenario 3

In this section we demonstrate the social optimality criterion from Eq. (9) from Section 2.6 using a sample population Scenario 3. As was stated in Section 5.2.4, there has to be a perfect match between sellers and buyers and in this case it means that all the active drivers should be assigned to one customer. For the purpose of this study, two tests are conducted, one choosing a population and fare price from scenario 3 where there is a perfect match between buyers and sellers (drivers and travelers) and a population and fare price from scenario 3, where there isn't a perfect match between sellers and buyers (supply exceeds demand).

5.3.2.4.1.

Evaluating social optimality of equilibrium under Scenario 3

As discussed earlier, to test social optimality it is required to meet the perfect match criterion, hence it is necessary to select a population of drivers and fare price from Figure 5.7 that lead to perfect match between drivers and customers. In this experiment the driver population with profit threshold of ($4.00) and fare price of $0.13 are selected (taxi demand=6, fleet size=6, assigned drivers=6).  and   are obtained using equilibrium demand for fare price of $0.31. As we defined in Section 5.2.4, the following values are obtained:
117

       

Buyer price,  : 8.44 Seller price,   : 4.36 Buyer demand,   : 6 Seller demand,   : 6 Buyer elasticity,  : -1.26 Seller elasticity,   : 1.79  Buyer welfare,   (): -1.61 Seller welfare,    (): 4.20


We get: For traveler market:
    

[  () ] = 1.79 , and



For FTS market:
    

[   () ] = 1.70 As can be seen from the results obtained for traveler market and FTS market are roughly



equal (discrepancies are due to averaging in the simulation), suggesting that this state (perfect match between sellers and buyers) is indeed the social optimum state.

5.3.2.4.2.

Evaluating social optimality of equilibrium under Scenario 3(not perfect match)

Unlike previous section for the current test we select a population of drivers and fare price from Figure 5.7 that do not lead to a perfect match. For this test the driver population with profit threshold of ($4.00) and fare price of $0. 31 are selected (taxi demand=3, fleet size=12, assigned drivers=3). Therefore as can be seen in this scenario there isn't a perfect match between drivers and customers, since 9 drivers are not assigned to any customers.  and   are obtained using equilibrium demand for fare price of $0.13.The following values are obtained:
118

       

Buyer price,  : 11.78 Seller price,   : 3.14 Buyer demand,   : 3 Seller demand,   : 3 Buyer elasticity,  : -3.52 Seller elasticity,   : 2.58  Buyer welfare,   (): -2.25 Seller welfare,    (): 8.22


We get: For the traveler market
     

[  () ] = 2.51, and


For the FTS market
    

[   () ] = 3.33 Looking at the above results, it is clear that they are not equal which suggests that there is

a more socially optimal state that can be achieved (shown in Section 5.3.2.4.1). From here, one can increase the average surplus per transaction for the traveler market, decrease the elasticity of demand of the travelers, reduce the operating cost of the FTS, or increase the elasticity of demand of the FTS, etc., to approach the social optimum.

5.4.

Case Study: Oakville First/Last mile Problem-Two-Sided Market

The proposed two-sided market agent-based day-to-day process is tested on real data obtained from the Oakville, Ontario as explained in 3.1.3. Similar to the case study in Section 4.4 this case study also focuses on the residents of town of Oakville who commute to downtown Toronto for work during morning peak period by taking Go Transit commuter rail out of the Oakville station.
119

It is worth mentioning that aside from testing different scenarios in this case study than the ones tested in Section 4.4, there are three distinct differences between this case study and the one presented in Section 4.4 which are: one, in this study two-sided day-to-day process is used, second, vehicle routing policy introduced in Section 2.5 is used as opposed to the greedy algorithm from Section 4.4.2, third , in the previous case study in Section 4.4 the taxi service is assumed to be free where as in this case study we investigate the effect of fare price on taxi demand.

5.4.1. Oakville case study 2: MNL estimation + desired arrival time at destination estimation

Since in this section we are investigating the effect of fare price on FTS demand, we need to recalibrate logit model from Section 4.4.3 in order to include the effect of fare price in the utility function of the travelers. Table 5.2 presents sample commuters' specific mode attributes data including taxi fare price. For each commuter fare price is calculated as explained in Section 3.1.3.4 using Oakville taxi rates.

Table 5.2: Base Case Scenario" Oakville commuters' specific mode attributes (fare price included)

Person n 1 377 474 883 1392

ETT_Auto (min) 3.52 1.76 6.45 4.85 5.40

ETT_Walk (min) 46.91 11.04 59.91 45.05 61.83

ETT_Bike (min) 15.64 3.68 19.97 15.02 20.61

ETT_Transit (min) 8.95 6.29 13.25 17.47 11.93

ETT_Taxi (min) 13.43 11.68 16.37 10.95 15.32

Taxi Fare Price ($) 11.85 6.74 14.43 13.19 13.54

120

For the base case a fleet size of 10 taxi vehicles is assumed for illustrative purposes, which is consistent with the case study presented in Section 4.4. Moreover, in this study under the base case scenario it is assumed that all drivers have the same profit threshold of $1.00. MNL parameters are estimated based on these assumptions. The estimated consumer surplus (utility) function for each mode is presented below:
#       #     

,,, = 2.99 - 2.19

+ ,,

 ,,, = -0.0944,, + ,,   ,,, = -0.276,, - 0.0759,, + ,,  ,,, = 2.35 - 0.109,, + ,,  ,,, = -0.268,, + ,,

For this case study  is set to 0.2. The vehicle agents are assumed to be homogenous, with,  = 0.2 , and  = $0.33/. The vehicle agent's profit ($) threshold for each scenario is presented in Table 5.3. For each individual commuter the same desired arrival time at the destination estimated in Section 4.4.3 is used.

5.4.2. Oakville Case study 2: objective and test scenario

The purpose of this case study is to illustrate that the proposed agent-based day-to-day process for two-sided flexible transport market is capable of determining the effect of fare price and drivers' threshold on FTS demand and their impacted welfare (total consumer surplus). In order to achieve this objective one test scenario is considered. For the purpose of this study, 10 simulated sample population is used to illustrate the central tendencies and sensitivity of the taxi demand and consumer surplus to fare price and profit threshold of drivers. Summary of the scenario tests is

121

presented in Table 5.3. The base case scenario is used as a starting point for each fleet size, where mode choice and departure time choice were obtained from TTS data (Chapter 3)

Table 5.3: Oakville cast study_2 test scenario attribute summary

Scenario Base case Scenario 1

Max Available Fleet size 10 10

Profit ($) Threshold 1 15

Fixed Fare Price ($) 4.25 4.25

Fare Price ($)/additional 130m 0.25 0.10

As shown in Table 5.3 to test the sensitivity of demand to fare price ($),

fare price ($) per

additional 130m traveled is lowered from $0.25 to $0.10. One may instinctively think that this decrease in fare price would result in increase in taxi demand, the validity of this hypothesis is tested below. For this test as mentioned previously, 10 traveler populations are synthesized (|| = 30 ), with each individual population  running up to 50 days (iterations) (CPU time: 1000s/iteration). The average results are provided in Table 5.4.

Table 5.4: Comparison of average consumer surplus, taxi demand, fleet size, and profit per vehicle at equilibrium

Scenarios Base Case Scenario 1

Taxi Demand 17 8

Total Consumer Surplus 2095.57 2093.00

Active Vehicles (fleet size) 10 4

Profit($)/vehicle 20.31 17.26

It can be seen from Table 5.4 that decreasing fare price ($)/additional 130m, resulted in decrease in taxi demand and total consumer surplus which is clearly in contradiction with our earlier hypothesis. This discrepancy is due to the presence of the two-sided market. At the same time that

122

we decreased fare price we also increased drivers' profit ($) threshold (Table 5.3) as a result fewer drivers entered the market and were active (lowering fleet size), which led to higher wait time for customers which in return resulted in fewer number of users using taxi (looking at utility function of taxi, it can be seen that heavier weight is giving to travel time of taxi (wait time+ in vehicle time)). The results obtained clearly show the interdependencies of day-to-day adjustment process of drivers, users and LOS of FTS.

5.5.

Discussion

We proposed an agent-based day-to-day adjustment process for two-sided flexbile transport market by extending the proposed model in Chapter 4 such that the day-to-day adjustment process of both the travelers and the operators and their interactions are considered. Computational experiments are conducted with a simple network. Findings confirm the existence of locally stable states, and illustrate the significance of incorporating the day-to-day adjustment process of the operators in the model, and of thresholds from which network externalities cause two-sided and one-sided market to diverge. We use the Ramsey pricing criterion for social optimum from Rochet and Tirole (2003) to show that perfectly matched states from our day-to-day process are equivalent to a social optimum. A case study using real data from Oakville, Ontario, as a first/last mile problem example demonstrates the sensitivity of the day-to-day model to FTS operating policies. The contribution of this study is that it allows policy makers to evaluate system designs (e.g. fleet sizing), operating policies (e.g. fare price), all on a common platform in terms of consumer surplus capturing the adjustment process of travelers as well as FTS operators.

123

Chapter 6. Conclusions and Future Research
This section provides a short summary of findings, list contributions that have been made in this research and future work directions.

6.1.

Summary

In this dissertation it is shown that there is a clear gap in methodologies to evaluate the user equilibrium for flexible transit services. This gap is addressed by first arguing that day-to-day adjustment processes in the literature do not apply to flexible transport systems because of several key differences related to dependency on their operating policies. An agent based day-to-day adjustment process model for one-sided FTS is proposed to find the agent-based stochastic user equilibrium and welfare effects of dynamic FTS operating policies within an integrated supplydemand context. As part of this dissertation, an agent-based multimodal transport simulation platform based on the proposed model is developed in MATLAB. To the best of our knowledge, this is the first such model and simulation tool. . To support the proposed model, four sets of experiments are conducted using the developed simulation tool. The first numerical test showed that even for such a simple case, deterministic day-to-day adjustments could lead to oscillatory or fixed patterns that depend on initial conditions, learning rate, or simulated traits. Nonetheless, the proposed model based on simulation of multiple population samples can lead to an invariant distribution representing the agent-based SUE.
124

The second test demonstrated how the proposed model is sensitive to different dynamic vehicle routing policies. The results from the first two experiments show that it is possible to obtain agent-based SUE with central tendencies. The results from the third and fourth numerical tests and the case studies, illustrate the sensitivity of a model calibrated to real data for a study areas in Oakville, Ontario and Manhattan, New York. The test showed how policymakers can evaluate system designs (e.g. fleet sizing, ride sharing), operating policies (e.g. dispatch/routing algorithm), or competing mode designs (e.g. fixed route transit headways) all on a common platform in terms of consumer surplus distributions. In the second part of this dissertation we showed that flexible transport market exhibits characteristics of two-sided market and as such should be treated as two-sided market. Therefore we modified the one-sided agent-based day-to-day process model to include day-to-day adjustment process for drivers' population in order to evaluate the dynamic equilibrium and welfare effects of designs and operation policies in flexible transport services as two-sided market. The proposed model is the first agent-based stochastic user equilibrium model that considers day-to-day adjustment process of both the drivers and users populations as a two-sided market. To test the proposed model for two-sided flexible transport market, three sets of experiments are conducted. The tests showed that similar to the one-sided model, the proposed two-sided model based on simulation of multiple population samples can lead to an invariant distribution representing the agent-based SUE. The second set of experiments which is the comparison between a one-sided market and two-sided market demonstrated their differences and show how to identify thresholds for when network externalities lead to two-sided markets. In addition, the second test illustrated the significance of incorporating the day-to-day adjustment process of

125

drivers and well and the travelers. Moreover, the computation of social optimal criterion from second test provided guidelines for designing a more socially optimal service. The results from the case study showed how policymakers can evaluate system designs (e.g. fleet sizing), operating policies (e.g. fare price), all on a common platform in terms of consumer surplus, and that day-to-day adjustment process of vehicles should be taken into account when changing policies. For example, if drivers have a profit threshold, lower fare prices will not necessary result in higher demand.

6.2.

Contributions

This thesis presents a significant step towards evaluating dynamic flexible transit systems in an integrated supply-demand context. In this study two agent-based day-to-day adjustment process models are proposed for evaluating equilibrium for particular design of FTS and measuring the effect of design decisions of FTS on demand and their impacted welfare. The first model looks at FTS as one-sided market considering only the day-to-day adjustment process of travelers whereas the second model treats FTS as two-sided market capturing the day-to-day adjustment process of both the travelers and the operators and their interactions. The proposed models allow

policymakers to evaluate system designs (e.g. fleet sizing), operating policies (e.g. dispatch/routing algorithm), or competing mode designs (e.g. fixed route transit headways) all on a common platform in terms of consumer surplus distributions. There are currently agent-based simulation tools available to public agencies for transportation planning and transit assignments (e.g. MATSIM and MILATRAS (Wahba, 2008)).

126

However as mentioned previously they are either catered to fixed route transit or assume fixed demand when it comes to evaluating flexible transit services. In this study the two proposed models are operationalized in MATLAB, which is an efficient setting for sensitivity analysis for academic purpose. The two models can also be operationalized on a more efficient computational setting (e.g. C++) by public agencies, allowing them to evaluate equilibrium of dynamic flexible transit policies in an integrated supply-demand context.

6.3.

Future Research

As mentioned previously, currently the two proposed models are operationalized in MATLAB, which is an efficient setting for sensitivity analysis but is not efficient for larger case studies. Due to computational limitations of MATLAB, the following simplifications were made in this study: shorter study period, using sample surveyed population instead of extended population, and using small sample of Monte Carlo simulated population. The implication arising from these simplifications is that the results obtained from this study can be used as a proof of concept but cannot be used to draw conclusions about the network, travel behaviour and particular design of FTS. Future studies may operationalize the two models on a more efficient computational setting (e.g. C++) with event-based simulation for use by public agencies. As public agencies adopt last mile solutions or FTS options in pilot studies, they can use this model for deployment decision support. In addition, there are a number of different directions that can be taken in future research:

127



In this dissertation a greedy vehicle routing policy and a dynamic DARP proposed by HyytiÃ¤ et al. (2012) are used, for future studies more advanced vehicle routing and pricing policies such as the one proposed by Sayarshad and Chow (2015) can be evaluated.



Alternative flexible transit services such as UberX (taxi sharing), and more advance ride sharing service can be explored. In this thesis, even though we considered ride-sharing, we assumed that there is a fixed cost for using the service. Future studies should look into cost allocations and peer-to-peer choices.



The experiments conducted in this study were for verification and proof of concept purposes. Future studies should look into using real data to validate the proposed models. Pilot studies can be used for validation.



In this thesis simplifications were made in terms of sample size and study period, future studies should consider extended population, along with larger Monte Carlo simulated population sample set and longer study period.



The day-to-day learning process used for travel time updating in Chapters 4 and 5 is only one way of modeling travelers' behavior. Future studies should look into using other models. (e.g. Markovian Decisions Process, Wahba and Shalaby (2014) ).



As stated in Section 3.3, a simple microsimulation model is implemented in the agentbased simulation tool developed in MATLAB omitting the congestion effect, future studies can use a microscopic traffic simulator as a plug in in order to capture congestion effect.



With the potential for cooperative autonomous vehicles for FTS (e.g. Brownell and Kornhauser, 2014), the proposed model can also be modified to consider autonomous fleet agents. Employing autonomous fleet size will affect operating costs, idle times,

128

repositioning time, etc. and it is worth exploring the effect of these changes on demand and their impacted welfare.  In this study dynamic DARP and dynamic fleet size were considered. Future studies can look into dynamic pricing by modifying the FTS module as shown in Figure 3.9.

129

Appendix
The itinerary of each individual in the "Base Case" is presented in Table A1 and mode attributes for each individual are presented in Table A2. Up to 100 sample populations are drawn, with the first sample shown in Table A3 for illustration. In addition, the value of learning rate for commuters  is set to 0.2 (20%) as suggested by Bogers et al (2007).

Table A1. "Base Case Scenario" commuters' itinerary Person 
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 Desired Departure Time 7:16 AM 7:17 AM 7:18 AM 7:18 AM 7:19 AM 7:20 AM 7:22 AM 7:43 AM 7:44 AM 7:46 AM 7:48 AM 7:50 AM 7:51 AM 7:51 AM 7:53 AM 7:53 AM 7:54 AM 7:54 AM 7:56 AM 7:56 AM Desired Arrival Time 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM 8:00 AM Origin 14 1 10 18 2 3 12 8 4 7 16 20 6 13 15 11 5 17 9 19 Destination 21 21 21 21 21 21 21 21 21 21 21 21 21 21 21 21 21 21 21 21 Choice car car car car car car car taxi taxi taxi taxi taxi taxi taxi taxi taxi taxi taxi taxi taxi

130

Table A2. "Base Case Scenario" commuter specific mode attributes Person 
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20

ETT_taxi (min)
43.18 42.70 41.83 41.11 40.76 39.41 37.60 43.66 43.53 42.55 41.62 40.80 39.45 38.87 39.19 38.72 36.01 37.14 37.26 36.87

ETTcar (min)
12.40 11.91 11.04 10.32 9.97 8.62 6.81 16.14 15.77 13.57 11.35 9.63 9.00 8.88 6.84 6.35 5.89 5.28 3.56 3.32

C_taxi ($)
10.48 10.48 10.48 10.48 10.48 10.48 10.48 15.60 15.43 14.18 12.98 11.94 10.20 9.46 9.87 9.27 5.80 7.24 7.40 6.90

X_taxi_time (min)
43.18 42.70 41.83 41.11 40.76 39.41 37.60 43.66 43.53 42.55 41.62 40.80 39.45 38.87 39.19 38.72 36.01 37.14 37.26 36.87

X_car_cost ($)
12.40 11.91 11.04 10.32 9.97 8.62 6.81 16.14 15.77 13.57 11.35 9.63 9.00 8.88 6.84 6.35 5.89 5.28 3.56 3.32

X_car (min)
10.48 10.48 10.48 10.48 10.48 10.48 10.48 15.60 15.43 14.18 12.98 11.94 10.20 9.46 9.87 9.27 5.80 7.24 7.40 6.90

Table A3. Simulated traits of the first sampled population Person  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20

,
0.82 2.57 -0.12 0.01 3.11 -0.02 0.48 1.77 -1.04 -0.38 -1.68 -0.03 0.23 0.09 -0.81 1.45 0.79 0.87 -0.28 -1.16

,
-0.26 -0.25 -1.34 -0.52 -0.85 -0.35 0.16 4.21 0.58 4.34 -0.30 0.59 0.68 0.36 -0.52 1.67 0.42 0.90 1.95 -0.11

131

References
AASHTO, 2013. Commuting in America: The National Report on Commuting Patterns and Trends. http://traveltrends.transportation.org/Pages/default.aspx Agatz, N., Erera, A., Savelsbergh, M., Wang, X., 2012. Optimization for dynamic ride-sharing: a review. European Journal of Operational Research 223(2), 295-303. Alshalalfah, B., Shalaby, A.S., 2012. Feasibility of Flex-Route as a Feeder Transit Service to Rail Stations in the Suburbs: Case Study in Toronto. Journal of Urban Planning and Development. 138:90-100 Arnott, R., 1996. Taxi travel should be subsidized. Journal of Urban Economics 40 316333. Bailey Jr, W.A., Clark Jr, T.D., 1992. Taxi management and route control: a systems study and simulation experiment. Proceedings of the 24th conference on Winter simulation. ACM, 1217-1222. Barry, K., 2013. New Helsinki bus line lets you choose your own route. Wired, http://www.wired.com/2013/10/on-demand-public-transit/, accessed June 28, 2014. Bierlaire, M. (2003). BIOGEME: A free package for the estimation of discrete choice models, Proceedings of the 3rd Swiss Transportation Research Conference, Ascona, Switzerland. Bierlaire, M., Sharif Azadeh, S., 2016. Demand-based discrete optimization. Report of TRANSPOR 160209. Bliss, L., 2016. A Denver Suburb Bets Big on Free Lyft Rides to Light Rail. The Atlantic CITY LAB. Retrieved from: http://www.citylab.com/commute/2016/08/centennial-lyft-transitpartnership/495080/ Atasoy,B., Ikeda, T., Song, X., Ben-Akiva, M., 2015. The concept and impact analysis of a flexible mobility on demand system. Transportation Research Part C: Emerging Technologies, Vol. 26, pp. 373-392

132

Bogers, E.A.I., Bierlaire, M., Hoogendoorn, S.P., 2007. Modeling Learning in Route Choice. Transportation Research Record: Journal of Transportation Research Board 2014, 1-8. Bonnel, P., 1995. "An application of activity-based travel analysis to simulation of change in behavior." Transportation, Vol. 22, pp. 73-93 Brownell, C., Kornhauser, A., 2014. A driverless alternative: fleet size and cost requirements for a statewide autonomous taxi network in New Jersey. Transportation Research Record 2416, 73-81. Cairns, R.D, Liston-Heyes, C., 1996. Competition and regulation in the taxi industry. Journal of Public Economics 59(1) 1-15. Cantarella, G.E., 2013. Day-to-day dynamic models for intelligent transportation systems design and appraisal. Transportation Research Part C 29, 117-130. Cantarella, G.E., Cascetta, E., 1995. Dynamic processes and equilibrium in transportation networks: towards a unifying theory. Transportation Science 29(4), 305-329. Cantarella, G.E., Velona, P., Walting, D., 2015. Day-to-day Dynamic & Equilibrium Stability in A Two-Mode Transport System with Responsive bus Operator Strategies. Networks and Spatial Economics, 15(3), 485-506 Cascetta, E., Cantarella, G.E., 1991. A day-to-day and within-day dynamic stochastic assignment model. Transportation Research Part A 25(5), 277-291. Chang, S., Schonfeld, P., 1991. Multiple Period Optimization of Bus Transit Systems, Transportation Research Part B: Methodological, Volume 25, Issue 6, p. 453-478. Chen, R., Mahmassani, H.S., 2004. Travel time perception and learning mechanisms in traffic networks. Transportation Research Record 1894, 209-221. Cheng, S.F., Nguyen, T.D., 2011. Taxisim: A multiagent simulation platform for evaluating taxi fleet operations. Proceedings of the 2011 IEEE/WIC/ACM International Conferences on Web Intelligence and Intelligent Agent Technology-Volume 02. IEEE Computer Society, 14-21.

133

Chow, J.Y.J., 2014. Policy analysis of third party electronic coupons for public transit fares. Transportation Research Part A 66, 238-250. Chow, J.Y.J., Djavadian, S., 2015. Activity-based market equilibrium for capacitated multimodal transport systems. Transportation Research Part C 59, 2-18. Chow, J.Y.J., Sayarshad, H.R., 2015. A network-sensitive reference policy for non-myopic sequential network design and timing problems. Proc. 94th Annual Meeting of the TRB, Washington, DC. Cordeau, J. F., Laporte, G., 2003. A tabu search heuristic for the static multi-vehicle dial-a-ride problem. Transportation Research Part B 37(6), 579Â­594. CortÃ©s, C.E., PagÃ¨s, L., Jayakrishnan, R., 2005. Microsimulation of flexible transit system designs in realistic urban networks. Transportation Research Record 1923, 153-163. CortÃ©s, C.E., SÃ¡ez, D., NÃºÃ±ez, A., MuÃ±oz-Carpintero, D., 2009. Hybrid adaptive predictive control for a dynamic pickup and delivery problem. Transportation Science 43(1), 27-42. Daganzo C., 1978. An approximate analytic model of many-to-many demand responsive transportation systems. Trans.Res. 12, 325-333

Daganzo, C.F., 1984. Checkpoint dial-a-ride systems. Transportation Research Part B 18(4-5), 315-327 de Borger, B., Fosgerau, M., 2012. Information provision by regulated public transport companies. Transportation Research Part B 46(4), 492-510. de Cea, J., FernÃ¡ndez, E., 1993. Transit assignment for congested public transport systems: an equilibrium model. Transportation Science 27(2), 133-147. Demirel, E., van Ommeren, J., Rietveld, P., 2010. A matching model for the backhaul problem. Transportation Research Part B 44(4), 549-561. Djavadian, S., Chow, J.Y.J., 2016. Agent-based day-to-day adjustment process to evaluate dynamic flexible transport service policies, Transportmetrica B: Transport Dynamics, http://dx.doi.org/10.1080/21680566.2016.1190674
134

Douglas, G.W, 1972. Price regulation and optimal service standards: The taxicab industry. Journal of Transport Economics and Policy 116-127. DMG, 2011. Transportation Tomorrow Survey, http://www.dmg.utoronto.ca/transportationtomorrowsurvey/. Eisenmann, T., Parker, G., Van Alstyne, M.W., 2006. Strategies for two-sided markets. Harvard Business Review 84(10), 92. Florian,M., Gaudry, M., and Lardinois, C., 1988. A two-dimensional framework for the understanding of transportation planning models, Transportation Research B, 22B, 411419. Friesz, T.L., Bernstein, D., Mehta, N.J., Tobin, R.L., Ganjalizadeh, S., 1994. Day-to-day dynamic network disequilibria and idealized traveler information systems. Operations Research 42(6), 1120-1136. Friesz, T.L., Bernstein, D., Smith, T.E., Tobin, R.L., Wie, B.W., 1993. A variational inequality formulation of the dynamic network user equilibrium problem. Operations Research 41(1), 179-191. Friesz, T.L., Bernstein, D., Stough, R., 1996. Dynamic systems, variational inequalities and control theoretic models for predicting time-varying urban network flows. Transportation Science 30(1), 14-31. Fu, L. 1999. Improving paratransit scheduling by accounting for dynamic and stochastic variations in travel time", Transportation Research Record 1666, Transportation Research Board, National Research Council, Washington, D.C., 1999, 74-81. Furuhata, M., Cohen, L., Koenig, S., Dessouky, M., OrdoÃ±ez, F., 2014. Characterizing online costsharing mechanisms for demand responsive transport systems. In: Proc. 13th International Conference on Autonomous Agents and Multiagent Systems, Paris, France.

135

Gonzales, E.J., Daganzo, C.F., 2012. Morning commute with competing modes and distributed demand: user equilibrium, system optimum, and pricing. Transportation Research Part B 46(10), 1519-1534. Guo, R.Y., Yang, H., Huang, H.J., Tan, Z., 2015. Link-based day-to-day network traffic dynamics and equilibria. Transportation Research Part B 71, 248-260. Hagiu, A., 2013. Strategic decisions for multisided platforms. MIT Sloan Management Review, Winter 2014, http://sloanreview.mit.edu/article/strategic-decisions-for-multisided-

platforms/, last accessed May 17, 2015. Han, L., Du, L., 2012. On a link-based day-to-day traffic assignment model. Transportation Research Part B 46(1), 72-84. He, X., Guo, X., Liu, H.X., 2010. A link-based day-to-day traffic assignment model. Transportation Research Part B 44(4), 597-608. Hendrickson, C., Plank, E., 1984. The flexibility of departure times for work trips. Transportation Research Part A 18(1), 25-36. Heydecker, B.G., 1986. On the definition of traffic equilibrium. Transportation Research Part B 20(6), 435-440. Horn, M.E.T., 2002. Fleet scheduling and dispatching for demand-responsive passenger services. Transportation Research Part C 10(1), 35-63. Horowitz, J.L., 1984. The stability of stochastic equilibrium in a two-link transportation network. Transportation Research Part B 18(1), 13-28. HyytiÃ¤, E., Penttinen, A., Sulonen, R., 2012. Non-myopic vehicle and route selection in dynamic DARP with travel time and workload objectives. Computers & Operations Research 39(12), 3021-3030. Jaw, J.J., Odoni, A.R., Psaraftis, H.N., Wilson, N.H.M., 1986. A heuristic algorithm for the multi-vehicle advance request dial-a-ride problem with time windows. Transportation Research Part B 20(3), 243-257.

136

Jung, J., Jayakrishnan, R., 2011. High-coverage point-to-point transit: study of path-based vehicle routing through multiple hubs. Transportation Research Record 2218, 78-87. Jung, J., Jayakrishnan, R., 2014. A simulation framework for modeling large-scale flexible transit systems. Transportation Research Record 2466, 31-41. Kansas City Star, 2015. Kansas City transit agency lowers fares and considers as-needed `microtransit' routes. http://www.kansascity.com/news/government-

politics/article41728314.html, last accessed 2/8/16. Kaspi, M., Raviv, T., Tzur, M., 2014. Parking reservation policies in one-way vehicle sharing systems. Transportation Research Part B 62, 35-50. Kim, H., 2008. New dynamic travel demand modeling methods in advanced data collecting environments, PhD Dissertation, University of California, Irvine. Kim, H., Oh, J.S., Jayakrishnan, R., 2009. Effects of user equilibrium assumptions on network traffic pattern. KSCE Journal of Civil Engineering 12(2):117-127. Kurauchi, F., Bell, M.G.H., SchmÃ¶cker, J.D., 2003. Capacity constrained transit assignment with common lines. Journal of Mathematical Modelling and Algorithms 2(4), 309-327. Lam, W.H.K., Gao, Z.Y., Chan, K.S., Yang, H., 1999. A stochastic user equilibrium assignment model for congested transit networks. Transportation Research Part B 33(5), 351-368. Lee, D.H., Wang, H., Cheu, R.L., Teo, S.H., 2004. Taxi dispatch system based on current demands and real-time traffic conditions. Transportation Research Record 1882, 193Â­200. Li, X., Quadrifoglio, L., 2010. Feeder transit services: choosing between fixed and demand responsive policy. Transportation Research Part C 18(5), 770Â­780. Li, Z.C., Lam, W.H.K., Wong, S.C., Sumalee, A., 2010. An activity-based approach for scheduling multimodal transit services. Transportation 37(5), 751-774. Liviu, P., Luke, S., 2005. Cooperative Multi-Agent Learning: The State of the Art. Autonomous Agents and Multi-Agent Systems. Volume 11, Issue 3, pp 387-434.

137

Maciejewski, M., Nagel, K., 2013. Simulation and dynamic optimization of taxi services in MATSim. VSP Working Paper 13-05, TU Berlin, Transport Systems Planning and Transport Telematics. www.vsp.tu-berlin.de/publications Mahmassani, H.S, Chang, G.L., 1986. Experiments with departure time choice dynamics of urban commuters. Transportation Research Part B 208(4), 297-320. Mahmassani, H.S., 1990. Dynamic models of commuter behavior: experimental investigation and application to the analysis of planned traffic disruptions. Transportation Research Part A 24(6), 465-484. MATSIM, Multi Agent Traffic SIMulation. http://www.matsim.org. Manheim, M.L., 1979. Fundamentals of Transportation Systems Analysis, MIT Press, Cambridge, MA. Matsushima, K., Kobayashi, K., 2006. Endogenous market formation with matching externality: an implication for taxi spot markets. In: Structural Change in Transportation and Communications in the Knowledge Society, eds. K. Kobayashi, T.R. Lakshmanan, W.P. Anderson, Edward Elgar Publishing Ltd, Northampton, MA. McNally, M.G., 2007. The Four-Step Model, in David A. Hensher , Kenneth J. Button (ed.) Handbook of Transport Modelling (Handbooks in Transport, Volume 1) , pp.35 - 53 Metrolinx, 2008. The Big Move, Greater Toronto Transportation Authority, Toronto, ON. Morlok, E.K., 1979. Short Run Supply Functions with Decreasing User Costs. Transportation Research 13B, 183Â­187. Mulley, C., Nelson, J.D., 2009. Flexible transport services: a new market opportunity for public transport. Research in Transportation Economics 25(1), 39-45. Nagel, K., FlÃ¶tterÃ¶d, G., 2012. Agent-based traffic assignment: Going from trips to behavioural travelers. In Travel Behaviour Research in an Evolving WorldÂ­Selected papers from the 12th international conference on travel behaviour research, 261-294. Nair, R., Miller-Hooks, E., 2010. Fleet management for vehicle sharing operations. Transportation Science 45 (4), 524Â­540.
138

New York Metropolitan Transportation Council (NYMTC). http://www.nymtc-res.org/aboutnymtc.html New York Taxi and Limousine Commission (NY TLC). http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml New York 2010/2011 Regional Household Travel Survey (RHTS). http://upwp.nymtc.org/project/surveys/survey2010_2011RTHS.html NYS GIS Clearinghouse. https://gis.ny.gov/gisdata/inventories/details.cfm?DSID=932 Nourbakhsh, S.M., Ouyang, Y., 2011. A structured flexible transit system for low demand areas. Transportation Research Part B 46(1), 204-216. Nourinejad, M., Roorda, M.J., 2014. A dynamic carsharing decision support system. Transportation Research Part E 66, 36-50. Nourinejad, M., Amer, A., Chow, J.Y.J., 2016. Agent-based Decision Support for a Flexible Transport Service Pilot. NSERC Engage EGP 477367-14 (Technical report) Powell, J., Huang, Y., Bastani,F., Ji, M., 2011. Towards reducing taxicab cruising time using spatio- temporal profitability maps. Advances in Spatial and Temporal Databases 242260. Oakville Transit. http://www.oakvilletransit.com/ Qian, Z.S., Zhang, H.M., 2011. Modeling multi-modal morning commute in a one-to-one corridor network. Transportation Research Part C 19(2), 254-269. Quadrifoglio, L., Dessouky, M.M., OrdÃ³Ã±ez, F., 2008. Mobility allowance shuttle transit services: MIP formulation and strengthening with logic constraints. European Journal of Operational Research 185(2), 481-494. Quadrifoglio, L., Li, X., 2009. A methodology to derive the critical demand density for designing and operating feeder transit services. Transportation Research Part B 43(10), 922-935. Regan, A.C., Mahmassani,H.S., Jaillet, P., 1998. Evaluation of dynamic fleet management systems: Simulation framework. Transportation Research Record 1645 176-184.

139

Rochet, J.C., Tirole, J., 2003. Platform competition in two-sided markets. Journal of the European Economic Association 1(4), 990-1029. Rochet, J.C., Tirole, J., 2006. Two-sided markets: a progress report. The RAND Journal of Economics 37(3), 645-667. Salvini, P.A., Miller, E.J., 2005. ILUTE: An Operational Prototype of a Comprehensive Microsimulation Model of Urban Systems. Networks and Spatial Economics, Vol. 5, 2005, pp. 217-234. Sayarshad, H.R., Chow, J.Y.J., 2015. A scalable non-myopic dynamic dial-a-ride and pricing problem. Transportation Research Part B: Methodological, Vol 81(2), pp. 539-554 Sayarshad, H.R., 2015. Smart Transit Dynamic Optimization and Informatics. PhD Thesis, Ryerson University, https://www.researchgate.net/publication/283213089_Smart_Transit_Dynamic_Optimiz ation_and_Informatics Shladover, S.E., 2006. Applications of wireless communications to cooperative ITS in the California PATH program. In: Proc. 6th International Conference on ITS

Telecommunications, Chengdu, 8-9. Schofer, J.L., Nelson, B.L., Eash, R., Daskin, M., Yang, Y., Wan, H., Yan, J., Medgyesy, L., 2003. TCRP Report 98: Resource requirements for demand-responsive transportation services, Transit Cooperative Research Program, National Academy of Sciences, Washington, DC. Scholars Geoportal. http://geo2.scholarsportal.info/ Small, K.A., 1982. The scheduling of consumer activities: work trips. American Economic Association 72 (3), 467Â­479. Smith, M. J., Wisten, M. B., 1995. A continuous day-to-day traffic assignment model and the existence of a continuous dynamic user equilibrium. Annals of Operations Research 60(1), 59-79. Smith, M.J., 1979. The existence, uniqueness and stability of traffic equilibria. Transportation Research Part B 13(4), 295-304.
140

Smith, M.J., 1984. The stability of a dynamic model of traffic assignment--an application of a method of Lyapunov. Transportation Science 18(3), 245-252. Smith, M.J., Hazelton, M.L., Lo, H.K., Cantarella, G.E., Watling, D.P., 2014. The long term behavior of day-to-day traffic assignment models. Transportmetrica A 10(7), 647-660. Spiess, H., Florian, M., 1989. Optimal strategies: a new assignment model for transit networks. Transportation Research Part B 23(2), 83-102. Tian, Q., Huang, H.J., Yang, H., 2007. Equilibrium properties of the morning peak-period commuting in a many-to-one mass transit system. Transportation Research Part B 41(6), 616-631. Train, K.E., 2003. Discrete choice methods with simulation. Cambridge University Press, Cambridge, UK. von Neumann, J., 1996. Theory of Self-Reproducing Automata (A. W. Burk, ed.), University of Illinois Press, Urbana. Waddell, P., A. Borning, M. Noth, N. Freier, M. Becke, G. Ulfarsson. 2003. UrbanSim: A Simulation System for Land Use and Transportation. Networks and Spatial Economics 3 (43-67). Wahba, M., 2008. MILATRAS Microsimulation Learning-based Approach to Transit Assignment. PhD Thesis, University of Toronto.
https://tspace.library.utoronto.ca/.../1/Wahba_Mohamed_M_200811_PhD_thesis.pdf

Wahba, M., Shalaby, A., 2014. Learning-based framework for transit assignment modeling under information provision. Transportation 41(2), 397-417. Wardrop, J.G., 1952. Some theoretical aspects of road traffic research. ICE Proceedings: Engineering Divisions 1(3), 325-362. Watling, D., Hazelton, M.L., 2003. The dynamics and equilibria of day-to-day assignment models. Networks and Spatial Economics 3(3), 349-370. Watling, D.P., Cantarella, G.E., 2013. Modelling sources of variation in transportation systems: theoretical foundations of day-to-day dynamic models. Transportmetrica B 1(1), 3-32.
141

Wilson, N.H.M., Weissberg, R.W., Hauser, J., 1976. Advanced dial-a-ride algorithms research project: final report, UMTA-MA-11-0024, Massachusetts Institute of Technology, Cambridge, MA. Wired, 2013. New Helsinki bus line lets you choose your own route. Wired, http://www.wired.com/2013/10/on-demand-public-transit/, accessed June 28, 2014. Wong, K. I., Wong, S. C., Yang, H., 2001. Modeling urban taxi services in congested road networks with elastic demand. Transportation Research Part B: Methodological, 35(9), 819-842. Wooldridge, Michael (2002). An Introduction to MultiAgent Systems. John Wiley & Sons. p. 366. ISBN 0-471-49691-X. Wu, J.H., Florian, M., Marcotte, P., 1994. Transit equilibrium assignment: a model and solution algorithms. Transportation Science 28(3), 193-203. Xu, H., OrdÃ³Ã±ez, F., Dessouky, M., 2014. A traffic assignment model for a ridesharing transportation market. Journal of Advanced Transportation, in press,

doi:10.1002/atr.1300. Xu, H., OrdÃ³Ã±ez, F., Dessouky, M., 2015. A traffic assignment model for a ridesharing transportation market. Journal of Advanced Transportation 49(7), 793-816. Yang, F., Zhang, D. 2009. Day-to-day stationary link flow pattern. Transportation Research Part B 43(1), 119-126. Yang, H., Leung, C.W.Y., Bell, M.G.H., 2010. Equilibria of bilateral taxi-customer searching and meeting on networks. Transportation Research Part B 44(8-9), 1067-1083. Yang, H., Wong, S. C., 1998. A network model of urban taxi services. Transportation Research Part B 32(4), 235-246. Yang, H., Wong, S. C., Wong, K. I., 2002. DemandÂ­supply equilibrium of taxi services in a network under competition and regulation. Transportation Research Part B 36(9), 799819.

142

Yang, Hai, Min Ye, Wilson Hon-Chung Tang, Sze Chun Wong. 2005. A multiperiod dynamic model of taxi services with endogenous service intensity. Operations research 53(3) 501-515. Zhang, D., Nagurney, A., Wu, J., 2001. On the equivalence between stationary link flow patterns and traffic network equilibria. Transportation Research Part B 35(8), 731-748. Zhou, J., Lam, W.H.K., Heydecker, B.G., 2005. The generalized Nash equilibrium model for oligopolistic transit market with elastic demand. Transportation Research Part B 39(6), 519-644.

143

