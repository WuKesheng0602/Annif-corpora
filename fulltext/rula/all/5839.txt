LOCATION AND SENSING NETWORK FOR INDUSTRIAL AUTOMATION

by

Peyman Moeini Bachelor of Biomedical Engineering Ryerson University, 2013

A Thesis Presented to Ryerson University in partial fulfillment of the requirements for the degree of Master of Applied Science in the program of Electrical & Computer Engineering

Toronto, Ontario, Canada, 2016 © Peyman Moeini

Author`s Declaration for Electronic Submission of Thesis

I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this thesis to other institutions or individuals for sole purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or other means, in total or in part, at the request of other institutions or individuals for the sole purpose of scholarly research. I understand that my thesis may be made electronically available to the public.

ii

LOCATION AND SENSING NETWORK FOR INDUSTRIAL AUTOMATION
© Peyman Moeini, 2016 Master of Applied Science Department of Electrical & Computer Engineering Ryerson University

Abstract:
The usages of Wireless Sensor Networks (WSN) have been growing exponentially. WSN are utilized for variety of applications such as monitoring environmental conditions of shipping containers or monitoring the utilization status of construction equipment. There have been many incremental enhancements with respect to energy efficiency and latency improvement of Wireless Sensor Network (WSN) protocols; however, localizing WSNs in indoor environments is poorly understood. In this thesis reports, the performance of existing protocol designs under the assumption that indoor positioning is required will be evaluated. More specifically, the metric considered for this study includes throughput, latency and energy efficiency. Afterwards, an energy efficient WSN protocol is presented called the Location and Sensing Network (LSN) that also has indoor positioning capabilities.

iii

Acknowledgement
I would like to express my sincere gratitude to my supervisor, Dr. Muhammad Jaseemuddin for his continuous encouragement and support throughout my research. Dr. Jaseemuddin always kept an open mind toward the ideas I propose to solve complex problems while making sure I am not distracted from the ultimate path and goal of our research. His unique approach, mentorship, and supervision only made our result driven research enjoyable and valuable.

iv

Dedication
This master's Thesis is dedicated to my family

v

Table of Contents

Author`s Declaration for Electronic Submission of Thesis ............................................................ ii Abstract: ......................................................................................................................................... iii Acknowledgement ......................................................................................................................... iv Dedication ........................................................................................................................................v Table of Contents ........................................................................................................................... vi Tables:.............................................................................................................................................ix List of Figures .................................................................................................................................. x Chapter 1 ..........................................................................................................................................1

1 Introduction .................................................................................................................................1
1.1 Wireless Sensor Network (WSN) ........................................................................................1 1.2 Real-time Location System (RTLS) ....................................................................................3 1.3 Medium Access Control Protocol ........................................................................................3 1.4 Problem Statement ...............................................................................................................5 1.5 Motivation and Contribution................................................................................................5 1.6 Thesis Organization .............................................................................................................6 Chapter 2 ..........................................................................................................................................7 2 Literature Review ........................................................................................................................7 2.1 Feasibility Analysis of WSN with Localization Capability .................................................7 2.2 RTLS Latency Versus System Reliability .........................................................................10 2.3 Various Media Access Controls (MACs) and their Feasibility for Indoor Positioning .....11 2.3.1 2.3.2 2.3.3 Frequency Division Multiple Access (FDMA) Scheme ........................................12 Code Division Multiple Access (CDMA) Scheme ................................................13 Time Division Multiple Access (TDMA) Scheme ................................................13
vi

2.3.4 2.3.5 2.3.6

Medium Access Control (MAC) ............................................................................15 Synchronous and Asynchronous Protocols ............................................................15 MAC Latency Analysis..........................................................................................16 2.3.6.1 Dynamic Medium Access Control (DMAC) Latency .............................17 2.3.6.2 IEEE 802.11 Latency...............................................................................17 2.3.6.3 Sensor Medium Access Control (SMAC) Latency .................................17 2.3.6.4 Adaptive SMAC Latency ........................................................................18 2.3.6.5 Time Division Multiple Access (TDMA) Latency..................................18

2.3.7

MAC Energy Efficiency Analysis .........................................................................20 2.3.7.1 Sensor Medium Access Control (SMAC) Energy Efficiency .................20 2.3.7.2 Timeout Medium Access Control (TMAC) Energy Efficiency ..............21 2.3.7.3 Utilization Medium Access Control (UMAC) ........................................22

2.3.8

MAC and Localization Analysis ............................................................................23 2.3.8.1 Trust Based Localization Protocol (TrustLP) ..........................................23 2.3.8.2 IEEE 802.11 & Wireless Local Area Network Localization...................23

2.4 Number of Nodes and Location Accuracy Relationship ...................................................25 Chapter 3 ........................................................................................................................................30 3 Industrial Network Design Suitable for Localization and Se nsing ...........................................30 3.1 Industrial Automation and Energy Efficient Indoor Positioning .......................................30 3.2 LSN Network Topology Design ........................................................................................31 3.3 Localization and Sensing Network (LSN) MAC Protocol Design ....................................34 3.4 LSN System Architecture ..................................................................................................37 3.5 LSN Network MT Latency ................................................................................................40 3.6 LSN Network MT Energy Efficiency ................................................................................40

Chapter 4 ........................................................................................................................................42
4 Simulated Results & Discussion ...............................................................................................42
vii

4.1 Power Efficiency Analysis .................................................................................................43 4.2 Latency Analysis ................................................................................................................51 4.3 Network Cycle Duration Analysis .....................................................................................53 Chapter 5 ........................................................................................................................................56 5 Case Study & Experimental Results .........................................................................................56 5.1 Summary of Specifications ................................................................................................56 5.1.1 5.1.2 Functional Specification ........................................................................................56 Technical Specifications ........................................................................................57

5.2 System Organization ..........................................................................................................57 5.2.1 System Description Overview ...............................................................................57

Chapter 6 ........................................................................................................................................68 6 Conclusion and Future work .....................................................................................................68
7 References .................................................................................................................................69

viii

Tables:

Table 1: MAC logic and state of each node in various channels ...................................................37 Table 2: Radio power consumption in different modes .................................................................44 Table 3: Minimum System (MS) components ...............................................................................45 Table 4: Proposed Network Power Consumption per cycle. LSN power requirements of a MS is 2.502 mW per cycle. ......................................................................................................................46 Table 5: TMAC Power Consumption per Cycle............................................................................48 Table 6: LSN, SMAC, and TMAC MT power consumption per cycle in presence of 50 MTs ....51 Table 7: LSN, SMAC, and TMAC MT latency per cycle in presence of 50 MTs ........................53 Table 8: LSN, SMAC, and TMAC MT cycle duration in presence of 50 MTs ............................54 Table 9: LSN, SMAC, and TMAC MT cycle duration per cycle in presence of 50 MTs .............55 Table 10: Cycle duration of LSN, SMCA, and TMAC when number of ANs are two and number of MTs vary....................................................................................................................................55 Table 11: Summary of results and findings of this thesis report ...................................................67

ix

List of Figures

Figure 1-1: Medium Access Control in OSI Reference Model [18]. ...............................................4 Figure 2-1: Common examples of network topology ......................................................................8 Figure 2-2: Area-based APIT Algorithm .........................................................................................9 Figure 2-3: Time Division Multiple Access (TDMA) classification .............................................14 Figure 2-4: WSN's two common MAC protocols .........................................................................15 Figure 2-5: Measured time to transmit all data packets for the 10 node topology [55] .................19 Figure 2-6: Measured time to transmit all data packet for the 5 nodes topology [55] ...................19 Figure 2-7: SMAC protocol and wake up periods demonstration [57]..........................................20 Figure 2-8: TMAC protocol with representation of Tact period [59] ............................................21 Figure 2-9: MUAC Transmission schedule [61]............................................................................22 Figure 2-10: Demonstration of approximate location of a MT shaded in blue. The red circles represent fixed ANs with known locations. ...................................................................................25 Figure 2-11 Network Size (250 m x 250 m) [70] ..........................................................................26 Figure 2-12: Network Size (400 m x 400 m) [70] .........................................................................27 Figure 2-13: Positioning deviation of a MT as number of ANs increase [71]...............................28 Figure 2-14: As it can be observed power fluctuations in office environment (a) is minimal since wall absorb wireless signals; whereas, w-iLab environment demonstrates significant fluctuations due to presence of metal obstacles in the environment which cause multi-path effect and signal arrival delay (b) [72]. .....................................................................................................................28 Figure 3-1: LSN Topology.............................................................................................................34
x

Figure 3-2: MAC Design Logic Diagram ......................................................................................36 Figure 3-3: AN1 Data Visualization in 3D Space..........................................................................38 Figure 3-4: AN2 Data Visualization in 3D space ..........................................................................39 Figure 3-5: AN1 & AN2 Data Visualization in 3D Space.............................................................39 Figure 4-1: This figure demonstrates that contention-based MAC protocols such as SMAC and TMAC require overlapping MT schedules. ...................................................................................44 Figure 4-2: This figure demonstrates the LSN has a non-overlapping schedule for its MTs, which eliminates the need to have RTS and CTS acknowledgement message. .......................................44 Figure 4-3: SMAC MT Communication with other ANs [66] ......................................................47 Figure 4-4: TMAC MT Communication with other ANs [67] ......................................................48 Figure 4-5: Power consumption of a MT when number of MTs is constant but number of ANs increases .........................................................................................................................................50 Figure 4-6: MT latency when number of MTs is constant and number of ANs increase..............51 Figure 4-7: SMAC & TMAC to LSN latency ratio vs. number of ANs. .......................................52 Figure 4-8: Demonstration of a network that contains 50 MTs. As shown in the diagram as number of ANs increase LSN cycle duration remains constant at 7.6 seconds whereas SMAC and TMAC cycle duration increase ......................................................................................................54 Figure 4-9: Cycle duration when number of ANs are constant while number of MTs increase. This analysis is under the condition that there are 2 ANs in the network. .....................................55 Figure 5-1: System configuration of proposed network design .....................................................58 Figure 5-2: This figure shows the relationship between number of ANs and duration of cycle. ..64 Figure 5-3: Network layout for testing localization .......................................................................65

xi

Figure 5-4: Demonstration of individual raw RSSI values and average RSSI values of multiple ANs. ...............................................................................................................................................65 Figure 5-5: Demonstration of localization error reduction when number of ANs are increased...66

xii

Chapter 1
Introduction

1

Introduction

With the evolution of Wireless Sensor Networks (WSN) towards the Internet of Things (IoT) it is projected that from 10 billion devices connected in 2015, there will be 34 billion devices connect to internet by 2020 [1] [2]. WSN is utilized for variety of application such as monitoring environmental conditions of shipments or monitoring heavy equipment in manufacturing plants. In parallel, inspired by Global Positioning System (GPS) technology, many scientists and engineers have tried to repeat the same localization methodologies for tracking objects in indoor environments, called Real-time Location System (RTLS) [3]. RTLSs have many benefits such as targeted advertising, tracking children in kindergarten, tracking inventory in a warehouse and many more. Despite various advancements in power efficiency and latency of WSNs have been undertaken localization of WSNs in industrial environments are poorly understood. In other words, suppose if it was planned to incorporate accurate indoor positioning capability in existing WSNs, what design modifications are required in the Media Access Control (MAC) of an existing network? Alternatively, one can argue how MAC protocol needs to be improved to support accurate localization, while accounting for low latency, and energy efficiency of a network in an industrial environment. The motivation behind this research is to study various limitations that exist with WNSs and RTLSs and introduce a novel network protocol called the Localization and Sensing Network (LSN) that supports reliable localization in addition to low latency, high reliability, and high energy efficiency.

1.1 Wireless Sensor Network (WSN)

1

Wireless Sensor Networks (WSNs) or sometimes called Wireless Sensor and Actuator Network (WSANs) are special transducers that have communication infrastructure [4]. WSNs are generally spatially scattered in a physical space, and are utilized to monitor and control environmental or physical conditions [4]. The WSN is mainly consists of two networks: 1) Mono-directional WSN that are utilized for monitory purposes and bi-directional WSN that are utilized for both monitory and control applications [5]. The main building blocks of WSN are "nodes". Nodes are physical devices that generally contain a processing unit, powe r source, and transceiver [6]. Each node can generally connect with one or more nodes. WSN can contain as few as a dozen or as many as few thousands nodes. Generally, in a WSN a large quantity of sensor nodes are randomly installed inside or near a monitoring area (called sensor field) for data acquisition purposes. In most WSNs sensor nodes are capable of hopping which means a sensor note can transmit the collected data through other sensor nodes to the main location which usually a gateway that stores and visualizes the data locally or it displays it on an online website [7]. WSNs can have various topologies such as simple star network to advance multi-hop wireless mesh network. WSN has various propagation methodologies such as flooding or routing. Flooding refers to a methodology where every incoming packet is sent through all reachable nodes until packets get to the final destination [8]. Routing on the other hand refers to a methodology where network selects the best path for a data to gets to the destination node through other nodes [9]. WSN has application in various industries such as environmental, industrial, health, waste water monitoring and more. There are various commercially available protocols that utilize WSN such as Zigbee protocol and Xbee devices. Zigbee has mesh network topology, is energy efficient, and low duty cycle [10]. Zigbee generally performs poorly in applications that require localization of sensor nodes in long ranges. Various terminologies are used when a WSN is described, to ensure reader has a clear understanding of the terminology a few important terminologies is described. A tag can be on Sleep mode which is a state where tag is turned off. In this state the tag has no ability to communicate with any other tags. A second state of tag is called the Idle Listening mode, in this state tag is not transmitting any data but is listening for signals, tag consumes more power in this state compared to Sleep state. Furthermore, in WSN Frame is referred to as data that is transmitted or received between two or multiple tags. A unit of Frame commonly has protocol control and addressing data. Furthermore,

2

a Frame generally transmits or receives data serially bit-by-bit and consists of a header and footer that frames the data.

1.2 Real-time Location System (RTLS)

Wireless Indoor Positioning (LPS) system or Wireless Real-time Location System (RTLS) is a network of devices used to wirelessly track the location of objects or people within an indoor environment [11]. RTLS system usually consists of mobile tags, fixed nodes and a central intelligent system that estimates the location of a mobile tag utilizing various methodologies such as triangulation. It is a difficult task to reliably and accurately locate mobile tags within an indoor environment. This is due to the fact that readers cannot necessarily be placed on the line of sight of the receivers, the multi-path propagation of signals being transmitted indoors is significant, and signal attenuation is inconsistent [11]. There are several methodologies utilized to triangulate a mobile tag. The most common techniques are localization based on received signal strength (RSSI), Time of Arrival (ToA), Angle of Arrival (AoA), and Time Difference of Arrival (TDoA) [12]. Despite various methodologies utilized to estimate the distance of a mobile tag from a fixed node many indoor tracking systems utilize triangulation to pin-point the location of a mobile tag. In other words, wireless indoor tracking system can be defined as a network of devices used to wirelessly locate tags inside a triangle. A triangle is formed by installing at least three fixed nodes [13]. Wireless devices are limited in range; meaning, transmitters and receivers must be within certain proximity from each other in order to communicate reliably.

1.3 Medium Access Control Protocol

A communication network is defined as a collection and integration of various links or terminal nodes. Links, also called routers, are communication channels that connect at least two communicating devices [14]. A common network model is called the Open Systems
3

Interconnection model (OSI model) [15]. This model, endorsed by International Organization of Standardization (ISO), divides communication systems into fractions of smaller parts called the layers [15]. As shown in Figure 1-1 the layers are designed such that they can communicate or exchange data/commands with the layer above or below them. For example, a main responsibility of Data Link is to manage medium accessibility of nodes [15]. Management of nodes can be accomplished through various ways such as managing time slots a node can get access to the medium. The task mentioned is called Medium Access Control (MAC) [16]. Formally, Metropolitan Area Network (MAN) and IEEE802 Local Area Network (LAN) define MAC as a sublayer of data link layer [17]. MAC layer has various responsibilities such as addressing, transfer of data to or from upper layers, protection against communication errors, frame recognition and delimiting, and arbitrating the access of other nodes with one channel or vice-versa. Furthermore, protocol designs must be in such a way that scalability of the network including size of network, various changes in network structure adding or removing various tags from the network and finally eliminating transient noise that may appear on wireless channels is efficiently managed [17]. MAC design becomes more important as the number of nodes grow this is because problems such as latency management, system throughput, interferences prevention, and network reliability becomes more visible to a system.

Figure 1-1: Medium Access Control in OSI Reference Model [18].
4

1.4 Problem Statement

The problem with WSN is that although WSN works effectively to collect sensory data, it performs poorly when it comes to fulfilling the requirements of indoor positioning of mobile tags especially in industrial environments. The general problems with location enabled WSN include high-energy consumption of mobile tags and complexity of network design since WSNs are contention based. WSNs require either tight sleeping schedule or high tag wake-time in order to identify the location of a tag. Indoor positioning in industrial environments is challenging due to existence of various interferences such as Electromagnetic Interference (EMI), Radio Frequency Interference (RFI). One of the techniques to improve the accuracy of indoor positioning is to increase the number of nodes. By increasing the number of nodes power efficiency of tags is negatively affected. Power efficiency of WSN in industrial environments needs to be highly optimized, as battery replacement of mobile tags can be quite expensive. Therefore, the problem statement is how a network should be designed so that it has both high indoor positioning & sensing capability in addition to has high battery efficiency.

1.5 Motivation and Contribution

The motivation behind this report is to present an improved WSN that has high localization accuracy, low latency, and extensive battery life. The improved WSN performs needs to perform reliably in harsh environments such as a manufacturing. In this report, a TDMA based wireless sensor network introduced that can take on as many anchored nodes as needed in order to improve localization accuracy while maintaining a constant low energy consumption and low latency for mobile tags. The system proposed is called Localization and Sensing Network (LSN).

5

1.6

Thesis Organization

The rest of this thesis is organized as follow: Prior research works are discussed in Chapter 2. In more details, Feasibility of WSN with added localization capability is analyzed, Real-time Location System latency with added sensing capability is evaluated, and various Medium Access Control (MAC) designs are discussed and their feasibility for indoor positioning is assessed. In Chapter 3, novel protocol design is revealed that has low latency, high battery efficiency, and both sensing and localization capability. In Chapter 4 simulated results are declared and assessed, in Chapter 5 experimental results are published and evaluated, and finally conclusions and future work is discussed in Chapter 6.

6

Chapter 2

2

Literature Review

In this chapter, various MAC protocols of WSNs are described and performance of each methodology is evaluated. In more details, WSNs ' power efficiency, latency, localization capability and scalability is studied. Furthermore, various RTLSs are studied and their latency is assessed under the condition that RTLS system must be capable of efficiently sense various attributes.

2.1 Feasibility Analysis of WSN with Localization Capability

Wireless Sensor Networks (WSNs) are designed to be able to support hundreds or potentially thousands of tags. Tags are small processing units that are capable of measuring various physical characteristics such as temperature, color, and etc. of its surrounding environment and transmitting the data utilizing radio links. WSNs are usually low in computer power and are small in size which means they can have a relatively short battery life [19]. For example, a battery that has a capacity of 2000 mAh and is on idle listening mode can last for only 28 hours is the current consumption on Idle Listening mode is 50 mA. WSNs can be categorized based on their network topology. In communication, network topology refers to various ways tags can be arranged and communicate to each other [20]. As it could be observed in Figure 2-1 tags can communicate to each other in special paths; for example, in Star network topology multiple tags called the end-devices can only communicate with a central tag called, the Coordinator; whereas, a fully connected network topology has all its tags communicate to all other tags.

7

Figure 2-1: Common examples of network topology

There are various types of WSNs such as terrestrial, underground, underwater, multimedia, and mobile WSNs [21]. Terrestrial and mobile WSNs are the main focus of this thesis. Terrestrial WSNs are broken down into two categories: 1) Ad hoc (unstructured) or 2) Preplanned (structured) [22]. In ad hoc mode sensor tags are distributed in a random fashion whereas in preplanned scenario the locations of sensor tags are pre-defined [22]. In mobile WSNs the sensor tags can free move in the network which means as long as the sensor tags are within the proximity range of other tags they can communicate; however, the location at which the data comes from is poorly understood. WSN localization can be broken down into two categories: 1) Range-based methods and 2) Range-free methods [23]. Range-based methodology localizes sensor tags through calculating the distance between known and unknown sensor tags; whereas, range-free method utilizes radio connectivity information that exist between neighboring points as a reference to determine locations of smart tags [23]. The range-based methodology has comparatively higher localization accuracy; however, since distances need to be measured power consumption is increased which results in lower battery life [23]. As described in section 1.2 there are various methodologies utilized to capture distance between two sensor tags such as RSSI, TDOA, TOA, and AOA. Not only range-based
8

localization method requires high power signals, its accuracy could be low in environments where there are lots of noise such as shadowing effect, multi-path reflections, and no line-ofsight [24]. The range-free methodology on the other hand does not require point-to-point distance or wireless signal angle information. Range-free methodologies mainly utilize DV-hop,

Approximate Point-in-Triangulation Test (APIT), and Amorphous algorithms [25]. In DV-hop technique each unknown sensor tag requests its neighboring sensor tags to provide their estimated hop sizes that is calculated relative to at least three known anchors, after distance estimates are obtained multi-lateration is applied to estimate the position of sensor tag [26]. APIT on the other hand utilizes iterative and non-localized algorithm that utilizes anchor nodes to determine location estimation [27]. In this methodology, it is assumed that anchors have high power transmitters that are aware of their location sends beacons to sensor nodes [27]. The more anchors are present in the network the more accurate localization would be. To estimate the location of a sensor node beaconing nodes are isolated in the algorithm to form triangles. The sensor tag is either inside or outside of the triangle and by exhausting the location of sensor tag based on its presence inside or outside of triangles, the approximate location of sensor tag can be identified as shown in Figure 2-2 [27].

Figure 2-2: Area-based APIT Algorithm Amorphous algorithm has low accuracy and have similarity to DV-hop technique. Amorphous algorithm utilizes the hop distance between two nodes instead of calculating the linear distance
9

between sensor tag and anchors [28]. The following steps are taken to calculate location based on amorphous algorithm. Each anchor transmits a message to the unknown sensor tags utilizing flooding methodology. Then Equation (1) is used to determine the minimum hop from the node i to k [29]:    ( )  (,) + (,) - 0.5 | ( )| + 1

(,) =

(1)

Where (,) is the minimum hop from the unknown sensor tag i to the anchor beacon k. Furthermore, (,) is the integer hop from sensor tag  to anchor beacon  . On the other hand, (,) is the integer hop from sensor tag to the anchor beacon  . In addition, () are the neighbor smart tags that have unknown location. Furthermore, to determine the average distance of sensor tag to the anchor beacon Equation (2) is utilized [29]:
1 -

 =  (1 + 

-   -(/)(-1- ) )
-1

2

(2)

Where  is sensor tag's wireless range and  is the network's average connectivity. To calculate the distance  of anchor beacon with known location from the unknown sensor tag the minimum hop from the sensor tag to the anchor beacon and the average distance of one hop can be calculated utilizing Equation (3) [29]:

 =  × (,)

(3)

2.2 RTLS Latency Versus System Reliability

10

Real-time Location System (RTLS) is a system that can automatically identify and track the location of objects and people in real-time (e.g. a building). Common RTLSs consists of mobile tags that are connected to objects or people, anchored nodes that are placed in fixed and known locations, and a master node that is utilized to calculate the location of mobile tags based on data received from anchored nodes. As mentioned in Section 1.2, various localization methodologies exist such as Time of Arrival (TOA), Time Difference of Arrival (TDOA), Received Signal Strength (RSSI), and Angle of Arrival (AOA) [30]. In general, RTLSs have various limitations such location jitter, and jump. In addition, it is common that RTLS system detect locations incorrectly, experience temporary and steady location errors, and lastly gets none or no direct response. In this section, RTLS limitations are described in more details and various solutions proposed by other peers are explained. Location jitter refers to a situation at which a sensor tag is known to be physically at rest by RTLS displays it as a moving tag [31]. This situation is caused by various reason including other objects in an environment to be moving around or existence of various noises in the environment causes instability of results [31]. To stabilize the system more samples are required which results in an increase in localization latency. Location jump on the other hand, refers to a situation where RTLS displays the coordinates of a tag in a location that is physically impossible. The error is caused mainly due to improper modeling of location engine. Locations are never reported exactly since in order to achieve a real-time system precision must be compensated. In more details, there is a non-linear inverse relationship between localization precision and RTLS latency. Moreover, steady location error refers to situations where RTLS constantly reports location by certain margin of error. This situation can be caused by various reasons such as lack of proper calibration, lack line-of-sight of a at least one anchored node to sensor tag. Such incidents can cause other issues such as lost communication.

2.3 Various Media Access Controls (MACs) and their Feasibility for Indoor Positioning

11

Located in the sub-layer of second layer of the OSI, MAC defines the logic to coordinate and manage access across various sensor tags in a network. MAC has great impact in latency, energy efficiency, and localization accuracy of both WSN and RTLS [32]. MAC can control channel access to individual or group sensor nodes. There are various types of channel accesses . In network communication and telecommunication, Multiple Access Channel refers to a channel through which at minimum two senders send data to a common receiver [33]. There are several types of Multiple Access Channels. The three most common Multiple Access Channels are Time Division Multiple Access (TDMA), Frequency Multiple Access (FDMA), and Code Multiple Access (CDMA).

2.3.1

Frequency Division Multiple Access (FDMA) Scheme

Frequency Division Multiple Access or FDMA is a methodology that identifies the ID of users or devices based on their frequency band. FDMA works based on frequency-division multiplexing or FDM schemes. FDM is a methodology that divides up the overall available bandwidth in a communication medium (or network) into non-overlapping narrower frequencies and assigns each of the non-overlapping frequencies to a user called the "sub -bands" [34]. In FDMA approach, each user gets an individual allocation of one or several frequency channels or bands. Generally, there would not be significant interference problem with FDMA technique as long as channel spacing between adjacent channels is enough so that the neighbors do not overlap [35]. Reliable channel spacing means through utilization of wideband channels means fewer channels would be available in a defined bandwidth. Alternatively, through utilization of narrowband channels more channels can be fit in a defined bandwidth with a drawback of higher probability for Adjacent Channel Interference (ACI) [35]. To calculate ACI by partially overlapping channels [36] introduced a mathematical model which [37] further enhanced it by combining [36] methodology with Signal to Interference plus Noise (SINR) criterion. SINR is a quantity utilized is a theoretical that represents the information transfer rate in a wireless communication network [38]. Based on the results obtained by peers, in FDMA technique there is an inverse relationship between scalability and signal interference that is in order to add more
12

channels in a finite bandwidth channel spacing will be reduced which results i n higher probability of ACI. To localize a mobile tag at least three receivers are required in FDMA access channel assuming the channel spacing is enough to minimize ACI, the system would be very inefficient if FDMA technique beside data communication was utilized for localization. The two scenarios below describe an FDMA based system requirements for data communication vs. data communication and localization.

2.3.2

Code Division Multiple Access (CDMA) Scheme

The Code Division Multiple Access or CDMA is a methodology that identifies the ID of devices by utilizing spread-spectrum. In telecommunication, spread-spectrum techniques refer to methodologies where a signal with a pre-defined bandwidth is spread in frequency domain. This results in a signal with a wider bandwidth. CDMA has a relatively larger radio channel capacity compared to TDMA and FDMA. Radio Channel Capacity can be defined as the maximum number of users that can utilize a fixed frequency band simultaneously and establish communication [39]. Localization utilizing CDMA can be quite challenging as interference in anchor nodes highly effect the quality and accuracy of localization.

2.3.3

Time Division Multiple Access (TDMA) Scheme

Time Division Multiple Access or TDMA is a methodology that identifies the ID of users or devices based on the time at which they send a signal on a periodic frame [40]. TDMA works based on time-division multiplexing or TDM schemes [40]. TDM is a methodology that enables the recipient of individual signals over a common signal route through ongoing synchronization of the network at each transmission and assigning unique delays to each device [40]. The TDMA can be classified into two sub-categories: 1) Random Access 2) Controlled Access [41]. Random Access protocol are designed to allow operations that are fully distributed which means, a sensor
13

tag determines the conditions of a channel to estimate the most convenient time a channel can be accessed [41]. There are various types of protocols that are utilized to fulfill such requirement such as Carrier Sense Multiple Access with Collision Avoidance (CSMA/CA), Application Layer Optimization and High Availability (ALOHA) [42]. On the other hand, the controlled access protocol refers to a network where the time slots for each sensor tag is pre-defined [43]. These types of networks require regular time-slot synchronization that is generally coordinated by a centralized anchored node [43].

TDMA

Random Access Controlled Access

Figure 2-3: Time Division Multiple Access (TDMA) classification

The methodologies introduced above have their own performance advantages and disadvantages and one would chose a certain class based on the target application. The differences with the two sub-categories mainly revolves around the network's latency, packet error rate, localization accuracy, throughput, and energy consumption requirements. In more details, energy consumption and localization accuracy have a non-linear reverse relationship to each other. In other words, the more reliable the localization accuracy is the longer the latency and shorter the battery life would be. This is because system would require multiple samples in order to accurately navigate the location of a mobile tag.

14

2.3.4

Medium Access Control (MAC)

In most low power devices such as Zigbee protocol, power consumption is minimized by default design of MAC layer [44]. Energy can be wasted through various phenomena such as idle listening, overhearing, or transmission of lengthy frames. Idle listening accounts for the majority of energy consumption in sensor tags. Idle mode consumes very similar amount of power as it would when it is set to be in listening mode [44]. Through modification of MAC layer power can be managed while ensuring location, sensor data, and identification of a sensor tag is successfully achieved. WSN in MAC layer has two common protocols known as asynchronous and synchronous protocols [44].

MAC

Asynchronous Synchronous

Figure 2-4: WSN's two common MAC protocols

2.3.5

Synchronous and Asynchronous Protocols

Asynchronous protocol does not transmit data based on a regular schedule [45]. In asynchronous systems sensor tags, or anchor nodes can request to receive various types of data from other sensor tags, or anchor nodes while can overhear data coming from other nodes [45]. Asynchronous protocol is mostly beneficial for event-based systems where an actuator or an alert is triggered as a result an event usually detected by a node and communicated via wireless signals. The disadvantage with asynchronous system is that it can never go to deep sleep since it has to be aware of potential event that might occur.
15

Synchronous protocol on the other hand, transmits data based on preplanned schedule [46]. In this methodology, energy efficiency is conserved because tags get the opportunity to go into full sleep during their sleep time. This option has a disadvantage and that is sensor tags are not accessible in real-time and in order to communicate to sensor nodes network needs to wait until the next wake up cycle. Synchronous system is most beneficial for environmental monitoring applications where a system needs to collect sensor data of a "thing" for a long period of time and network needs to be very energy efficient.

2.3.6

MAC Latency Analysis

Network latency refers to the time it takes for sensor tag to send one packet of data to another device such as anchor node or vise-versa [47]. There are various ways to calculate latency such as measuring the time of flight of a signal or through calculating latency through performing theoretical calculations. Network latency requirements mainly depends on the application. For example, measuring heart rate of a patient requires low latency network whereas counting the number of parts coming out of a slow conveyor belt does not need latency network optimization. There have been various techniques developed by other peers that suggest low-latency MAC for WSNs with the cost of low energy efficiency. Alternatively, high latency in most WSNs were introduced in order to conserve energy of sensor tags but various MAC complications were created as data flooded during wake up mode of WSNs [48]. An important problem has been minimally improved is the problem of data forwarding interruption [49]. Data forwarding interruption exists in most adaptive duty-cycle techniques because nodes that are in the range of a broadcasted command will be unaware of certain data transmissions and will soon go to sleep without contributing to the network [50]. This issue results in packets end up being queued until the next wake up period occurs. The queued event will then cause longer latency in the network.

16

2.3.6.1

Dynamic Medium Access Control (DMAC) Latency

To improve MAC latency problem Dynamic Medium Access Control (DMAC) was proposed by peers. DMAC is designed such that it can adjust duty cycles in accordance to traffic load in a network; moreover, it is designed to solve interruption problem by considering the depth of a hop in the network, predicting data flow, and send More-To-Send (MST) packets [51]. MST packets are messages sent to the parent nodes in the network informing them that there are more data stored in the nodes buffer that needs to be transmitted to another node during network up time [51].

2.3.6.2

IEEE 802.11 Latency

Another protocol utilized that has low latency is IEEE 802.11 scheme. This scheme is broadly utilized in ad hoc wireless networks due to its reliability and ease-of-deployment; however, one of the main disadvantages of IEEE 802.11 is its high power consumption as nodes are commonly in the idle mode [52]. The most common reason why IEEE 802.11 is energy inefficient is because IEEE 802.11 protocol was primarily utilized in applications where power consumption was not an issue. IEEE 802.11 is a contention-based protocol; meaning, nodes are constantly in idle mode [53].

2.3.6.3

Sensor Medium Access Control (SMAC) Latency

Sensor Medium Access Control (SMAC) is a MAC protocol that is designed to support WSNs which means a main target has been to improve power efficiency of the network. SMAC is a contention based protocol which means it is expected to be constantly on but various optimizations introduced in SMAC ensures network is power efficient; for example, network
17

periodically listens and sleeps. Nodes in sleep mode consume very little battery; therefore, battery is conserved in SMAC protocol. Although SMAC protocol has high emphasis on energy efficiency of WSN its latency is poorly considered compared to other MAC designs.

2.3.6.4

Adaptive SMAC Latency

Adaptive SMAC was introduced to improve latency of SMAC protocol. Adaptive SMAC has lower latency by design as it wakes up early to reduce data transmission delays. Furthermore, the adaptive SMAC approach controls SMAC duty cycle to adjust itself with network traffic (e.g. low or high) [54]. In more details, a node wakes up its neighbors that are in the proximity of it after a transmission in completed so that the potential delay that can be created by waiting for the next transmission is avoided [54]. In other words, a neighboring node that presents to be the next hop passes along its message directly rather than waiting for the upcoming listen period [54].

2.3.6.5

Time Division Multiple Access (TDMA) Latency

Time Division Multiple Access (TDMA) transmits its data through utilization of a schedulebased protocol. In this methodology, system latency can be high but network is greatly power efficient and has minimal collisions. Furthermore, TDMA system also has a disadvantage of scheduling complications and requirement for a central element. Figure 2-5 and Figure 2-6 represent the results obtained through comparing latency of various protocols such as SMAC, Adaptive SMAC, IEEE 802.11, and TDMA [55]. In more details, these graphs represent the time that is needed to transmit all messages from sources to the destination. As it could be observed, SMAC protocol is the least efficient when it comes to successfully transmitting all messages from sources to destination. TDMA and IEEE 802.11 on the other hand have very similar results, the main difference between the two is that TDMA is more battery
18

efficient. Lastly, it is observed that Adaptive SMAC performs much better than SMAC with respect to its latency. This improved performance is due to introduction of adaptive listening technique.

Figure 2-5: Measured time to transmit all data packets for the 10 node topology [55]

Figure 2-6: Measured time to transmit all data packet for the 5 nodes topology [55]

19

2.3.7

MAC Energy Efficiency Analysis

WSNs are commonly battery operated; for this reason, energy conservation of sensor tags is crucial. There has been various MAC designed introduced to optimize battery efficiency of sensor tags for both synchronous and asynchronous protocols.

2.3.7.1

Sensor Medium Access Control (SMAC) Energy Efficiency

As described earlier, Sensor MAC protocol is a synchronous protocol designed to be energy efficient. As mentioned in previous sections the main idea behind SMAC protocol is the network's ability to avoid idle listening for sensor tags that are not involved in a communication (e.g. hopping) [56]. In this network design, nodes that are waken up will go back to sleep mode under the condition that they are not being utilized for any type of communication as shown in Figure 2-7.

Figure 2-7: SMAC protocol and wake up periods demonstration [57]

20

Furthermore, in SMAC methodology, sensor tags exchange data about their schedule with the neighboring sensor tags in their proximity range in order to collectively enable identical synchronization of wake up and sleep times. The latency issues and advantages of Adaptive SMAC was explained in section 2.3.6.3.

2.3.7.2

Timeout Medium Access Control (TMAC) Energy Efficiency

Timeout Medium Access Control (TMAC) protocol is designed with extended optimization of SMAC protocol. Unlike SMAC protocols that have a fixed non-sleep and sleep periods TMAC methodology switches to sleep state if no event occurs after certain duration called "Tact" as shown in Figure 2-8 [58].

Figure 2-8: TMAC protocol with representation of Tact period [59]

The longevity of idle listening period is equal to the duration of Tact time-line. Although by introducing TMAC energy efficiency is conserved; however, the latency and delay is increased in the network as sensor nodes can go to sleep mode before transmitting the data that is stored in their buffer [58]. On the other hand, a major advantage with TMAC is that the network has the ability to accommodate for variable load because of its ability to dynamically adjust its sleeping schedule.

21

2.3.7.3

Utilization Medium Access Control (UMAC)

Utilization Medium Access Control (UMAC) introduced as an incremental improvements of SMAC protocol. The improvements include but not limited to tuning duty cycles based on sensor utilization, and selective sleeping after data transmission [60]. Flexibility of duty cycles enables various sensor tag to take on a different sleep, non-sleep schedule while ensuring their schedules are synchronized with their neighbors [60]. Therefore, the utilization approach results in adjustment of duty cycles based on traffic load that goes through every sensor tag. The benefits associated to this approach include power conservation of tags as they would go to sleep mode selectively [60]. This methodology not only improves battery efficiency but also reduces latency. As it could be observed in Figure 2-9, transmission can end scheduled listen or sleep time, labelled as "a", and "b" respectively. To avoid this problem of having the sensor tag forced to go to sleep while transmitting data UMAC protocol ensures sensor tags can have selective sleep times [60].

Figure 2-9: MUAC Transmission schedule [61] On the other hand, the limitation of UMAC is that due to its sensor tag selectivity on its sleep state, sensor tags do not accept the identical schedule from their neighbouring sensor tag which results in heavier traffic load and more extensive schedule transmissions.

22

2.3.8

MAC and Localization Analysis

Various MAC designs introduced that utilize both synchronous and asynchronous protocols to estimate the location of a sensor tags while ensuring energy efficiency and latency of sensor tags. Various Real-time Location Systems (RTLSs) mainly address accuracy problem of indoor positioning systems, these systems poorly address power efficiency and latency requirement of WSN. In this section, various MAC designs that address localization issue in WSNs are studied.

2.3.8.1

Trust Based Localization Protocol (TrustLP)

Trust Based Localization Protocol for Wireless Sensor Networks (TrustLP-WSN). Unlike Confidence-based Iterative Localization (ICL) in this methodology, there is no need to use distributed algorithm or it is required to select the shortest path to identify the location of a mobile object [62]. TrustLP works based on request-reply cycle. In more details, a sensor tag sends a request to its neighboring anchor nodes that have known locations in order for sensor tag to identify its own location. In this methodology, sensor tag determines its own location which means system up time is relatively longer and as a result battery life of sensor tag is shorter [62].

2.3.8.2

IEEE 802.11 & Wireless Local Area Network Localization

IEEE 802.11 describes specifications of both Physical (PHY) and Media Access Control (MAC) layers for deploying wireless local area network (WLAN) communication in frequency bands such as 900 MHz, 2.4, 3.6, 5, and 60 GHz. Primary application of IEEE 802.11 is data communication; however, IEEE 802.11 compliance standard has been used for indoor positioning purposes [63]. Various methodologies introduced by other peers that address such issue. For example, a methodology introduced where utilizing IEEE 802.11 WiFi access location
23

of mobile tags can be identified by utilizing angular signal strength information [64]. This methodology was introduced to enhance localization accuracy and reliability of previous approaches where omnidirectional single-measurement was used. In this methodology, it was verified that in case of availability of few anchor nodes it is suitable to utilize angular probability algorithm; otherwise, it was recommended in areas where there are many nodes received signal strength-based methodology would result in similar localization performance [64]. The only advantage with methodology proposed is that fewer calculations is required due to requirement for less anchor nodes reading in order to calculate location [64]. The disadvantage with this methodology is that there is a requirement for an external antenna damper to discriminate wireless signals from 360º exposure to 60º which results in lack of scalability of the system. Another IEEE 802.11 methodology introduced to localize the location of a mobile tag is to utilize Angle Difference of Arrival (ADOA), Time Difference of Arrival (TDOA), Signal Strength Difference of Arriva (SSDOA) [65]. Based on various tests performed it is concluded that as number of anchor nodes increase, the localization accuracy and reliability increase as well which means system latency increases and network scalability become more difficult. Moreover, methodologies introduced do not account for battery life time. There has been research performed to address both localization and energy efficiency of a IEEE 802.11 protocol utilizing WiFi finger-print based localization utilizing low-power radio; however, the accuracy of system was proven to be 85% with localization accuracy of room level and 60% energy consumption improvement compared to utilizing WiFi interfaces [65]. Wireless Local Area Network

(WLANs) that are built on top of IEEE 802.11 standard compliance generally consume excessive amount of battery.

Overall, most MACs have been designed to address power efficiency and latency limitations; however, as explained in Section 2.1 indoor positioning systems that pint-point the location of mobile sensors while ensuring latency and power requirements are maintained are poorly understood. In this report, a novel application is introduced that not only is power efficient system but also has a low latency network design with reliable localization capabilities .

24

2.4 Number of Nodes and Location Accuracy Relationship

As number of nodes increase in a network that is location enabled, localization accuracy of network is increased. This is because location of a mobile tag can be identified based on proximity to several nodes. Figure 2-10 demonstrates the qualitative representation of approximate location of a mobile tag indicated in blue color. The red circles represent location of nodes that have known coordinates. As it could be observed in Figure 2-10 (a) with 4 nodes represents location of mobile tag with more error (blue area) in comparison to Figure 2-10 (b) that more accurately identifies the location of a mobile tag (blue area) as there are 9 nodes present in a network.

(a)

(b)

Figure 2-10: Demonstration of approximate location of a MT shaded in blue. The red circles represent fixed ANs with known locations.

Mathematically, the coordinates of area of interest based on disk/circle intersections can be calculated by utilizing both range-free and range-based localization algorithms. Equations (1), (2), and (3) demonstrate how APIT algorithm is utilized to calculate estimated location of a MT based on range-free approach.

25

On the other hand, REAL scheme is an improved version of APIT that also localize the position of mobile tags based on several nodes. As it could be observed in Figure 2-11 and Figure 2-12 for all four range-free localization methodologies which are APIT, IAPIT-1 an IAPIT-II as number of nodes (labelled as anchors) increases the error rate decreases for both a 250 m × 250 m and 400 m × 400 m network size [66]. For example, if there are 10 nodes available in a network, localization accuracy is approximately 3.6 meters in a 400 m × 400 m network. If number of increase to 90, error rate decreases to 2.7 m which means there is approximately 23% localization accuracy improvement [66]. More interestingly, in a 250 m × 250 m network as number of ANs increase from 10 to 90, the localization accuracy of REAL network increases by more than 80% [66].

Figure 2-11 Network Size (250 m x 250 m) [66]

26

Figure 2-12: Network Size (400 m x 400 m) [66]

Similarly, there is a correlation between number of nodes and localization accuracy of mobile tags for range-based localization methodologies. As more nodes are added to a network, localization accuracy of system is improved as shown in Figure 2-13 [67]. Figure 2-13 shows two different range-based localization methodologies called traditional localization algorithm and improved localization algorithm were studied that indicates as more nodes added mobile tag localization accuracy is improved by more than 40% [67].

27

Figure 2-13: Positioning deviation of a MT as number of ANs increase [67]

Therefore increasing the number of nodes from 5 to 15, one can improve mobile tag localization accuracy by 40% under lab conditions [67]. In industrial environments such as a manufacturing plant, localization accuracy of mobile tag is more difficult due to existence of various interferences. As it could be observed in Figure 2-14, power fluctuations in office environment (a) is minimal since wall absorb wireless signals; whereas, w-iLab environment demonstrates significant fluctuations due to presence of metal obstacles in the environment which cause multi path effect and signal arrival delay (b).

Figure 2-14: As it can be observed power fluctuations in office environment (a) is minimal since wall absorb wireless signals; whereas, w-iLab environment demonstrates significant
28

fluctuations due to presence of metal obstacles in the environment which cause multi-path effect and signal arrival delay (b) [68].

Therefore, by adding more nodes to a network the effect of interferences on localization accuracy can be minimized and accuracy of mobile tag localization can be improved. Utilizing range-free localization technique in 250 m × 250 m network and increasing the number of ANs from 10 to 90 results in 80% in localization accuracy improvement estimated to be 2.7 meters. Similarly, utilizing range-based localization methodology in a network and increasing the number of ANs from 5 to 15, localization accuracy can be improved by 40% from 35 meters to 20 meters in a 1000 meter range network.

29

Chapter 3

3

Industrial Network Design Suitable for Localization and Sensing

The objective of the proposed approach is to have a sensing and localization network for industrial applications that provides low latency, high throughput, accurate localization and extensive battery life. The protocol design proposed is a novel TDMA synchronous based network that follows a three steps model: (1) Synchronization, (2) Sensing, and (3) and Localization. Section 3.1 covers the factors that need to be considered in order to design an industrial grade location and sensing network. Sections 3.2 and 3.3, describe the building blocks of the proposed network design called Location and Sensing (LSN) MAC design. Sections 3.4 and 3.5 focus on evaluating the LSN and why certain choices were made. In more details, Section 3.2 describes LSN network design, Section 3.3, 3.4 cover LSN MAC design, ,Section 3.6 examines network cycle duration and latency analysis of LSN, and finally Section 3.6 studies energy analysis of LSN.

3.1 Industrial Automation and Energy Efficient Indoor Positioning

Industrial automation mainly deals with autonomous inventory tracking, quality control, automation of manufacturing processes, and efficient material handling processes.

Manufacturing plants and factories require industry scale wireless networks that withstand interferences exist in industrial environments. The industry scale network also requires to be power efficient as the cost of maintenance and battery replacement is quite complex and

30

expensive. This is because most of maintenance activities need to occur when operation is live and usually several hundred if not several thousand of tags need to be maintained. There are several ways to improve localization accuracy of Mobile Tags in a manufacturing plant such as deploying post processing algorithms, improving physical hardware of Anchor Nodes to better detect wireless signal properties, or to improve the network design. In Chapter 3, a new network proposed called the LSN that is industry grade and improves localization accuracy of system while ensuring Mobile Tags consume minimum energy. LSN is an inexpensive and scalable design that utilizes multiple anchor nodes to accurately estimate the location of a mobile tag.

3.2 LSN Network Topology Design

Location and Sensing Network (LSN) consists of the following nodes: (1) Mobile Tags (2) Location Anchor Nodes (3) Master Node. Mobile Tags (MTs): refer to tags that can freely move within a network, are both wireless and battery operated and have ability to sense various physical and environmental attributes. Anchor Nodes (ANs): refer to nodes that have fixed position and are utilized to measure the distance of MTs from ANs using various techniques such as RSSI for localization. Master Node (MN): refers to the sink node that can communicate with both MT and AN. MN is in charge of sending synchronization message in addition to communicate with ANs. It is also in charge of recording sensing data. Localization and Sensing Network (LSN) Topology: In order to locate the position of MTs in a one-dimensional line at least two ANs are required. More ANs improve the localization accuracy of system.

31

LSN consists of various components; we discuss the role of each component and the rationale of proposed network topology below: 1) Mobile Tags (MTs): MTs are low transmission power, battery operated wireless nodes that are attached to physical objects (e.g. racks, containers) and can freely move in a physical space. The MTs can sense various environmental attributes such as temperature, etc. MTs broadcast their sensor data based on a pre-defined synchronous schedule. 1. MT is attached with an object 2. MT is equipped with sensors that perform sensing of parameters local to the object MT is attached to and the parameters of the object's environment 3. MTs can only transmit to ANs 4. MTs cannot receive signals from ANs. 5. MT has the capability to transmit either of ANs 6. MT can both transmit and receive signals to/from MN. 2) Anchor Nodes (ANs): ANs are nodes plugged to power supply (outlet plugs). ANs are installed in a stationary location in a physical space. They are responsible to sense signal strength of MTs. Each AN transmits the signal strength sensed, sensor data, and the ID of each MT to MN. 1. ANs sense the RSSI of received signals broadcasted by MTs 2. ANs assign an ID to a MT based on the time slot they receive a signal from a MT 3. ANs receive sensor data from MTs 4. ANs can only transmit signals to MN 5. ANs can receive signals both from MTs and MN 6. ANs have high buffering capacity.
32

3) Master Node (MN) : MN is a node plugged to power supply (outlet plug). MN is installed in a stationary location in a physical space. MN is a high transmission power node in charge of synchronizing all MNs and ANs. MN is also in charge of calculating the location of MTs utilizing RSSI measured by ANs. 1. MN can transceive signals to both MTs and ANs 2. MN is in charge of sending synchronization message 3. MN has high computational and storage power 4) Database (DB) 1. DB is in charge of storing location, time, sensing and more information of MTs 2. DB is accessible by both MN and UI 5) User Interface (UI) 1. UI displays location, time, sending, and more information to end user 2. UI can read/write from/to DB There are only one MN, DB, and UI whereas system can support multiple ANs and MNs. As per Formulas (4) and (5), in addition to MN, DB, and UI at least 2 ANs and 1 MT are required to (4) and (5) represent the requirements to

have a complete network. In more details, Formula

build a minimum system. The simplest network consists of 2 ANs, and 1 MTs.


 =   ,
=2 

 = [2, )

(4)

 =  
=1

(5)

33

Where  and  are the total number of Anchor Nodes and Mobile Tags a network can support, respectably. Theoretically, a network can support infinity number of nodes.

Figure 3-1: LSN Topology

3.3 Localization and Sensing Network (LSN) MAC Protocol Design

The network topology described in Section 3.1 is designed to support indoor positioning of MTs. In this section, novel MAC protocol design is introduced that has low latency, optimized power efficiency, and reliable localization. Proposed LSN MAC protocol is a synchronous TDMA based system that captures location, ID, and sensing data of a MT in a single packet in order to minimize latency, maximize battery

34

efficiency while enabling reliable localization. The novel MAC protocol is designed based on the following assumptions: 1) MTs must be extremely power efficient and can freely move in the physical space 2) MTs must be localized along a line in an indoor environment (One-Dimensional) 3) MT latency/uptime must be very low but network throughput can be prolonged as network does not require rapid update 4) MTs must periodically transmit sensor data to the MN 5) ANs can be awake/ON at all the time 6) ANs must have fixed physical positions 7) MN must be able to communicate with ANs and MTs in the network. In order to conserve energy for MTs, MTs must be kept in sleep mode as long as possible, which means duration of idle listening and transmission modes must be minimized. Since the proposed network, Localization and Sensing Network (LSN), requires periodic location and sensory data update without random interruptions, we proposed a single interface synchronous controlled access TDMA MAC that switches among three channels and utilizes range-based localization methodology. The MAC logic of network is shown in Figure 3-2. In addition, MAC logic for each note in different channels is demonstrated in Table 1. As it can be observed, there are three channels in the network named as Channel 1, 2, 3. 1) Channel 1: It is used for synchronization of all MTs and ANs. As it is shown in Figure 3-2 synchronization message in Channel 1 is sent by MN at the start of each period to ensure all MTs, and ANs have a common reference point for the start of the period. 2) Channel 2: once MTs and ANs receive the synchronization message they switch to Channel 2. MTs are in transmission mode whereas ANs are in receiving mode. In more detail, each MT has a hardcoded-predefined schedule at which it broadcast its signal that contains sensing data. The ANs on the other hand are in receiving mode waiting to
35

receive MT signals. ANs' main function is to measure signal properties of MTs such as RSSI in order to measure the distance of a MT from an AN. Since ANs are all in receiving mode they receive all MT signals at each time-slot as long as they are in the range of those MTs. This means assuming all ANs and MTs are in proximity range of each other, there will be  number of RSSI values for every MT at each time slot. In more details, the more ANs added the more RSSI values is captured which increases the confidence interval for accurate localization. Once MTs transmit their signal they switch back to Channel 1 and go to sleep until they wake up again for the synchronization based on the pre-defined schedule. 3) Channel 3: Once all MTs transmitted their signals, MA and ANs switch to channel 3 in order to transmit its readings to MN without interfering with other MTs. ANs sequentially transmit their signal to MA.

Figure 3-2: MAC Design Logic Diagram

36

CH1
Transmit Receive Transmit    

CH2
Receive  Transmit

CH3
Receive 

MN MT AN





Table 1: MAC logic and state of each node in various channels

3.4 LSN System Architecture

As discussed, for every one packet of data transmitted from MT, ANs are able to determine the location, ID, and sensor reading of the MT. Therefore, with transmission of one packet of data from MT to ANs the data required can be obtained. This is only possible by utilizing three dimensions associated to a single packet of data which are what time it was sent (ID), properties of received signal (RSSI), and sensor data. In this system architecture, ANs are in charge of measuring RSSI of each tag and recording sensor data. In addition, ANs are in charge of transmitting RSSI values and sensor data to MN or sink node so that MN can determine the location of a MT while storing the sensor data in addition to time tagging it for the DB. The ANi keeps following vector of data values
 corresponding to  , which is denoted by 

 11  = [   1

 12   2

  13 1  ]= [  ]    3

(6)

Where,  represents the ID of the AN,  represents the ID of MTm (or the time at which a MT transmitted its signal),  represents the RSSI reading of  for  , and s represents the sensor reading that ANi receives from  . The s is typically a vector of sensor values of
37

different sensors. All the data collected at ANi from m MTs can be assembled as the following matrix:
 = [   1  2  ] 3

(7)

Therefore, the total number of data gathered by sink node or MN can be described as shown in Formula (8).


 = (3 × )
=1

(8)

Where,  represents the total number of readings gathered in one cycle,  represents total number of  , and  represents total number of MTs. Figure 3-3 and Figure 3-4 visualize data gathered by 1 and 2 respectively after capturing data of 5 MNs simultaneously. The quantified data captured are presented in the matrices below: 0 1 1 = 2 3 [4 19 72 59 12 91 30 43 31 78 9] 0 1 2 = 2 3 [4 71 12 42 80 17 30 43 31 78 9]

Figure 3-3: AN1 Data Visualization in 3D Space

38

Figure 3-4: AN2 Data Visualization in 3D space

Figure 3-5: AN1 & AN2 Data Visualization in 3D Space

Figure 3-5 visualizes data of AN1 and AN2 captured by MN. As it could be observed, the sensor values for MTs are identical at each time slot. This is because one data set is transmitted at a unique time slot by MB; however, the RSSI values captured by AN1 and AN2 are different. This is because depending on the location of a MB, RSSI values captured are different. There is logarithmic relationship between distance and RSSI value; therefore, utilizing the relationship a MB tag be navigated by MN.
39

3.5 LSN Network MT Latency

MTs latency depend on the transmission ( ) and receiving ( ) duration of MTs. In the proposed system architecture although localization calculation is a necessity MTs remain on sleep mode for the majority duration of a cycle. In more details, on very cycle each MT is on idle (listening) and transmission modes for a short period of time. Due to availability of several ANs that act as receivers MTs do not need to receive acknowledgement after transmitting their signal. In addition,  and  duration remains constant even if more ANs are added to the network. This is because each MT broadcasts its signal at its pre-defined assigned time-slot. Moreover, since the system proposed is synchronous based TDMA system MT Identification (ID) is identified based on the time-slot a MT transmits its signal. This means packet transmitted from MT to ANs only carry sensor data measured in MT level this approach further shortens duration of  . Therefore, for every packet transmitted from a MT the following data is captured simultaneously: 1. ID of MTs (this is identified based on the time-slot a data is sent) 2. MT's "n" number of RSSI values measured by ANs 3. Sensor data acquired by MT collected by ANs This means 3 pieces of data is collected with the transmission of only one packet. This approach is very advantageous as many networks require sequential transmission which increases system latency and reduces power efficiency of MT.

3.6 LSN Network MT Energy Efficiency

Since all tags listen for synchronization signal simultaneously without a requirement to acknowledge the signal and go back to sleep, the duration and logistics of MT receiving mode is
40

minimized. Moreover, since three pieces of data is collected by ANs through MTs transmitting one packet of data at a time sequentially, the transmission duration for each individual MT is minimized. It is important to mention that no matter how many MTs or ANs are introduced to the system  and  remains constant which makes the system highly predictable when it comes to energy efficiency management. It is worth mentioning in situations where there is a need for more sample data in order to either get a better positioning or more accurate sensor data, transmission duration can be increased. The redundancy has linear effect on power consumption of individual MTs. The ANs and MN on the other hand are designed to be plugged in to a power supply at all the time and be on wake up mode. This is because the system must have been designed so that MTs carry least computational requirements in order to maximize their battery life.

41

Chapter 4

4

Simulated Results & Discussion

In this chapter, latency and energy efficiency of LSN, schedule-based MAC, that has nonoverlapping schedule is quantified and compared against two other contention-based MAC protocols that have contention-based MAC protocol with overlapping schedule. Schedule-based MACs contain a pre-defined schedule, which defines the resources available for a node at specific time-slot. Contention-based MAC protocols have a number of features such as high mobility of nodes, limited bandwidth, and power constraints. In contention-based MAC protocols usually have defined listen and sleep cycle, consist of collision avoidance mechanism through Request to Send (RTS) and Clear To Send (CTS) methodologies, and overhearing avoidance mechanisms that switch off nodes that are not meant to hear a message during transmission. The properties of other contention-based MAC protocols such as SMAC, TMAC, and UMAC are described in Chapter 2 in more detail. Most improvement for contention-based MAC protocols include improving power efficiency, optimize latency, and reliability of network. There has been various algorithms introduced to localize MTs in a WSN utilizing range-free localization approach such as DV-Hop and APIT. To make comparisons more relevant there has been a number of assumption made for the analysis to ensure a consistent benchmark for calculations. Therefore, the focus of this chapter is more on relative comparison of various networks rather than presenting factual details about a system. For instance, transmission duration of a DMAC system is presented to 20 ms in one research paper and 70 ms in another research paper. The duration vary due to type of radio used, algorithms utilized to process data and etc. The following comparison focuses mainly on the average transmission duration of a TDMA systems in comparison to contention-based MACC protocols. SMAC and TMAC were chosen as protocols to be compared against LSN.

42

4.1 Power Efficiency Analysis

In this chapter power efficiency of LSN is compared against two other contention-based MAC protocols SMAT and TMAC utilizing MATLAB and Microsoft Excel. Energy efficiency of MTs are evaluated through simulation based on a number of assumptions laid out in Table 2 and Table 3. There are a number of limitations with contention-based protocols when it comes to utilizing range-based localization scheme to locate the position of a MT. The problems includes contention-based protocols need to store and transmit ID information of MTs, and ANs in addition to transmitting sensor date which makes transmission duration longer. Moreover, because data are transmitted randomly during wake up time there is possibility for collision of data. To avoid collision MTs and ANs need to utilize Request to Send (RTS) and Clear to Send (CTS) methodology. Since each MT needs to communicate with at least three ANs; therefore, there is a need to receive acknowledgment from each ANs separately. This approach significantly increases the wake-time of MTs; therefore, it increase energy requirements. Alternatively, if MTs follow a very tight wake up schedule energy consumption for MTs could be reduced but this approach requires very complex scheduling algorithm and it would not be reliable. For the purposes of this analysis, it is assumed that a MT will wake up and ensure to receive an acknowledgement message from at least 2 ANs (1-Diemensional localization). For contention-based protocols as more ANs added, because of star topology, the wake time for MTs are be longer.

43

Figure 4-1: This figure demonstrates that contention-based MAC protocols such as SMAC and TMAC require overlapping MT schedules.

Figure 4-2: This figure demonstrates the LSN has a non-overlapping schedule for its MTs, which eliminates the need to have RTS and CTS acknowledgement message.

Assumptions:

Radio Mode Transmit (Tx) Receive (Rx)/Idle Sleep

Power Consumption (mW) 15 10 0.02

Table 2: Radio power consumption in different modes
44

Minimum System (MS) Components Components MN AN MT Unit 1 2 1

Table 3: Minimum System (MS) components

In order to build a Minimum System (MS) 1 MN, 2 ANs, and 1 MT are required. The system can localize a tag in one-dimensional (1-D) space. In order to evaluate energy efficiency of MTs first a MS is evaluated utilizing various MAC architectures, then number of ANs and MTs are increased and each network energy performance is evaluated again, called performance when system scaled.

Power Efficiency Evaluation of one MS: a) LSN Network Architecture: As described in Section 3.6 each MT listens for

synchronization message that is transmitted for duration of 2 seconds, for simplicity it can also stated that MT is on receiving mode for 2 packets.

45

Proposed Network Power Consumption per cycle Radio Mode Transmit (Tx) Receive (Rx)/Idle Sleep Power (mW) 1.5 1.0 0.002 Packet 1 1 1 Total Power/cycle Total Power/cycle 1.5 1.0 0.002 2.502 mW

Table 4: Proposed Network Power Consumption per cycle. LSN power requirements of a MS is 2.502 mW per cycle.

b) SMAC Network Architecture:

SMAC building blocks of a successful communication is shown in Figure 4-3. Since SMAC requires to get acknowledgement from other nodes, SMAC can be localized based a Star network topology. This means, for MS that has two ANs, MT needs to communicate with ANs sequentially, which doubles the transmission/receiving packets; therefore, due to network localization limitations as number of ANs grows so as power consumption of each MT. Moreover, if SMAC design changes so other nodes can overhear RSSI value of a MT then localization becomes unreliable since nodes can unpredictably go to sleep mode.

46

Figure 4-3: SMAC MT Communication with other ANs [69]

SMAC Power Consumption per cycle Radio Mode Transmit (Tx) Receive (Rx)/Idle Sleep Power (mW) 1.5 1.0 0.002 Packet 4 4 1 Total Power/cycle Total Power/cycle 6 4 0.002 10.002 mW

As it can be observed SMAC power consumption is 10.002 mW per cycle when a MT is localized via a MS.

c) TMAC Network Architecture

TMAC building blocks of a successful communication is shown in Figure 4-4. As it can be observed, TMAC is very similar to SMAC but through various incremental improvements duration of wake up time is reduced which has minor improvement to battery longevity of a MT. However, since MT in TMAC architecture needs to also form a start topology to be able to be located, system wake up time increases as number of ANs increase.
47

TMAC Power Consumption per cycle Radio Mode Transmit (Tx) Receive (Rx)/Idle Sleep Power (mW) 1.5 1.0 0.002 Packet 2 4 1 Total Power/cycle Table 5: TMAC Power Consumption per Cycle Total Power/cycle 3 4 0.002 7.002 mW

Figure 4-4: TMAC MT Communication with other ANs [70]

As it can be observed in Table 5, total power consumption of TMAC is less than SMAC but it is still significantly higher in comparison to proposed LSN. Power consumption on TMAC and SMAC is higher because they were not designed to support localization requirements therefore, a MT needs to individually transmits its signals to individual ANs sequentially. This approach prolongs wake up time of MTs which makes them not as power efficient at LSN. With respect to TMACs, active time of MTs are shorten by design. If TMAC were to be utilized for localization purposes there would be a risk that all ANs would not be able to read RSSI values of a MT due
48

to the fact that ANs wake up time is shorter that SMAC. Although not all MACs for WSN have been analyzed in this report it can be stated that generally most MAC designs for WSN have similar behavior in comparison to TMAC, and SMAC; therefore, even though may have better performance that others their overall performances for localization are limited. The following paragraph explains why such assumption holds true: In order to compare the performance of proposed MAC versus other contention-based MACs, TMAC and SMAC were chosen since they are among some of the most power efficient protocols utilized for Machine-to-Machine (M2M) communication and they have virtually identical characteristics as other MACs the were introduced later by other peers such as BESTMAC, RS-MAC [71] [72]. As per LSN design on each cycle each MT stays on listening mode to listen to synchronization message and transmits a packet of data that contains its sensor data; whereas, in contention-based networks such as SMAC and TMAC a MT is in listening mode to receive synchronization message from the MN or its neighboring MTs. Then MTs randomly communicate to each of ANs sequentially by sending and receiving Request to Send (RTS) and Clear to Send (CTS) messages respectively in order to avoid signal collision. Therefore, due to number of communications required between MTs and ANs in in SMAC and TMAC on each cycle assuming the number of ANs are constant MTs in SMAC and TMAC consume more power in comparison LSN. In more details, it is calculated if a network consist of 2 ANs, and 1 MTs power consumption of LSN, SMAC and TMAC are 2.5 mW, 10 mW, and 7 mW respectively. As mentioned in pervious sections, power consumption of SMAC and TMAC are higher that proposed MAC because these protocols need to utilize start topology to localize a MT. However, to have a reliable localization system more ANs are required. The advantage of LSN is revealed when number of ANs are increased. Furthermore, Figure 4-5 demonstrates power requirements of a MT when total number of MTs in a system remains constant while number of ANs increases. Please note, the power requirements of MTs as number of MTs increase is minimal estimated to be 2.5 mW. In more details, 1.5 mW and 1 mW are transmission and receive power requirements. As it can be observed in Figure 4-5, proposed MAC power consumption remains constant even number of ANs increase, however power requirements of MTs for SMAC and TMAC system exponentially increase as the number of ANs increase. This is because MTs in SMAC and TMAC are contention based; meaning, they
49

either have to have a very tight wake up schedule or they need to have longer wake up time which results in MTs consume more power need to communicate with ANs. In addition, another reason for the exponential growth of MTs power consumption is that MTs in SMAC and TMAC utilize star topology and also they need to send their unique ID to receivers. In addition, to improve power efficiency of a nodes, SMAC and TMAC utilize routing mechanism, where data transmitted gets to the sink node through the most efficient way. However, LSN utilizes flooding mechanism where all ANs receive the data from MTs and all ANs transmit their data to MN.

MT Power Consumptiong when # of MTs are Constant
Power Requirement (mW)
300

250 200
150 100 50 0

LSN Cycle Duration
SMAC MT Power/cycle

2.5 mW
2 3 4 5 10 15 Number of ANs 20 25

TMAC MT Power/cycle

Figure 4-5: Power consumption of a MT when number of MTs is constant but number of ANs increases

Furthermore, Table 6 demonstrates power consumption chart for a MT in a network that has 50 MTs versus conditions that number of ANs change.

50

Number of ANs LSN MT MAC Power/cycle (mW) SMAC MT Power/cycle (mW) TMAC MT Power/cycle (mW)

2 2.5 19 13

3 2.5 29 20

4 2.5 39 27

5 2.5 49 34

10 2.5 99 69

15 2.5 149 104

20 2.5 199 139

25 2.5 249 174

Table 6: LSN, SMAC, and TMAC MT power consumption per cycle in presence of 50 MTs

4.2 Latency Analysis

As shown in Figure 4-6, as number of ANs increase, the latency of MT in LSN network remains constant which is estimated to be 250 ms while when number of ANs increase in SMAC and TMAC (or other contention based networks) latency of MTs increase. This is because MTs in SMAC TMAC and other contention-based networks need to communicate with each of ANs. Therefore, as more ANs added to a system it takes loner for MTs to establish communication with each of ANs for the purposes of communication which results in MTs' longer latency. In addition, MTs in SMAC and TMAC need do send their IDs to the ANs as well.

MT Latency when # of MTs are Constant
30 25 20 15 10 5 0 2 3 Time (Seconds)

LSN MT Latency

0.25 s
4 5 10 15 20 25 Number of ANs

SMAC MT Latency TMAC MT Latency

Figure 4-6: MT latency when number of MTs is constant and number of ANs increase
51

In order to better evaluate the advantages of LSN network, latency ratio of LSN network versus SMAC and TMAC is graphed in Figure 4-7. As it could be observed in Figure 4-7 as more ANs are added to a network the larger the ratio between SMAC & TMAC to LSN becomes.

SMAC & TMAC to LSN Ratio Vs. # of Nodes
SMAC & TMAC to LSN Latenccy Ratio 120 100

80 60
40 20 0 2 3 4 5 10 15 Number of ANs 20 25

SMAC/LSN Latency Ratio
TMAC/LSN Latency Ratio

Figure 4-7: SMAC & TMAC to LSN latency ratio vs. number of ANs.

Furthermore, under the condition that numbers of MTs change while numbers of ANs remain constant, latency of MTs remain constant. For example, assuming a network consists of 1 MT and 2 ANs, latencies for LSN, SMAC, and TMAC on each cycle is calculated to be 0.25s, 1s, 0.7s respectively. Lastly, Table 7 demonstrates MT latency of a MT in a network that has 50 MTs versus criteria that number of ANs vary. As it could be observed in Table 7, as number of ANs increase MT latency LSN remain constant whereas MT latency for SMAC and TMAC dramatically increase as number of ANs increase.

52

Number of ANs LSN MT Latency (s) SMAC MT Latency (s) TMAC MT Latency (s)

2 0.25 2 1.4

3 0.25 3 2.1

4 0.25 4 2.8

5 0.25 5 3.5

10 0.25 10 7

15 0.25 15 10.5

20 0.25 20 14

25 0.25 25 17.5

Table 7: LSN, SMAC, and TMAC MT latency per cycle in presence of 50 MTs

4.3 Network Cycle Duration Analysis

As it can be observed in Figure 4-8 network cycle duration for a condition when number MTs are constant and number of ANs increase are very different for the three networks studied. In this analysis does not include the time it takes for ANs to communicate their data to MN. This is because the duration of ANs to MN for LSN, SMAC and TMAC are identical. This is because for all three networks the data communicated from ANs to MN are identical which includes IDs, Sensor Data, and RSSI values of each MT. Therefore, ignoring AN to MN communication cycle duration as number of ANs increases while number of MTs is constant LSN MAC cycle duration remains constant whereas, as number of ANs increase for SMAC and TMAC cycle duration exponentially increase. Figure 4-8 demonstrates a network that that has 50 MTs. Based on calculations, LSN cycle duration in presence of 50 MTs and 2 ANs is 7.6 seconds, 95 seconds, and 65 seconds per cycle for LSN, SMAC, and TMAC, respectively. However, as more ANs added the network cycle duration increases for SMAC and TMAC whereas cycle duration for LSN remains constant. Please note, LSN cycle duration as shown in Figure 4-8 is 7.6 seconds and not zero.

53

Cycle Duration of LSN, SMAC, and TMAC when # of MTs are constant
1500 Time (Seconds) 1000 LSN Cycle Duration 500 SMAC Cycle Duration

7.6 s
0 2 3 4 5 10 15 20 25 Number of ANs

TMAC Cycle Duration

Figure 4-8: Demonstration of a network that contains 50 MTs. As shown in the diagram as number of ANs increase LSN cycle duration remains constant at 7.6 seconds whereas SMAC and TMAC cycle duration increase

Number of ANs LSN MT Latency (s) SMAC MT Latency (s) TMAC MT Latency (s)

2 7.6 95 65

3 7.6 145 100

4 7.6 195 135

5 7.6 245 170

10 7.6 495 345

15 7.6 745 520

20 7.6 995 695

25 7.6 1245 870

Table 8: LSN, SMAC, and TMAC MT cycle duration in presence of 50 MTs

On the other hand, as number of MTs increase while number of ANs are constant for all three MACs studied there is throughput exponential growth; however, proposed MAC throughput time grows on a slower rate in comparison to SMAC and TMACs. As mentioned before, the reason LSN has a slow throughput is because LSN utilizes data flooding approach so all ANs receive a MT data at the same time; whereas SMAC and TMAC utilize routing mechanism to transfer their data to the MN. Therefore, SMAC and TMAC need to sequentially route their data through each AN so ANs can measure MT RSSI values so that MN can calculate the location of a MT.

54

Number of ANs LSN Cycle Duration (s) SMAC Cycle Duration (s) TMAC Cycle Duration (s)

2 7.6 95 65

3 7.6 145 100

4 7.6 195 135

5 7.6 245 170

10 7.6 495 345

15 7.6 745 520

20 7.6 995 695

25 7.6 1245 870

Table 9: LSN, SMAC, and TMAC MT cycle duration per cycle in presence of 50 MTs

Cycle Duration of LSN, SMAC, and TMAC when # of ANs are Constant
350 300 250 200 150 100 50 0
1 5 10 50 100 150 300 500 Number of MTs

Time (Seconds)

LSN Cycle Duration

SMAC Cycle Duration TMAC Cycle Duration

Figure 4-9: Cycle duration when number of ANs are constant while number of MTs increase. This analysis is under the condition that there are 2 ANs in the network.

Number of MTs LSN Cycle Duration (s) SMAC Cycle Duration (s) TMAC Cycle Duration (s)

2 0.25 1 0.7

3 0.85 3.4 1.9

4 1.6 6.4 3.4

5 7.6 30.4 15.4

10 15.1 60.4 30.4

15 22.6 90.4 45.4

20 45.1 180.4 90.4

25 75.1 300.4 150.4

Table 10: Cycle duration of LSN, SMCA, and TMAC when number of ANs are two and number of MTs vary

55

Chapter 5

5

Case Study & Experimental Results

To evaluate performance of proposed MAC protocol MN, AN, and MTs were deployed utilizing Arduino Uno microcontrollers and Xbee modules. Although the hardware was identical each of system components carried a different code. RSSI utilized to determine the location of a MT.

5.1 Summary of Specifications

The location, ID, and sensing data of 50 MTs needs to be accurately identified with the assistance of 4 ANs and 1 MN. Below the detailed description of the tested system is laid out.

5.1.1

Functional Specification

The following specifications must be met by the system: 1. System needs to locate the position of a MT utilizing RSSI values captured by 4 ANs and MN. 2. The location of MT in addition to ID, and sensory data must be saved in a DB. 3. MT need to conserve battery efficiently 4. MTs latency must be very low

56

5.1.2

Technical Specifications

1. Xbee wireless communication used for communication between all the modules in the network 2. Xbee module from Digi was used 3. Arduino Uno and Arduino Proto board was used to stablish physical connection to Xbee module 4. The packet size transmitted from MT to ANs must be maximum 8bits.

5.2 System Organization

In this section, the components of system are described and topology of proposed network is studied.

5.2.1

System Description Overview

The proposed prototype system consists of 3 ANs, 5 MTs, and 1 MN. The ANs are installed in fixed location where power supply is available, MTs are battery operated and are attached to mobile racks, and MN is installed in a fixed position where it proximity range of all the MTs and ANs as shown in Figure 5-1. MTs are about to move around tracking operational area of AN0, AN1, AN2, and MN.

57

MN

AN0

AN1

AN2 5 Meters

5 Meters

MT0

MT2

MT4

MT1

MT3

Figure 5-1: System configuration of proposed network design

MN is connected to a computer where data is stored. The sequence of events for the proposed system is as follow:

58

Xbee has a data rate of 250kbps. With all the other delays in the system 10 ms of time slots are allocated for MT which means MTs totally create an overall 50 ms of system delay. To conserve battery the MT is only allowed to send one packet which is 8 bits which is sent in the 10 ms time frame which can be sent in duration of 0.16 ms. In calculation presented in the formulas (9) through (19) it is assumed transmission time is as high as 0.2 ms per cycle per MT. To realize a reliable localization accuracy it was experimented that at least 5 samples are required. Therefore, as shown in Formula (11) latency of MT to be 250 ms and since each AN takes sensory data of MTs and add its ID, and RSSI values to it, it is expected that each AN require 750 ms of delay in the system as calculated in Formula (12). Therefore, assuming 10 ms is required for synchronization of system it takes 2510 ms or 2.51 seconds for system to go through a full cycle. Moreover, each MT was on three states on each cycle of the system. Duration of transmit cycle for MTs on the three different states were as follow: 2 ms transmission, idle 10 ms, and sleep 2499.8 ms. Therefore, MTs were on sleep mode for 99.594% of time on each reading cycle. Furthermore, power consumption of a MT were 205 mA during transmission, 47 mA during idle mode, and 0.0035 mA This means if a battery has capacity of 2200 mAh and transmits a signal every 2.5 seconds the MT will last more for 37.46 days as shown in Formula (15% battery selfdischarge discount is accounted in the calculations). Assuming the reading cycle of each MT increase to every 5 minutes, the battery life of MT would be more than 10.23 years utilizing Formulas 9-20. Please note, the speed of system can be improved by optimizing the physical layer of hardware; however, the focus of this report was to improve power efficiency, reduce latency, and minimize system throughput by introducing a novel MAC design. The assumptions made and calculations are shown below:

59

Assumptions:

Items ­ Power Test Scenerio A Scenerio B Senerio C

MN 1 1 1

AN 2 3 4

MT 5 5 5

Detailed Power Calclation for Scenerio B MT time-slot duration to reliably transmit 8 bits of data: 10 ms Number of RSSI values required for accurate localization: 5 samples /MT /Cycle Each AN requires to send 3 sets of data to MN for each MT ( RSSI, ID, Time values) Synchrnoization duration = 10 ms Transmissionn duration per 8 bit of data = 1 ms Battery Capacity = 2200 mAh

Calculations:

Time Slot Duration/MT = 5 RSSI samples × 10 ms/sample = 50 ms / MT

(9)

(10) Time slot length / AN = Time Slot Duration/MT × 3 data = 50 ms × 3 = 150 ms
60

Formula (10) is multiplied by 3 because for every MT data received by AN, AN transmits 3 data sets to MN ( RSSI, Time, and ID) Total time duration for MT transmission = 5 MTs × Time Slot Duration/MT = 5 x 50 ms = 250 ms (11)

Total time duration / AN transmission = 3 data × Time slot length / AN × total # of MTs = 3 ANs × 150 ms × 5 MTs = 750 ms

(12)

Total time duration for all AN transmissions = 3 ANs × Total time duration / AN transmission = 3 ANs × 750 ms = 2250 ms

(13)

Total duration of system cycle = Synchronization Duration × Total time duration for MT transmission + Total time duration for all AN transmission = 10 ms × 250 ms × 2250 ms = 2510 ms = 2.5 s/cycle

(14)

On each cycle MTs switches to three states which are sleep mode, idle mode and transmission mode. Duration of each state for MTs are shown in the following table:

61

MT states Duration (ms) Percentages (%)

Sleep 2499.8 ms 99.594%

Idle 10 ms 0.398%

Transmission 0.2 ms 0.008%

Total 2510 ms 100%

Based on the table above current consumption of a MT per cycle can be calculated as follow:

Current cunsumption during wake up mode = + (idle mode current × duration of idle mode/cycle) + (transmission mode current × duration of transmission mode/cycle) = (47 mA × 10 ms) + (205 mA × 0.2 ms) = 511 mA.ms

(15)

Total number of wake timese per hour = (1hr / 3600 s) / 2.51 s = 1434.2629 times

(16)

Total duration of wake up time per hour = 0.0102 s × 1434.2629 times = 14.629 s/hr

(17)

Total duration of sleep mode per hour = (3600 s/hr ­ 14.629s/hr) = 3585.37 s/hr

(18)

Total system current consumption per hour = (Total duration of wake up time per hour × current consumption during wake up mode) + (Total duration of sleep mode per hour × current consumption during sleep mode)
62

(19)

MT total battery life time = battery capacity / Total system current consumption per hour

(20)

After testing three different scenarios it was concluded that energy consumption of MTs remain constant at approximately 510 mA.ms or 0.14  per cycle. On the other hand as number of ANs increase cycle length also increases as shown in Figure 5-2. As it could be observed Figure 5-2 there is a linear relationship between the number of ANs added to a system versus network = (14.629 s/hr × 511 mA) + (3585.37 s/hr × 0.0035 mA) = 7487.96 mA.s × 1 hr / 3600s = 2.08 mA/hr Utilizing battery with capacity of 2200 mAh with 15% battery self-discharge factor the following battery life can be obtained for each MT:

= (2200 mAh / 2.08 mA/hr) × (1-0.15) = 899.038 hrs / 24 hr/ 1day) = 37.46 days duration per cycle.

63

Cycle Duration Vs. # of ANs
3500

Cycle Duration (ms)

3000
2500 2000 1500

1000
500 0 Cycle Duration

2
1760

3
2510

4
3260

Number of ANs

Figure 5-2: This figure shows the relationship between number of ANs and duration of cycle.

Furthermore, there was another was set up to quantify the effect of having additional ANs in localization accuracy of MTs. In this test MT was placed 5 meters away from 4 ANs in a stationary location a shown in Figure 5-3. MT broadcasted its signal and 4 ANs measured received signal strength of MT.

64

Figure 5-3: Network layout for testing localization

As it could be observed in Figure 5-4 although both MT and ANs were stationary RSSI value demonstrated fluctuations. By combing multiple RSSI values the margin of localization error is reduced as shown in Figure 5-5.

930 928 926 924 922 920 918 1 3 5 7 9 11 13 15 RSSI Reading #

Raw RSSI Value (RSSI/1024)

RSSI1
RSSI2 RSSI3 RSSI 4 RSSI 1 &2 RSSI 1,2,3 RSSI 1,2,3,4

Figure 5-4: Demonstration of individual raw RSSI values and average RSSI values of multiple ANs.

65

As it could be observed in Figure 5-5, as number of ANs increases localization error is reduced. With presence of one AN localization error is 2.2 meters whereas in presence of 4 ANs localization error is reduced to 1.6 meters which is equal to 28% improvement on localization error.

Localization Error (m) Vs. # of ANs
2.50

Localization Error (m)

1 2.00 1.50 1.00 0.50

2

3 4, 1.60
Localization Error

0.00
0 1 2 3 Number of ANs 4 5

Figure 5-5: Demonstration of localization error reduction when number of ANs are increased

Lastly, Table 11 summarizes the finding in this thesis report. As it is stated, MT energy consumption and latency remains constant even if more ANs are added to LSN network, localization error is reduced as more ANs are added to the network, and network cycle duration increases as more AN or MTs are introduced to the system.

66

Scenario 1 MT energy consumption/wake up Localization Error Minimum cycle length MT Latency (ms) 511 mA.ms 1.97 m 1760 ms 50 ms

Scenario 2 511 mA.ms 1.86 m 2510 ms 50 ms

Scenario 3 511 mA.ms 1.59 m 3260 ms 50 ms

Table 11: Summary of results and findings of this thesis report

67

Chapter 6

6

Conclusion and Future work

As more battery efficient wireless sensors are utilized for different application, sensor management becomes an important aspect of sensor and data management, especially for sensors that are mobile. Therefore, the need for indoor positioning of sensors become more crucial. Based on the results obtained and evaluation of existing MAC protocols it could be concluded that proposed solution can significantly improve battery efficiency, latency, and system throughput of a network that requires accurate localization. This report presented a ground work for better localizing mobile sensors. It is foreseen that various aspect of the propose network architecture can be improved to further improve reliability, accuracy, and power efficiency of the network. For example, utilizing a methodology to manage ID of MTs via wireless so IDs does not need to be hard coded, giving the network the flexibility to accept new MTs without interfering with transmission schedule of MTs, sending ANs data to MN through a different radio while ANs collecting data from MTs.

68

7

References

[1] L. P. Luca Mainetti and A. Vilei, "Evolution of wireless sensor networks towards the Internet of Things: A survey," in Software, Telecommunications and Computer Networks (SoftCOM), 2011 19th International Conference on , Split, 2011. [2] J. Greenough, "Business Insider," Business Insider, 18 04 2016. [Online]. Available: http://www.businessinsider.com/how-the-internet-of-things-market-will-grow-2014-10. [Accessed 23 04 2016]. [3] H. K. Klaithem Al Nuaimi, "A survey of indoor positioning systems and algorithms," in Innovations in Information Technology (IIT), 2011 International Conference on , Abu Dhabi, 2011. [4] A. Förster, Introduction to Wireless Sensor Networks, John Wiley & Sons. , 2016. [5] S. K. R Budampati, Industrial Wireless Sensor Networks: Monitoring, Control and Automation, Cambridge, UK: Elsevier, 2016. [6] N. N. Daniel Câmara, Wireless Public Safety Networks Volume 1: Overview and Challenges, London: Elsevier, 2015. [7] J. Edgar H. Callaway, Wireless Sensor Networks: Architectures and Protocols, New York: CRC Press, 2004. [8] A. D. B. J. W. Tadeusz A. Wysocki, Advanced Wired and Wireless Networks, Boston: Springer Science & Business Media, 2005. [9] H. S. H. G. T. Sherin Abdel Hamid, Routing for Wireless Multi-Hop Networks, New York: Springer Science & Business Media, 2013. [10] R. Faludi, Building Wireless Sensor Networks: with ZigBee, XBee, Arduino, and
69

Processing, Sebastopol : O'Reilly Media, Inc., 2011. [11] E. F. T. L. J. S. D. W. &. A. M. Kevin Currana, "An evaluation of indoor location determination technologies," Journal of Location Based Services, vol. 5, no. 2, pp. 61-78, 2011. [12] V. G. Y. Sharma, "Hybrid Mechanism for Multiple User Indoor Localization Using Smart Antenna," in IEEEHaryana, Haryana, 2015. [13] M. T. T. Y. Li, "Planar Spanners," in Wireless Sensor Networks and Applications , Vols. , "," in Wireless Sensor Networks and Applications, Springer Science & Business Media, 2008, pp. 117-125., Springer Science & Business Media, 2008, pp. 117-125. [14] N. S. C. P. R. Monge, "Networks and Flows in Organizational Communication," in Theories of Communication Networks , New York, Oxford University Press, 2003, p. 3. [15] A. D. Jerry FitzGerald, "Network Models," in Business Data Communication and Networking, Hoboken, John Wiley & Sons. , 2009, p. 16. [16] Y. P. Hongyi Wu, "What is Medium Access Control," in Medium Access Control in Wireless Networks , New York, Nova Publishers , 2008, p. 6. [17] "802-2014 - IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture," IEEE, pp. 1-74, June 30 2014. [18] Y. P. Hongyi Wu, Artist, Medium Access Control in OSI Reference Model. [Art]. Nova Publishers , 2008. [19] H. L. Morteza M. Zanjireh, "A Survey on Centralised and Distributed Clustering Routing Algorithms for WSNs," in IEEE, Glasgow, 2015. [20] B. L. Source Wikipedia, Network Topology: Star Network, Grid Network, Tree and Hypertree Networks, Spanning Tree Protocol, Metro Ethernet, Token Ring, Mesh
70

Networking, General Books LLC, 2010. [21] S. R. Ibrahiem M. M. El Emary, Wireless Sensor Networks: From Theory to Applications, CRC Press, 2013. [22] A.-S. K. P. Mubashir Husain Rehmani, Emerging Communication Technologies Based on Wireless Sensor Networks, New York: CRC Press, 2016. [23] H.-C. C. S.-H. Y. W.C.-C. Chu, Intelligent Systems and Applications: Proceedings of the International, Amsterdam: IOS Press BV, 2015. [24] S. Merkel, Building Evacuation with Mobile Devices, KIT Scientific Publishing, 2014. [25] C. P. Waltenegus Dargie, Fundamentals of Wireless Sensor Networks: Theory and Practice, John Wiley & Sons, 200. [26] C. G.-D. Zhang Deng-Yin, "A Union Node Localization Algorithm Based on RSSI and DVHop for WSNs," in IEEE, Harbin, 2012. [27] H. J. Ji zeng Wang, "Improvement on APIT Localization Algorithms for Wireless Sensor Networks," in IEEE, Wuhan, Hubei, 2009. [28] X.-b. W. Lin-zhe Zhao and D. Li, "Amorphous localization algorithm based on BP artificial neural network," in IET, Hsinchu, 2014. [29] T. H. J. A. S. Radu Stoleru, "Range-Free Localization," University of Virginia, Virgina. [30] M. Khosrow-Pour, Encyclopedia of Information Science and Technology, Third Edition, Hershey : IGI Global, 2015. [31] j. C. P. L. F. B. . j. C. P. L. F. B. . j. C. P. L. F. B. C. P. L. F. Jack Brassil , "Indoor Positioning with an Enterprise Radio Access Network," Science Direct, vol. 34, pp. 313322, 2014.

71

[32] N. Zaman, Wireless Sensor Networks and Energy Efficiency: Protocols, Routing and Management, IGI Global, 2012. [33] W. Zhang, "University of Notre Dame," 24 02 2003. [Online]. Available: https://www3.nd.edu/~jnl/ee698g/materials/summaries/wenyi.pdf. [Accessed 15 01 2016]. [34] K. S. Zigangirov, "Frequency Division and Time Division Multiple Access," in Theory of Code Division Multiple Access Communication , John Wiley & Sons., 2004, p. 4. [35] H. M. H. a. S. A. M. S. M. I. Shahram Golestaneh, "The Effect of Adjacent Channel Interference," IEEE, vol. 43, no. 4, p. 946, 1994. [36] V. S. S. B. W. A. Arunesh Mishra, "Partially Overlapped Channels Not Considered Harmful," in 06 Proceedings of the joint international conference on Measurement and modeling of computer systems, New York , 2016. [37] S. P. V. S. A. T. Vangelis Angelakis, "Adjacent channel interference in 802.11a: Modeling and testbed validation," in IEEE, Orlando, FL, 2008. [38] J. G. A. Martin Haenggi, F. Baccelli, O. Dousse and M. Franceschetti, "Stochastic geometry and random graphs for the analysis and design of wireless networks," IEEE Journal on Selected Areas in Communications , vol. 27, no. 7, pp. 1029-1046, 2009. [39] K. S. Zigangirov, "Direct Sequence CDMA," in Theory of Code Division Multiple Access Communication, John Wiley & Sons., 2004, p. 7. [40] J. Dong, "Network Dictionary," in Network Dictionary , Javvin Technologies Inc., 2007, p. 488. [41] M. J. L. Jae H. Kim, Green IT: Technologies and Applications, 2011: Springer Science & Business Media, New York. [42] T. B. Douglas S. Chan and L. Tong, "Carrier Sense Multiple Access Communications on
72

Multipacket Reception Channels: Theory and Applications to IEEE 802.11 Wireless Networks," IEEE, vol. 61, no. 1, pp. 266-278, 2013. [43] A. Q. M. N. M. S. Anis Laouiti, Vehicular Ad-hoc Networks for Smart Cities, New York: Springer, 2014. [44] Y. P. Hongyi Wu, Medium Access Control in Wireless Networks, Nova Publishers, 2008. [45] M. Mallick, Mobile and Wireless Design Essentials, Indiana : John Wiley & Sons, 2003. [46] H. V. P. Xiaodong Wang, Wireless Communication Systems: Advanced Techniques for Signal Reception, New Jersey : Prentice Hall Professional, 2004. [47] K. M. C.S. Raghavendra, "MAC Attributes and Trade-offs," in Wireless Sensor Networks , California , Springer Science & Business Media, 2004, p. 76. [48] S. H. Lee, Y. S. Bae and L. Choi, "On-demand radio wave sensor for wireless sensor networks: Towards a zero idle listening and zero sleep delay MAC protocol," in IEEE, Anaheim, CA, 2012. [49] A. J. Jun Zheng, "D-MAC," in Wireless Sensor Networks: A Networking Perspective , Hoboken, John Wiley & Sons, 2009, pp. 46-48. [50] A. Awang, X. Lagrange and D. Ros, "Adaptive duty cycle using density control in multihop Wireless Sensor Networks," in IEEE, Sabah, 2011. [51] B. K. C. S. R. Gang Lu, "An Adaptive Energy-Efficient and Low-Latency MAC for Data Gathering in Wireless Sensor Networks," in Parallel and Distributed Processing Symposium, 2004. [52] J. H. Krzysztof W. Kolodziej, Local Positioning Systems: LBS Applications and Services, Boca Raton: CRC Press, 2006. [53] K. Ghaboosi, M. Latva-aho, Y. Xiao and B. H. Khalaj, "Modeling Nonsaturated Contention73

Based IEEE 802.11 Multihop Ad Hoc Networks," IEEE, vol. 58, no. 7, pp. 3518-3532, 2009. [54] H. Javaid, M. Shafique, J. Henkel and S. Parameswaran, "System-level application-aware dynamic power management in adaptive pipelined MPSoCs for multimedia," in IEEE, San Jose, CA, 2011. [55] M. Miladi, T. Ezzedine and R. Bouallegue, "Latency of Energy Efficient MAC Protocols for Wireless Sensor Networks," in IEEE, Cote d'Azur, 2006. [56] W. L. Tan, W. C. Lau and O. Yue, "An Energy-Efficient and Receiver-Driven MAC Protocol for Wireless Sensor Networks," in IEEE, Baltimore, MD, 2007. [57] V. Mainanwal, "Comparison, Evaluation and Characterization of MAC Protocols in Wireless Body Area Network," in International Conference on Next Generation Computing Technologies, Dehradun, 2015. [58] S. KHATARKAR, "Wireless Sensor Network MAC Protocol:," Wireless Sensor Network MAC Protocol:, vol. 4, no. 4, pp. 304-310, 2013. [59] S. KHATARKAR, "Wireless Sensor Network MAC Protocol: SMAC & TMAC," Indian Journal of Computer Science and Engineering (IJCSE), vol. 4, no. 4, p. 309, 2013. [60] L. CHAARI and L. KAMOUN, "Wireless sensors networks MAC protocols," JOURNAL OF TELECOMMUNICATIONS, vol. 2, no. 1, pp. 42-48, 2010. [61] F. Y. S. M. a. I. C. Jian Shen, "Energy Efficiency of MAC protocols in Wireless Sensor Networks," in Information Science and Applications (ICISA), 2011 International Conference, 2011. [62] A. M. Abbas, "TrustLP: A Trust-Based Localization Protocol for," in IEEE, Mumbai, 2015. [63] T. Cooklev, Wireless Communication Standards: A Study of IEEE 802.11, 802.15, 802.16,
74

New York: IEEE Standards Association, 2004. [64] A. Achtzehn, M. Gritzan, M. Petrova and P. Mähönen, "IEEE 802.11 Wi-Fi access point localization with angular signal strength information," in IEEE, Washington DC , 2014. [65] G. Suddul and A. Ramdoyal, "Mobile device localization in IEEE 802.11 networks: A comparative analysis of SSDoA against TDoA," in IEEE, Pointe-Aux-Piments, 2013. [66] M. F. N. L. C. B. A. Mesmoudi, "An Efficient Area-Based Localization Algorithm," Praise Worthy Prize , vol. 10, no. 10, pp. 1062-1070, 2015. [67] W. Z.-s. ,. Z. L. S. F. WANG Jian-guo, "An Improved Range-based Localization Algorithm in," in 4th International Conference on Biomedical Engineering and Informatics (BMEI) , 2011. [68] O. T. o. A. L. S. f. C. I. Environments, "Tom Van Haute, Bart Verbeke, Eli De Poorter, Ingrid Moerman," IEEE, vol. PP, no. 99, p. 3, 2015. [69] a. L. M. Simarpreet Kaur, "Power Saving MAC Protocols for WSNs and Optimization of SMAC Protocol," International Journal of Radio Frequency, p. 3, 2011. [70] P. V. M. M. U. Pushpendra Kr. Tyagi, "Introduction to TMAC Protocol with Reduction Function for Wireless Sensor Networks," International Journal of Advanced Research in Computer Science and Software Engineering, vol. 3, no. 6, p. 1157, 2013. [71] Z. D.-l. Z. X.-y. Zhang Rui-qin, "RS-MAC: A fusion ranging of WSN MAC protocol," IEEE, Vols. 2327-0594, pp. 495-498, 2013. [72] ,. S. H. B. S. H. A. M. A. Y. M. S. H. S. AHMAD NASEEM ALVI, "BEST-MAC: BitmapAssisted Efficient and Scalable," IEEE ACCESS, vol. 4, no. 15819625, pp. 312-322, 2106. [73] L. G. Ezio Biglieri, "Multiple Access Channels: Theory and Practice," in Multiple Access Channels: Theory and Practice , Budapest , IOS Press , 2006, p. 4.
75

[74] T. Singh, Artist, Astronomy & Satellite communication. [Art]. Talvinder Writes, 2013. [75] L. G. Ezio Biglieri, Multiple Access Channels: Theory and Practice, Budapest : IOS Press, 2006. [76] S. P. Fekete, Algorithmic Aspects of Wireless Sensor Networks: Fourth International Workshop, Reykjavik, Iceland : Springer, 2008.

76

