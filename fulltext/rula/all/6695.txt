BORESIGHT CALIBRATION OF A TERRESTRIAL LiDAR SCANNING SYSTEl\1

By Shahrzad Parandeh, BEng Ryerson University, 2006

A thesis presented to Ryerson University in partial fulfillment of the requirements for the degree of l\1aster of Applied Science in the Program of Civil Engineering Toronto, Ontario, Canada, 2010

© Shahrzad Parandeh 2010

PROPERTY OF RYERSON UNIVERSITY UBRAm

Author's Declaration Page

I hereby declare that I am the sole author of this thesis. I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

SHAHRZAD PARANDEH

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

~SHAHRZADPARANDEH

11

Abstract

Shahrzad Parandeh, Boresight Calibration of a Terrestrial LiDAR Scanning System, Master of Applied Science, Civil Engineering, Ryerson University, Toronto, 2010.

Laser mapping has become quite popular in recent days due to its capability of providing information directly in three dimensions. A Terrestrial Laser Scanning (TLS) system operates by emitting and locating returned laser pulses. Locating the returned pulses requires knowing precisely for each laser pulse, the vehicle position (e.g. GPS), the attitude of the vehicle using Inertial Measurement Unit (lMU), the scanner angle when the laser pulse left the sensor, and the slant range to the surface for that pulse. One of the most critical sources of error in TLS or any other laser scanning system is the angular misalignment between the scanner and the IMU, which is called misalignment or boresight error. This error must be addressed before a TLS system can accurately produce data. The purpose of this research is to develop a method and identify the requirements for calculating the small misalignment angles between the laser scanner and the combined GPS/lMU solution for position and attitude. A mathematical model is developed in order to acquire the misalignment angles, using simulated data which consists of coordinates of target points, position of the scanner, rotation matrix of the IMU, and the product matrix (i. e. [LU., l1y, I1z]T) derived from the range and the MATLAB program which initially solves for the Projection Matrix using preset boresight angles (R b). The equation is then rearranged to solve for the Rb as the goal is to obtain the same prearranged values that are initially used in the first part of the analysis. The calculation of the misalignment angles is considered to be successful as the prearranged Roll, Pitch, and Heading values are obtained after a few iteration, verifying that the mathematical model is sufficient for the purpose of calibrating the Terrestrial Laser Scanner.

111

-.-~

"
Acknowledgments

First and foremost I offer my sincere gratitude to my supervisor and mentor, Dr. Michael Chapman, who has supported me throughout my graduate studies as well as this thesis with his patience and knowledge. Without his encouragement and effort this thesis would have not been completed. I simply could not wish for a better or friendlier ·supervisor.
I would like to express my appreciation to the faculty in the Department of Civil

Engineering, as well as my Graduate Program Administrator, Mary Nee1ands, for their guidance and support during my study period at Ryerson University.
I am indebted to the staff at Optech Incorporated for their help and knowledge

·

provided. Special thanks to Paul Conrad, Troy Lane, Collin Young-Pow, and Edward Melcher for taking the time and offering me their help and recommendations. My deepest appreciation goes to my wonderful parents, and brother for their love and support throughout my life. Without their dedication and support none of this would have been possible. Last but certainly not least, lowe my heartfelt gratitude to my dearest life's companion. Roozbeh Zamyadi - your persistent encouragement and support throughout this journey have made it possible for me to achieve my graduate study degree.

iv

Table of Contents

Abstract Acknowledgements LIST OF FIGURES .............................................................................. vln LIST OF TABLES ............................................................................................................. ix LIST OF ABBREVIATIONS ......................................................................... x Chapter 1: Introduction ........................................................................................................ 1 1. Background .............................................................................................................. 1

Chapter 2: Literature Review ............................................................................................... 6 2. Mobile Mapping Systems ........................................................................................6 2.1 2.2 2.3 2.4 History of Mobile Mapping Systems ...............................................................6 Coordinate Determination from Geo-Referenced Platforms ...........................9 LiDAR Scanning Systems ............................................................................. 10 Basic LaserlLiDAR Scanner Relations .......................................................... 13

Chapter 3: Lynx Mobile Mapper ....................................................................................... 15 3. Lynx Mobile Mapper ............................................................................................. 15 3.1 3.2 3.3 3.3.1 3.3.2 3.4 3.4.1 3.4.2 Overview ........................................................................................................ 15 System Characteristics ................................................................................... 16 System Concept ............................................................................................. 16 Lynx Systems' Workflow ........................................................................ 17 System Specifications .............................................................................. 19 Surveying Applications of a Mobile Mapping System: Lynx ....................... 21 Data Acquisition Platforms ...................................................................... 22 Railroad Survey ........................................................................................ 24 v

3.4.3 3.4.4
3.5 3.5.1 3.5.2

Highway and Road Infrastmcture ............................................................ 25 Urban Modeling ....................................................................................... 26 Main Subsystems ........................................................................................... 28 LiDAR Scanners ...................................................................................... 28 Global Positioning System ....................................................................... 28 Inertial Measurement Unit (IMU) ........................................................... .31 Kinematic Modeling ................................................................................ 32 IMU and GPS Data Integration ................................................................ 36 Control Rack and Laptop ......................................................................... 38 Power .......................................................................................................38 Sources of Errors ........................................................................................... 38 GPS Errors ............................................................................................... 39 Satellite Geometry ........................................................ :........................... 41 Cycle Slips ...............................................................................................41 Scanner Errors .......................................................................................... 42 Position and Attitude Accuracy ............................................................... 44 Misalignment Error .................................................................................. 44

3.5.3
3.5.4

3.5.5 3.5.6
3.5.7

3.6

3.6.1
3.6.2 3.6.3 3.6.4
3.6.5

3.6.6

Chapter 4: The Misalignment Problem.............................................................................. 46

4.

Misalignment Error ................................................................................................ 46

4.1 4.1.1 4.1.2 4.1.3

Roll. Pitch. and Heading ................................................................................46 Influence of Roll Misalignment .............................................................. .46 Influence of Pitch Misalignment. ............................................................ .48 Influence of Heading Misalignment ........................................................ 49

vi

4.2 4.2.1 4.3 4.3.1

Boresight Calibration ..................................................................................... 50 Laboratory Test ........................................................................................ 52 Methods of Boresight Calibration ................................................................. 52 Semi-Automated Misalignment Calibration ............................................ 53 Manual Misalignment Calibration ........................................................... 53

4.3.2

Chapter 5: Methodology .................................................................................................... 57 5. Methodology .......................................................................................................... 57 5.1 5.2 5.3 Technique Definition .....................................................................................57 Data Simulation and Analysis .......................................................................60 Results and Discussions ................................................................................. 62

Chapter 6: Final Review ....................................................................................................75 6. Summary. Conclusions, Future Studies ................................................................. 75 6.1 6.2 6.3 Summary ........................................................................................................ 75 Conclusions ....................................................................................................77 Future Studies ................................................................................................ 80

References .......................................................................................................................... 81 Appendix A ........................................................................................................................ 83 Appendix B ........................................................................................................................ 87

Vll

LIST OF FIGURES
Figure 1.1 Multi-Sensor Integration for Mapping Applications Figure 3.1 Lynx Mobile Mapper Figure 3.2 Lynx Hardware System Components Figure 3.3 System Workflow Figure 3.4 Point Cloud (a) and CAD Model (b) of Part of a Highway Figure 3.5 Lynx Installed on a SUV (a). Data Point Cloud Collected by Lynx (b) Figure 3.6 Lynx Installed on a Railway Platform (a). Data Collected during this Project (b) Figure 3.7 Lynx Installed on a Jet Boat (a). Data Collected during this Project (b) Figure 3.8 Lynx Installed on a Car on Railroad (a) Data Collected during this Project (b) Figure 3.9 Point Cloud (a) and CAD Drawing (b) of the Highway Figure 3.10 Point Cloud (left) and CAD Drawing (right) Figure 3.11 Kinematic Modeling and Different Frames Figure 3.12 GPS/IMU Integration Scheme Figure 3.13 Area of Good Elevation for Satellite Geometry Figure 4.1 Roll Misalignment - Rotation along y Axis Figure 4.2 Pitch Misalignment - Rotation along x Axis Figure 4.3 Effect of Heading Misalignment Figure 4.4 Heading Misalignment - Rotation along z Axis Figure 4.5 Influence of Roll Misalignment Figure 4.6 Influence of Pitch Misalignment Figure 4.7 Influence of Heading Misalignment Figure 5.1 Different Coordinate Systems and their Respective Frames Figure 5.2 Target Points (l and 2) vs. Data Derived Figure 5.3 Target Points (36-38) vs. Data Derived Figure 5.4 Corner Target Points vs. Data Derived Figure 5.5 Geometry of the Control Points Figure 5.6 Target Points (36-38) vs. Data Derived (2) Figure 5.7 Vertical Target Points vs. Data Derived Figure 5.8 Diagonal Target Points vs. Data Derived 3 15

17
18

19
23
23

24 25 26 27 34
37

41 46 48 50 50 54 55
55

60
66 67

68
69

71
72 73

viii

LIST OF TABLES
Table 1.1 Comparison of Spatial Data Collection techniques ................. :.................................5 Table 3.1 Lynx System Specification ...................................................................................... 20 Table 3.2 GPS Errors, Causes, and Corrections ...................................................................... 40 Table 4.1 Rolling Effect on Horizontal Surface ..................................................................... .47 Table 4.2 Pitching Effect on the Object Position .................................................................... 49 Table 5.1 Projection Matrix Results for Target Samples......................................................... 62 Table 5.2 Boresight Angle Results for Target Points without Noise ....................................... 64 Table 5.3 Boresight Angle Results for Points I and 2 with Noise .......................................... 65 Table 5.4 Boresight Angle Results for Points 36-38 with Noise ............................................. 66 Table 5.5 Boresight Angle Results for Data Derived from I, II, Ill, 121 with Noise .......... 67 Table 5.6 Results of all Cases Tested ...................................................................................... 69 Table 5.7 Boresight Angles Results Derived when RI has Rotation aboutx-Axis .................. 70 Table 5.8 Boresight Angle Results from Vertical Target Points With Noise .......................... 72 Table 5.9 Boresight Angle Results from Diagonal Control Points .......................................... 73

ix

LIST OF ABBREVIATIONS

CIA code CW DGPS DMI DTI FOG FOV GCPs GIS GPS IMU · INS LADAR LiDAR MHIS MMS P-code POS POSLV POSMMS PPS QAlQC RLG TLS

Course Acquisition code Continuous Wave Differential Global Positioning System Distance Measurement Indicator Dry Tuned Gyros Fiber Optic Gyros Field of View Ground Control Points Geographic Information Systems Global Positioning System Inertial Measurement Unit Inertial Navigation System LAser Detection And Ranging Light Detection and Ranging Mobile Highway Inventory System Mobile Mapping System Precision - code Position and Orientation System Position and Orientation System for Land Vehicle Position and Orientation SystemIMobile Mapping Suite Pulse Per Second Quality Assurance/Quality Control Ring Laser Gyros Terrestrial Laser Scanning Zero Velocity Updates

ZUPT

x

Chapter 1: Introduction
1. Background
The past 20 years have seen an explosive growth in the demand for geo-spatial data. This demand has numerous sources and takes many forms; however, the net effect is an ever-increasing need for data that is more accurate, has higher density, is produced more rapidly, and is acquired less expensively. For mapping and GIS projects, this data has traditionally been collected using terrestrial surveying techniques. or by aerial photogrammetric or by Light detection And Ranging (LiDAR) surveys. Unfortunately, conventional surveying techniques are time consuming and not well suited for rapid or dense data collection. More recently, point-wise GPS data collection systems have become popular. However, these systems (similar to the traditional terrestrial surveys) still require each point of interest to be occupied, and consequently they have not significantly reduced either the cost or time requirements of data collection. In contrast, aerial photogrammetry, until recently in its classical form of film-based optical sensor has been widely used for high accuracy mapping applications at all scales. Ground Control Points (GCPs) were the only required source of information for providing the geo-referencing parameters and suppressing undesirable error propagation. In general, the necessity for GCPs was so evident that all methods of operation relied on them. However. the establishment of GCPs is costly and is the main drawback of this type of surveying method. The use of GCPs also often puts operational constraints on a specific flight mission. This situation changed fundamentally when GPS data were included in the block
1

adjustment of aerial triangulation. In principle. the use of airborne GPS data made block triangulation entirely independent of GCPs. This has eliminated the necessity of the GCPs, but is only true for a block triangulation scheme with overlapping images. Other sensors cannot be fully geo-referenced by GPS alone; such as pushbroom digital scanners, laser scanners and imaging radar systems, which are important in kinematic mapping applications (EI-Sheimy, 1999). Terrestrial Laser scanners (TLS), also referred to as Mobile Mapping Systems (MMS) can be used as an alternative to both point-wise GPS and traditional techniques of data collection, integrate various navigation and remote sensing technologies on a common airborne or land-based platforms. They integrate a set of sensors mounted on a common platform and synchronized to a common time base; which are commonly used in kinematic mode, and are capable of operating with the data measured on the platform (El-Sheimy, 1999). During the last few years, the use of Mobile Mapping Systems for the collection of high quality three dimensional urban data has increased tremendously. While urban models are already available for a large number of cities from aerial data like stereo images or airborne LiDAR. TLS is especially useful for accurate three-dimensional mapping of other man-made structures like road details, urban furniture or vegetation. The integration of GPS/IMU (Inertial Measurement Unit) puts the geo-referencing of LiDAR data on a new level and frees it from many operational restrictions. Together with digital data recording and data processing, it initiates the era of Mobile Mapping Systems (El-Sheimy, 1999)

2

In the context of 3D building reconstruction, airborne data collection provides the
outline and roof shape of buildings, while terrestrial data collection from ground based views is useful for the geometric refinement of building facades. This is especially required to improve the quality of visualizations from pedestrian viewpoints. However, the complete coverage of spatially complex urban environments by TLS usually requires data collection from multiple viewpoints. This restricts the applicability of static TLS to the 3D data capturing of smaller scenes, while it can be captured by limited number of viewpoints. Also, dynamic Mobile Mapping Systems (MMS) allow for rapid and cost effective capturing of 3D data from a larger street section including the dense point coverage for the facades of the neighboring architecture. Because of this, terrestrial laser
I

scanners are integrated to ground-based mobile mapping systems, which have been actively researched and developed for many years (Grejner- Brzezinska et at., 2004). The conceptual layout and data flow of a multi-sensor system for mapping applications is shown in Figure 1.1.

-~

V~bld...
.,,~~,

1

E"''''''~i'

" n..ta Pro<IIM<U;1
"D.taC~"

· .KJ....... k

~.od.W..

... Quality (...,......

..

I

Figure 1.1 Multi·Sensor Integration for Mapping Applications (EI-Sheimy, 1999)

3

While multiple video or digital cameras have been traditionally used by these systems for tasks like highway surveying, their applicability has been increased considerably by the integration of laser scanners. Additionally, employing multi-sensors on board will also add other advantages in terms of denser point clouds (Le. more points of data is collected), and considerably increased field-of-view, and it will also eliminate problems such as shadowing during the capture. Table 1.1 in page 5 shows a comparison of TLS with alternative methods of spatial data collection. Evident in this table is how multi-sensor systems combine the advantage of each individual alternative technique. The accuracy and performance of Terrestrial Laser Scanners have been evaluated to be very high, and in this research, the mobile mapping system studied is the Optech's Lynx Mobile Mapper. Lynx is based on a platform combining two laser scanners, designed for collecting grade LiDAR data over large areas that are impractical to survey with static LiDAR sensors yet require an accuracy and resolution that exceed airborne technologies. Lynx Mobile Mapper is a fully integrated system with 360· laser sensors that survey large areas from a mobile platform at very high speeds (up to 100kmlhr), obtaining a high-resolution point cloud. Similar to any other measurement system, the calibration of the Mobile Mapping Systems is a concept which must be carefully completed in order to determine and adjust the system's accuracy. System calibration is necessary to verify that the system is performing within the manufacture's specifications. In this research, the current calibration method of the Lynx system that is currently being practiced by Optech Incorporated, as well as a proposed technique with the purpose of enhancing the precision of the calibration procedure has been explained and discussed.

4

Table 1.1 Comparison of Spatial Data Collection techniques

·

Rapid data collection Data can be archived revisited Less intrusive data collection

·
Close range photogrammetry

Establishing sufficient control is difficult and expensive

·
·

· ·

Labor intensive and slow Not suitable for dense collection over a wide area Intrusive data collection Not suitable in urban centers or forested areas · Few skills required High absolute accuracy Not suitable for dense data collection over a wide area Intrusive data collection · Rapid data collection Data collection can partially automated
be

Total Station terrestrial surveying
· ·

·

High relative accuracy

Point-wise GPS

·

·

·

·

Incomplete coverage - only points visible from the air can be collected Expensive data collection campaigns

· ·

Airborne Laser and photogrammetric surveys

·

Data can be archived and revisited Less intrusive data collection Few control points required Rapid and dense data collection over a wide area More cost-effective acquisition data

· ·

·

I
I

·
Mobile Mappers! Terrestrial Laser Scanners
· High initial cost

I
I

j

·
·

Data can be archived and revisited Less intrusive data collection

I

5

Chapter 2: Literature Review
2. Mobile lVlapping Systems
2.1 History of ~Iobi1e Mapping Systems
The development of the Mobile Highway Inventory System (MHIS) was first introduced by a number of Canadian provinces and some US states in 1983. Ever since, surveying from a moving vehicle has become more and more sophisticated and is now at a point where it matches classical surveying methods in accuracy and far surpasses them in economy (Schwarz et aI., 1993). In traditional techniques, discrete static measurements are used to fix the position of individual points which are then used to derive highway features of interest. In the dynamic approach, a combination of navigation and imaging sensors are used to record all visible features along a highway corridor from a moving vehicle. This information is then used to form a continuous three-dimensional (3-D) model of the highway corridor from which all features of interest can be extracted and sorted in a 3-D GIS system (Schwarz et al., 1993). The initial MHIS had these capabilities only
III

an embryonic stage. It used

gyroscopes, accelerometers, and a wheel odometer to fix the location of the vehicle, and video camera to document features in the highway corridor. The positioning accuracy of this survey van was rather poor and the video images were not digitized for measurement purposes. However, it provided good visual record of highway features and their approximate locations. In 1988, a major step forward was made when a new positioning and orientation component was tested for the Alberta MHIS. Satellite methods (Le.

6

differential GPS) were employed to improve the positioning accuracy and an inertial strapdown system was used to bridge GPS outages in addition to providing the capability for accurate system orientation determination. The results of these tests showed that positioning of the vehicle was possible with an accuracy of 0.2 to 0.3 m while moving at a speed of 50 to 70 km per hour (Lapucha et aI., 1990). Lapucha et ai., (1990) discuss a proposal to further develop this system into a precise highway survey system. It is worth emphasizing that GPS was the primary motivator for the development of both land-based and airborne Mobile Mapping Systems, and the absolute accuracies these systems achieve are still largely dependent upon the performance of the GPS. Indeed, except for some rare indoor MMS, all MMS currently use GPS for their positioning sensor. The next major step was made when the information contained in the video images was itself incorporated into the measurement process. This idea is basic to the highway · van developed by the Ohio State University's Center of Mapping and the GEOV AN system operated by GEOSPAN Corp. Both systems work with an array of video cameras. As long as the distance between object and camera reference are short, high positioning accuracy can be achieved. In order to maintain this accuracy along the whole trajectory, the position and orientation of the camera has to be determined with a similar accuracy. Little information has been published on how the orientation of the images is obtained in the above mentioned systems or how the different data streams are time-tagged. It is, therefore, difficult to assess the overall accuracy of these systems at this stage. Highway surveying that employs video-photogrammetry, supported by GPS/INS systems, have been well used in many parts of the world. However, there are significant challenges in creating 3D data products with minimal human data processing. Some of

7

lhese systems are now adding laser scanners to improve data processing workflows. Several vehicle based laser scanning systems have been built in recent years. Most of these systems were unique installations and were developed mainly to demonstrate the general applicability of this technology. In 2007, Optech Incorporated announced the launch of the Lynx Mobile Mapper. The Lynx mobile mapping solution, while accommodating up to four LiDAR sensor heads, fuses the LiDAR data with an on-board passive imaging system, the Trimble/Applanix POS LV system and an operational software platform to produce survey grade 3D data from a mobile vehicular platform, (typically a minivan). The position and orientation solution (POS) makes use of an IMU (Inertial Measurement Unit) that contains three accelerometers and three gyroscopes; which measure the acceleration and angular velocity necessary for computing all aspects of the vehicle motion: position, speed, acceleration, orientation, and rotation. Two dual frequency (LIIL2) GPS receivers track and record the vehicle path and the differential GPS processing is used to correct and refine the geo-referenced data. In case of GPS outages, the POS can correct the location by using the DMI, Distance Measurement Indicator. It has been determined that the system's accuracy is better than Scm (Optech Inc, 2009). In this thesis, the further development and enhancement of the calibration of the Lynx System is discussed. While the system's performance and precision are determined to be sufficient in the mapping industry, it still has room for improvements with regards to its calibration procedure that is utilized by Optech today.

8

2.2 Coordinate Determination from Geo-Referenced Platforms
As it was previously mentioned, MMS integrate navigation sensors and algorithms together with sensor that can be used to determine the positions of points remotely. These sensors are all mounted on a platform; sensors at the back of the platform determine the position and the orientation of the platform itself, while sensors in front of the platform determine the positi'On of points external t'O the platf'Orm. Typically, sensors used f'Or remote P'Ositi'On determination are LiDAR sens'Ors (als'O called range finders of laser sensors); however, other types 'Of sens'Ors 'Or photographic cameras (photographic sensors) can be added to the MMS system to meet the needs 'Of the end user. Hence, the term rem'Ote sensor also refers to mapping or relative sensors and is a more general term used in the industry. Historically, land-based MMS systems have been m'Ounted 'On large vehicles 'Or vans (along with their sensors and the platform that holds them); nevertheless, m'Ore recently empl'Oyment of other platforms to carry the system has been investigated t'O extend the range 'Of applications of these systems (EI-Sheimy, 1996). The strength of Mobile Mapping Systems is their ability to directly geo-reference their mapping sensors. A mapping sensor is geo-referenced when its position and orientation relative t'O a mapping c'Oordinate frame is known. When geo-referencing is performed, mapping sensors can be utilized to determine the position of points external t'O the mounting platf'Orm with respect to a general mapping c'O'Ordinate frame. In addition, navigation sensors on board of an MMS are used via direct geo-referencing to find the position and the orientation of the platform itself; with respect to a global coordinate frame. Direct geo-referencing method is different frem indirect gee-referencing method used traditi'Onally by many automated surveying systems, where points are acquired and 9

established as control (called control points) via a field survey with high precision, before data is collected. Indirect geo-referencing is the measurement of position and orientation with respect to the control points (EI-Sheimy, 1996). The basis for all geo-referencing methods - direct or indirect - is a seven parameter conformal transformation where that relates a point in MMS coordinate frame (1) to a mapping coordinate frame (r;'):

Eq.2.1

This is done by first correcting the orientation of a point in the MMS coordinate frame (r;) using the rotation matrix between the mapping sensor and the mapping coordinate frame, with respect to the mapping frame (R;'), to fit the orientation of the mapping coordinate frame, and then adding the position offset between the mapping sensor and the mapping coordinate frame (r;n); which is a position vector of the mapping sensor in the mapping coordinate frame. In addition. J.L";" is a scale factor that can be determined directly, using a laser scanner, or indirectly, using a stereo technique with two images (EI-Sheimy, 1996). In reality, the position of a GPS antenna on the platform and the orientation of an IMU or other attitude-sensing devices are measured directly.

2.3 LiDAR Scanning Systems
Laser scanning operation is performed by deflecting a ranging beam off an object surface in a way that when the data acquisition is performed over that surface, the data collected has high point density. Since the lasers emit high energy pulses that can be recognized in short intervals. they are mostly used as ranging beams ,with comparatively short wavelengths. Lasers with high pulse repetitions can obtain and produce range 10

images that have very high point density and are known as laser radar. The two commonly used acronyms for these systems that identify laser radar are: LiDAR (Light Detection And Ranging) and LADAR (LAser Detection And Ranging) (Dillane, 2003). The assemblies of laser scanners include opto-mechancial scanning parts that are active sensing systems which use laser beams as a sensing carrier. There are two optical beams that must be considered in such systems: the emitted laser beam and the received portion of that reflected beam. The laser scanner only measures the line of sight vector from the laser scanner aperture to a point where the beam hits the object surface. There are two major ranging principles for laser range measurement. In order to obtain a range measurement from a laser, the transmission must be modulated. There are two methods of modulating a laser beam (Wehr and Lohr, 1999). The first principle of the laser range measurement is pulsed ranging which is direct , and widely used. This method is employed by majority of laser scanning units which is referred to as Pulse Lasers (Wehr and Lohr, 1999). With pulse modulation the transmitter generates a rectangular pulse with widths of 1O-15ns. Measurements are computed by measuring the time-of-travel of a light pulse. To achieve this, the travelling time (td between the emitted and received pulse must be measured, which is derived by:

Eq.2.2

where

R is the distance traveled to the target, and
C is the speed of light

11

The second type of modulation of a laser beam involves the acquisition of the phase difference. This method is applicable when the laser continuously emits lights at a fixed frequency. These units are called continuous wave (CW) lasers. For this method the phase difference between the transmitted and the received signal that is reflected from the object surface is measured.

Eq.2.3

where
<p is the phase difference between transmitted and received signal,

T is the period of signal. and n is the number of full wavelengths included in the distance from the laser transmitter to receiver (Wehr and Lohr, 1999). The scanning process has a few key parameters: the laser footprint, the swath width, the distance between scanner and the target plane (h), and the laser point density. The laser footprint (A L ) mainly depends on the divergence of the laser beam (y).
AL instantaneously = (
h
COS

1(.1.'

'Yl11st

)*

Y

Eq.2.4

The swath width (SW) mainly depends on the scan angle (q»
StY"

$ = 2htan2

Eq.2.5

12

The main interest of surveying operation is basically having a dataset that includes the desired point density and accuracy. The spacing across the travel direction mainly depends on either the pulse repetition frequency point for a pulse laser. or on the measurement rate for a CW laser. Along the direction of survey, the point spacing is detennined by the speed of the vehicle and the period of one line scan. The scan pattern of a surface not only depends on the laser scan pattern, but also on the survey direction, speed, and the terrain topography. The points along a line are usually scanned in equal angle steps, but their spacing on the object surface is not constant (Dillane, 2003).

2.4 Basic LaserlLiD AR Scanner Relations

Range (R) and Range Resolution (~) of a pulse laser are calculated by;
t .It R =C* - and ~ =c*2 2

Eq.2.6

And the time (t) is measured by a time interval counter relative to a specific point on the pulse; such as the leading edge, where the signal voltage has reached a predetennined threshold value (Baltsavias, 1999). A possible error occurs if the voltage magnitude of the transmitted and received pulses is adjusted to the same value before they are sent to the time interval counter. For example, if received pulse amplitude is too low the measured time will be too long or vice versa. As long as the range resolution is significantly small so that the highest range accuracy can be achieved and small enough to pennit accuracy investigations through repeated measurements, then it can be considered as negligible (Baltsavias, 1999).

13

The maximum explicit and unambiguous range depends on a variety of factors, such as the maximum range of the time interval counter and the pulse rate. In a single pulse system, in order to avoid confusion when the pulse arrives at the time interval counter, no pulse is transmitted until the reflection of the previous pulse has been received. This does not limit the maximum achievable range. Maximum range is potentially limited by laser power, beam divergence, target reflectivity, detector sensibility, and environment transmission (Dillane, 2003). Accuracy of range is dependent on the ability to select the same relative position on the transmitted and received pulse in order to measure the time interval and it is limited by noise, signal strength, sensor sensitivity, and reproducibility of the transmitter pulse. It is also important that the accuracy of the fixed time delay in the system and the accuracy of time interval counter are known (Baltsavias, 1999).

14

Chapter 3: Lynx Mobile Mapper
3. Lynx Mobile l\'lapper 3.1 Overview
The information given in the previous chapter was a review of the general concept of Laser Scanners. The following chapter presents the basic theory, functionality and the applications of the system under investigation for this study: The Lynx Mobile Mapper. Figure 3.1 illustrates the components and the positioning of each unit of Lynx system on a vehicle.

Figure 3.1 Lynx :Mobile l\Japper (Optech Inc., 2008)

15

3.2 System Characteristics

Lynx Mobile Mapper is a fully integrated system with up to 2 to 4 laser scanners with field-of views of 3600 that are mounted on moving platforms such as vans or SUVs. The system is capable of surveying vast areas when moving at a speed of maximum 100kmlh and obtaining a high-resolution point cloud. The system is claimed to have accuracy better than 5cm and has pulse repetition frequency of 100 kHz; i.e. the data gets collected at the rate of 100 points per second per sensor. Moreover, the system operates completely eye-safe laser that enables the data collection mission to be performed without disruptions due to traffic in densely populated areas. Since Lynx Mobile Mapper allows for rapid generation of high resolution data with high accuracy, it considerably reduces the time and cost of collecting data when compared to the traditional surveying methods (Ussyshkin. 2009).

3.3 System Concept
The following sections present and highlight the system concept and major components (shown in Figure 3.2) of the system's hardware integration processes.

16

OMI

l:
I

L'ptop Camptlt«

r-

GPS 2

tCon_IRa"',

I
S.nsor
i

~

r-L

; u
L--

I!!

Array 1)0"
(IMU)

®

SflISQf'

,L
U

!

r:!

'---

Figure 3.2 Lynx Hardware System Components (Optech Inc., 2008) 3.3.1 Lynx Systems' Workflow

In gener&l, the workflow of airborne and ground-based mobile LiDAR systems. shown in Figure 3.3. is almost identical. The LiDAR data produced by laser scanners is always processed and delivered in digital format which allows for a wide range of applications and users to take advantage of it. Most of the time, the processed LiDAR data is in the form of point clouds that may be saved in different formats which contain xyz geo-referenced data (Ussyshkin, 2009). The point cloud data may be imported into a variety of software packages used for different applications such as GIS.

17

1

Figure 3.3 System Workflow
,
,~

Majority of 3 dimensional format programs such as AutoCAD and ArcView are capable to import and export LiDAR data and they are also competent to utilize LiDAR point cloud data. Figure 3.4 is an example of an area shown in both point cloud and a CAD drawing (Ussyshkin, 2009).

18

Plan Lynx
" Survey

Prepare Lynx
Systel11

Process POS/GPS di1ta for SBEr

,

Process lynx Data

View Survey

Output

Figure 3.3 System Workflow

Majority of 3 dimensional format programs such as AutoCAD and ArcView are capable to import and export LiDAR data and they are also competent to utilize LiDAR point cloud data. Figure 3.4 is an example of an area shown in both point cloud and a CAD drawing (Ussyshkin, 2009).

18

(a)

(b)

Figure 3.4 Point Cloud (a) and CAD l\lodel (b) of Part of a Highway (Ussyshkin, 2009).

The main disadvantage of this process is that the commercial 3D software packages have limitations on the number of imported points. and the LiDAR data has to be tiled for further data handling. Many LiDAR data providers have developed \ proprietary software, which not only helps to handle the same volume, but can also add more value to the LiDAR-derived end products (Ussyshkin. 2009).

3.3.2 System Specifications Similar to any basic laser scanner, Lynx system regulates and monitors the emitted laser beam and the received portion of the beam. The unit consists of different parts: a component that emits the beam, a scanner deflecting the beam towards the scanned area, and an optical receiver subsystem which detects the laser pulse reflected from the target (Ussyshkin. 2009). The components of a laser scanner record the line-ofsight vector and respective scanning angles. This process is synchronized with and supported by position and orientation system (POS). Since the speed of light is known,

19

(a)

(b)

Figure 3.4 Point Cloud (a) and CAD Model (b) of Part of a Highway (Ussyshkin,
2009).

The main disadvantage of this process is that the commercial 3D software packages have limitations on the number of imported points, and the LiDAR data has to be tiled for further data handling. Many LiDAR data providers have developed , proprietary software, which not only helps to handle the same volume, but can also add more value to the LiDAR-derived end products (Ussyshkin, 2009).

3.3.2

System Specifications

Similar to any basic laser scanner, Lynx system regulates and monitors the emitted laser beam and the received portion of the beam. The unit consists of different parts: a component that emits the beam, a scanner deflecting the beam towards the scanned area, and an optical receiver subsystem which detects the laser pulse reflected from the target (Ussyshkin, 2009). The components of a laser scanner record the line-ofsight vector and respective scanning angles. This process is synchronized with and supported by position and orientation system (POS). Since the speed of light is known,

19

the travel time of the laser pulse can be converted to precise range measurements. Table 3.1 provides specifications of the Lynx System.

Table 3.1 Lynx System Specification

Maximum Range Absolute Accuracy Laser Measurement Rate Scanner Field of View +/- Scm, (10)1.2 100kHz 360
0

When the laser range, scan angle, laser position from GPS and orientation of the laser platform from INS are combined, highly accurate xyz-coordinates of the laser points for each laser pulse can be calculated. To do so, timing is controlled by an internal clock, which is synchronized with GPS time using Pulse per Second (PPS) signal generated by the GPS receiver internal clock. Every measurement is tagged with a value from the internal clock. Afterwards, the tags are referenced to the PPS and each combination of range and angle measurement is assigned a GPS time tag. The laser pulse repetition rate refers to the speed of the mirrors deflecting laser beams; the data measurement rate for a Lynx system is typically 100.000 measurements per second. This allows for rapid collection of highly accurate data with the necessary point density within very short period of time (Ussyshkin. 2009). Similar to a camera, older laser scanners employed a cone-like field of view and, as such, they can only collect information that is not obscured due to line of sight problem or occlusions. However. newer laser scanners are capable of collecting the entire surrounding environment in a single 360 field- of-view (FOV) - which means that everything in sight is captured. The Lynx Mobile Mapper employs such scanners and is
0

20

capable of carrying up to 4 of these sensors which would minimize the problem of shadowing during the data collection. In addition, Lynx Mobile Mapper utilizes scanners which work with rotating mirrors (instead of the widely used oscillating mirrors). These scanners function in such a way that the laser beam is deflected by a rotating polygon mirror. This scanning mechanism has constant velocity rotating mirrors and produces line (unidirectional) scans. The mirror is rotated in one direction by a motor and the angle measured is either directly from the motor or from an angular encoder directly mounted to the mirror (Morin, 2(03). Basic advantage of such mirrors is the flexible adjustment of the required viewing angle. which in this case is 360 degrees. Also, this scanning mechanism has the advantage of having constant velocity, which means there are no acceleration type errors in the angle observation unlike an oscillating mirror.

3.4 Surveying Applications of a Mobile Mapping System: Lynx
Aside from their relatively low operation costs, TLS provide many useful features. such as rapid and efficient data collection, and efficient post processing procedures. Still. partly due to their flexibility, mobile mappers can be used for a wide range of applications; while the technology is still being developed to meet the needs of the end users. Hence. further optimization of the existing and newly evolving mapping technologies may outline the growth and development of the LiDAR technology; optimization of data collection process. post processing, and the QAJQC of LiDAR introduced for a specific application are some of such improvements that can define the future of LiDAR as a whole (Ussyshkin. 2009).

21

As a standard, the community of professional surveyors has defined a few key significant areas that characterize an acceptable LiDAR technology. Some of these areas are appropriate reporting procedures, manipulation and handling of automatically collected data, as well as rigorous quantification methods. Academic and research organizations can play an important role in setting such levels of acceptance by assessing the accuracy of these devices, creating automated and semi-automated calibration methods, all of which can help the LiDAR service providers understand the needs of the end users better and be able to introduce new capabilities and specifications to new LiDAR technologies (Ussyshkin, 2009).

3.4.1

Data Acquisition Platforms

Airborne LiDAR systems can be mounted on small to medium aircrafts or helicopters. Generally, even with additional fittings or mounts and power supplies that may be required for certain systems, any aircraft can be used to carry commercially available airborne LiDAR systems. Terrestrial mapping systems, on the other hand, can be mounted on minivans or SUVs, as shown in Fig 3.5, which is one of the main advantages of these types of mapping systems compared to their airborne counterparts. Ground-based mobile mappers are much more affordable and minimize organizational efforts, meaning there is no need for pilots, aircrafts, or special flight permission. In addition, mobile mappers utilize safe lasers that are not harmful to the human eyes; making the system usable during the normal hours of the day and in heavily populated areas without any restrictions (Ussyshkin, 2009).

22

(a)

(b)

Figure 3.5 Lynx Installed on a SUV (a). Data Point Cloud Collected by Lynx (b) (Ussyshkin, 2009)

Another characteristic that makes ground-based mobile mappers more attractive is the ability to mount them on other means of land transportation, such as railway platforms, or all terrain vehicles.

(a)

(b)

Figure 3.6 Lynx Installed on a Railway Platform (a). Data Collected during this Project (b) (Ussyshkin, 2009)

23

(a)

(b)

Figure 3.5 Lynx Installed on a SUV (a). Data Point Cloud Collected by Lynx (b) (Ussyshkin, 2(09)

Another characteristic that makes ground-based mobile mappers more attractive is the ability to mount them on other means of land transportation, such as railway platfonns, or all terrain vehicles.

(a)

(b)

Figure 3.6 Lynx Installed on a Railway Platform (a). Data Collected during this Project (b) (Ussyshkin, 2009)

23

(a)

(b)

Figure 3.7 Lynx Installed on a Jet Boat (a). Data Collected during this Project (b) (Ussyshkin, 2009) 3.4.2 Railroad Survey

In order to complete inventory and test the Lynx mobile mapping system for several key specifications, Optech Incorporated, recently performed a railroad data collection project in Oklahoma. Tests were performed during the course of the project to measure system performance in terms of identifying natural and artificial obstructions such as trees, tunnels and bridges, clearance of overhanging wires, as well as assessing capabilities of the system in mapping of the location and recognizing different switches and turns of the railway with high accuracy. As a measure of comparison of groundbased mobile mappers and traditional surveying methods, one can note that performing a similar survey using conventional surveying methods would require frequent measurements from a variety of locations on site. In addition, carrying out such a survey is highly dangerous and disruptive to normal operation of the railroad aside from being highly time consuming and labor intensive.

24

(a)

(b)

Figure 3.7 Lynx Installed on a Jet Boat (a). Data Collected during this Project (b) (Ussyshkin, 2009) 3.4.2 Railroad Survey

In order to complete inventory and test the Lynx mobile mapping system for several key specifications, Optech Incorporated, recently performed a railroad data collection project in Oklahoma. Tests were performed during the course of the project to measure system performance in terms of identifying natural and artificial obstructions such as trees, tunnels and bridges, clearance of overhanging wires, as well as assessing capabilities of the system in mapping of the location and recognizing different switches and turns of the railway with high accuracy. As a measure of comparison of groundbased mobile mappers and traditional surveying methods, one can note that performing a similar survey using conventional surveying methods would require frequent

measurements from a variety of locations on site. In addition, carrying out such a survey is highly dangerous and disruptive to normal operation of the railroad aside from being highly time consuming and labor intensive.

24

On the other hand, performing the survey using the Lynx mobile mapper, only took a few hours with minimal disruption to the railroad in addition to highly efficient and exceptional accuracy of mapping data (Ussyshkin, 2009).

(a)

(b)

Figure 3.8 Lynx Installed on a Car on Railroad (a) Data Collected during this Project (b) (Ussyshkin, 2009) 3.4.3 Highway and Road Infrastructure

In addition to its efficiency and accuracy, another project performed using a Lynx mobile mapper shows that the system provides high capacity for rapid 3D mapping of highways. One of the first projects, where capabilities of Lynx have been used for highway survey, was conducted in March 2008 in Greece (Zampa, 2009). The highway used for the project consisted of 3 lanes plus one shoulder lane and connects Korinthos to Athens. The study aimed to provide a 3D CAD drawing of the highway, illustrating its existing features (pavement, structures, slopes, road signs, poles, and etc.), as part of a planning process to add new features to the highway such as the construction of a new link-up motorway and the preservation of existing parts

25

On the Olher hand, performing the survey using the Lynx mobile; mapper, only took a few hours with minimal disruption to the railroad in addition to highly effic ient and exceptional accuracy of mapping data (Ussyshkin, 2009).

(a)

(b)

Figure 3.8 Lynx Installed on a Car on Railroad (a) Data Collected during this Project (b) (Ussyshkin, 2009) 3.4.3 Highway and Road Infrastructure

In addition to its efficiency and accuracy, another project performed using a Lynx mobile mapper shows that the system provides high capacity for rapid 3D mapping of highways. One of the first projects, where capabilities of Lynx have been used for highway survey, was conducted in March 2008 in Greece (Zampa, 2009). The highway used for the project consisted of 3 lanes plus one shoulder lane and connects Korinthos to Athens . The study aimed to provide a 3D CAD drawing of the highway, illustrating its existing features (pavement, structures, slopes, road signs, poles, and etc.), as part of a planning process to add new features to the highway such as the construction of a new link-up motorway and the preservation of existing parts

25

At an average speed of SOkmlh, the Lynx mobile mapper took only about 3 hours to survey the entire highway. Again, to compare, such a project would take about 120 working days to complete, on an 80 km highway, using a total station and a static laser. The point cloud collected by Lynx was generated in WGS84IUTM34 and converted into the Greek reference system CGR87 with an average spot spacing of 11 cm. To further improve the point cloud accuracy, ground control points and six base stations were placed alongside the highway (the survey area); which increased the accuracy to 2 cm or better. Different software packages such as PolyWorks and Pointools were used to process the resulting data collected for optimized results (Ussyshkin, 2009) .

(a)

(b)

Figure 3.9 Point Cloud (a) and CAD Drawing (b) of the Highway (Zampa, 2009)

3.4.4

Urban Modeling

Terrestrial Mobile Mappers, specifically the Lynx mobile mapper, can also be used for urban modeling. In a survey performed in Leicester, England (Zampa, 2009) in

26

At an average speed of 50kmlh, the Lynx mobile mapper took only about 3 hours to survey the entire highway. Again, to compare, such a project would take about 120 working days to complete, on an 80 km highway, using a totill station and a static laser. The point cloud collected by Lynx was generated in WGS84/UTM34 and converted into the Greek reference system CGR87 with an average spot spacing of 11 cm. To further improve the point cloud accuracy, ground control points and six base stations were placed alongside the highway (the survey area); which increased the accuracy to 2 cm or better. Different software packages such as PolyWorks and Pointools were used to process the resulting data collected for optimized results (Ussyshkin, 2009).

(a)

(b)

Figure 3.9 Point Cloud (a) and CAD Drawing (b) of the Highway (Zampa, 2009)

3.4.4

Urban Modeling

Terrestrial Mobile Mappers, specifically the Lynx mobile mapper, can also be used for urban modeling. In a survey performed in Leicester, England (Zampa, 2009) in

26

January of 2008, a historical section of the city was surveyed. The aim of the project was to survey and accurately reconstruct models of main buildings to create a complete archive of buildings. The narrow streets and tall buildings provided challenges for using a GPS, as there could have been outages in GPS readings. However, the flexibility of the mobile mapper allowed it to utilize its POS to correct the location through a process called Distance Measurement Indication (DMI); which measures the linear distance travelled. This gives the system (more specifically the

pas

LV) the ability to accurately

measure velocity and help constrain drift errors caused by GPS outages. The project area was surveyed in 20 minutes at an average speed of 30 kmlh (due to traffic) with point spacing of about 4 em in 144 million points collected. Only one base-station was required to carry out this project and post processing was performed using a software package called Pointools (Ussyshkin, 2009).

I

i ·
I

.tt..

I

i!

..'
(a)

~,

I ,

~

!\

~

Figure 3.10 Point Cloud (left) and CAD Drawing (right) (Zampa, 2009)

27

January of 2008, a historical section of the city was surveyed. The aim of the project was to survey and accurately reconstruct models of main buildings to create a complete archive of buildings. The narrow streets and tall buildings provided challenges for using a GPS, as there could have been outages in GPS readings . However, the flexibility of the mobile mapper allowed it to utilize its POS to correct the location through a process called Distance Measurement Indication (DMI); which measures the linear distance travelled. This gives the system (more specifically the POS LV) the ability to accurately measure velocity and help constrain drift errors caused by GPS outages. The project area was surveyed in 20 minutes at an average speed of 30 krnlh (due to traffic) with point spacing of about 4 cm in J 44 million points collected. Only one base-station was required to carry out this project and post processing was performed using a software package called Pointools (Ussyshkin, 2009).

Figure 3.10 Point Cloud (left) and CAD Drawing (right) (Zampa, 2009)

27

3.5 Main Subsystems
Almost every mobile LiDAR system is integrated and consists of several subsystems that are: LiDAR scanners, GPS receiver and antenna, inertial navigation system (INS), which includes Inertial Measurement Unit (IMU) for orientation measurements of the vehicle, and a POS unit (Position and Orientation System) that controls all of these components, synchronizes the time of all taken measurements, and records the collected data (Ussyshkin, 2009). The following sections provide details of the main subsystems.

3.5.1

LiDAR Scanners

As it was mentioned before, Lynx's LiDAR scanner emits and deflects the laser beam towards an area of interest. An optical receiver subsystem, detects the laser pulse reflected from the target and since the speed of light is known, the travel time of the laser

,
i

~,
"

:

pulse can be converted to precise range measurements. The laser pulse repetition rate in combination with scanning mirror deflecting pattern determine LiDAR data collection rate.

3.5.2

Global Positioning System

Global Positioning System (GPS) is a one-way, all-weather positioning and timing system that provides continuous worldwide coverage (EI-Rabbany, 2004). With the advent of GPS and existence of a complete satellite constellation, GPS made it possible to determine accurate time, position and velocity for any moving platform, in this case a vehicle. GPS is nominally composed of twenty-four satellites evenly spaced in

28

six orbital planes. These orbits are nearly circular and have an altitude of about 20200 km above the earth (El.Rabbany, 2004).The parent reference datum for GPS is WGS84. The basic idea of positioning by using GPS is as follows. The GPS satellites send signals that are picked by the GPS receiver. The receiver analyzes the satellite signals to determine the distance to the satellites and interprets the navigation message to obtain the locations of the GPS satellites in the space (EI·Rabbany, 2004). The process of computing the position of the receiving GPS antenna is based on the principle of spatial trilateration:

Eq.3.1
where p is the distance between the antenna and the satellite is the satellite position in an Earth·centered, Earth-fixed frame is the receiver's antenna position in an Earth-centered, Earth·fixed frame.

An additional clock term is added to account for drift in quartz oscillators, which

are employed in GPS receiver design (EI-Rabbany, 2004). The GPS positioning mode used in the operation of the system under consideration is called Relative Positioning. Relative Positioning consists of two GPS receivers tracking the same satellites simultaneously to determine the relative coordinates. For relative positioning, the satellite coordinates
Xs·

Ys. and

Zs.

the distances
Xb, Yb.

between the antennas and the satellites and the base station coordinates

and

Zb

must be known in order to determine the relative coordinates, X r, Yr, and Zr of the onboard remote antenna (EI-Rabbany, 2004)

29

The GPS signal stmcture has five components: Ll, L2, CIA-code, P-code and navigation message, Ll and L2 are two carrier frequencies that all GPS satellites transmit. The Course Acquisition - Code (CIA-code) is transmitted on the Ll frequency only and each satellite is assigned a unique code. The Precision - Code (P-code) is transmitted on both the Ll and L2 frequencies. This code is 266 days long and sent at a rate of 10.23 Mb/s. Each satellite is assigned a unique one-week segment of this code. The final component of the signal stmcture is the navigation message, which is transmitted on both the Ll and L2 frequencies. Within the message is orbital information called the ephemeris, clock data and almanac, which contains future orbit information, etc. GPS receivers are classified by their receiving capabilities. A Single Frequency receiver has access to the Ll frequency, while a Dual Frequency receiver has access to both Ll and L2. The Dual Frequency receivers are the most accurate receiver type and can produce geodetic quality measurements (EI-Rabbany, 2004). There are two ways to calculate the distance between a receiver and a satellite.
,
\,

~

< ,

, ,

The first method is called Pseudo-Range measurement. The satellites and receiver generate the same code, at the same time. The receiver measures the time offset
(~t)

between the code of the satellite and the code of the receiver and multiplies this by the speed of lights to find Pseudo-Range of the satellite to the receiver (EI-Rabbany, 2004). The second method is called Carrier Phase measurements. The initial phase measurement is ambiguous by an integer number of cycles. This ambiguity remains constant with time as long as the receiver remains locked on the signal. Resolving the ambiguities is the key for centimeter level accuracy and this can be done in real time or through post-processing (EI-Rabbany, 2004).

30

3.5.3 Inertial :Measurement Unit (lMU)
An Inertial Measurement Unit (IMU) is compromised of an assembly of accelerometers and gyros that measure incremental velocities and angular rates. Hutton et a1. (1997) explains that these are numerically integrated by a strapdown navigator to create geographically referenced positions, velocities and attitudes. This system is also known as Inertial Navigation System (INS). In order to produce accurate position and attitude, the accelerometers and gyros in the IMU must be of high quality with low noise and drift. Typically. 1MUs are comprised of force rebalance or integrated silicon accelerometers and either Fiber Optic Gyros (FOG), Ring Laser Gyros (RAG), or Dry Tuned Gyros (DTI). The IMU used in the system under investigation is small and lightweight, and is mounted securely on the rack. This ensures the best possible accuracy with minimized flexure between the IMU and the laser scanner. This is a very important · feature, as the highest possible accuracies are required in mobile mapping (D ill ane,
2003).

Due to the double integration of the IMU acceleration data, the time-dependent position errors will quickly exceed the accuracy specifications for many trajectory determination applications. In order to correct these errors within the multi-sensor
"

mapping system, a Kalman filter is used. The Kalman filter uses the complementary nature of these error characteristics to calibrate the inertial navigation errors and adding sensors with respect to each other (Hutton et al., 1997). More details regarding this process will be given in the following section.

l

~

31

3.5.4

Kinematic l\lodeling

Kinematic modeling explains a rigid body's trajectory usmg measurements relative to some reference coordinate frame. It, therefore, merges elements of modeling, estimation, and interpolation. Modeling relates the observable to the trajectory (ElSheimy, 1996). Estimation uses actual observation, i.e., it adds a process error to the model and solves the resulting estimation problem in some optimal sense. Interpolation connects the discrete points resulting from the estimation process and generates a trajectory by formulating some appropriate smoothness condition (Schwarz et al., 1993). A rigid body can be described as a body with finite dimensions, which maintains the property that relative positions of all its points, defined in a coordinate frame within the body, remain the same under rotation and translation (Goldstein, 1980). To explain the general motion of a rigid body in space, six parameters may be used. They are in general chosen as three position and three orientation parameters. The modeling of rigid
"\

body motion in 3-D space can be described by an equation of the form:
r:n

..
,

= rJ:' (t) + Rr;'Ct). aD

Eq.3.2

Where, is the coordinate of point 0) in the m-frame is the coordinate for the center of mass (b) the rigid body in the m-frame at time (t) is the rotation matrix between the b-frame and the m-frame at time (t) is the fixed distance between point (i) and the center of mass of the rigid body

32

The right-hand side of Equation 3.2 consists of translation vector r;j Ct) and rotational component (R:bCt).a b ). The vector aD can be any vector fixed on the rigid body with its origin at the center of mass of the rigid body. Its rotation is equivalent to the rotation about the center of mass of the rigid body (El-Sheimy, 1996). Figure 3.11 illustrates the following basic concept. The coordinate "b-frame" is fixed to the body and rotates in time with respect to the coordinate m-frame in which the translation vector

rr is expressed. The m-frame is, theoretically, arbitrary and, as a result

can be chosen to simplify the problem formulation. The m-frame can be a system of curvilinear geodetic coordinates (latitude, longitude. and height), a system of UTM or 3TM coordinates. or any other earth-fixed coordinate system (EI-Sheimy, 1996). The problem of finding the position and orientation of the rigid body in 3-D space is. technically, a problem of trajectory determination which requires measurment systems · with capabilities to sense six independent quantities from which these parameters can be derived. Among the six parameters, the INS and receivers linking into the GPS is the most significant (El-Sheimy, 1996). As it was mentioned earlier, an IMU consists of three gyroscopes and three accelerometers. The gyroscopes are used to sense angular velocity
(Oibb

that describes the

rotation of the b-frame with respect to the i-frame and is coordinated in the b-frame. where the b-frame is a fixed body coordinate frame and the i-frame is a properly defmed inertial reference frame and can be considered as being non-accelerating and nonrotating.

33

·········

at

..·.........·
..........
· 1ft

:r(t)

:b

. . . . . . . . . .·::;~l;"_. "'"_ _
It

r (t+ AI)

--...11.

Figure 3.11 Kinematic :Modeling and Different Frames (EI.Sheimy, 1996)

The accelerometers are used to sense specific force velocities
b ffiib ,

f

in the b-frame. The angular

are integrated in time to provide orientation changes of the body relative

to its initial orientation. The specific force measurement

f

is used to derive body

acceleration that, after double integration with respect to time, gives position differences relative to an initial position (EI-Sheimy, 1996). The specific force measurement the angular velocities
ffiib b

f

and

can be used to determine all parameters required for trajectory

determination by solving the system of differential equations shown in Equation 3.3.

Eq.3.3

Where:
D -1

is the scaling matrix, obtained through the integration process using the implied reference ellipsoid

jJm

is the gravity vector, normally approximated by the normal gravity field 34

W

is the earth rotation and is assumed to be known with sufficient accuracy (EI-

Sheimy, 1996)

As it was previously mentioned, GPS is another measuring system that can be used for trajectory determination. The system outputs in this case are ranges and ranges rates between the satellites and the receiver, derived from carrier phase data. The models that relate the position and velocity with the measurements are well known (El-Sheimy, 1996). In GPS stand-alone mode, a multi-antenna system can be used to provide both position and attitude. The practicability of attitude determination using multi-antenna systems has been shown for applications not requiring the highest accuracy (Cannon et
al., 1992).

The GPS trajectory equations can be written similar to the IMU model. which is a state vector form:

Eq.3.4

In this equation. the angular velocities in the body frame are obtained by differentiating between antennas, satellites, and epochs. It should be noted that the translation parameters of the trajectory are obtained by differentiating between the master station receiver and the rover receiver, while the rotational parameters are obtained by differentiating between the rover receivers only (EI-Sheimy, 1996). Thus, both IMU and GPS are, in principle, competent of deriving the position and attitude of the rigid body. In practice, due to the double integration of the INS acceleration data, the time-dependent position errors will rapidly exceed the accuracy 'specifications for many trajectory

35

detennination applications. Therefore, frequent updating is needed to obtain the required accuracies. On the other hand, GPS can deliver excellent position accuracy, but the problem of cycle slips comes along with it. Cycle slips are in essence gross errors leading to discontinuity in the trajectory. The combination of the two measuring systems, therefore, offers a number of advantages. In the absence of cycle slips, the excellent positioning accuracy of differential GPS can be used to provide frequent updates for the inertial system. The inertial orientation infonnation and the precise short-tenn position and velocity can be used for cycle slip detection and correction (EI-Sheimy 1996). To summarize, there are nine independent measurements available to detennine the six required trajectory parameters; and as a result they greatly enhance the reliability and consistency of the system. The procedure of integrating the two systems will be explained next.

3.5.5 IMU and GPS Data Integration
The integration procedure using a centralized filter is as follows (Sun, 1995): to begin with, the IMU prediction is perfonned at an interval given by the IMU data until the IMU time tag and GPS time match, then the GPS double difference carrier phase is computed. The double difference carrier phase is compared with the predicted values based on the IMU predicted position. If the difference is larger than a threshold, then a cycle slip has been detected and is, subsequently, corrected. After the correction of the double difference carrier phase data, the predicted values are used to update the IMU in a centralized Kalman filter. The position and attitude infonnation outputs from the update are based upon the final GPS/IMU integration result (Sun, 1995). This process is repeated

36

for the entire GPS and IMU data stream. The GPSIIMU integration scheme is shown in Figure 3.12.

GPS

data

Kalman Filter prcdic:tion equation

Computed double difference phase and pbase rate

,
Check for cycle slip Kabntllll Filter update equation

l;'igure 3.12 GPS/Il\1U Integration Scheme (Sun, 1995) It should be noted that, for a ground based LiDAR mobile mapper, navigation solution has to be even more robust because various obstacles on the ground such as trees, buildings, and bridges create periods when the GPS data is not available to aid the navigation solution. As a result advanced ground-based mobile LiDAR systems employ supporting sensors and advanced processing solutions to maintain the accuracy during the periods of GPS outages. In this case, a specially designed POS system for land-based operation. Applanix POS/LV 420, could be used to correct the orientation and position of the two LiDAR sensors generating a complete geo-referenced point cloud automatically (Applanix, 2009). This system utilizes an accurate IMU, dual GPS antenna, and a DMI (distance measurement instrument) to generate the navigation solution. An additional GPS antenna can be used to provide accurate vehicle velocity updates. This helps in the

!

I

I I

" ~

:

~

,

l

37

overall solution when the vehicle is moving but the GPS quality is poor. It is also effective when the vehicle is stopped as the DMI provides Zero Velocity Updates (ZUPT). The use of POS-MMS software tool with "tightly coupled processing" is one of the most important parts of processing the navigation solution. The tenn 'tightly coupled" means that POS-MMS simultaneously processes the raw GPS. IMU, DMI, and the secondary GPS data to generate the optimal navigation solution using all the sources available (Ussyshkin, 2009).

3.5.6

Control Rack and Laptop

The operational configuration of the Lynx system consists of a laptop and a control unit. The navigation solution is embedded on the laptop which is located inside the vehicle. This module controls the sensors, as well as the cameras if on-board. The operator is in control of turning on/off the laser, as well as changing the laser frequency and scanning angle, by using the operational module.

,

3.5.7 Power
The system is powered directly from the vehicle battery/alternator system. No auxiliary power unit is required.

3.6 Sources of Errors
The following sections provide a list and details of the sources of errors that are typically the root of the errors and problems that occur in the data collected by Mobile Mapping Systems. 38

3.6.1 GPS Errors
As it was mentioned previously, cycle slips are discontinuities in GPS carrier phase observations caused by temporary signal loss. This error is caused by obstructions, radio interference, severe ionosphere andlor high receiver dynamics. Other errors and biases of GPS relate to the atmosphere, the satellite, and the receiver (El-Rabbany, 2004). Table 3.2 outlines these errors, their causes and ways of correcting or preventing them.

39

Table 3.2 GPS Errors, Causes, and Corrections (Dillane, 2003)

Broadcast Ephemeris Errors

Result of improper prediction of satellite positions

Precise Ephemeris can be applied during post-processing

Satellite Clock Error

Clocks are highly accurate, but not perfect

Remove through differencing between two receivers applying satellite clock correction

Receiver Clock Error

Receiver clocks less accurate than the satellite clocks

Remove through differencing between two satellites

Multipath Error

When the satellite signal arrives at the antenna through different paths (causes problems in solving ambiguities) The point at which the signal is received is generally not the physical center of the antenna

Careful site and antenna selection

.
~.

, 'I ~ ,

"

~

.-

f'",

· -.of
~

Antenna Phase CentreVariations
.

Receiver Measurement Noise

Result of the limitations of receiver's electronics The region between 50 km and 1000 km above the Earth speeds up the carrier phase the same amount that it slows down the seduorange The region between 50 krn and the Earth's surface affects the height component more than the vertical

A good quality system should have minimum noise level

Ionosphere Delay

May be removed or reduced

Tropospheric Delay

40

3.6.2 Satellite Geometry
Satellite Geometry is another source of error in GPS. Bad satellite geometry enlarges the area of uncertainty for positioning. Such poor satellite geometry can be prevented by using the signal for satellites that are 10 degrees above the horizon (EIRabbany, 2004). The area of good geometry above the horizon is shown in Figure 3.13. Overall, the errors in GPS can be removed, prevented or modeled, except for cycle slips that must be dealt with by compensating for them with other GPS data or with other navigation sensor data such as IMU data.

AreaofOood

Elevation

Figure 3.13 Area of Good Elevation for Satellite Geometry (Sun, 1995)

3.6.3 Cycle Slips
The occurrence of a cycle slip is an important remaining problem in GPS carrier phase positioning. A cycle slip is a change of double difference carrier phase ambiguity by an unknown integer number from one epoch to the next due to blockage or the signal

41

path or signal noise (Sun, 1995). There are several ways to detect and correct for cycle slips. Since an IMU has a very good short-term stability it can be used to detect GPS carrier phase cycle slips for few seconds, depending on the performance of the IMU (Sun, 1995). When using the IMU to correct for cycle slips, the IMU is used to predict the position of the moving platform at the measurement epoch based on the last epoch. The double difference carrier phase can then be computed based on this prediction. A threshold of 0.4 cycles has to be given to determine the presence of a cycle slip.

3.6.4

Scanner Errors

One of the most common errors in laser scanning is the measurement of the scan mirror rotation angle. The primary factor that influences errors in the measurement of the scan mirror rotation angle is the method of measurement itself. A controlling device called a galvanometer sets the mirror's position. The galvanometer itself can measure the scan mirror rotation directly, but this method of measurment does not offer the highest accuracy. Such measurement systems have shown accuracies of approximately 0.02 degrees, while another method, the use of separate angle-encoding device, allows measurement accuracies of approximately 0.001 degrees (Morin, 2003). This can improve the laser point accuracy from decimeter to centimeter accuracy (Morin, 2003). A typical angle encoder consists of a glass disc with regular etch marks and a small laser which accurately measures the etch marks. The angle encoder should be mounted precisely perpendicular to the scan mirror's rotation angle to eliminate projection errors with the glass etch. If the encoder is not

,,

42

mounted precisely, then the projection error must be modeled or calibrated to ensure the highest accuracy from the angle encoder (Morin, 2003). Another scanner error that affects the accuracy of the angular encoder is a timing delay in the control unit itself. The error that is created by this time delay is not a physical error, like an angle encoder error, but a systematic error that is found in the derived control points. This timing delay error or encoder latency error occurs when the control unit does not respond quickly enough thus causing a delay between the time when the range measurement is recorded and when the scan angle is recorded. The delay causes the scan angle to be recorded or registered to an incorrect angle (Dillane, 2003). Even though the latency error is a systematic error, the effect of this error is visible within the derived scanned points. This type of error can be corrected by manually changing the magnitude of the latency value. When the pattern that shows the error ,disappears from the derived points, the latency value has been determined. Once determined, this value can be applied to all other data sets, because it is a constant function of the control unit. Moreover, there are some disadvantages associated with scanners that employ rotating mirrors as opposed to the ones that use oscillating ones. The systematic errors that one may encounter upon using such scanners are the additional errors due to misalignment of the surface of the mirror and wear out. Another source of error is due to the inhomogeneous scan pattern on surface at wide scan angles. Furthermore, regular calibration procedures are required in order to maintain the best possible outcome from the surveys. This concept is very suitable for terrestrial scanners.

i!

l

r

f "

I !

I

43

3.6.5

Position and Attitude Accuracy

Position accuracy depends mainly on the quality of the differential GPS (DGPS) post-processing. Through the integration of GPS with IMU, GPS errors are smoothed and achieve typical accuracies of 5-15cm (Baltsavias, 1999). The derived accuracies also depend on GPS satellite constellation during survey, the distance of the Base-station from the vehicle. and the accuracy of offsets and misalignment between the GPS and IMU, and the IMU and laser scanner. Attitude accuracy depends on the quality of the IMU data, the IMU interpolation error, the method of post-processing, and the integration of the IMU with the GPS. The effect of attitude error on the 3D accuracy increases with the range and the scan angle. Possible time misregistration errors between the different sensors can have a ruinous effect on the position and attitude accuracy (Baltsavias, 1999). Orientation, position, and range are required to be recorded at the same time. If there is a time offset between any or all of the sensors which is not known, it will cause systematic errors. A small time offset between range and rotation angles can cause large errors in the 3D accuracy for a turbulent drive. The accuracy of the transformation from WGS84 to the local coordinate system and corrections for geoid undulations are also other consideration (Baltsavias, 1999)

,1

3.6.6 Misalignment Error
A critical error in LiDAR scanner systems is the angular misalignment between the scanner and the IMU, which is called the misalignment or" "boresight" error. This error must be addressed before the system can accurately produce data. The magnitude 44

and orientation of the errors induced by this misalignment are a function of several parameters, such as the distance, scan angle, and the direction of the vehicle. The misalignment between the laser scanner and the IMUs causes each laser point observation to be registered with an incorrect vehicle attitude, resulting in an incorrect point position. Unlike an image, a misalignment error affects each observation and cannot be modeled by observing the induced errors in position of the control points. These errors are correlated with scanning direction. In order to correct these errors, they must be decorrelated; observing targets taken from different scanning directions accomplishes this (Dillane, 2003). The significance of the misalignment error and different methods to fix and calibrate for this issue are discussed in the next chapter.

. .
"

,

45

Chapter 4: The Misalignment Problem
4. l\[isalignment Error
The problem of angular misalignment between the measurement axes of a laser scanning device and the measurement axes of an inertial measurement unit (IMU) is one of the most significant issues in Mobile Mapping Systems which needs to be addressed carefully and thoroughly.

4.1 Roll, Pitch, and Heading
The components of the misalignments: Roll, Pitch and Heading next. 4.1.1 Influence of Roll :Misalignment

a, PI' Y are discussed

The roll misalignment deflects the horizontal flat surface and shifts the object
\

:

>~.

position along the driving direction. Such shifts occur when the system is misaligned and has is rotated along the y axis.
Lyn)( - Front View

, r~ ..,...J ,
/
I

-z
I~

"'-.7

-x
Sensor 1 "" I

~
·~t

u
-+Y

'<;>I'

1<"-

,;~

.

+x
/ Sensor 2 J

~

+z
Figure 4.1 Rolll\1isalignment - Rotation along] Axis

46

In order to correct the roll misalignment the following equation may be used

z[, - z R =

2D tan () . ~R ; ~R =

~tan9

(zl. - ZR)

Eq.4.1

Where, is the difference between left end points and right end points over flat horizontal surface.

D

is the average distance from the object, is the scanning angle of the system, is the rolling angle. The following table shows the simulated calculation to demonstrate how much the

e
tlR

rolling angle defects the horizontal surface.

Table 4.1 Rolling Effect on Horizontal Surface (Zhang, 2005)

o

0.5

1.5 6.05

2.0
~.06

l ,

o

2.02

"

I

47

4.1.2

Influence of Pitch :Misalignment

The pitching misalignment shifts the data mainly perpendicular to the driving direction. When the system is misaligned and rotated along x axis, such shifts occur.

Lynx - Front View

IMU

-z
/

Sensor 2

+z
Figure 4.2 Pitch Misalignment - Rotation along x Axis The occurrence of Pitch can be identified on features such as building edges, and light posts. When the system is driven in two different directions scanning such objects, pitch can be identified when these features appear elongated in one strip, and shortened in the other one. To calculate the Pitch misalignment, the following formula may be used:
L

·

" "'"1'·

· , :.: .
·
.~,.

= 2D tan (J · aP', IlP =

L ---

2D tan8

Eq.4.2

Where, L D
tlP

is the distance between the point clouds of the opposing strips is the average distance from the target is the Pitch misalignment is the scanning angle of the system

e

48

The following table shows how much the Pitching angle shift s the object position along the scanning direction.

Table 4.2 Pitching Effect on the Object Position (Zhang, 2005)

L(m)

o

1.02

..J-t)3

i).OS

X.06

4.1.3

Influence of Heading l\tisalignment

Heading misalignment occurs when the sensor is misaligned and has rotation along the z·axis. The effect of it can be identified when the position of an object is shifted horizontally as well as dis toted when viewed from the top. Features such as building walls appear in a shape of a fishhook, when viewing from top. When Heading misaligrnent is present in data, the following images show examples of the affect of the Heading misalignment.

,
I

I ,

49

mOPERTYOF i11IRSON UNIVERSITY UEFJU1i

Distorted

buJding

True position

of the building

Figure 4.3 Effect of Heading .Misalignment (Zhang, 2005)

Lynx - Top View

+Y
~

""t ,',

" ...

· .... ,
~

;;:.

,.

. ".- ...
:
r
"

~

-X

+Z
IMU

Sensor 1

Sensor 2

-y
Figure 4.4 Heading Misalignment - Rotation along z Axis

4.2 Boresight Calibration
As it was previously mentioned, Terrestrial Laser Scanning (TLS) is a very effective and accurate method for establishing detailed terrain models from moving 50

platfonns. To achieve such accurate data, there are factors affecting the laser points that must be evaluated and taken into consideration carefully. Apart from the target reflectivity properties and laser-beam incident angle, other main limiting factors are the accuracy of the platfonn position, orientation derived from the carrier-phase differential GPS/IMU data, and uncompensated effects in system calibration. Hence, locating the laser points requires knowing precisely some pieces of infonnation such as, the laser scanner's position from GPS, the attitude of the vehicle from IMU, the scanner angle when the laser pulse leaves the sensor, and the slant range to the object for that pulse (Smith,2002). A frequent problem with laser scanner data collection is that it shows systematic shifts in vertical and horizontal position when compared to other data sources; and systematic differences between overlapping strips from the same sensor (Morin, 2003). \ These types of systematic errors are largely due to problems regarding the calibration of the sensors. The most influential parameters are the alignment angles Roll, Pitch, and Heading, (a,p. Y) between the IMU and the laser scanning sensors (Morin, 2003). The concept of calibrating the alignment angle is to identify the small misalignment angles between the sensors and to adjust the data to compensate for the misalignment. Though several well-developed approaches to boresight estimation for camera· IMU installations exist, the correct recovery of the TLS-IMU (as well as the airborne laser scanners) misalignment still remains indefinable. The existing calibration procedures, while functional, are recognized as being sub-optimal since they are laborintensive (I.e., they require manual procedures), non-rigorous and provide no statistical quality assurance measures (Morin and EI-Sheimy, 2002). Furthennore, the existing

51

methods often cannot reliably recover all three of the angular mounting parameters. The undetermined parameters propagate into the subsequently captured data, therefore compromising its accuracy and that of any derived information.

4.2.1

Laboratory Test

It is practical to test the functionality of LiDAR scanners in the laboratory in order to

ensure that the system is performing as expected. To evaluate the characteristics of the Lynx sensor, the following is checked in the lab: Average output power Pulse-width Waveform Stability Pulse energy An important step in collecting accurate Laser Scanner data is ensuring proper
,

calibration before the field calibration and initialization of the integrated sensors. The laser range finder and the offsets between scanner and the navigational sensors must be calibrated. Also, the GPS and IMU need to be initialized. After the functionality of the system is tested in the lab, the field calibration needs to be performed. The following section presents different calibration methods that are practiced in the field.

l'~'

4.3 Methods of Boresight Calibration
There are different methods of calibration of the alignment between the IMU and the laser-scanning sensors. The most common method is a simple manual adjustment of the misalignment angles. Another method of calibrating the misalignment angles is called
52

semi-automatic boresight misalignment determination (Toth, 2002). Such a method can be less time consuming and requires no control points.

4.3.1 Semi-Automated Misalignment Calibration
The basis of this method is to estimate the unknown misalignment angles between the IMU and the laser-scanning sensors. This is done using horizontal and vertical discrepancies between the overlapping strips, possibly without the use of control points and without manually manipulating the data (Dillane. 2003). The effectiveness of this method depends heavily on the point density of the LiDAR points and the overall terrain characteristics of the overlapping area. Smoothly rolling train is ideal for test areas because it exhibits limited surface undulations while the horizontal and vertical discrepancies between overlapping strips can still be identified (Toth, 2002). A frequently used technique for matching the datu is to interpolate the laser points into a regular grid. The discrepancies then can be determined by surface matching of the selected regions within the overlap. or by profile matching of man-made objects. Once the surface differences are known. a least square adjustment can be performed for unknown misalignment angles (Toth, 2002).

4.3.2 Manual Misalignment Calibration
Manual misalignment calibrations are generally a simple trial and error approach. where the processor interactively changes the misalignment angle to reach some best-fit profile with respect to some known surface. There are two types of manual calibration techniques, relative and absolute. Relative calibratio~ is performed without control points and looks for self-consistency within the data. This technique mat<.:hes data with data

I

~

53

from adjacent swaths, as well as data from opposing strips. Absolute calibration is performed using control points and compares the absolute location of laser points, or features identified by laser points to accurate reference data (Smith, 2002). In order to match and compare laser reference points for accuracy evaluations of horizontal positions, building edges are used. For accurate vertical positions, control points on a flat surface, such as a parking lot, are used to compare the vertical differences of all the laser points in the area (Smith, 2002). The methodology used by Optech to calibrate for roll, pitch and heading, for post installation of the Lynx system, is to drive around the Optech's building and scan the building and its surroundings in opposite directions. The roll displacement can be identified using the flat surface (the ground). Figure 4.5 shows the effect of roll misalignment from data captured by the Lynx Mobile Mapper.

:/,~

·

'

Figure 4.5 Influence of Roll Misalignment
To find any discrepancies caused by pitch misalignment, edge of buildings, or light posts are the best features to use. Figure 4.6, shows an indication of pitch misalignment in data collected from Lynx. The top of the light post is obviously dislocated when comparing the two opposing strips.

54

from adjacent swaths, as well as data from opposing strips. Absolute calibration is performed using control points and compares the absolute location of laser points, or features identified by laser points to accurate reference data (Smith, 2002). In order to match and compare laser reference points for accuracy evaluations of horizontal positions, building edges are used. For accurate vertical positions, control points on a flat surface, such as a parking lot, are used to compare the vertical differences of all the laser points in the area (Smith, 2002). The methodology used by Optech to calibrate for roll, pitch and heading, for post installation of the Lynx system, is to drive around the Optech's building and scan the building and its surroundings in opposite directions. The roll displacement can be identified using the flat surface (the ground). Figure 4.5 shows the effect of roll misalignment from data captured by the Lynx Mobile Mapper.

Figure 4.5 Influence of Roll Misalignment
To find any discrepancies caused by pitch misalignment, edge of buildings, or light posts are the best features to use. Figure 4.6, shows an indication of pitch misalignment in data collected from Lynx. The top of the light post is obviously dislocated when comparing the two opposing strips.

54

Figure 4.6 Influence of Pitch l\'1isalignment

The heading misalignment is identified easiest when the surveyed area is viewed from top. When such error exists in data, feature such as walls or light posts are helpful in order to identify heading misalignments, as the object appears to be doubled in shape. In Figure 4.7. the data collected by the Lynx Mobile Mapper shows the occurrence of such misalignment as the light post seems to be doubled.

Figure 4.7 Influence of Heading Misalignment

55

Figure 4.6 Influence of Pitch Misalignment
The heading misalignment is identified easiest when the surveyed area is viewed from top. When such error exists in data, feature such as walls or light posts are helpful in order to identify heading misaligrunents. as the object appears to be doubled in shape. In Figure 4.7. the data collected by the Lynx Mobile Mapper shows the occurrence of such misalignment as the light post seems to be doubled.

Figure 4.7 Influence of Heading Misalignment

55

The major problem of Relative Manual Calibration technique is the lack of having control points which are essential in order to obtain system's accuracy. Also, the human interference during the process could lead into random errors which may not be easy to identify. The next chapter presents a methodology proposed to be utilized while calibrating a Mobile Mapping System, which avoids the problems mentioned above.

56

Chapter 5: Methodology
5. Methodology
This chapter provides information regarding the methodology for boresight calibration of a Mobile Mapping system.

5.1 Technique Definition
In Terrestrial Mobile Mapping. the vehicle is continuously moving. or the position of the vehicle is changing with respect to time. To simplify the problem, for this study the dataset was simulated assuming the vehicle is stationary while scanning. A key aspect that must be carefully considered is the coordinate system of each component as every sensor and device has its own coordinate system or frame. For example. GPS , outputs are based on WGS84 coordinate system and the laser data is based on its own local coordinate system (Manandhar and Shibasaki. 2001). The major problem is to identify the spatial position of the objects scanned by the laser with a reference to a common coordinate system; which is called Geo-referencing. It involves the integration of the sensor, IMU, and the laser points to a common coordinate system, which is the local mapping coordinate system (Manandhar and Shibasaki, 20ot). The integration process mainly involves the computation of a fixed rotation between the IMU body and the sensor. This can be defined as:

RotattonMatrtx = RiY)Ry(f3)Rx(a)

Eq.S.1

where,

57

R/Y)

is the rotation about the z-axis - Heading is the rotation about the y-axis - Pitch is the rotation about the x-axis - Roll

Also, the shift between the IMU and sensor is an important factor which must be considered, but in this study, it has not been considered as the dataset is simulated and the shift vectors may be neglected in this case. Hence, here the main concern is obtaining the rotation of different coordinate frames with respect to each other, as the problem of shifting is less mathematically involved and challenging. The general mathematical model for direct geo-referencing, when it is considered that there is no physical offset between the IMU and the sensor is given in Equation 5.2:

Eq.5.2
where,
Xt;=

X) (Y Z

t:argtlc

is the cOQrdinate of the target points in the target coordinate system

XII

X) = (Y

Z seem"...,.

is the coordinate of the scanner in the target coordinate system

is a variable, 3x3 Rotation Matrix at time (t) from IMU coordinate system to Mapping frame when the vehicle is moving. In this study, for the sake of simplicity, the rotation matrix is fixed due to the fact that the vehicle is stationary.

58

A tlxed, 3x3 Rotation Matrix called boresight, which is the rotation of the scanner body with respect to the IMU.

Rs is a variable, 3x3 Rotation Matrix of the scanner with respect to the target coordinate system. p.IS the d' Istance (range), between the scarmer head to the target plane,

In adjustment computations it is frequently necessary to deal with nonlinear equations. For example, some observation equations relate observed quantities to unknown parameters through the transcendental functions of sine, cosine or tangent (Xiang et ai. 2009); which is the same case for the above mathematical model. Solving for the boresight angles, the solution may be facilitated by using a first-order Taylor series approximation to create a set of linearized equations, which may be solved by , matrix methods. The initialization process of IMU aligns the horizontal plane and fmds the north direction and the output is calibrated to give the rotation with respect to the mapping coordinate system. Thus the rotation output from the vehicle is the rotation from the IMU body to the mapping coordinate system. The objective of this research is to compute the boresight matrix, or in other words the misalignment angles between the IMU and the sensor. During the system calibration, it is important to define a local coordinate system for the purpose of measuring the calibration target points' position. While defining the local coordinate system, the orientation of the x, y, and the z-axis also needs to be set so that the rotation between the two coordinate systems is a 3x3 matrix that accounts for rotations about all

59

axes. Thus, by computing the misalignment angles between the sensor and the IMU, the results would provide the correction (boresight angles: Roll, Pitch, and Heading) that is needed to be applied to the captured dataset. Furthermore, this study also provides the required number of target points which would provide acceptable results for calibration purposes, as well as their position on a target plane.

5.2 Data Simulation and Analysis
Due to lack of accessibility to control points, a simulated dataset was generated to test and analyze the feasibility of the boresight mathematical model. The target points are generated on a 10 x 10m plane that consists of 121 points that are equally spaced in each direction with a distance of 1m apart.

· · ... t .. ...
I

t-.-....-.....

.

· ...
1

+-.-...... -.++ ·

...-........-.-. · ····~ .. . · · · . . ·t ... · ...... · · ... · ··

~

~

, .

.~+-+-+-+-

t+;: . . · . .

... · · · · ... . ... ... · t .. .. , t · .. .. ... ... .. · · · t · ...
+ +-+-+--..-+
I

· .-+-.-.-.
I

····t

· ··

Figure 5.1 Different Coordinate Systems and their Respective Frames

As described before, the IMU and scanner, in this case, are considered to have no physical distance from each other; i.e. the origin of their coordinate frames is the same.

60

Still, the position of the scanner is required. As previously mentioned in Equation 5.2; the position of the scanner is assumed to be at [15 15 O]T in the mapping frame. As seen in Figure 5.1, the rotation matrix from the mapping coordinate system to the IMU coordinate system, when the IMU is considered to have no rotations at all, is RG[ .In reality, though, the IMU has some type of rotation about one or all axes. In this study, a rotation of 10° about the Y-axis, pitch, of the IMU coordinate frame is presumed. The rotation matrix of this coordinate frame, with respect to the non-rotational IMU coordinate frame is R[I. Then, RI, which is the rotation matrix of the IMU with respect to the mapping frame, is the product of RG1 and RII:

R' RI_RI G' I

Eq.5.3

Since the data is simulated, in order to check for the practicality of the mathematical I?odel, it was assumed that the boresight angles were known in the beginning. The assumption was that the orientation of the scanner with respect to the IMU consists of rotations of 3° about all 3 axes, Also, the RI matrix was formed assuming that the vehicle has a rotation of 10' about the y-axis. Moreover, the equation was rearranged, solving for rotation matrix of the scanner. However, for the sake of simplicity of the problem. instead of solving for rotation angles of the scanner, the product matrix (also called the Projection Matrix) of Rs [0 0 _p]T was used:

RS( ~ ) = (~;):
-p

nz

t

Eq.5.4

61

Furthermore. rearranging the equation it becomes:

Eq.5.5
After obtaining the product matrix of Rs [0 0 -p] T · the simulated and calculated numbers were substituted back in the equation solving for the boresight angles, Rb.

R' = (R 1) -'(X, - X,)

(!;)
./lz

Eq.5.6

Using the above mathematical model, misalignment angles between the IMU and the scanner may be obtained. When the boresight angle about every axis is calculated, the corrections then can be easily applied to the dataset to compensate for the angular error.

5.3 Results and Discussions
To proceed with the calculations and evaluate the results, a MATLAB program was designed and employed. As it was mentioned earlier, firstly the values for the projection matrix [Llx, Ily, Ilzf for each target point were computed. A few examples of the values of the projection matrix are given in Table 5.1:

,.

t

Table 5.1 Projection Matrix Results for Target Samples

12 45

-1.907 1.012

-10.372 -9.6902

-5.4572 -5.575

62

After the values for the projection matrix of each target were obtained, the values were substituted into Equation 5.6 in order to test for the reliability of the mathematical model. When the values of the projection matrix were being calculated the values of ~ used were preset as [3°, 3·, 3 ]T; assuming that this time around the unknown matrix was the boresight matrix (R
b );
o

it was expected to achieve the prearranged Roll, Pitch, and

Heading values. To do so, Taylor approximation method was utilized in MATLAB to achieve a linear approximation of the system of equations used; in order to avoid an overdetermined solution. The process was started by rearranging the equation such as:

EqS.7
To simplify the problem the following notations were used in the MATLAB program:

EqS.8
and
RD ~y Llz

ax) = [{ca,PIY)] a,p,y) = F ( g( p( a, p, r)

EqS.9

Solving for the unknown function F, initial approximations of the 3 angles aQ,POt Ya need to be made; which would provide the function Fo. Next, the partial derivatives of every component of the matrix F with respect to the variables a, p, y need to be taken to achieve the Jacobian matrix. This will provide the following equation:

63

I.

[~l = [ K -

F.l
Eq.S.10

Solving for the correction matrix [da,d,B,dr]T, these values provide the corrections that need to be applied to the approximated a(},,/1(}. Ya:

Eq.S.11
The procedure needs to be repeated until the correction matrix converges (Le., it is so small that it is considered to be insignificant).

As it may be seen in Table 5.2, the results of the test were successful, as after a few iterations every It parameter converged to the initial 3 degree values used ..

Table 5.2 Boresight Angle Results for Target Points without Noise

1-121

,

During the calculations, it was discovered that it is very important to run the test on more than one point at the same time; reason being that solving for only one point could result into variety of combination of angles all of which would satisfy the equation. Also, it was noted that the further apart the target points are, the sooner the iterations converge to the correct answer; for example, running the tests on 2 points that are 10 meters apart converged to 3 after 3 iterations, while it took more than 5 iterations to achieve the correct answer when the target points are 1 meter apart. This phenomenon 64
0

proves that it would be more efficient to have the target points further apart from each other, as target points close to each other may lead into less efficient computations. Furthermore, in order to evaluate how much the accuracy of the measurements of the rotation matrix of the Scanner influence the calibration parameters; maximum of lOcm of noise was added to the projection matrix, [&, L1y, L1Z]T. Subsequently, for the noise to be realistically added to the data, normally distributed random variables (noise) were applied to the projection matrix. To detect the effect of noise on the dataset, as well as the positioning and number of points used during the calculations, different cases were set up and tested. A few of the tested cases are described and the graphs of each are illustrated in this section. For the first case, only the first 2 points were used to solve for the boresight angles. After 7 iterations, the boresight values, as well as the covariance of each for quality control were derived as shown in Table 5.3:

Table 5.3 Boresight Angle Results for Points 1 and 2 with Noise

,______

a_a~.~~

44.64" __________________________________________________

~

Figure 5.2 illustrates that the error becomes more apparent when getting further from the points used as target points (Points 1 and 2). The results of using two target points that are only 1m apart, as well as having lOcm noise added to the projection matrix, results in up to 80cm of error in the position of the data. The considerable amount of error is also apparent by looking at the covariance values.

65

· Tarpt Points

J. Ona O_ .. ,.d USIMC Pts 1 ",,62

21 -,-.

1
:9

~

~

..
\

..
to

-t..-....-..-.. . . -..........-.. .

..

..'"
i.
4

..
;\

..

,\

....
..

.
~

r..

..

.. ... . ·
t

.
)

~

~

·
~
~

\

·
...
II

...

...

11

I
I
\
!
I

it
't

~

,.
to

·
~
~

. ..
t.

·

to

. ....
.\

.. ·

to

.

. .. .
t.

~

· .."
to
.

..
.:.

..
.L

15

!
i i
i I i
I

't

"
't
~

,.
·· ..

·

~

·
~

..
10.

....
..
A

.."

· ..
10.

i-

13 .[---.--.-- ... - - - - - - . - - - - . - - - . - - .·.- - - -...- - - .·--.----.

.,'"

11

I !
!

.
j.

'l:
5
9

.
2
11

· ..
.to.

·

. ..

·

.

..
...

·

·

.4

·
is

.l

" .. · ..... '" --------...._._--_ -.-._--- ..--_ _._"" _._ _-_. -.-... . .. '" " .. .. .. · .. · .. ... . · . .· · .. ... .. ... .. .. .. . ..

..

· .

. . ."
A

,\

.
AA

, .

·
A-

..
'"
\

· .

·

....

...

.....

...

...

A

~

13

17

15

11

Figure 5.2 Target Points (1 and 2) vs. Data Derived

"

< ...

t

Next, three points from the target plane were used; again the lOcm normally distributed noise was added to the projection matrix. The boresight angles and the covariance values obtained after six iterations were as follows: Table 5.4 Boresight Angle Results for Points 36-38 with Noise
-1.110 11.64'

-., -,
,

Points: 36-38

3.34

0

1.52'

1.3'

To visually observe the effect of this set up, the exact target points were plotted versus the data derived using the boresight angles obtained from Points 36 to 38-Figure

5.3.

66

data becomes. The error in position of the targets was measured to be up to 50cm. The next test was performed; using four control points each from a comer of the target plane, and the same lOcm randomly distributed noise was applied. The boresight angles and their covariance values were retrieved after four iterations as shown below

Table 5.5 Boresight Angle Results for Data Derived from 1,11,111,121 with Noise

Points: 1, 11, 111,121
L -_ _ _ _ _

G~a~ft~________________--------------------------------------~

29.37"

56.48"

25.33"

67

The following plot shows the control points versus the data derived using 4 comer points:

21 "{ ...._.m __.. ____.__

> _ ·· _ _ _ .... ~_N~~'''''~_·_

.. ,_,,_~· ......"._ ·· ,_...... _--". , ,-.,--''''' ...-

.. ~

i
1lJ

111

1:1

I +-1--...,,_--· ..
I I
I
~

~f--·-.i..lt-- .. i I - -..... ~-- ..... ) - -..,..IIf-- ....- - . : .

11

·

·

~

~"

.j

~

..

·

.....- -

15

t--_·..:.·_-_···.--_···.--_···. . . . . -···..·_·_-··..--·······.··--.. .
I
~

I

)

~

·

~

~

~

~

~
It

·
)

~

~
..

~-----it----- ...- - - .------

..

131~

u~:
I

::::::::::
·
11
11

;. . . · .;. ...

~

~

.~)

.

~

·

·

it

1
lS
17

9~-------~--------~---·---r----------~-------,---·------~

,
~
'

Figure 5.4 Corner Target Points vs. Data Derived
As it may be seen from both Table 5.5 and Figure 5.4 the results of this set up considerably improved. Even though. up to lOcm of noise has been added to data. the difference between the control points and the derived data was computed to be less than 5cm. Additionally, the covariance values obtained for this set up were noticeably lesser values compared to other cases; values obtained were found to be in arc-seconds. Comparing the results from this set up to the previous ones, it appears that employing 4 comer control points provide the best fit solution.

68

Table 5.6 illustrates the results of more cases tested. The conditions of each case were similar to the previous ones: prearranged boresight values [3 3 3 and maximum
0 0 0 , , ]

of lOcm of noise was added to the projection matrix, [L~X, ~y, ~Z]T. The control points used for each set up is given in the chart. Table 5.6 Results of all Cases Tested

I

r

60,61,62 49,51,71 73 56,66 1 56,61,66 i i. 13,21, 101, 109 I 11,61,111 1,116, 11 1-1 48,52,94

l 12.91'

!
3.06° 2.76° 3.00° 2.99° 2.93° 3.09° 2.96°

2.79° 3.59°

!

!
i

47.05" , 43.27" !

3.83° 1.55° 2.03° 3.04° 3.23° 3.68° -0.37°

5.89' 2.31' 2.48' 1.56' , 1.72' 1.5" 3.79'

Figure 5.5 provides the positioning and geometry of control points on the target plane.

Target points
21

;
19

111

100
89

17

78

67

15

96

13

11

· · · · · · · · · · · · · · · · · · · · · 70 · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · · ·
112 101

·

113

102
91

· ·
eo
69

114

·

116

·

116-

117

103 92 81

104

106
94

106
96

90

93

18

82

83

84

68

11

72
61

13
62
51

57

68

59

eo

46

48

41

48

49

50

3-4

J5

36

~1

.

J5

39

· · · · · · · · · · · ·· ·· ·· ·· · · · · · · · ·· ·· ·· · · · · · ·
118 119

120

121

107
96

108
97

lot
96

110
99

96

86

97

88

74

76

7t

71

63

64

96
64

96

52

53

56

40

41

42

43

44

23

24

26

28

21

28

· 29

12

13

1.

16

16
5

17
IS

2

3

4

· · · · ·
18
19

· JO

· 31

· :r.l

·
·

33

20
g

· 21
· 10
19

22

·

·
1

8

· 11
21

'iI

I

9

11

13

15

11

Figure 5.5 Geometry of the Control Points 69

All the previous tests were performed when the rotation matrix R, only had a rotation about the y-axis; hence, adding the noise mostly affected the Pitch value. To check whether the noise would become more apparent when the IMU has a rotation along another axis, a rotation of 10" was applied about the x-axis of the R,. Similar to the previous cases, 10cm of randomly distributed noise was added to the dataset. The results of the test are as follows: Table 5.7 Boresight Angles Results Derived when RI has Rotation about x-Axis

17.28'

4.39'

70

· T'4r,ift P~lnts

.. Catl<!.",c.lh'''~IPts

3'- 38

21

....
19

.. ...
·
"

...
....

-r---.~'t-I>--~----. ,

"
"l

to
,

)

..
~

,...
...
tr.

."
·
""

\.."

.. ..
...

a

.1.

..
I.
I.

,.
i I

io

#

'"

·
..

l.

..

,.
'

17+--'

.. ..
15

..

· ...

J. t - - - + - - - + - - -" J . --"- - -_

_·
Jr.

..

·
\

..
· ...

....
· ..

-t

,.
oj
~

~

. ..
,t.

.,"

·
I.

,
.37

;
~

·

Jr.

..
t.
13

..
l.

....
36

.

·

· " ..

.
AI.

" · '"

. .
" "
A.

· ..

..

.\

....

,. "
AI.

" .. ...
11

..
A.

..
~

,

31
)

i

..'"
·
10.

.. ..
J.

....

Jo.

,

. ....
·l!.

..

· '"
.:\

·
....

·

.. ..
..
Z1

t
13

'" ,.
17

·

.. ..
:3

,

11

15

Figure 5.6 Target Points (36·38) vs. Data Derived (2) As it may be seen in Figure 5.6, the results show that the noise in this case greatly affects the data in roll direction. The noisy data on the left side is below the control points, where on the right side it is above. Since all the points in the previous set ups were chosen horizontally, the next set of points was taken in a vertical direction. Running the program on Points, 13, 24, 35, 46, and 57, with the same amount of noise,. the following results were attained.

71

Table 5.8 Boresight Angle Results from Vertical Target Points \Vith Noise

Points 13, 24, 35,

3.11"

3.76"

3.14"
~

46,57
L -_ _ _ _ a~~~p.~l~

38.12" 2.47' 29.22" ______________________________________________________

The points were plotted and the data appear to shift vertically as they get further from the control points used. The shift in data goes as high as 9cm.
· ".,-pt Pofl"ltJ
)l

.. O·· d.rl~ from Pt. U,24.3S,46,S7

...
l~

III

·
I

t

t

t

t

t

17

.
1S

.. .., .
li1
~5

t

..
!":t

t

t

......

'

~,..

13

:.;,"'. { -:

. c'"

!~; .. ~
!1

u

..
"

t

t

,

, ! ';','

.
11

13

·
13
15

*

t
11

t
19

I
21

Figure 5.7 Vertical Target Points vs. Data Derived Moreover. a diagonal set of control points were used to check for the reliability of such geometry. The lOcm randomly distributed noise was added to the data, and the following results were achieved.

72

Table 5.9 Boresight Angle Results from Diagonal Control Points
" - .~.' t't:;1"

~"""l'

,.

Points: 1, 13,25,

2.25°

2.72°

37,49
58.34" 2.42' 28.49"

I

When the data was plotted versus the target points, the lower part of the diagonal becomes more shifted (up to 15cm).

.

·

131-.-..-.------.......--'~'_6______--4_- .--,~,~,--",---,---",.-!
37

!1

Z1

Figure 5.8 Diagonal Target Points vs. Data Derived

Furthermore. different parameters for Roll. Pitch, and Heading were prearranged to evaluate how robust the mathematical model and the MAT LAB program are. Two different cases were set up. For the first test, the Pitc~ and Heading were set to negative

73

numbers: Rb = [6°, -S", _3 ]T. As for the next experiment, Rb parameters were preset as
0

[10°,20°, 45 ]T to ensure that the model still converges with greater values. In both cases, the program successfully converged after three iterations.

o

:.~

h,

~ t.'
t~~

C' "

: :1.,.,
! ":: .· '

"

:.

,':\ r :,'.: ;
't', .

'. . "i.

74

Chapter 6: Final Review
6. Summary, Conclusions, Future Studies
6.1 Summary
During the last few years, the use of Land Mobile Mapping for the collection of high quality 3 dimensional urban data has increased tremendously. While urban models are already available for a large number of cities from aerial data like stereo images or airborne LiDAR, Terrestrial Laser Scanners are especially useful for accurate threedimensional mapping of other man-made structures like road details, urban furniture or vegetation. The integration of GPSIIMU puts the geo-referencing of LiDAR data on a new level and frees it from operational restrictions. Together with digital data recording and data processing, it initiates the era of Mobile Mapping Systems. The strength of Mobile Mapping Systems is their ability to directly geo-reference their mapping
s~nsors.

A mapping sensor is geo-referenced when its position and

orientation relative to a mapping coordinate frame is known. Once geo-referenced, the mapping sensor can be used to determine the positions of points external to the platform in the same mapping coordinate frame. This is a key aspect that must be carefully considered -each component as well as every sensor and device has its own coordinate system or frame. The major problem of geo-referencing is to identify the spatial position of the objects scanned by the laser with reference to a common coordinate system. This process involves the integration of sensors, IMU, and the laser points to a common coordinate system, which is the local mapping coordi~ate system. The integration process mainly involves the computation of fixed rotations between the IMU body and the sensor. 75

The objective of this research was to compute the boresight matrix, or in other words the misalignment angles between the IMU and the sensor, as well as identifying the importance of utilizing rotation matrices of the IMU and the scanners. During the system calibration, it is important to define a local coordinate system to measure the calibration target points' position. While defining the local coordinate system, the orientation of the x, y, and the z-axes also needs to be set so that the rotation between the two coordinate systems is a 3x3 matrix that accounts for rotations about all axes. Thus, by computing the misalignment angles between the sensor and the IMU, the results would provide the correction (boresight angles: Roll, Pitch, and Heading) that is needed to be applied to the captured dataset. Furthermore, this study also provided a measure of the acceptable number of control points required for calibration purposes, as well as the position of these control points on the target plane.

~~

.,. ,,..
~-~~

~ J::

t:-"\

:~;.,
f

:~:

"

'f.', ·
"

,

76

6.2 Conclusions

Based on the results of this study, it may be stated that the boresight mathematical model applied, is a successful and adequate method for calibration purposes of a Mobile Mapping System. It was illustrated that geo-referencing each bodyframe (Scanner, IMU, Laser points), is one of the most crucial steps of this process - any miscalculation or blunders regarding this process could lead to significantly inaccurate results. Tests and different set-ups during the calculations have also proven the number of the target points employed, as well as their position and geometry have a considerable effect on the results of the computation of misalignment angles. In this study, the covariance values of the three boresight angles were analyzed, in , addition to values of the boresight angles themselves. In general, covariance provides a measure of reliability of several random variables by indicating how much these variables change with respect to each other. For instance, if the covariance of two random variables is zero it means that the two are completely independent and there can be a unique solution to satisfy the variables. In a case where the covariance is not zero, the random variables are dependent and only a best fit solution can be provided. As may be intuitively expected from the setup provided for this study, the variables (Le. angles a,

p,

and y) are not independent of each other; therefore, a combined solution for these angles is to be found. As a measure of quality of the solution, it can be said that when the covariances of the variables are small (or closer to 'zero), they are "less dependent" on

77

each other and, consequently, the solution found is a best possible solution (amongst other solutions) and the solution can be derived faster. In this study, after observing the covariance values for cr,

p,

and y, it was concluded that choosing four control points

which were furthest apart, increased the accuracy, and provided more stable outcomes. Moreover, the boresight angles of this case (i.e. using the four comer points) converged closest to the original values as well, indicating that this represents a good geometry for a small sample of points in this study. Another important factor that must be considered during data capture is the geometry of the scanner as well as its distance with respect to the target plane. Choosing the right geometry of different components and parts mounted on the vehicle is very crucial in performing a simulation. More specifically, due to the nature of this study, as some reference frames can be chosen arbitrarily, one should pay attention to choose frames that are appropriate. In addition, frames could be chosen to further simplify the problem. Some examples of problems with choosing the wrong geometry could be

,
·,

~

~. J ·

choosing a setup in which the scanner head is actually looking away from the wall. Furthermore, choosing the correct distance of the scanner from the wall is another problem that has to be considered. If the scanner is too far away from the target plane, the horizontal distance between the scanner and the target plane is much larger than that of between two target points. In this case, the distance between the targets become negligible; which can cause problems in performing the calculations. On the other hand, if the distance between the scanner and the target plane is smaller than that of between

.

L
.~

78

two target points, then the horizontal distance between the scanner and the target plane becomes negligible causing difficulties during the calculations. Hence, it is of utmost importance to choose the correct, balanced geometry between all the different planes, as well as the distance between the system and the target plane; that are both realistic and practical. Each component of the rotation matrices needs to be carefully computed before the calibration process takes place. This fact was proven when a small amount of noise was added to the Projection Matrix (Le. product matrix of the scanner's rotation matrix multiplied by the range vector), and it caused a considerable amount of error to the dataset. Such phenomena will even be more evident as more data is collected and as the distance elongates; the affect of the noise will become more and more obvious when features become more noticeably distorted or shifted. Hence, an ideal model must first be created and all calculations performed according to the ideal model, in order to test whether the model is correct. In addition, this permits the full understanding of what each component of the model equation does. Furthermore, as with the setup itself, the noise had to be modeled to be both realistic and practicaL Hence using a bounded normally distributed random variables was deemed as the most effective was of simulation of noise.

79

6.3 Future Studies

Due to the lack of access to control points, the data used in this study was simulated. The feasibility of the mathematical model applied may be further investigated, if real data is to be used. One of the advantages of using real data would be adding the factor that the vehicle is moving during the data collection. In which case, the mathematical model needs to be modified in order to consider the change in position of the system with respect to time t. Due to difficulty of simulating such cases, it is recommended to investigate and further test the proposed mathematical model, with real data. Furthermore, investigating and evaluating different methods of data collection in terms of finding an acceptable orientation of the vehicle relative to the data field could be advantageous and may be helpful in terms of enhancing the system's accuracy. The incorporation of cameras would open a number of new ways of calibrating Mobile Mapping Systems, as well as new applications for their use. Utilizing

..

~

.

well calibrated cameras and integrating them with LiDAR data would be another source of control points. The mathematical model in this study may be further modified and enhanced to meet the criteria that are required for integrating camera data.

80

References
Applanix Corp (2009). (Internet) [Updated December 2009) Richmond Hill, Ontario. www.applanix.com Baltsavias, E. P., (1999) Airborne Laser Scanning: Basic Relations and Formulas. ISPRS Journal of Photogrammetry & Remote Sensing. Vol. 54, pp. 199-214 Cannon, M. E., Schleppe, J., Mclellan, J.F., and Olleveir, T.E. (1992) Real·Time Heading Determination Using an Integrated GPS-Dead Reckoning System. Proceedings of the Institute of Navigation, ION GPS·92, Albuquerque, New Mexico September 16·18 Dillane, W. (2003) Post-Mission Misalignment Angle Calibration for Airborne Laser Scanners. M.Sc Thesis. Ryerson University. Toronto, Ontario EI-Rabbany, A.(2004) CVL 650 Physical and Satellite Geodesy Course Notes. Ryerson University, Department of Civil Engineering. Toronto, Ontario EI-Sheimy, N. (1996) The Development of VIS TAT -A Mobile Survey Systemfor GIS Applications. Ph. D. Thesis, UCGE Reports. No. 20101. Calgary, Alberta EI-Sheimy, N. (1999) Mobile Multi-Sensor Systems. International Association of Geodesy. Commission 4. Calgary, Alberta Goldstein, H. (1980) Classical Mechanics. Addison -Wesley, Massachusetts, USA, 1980 Grejner-Brzezinska, D., Toth, C. and Paska, E., (2004) Airborne Remote Sensing Supporting Traffic Flow Estimates, Proc. of 3rd International Symposium on Mobile Mapping Technology. Kunming, China, March 29-31, 2004, CD-ROM. Hutton, J., Savina, T., and Lithopoulos, E. (1997) Photogrammetric Applications of Applanix's Position and Orientation System (PaS) Applanix Corportation, Markham, Ontario Lapucha, D., Schwarz, K.P., Cannon, M.E., and Martell, H. (1990) "The Use of INSIGPS in a Kinematic Survey System", Proc. IEEE PLANS 1990, Las Vegas, pp 413-420, March 20·23 Manandhar, D. and Shibasaki, R. (2001) Geo-referencing of Multi-sensor Range Datafor Vehicle-borne Laser Mapping Systems (VLMS) University of Tokyo. Morin, K. and EI-Sheimy, N. (2002) A Comparison of Airborne Laser Scanning Data Adjustment Methods. Department of Geomatics Engine.ering, The University of Calgary, Canada 81

Morin, K. (2003) Calibration of Airborne Laser Scanners. M. Sc. Thesis. UCGE Report No. 20179. Optech Inc. (2009) (Internet) [Updated December 2009]. Vaughan, Ontario. www.optech.ca Optech Inc. (2008) HLynx Mobile Mapper Survey Operation Manual", Vaughan, Ontario. Schwarz. K. P., Chapman, M. A, Cannon, M. W., and Gong, P. (1993) An Integrated INSIGPS Approach to the Georeferencing of Remotely Sensed Data. PE&RS Vol. 59, No. 11, Nov 1993, pp. 1667-1674 Smith, R. (2002) Calibration Procedures for the Optech ALTM. Presented to the Digital Camera and LIDAR Product Characterization Workshop. Stennis Space Flight Center. Sun, H. (1995) GPSIINS Integration for Airborne Applications. Ph.D Thesis, UCGE Reports. No 20069. Calgary, Alberta Toth, C. K. (2002) Calibrating Airborne Lidar systems. Proceeding of ISPRS Commission II symposium, Integrated Systems for Spatial Data Production, Custodian and Decision Support. Vol. 35, Part 2, pp. 475-480. Ussyshkin, V. ( 2009) Mobile Laser Scanning Technology for Surveying Application: From Data Collection to End-Products. Optech Inc., Vaughan, Ontario. Wehr, A. and Lohr, U. (1999) Airborne Laser Scanning - An Introduction and Overview. ISPRS Journal of Photogrammetry & Remote Sensing. Vol. 54, pp. 68-82.

....

, 'f'. ~ ,
I:~"

"

·

'

:;';: :-

,::\ t

Xiang, S., Chen, S., Wu, X., Xiao, D. and Zheng, X. (2009) Study on Fast Linear Scanning for a New Laser Scanner. Optics & Laser Technology. College of Optoelectronic Science and Engineering Hauzhong University of Science and Technology, China. Zampa, F. (2009) Lynx Survey of the Urban Environment and Historical Heritage. Sineco S.p.A. Italy. Zhang, X. (2005) Precise Point Positioning Evaluation and Airborne Lidar Calibration. Danish National Space Center.

82

Appendix A
This appendix provides and outlines the MATLAB program used for the calculations in this thesis.

clear all syms alpha beta gamma; DtoR 0.0174533; coor_t:: []i delta_xyz:: []i var::: [alpha, beta, gamma]i coor_L = [15 15 0] '; zrange=[48, 52, 94]i zigma 0.005; zigmasquare :: zigma A 2i ':; Th-= follo'J,fing calculates the sysmbolic rotation J1atric-=s alor:g X, Y, and
% Z
~ aXt:~SI

respectiv ely. p.otatioIl_rnat is
r

th~

ZY;( product of all these

rotation matrices to account for rotation along all three axes.

R_x_alpha [1 0 0; 0 cos (alpha) sin (alpha) ; 0 -sin (alpha) cos(alpha)]; R-y_beta:: (cos (beta) 0 -sin(beta)j 0 1 OJ sin (beta) 0 cos(beta)]; ,R_z_gamma = [cos (gamma) sin (gamma) 0; -sin (gamma) cos (gamma) 0; 0 0 1]; Rotation_mat :: R_z_gamma*R-y_beta*R_x_alpha;
'I; 'I;

,~

Tar<;rct points created for sim111ation purposes. a 1 meter distance (uniI:o:rm in all directions) between the target points, for a total or L31 target points. (please note that a more realisitc nurr.ber

,)f
~ tar<;rets used in the actual calculation can be changed). The target plane 'I; is assum-=ci to be 10 meters .'.H"lay from the sensor.

A=linspace(10,20,ll}i
i=li

k=l; for j :: 1: 11 while i<=11 coor_t(:,k) [A(i);A{j)j20]; i=i+1; k=k+1; end i=1: end }; The boresight angles input in the first s~age of computations (i.e.

83

'I;
,I,

r:dlculation of Del til_XYZ matr-ix): b_d, ,:Hlgle of rot::ttion dlorlq X
b"b,
~Ulgle

dXlS,

of rotation alonq y axis.

. angle of rotation along Z

angles=[3, 3, 3]: = angles(l)*DtoR; b_b = angles(2)*DtoR: b_g angles(3)*DtoR; Rotation matrix from (in order-) the Global refence rrarae to INU frame or nJf':!rence: E,_GtoI; assuming that um has not rotated. Rotation matrix '(I from non-rotated ll-:ru to a rotated IHU (when the vehicle has some 'il r-ot~ation: 'R_ItoI. The product of these tvlO matrices is that Rotation ,t matrix "R_I"; the rotation of n1fJ with respect to the Global fr,Slme of
1;
',~

\.\

t:·t~fert=nCE:1.

Assuming that there is no rotation (error) bet,,;een DID and Sensor, the 'srotation matrix of the Sensore wi th respect to the INU frame is R_ItoS. ',j R_b is the rotation matrix with the i~otation errors (error in mounting 'I> the sensor wi th .l:-espect to the INU). Here the errors are considered to be \1, 3 degrees on each aXE:~s. This can be changed in the n angles" variable. R_GtoI = [0 -1 0; -1 0 0: 00-1]: R_ItoI = suhs(Rotation_mat, {alpha, beta, gamma}, O*DtoR}); R_I = R_GtoI*R_ItoI:

" 'I)

{O*DtoR, 10*DtoR,

R_ItoS = [-1 0 0; 0 0 -I: 010]; R_b = suhs(Rotation_mat, {alpha,beta,gamma} , {b_a, b_b, b_g});

,~ delta_xyz is calculated as the product of rotation matrix of the scanner 'is and the range matrix; that is "delta_xyz:::: K._s*(O 0 -p]T", where de 1 tu_:<.yz ,I; is "[ <.'le1 ta_x del ta_y del ta_z JT' .

for z = 1: length (coor_t) delta_X¥z(:,z) = inv(R_T*R_b)*(coor_t(:,z)-coor_L); 1; J:O {:, z) :::: sqrt {(delta_xyz (1, z) ,';~) + <delta_xyz (2, z) '2) + '15 (d(31ta_xyz (3, z) "::!) ) ; end
:1>

The followiniJ section creates a matrix of Lidar coordinates as required ,(; by the number of points indicated in the zrange matrix, this is only for

84

'I; (:alculation ;nodel.

pll:q)OS(~~S

and has no implicat:.ions

')0

the mathematical

z = zrange; coor_LL=[]; for xx=z coor_LL [coor_LL, coor_L]; end
I; 'R_b' )8 calculated [0:1::' all points in the zrange {ulrget points indicated il, by the user. 'size (R_b)' finds the number of elemets in the rm>Js and '}, columns i mul tip1 :,ring s1 and s2 gives the total number of elements i.n t.he 'I; matri.x .

R_b = inv(R_Tl*(coor_t(:,z)-coor_LL); [sl,s2] = size(R_b)i sizeR_b = sl*s2: es arc the approximate vall1es of the Pitch, Roll, and Yaw unction with taylor approximation % angles that will be used in rae tl10cl / ..!J In ali i terati ve scheme to close in 011 the actualy angles required '~i (ideally it ShOl1ld resul t in 3 degrees on each axis). "R_b_s:'/Il1" is a 9, sywolic matrix of (3 axis rotation matrix) that will be used as a ;1; system of equations in the t,aylor s approximation scheme. "iter" is
I
I

,3.n

, 'fl
'I;

iteration counter. "mat - index· is a matrix index CO'll1ter that will be updated in every iteration of the loop.

approx_angles=[6,6,6]: R_b_sym = Rotation_mat; iter = 0: mat_index = 1; ); "phi" is the matrix of the approximate valued of the angles that are "F" is a function. consisting of R_b_sym multiplied by ('I,el ta~_xyz; r~ which J::'eally is "R __ b*R_S* [0 0 -plT", where R_o is unkno'tm. "J" is the ); ~ acovian of the functions in "F".
'i; used.

phi = [approx_angles(l)*DtoR approx_angles(2)*DtoR approx_angles(3)*DtoR] '; Q :::: delta_xyzi '15 noise ones(3,length(z)) *'O.lj % noise = ((randn(3,len.gth(z)+ 8)/100); F = R_b_sym*(Q(:,z)+ «randn(3,length(z))*10)/lOO)); J = jacobian(F,var); delta-phi:::: [1,1,1] 'i % In the follm"ing loop, "F" and "J" are evaluated at the approximate 'I; values of es (approx_angles), then the, differential term, ., del ta_phi "

85

¥

~ t~rm for "phi" is obtained (phi phi + delta . . phi) . "iteration matrix· ~ contains terms of differential for each iteration (should converqe !; to 2',:1-0), "phi_matrix" cr:mtains angle values aft,~r each iteration is i, p,;!rrormed, and "phi __mat2" contains these angles in d'"rJrees.
~ while iter <= 1 while (abs(delta-phi(l,l»>=le-6 && abs(delta-phi(2,1»>=le-6 && ... abs(delta-phi(3,l»>=le-6) F_not = subs(F, {alpha,beta,gamma}, (phi(l,l) ,phi(2,1) ,phi(3,l)}): J_not = subs(J, {alpha,beta,gamma}, {phi(l,l),phi(2,1) ,phi(3,l)}); delta-phi = «(inv(J_not'*J_not + O*eye(3»*J_not')* ... reshape«R_b-F_not),sizeR_b,l» ; phi = phi +delta-phi; i; phi/DtoR iteration_matrix(:,mat_index) delta-phi; phi_matrix(:,mat_index) = phi: phi_mat2 phi_matrix/DtoR; mat_index = mat_index + 1; iter iter+l; end

=

=

R_b_new subs (Rotation_mat, {alpha,beta,gamma}, {phi_matrix(l,end), ... phi_matrix(2,end), phi_matrix(3,end)}); for z = l:length(coor_t) delta_xyz_2(:,z) = inv(R_T*R_b_new)*(coor_t(:,z)-coor_L); '(; ro ( : z) = sqrt ( (delta_xyz (1, z) "2) + (delta._.xy:: (2, ::) "2) + % (delta_xy::(3,::) '2); end for z =1: length (delta_xyz) target(:,z) = coor_L+R_T*R_b_new*delta_xyz(:,z); end
I

=

'8

This section of the program cac:ulates the variance covariance matrix l::.igmaeyek,JTJ), and more specifically the covariance values for thE~ 3 · calculated angles.
Ii

zigmaeye = zigmasquare*eye(3); JTJ inv(J_not'*J_not); varcov = sqrt(zigmaeye*JTJ); seconds error = diag(varcov/DtoR)*3600)i

86

Appendix B
The following table includes the computation results of the projection matrix; when there is no noise included.

-10.60 -5.42 12.25 -10.65 -4.42 11.87 -10.70 -3.42 11.58 -10.76 -2.43 11.36 5 -10.81 -1.43 11.23 6 -10.86 -0.43 IU8 7 -2.57 -10.91 0.57 11.23 8 -2.51 -10.97 1.56 11.36 9 -2.46 -11.02 2.56 11.58 -2.41 10 -11.07 3.56 11.87 -2.36 11 -11.12 4.55 12.25 -1.91 -10.37 12 -5.46 11.87 -1.86 -10.42 -4.46 13 11.49 -1.80 -10.48 -3.46 11.l8 14 -1.75 -10.53 -2.47 10.95 15 -1.70 -10.58 -1.47 10.82 16 -10.63 -0.47 -1.65 10.77 17 -l,59 -10.69 0.53 10.82 18 1.52 -10.74 10.95 -1.54 19 2.52 -10.79 IU8 -1.49 20 3.52 11.49 -10.84 -1.44 21 4.52 11.87 -10.90 -1.38 22 L----~--------~~--------~7_------~~--------~~--~ l ____~~ ________ ~~ ________ ~~ __________________ __.~~--~ -5.50 -10.15 11.58 -0.93 23 -4.50 IUS -10.20 -0.88 24 I 10.86 -3.50 -10.25 -0.83 25 -2.50 10.63 -10.30 -0.78 26 , -1.51 10.49 ! -10.35 -0.73 27 -0.51 10.44 -10.41 -0.67 28 0.49 10.49 -10.46 -0.62 29 1.48 10.63 -10.51 -0.57 30 2.48 10.86 -10.56 -0.52 31 11.18 3.48 -10.62 -0.46 32 11.58 4.48 -10.67 -0.41 33 -5.54 11.36 -9.92 0.04 34 -4.54 10.95 -9.97 0.09 35 '" ! -3.54 10.63 -10.02 0.14 36 -2.54 10.39 -10.07 0.20 37 -1.55 10.25 -10.13 I 0.25 38

1 2 3

"'

~

t
l

87

:'~', 'h .~.' .

'"

" , ; "T 't",cT:J:Eti:",~·,e; 'i~ 7" ,.;~; ;;;;:;',::j~{

':,'

!

!
I

39 40 41 42 43 44 45 46 47 ...8
... 9

I
I I

I
I

r
\
I

f ,

f
I
!

t
\
!

50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67
68 69

I

i
i , I

!

I !

I I

70 71 72 73 74 75 76

0.30 0.35 0.41 0.46 0.51 0.56 1.01 1.06 1.12 1.17 1.22 1.27 1.33 1.38 1.43 1.48 1.54 1.98 2.04 2.09 2.14 2.19 2.25 2.30 2.35 2.40 2.46 2.51 2.96 3.01 3.06 3.11 3.17 3.22 3.27 3.32 3.38 3.43

:~.~, ;·X~,; ,.::L. .t~;; -10.18 -10.23 -10.28 -10.34 -10.39 -10.44 -9.69 -9.74 -9.79 -9.85 -9.90 -9.95 -10.00 -10.06 -10.11 -10.16 -10.21 -9.46 -9.52 -9.57 -9.62 -9.67 -9.72 -9.78 -9.83 -9.88 -9.93 -9.99 -9.24 -9.29 -9.34 -9.39 -9.44 -9.50 -9.55 -9.60 -9.65 -9.71

,','".' '. ,','\

::t~i
J',

' i'.<: :'!::~(, r.:: . . . ~<.!1:~~ .'
,'")<'

~:'~'"
«

i ,1

-0.55 0.45 1.45 2.44 3.44 4.44 -5.57 -4.58 -3.58 -2.58 -1.59 -0.59 0.41 1.41 2.40 3.40 4.40 -5.61 -4.62 -3.62 -2.62 -1.62 -0.63 0.37 1.37 2.36 3.36 4.36 -5.65 -4.66 -3.66 -2.66 -1.66 -0.67 0.33 1.33 2.33 3.32

10.20 10.25 10.39 10.63 10.95 11.36 11.23 10.82 10.49 10.25 10.10 10.05 10.10 10.25 10.49 10.82 11.23 11.18 10.77 10.44 10.20 10.05 10.00 10.05 10.20 10.44 10.77 11.18 11.23 10.82 10.49 10.25 10.10 10.05 10.10 10.25 10.49 10.82

88

11.23 78 -9.01 -5.69 11.36 79 -9.06 -4.69 10.95 80 4.04 -9.11 -3.70 10.63 81 4.09 -9.17 -2.70 10.39 82 4.14 -9.22 -1.70 10.25 83 4.19 -9.27 -0.71 10.20 84 4.24 -9.32 0.29 10.25 85 4.30 -9.37 1.29 10.39 86 4.35 i -9.43 2.29 10.63 I 87 4.40 j -9.48 3.28 10.95 i" 88 4.45 -9.53 4.28 11.36 I 89 4.90 -8.78 , -5.73 11.58 I 90 , 4.96 -8.83 -4.73 11.18 91 5.01 -8.89 -3.74 10.86 i 92 5.06 -8.94 -2.74 10.63 I 93 5.11 -8.99 -1.74 10.49 I 94 5.17 -9.04 -0.74 10.44 5.22 95 -9.09 0.25 10.49 5.27 96 -9.15 1.25 10.63 532 97 225 10 86 -920 5.37 -9.25 98 3.24 11.18 -9.30 5.43 4.24 99 11.58 -8.55 -5.77 5.88 11.87 100 -8.61 -4.77 5.93 11.49 101 -3.78 -S.66 11.18 5.98 102 -8.71 -2.78 10.95 6.03 103 10 82 609 -1 78 -876 104 i -8.81 -0.78 10.77 6.14 105 ! -8.S7 0.21 10.82 6.19 I . 106 -8.92 1.21 10.95 6.24 107 I 2.21 -8.97 11.18 6.30 108 -9.02 3.20 11.49 6.35 109 1 _ _ _ _~11~O~______~6~.4~0--------~9.~OS~------~4.~20~------~1~1.~87~~ ~I~11~______~6~.8~5~-------~8~.3~3------~-5~.8~1------~1~2~.2~5__~ 112 6.90 -8.38 -4.81 11.87 113 6.95 -8.43 -3.82 11.58 114 7.01 -S.48 -2.82 11.36
t_"_ _

89

I

L

115 116 117 118 119 120 121

7.06 7.11 7.16 7.22 7.27 7.32 7.37

-8.54 -8.59 -8.64 -8.69 -8.74 -8.80 -8.85

-1.82 -0.82 0.17 1.17 2.17 3.17 4.16

11.23 11.18 11.23 11.36 11.58 11.87 12.25

:t;

.~

!~

4;'~, ~~,

:~;
,,",,
<~.

, ~',:

.......

t~ ;": ~:!
« (

,

90


