FREQUENCY CALIBRATION OF THE SYSTEM CLOCK OF PASSIVE WIRELESS MICROSYSTEMS
by Durand Jarrett-Amor Bachelor of Engineering, Ryerson University, 2015 Bachelor of Science, University of Waterloo, 2009

A thesis presented to Ryerson University in partial fulllment of the requirements for the degree of Master of Applied Science in the Program of Electrical and Computer Engineering

Toronto, Ontario, Canada, 2017 c Durand Jarrett-Amor, 2017

AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A THESIS

I hereby declare that I am the sole author of this thesis. This is a true copy of the thesis, including any required nal revisions, as accepted by my examiners.

I authorize Ryerson University to lend this thesis to other institutions or individuals for the purpose of scholarly research.

I further authorize Ryerson University to reproduce this thesis by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research.

I understand that my thesis may be made electronically available to the public.

ii

ABSTRACT FREQUENCY CALIBRATION OF THE SYSTEM CLOCK OF PASSIVE WIRELESS MICROSYSTEMS Durand Jarrett-Amor Master of Applied Science, Electrical and Computer Engineering, Ryerson University, 2017

This thesis presents a theoretical and simulated study of frequency calibration of the system clock of passive wireless microsystems. The proposed frequency calibration technique achieves ultra-low power, high frequency accuracy, and fast calibration of the frequency of a local oscillator in a passive wireless microsystem using a frequency-locked loop (FLL). A new integrating frequency difference detector (iFDD) that senses the frequency dierence between the local oscillator and a reference clock is also proposed. The iFDD is implemented using a switched-capacitor

network with two integrating paths. The FLL is composed of a logic-control block for generation of clock signals, the iFDD, and a relaxation voltage-controlled oscillator. A detailed analysis of the characteristics of the iFDD in the time and frequency domains is presented. The loop dynamics of the FLL is also investigated. The proposed FLL is implemented in IBM 0.13-µm, 1.2 V CMOS technology and is validated through simulations using Spectre APS.

iii

ACKNOWLEDGMENTS

I am grateful to Professor Fei Yuan for his guidance, support, and invaluable feedback throughout my thesis. I am also thankful for the nancial support from the Ontario Graduate Scholarship program and the Faculty of Engineering and Architectural Science at Ryerson University. I also wish to thank CMC Microsystems for providing the computer-aided design tools. I would also like to thank Professor Andy Ye, Professor Lev Kirischian, and Professor Gul Khan for being on my defense committee and for the useful feedback they provided. Lastly, I am grateful for all of the continued understanding and loving support provided by my partner throughout the entirety of my studies.

iv

Contents
Author's Declaration Abstract Acknowledgements Contents List of Tables List of Figures List of Symbols 1 Introduction
1.1 Characterization of Radio Frequency Identication (RFID) Systems . . . . . 1.1.1 1.1.2 1.1.3 1.2 Close-Coupling RFID Systems . . . . . . . . . . . . . . . . . . . . . . Remote-Coupling RFID Systems Long-Range RFID Systems . . . . . . . . . . . . . . . . . . . .

ii iii iv v viii ix xii 1
2 2 2 3 4 4 6 6

. . . . . . . . . . . . . . . . . . . . . . .

Background on Passive Wireless Microsystems (PWMs) . . . . . . . . . . . . 1.2.1 1.2.2 Architecture . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Applications . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

1.3

Motivation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

v

1.3.1 1.4 1.5 1.6 1.7

Challenges in the Design of the System Clock for PWMs

. . . . . . .

6 9 9 10 10

Objective

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Contributions

Thesis Organization . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

2 A Review of State-of-the-Art for Clock Generation and Calibration of PWMs 12
2.1 Clock Recovery Method 2.1.1 2.1.2 2.1.3 2.2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12 12 13 14 15 16 16 17

Clock Recovery from an ASK-Modulated Carrier Clock Recovery using Injection-Locked Dividers Clock Recovery from the Envelope of the Carrier

Remote Frequency Calibration of a Local Oscillator . . . . . . . . . . . . . . 2.2.1 2.2.2 2.2.3 2.2.4 Remote Frequency Calibration using Digital Trimming . . . . . . . .

Remote Frequency Calibration using a Phase-Locked Loop . . . . . . Remote Frequency Calibration using a Digital Frequency-Locked Loop Remote Frequency Calibration using an Injection-Locked Phase-Locked Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

20 20

2.3

Chapter Summary

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

3 Sub-Microwatts Integrating Frequency Dierence Detector for Frequency Calibration of PWMs 22
3.1 3.2 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Integrating Frequency Dierence Detector 3.2.1 3.2.2 3.2.3 . . . . . . . . . . . . . . . . . . . 22 23 23 26 32

Concept of the iFDD . . . . . . . . . . . . . . . . . . . . . . . . . . . Time-Domain Behaviour of the iFDD . . . . . . . . . . . . . . . . . . Convergence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

vi

3.2.4 3.2.5 3.3

Eect of Duty-Cycle Variation . . . . . . . . . . . . . . . . . . . . . . Maximum Frequency of Operation . . . . . . . . . . . . . . . . . . .

33 35 36 36 39 42 42

Design of the FLL 3.3.1 3.3.2 3.3.3

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Model of the iFDD . . . . . . . . . . . . . . . . . . . . . . . . . . . . Model of the FLL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Speed and Noise Considerations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

3.4

Chapter Summary

4 Results
4.1 4.2 4.3 Simulation Environment Set Up . . . . . . . . . . . . . . . . . . . . . . . . . Simulation Results Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

44
44 47 53

5 Conclusions and Future Work
5.1 5.2 Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

57
57 58

Future Work . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Bibliography

59

vii

List of Tables
4.1 4.2 Simulation Results of Power Consumption of FLL (Unit:

µW).

. . . . . . . .

52

Simulation Results of Lock-time of FLL to a 1 MHz, 50% Duty-Cycle Reference Signal with



= 1. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

54

4.3

Comparison with Prior Clock Recovery and Clock Calibration Technigues for  PWMs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

55

viii

List of Figures
1.1 1.2 1.3

Simplied block diagram of a typical UHF RFID transponder. .

. . . . . . . . . . . . . . . . . . .

4 7 8

Simplied block diagram example of backscatter load modulation. Spectrum of backscattered data signal from the transponder. Clock recovery from the ASK-modulated carrier wave [1].

. . . . . . . . . . .

2.1 2.2 2.3 2.4 2.5 2.6 2.7

. . . . . . . . . . . . . . . . .

13 14 15 17 18 19 21

Clock recovery from the RF carrier wave using injection-locked dividers [1]. Clock generation from the envelope of the ASK-modulated carrier [1]. Frequency calibration of a local oscillator by digital trimming [1]. Frequency calibration of a VCO using a PLL [1]. . Frequency calibration of a VCO using a DFLL [1].

. . . . . . .

. . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Frequency calibration of a VCO using an IL-PLL [1]. Simplied block diagram of the proposed iFDD.

3.1 3.2

. . . . . . . . . . . . . . . . . .

24

Waveforms of vosc and vref for ne frequency dierence (0 < fosc < fref or fref < fosc < 2fref ) showing the denition of tC1 and tC2 , in addition to their

intermediate and extreme values in (i)-(vi). This is for the ideal case that both waveforms are 50% duty-cycle signals. . . . . . . . . . . . . . . . . . . . . . . . Proposed iFDD and its logic control block (LCB) (left) and waveforms (right) of vosc , vref , C1 , sa1 , r1 , C2 , sa2 , r2 , and f . The order of operation of the switches are included in the waveform for ease of understanding. The number inside the brackets of tC1 (j ) and tC2 (j ) indicates their j th sample number. . . . . . . Magnitude response of the iFDD with respect to normalized frequency. Phase response of the iFDD with respect to normalized frequency. .
. . . . . .

25

3.3

27 38 38

3.4 3.5

. . . . . . . .

ix

3.6 3.7 3.8

Discrete-time model of the FLL.

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

39 41 41

Pot of phase margin (P M ) vs. loop gain factor, K . Plot of C vs. loop gain factor, K , with I = 100 nA.

4.1

Schematic of the iFDD. Transistor sizes are: WN 1,N 2 = 0.320 µm, WN 3-N 5 = 1 µm, WP 1,P 2 = 0.640 µm, WN 6-N 9 = 0.5 µm, WN 10-N 12 = 0.480 µm, WP 3,P 5 = 0.960 µm, WP 4,P 6 = 1.55 µm, WN 13-N 16 = 0.480 µm, WP 7-P 9 = 0.960 µm, WP 10 = 6 µm, LN 1-N 12,P 1,P 2,P 3,P 5 = 0.120 µm, LN 13-N 16 = 0.240 µm, and LP 4,P 6-P 10 = 0.480 µm. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Schematic of the relaxation VCO that was used to generate vosc . Transistor sizes are: WN 1-N 6 = 0.350 µm, WP 1-P 7 = 0.700 µm, and LN 1-N 6,P 1-P 7 = 0.120 µm. The value of the tuning capacitors, Cr , was set 1.75 pF. . . . . . . . . . . . . . . Free-running frequency of VCO versus VDD .
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

44

4.2

46 47 47 48 48 49

4.3 4.4 4.5 4.6 4.7 4.8

VCO tuning curve across tt, , fs, sf, and ss process corners. . Free-running VCO frequency  temperature relation. Free-running VCO frequency  VDD relation.
vout  ferr relation.

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

Control voltage of relaxation oscillator in response to an input frequency step of 1 MHz with 50% duty-cycle. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Transient response of the frequency of the relaxation oscillator, fosc , with a 1 MHz, 50% duty-cycle reference clock input. . . . . . . . . . . . . . . . . . . . . . . . . Transient response of the frequency error, ferr , in response to an input frequency step of 1 MHz with 50% duty-cycle. . . . . . . . . . . . . . . . . . . . . . . . . Transient response of fosc to an input frequency step of 1 MHz with duty-cycles of 38% and 63%. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Transient response of fosc to an input frequency step of 1 MHz with 50% duty-cycle across , fs, sf, and ss process corners. . . . . . . . . . . . . . . . . . . . . . . . Transient response of fosc to an input frequency step of 1 MHz with 50% duty-cycle at fast (VDD = 535 mV, T = -25 C,  process) and slow (VDD = 465 mV, T = 85 C, ss process) corners. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

51

4.9

51

4.10

52

4.11

52

4.12

53

4.13

53

x

4.14

Transient response of fosc to an input frequency step of 1 MHz with 50% duty-cycle with  = {0.25, 0.5, 1}. Lock-time (within ±1% of fref ) for ={0.25, 0.5, 1}: 8.76 µs, 9.27 µs, and 13.53 µs, respectively . . . . . . . . . . . . . . . . . . . . . . . Spectrum of VCO for  = {0.25, 0.5, 1}.
. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

54 54 55

4.15 4.16

Simulated lock-time (within ±1% of fref ) versus .

xi

List of Abbreviations
CDS ADC AN D2 AP S ASK BSIM 4v 4 CM OS DAC dBm DC DCO DF F DF LL EP C EP CC 1G2 ERP FF F LL
Cadence Design Systems Analog-to-Digital Converter 2-input AND logic gate

Accelerated Parallel Simulator Amplitude-Shift Keying Berkeley Short-Channel IGFET Model 4 version 4 Complementary Metal-Oxide Semiconductor Digital-to-Analog Converter Decibel power with respect to 1 Milliwatt

Direct Current Digitally-Controlled Oscillator Data (D) Flip-Flop Digital Frequency-Locked Loop

Electronic Product Code Class-1 Generation-2 EPC standard Equivalent Radiated Power (NMOS)Fast-(PMOS)Fast Frequency-Locked Loop

xii

FS FV C iF DD ILD IL - P LL IoT LCB IIR M IM - cap 2 : 1M U X N AN D2/3 N M OS PFD P IE P LL P M OS PV T reltol RF RF ID RT cal SAR SF

(NMOS)Fast-(PMOS)Slow Frequency-to-Voltage Converter Integrating Frequency Dierence Detector Injection-Locked Divider Injection-Locked Phase-Locked Loop Internet-of-Things Logic-Control Block Innite-Impulse-Response Metal-Insulator-Metal Capacitor 2-input, 1-ouput Multiplexer 2/3 input Not-AND logic gate

N-channel Metal-Oxide Semiconductor Phase-Frequency Detector Pulse-Interval-Encoding Phase-Locked Loop

P-channel Metal-Oxide Semiconductor Process, Voltage, and Temperature

Relative Tolerance Radio Frequency Radio Frequency Identication System Read-to-Transponder calibration Successive-Approximation-Register (NMOS)Slow-(PMOS)Fast

xiii

S/H SN R SR - latch SS T SP C TT TV C U HF V CO

Sample-and-Hold Signal-to-Noise Ratio

Set-Reset latch (NMOS)Slow-(PMOS)Slow True-Single-Phase-Clocking (NMOS)Typical-(PMOS)Typical Time-to-Voltage Converter Ultra High Frequency Voltage-Controlled Oscillator

xiv

Chapter 1
Introduction
Automatic identication procedures have become a popular method to supply information about animals, people, goods and products that are in transit and are now very important in the service, logistics, and manufacturing industries to name a few [2]. Although barcodes are stilled used to this day to provide information on products because they are very inexpensive, their low storage capacity and inability to be reprogrammed prevents them from being used in identication systems that require storage of large amounts of data and the ability to be reprogrammed [2]. Of the various types of identication systems-barcode, optical character recognition, voice recognition, smart card, and Biometry-radio frequency identication (RFID) systems are becoming popular alternatives because of their various distinct advantages, such as not being able to be interfered with while reading/writing data, their operation not being inuenced by external objects like dust/dirt, and being able to have large distances ( the reader and the data-carrying device [2]. 1 m) between

Currently, they are nding extensive use in

tap-to-pay systems for the goods and services industry as well as public transit payment systems. RFID systems consist of two intrinsic parts:

· ·

the

transponder

(located on the item to be analyzed),

the

reader /interrogator.

The reader reads data from or writes data to the transponder and is usually composed of a transmitter/receiver module, a control block, and a coupling component to the transponder [2]. Similarly, the transponder also has a coupling element in addition to a

1

microchip which processes and stores the data to be retrieved by the reader, provided it is within the reading distance of the reader [2].

1.1 Characterization of Radio Frequency Identication (RFID) Systems
RFID systems are typically characterized by the operating frequency of the reader, the coupling method between the reader and transponder, and the operating distance between the reader and transponder [2].

1.1.1 Close-Coupling RFID Systems
RFID systems that have an operating range up to 1 cm are known as systems [2].

close-coupling

Such systems have transmission frequencies in the range of 0-30 MHz and

the coupling between the reader and transponder is achieved through both electric and magnetic elds, thus requiring the transponder to either be physically inserted into the reader or positioned on or very near to it [2]. Since close-coupling systems operate at very small distances, then their operating power can be greater than RFID systems that function at larger distances. Typically close-coupling RFID systems are used in applications that

require rigid security between the reader and transponder as well as small operating distances between them, such as electronic door-locking systems and smart card systems with tap-topay functions [2].

1.1.2 Remote-Coupling RFID Systems
RFID systems that operate at distances up to 1 m are termed

remote-coupling systems

[2]. Most remote-coupling systems use magnetic coupling between the reader and transponder, operate at frequencies less than 135 kHz or 13.56 MHz, and have applications in animal tracking and industrial automation [2].

2

1.1.3 Long-Range RFID Systems
RFID systems with read-to-transponder ranges 1 m are collectively known as

long-range

systems [2].

These systems operate in the ultra-high frequency (UHF) range

(860-960 MHz) and microwave region (2.5 GHz and 5.8 GHz) in Canada, use electromagnetic coupling between the reader and transponder (thus they require antennas for coupling) and the majority of such systems operate using the

backscattering Active

technique to communicate

data from the transponder to the reader [2, 3, 4].

Long-range RFID systems are further long-range transponders have

distinguished by how their transponders are energized. an on-board power supply/battery, whereas

passive

long-range transponders do not have

a power supply but rather use the energy contained in the magnetic or electromagnetic eld that is emitted by the reader when communicating with the transponder, provided the transponder is within the reader's interrogation zone [2]. In particular, if the transponder is in the interrogation zone of the reader, then it will provide the transponder with power through its emitted RF wave, which is stored on a large capacitor on the transponder [5]. The powerup procedure begins the reader-transponder communication process and it takes some time to complete, since the capacitor must be charged to a level that will allow the transponder to operate [2]. Another distinguishing factor between active and passive transponder is the eld of the received RF wave from the reader. Since the magnetic or electromagnetic eld of the emitted RF wave from the reader does not power active transponders, then it can be much weaker than the eld that is emitted for passive transponders [2]. Passive transponders cannot generate enough power to create an RF signal on their own and, therefore, they rely on modulating the electromagnetic eld that is emitted by the reader to be able to transmit data from the transponder to the reader [4]. In particular, passive transponders must be

activated by the reader prior to communicating with it, whereas active transponders do not need to be activated by the reader prior to communication. Apart from the way active

and passive transponders are powered, another major distinction between them is their operating distance. Active transponders have operating ranges of 15 m and above, while

passive transponders typically have operating distances up to 3 m, although some authors haved reported operating distances of 9.25 m [2, 6].

3

1.2 Background on Passive Wireless Microsystems (PWMs)
RFID systems that operate using passive transponders are known as

passive wire-

less microsystems (PWMs).

Attributive to their miniaturization, wireless accessibility, pro-

grammability, and maintenance-free operation, PWMs have found a broad range of emerging applications including implantable bio-MEMS pressure sensors [7], retinal prosthetic devices [8], multi-site pressure sensors for wireless arterial ow characterization [9], and wireless temperature sensors [10, 11, 12], to name just a few, and are the main focus of this thesis work.

1.2.1 Architecture
The architecture of an RF powered transponder consists of an antenna for receiving the RF signal, a power generation circuit, a signal front-end block, and a baseband processing block, as shown in Fig.1.1.

Figure 1.1:

Simplied block diagram of a typical UHF RFID transponder.

4

RF Front-End
The rst major layer of the transponder of the PWM is the RF front-end, which consists of an antenna for receiving the RF signal, a power generation circuit, an amplitudeshift-keying (ASK) demodulator for recovering the data, a clock generator for extracting the clock from the ASK demodulator, and an ASK modulator for transmitting the data from the transponder to the reader through backscattering. The RF front-end is thus responsible for supplying power to the transponder and interfacing with the reader. Sub-components within the RF front-end that are critical to the correct operation of the transponder are the antenna matching network and the RF-to-DC converter. The antenna matching network is responsible for matching the impedance of the antenna to that of the transponder, in order to provide maximum power transfer from the RF signal to the chip [5]. The RF-to-DC converter is responsible for providing the required, stable DC voltage to power the transponder [5]. The eciency of the matching network and the RF-to-DC converter are still major design challenges in these areas. However, the study of these important blocks are beyond the scope of this thesis and will not be discussed here.

Baseband Block
The baseband processing block consists of circuits that process, generate and/or store data, such as quantizing the sensor readings of the PWM through analog-to-digital converters (ADCs) or microprocessors for signal processing [5]. Since PWMs are powered by the incoming RF signal, then such signal processing units will have a very limited power budget. Consequently, the design of low power baseband processing circuits is the major challenge in this eld, but is beyond the scope of this thesis and will not be discussed further.

System Clock
Another crucial element for PWMs is the clock signal itself. The operation of both the RF signal front-end and baseband procesing blocks of a PWM is administered by its system clock, as seen in Fig.1.1. It is responsible for decoding the downlink data from the reader to the transponder, clocking the command handler, and encoding the uplink data from the transponder to the reader [13]. Further details on the requirements of the system

5

clock and challenges in designing it will be explored in Section 1.3, followed by a review of the state-of-the art in clock generation and calibration for PWMs in Chapter 2.

1.2.2 Applications
Passive wireless microsystems have applications in various areas that range from supply chain management for automation of the storing and distribution of goods, tracking items, and better inventory-control management; electronic access control into buildings and secure locations for storing equipment; tap-to-pay fare collection for transit systems; tracking livestock for animal health and disease control; and healthcare for tracking hospital equipment and supplies, to name a few [4]. Furthermore, the market for PWMs is expected to be worth

$14.9

billion by the year 2022, up from

$11.2

billion in 2017 [14]. Therefore,

PWMs not only have applications in areas that either directly or indirectly aect our lives, but their economic impact is also very signicant.

1.3 Motivation
The primary motivation of this thesis was overcoming the dominant challenges in the design of a clock generation technique for PWMs in UHF applications, which will be discussed next.

1.3.1 Challenges in the Design of the System Clock for PWMs
Due to the lack of a power source in PWMs, the transponder typically cannot allot any of its DC power to generate its own RF signal to communicate with the reader. Rather, PWMs communicate with the reader through backscatter load modulation, whereby a fraction of the received RF signal from the reader is reected back to the reader by the transponder's antenna [2, 5]. The total power that is reected back by the antenna is set by its input impedance. Therefore, by varying the impedance/load of the antenna, the amount of reected power can be varied. The impedance of the antenna can be varied by modulating it with the data that is being transmitted by the transponder. The frequency of the data and, consequently, the frequency of the modulation of the antenna impedance is determined

6

by the clock of the PWM. A diagram to illustrate the concept is presented in Fig.1.2. The switch varies the impedance of the antenna and is controlled by the baseband data, which controls the change in the antenna impedance. Backscatter load modulation signicantly

eases the power constraint on PWMs, since the transponder does not have to generate its own an RF signal thus greatly increasing its power budget.

Figure 1.2:

Simplied block diagram example of backscatter load modulation.

Modulating the data of the transponder by a carrier signal, namely the system clock of the PWM, generates sub-carriers which allows easier detection of the backscatterd signal by the reader [5]. This is shown in Fig.1.3. The reader can recover the carrier signal by ltering out the signal at the sub-carrier frequency

fc +fclk

using a low-pass lter. Fig.1.1 and Fig.1.3

show that the bandwidth of the backscattered transponder signal is set by the frequency of the transponder's clock signal. Therefore, a very accurate clock frequency is required to ensure proper transponder-to-reader communication. For the EPC radio-frequency class-1 generation-2 (EPC C1G2) UHF RFID protocol, the frequency variation of the uplink data must be bounded by

±2.5%

in environments that contain a single reader [3].

In addition to the frequency accuracy constraint, the power consumption of the clock generation technique must be low due to the limited power budget of a PWM. Additionally,

7

Figure 1.3:

Spectrum of backscattered data signal from the transponder.

the larger the power consumption of a PWM the smaller the reader-to-transponder distance which limits the PWM to short-range applications [2]. Furthermore, the received power to a transponder decreases as its distance from the reader increases, further restricting the power budget of the PWM [2]. Therefore, for a PWM to operate at large ( 1 m) reader-to-

transponder distances its power consumption must be ultra-low and the supply voltage it operates from should also be very low, since the amplitude of the received RF signal will be very small and its power decreases with increasing distance [2]. Including the power constraint and strict frequency accuracy requirement of the backscattered data, the calibration time of the reader-to-transponder can also be very strictly conned. For example, for EPC C1G2 UHF RFID protocol the reader-to-transponder calibration time can be as short as 56.25

µs

with a maximum calibration time of 300

µs,

depending on local radio regulations [3]. This places an extra constraint on the generation of the system clock. To summarize, the following major challenges in the design of the system clock for PWMS are:

1. Ultra-low power clock generation due to the restricted power budget of the PWM.

2. Frequency variation of the backscattered data must be bounded by reader environemnts.

±2.5%

for single

3. Short calibration times (56.25

µs

or

300 µs).

4. Ability to operate at low supply voltages for large reader-to-transponder distances (>3 m) for UHF applications.

8

1.4 Objective
The objective of this thesis is the design of a frequency calibration technique that can meet the requirements described in Section 1.3.1. Our particular goal was to design

a frequency calibration technique using a frequency dierence detector that integrates the frequency dierence between a reference clock that is provided by the reader and the local oscillator of a PWM, thereby providing zero steady-state frequency error for the system clock of the PWM after calibration, while also achieving very fast frequency calibration and an ultra-low power consumption so that the system can be used in long-range PWM applications, such as supply-chain management or healthcare.

1.5 Contributions
The following original contributions made by this thesis are outlined as follows:

·

An ultra-low power, highly accurate, and fast frequency calibration method using a frequency-locked loop (FLL) that is embedded with frequency dierence detector that integrates the frequency error between a reference clock sent by the reader and the local oscillator of the PWM, as discussed in Section 1.4. The calibration technique provides zero steady-state frequency error between a timing reference from the reader and the local oscillator of the transponder, while also achieving ultra-low power and a very short calibration time. Compared to previous clock generation techniques reported in [15, 16, 17, 18, 13, 19] our proposed design signicantly improves on both the calibration time and the frequency accuracy of the system clock for PWMs.

·

An ultra-low power integrating frequency dierence detector (iFDD) that integrates the frequency dierence between two signals and can operate at very low supply voltages. The iFDD provides ne frequency resolution and fast frequency calibration by detecting the duty-cycle and period dierence between two signals through a switched-capacitor network. The importance of the iFDD design is that it uses only a single current

source and switched-capacitor network to detect a frequency dierence between two

9

signals, thereby reducing mismatch-induced frequency error present in dual-frequencyto-voltage (FVC) designs [20, 21].

1.6 Thesis Organization
This thesis is organized as follows:

·

Chapter 1 provides an overview of the characterization of the various forms of RFID systems, background on the architecture of PWMs, and a brief discussion on the operation of each block within a PWM. This chapter also presents the challenges in designing the system clock for PWMs. The main objective of the thesis is derived from these design challenges. The contributions that the research presented in this thesis has achieved in realizing the main objective is also provided.

·

Chapter 2 presents a literature review that examines and compares the state-of-theart in clock generation techniques for PWMs based on the major design challenges presented in Chapter 1.

·

Chapter 3 introduces the proposed method for calibration of the system clock of PWMs. The proposed integrating frequency dierence detector is presented and analyzed in detail in this chapter. The loop dynamics of the FLL embedded with the frequency dierence detector is also investigated.

·

Chapter 4 presents the simulation environment that was set up to test the performance of the FLL as well as the simualtion results that were obtained from the set up. Comparison of our results to previous state-of-the-art works is also presented. Chapter 5 summarizes the thesis and outlines possible directions for future work in this area.

1.7 Chapter Summary
This chapter presented a brief characterization of the dierence types of RFID systems as well as basic background on PWMs. We acquainted ourselves with the basic architecture

10

of a passive transponder and concisely discussed its critical circuit blocks, such as the RF front-end and baseband processing units. The specied tasks and design challenges of the signal front-end block, baseband block, and system clock of passive transponders were briey discussed. Challenges with respect to the design of system clock for the transponder of PWMs were addressed in detail. From these challenges, it was concluded that the most pressing

problems in the area of clock generation for PWMs are ultra-low power consumption, high frequency accuracy, and a fast calibration time. Motivated by these design challenges, the objective of this thesis was outlined and the contributions of a new frequency calibration technique using an integrating frequency dierence detector were summarized.

11

Chapter 2
A Review of State-of-the-Art for Clock Generation and Calibration of PWMs
The operation of both the RF front-end and baseband processing blocks of PWMs is conducted by its system clock. As discussed in Chapter 1, there are demanding requirements on the system clock. A few methods have been developed to generate the clock for PWMs and they can be split into two categories:

1. Clock recovery from the incoming data sent by the reader.

2. Frequency calibration of a local oscillator in the PWM.

This chapter will review the advantages and disadvantages of previous works in each of these areas.

2.1 Clock Recovery Method
2.1.1 Clock Recovery from an ASK-Modulated Carrier
A PWM with ASK data links with its reader can directly extract the clock from the ASK-modulated carrier by using an ASK-demodulator, as shown in Fig.2.1 [22]. This approach yields a very simple design, since only a comparator and a chain of frequency dividers is needed. However, it suers from a few notable drawbacks for UHF RFID systems. First, the high frequency of the carrier results in signicant power consumption from the clock recovery circuit. This is because the baseband processors of PWMs operate in the high-kHz to low-MHz range, so frequency dividers are required to bring down the high frequency of

12

the carrier to a baseband frequency [1].

Second, the clock signal is unavailable when the

input RF signal is weak, which occurs when the read-to-transponder distance is large, or when transmitting a data-0 with a 100% modulation-index. Finally, a very stable voltage reference accross process, voltage, and temperature (PVT) variations is required to ensure reliable recovery of the clock signal from the RF carrier wave.

Figure 2.1:

Clock recovery from the ASK-modulated carrier wave [1].

2.1.2 Clock Recovery using Injection-Locked Dividers
To overcome the issue presented in Section 2.1.1, Leung and Luong proposed a method that uses an injection-locked divider (ILD) to reduce the power consumption of the frequency divider circuit as shown in Fig.2.2 [15]. The idea behind this approach is to rst recover a clock at the frequency of the RF carrier when the RF signal is strong and then use low power injection-locked frequency dividers to bring the recovered clock frequency down further. True-Single-Phase-Clocking (TPSC) frequency dividers are used because of their low power consumption to further lower the frequency. This method resulted in a total average power consumption of 7

µW

from a power supply of 0.5 V and -12 dBm (63

µW)

input power

to the transponder.

Thus, the clock recovery circuit consumes 11% of the total received

power. With this input power, a reading distance of around 3 m can be achieved (assuming a dipole antenna with 0 dB gain at 500 mW eective radiated power (ERP))[2]. However, as

13

the reading distance increases and the amplitude of the received RF signal becomes smaller, the received input power decreases signicantly [2]. Consequently, the majority of the power consumption of the transponder in this case would be from the clock generator circuit. Leung

et al.

resolve this issue by switching to a low-power oscillator circuit that consumes 1.5

µW

when the received RF signal is weak. However, the frequency accuracy of the local oscillator cannot be guaranteed because of PVT variations and since no frequency calibration of the local oscillator is done.

Figure 2.2:

Clock recovery from the RF carrier wave using injection-locked dividers [1].

2.1.3 Clock Recovery from the Envelope of the Carrier
The system clock of a PWM can also be extracted from the envelope of the received RF signal, as shown in Fig.2.3 [16, 23]. This method uses an envelope detection circuit

to extract the envelope signal of the modulated RF carrier and a comparator to compare the amplitude of the recovered envelope signal with a reference value. comparator is then used to generate the clock signal. The output of the

Compared with clock generation

from the carrier, this method has a much lower power consumption because the clock that is extracted from the envelope is at a much lower frequency than the carrier signal and thus does not require frequency dividers, so it can be used for basedband operation of the transponder's processor. For example, Ma, Wu, Zhang, and Zhang achieved a static power consumption

14

for the clock generator circuit less than 1

µW

at a 1.8 V supply [16]. However, the dynamic

power consumption of the clock generator circuit was 3.38

µW.

Another disadvantage of

this approach is that a stable voltage reference across PVT is required for the comparator in order to accurately recover the clock signal. This increases the complexity and silicon

area of the circuit, since compensation circuitry would be required for the reference voltage. Furthermore, any deviation in the reference voltage will result in reduced frequency accuracy of the recovered clock signal.

Figure 2.3:

Clock generation from the envelope of the ASK-modulated carrier [1].

2.2 Remote Frequency Calibration of a Local Oscillator
The second method of creating the system clock for the transponder in a PWM involves generating the clock locally by tuning the frequency of a VCO. However, the impact of PVT uncertainty greatly aects the frequency accuracy of the local oscillator. For example, a VCOs free-running frequency can vary by as much as temperature (PVT) eects [13].

±20% owing to process, voltage, and

Given the stringent frequency accuracy requirement of

EPC C1G2 UHF RFID protocols of

±2.5%

for the backscattered data, the frequency of the

VCO must be corrected prior to any operation of the PWM to reduce its frequency error.

15

Compensation circuitry can be used to oset the eect of supply voltage and temperature variations [24, 25]. However, such techniques become dicult to implement in PWMs because of their limited power budget [26, 27]. Furthermore, such techniques cannot mitigate the

eect of process variations, so additional circuitry for process eects would be required. Another approach to correcting the VCO frequency prior to the commencement of the passive transponder's operations is to calibrate the VCO frequency with respect to a reference signal provided by the reader. This approach is termed

remote frequency calibration.

2.2.1 Remote Frequency Calibration using Digital Trimming
The frequency of the local oscillator is often calibrated using digital trimming, shown in Fig.2.4 [17, 28, 29, 30, 31]. In this approach, the frequency of the local VCO is calibrated with respect to a calibrating signal sent from the reader in a calibration phase by using a counter to count the number of oscillation cycles of the oscillator during this phase. The

value of the counter at the end of the calibration phase is then used as a threshold value for a successive-approximation-register (SAR), with which the frequency of the oscillator after the calibration phase is compared. Although this approach features a large frequency tuning range and excellent robustness in the presence of PVT variations, the need for a SAR, a digit-to-analog-converter (DAC), and other logic makes it rather dicult to lower the power consumption and shorten the calibration time. Additionally, since the frequency accuracy of digital trimming is set by the number of bits of the SAR, then improving the frequency accuracy will result in an increase in both the power consumption and the calibration time. For example, the power consumption of the frequency calibration block in [17] was 31 while a calibration time of 928

µW

µs

was required to set all of the bits of the 8-bit SAR.

2.2.2 Remote Frequency Calibration using a Phase-Locked Loop
The local oscillator of a PWM can also be calibrated using a phase-locked loop (PLL), as shown in Fig.2.5 [18]. This approach uses a clock recovery and calibration circuit to

calibrate the frequency of a VCO. An envelope detector detects the envelope of the received RF signal and a clock extractor generates a square wave clock signal with a frequency that is the same as the carrier frequency. Once the clock has been generated, a PLL is used to tune

16

Figure 2.4:

Frequency calibration of a local oscillator by digital trimming [1].

the frequency of the VCO to the recovered clock signal. After the PLL has locked to the reference clock, a local system clock for the transponder of the PWM is generated. Fan, Dai, Zhang, and Lu implemented a PLL remote frequency calibration system that operated at a frequency of 13.56 MHz [18]. The total power consumption of Fan and calibration system was 17

et. al 's
µW

clock generation

µW

during the locking state and 3

in the locked state.

However, this is simply a result of the carrier frequency that was used in their design. For UHF carrier signals, the power consumption of this approach would be very large since the VCO would operate at a much higher frequency. Furthemrore, when no carrier is available, which occurs when a large modulation index is used, the frequency of the local oscillator drifts since no reference clock is present. Fan

et. al

get around this problem by implementing

a detector and logic block that turns the phase-frequency detector (PFD) o so that it holds it previous value, thus preventing the VCO frequency from dierenting too much. However, the VCO frequency will drift by some amount due to stray capacitances in the loop lter of the PLL. Apart from the above drawbacks, since a PLL is used to calibrate the VCO, then the calibration time will be long since the PLL will lock the phase and frequency of the VCO to the recovered clock signal.

2.2.3 Remote Frequency Calibration using a Digital Frequency-Locked Loop
Chan, Pun, Leung, Guo, Lincoln, and Choy proposed a remote frequency calibration technique that uses a digital frequency-locked loop (DFLL), as shown in Fig.2.6 [13]. This

17

Figure 2.5:

Frequency calibration of a VCO using a PLL [1].

approach uses a counter that stores the number of oscillation cycles of a reference VCO during the transmission of a binary-0 or a binary-1, since in pulse-interval-encoding (PIE) a binary-0 and binary-1 have dierent pulse-widths [1]. A preset threshold value is used as a reference to compare the number of oscillation cycles of a digitally-controlled oscillator (DCO) that is stored in the counter. The threshold value is determined by the baseband processor of the transponder during the reader-to-transponder calibration (RTcal) phase. In particular, if the pulse-width of the transmitted symbol from the reader during RTcal is greater than RTcal/2, then the baseband processor decides that a binary-1 has been received. Otherwise, a binary-0 has been received. The DFLL compares the dierence between the preset threshold value determined by the baseband processor and the value stored in the counter, such that their dierence is used to control a DCO. Chan a very low power consumption of 1.8

et al.

were able to achieve

µW

and a frequency accuracy of -3.21.2% at a clock

frequency of 2.56 MHz [13]. Another distinct advantage of this approach is that the DCO will be continuously calibrated so long as there is communication between the reader and transponder. However, a drawback of this approach is the limited frequency accuracy of the

18

local DCO, since a counter is used to store the number of oscillation cycles of the DCO. As a result, quantization error will always exist and ne frequency accuracy (<±2.5%) cannot be achieved without increasing the power consumption of the transponder. A second drawback of this approach is that the reference value used to compare the number oscillation cycles of the DCO to is obtained from a second VCO that is not calibrated and thus is subject to PVT eects. Another limitation of this approach is its long calibration time of 16 PIE downlink data symbols in nominal conditions in the worst case and 6 PIE symbols in the best case [13]. Since a PIE symbol is determined by the length of a data-0 symbol plus a data-1 symbol, which can have pulse-widths between 25

µs and 50 µs and 6.25 µs and 7.8125

µs,

respectively, then even in the best case scenario the calibration time of this technique is

84.375

µs.

Figure 2.6:

Frequency calibration of a VCO using a DFLL [1].

19

2.2.4 Remote Frequency Calibration using an Injection-Locked Phase-Locked Loop
A remote frequency calibration technique based on injection-locking to the envelope of the received RF input signal was proposed in [19] and is shown in Fig.2.7. This approach utilizes the fact that the baseband processor of passive transponders operates in the kHz-tolow-MHz range and that ASK-modulation schemes are often used for PWMs. Therefore, the envelope of the received RF signal can be extracted and then used as an injection-locking signal for the local oscillator that is embedded in a PLL. The injection-locked PLL (ILPLL) utilizes integrating feedback to extend its lock range. This greatly reduces the power consumption of the remote frequency calibration system of the transponder by operating the local oscillator at a low frequency and by eliminating the need for frequency dividers. Furthermore, high frequency accuracy can be achieved through injection-locking of the local oscillator to the frequency of the envelope signal. Thus, this approach can achieve both a low power consumption and excellent frequency accuracy. The power consumption of this technique when using a 10-mV-amplitude injection signal at a frequency of 1 MHz was 0.96

µW

at a power supply of 1.2 V [19]. However, there are a few drawbacks to this technique.

First, the lock range of the IL-PLL is limited to only 0.43 MHz, so if the VCO free-running frequency varies by more than this amount, the IL-PLL will be unable to lock the VCO to the injection signal. To increase the lock range, the charge-pump current in the integrating feedback loop has to be increased, thus increasing the power consumption. Second, the ILPLL suers from a relatively long calibration time of 150

µs

and 30

µs

in the worst and

best cases, respectively, thus being unable to meet the EPC C1G2 RFID protocol for the calibation time in reader-to-transponder communication across PVT.

2.3 Chapter Summary
A review of the state-of-the-art in clock recovery and remote frequency calibration techniques for generating the system clock of the transponder in PWMs was presented. We found that clock recovery methods that extract the clock signal from either the carrier or envelope signal can suer from high power consumption and are unable to operate correctly

20

Figure 2.7:

Frequency calibration of a VCO using an IL-PLL [1].

when a large modulation index is used for the ASK-modulated carrier.

This also limits

the reading range of the PWM. Remote frequency calibration techniques that calibrate the frequency of a local oscillator through digital trimmming, PLLs, DFLLs, and IL-PLLs were presented. The digital trimming technique was found to be the most popular calibration approach due to its large tuning range and robustness in the presence of PVT eects. However, it was determined that digital trimming suers from long calibration times and signicant power consumption. Remote frequency calibration using a PLL that locks to the carrier signal frequency was found to have a much lower power consumption than the digital trimming technique, but still experiences a large power consumption when a UHF carrier is used. A remote frequency calibration technique that uses a DFLL to compare the number of oscillation cycles of a reference VCO to that of a DCO was presented and found to have a very low power consumption, but long calibration times and a non-zero frequency error in steadystate. Finally, an IL-PLL that uses envelope injection-locking and integrating feedback to tune a VCO was presented. This method achieved both ultra-low power consumption and excellent frequency accuracy through injection-locking. However, noteable limitations to this design are its relatively long calibration time, high supply voltage, and small lock range.

21

Chapter 3
Sub-Microwatts Integrating Frequency Dierence Detector for Frequency Calibration of PWMs
3.1 Introduction
The operation of both the RF front-end and baseband blocks of a PWM is controlled by its system clock. Successful communication between the reader and transponder of a

PWM thus depends on the accuracy of its system clock, which is strongly dependent on changes in the local environment that the passive transponder is in. Variations in power

supply, temperature, pressure, and the strength of the local electric/magnetic eld can result in a subsequent deviation in the desired free-running frequency of the local oscillator that generates the system clock of the PWM. Regular calibration of the frequency of the local oscillator to a dened reference value can mitigate these eects and keep the oscillator's frequency at a constant, pre-dened value. In this chapter, we propose a frequency calibration scheme that ne-tunes the frequency of the local oscillator of a PWM to a desired reference frequency using a frequencylocked loop (FLL). Additionally, a new ultra-low power integrating frequency dierence detector (iFDD) that detects ne frequency dierences is proposed. Similar to the dual

frequency-to-voltage conversion (FVC) scheme in [20, 21], the iFDD uses a switched-capacitor network to sense and then integrate the dierence between the frequency of the local oscillator and that of the reference. However, unlike the designs in [20, 21], the proposed iFDD does not use an error amplier to amplify the frequency dierence and uses only a single switched-capacitor network, thereby eliminating the need to design a low power and high-

22

gain error amplier and the eect of FVC-mismatch-induced frequency error as a result of the use of two FVCs in [20, 21]. In addition, the stability of the FLL with the proposed iFDD does not depend on the stability of an error amplier, unlike the designs in [20, 21]. Finally, the proposed iFDD is also capable of detecting duty-cycle error between the reference signal and the local oscillator, as opposed to the designs [20, 21] which require both signals to have the same duty-cycle. The remainder of this chapter is organized as follows: Section 3.2 presents the basic concept of the the iFDD, including a time-domain and duty-cycle mismatch analysis. The frequency-domain behavior of the iFDD and FLL is explored in Section 3.3. Nonidealities such as duty-cycle variation and the eect of noise generated by the sampling capacitors on the operation of the FLL is also considered. The chapter is summarized in Section 3.4.

3.2 Integrating Frequency Dierence Detector
To overcome the previously mentioned challenges in [20, 21], we propose a new integrating frequency dierence detector that is capable of detecting ne frequency dierences using a single FVC without an error amplier. To develop an understanding of the iFDD, rst a simple conceptual analysis of the iFDD is performed, followed by detailed derivations of its time-domain behaviour, an analysis of the eect of duty-cycle variation, and then nally an investigation into its maximum frequency of operation.

3.2.1 Concept of the iFDD
The simplied block diagram of the iFDD is shown in Fig.3.1. It consists of a logic control block (LCB), a time-to-voltage converter (TVC), a sample-and-hold (S/H) circuit, and a bridge circuit. intervals denoted by The LCB converts the input frequencies,

fref

and

fosc ,

to two time

tC1

and

tC2

for the charging intervals of two capacitors

C1

and

C2 ,

respectively, in addition to generating clocks for sampling and charge redistribution. A dual TVC that consists of a constant current source,

I,

and two capacitors,

C1

and

C2 ,

converts

tC1

and

tC2

to two voltages,

vC1

and

vC2 .

The charging time intervals are obtained from

the following equations

vtC1 = vosc  vref ,
23

(3.1)

Figure 3.1:

Simplied block diagram of the proposed iFDD.

vtC2 = vosc  vref ,
where

(3.2)

vtC1 vosc

and

vtC2

are the voltage waveforms of

tC1

and

tC2 , respectively.

Expressions

(3.1) and (3.2) show that the time intervals which is high and

tC1

and

tC2

determine the length of time for is high, respectively, as shown

vref

is low and

vosc

is low while

vref

in Fig.3.2.

In addition, Fig.3.2 shows that the iFDD senses ne frequency dierences by

measuring the time intervals formed by the rising and falling edges of result, via

vosc

and

vref .

As a

tC1

and

tC2

are related to the frequencies of the oscillator and reference signals

0  tC1  dosc Tosc , 0  tC2  dref Tref ,
where

(3.3)

(3.4)

dosc

and

dref

represent the duty-cycle factors for the oscillator and reference signal,

respectively. In the case that both waveforms are 50% duty-cycle, then (3.3) and (3.4), a 1:1 mapping between is given by

dosc =dref =2.

From

Tosc

and

Tref

and

vC1

and

vC2

of the TVC exists and

0  vC1 

I dosc Tosc , C1 I dref Tref . C2 tC1
and

(3.5)

0  vC2 

(3.6)

Cases (i)-(vi) in Fig.3.2 show that the time intervals signal is operating at a higher frequency.

tC2

determine which (cases (ii), (iv),

In particular, if

tC1 > tC2

24

Figure 3.2:

Waveforms of vosc and vref for ne frequency dierence (0 < fosc < fref or fref < fosc < 2fref ) showing the denition of tC1 and tC2 , in addition to their intermediate and extreme values in (i)-(vi). This is for the ideal case that both waveforms are 50% duty-cycle signals.

and (v)) then

fosc < fref ,

and if

tC1 < tC2

(cases (i), (iii), and (vi)) then

fosc > fref .

Furthermore, assuming both waveforms are 50% duty-cycle, then we can write

tC1 + t2 =

Tosc , 2 Tref . 2

(3.7)

t2 + tC2 =

(3.8)

25

Notice in (3.8) that since cycle which implies that if

Tref 2

is constant, then

t2 + tC2

is constant in every

t2

is increasing, then

tC2

must be decreasing and vice-versa.

Subtracting (3.8) from (3.7) and dening the period error as

Terr = Tosc - Tref ,

we have

tC1 - tC2 =

Terr . 2

(3.9)

Equation (3.9) shows that both the magnitude and sign of the frequency error between

vosc

and

vref

is contained in the time intervals

tC1

and

tC2 .

If

tC1 > tC2 ,
Otherwise, then

then from

(3.9)

Terr > 0 and thus the frequency of the oscillator must increase.

Terr < 0

and the frequency of the oscillator must decrease. Finally, If This implies that balanced when

tC1 = tC2 ,

Terr = 0.

vC1 = vC2

so that

v1 = v2

after the S/H circuit. Consequently, the bridge is

tC1 = tC2

(when both waveforms are 50% duty-cycle) so that

Tosc = Tref .

Otherwise, the bridge isn't balanced and the circuit will continue to operate until the bridge is balanced, assuming the iFDD is in a closed-loop system with negative feedback.

3.2.2 Time-Domain Behaviour of the iFDD
To develop a quantitative understanding of the iFDD, the circuit will be analyzed very close to steady-state conditions, so as to develop time-domain (and later on

z -domain)

equations of the output of the iFDD. Since the iFDD circuit contains switched-capacitors, then we can treat the output voltage of the iFDD as as a discrete-time signal, where the sampling rate in steady-state is set by the reference clock. Fig.3.3 shows the schematic of the proposed iFDD on the left and the waveforms of switches and

vosc , vref ,

and the clocks that control

C1 , sa1 , r1 , C2 , sa2 , r2 ,
are generated from signals

and and

f

on the right.

Clock signals

sa1 , r1 , sa2 ,
is the

rst2

C1

C2 , respectively, whereas clock signal f vosc

delayed version of either the falling edge of

r1

or

r2

depending on if the falling edge of

lags or leads the

vref ,

as shown on the right of Fig.3.3. The falling edges of both

vosc

and

vref
of

are detected by two rising edge DFFs, as shown on the left in Fig.3.3. If the falling edge leads the falling edge of

vosc

vref ,

then

Qref

goes high and

r2

is selected by the wired-OR

2:1 MUX so that goes high and

f =r2 .

On the other hand, if the falling edge of

vosc

lags

vref ,

then

Qosc
that

r1

is selected by the wired-OR 2:1 MUX so that

f =r1 .

The delay



is used to create clock signals

sa1 , sa2 , r1

and

r2

is generated by a chain of inverters.

26

Note that the order of operation of the switches varies when the circuit is not operating in or near steady-state or is not operating in a closed-loop system. In particular, the order of

C1

and

C2

will vary so that either and

C1

or

C2

occurs rst, and, consequently, the order of

switches either

sa1 , r1 , sa2 ,
or

r2

will vary. However, clock signal

f

will always occur after

r1

r 2 .

The start and end of each cycle is dened when the rising edge of

C1

or

C2

occurs rst and when the falling edge of

f

occurs, respectively. A buer is added after

the wired-OR so as to restore

f

to

VDD .

Proposed iFDD and its logic control block (LCB) (left) and waveforms (right) of vosc , vref , C1 , sa1 , r1 , C2 , sa2 , r2 , and f . The order of operation of the switches are included in the waveform for ease of understanding. The number inside the brackets of tC1 (j ) and tC2 (j ) indicates their j th sample number.
Figure 3.3:

27

Consider the rst cycle of operation, as shown in the waveform on the right of Fig.3.3, and assume that all capacitors are initially at rest, so that

vC1,2,3,4 (t = 0- ) = vC1,2,3,4 (t =

0+ ) = 0.

The rst operation in this cycle of the iFDD will be time-to-voltage conversion.

Since time interval charged so that

tC1 (1)

occurs rst, then switch

C1

will close and capacitor

C1

will be

tC1 (1)

is converted to a voltage, given by

vC1 (1) =
where

I tC1 (1), C1
After switch

(3.10)

vC1 (1) represents the rst sample of vC1 .

C1

opens, the second operation

of the iFDD, sampling-and-holding, will occur. In this particular case, switch that charge redistribution between between

sa1

closes so

C1

and

C3

occurs. Assuming that charge redistribution opens, then by the principle of conservation

C1

and

C3

completes before switch

sa1

of charge we have

(C1 + C3 )vC3 (1) = C3 vC3 (0) + C 1vC1 (1),
where

(3.11)

vC3 (1)

represents the rst sample value of the the voltage across

C3

and

vC3 (0)

is the

initial voltage across

C3 .

Since

vC3 (0) = 0

and

vC3 = vout ,

then solving for

vC3 (1)

yields

vout (1) =
Dene

C1 vC1 (1). C1 + C3 1
and (3.10) into (3.12) yields

(3.12)

1 =

C3 , then substituting C1

vout (1) =

I C1

1 + 1

tC1 (1). C1

(3.13)

The third operation of the iFDD will be resetting capacitor ground when

by discharging it to

r 1

closes so that

vC1 = 0.

Next, switch

C2

will close so that the fourth to a voltage given by

operation of the iFDD will be time-to-voltage conversion of

tC2 (1)

vC2 (1) =
where

I tC2 (1), C2
After switch

(3.14)

vC2 (1) represents the rst sample of vC2 .

C2

opens, switch

sa2

closes to

commence the fth operation, which is sampling-and-holding of the voltage

vC2 (1).

Assuming

28

that charge redistribution between

C2

and

C4

completes before switch

sa2

opens, then by

the principle of conservation of charge we have

(C2 + C4 )vC4 (1) = C 4vC4 (0) + C 2vC2 (1),
where

(3.15)

vC4 (0)

is the initial voltage across capacitor

C4 .

Since

vC4 (0) = 0

then solving for

vC4 (1)

in (3.15) yields

vC4 (1) =
Dene

C2 vC2 (1). C2 + C4
and (3.14) into (3.16) yields

(3.16)

2 =

C4 , then substituing C2

2

vC4 (1) =
In order to compare

I C2

1 + 2

tC2 (1).
I C1

(3.17)

vout

and

vC4

equally, we must have

=

I . C2

Therefore, let

C1 = C2 = C
(3.17) become

and dene

KT V C = I/C

as the gain of the TVC. Then equations (3.13) and

vout (1) = KT V C

1 tC1 (1), 1 + 1 1 tC2 (1). 1 + 2
is reset after clock signal

(3.18)

vC4 (1) = KT V C
After switch

(3.19)

sa2

opens, capacitor

C4

r2

goes high. The

next operation is comparing

vout (1)

with

vC4 (1)

through the bridge after switch

f

closes.

Again, assuming that charge redistribution between opens, then by the principle of charge conservation,

C3

and

C4

completes before switch

f

(C3 + C4 )vout (2) = C3 vout (1) + C4 vC4 (1),
where

(3.20)

vout (2)

is the second sample value of

vout .

Solving for

vout (2)

in (3.20) yields

vout (2) =

C3 C4 vout (1) + vC4 (1). C3 + C4 C3 + C4
29

(3.21)

Dene

3 =

C4 , then (3.21) can be written in the form C3

vout (2) =

1 1 vout (1) + vC4 (1). 1 + 3 1 + 3 -1

(3.22)

Substituting (3.18) and (3.19) into (3.22) gives

vout (2) = KT V C

1 1 + 1

1 1 tC1 (1) + 1 + 3 1 + 2

1 tC2 (1) . 1 + 3 - 1

(3.23)

Subtracting (3.18) from (3.23) and dening

vout (2) = vout (2) - vout (1) as the second vout (1) = vout (1) - vout (0) = vout (1))

sample value of the change in the output voltage (since gives

vout (2) = KT V C
Choosing

3 1 + 3
yields

1 1 tC2 (1) - tC1 (1) . 1 + 2 1 + 1

(3.24)

1 = 2 = 

vout (2) = KT V C

3 (1 + 3 )(1 + )

tC2 (1) - tC1 (1) .

(3.25)

Substituting (3.9) into (3.25) yields

vout (2) = -KT V C
where

3 (1 + 3 )(1 + )

Terr (0) , 2

(3.26)

Terr (0) is dened as the initial sample value of the dierence between the periods of vref .
Since

vosc

and

vout (2) = vout (1) + vout (2), vout (2) = vout (1) - KT V C

then from (3.26) we can write

3 Terr (0) . (1 + 3 )(1 + ) 2

(3.27)

Repeating this process for the second cycle, it can be shown that

vout (4) =

KT V C  3  tC1 (2) + tC1 (1) - Terr (1) + Terr (0) 1+ 1+ 2(1 + 3 ) 1+

,

(3.28)

and

vout (4) = vout (3) - KT V C
Continuing in this manner, we have

3 Terr (1) . (1 + 3 )(1 + ) 2

(3.29)

KT V C vout (2n) = 

n-1

3  tC1 (n - k ) - 2(1 + 3 ) k=0
k
30

n

 k-1 Terr (n - k ) ,
k=1

(3.30)

as the 2nth-sampled value of the output voltage, where and (3.29) we can write, in general,

=

 . Furthermore, from (3.27) 1+

vout (2n) = vout (2n - 1) - KT V C
for of

3 Terr (n - 1), 2(1 + 3 )(1 + ) vout (2n)

(3.31)

n  1. vout

Equation (3.29) represents the iterative form of

or rather the nal value

at the end of each cycle, whereas (3.31) represents the dierence-equation form of Equation (3.30) shows that

vout (2n).

vout (2n) will converge only if the two sums in (3.31) are tC1 3
and the second determines the

bounded, where the rst sum represents a sum of weighted values of

sum is a sum of the weighted period dierence. Furthermore, note that contribution that the sum of the error terms makes to the error term larger, then either

vout (2n).

To make the contribution of

3

must be made large and since

3 =

C4 , then this means that C3
and

C4

should be large or

C3

should be small. However, since

C1 = C3

C2 = C4 ,

then

adjusting

C3

or

C4

will invariably change

C1

and

C2 .

Consequently, the gain term

KT V C

will be split into two terms: capacitor pair

KT V C,1

for the capacitor pair

C1

and

C3 ,

and

KT V C,2

for the

C2

and

C4 .

In turn, this will prevent the direct measurement of the frequency

error. Therefore, to be able to measure the frequency error, we must have

C3 = C4

and thus

C1 = C2 = C3 = C4 = C .

Therefore,

3 = 1
k

so that (3.31) becomes

KT V C vout (2n) = 

n-1

1  tC1 (n - k ) - 4 k=0

n

 k-1 Terr (n - k ) ,
k=1

(3.32)

In order for the iFDD to be stable, we must have then

| |< 1.

Since

C1 = C2 = C3 = C4 ,  = 1/2
(3.32)

=1

so that

 = 1/2,

which ensures the stability of the iFDD. With

becomes

vout (2n) =

KT V C 2

n-1

k=0

1 2

k

tC1 (n - k ) -

1 4

n

k=1

1 2

k -1

Terr (n - k ) .

(3.33)

Equation (3.33) shows that the output voltage of the iFDD is proportional to the frequency error

Terr

(since

Terr  ferr ).

Indeed, (3.26) shows that

vout (2n)  Terr (n)

so that the change in the output voltage at the end of each cycle depends on the frequency error between

vosc

and

vref .

If

Terr (n) < 0 so that fosc > fref , then vout (2n) > 0 and viceTerr (n - k ) = 0

versa according to (3.26). Note that the second sum will converge when

k  N

for some

N  Z+ ,

which occurs when

fosc = fref .

31

3.2.3 Convergence
Note that in order for the two sums in (3.33) to converge, if the terms the rst sum are increasing then the terms

tC 1 (n - k ) in

Terr (n - k ) in the second sum must be increasing tC 1 (n - k ) in the rst sum are

as well, but from negative values. Similarly, when the terms decreasing, the terms

Terr (n - k )

in the second sum must be decreasing. Thus the terms

tC 1 (n - k )

and

Terr (n - k )

in the two sums given in (3.33) must be in-phase with each

other in order for (3.33) to be bounded. This can be better understood by writing (3.33) in vector form as

vout (2n) = a · (b + c),
where

(3.34)

a=

KT V C 1 1/2 · · · 1/2n-1 2

T

,

(3.35)

T

b = tC 1 (n) tC 1 (n - 1) · · · tC 1 (1) 1 Terr (n) Terr (n - 1) · · · Terr (1) 4

,

(3.36)

c=
where vectors and

T

,

(3.37)

b

and

c

represent the sample vectors for the sampled values of

tC 1 (n - k )

Terr (n - k ),

respectively. Expanding (3.34) yields

vout (2n) = a
where

b cos  + a

c cos .

(3.38)



and

 are the angles between vectors a and b, and a and c, respectively. =0
and

Comparing

(3.38) to (3.33) yields

 = ,

so that (3.39)

vout (2n) = a ( b - c ).
Therefore, steady-state. write Let

b

=

c

and

a

is in-phase with

b

 and 180 out-of-phase with

c

in

L  R+

be the steady-state value of

vout (2n),

then from (3.39) we can

b - c =
32

L . a

(3.40)

Squaring (3.40) yields

b
which can be written in the form

2

-2 b

c + c

2

=

L2 , a 2

(3.41)

(b - c) · (b - c) =
Expanding the left side of (3.42) gives

L2 . a 2

(3.42)

b
where

2

-2 b

c cos  + c b
and

2

=

L2 , a 2

(3.43)



is the angle between the vectors

c.

Comparing (3.41) to (3.43) shows that

=0

so that the vectors

b

and

c

are in-phase with each other in steady-state.

Therefore, the iFDD reaches a steady-state value only when the vectors are in-phase and the dierence between their magnitudes is given by (3.40).

b

and

c

The above

derivations agree with our earlier observation regarding the sums in (3.33). Consequently, if the terms then

tC 1 (n - k )

and

Terr (n - k )

in the two summations in (3.33) are out-of-phase,

vout (2n)

will not reach a steady-state value.

3.2.4 Eect of Duty-Cycle Variation
The previous derivations presented in Section 3.2.2 are based on the assumption that

vosc

and

vref

are both 50% duty-cycle waveforms. In practice, however, this may not occur

as one of the waveforms may have a 50% duty-cycle while the other waveform does not. Therefore, an analysis of the eect of duty-cycle variation is warranted. Let represent the duty-cycle factors for

dosc

and

dref

vosc

and

vref ,

respectively, dened by

dosc =

Tosc,H , Tosc Tref,H , Tref vosc
and

(3.44)

dref =
where

(3.45)

Tosc,H

and

Tref,H

represent the time duration for which

vref

are high, respec-

tively. Therefore, we can write

Tosc,H = dosc Tosc

and

Tref,H = dref Tref .

Following the same

order of operations presented in Section 3.2.2, we have

33

vC1 (1) =
after charging of between

I tC1 (1), C

(3.46)

C1 ,

where we have set

C1 =C2 =C3 =C4 =C .

Then after charge-sharing

C1

and

C3

we have,

vout (1) =
Similarly, for capacitors erations

I tC1 (1). 2C

(3.47)

C2

and

C4

we have for the charging and charge-sharing op-

vC2 (1) =

I tC2 (1), C I tC3 (1). 2C C3
and

(3.48)

vC4 (1) =
Next, after the clock signal so that

(3.49)

f

goes high, charge-sharing between

C4

occurs

vout (2) =

I (tC1 (1) + tC2 (1)) . 4C

(3.50)

Consequently, the change in the output voltage is

vout (2) = vout (2) - vout (1) =
But,

I (tC2 (1) - tC1 (1)) . 4C

(3.51)

tC1 (1) - tC2 (1) = dosc Tosc (1) - dref Tref .
Therefore, we can write

(3.52)

vout (2)

in the form

vout (2) =
However, since

I I tC1 (1) - (dosc Tosc (1) - dref Tref ) . 2C 4C
and

(3.53)

0 < dosc , dref < 1

dosc , dref  R+ ,

then we can write

34

dosc = 1 - dosc ,

(3.54)

dref = 1 - dref ,
where

(3.55)

dosc , dref  R+ . vout (2) =

Therefore, (3.53) becomes

I I tC1 (1) - Tosc (1) - dosc Tosc (1) - Tref + dref Tref . 2C 4C Terr = Tosc - Tref ,
then

(3.56)

However, since

vout (2) =
where

I I tC1 (1) - (Terr (0) - Tduty (0)) , 2C 4C
Continuing in this manner, it can be shown that

(3.57)

Tduty = dosc Tosc - dref Tref .
n-1

KT V C vout (2n) = 2

k=0

1 2

k

n

tC1 (n - k ) -
k=1

1 2

k-1

Terr (n - k ) Tduty (n - k ) - 2 2

,

(3.58)

where in the second summation the rsrt term is the period dierence and the second term is the duty-cycle dierence. In the case that

dosc = dref = 0.5,

(3.58) reduces to the 50%

duty-cycle case. Therefore, the iFDD can detect duty-cycle variations.

3.2.5 Maximum Frequency of Operation
The maximum frequency of operation of the iFDD is set by the widths of clocks and

sa1

rst1

or

sa2

and

rst2 ,

since their widths are identical. In particular,

fmax 
where

1 , 2(sa1 + rst1 ) sa1 
and

(3.59)

sa1

and

rst1
and

are the widths of clocks are set by the delay

rst1 ,

respectively. However, since the

widths of

sa1

rst1

in Fig.3.3, then

sa1 = rst1 = 

so that

fmax 
Therefore, a smaller

1 . 4

(3.60)



yields are larger frequency of operation. However, a smaller



requires a smaller capacitance in order for the charge-sharing operation between

C1 /C2

and

35

C3 /C4

and

C3

and

C4

to complete successfully. This would result in larger thermal noise

from the capacitors since the power of the thermal noise from a capacitor is given by

2 = vn
where

kT , C

(3.61)

k

is Boltzmann's constant and

T

is temperature in Kelvin's. Thus, a smaller capac-

itance results in larger

kT /C

noise, whereas a larger capacitance reduces it. Therefore, a

tradeo exists between choosing the size of the capacitors and the maximum frequency of operation.

3.3 Design of the FLL
To design the frequency-locked loop (FLL), rst a model of the iFDD must be obtained. Note that since the input signals to the iFDD are frequencies, then the VCO can be modelled as a constant gain block with a gain of

KV CO .

3.3.1 Model of the iFDD
To determine a model of the iFDD, consider (3.31) with two charge-sharing operations between

3 = 1,  = 1.

Since the

C1

and

C3

and

C3

and

C4

occur within one cycle of

the reference signal, then we can write (3.31) in the following form

vout (nTref )  vout (nTref - Tref ) + KiF DD f (nTref -  )
where

(3.62)

Tref

represents the time from the rst charge-sharing operation between

C1

and

C3

to the second charge-sharing operation between assumed that

C3

and

TV C C4 , KiF DD = - K , 8f 2 ref

and we have

2 fref fosc  fref

in simplifying (3.62). Therefore, performing the

Z -transform

on (3.62) yields the following transfer function of the iFDD

36

HiF DD (z ) 

KiF DD z - Vout (z )  f (z ) 1 - z - KiF DD  z - 1 z
gives

(3.63)

Since

z = esTref ,

then performing a Maclaurin series expansion on

z  = esTref = 1 + (Tref )s +
Since

(Tref )2 s2 + ···. 2

(3.64)

0 <  < 1,

then ignoring terms greater than second-order in (3.64) and substi-

tuting the result into (3.62) yields

HiF DD (s) 

KiF DD s Tref +
(Tref )2 s 2

. s = 0

(3.65)

Equation (3.65) shows that the iFDD has a pole at

and another pole at

s = -2/(Tref ).

The pole at the origin allows the iFDD to integrate the frequency error.

Indeed, the accumulation operation performed in (3.31) illustrates the integration performed by the iFDD. In addition, (3.31) shows that the iFDD behaves as a rst-order, low-pass IIR lter. To illustrate this, replace

z

in (3.63) with

z  = ej ,

then we have

HiF DD (ej ) 

KiF DD , ej - 1

(3.66)

from which we obtain the following magnitude and phase responses of the iFDD

HiF DD (ej ) 

|KiF DD | 1   , 1 - cos  2 sin  1 - cos 

(3.67)

HiF DD (ej )  - tan-1

.

(3.68)

Equation (3.67) shows that the magnitude response of the iFDD has poles that are located at

 = 0, 2k/

for

k  Z,

whereas (3.68) shows that the iFDD has a non-linear

37

phase delay. The magnitude and phase response of (3.67) and (3.68) shown in Fig.3.4 and Fig.3.5 demonstrate that the iFDD behaves as a low-pass IIR lter, thus conrming our earlier observation.

Figure 3.4:

Magnitude response of the iFDD with respect to normalized frequency.

Figure 3.5:

Phase response of the iFDD with respect to normalized frequency.

38

3.3.2 Model of the FLL
Fig.3.6 shows the model of the FLL in the discrete-time domain. Note that the VCO is modelled as a constant gain, as mentioned earlier. From Fig.3.6 and using the transfer function of the iFDD given by (3.65), then the open-loop transfer function of the FLL in the

s-domain, Hol (s),

is

Hol (s) 
where

K
(Tref )2 2 s 2

,

(3.69)

+ (Tref )s

K = KiF DD KV CO P M,

is the loop gain factor. From (3.69) it can be shown that the phase

margin,

of the open-loop system is given by

P M =  + tan-1



2 1 + K2 - 1

,

(3.70)

Figure 3.6:

Discrete-time model of the FLL.

From Fig.3.6 and (3.69), it can be shown that the closed-loop transfer function,

Hcl (s)  Fosc (s)/Fref (s),

is given by

2K/(Tref )2 Hcl (s)  2 . s + T2 s + 2K 2 ref (Tref )
Equation (3.71) can be written in standard second-order form as

(3.71)

Hcl (s) 
where

2 n , 2 s2 + 2n s + n

(3.72)

39

n =

2K , Tref 1 , 2K



(3.73)

=

(3.74)

are the natural frequency and damping factor of the closed-loop system, respectively. From (3.71), the closed-loop error transfer function,

He (s),

is given by

He (s) = 1 - Hcl (s) s (s + 2n )  2 . 2 s + 2n s + n

(3.75)

Therefore, by the nal value theorem, the steady-state frequency error when a unitstep in the reference frequency occurs is

ferr,ss = lim(sFerr (s))
s 0

(3.76)

= lim = 0.

s 0

s2

s (s + 2n ) 2 + 2n s + n

Thus the FLL has zero steady-state frequency error. From (3.70) and an optimal value of Since the value of

V CO K = - IK , 8Cf 2 ref

C

can be found.

However,

I

and

C

cannot be chosen independently.

C

eects both the gain and consequently the stability of the system as well

as the noise contributed by the iFDD, then

I

was xed at 100 nA to provide a low power

consumption, while still providing a large enough charging current for capacitors

C1

and

C2 .

Next, the VCO was designed to have a tuning range that at least covers 20% above and below

fref ,

which in our design is 1 MHz. Through simulations in SpectreRF, the gain of that met the requirement was found to be -8.2 MHz/V. Plots of equation

the VCO, (3.70) and

KV CO , C

versus

K

are shown in Fig.3.7 and Fig.3.8.

40

Figure 3.7:

Pot of phase margin (P M ) vs. loop gain factor, K .

Figure 3.8:

Plot of C vs. loop gain factor, K , with I = 100 nA.

From the plots in Fig.3.7 and Fig.3.8 we see that as decreases. where Thus the stability of the system degrades as

K

increases the phase margin

K

increases and since

K  1/C ,

C

is the value of the capacitor in the TVC, then decreasing

C

reduces the stability

of the system as seen in Fig.3.7. This also comes at the expense of increased thermal noise from the capacitors in the iFDD, according to (3.61). thermal noise can be achieved by making Therefore, good stability and low

C
41

large.

However, this comes at the expense

of an increased damping factor, Furthermore, increasing

,

and a longer transient response according to (3.74).

C

will increase the dynamic power consumption of the circuit, since

Pdynamic  C .
choose

To ensure good stability by providing large phase margin, from Fig.3.7 we

K

0.1, which corresponds to

C

1 pF from Fig.3.8.

3.3.3 Speed and Noise Considerations
From (3.18) and (3.19) we can see that the proportion of contributed to the sample-and-hold capacitors,

tC1

and

tC2

that is

C3

and

C4 , vout

can be increased by making and



(=1 =2 ) small. Doing so will increase the step-size of

vC4

and thus improve the

speed of the transient response of the FLL. Increasing the fraction of shared with

tC1

and

tC2

to be and

C3

and

C4

can be achieved by either increasing

C1

and

C2

or decreasing

C3

C4 .

However, increasing

C1

and

C2

will decrease

KT V C

and consequently result in a more and

over-damped transient response by reducing

K , whereas decreasing C3

C4

will not eect

the gain of the TVC. Therefore, the lock-time of the FLL can be made shorter by decreasing the size of the sample-and-hold capacitors

C3

and

C4 , without eecting the gain term KT V C .

This comes at the expense of degraded SNR at the output of the iFDD, since

SN R =
is the SNR for a sampling capacitor, where load and

(V 2 /2) C , kT V 2 /2

(3.77)

is the input signal power relative to a 1



C

is the value of the sampling capacitor. Since the noise from the output of the

iFDD is coupled to the VCO, then a reduced SNR at the output of the iFDD will subsequently degrade the spectrum of the VCO. Therefore, a tradeo exists between the lock-time of the FLL and the quality of the spectrum of the VCO around the desired frequency.

3.4 Chapter Summary
A new integrating frequency dierence detector (iFDD) that senses the frequency dierence between the local oscillator of the PWM and the input reference clock signal to generate an output voltage that is proportional to the frequency error between the oscillator

42

and reference clock was proposed. The iFDD utilizes a single current source to reduce the mismatch between its two integrating paths. A detailed analysis of the characteristics of The analysis demonstrated

the iFDD in the time and frequency domains was presented.

that the iFDD integrates the frequency error between a reference signal and the VCO. It was also shown that the iFDD is able to detect duty-cycle dierences between the reference signal and the VCO signal. Further analysis showed that a trade-o exists between the

maximum frequency of operation of the iFDD and thermal noise power generated by its capacitors. Additionally, it was shown that the iFDD can be modelled as a low-pass, IIR lter. Furthermore, the loop dynamics of the FLL were also investigated. It was found

that the FLL achieves zero steady-state frequency error. Finally, an investigation into the relationship between the lock-time of the FLL and the SNR of the iFDD demonstrated that the lock-time of the FLL can be improved at the expense of a degraded spectrum of the VCO around the desired frequency of operation.

43

Chapter 4
Results
4.1 Simulation Environment Set Up
To verify the results presented in this study and quantify the performance of the proposed iFDD, a FLL with the proposed iFDD as shown in Fig.3.3 in Chapter 3 was designed in IBM 0.13-µm, 1.2 V CMOS technology and analyzed using the simulator Spectre APS (Accelerated Parallel Simulator) from Cadence Design Systems (CDS) with BSIM4v4 device models and reltol set to 1e

-

2 to speed up the

simulator without sacricing accuracy. Metal-

insulator-metal capacitors (MIM-caps) were used for capacitors schematic of the iFDD is shown in Fig.4.1.

C1  C4 .

The transistor-level

Schematic of the iFDD. Transistor sizes are: WN 1,N 2 = 0.320 µm, WN 3-N 5 = 1 µm, WP 1,P 2 = 0.640 µm, WN 6-N 9 = 0.5 µm, WN 10-N 12 = 0.480 µm, WP 3,P 5 = 0.960 µm, WP 4,P 6 = 1.55 µm, WN 13-N 16 = 0.480 µm, WP 7-P 9 = 0.960 µm, WP 10 = 6 µm, LN 1-N 12,P 1,P 2,P 3,P 5 = 0.120 µm, LN 13-N 16 = 0.240 µm, and LP 4,P 6-P 10 = 0.480 µm.
Figure 4.1:

44

A low-swing cascode current mirror circuit is used to generate the current iFDD to ensure

I

for the

I

is constant across varying load conditions and so that the iFDD can NMOS transistors were used as the charge-sharing

be operated at a low power supply.

switches instead of transmission gates to (1) reduce clock feedthrough, (2) minimize the parasitic capacitance contributed by the transistors to the capacitors, and (3) to minimize the silicon area consumed by the iFDD. Transistors charge injection onto capacitors transistors

N 6 - N 9 are dummy switches to reduce sa1,sa2
and

C3

and

C4

when clock signals

f

are low. The

N3 - N5

are the charge-sharing switches, so they operate in the deep triode

region near steady-state. Therefore, their on-resistances in steady-state are given by

RON 

KN

W L

1 . (VGS - Vth,N )

(4.1)

Through simulations, the pulse-widths of the clock signals

sa1 , sa2 , rst1 , rst2 ,

and

f

that allowed capacitors

C1 and C3 and C2 and C4 (where all capacitors were set to 1 pF) to 
50

complete charge redistribution before the clock signals went to logic-0 was found to be

ns. Therefore, the time constant of the switches must be (50ns/5 =) 10 ns and the maximum on-resistance of the charge-redistribution switches is

RON,max

(50ns/1pF =) 10 k. Thus,

0 < RON  10k. Vth,N

From the previous inequality and (4.1) and using

KN

= 500

µA/V2  2.

and

= 0.36 V as obtained from DC simulations using SpectreRF, we have

W L

Using

minimum-length transistors of

L

= 120 nm, the minimum-width of the switches is

Wmin

= 240 nm. Therefore, to ensure a low on-resistance for the charge-redistribution switches throughout their operation, their widths were set to 1 the minimum channel length of 0.120

µm

and their lengths were all set to

µm,

so that

W L



8.3.

The logic control block (LCB) in Fig.3.3 in Chapter 3 used NAND2 and NAND3 logic gates to implement the rising-edge DFFs rather than the TSPC approach to lower their power consumption. The AND2 logic gates used to generate clock signals implemented using a low-skew design to help ensure that the clock signals

C1 C1

and and

C2

were

sa1 , and

C2

and

sa2

do not overlap. The inverters in the clock generator circuit were implemented

using minimum average delay sizing to reduce their delay.

45

A relaxation VCO with a pair of current-starved inverters, two comparators, and an SR-latch was used to generate

vosc .

The schematic of the VCO is shown in Fig.4.2. Capacitors

Cr

are tuning capacitors that allow easier tuning of the VCO tuning curve and were set to

1.75 pF to obtain the desired tuning curve of the VCO. The PMOS load transistor, used to give the required negative tuning curve of the VCO. The bias voltages, set 330 mV to operate the comparators, formed by transistors

P 7,

was

Vbias

were and

N3 - N4

and

P 3 - P 4,

N5 - N6

and

P 5 - P 6,

in subthreshold.

Schematic of the relaxation VCO that was used to generate vosc . Transistor sizes are: WN 1-N 6 = 0.350 µm, WP 1-P 7 = 0.700 µm, and LN 1-N 6,P 1-P 7 = 0.120 µm. The value of the tuning capacitors, Cr , was set 1.75 pF.
Figure 4.2:

The power supply was set to 0.5 V in our design to provide an ultra-low power consumption, while still allowing the VCO to operate at the required frequency of 1 MHz. A plot of the free-running VCO frequency versus

VDD

is shown in Fig.4.3.

This graph

shows that operating the VCO at a power supply of 0.5 V allows it to have a free-running frequency near 1 MHz. Consequently, this allows for the tuning capacitors, which further reduces power consumption from the VCO. A plot of the tuning curve of the VCO across all ve process corners is shown in Fig.4.4. From Fig.4.4 we see that the free-runnung frequency of the VCO varies signicantly across the , fs, sf, and ss process corners. Additionally, Fig.4.5 and Fig.4.6 show that the free-running frequency of the VCO can vary by

Cr ,

to be small

±20%

for a

±20 C

temperature change and

46

Figure 4.3:

Free-running frequency of VCO versus VDD .

by

±20%

for a

±15

mV change in

VDD .

Thus the free-running frequency of the VCO is very

sensitive to PVT variations, hence the need for frequency calibration.

Figure 4.4:

VCO tuning curve across tt, , fs, sf, and ss process corners.

4.2 Simulation Results
An open-loop test was performed on the iFDD to obtain the graph of

vout

versus

ferr

and demonstrate its linearity. Two 50% duty-cycle square-waves were used as input

signals to the iFDD. The frequency error,

ferr , was swept from -0.2 MHz to 0.2 MHz in 0.05
47

Figure 4.5:

Free-running VCO frequency  temperature relation.

Figure 4.6:

Free-running VCO frequency  VDD relation.

MHz steps. The frequency error was only swept in this range since the VCO free-running frequency can vary by as much as

±20% from

its desired frequency as seen from Fig.4.5 and

Fig.4.3. Since the targeted frequency in our design is 1 MHz, then MHz around 1 MHz. A plot of

±20%

corresponds

±0.2

vout

versus

ferr

is shown in Fig.4.7, which shows that

the simulation results agree well with the theory. However, a slight deviation between the simulation and theoretical results exists because it was found that the current source that was implemented in Cadence had a value of 95 nA, as opposed to the 100 nA used in the

48

calculations. This would result in a slightly smaller gain obtained from simulations, which is evident in Fig.4.7.

Figure 4.7:

vout  ferr relation.

Transient simulations of the FLL were performed using a 1 MHz, square-wave signal as the reference clock that is provided by the reader as a timing signal for calibation. The FLL was simulated across all process corners, as well as fast and slow corners to test its stability in the presence of PVT variations. In addition, the duty-cycle of the reference

signal was varied from 38%, 50%, and 63% to test the FLL's ability to detect and operate correctly in the presence of duty-cycle variations from the reference signal. Additionally, the FLL was simulated for dierent



(=1 =2 ) values to examine their eect on the lock-time

of the FLL and the spectrum of the VCO. The results are shown in Fig.4.8, Fig.4.9, Fig.4.10, Fig.4.11, Fig.4.12, Fig.4.13, Fig.4.14, Fig,4.15, and Fig.4.16. The plot of the transient response of

vout

shown in Fig.4.8 illustrates that the output

voltage consists of two steps within any cycle of operation, where the rst, larger step is from the

tC1

terms and the second, smaller step is the corrective term from

Terr .

This

agrees well with our earlier observations. The transient response of

fosc

to a 1 MHz, 50%

duty-cycle frequency step shown in Fig.4.9 demonstrates that the VCO locks to the 1 MHz reference signal within 14

µs.

The transient response of

ferr

in Fig.4.10 shows that there is

zero steady-state frequency error, which agrees with our earlier prediction in (3.76). Fig.4.11

49

shows that the FLL can still lock to the 1 MHz clock signal even if the signal does not have a 50% duty-cycle, as predicted from our earlier analysis. The transient response of

fosc

to an input frequency step of 1 MHz across the , fs, sf, and ss process corners shown Finally, the

in Fig.4.12 demonstrates the stability of the FLL across all process corners. transient response of

fosc

at fast and slow corners shown in Fig.4.13 validates the stability

of the FLL in the presence of PVT variations. Table 4.1 summarizes the power consumption of each block of the FLL across all process corners. The results from this table show that (1) the total power consumption of the FLL is

< 1.7 µW

across all process corners, (2) the iFDD consumes the least amount

of power of all the blocks, and (3) the VCO consumes more than 50% of the total power of the FLL. Therefore, a much lower power consumption can be achieved by using a VCO with ultra-low power consumption. Fig.4.14 shows that the lock-time of the FLL is shortened by making



smaller, as predicted earlier. In particular, the lock-time (within was found to be 8.76

±1%

of

fref )

for

={0.25, 0.5, 1}

µs,

9.27

µs,

and 13.53

µs,

respectively. This result is

further illustrated in Fig.4.16, which shows the relationship between the lock-time of the FLL and

.

However, decreasing

 comes at the cost of a degraded spectrum for the VCO, as seen  decreases, the magnitude of the second-order harmonic

in Fig.4.15. Fig.4.15 shows that as

increases and the spectrum of the VCO around 1 MHz gets wider, which implies that the power of the VCO signal at 1 MHz is becoming less concentrated at that desired frequency. This result also agrees with our earlier observation in Section 3.3.3, since decreasing the SNR at the output capacitor

 reduces

C3 .

Table 4.2 summarizes the lock-time simulation results

across all process corners, which shows that the FLL can achieve lock with the 1 MHz reference signal within 20

µs

across all process corners.

Table 4.3 compares this work to

previous state-of-the-art designs for clock recovery and calibration techniques for PWMs. Note that the works presented in the table are all from post-fabrication measurements. From Table 4.3 we see that the frequency accuracy of our work meets the minimum requirement of

±2.5% for the frequency variation of the backscattered data, as required by EPC C1G2 UHF
RIFD protocols [3]. In addition, the results presented in Table 4.3 show that our proposed frequency calibration technique achieves the best calibration time and frequency accuracy compared to previous works. Furthermore, since the FLL can operate at a low supply voltage,

50

then it can be implemented in PWMs that operate at large read-to-transponder distances, since such PWMs typically operate at power supplies < 1 V [2].

Figure 4.8: Control voltage of relaxation oscillator in response to an input frequency step of 1 MHz with 50% duty-cycle.

Figure 4.9: Transient response of the frequency of the relaxation oscillator, fosc , with a 1 MHz, 50% duty-cycle reference clock input.

51

Figure 4.10:

Transient response of the frequency error, ferr , in response to an input frequency step of 1 MHz with 50% duty-cycle.

Figure 4.11: Transient response of fosc to an input frequency step of 1 MHz with duty-cycles of 38% and 63%.

Table 4.1:

Simulation Results of Power Consumption of FLL (Unit: µW).
Block LCB iFDD VCO Total tt 0.482 0.0909 0.6955 1.27  0.5384 0.2695 0.8396 1.651 fs 0.5247 0.1286 0.7637 1.42 sf 0.4621 0.0739 0.6763 1.214 ss 0.4698 0.0235 0.6638 1.16

52

Figure 4.12:

Transient response of fosc to an input frequency step of 1 MHz with 50% dutycycle across , fs, sf, and ss process corners.

Figure 4.13:

Transient response of fosc to an input frequency step of 1 MHz with 50% dutycycle at fast (VDD = 535 mV, T = -25 C,  process) and slow (VDD = 465 mV, T = 85 C, ss process) corners.

4.3 Chapter Summary
A frequency calibration technique that allows for accurate tuning of the frequency of a local oscillator in a PWM using an ultra-low power, fast-locking frequency-locked (FLL) that is embedded with an integrating frequency dierence detector (iFDD) has been proposed. A relaxation oscillator with a current-starved inverter pair with a PMOS load was employed as the VCO of the FLL to realize the required negative tuning curve of the VCO for stable FLL operation. The power consumption of the proposed FLL was eectively reduced by

53

Figure 4.14:

Transient response of fosc to an input frequency step of 1 MHz with 50% dutycycle with  = {0.25, 0.5, 1}. Lock-time (within ±1% of fref ) for ={0.25, 0.5, 1}: 8.76 µs, 9.27 µs, and 13.53 µs, respectively

Figure 4.15:

Spectrum of VCO for  = {0.25, 0.5, 1}.

Table 4.2:

Simulation Results of Lock-time of FLL to a 1 MHz, 50% Duty-Cycle Reference Signal with  = 1.
Process Corner tt  fs sf ss Lock-time (µs) (±1%) 13.53 13.18 12.42 20.74 13.22

54

Figure 4.16:

Simulated lock-time (within ±1% of fref ) versus .

Table 4.3:

Comparison with Prior Clock Recovery and Clock Calibration Technigues for PWMs .
VDD
(V) Clock freq. (MHz) 3.5 902-928 2.2 6.78 2.56 1 1 Power (µW) 7 4.12 31 17 2 0.96 1.27 Clock accuracy 164 ps peak-to-peak jitter 0.91% 7.5 <0.01% Calib. time <200µs <16 PIE <100µs <21µs 2 0.430 1.2 Lock range (MHz) 525 0.5 and 1 1.1 1.5 3.3 1 1.2 0.5

Ref. [15] [16] [17] [18] [13] [19]

1 1 1 1 2 2 2

Tech. 0.18µm 0.18µm 0.35µm 0.35µm 0.18µm 0.18µm 0.13µm

%

-3.2% to +1.2%

This work

1 Clock recovery method 2 Clock calibration method * Results from previous works are from post-fabrication measurements `

operating the LCB, iFDD, and relaxation oscillator in subthreshold. The proposed FLL was implemented in IBM 0.13-µm, 1.2 V CMOS technology with BSIM4v4 device models. The theoretical results of the proposed FLL were evaluated using simulation results obtained from Spectre APS in CDS with reltol set to 1e

-

2.

The proposed FLL could operate at a power

supply as low as 0.5 V and consumed a total power of 1.27

µW, while achieving a calibration <
0.01% in the lock-state, thus for the clock in the EPC

<9µs, a lock range of 1.2 MHz, and a frequency variation meeting the stringent frequency accuracy requirement of C1G2 UHF RFID protocol. Of the 1.27

±2.5%

µW,

the proposed iFDD consumed only 90 nW,

accounting for only 7% of the total power. The FLL also exhibits excellent robustness in the presence of PVT variations and has zero steady-state frequency error. Compared to previous

55

clock generation techniques in [13, 15, 16, 17, 18, 19], our proposed frequency calibration techniques achieves the fastest calibation time and one of the best frequency accuracies after calibration, thus easily meeting the calibration time and frequency variation requirements for the system clock in the EPC C1G2 UHF RFID protocol.

56

Chapter 5
Conclusions and Future Work
5.1 Summary
This thesis contributed to the area of remote frequency calibration of passive wireless microsystems. The focus of the design was on minimizing the power consumption of the

system clock of passive wireless microsystems, while achieving a fast calibration time, a high frequency accuracy of the the system clock for a passive transponder, and being able to operate at low supply voltages. The design proposed in this thesis is summarized as follows. A remote frequency calibration technique that allows a passive wireless mircrosystem to tune the frequency of its local oscillator to a required frequency using a low power frequency-locked-loop (FLL) has been proposed. A new integrating frequency dierence

detector (iFDD) that uses a switched-capacitor network with two integrating paths and a single current source to minimize mismatch between the two arms, consequently reducing mismatch-induced frequency error. The iFDD integrates the frequency error between a reference signal provided by the reader and the local oscillator of the passive wireless microsystem, thereby yielding zero steady-state frequency error. The power consumption of the proposed FLL is eectively reduced by operating the frequency detector and the local oscillator in subthreshold. A detailed analysis of the time-domain and frequency-domain behaviour of

the iFDD was presented, as well as an investigation of the loop dynamics of the FLL. The theoretical conclusions of the proposed FLL were assessed using simulation results obtained from Spectre APS in CDS. The proposed FLL operated at a supply voltage of 0.5 V and achieved a low power consumption of 1.27

µW, while achieving a calibration time of 13.53 µs,

57

a lock range of 1.2 MHz, thus easily covering the

±20%

variation in the center frequency of

the local oscillator due to PVT eects, and a frequency variation of <0.01% in the lock state. The FLL was also found to be robust againt PVT variations. Since the proposed FLL could operate at a supply voltage of 0.5 V, while also achieving low power consumption, then it is capable of being implemented in PWMs with large reader-to-transponder distances. The proposed frequency calibration technique also achieved the fastest calibation times and best frequency accuracy in comparison to the works in [13, 15, 16, 17, 18, 19]. Therefore, our

proposed frequency calibration technique improved on the calibation time and the frequency accuracy of the system clock of PWMs.

5.2 Future Work
The design introduced in this thesis was aimed at further advancing the creation of low power passive wireless microsystems that can operate at large reading distances, while achieving very fast calibration times and very high frequency accuracy. The direction of

future work in this area will be toward the development of smaller passive wireless microsystems that can achieve ultra-low power consumption and larger reading distances, while still being able to provide all of the necessary sensor measurements, storage, and signal processing required of them regardless of their surrounding environment. This is especially true with the concurrent developement of the internet-of-things (IoT). One of the most signicant barriers to the deployment of UHF RFID transponders in IoT and other areas that have dense reader environments, is the requirement of an ultra-low power system clock with very ne frequency resolution and fast calibration time. The remote frequency calibration technique presented in this thesis can be implemented as a fundamental unit in a passive wireless microsystem that operates at a large reader-to-transponder distance with ultra-low power, but still requires a system clock that has excellent frequency accuracy, can be calibrated quickly, and is robust against variations in the supply voltage and temperature of the PWM that result from changes in its surrounding environment, which will be critical for RFID systems that are to be used in applications such as supply-chain management, environmental monitoring, and certain areas in healthcare.

58

Bibliography
[1] F. Yuan, 2010. [2] K. Finkenzeller, [3]

CMOS Circuits for Passive Wireless Microsystems. RFID handbook.
Wiley & Sons, 2003.

New York: Springer,

EPC radio-frequency identity protocols class-1 generation-2 UHF RFID protocol for communications at 860 MHz - 960 MHz, version 1.0.9. EPCglobal Inc., 2005. IEEE Communications Magazine,
vol. 45, no. 9, pp. 1117, 2007.

[4] V. Chawla and D. Ha,  An overview of passive RFID,

[5] N. Soltani,

Radio-Frequency Power Harvest and Remote Frequency Calibration of Passive Wireless Microsystems. MASc. Thesis, Ryerson University, 2010.
16.7

[6] U. Karthaus and M. Fischer,  Fully integrated passive UHF RFID transponder IC with

µW

minimum RF input power,

IEEE J. Solid-State Circuits,

vol. 38, no. 10, pp.

16021608, October 2003. [7] C. Sauer, M. Stanacevic, G. Cauwenberghs, and N. Thakor,  Power harvesting and telemetry in CMOS for implanted devices, vol. 52, no. 12, pp. 2605  2613, December 2005. [8] M. Ghovanloo and S. Atluri,  A wide-band power-ecient inductive wireless link for implantable microelectronic devices using multiple carriers,

IEEE Trans. on Circuits and Systems I.,

and Systems I., vol. 54, no. 10, pp. 22112221, October 2007.
arterial ow characterization, 678685, June 2006.

IEEE Trans. on Circuits

[9] A.DeHennis and K. Wise,  A fully integrated multi-site pressure sensor for wireless

J. Microelectromechanical Systems,

vol. 15, no. 3, pp.

[10] F. Kocer and M. Flynn,  An RF-powered, wireless CMOS temperature sensor,

Sensors J., vol. 6, no. 3, pp. 557564, June 2006.
for patient monitoring, in 50715074.

IEEE

[11] W. Jeon, J. Melngailis, and R. Newcomb,  Disposable CMOS passive RFID transponder

Proc. IEEE Int'l Symp. Circuits and Systems, May 2006, pp.

[12] K. Opasjumruskit, T. Thanthipwan, O. Sathusen, P. Sirinamarattana, P. Gadmanee, E. Pootarapan, N. Wongkomet, A. Thanachayanont, and M. Thamsirianunt,  Selfpowered wireless temperature sensors exploit RFID technology,

puting, vol. 5, no. 1, pp. 5461, February 2006.
59

IEEE Pervasive Com-

[13] C. Chan,

K. Pun,

K. Leung,

J. Guo,

L. Lincoln,

and C. Choy,

 A low-power

continuously-calibrated clock recovery circuit for UHF RFID IC class-1 generation-2 transponders,

IEEE J. Solid-State Circuits, vol. 45, no. 3, pp. 587599, March 2010.

[14] R. Dhas,  RFID Forecasts, Players and Opportunities, 2017-2027, www.idtechex.com/ research/reports/rd-forecasts-players-and-opportunities-2017-2027-000546.asp, accessed: 2017-08-30. [15] L. Leung and H. Luong,  A 7 RFID EPC G2 tags, in 2017,

Proc. European Solid-State Circuits Conf., 2007, pp. 412415.

µW

clock generator in 0.18

µm

CMOS for passive UHF

[16] C. Ma, X. Wu, C. Zhang, and Z. Wang,  A low-power RF front-end of passive UHF RFID transponder, in 7376.

Proc. IEEE Asia Pacic Conf. Circuits and Systems, 2008, pp.

[17] J. Lee and B. Lee,  A long-range UHF-band passive RFID tag IC based on high-Q design approach, July 2009. [18] B. Fan, Y. Dai, X. Zhang, and Y. Lu,  Low power clock recovery circuit for passive HF RFID tag, 2009. [19] N. Soltani and F. Yuan, Non-harmonic injection-locked phase-locked loops with applications in remote frequency calibration of passive wireless transponders,

IEEE Trans. on Industrial Electronics, vol. 56, no. 7, pp. 23082316,

Analog Integrated Circuits and Signal Processing,

vol. 59, pp. 207214,

on Circuits and Systems I., vol. 57, no. 12, pp. 23812393, September 2010.
frequency-to-voltage converter: Design and implementation,

IEEE Trans.

[20] A. Djemouai, M. A. Sawan, and M. Slamani, New frequency-locked loop based on cmos

Systems II., vol. 48, no. 5, pp. 441449, 2001.

IEEE Trans. Circuits and

[21] H. T. Bui and Y. Savaria, Design of a high-speed dierential frequency-to-voltage converter and its application in a 5-ghz frequency-locked loop,

and Systems I., vol. 55, no. 3, pp. 766774, 2008.
Gen-2 RFID systems, in 1428.

IEEE Trans. Circuits

[22] M. Mohaisen, H. Yoon, and K. Chang,  Radio transmission performance of EPCglobal

Proc. Conf. Advanced Comm. Tech., February 2008, pp. 1423

[23] U. Kaiser and W. Steinhagen,  A low-power transponder IC for high-performance identication systems, 1995. [24] F. Marraccini, G. D. Vita, S. Pascoli, and G. Iannaccone,  Low-voltage nanopower clock generator for RFID applications,

IEEE J. Solid-State Circuits,

vol. 30, no. 3, pp. 306310, March

Microelectronics J., vol. 39, pp. 17361739, 2008.

[25] H. Lee and S. Mohammadi,  A subthreshold low phase noise CMOS LC VCO for ultra low power applications, in

IEEE Microwave and Wireless Componens Letters., vol. 17,
60

no. 11, Nov. 2007, pp. 796798.

[26] N. Cho, S. Song, S. Kim, S. Kim, and H. Yoo,  A 5.1

µW UHF RFID tag chip integrated

with sensors for wireless environmental monitoring, in

cuit Conf., Grenoble, France, 2005, pp. 279282.

Proc. European Solid-State Cir-

2 [27] N. Cho, S. Song, J. Lee, S. Kim, S. Kim, and H. Yoo,  A 8-µW 0.3-mm RF-powered
transponder with temperature sensor for wireless environmental monitoring, in

Int'l Symp. Circuits and Systems, no. 5, May 2005, pp. 47634766.
using Schottky diodes in standard CMOS technology, in

Proc.

[28] N. Tran, B. Lee, and J. Lee,  Development of long-range UHF-band RFID tag chip

Integrated Circuits Symp., 2007, pp. 281284.

Proc. IEEE Radio Frequency

[29] H. Nakamoto, D. Yamazaki, T. Yamamoto, H. Kurata, S. Yamada, K. Miksida, T. Ninomiya, T. Ohkawa, S. Masui, and K. Gotoh,  A passive RFID RF identication CMOS tag IC using ferroelectric RAM in 0.35-µm technology, vol. 42, no. 1, pp. 101110, Jan. 2007. [30] V. Pillai, H. Heinrich, D. Dieska, P. Nikitin, R. Martinez, and K. Rao,  An ultra-lowpower long range battery/passive RFID tag for UHF and microwave,

IEEE J. Solid-State Circuits,

Circuits and Systems I., vol. 54, no. 7, pp. 15001512, July 2007.
mode EPC Gen-2 UHF RFID transponder in 1.08

IEEE Trans. on

[31] V. Naja, M. Jenabi, S. Mohammadi, A. Fotowat-Ahmady, and M. Marvasti,  A dual-

Conf. Electronics, Circuits and Systems, 2008, pp. 11351138.

µm

CMOS, in

Proc. IEEE Int'l

61

