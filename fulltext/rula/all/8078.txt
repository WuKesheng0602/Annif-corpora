PROTOCOL ENHANCEMENTS AND PERFORMANCE ANALYSIS OF WiFi NETWORKS by M. Zulfiker Ali M.A.Sc. in Electrical and Computer Engineering, Ryerson University, Toronto, Canada, 2013 B.A.Sc. in Electrical & Electronic Engineering, Bangladesh University of Engineering & Technology Dhaka, Bangladesh, 1995 A dissertation presented to Ryerson University in partial fulfillment of the requirements for the degree of Doctor of Philosophy in the program of Computer Science Toronto, Ontario, Canada, 2018 c M. Zulfiker Ali 2018

AUTHOR'S DECLARATION FOR ELECTRONIC SUBMISSION OF A DISSERTATION I hereby declare that I am the sole author of this dissertation. This is a true copy of the dissertation, including any required final revisions, as accepted by my examiners. I authorize Ryerson University to lend this dissertation to other institutions or individuals for the purpose of scholarly research. I further authorize Ryerson University to reproduce this dissertation by photocopying or by other means, in total or in part, at the request of other institutions or individuals for the purpose of scholarly research. I understand that my dissertation may be made electronically available to the public.

iii

Abstract
PROTOCOL ENHANCEMENTS AND PERFORMANCE ANALYSIS OF WiFi NETWORKS Doctor of Philosophy, 2018 M. Zulfiker Ali Computer Science Ryerson University The 802.11ac version of the popular IEEE 802.11 protocol aims to boost performance by increasing the channel bandwidth and allowing simultaneous transmission to multiple clients in the downlink direction. This dissertation presents an innovative approach of performance evaluation of downlink multi-user multiple input multiple output (DL-MUMIMO) technique for differentiated quality of service (QoS) based traffic categories in IEEE 802.11ac protocol. We propose a novel analytical model based on discrete Markov chain (DMC) and E-limited M/G/1 queuing model to evaluate the performance improvements of multi-user transmission opportunity (MU-TXOP) sharing in DL-MU-MIMO under non-saturated load and non-ideal channel condition. We also evaluate MU-TXOP sharing probabilities among different QoS nodes to assess the performance improvement of different traffic categories. In this dissertation, we propose an Access Point controlled MAC protocol (A-MAC) that enables simultaneous transmissions from multiple stations (STA) in uplink to eliminate under utilization of network resources in uplink transmission due to single user communication. The protocol uses enhanced distributed channel access (EDCA) technique to initiate multi-user transmission and orthogonal frequency division multiple access (OFDMA) method to transmit multiple Ready-To-Send (RTS) messages simultaneously. The proposed v

Abstract

protocol also introduces explicit channel sounding technique by using dedicated OFDM subcarrier blocks for each user. We evaluate the performance of the proposed protocol using a noble analytical model and validate the performance metrics by extensive simulation in different traffic conditions. In this dissertation we also propose the increase of carrier sensing threshold (CSTH) of nodes during association with access point (AP) to mitigate collision probability due to hidden nodes during uplink transmission and validate our proposal through extensive simulation. Finally, we propose a noble analytical model to evaluate the performance of restricted access window (RAW) mechanism of IEEE 802.11ah as the MAC layer protocol for internet of things (IoT) network. We evaluate detailed performance metrics of non-QoS IoT network and investigate the feasibility of using RAW mechanism to support differentiated QoS based heterogeneous IoT network.

vi

Acknowledgements
There are many people to whom I owe credit for this thesis. Without the support and encouragement of these wonderful people it would not be possible to finish this work. I would like to express my deep appreciation to my supervisor, Dr. Jelena Mi si´ c for accepting me as her PhD student and providing her consistent guidance, insightful discussions and patient encouragement throughout my research and thesis writing. I would like to thank Dr. Vojislav B. Mi si´ c who greatly inspired me by his excitement, vision, and creativity. Without their continual support and thoughtful mentoring, many of the ideas in this thesis would never have come to fruition. I would also like to appreciate my thesis committee, Dr. Isaac Woungang, Dr. Vojislav B. Mi si´ c and Dr. Lian Zhao from Ryerson University and Dr. Dongmei Zhao, from McMaster University for taking the time and making the effort to review this thesis and provide me with their insightful comments. Besides, I am also grateful to my colleagues in the Lab and all my friends at Ryerson University for their help, support and encouragement during my study. There is a person without whom, I am certain, I never would have completed this work. She is my wife, Shahin, who always has belief in me and never stops encouraging me. I cannot imagine I could pursue and complete my journey without her support and sacrifice.

vii

To my wife for her support and encouragement.

ix

Contents
Author's Declaration Abstract . . . . . . . Acknowledgements . Dedication . . . . . . List of Tables . . . . List of Figures . . . . 1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . iii . v . vii . ix . xv . xvii 1 4 5 6 7 7 9 9 10 11 12 12 14 16 17 17 18 19 19 21 21 21 22 22

Introduction 1.1 IEEE 802.11ac Protocol . . . . . . . . . . . . . . . . . 1.1.1 Deployment Scenario . . . . . . . . . . . . . . 1.1.2 IEEE 802.11ac Network . . . . . . . . . . . . 1.1.3 Physical Layer Enhancement of IEEE 802.11ac Wider RF bandwidth . . . . . . . . . . . . . . More Spatial Streams . . . . . . . . . . . . . . 1.1.4 MAC Layer Enhancement . . . . . . . . . . . MU-MIMO . . . . . . . . . . . . . . . . . . . Frame Aggregation . . . . . . . . . . . . . . . Power-save enhancement . . . . . . . . . . . . Coexistence . . . . . . . . . . . . . . . . . . . 1.1.5 The concept of transmit opportunity (TXOP) . 1.1.6 Rules for TXOP sharing . . . . . . . . . . . . 1.1.7 Transmission acknowledgements . . . . . . . . 1.2 Important Aspects of IEEE 802.11ax Protocol . . . . . 1.2.1 HE PHY layer . . . . . . . . . . . . . . . . . 1.2.2 Trigger frame . . . . . . . . . . . . . . . . . . 1.2.3 HE Frame format . . . . . . . . . . . . . . . . 1.2.4 Channel Sounding . . . . . . . . . . . . . . . 1.2.5 Coexistence . . . . . . . . . . . . . . . . . . . 1.2.6 Multi-User Transmission . . . . . . . . . . . . MU DL Transmission . . . . . . . . . . . . . MU UL Transmission . . . . . . . . . . . . . xi

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . . . . . . . . . .

Contents

1.3

1.4 1.5 1.6 1.7 1.8 2

1.2.7 UL OFDMA Random Access . . . . . . . . . Features of IEEE 802.11ah . . . . . . . . . . . . . . . 1.3.1 PHY layer . . . . . . . . . . . . . . . . . . . 1.3.2 MAC Layer . . . . . . . . . . . . . . . . . . . 1.3.3 RAW Scheme of IEEE 802.11ah MAC . . . . Major Issues and Challenges of IEEE 802.11 Protocol . Motivation . . . . . . . . . . . . . . . . . . . . . . . . Objectives . . . . . . . . . . . . . . . . . . . . . . . . Major Contributions . . . . . . . . . . . . . . . . . . . Thesis Organization . . . . . . . . . . . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

. . . . . . . . . .

23 23 24 24 25 28 30 32 34 36 38 38 43 44 47 48 49

Related Work 2.1 Performance modeling of downlink MU transmission 2.2 Evaluation of TXOP sharing probabilities . . . . . . 2.3 MU uplink access techniques . . . . . . . . . . . . . 2.4 Hidden Node problem . . . . . . . . . . . . . . . . . 2.5 Performance evaluation of IEEE 802.11ah . . . . . . 2.6 Chapter Summary . . . . . . . . . . . . . . . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

. . . . . .

3

Performance analysis of MU- TXOP sharing in IEEE 802.11ac 50 3.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51 3.2 Modeling of MU-TXOP . . . . . . . . . . . . . . . . . . . . . . . . . . . 54 3.3 Modeling the backoff process . . . . . . . . . . . . . . . . . . . . . . . . . 61 3.3.1 Sum of the probabilities of the freezing block states: . . . . . . . . 63 AC3 : . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63 AC2 : . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65 3.3.2 PGF for the duration of TXOP allocation . . . . . . . . . . . . . . 70 3.3.3 PGF for the duration of access to the medium . . . . . . . . . . . . 75 3.3.4 PGF for the duration of unsuccessful bandwidth reservation . . . . 75 3.3.5 PGF for the duration of successful access to the medium during Ar period . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76 3.3.6 PGF for time spent in the freezing countdown process of ACk in no loop condition . . . . . . . . . . . . . . . . . . . . . . . . . . . 76 3.3.7 Backoff counter suppression probability of ACk due to medium busy 80 3.4 Queuing model of traffic category k . . . . . . . . . . . . . . . . . . . . . 86 3.5 Markov chain model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 106 3.5.1 Sum of the probabilities of states in Markov chain . . . . . . . . . 109 3.5.2 Stability condition, throughput and waiting time . . . . . . . . . . 116 3.6 Results and Discussion . . . . . . . . . . . . . . . . . . . . . . . . . . . . 118 3.7 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129

xii

Contents

4

Uplink Access Protocol in IEEE 802.11ac 4.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.2 Proposed A-MAC Protocol . . . . . . . . . . . . . . . . . . . 4.3 Analytical Model . . . . . . . . . . . . . . . . . . . . . . . . 4.3.1 Backoff Model . . . . . . . . . . . . . . . . . . . . . 4.3.2 TXOP Sharing probability . . . . . . . . . . . . . . . 4.3.3 TXOP Duration . . . . . . . . . . . . . . . . . . . . . 4.3.4 Duration of bandwidth reservation . . . . . . . . . . . 4.3.5 Impact of hidden nodes . . . . . . . . . . . . . . . . . 4.3.6 Queuing model . . . . . . . . . . . . . . . . . . . . . 4.3.7 Markov Chain Model . . . . . . . . . . . . . . . . . . 4.3.8 Throughput Calculation . . . . . . . . . . . . . . . . 4.4 Numerical Results and Discussion . . . . . . . . . . . . . . . 4.5 Bridging the gap between IEEE 802.11ac and IEEE 802.11ax . 4.6 Improving resource utilization . . . . . . . . . . . . . . . . . 4.7 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . Impact of hidden nodes on uplink transmission in IEEE neous network 5.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . 5.2 Uplink transmission in IEEE 802.11ax protocol . . . . 5.3 Impact of hidden nodes . . . . . . . . . . . . . . . . . 5.4 Modeling Hidden Nodes . . . . . . . . . . . . . . . . 5.5 Possible approach to eliminate hidden node problem . 5.6 Simulation Result and Discussion . . . . . . . . . . . 5.7 Chapter Summary . . . . . . . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

. . . . . . . . . . . . . . .

130 131 134 138 140 140 144 145 146 148 152 155 157 170 173 175

5

802.11ax heteroge. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176 177 178 179 181 184 186 189

6

Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism 190 6.1 Introduction . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191 6.2 RAW Scheme of IEEE 802.11ah MAC . . . . . . . . . . . . . . . . . . . . 193 6.3 Analytical Modeling of RAW Scheme . . . . . . . . . . . . . . . . . . . . 194 6.3.1 PGF for bandwidth reservation duration . . . . . . . . . . . . . . . 200 6.3.2 PGF for backoff duration . . . . . . . . . . . . . . . . . . . . . . 203 6.3.3 Probability of entering into delay block . . . . . . . . . . . . . . . 205 6.3.4 Queuing model . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207 6.3.5 Markov chain model for an access category . . . . . . . . . . . . . 212 6.3.6 Sum of the probabilities of states in Markov chain . . . . . . . . . 213 6.4 Results and Discussion . . . . . . . . . . . . . . . . . . . . . . . . . . . . 215 6.5 Chapter Summary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 224 Conclusion xiii 226

7

Contents

Appendix A Abbreviations and Symbols 229 A.1 Abbreviations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 229 A.2 Symbols and Corresponding Descriptions . . . . . . . . . . . . . . . . . . 232 Bibliography 236

xiv

List of Tables
1.1 1.2 1.3 1.4 3.1 3.2 3.3 4.1 6.1 OFDM subcarrier for different mode of operation of IEEE 802.11ac protocol 9 Physical Characteristic of IEEE 802.11ac . . . . . . . . . . . . . . . . . . 10 Summary of MAC enhancements in IEEE 802.11ac . . . . . . . . . . . . . 14 The illustration of main contributions in this thesis. . . . . . . . . . . . . . 35 Transmission matrix for packets in two directions . . . . . . . . . . . . . . 71 Parameters for analytical model of IEEE 802.11ac protocol . . . . . . . . . 119 Throughput enhancement due to MU-TXOP. . . . . . . . . . . . . . . . . . 127 Parameters used for performance evaluation of A-MAC. . . . . . . . . . . 159 Parameters for analytical model of IEEE 802.11ah protocol . . . . . . . . . 216

xv

List of Figures
1.1 1.2 1.3 1.4 1.5 1.6 1.7 1.8 1.9 1.10 3.1 3.2 3.3 3.4 3.5 3.6 3.7 3.8 3.9 3.10 3.11 3.12 3.13 4.1 4.2 4.3 4.4 4.5 IEEE 802.11ac Network (Source:internet) . . . . . . . . . . . IEEE 802.11ac band [1] . . . . . . . . . . . . . . . . . . . . . IEEE 802.11ac channelization for 80MHz band [2] . . . . . . IEEE 802.11ac PPDU frame format [3] . . . . . . . . . . . . The DL transmission of MU-MIMO [4] . . . . . . . . . . . . TXOP sharing and PPDU construction [5] . . . . . . . . . . . RU and leftover tone allocation for 80MHz (Adopted from [6]) Trigger frame format (Adopted from [7]) . . . . . . . . . . . . PPDU format in IEEE 802.11ax (Adopted from [8]) . . . . . . Restricted Access Window (adopted from [9]). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7 8 8 12 15 16 18 19 20 25 56 64 87 90 120 121 122 123 124 125 126 127 128 134 134 135 144

EDCA channel prioritized access (adopted from [10]) . . . . . . . . . . Basic block of the Markov chain model . . . . . . . . . . . . . . . . . Markov Chain for ACk . . . . . . . . . . . . . . . . . . . . . . . . . . Timing diagram of queuing model . . . . . . . . . . . . . . . . . . . . Stability criteria and TXOP sharing probability. . . . . . . . . . . . . . Idle probability and backoff time . . . . . . . . . . . . . . . . . . . . . Standard Deviation and skewness of backoff time . . . . . . . . . . . . Waiting time and medium access time . . . . . . . . . . . . . . . . . . Probability that buffer is empty after zero-th backoff . . . . . . . . . . Successful transmission and medium access probability . . . . . . . . Throughput at different load conditions. . . . . . . . . . . . . . . . . . Average queue length and transmitted MPDU in service time . . . . . . Probability that buffer is empty after TXOP and packet drop probability Channel Sounding by AP . . . . . . . . . . . . . . . . . . . . . . Multi-STA transmission in A-MAC enabled network . . . . . . . Single STA transmission . . . . . . . . . . . . . . . . . . . . . . Timing diagram of queuing model . . . . . . . . . . . . . . . . . Comparison of backoff time between A-MAC and IEEE 802.11ac form traffic condition. . . . . . . . . . . . . . . . . . . . . . . . xvii

. . . . . . . . . . . . . . . . in uni. . . .

. 158

List of Figures

4.6 4.7 4.8 4.9 4.10 4.11 4.12

Backoff time of A-MAC in varying traffic conditions (N = 24). . . . . . Medium access probability of a STA (k )(N = 24). . . . . . . . . . . . . Network throughput and efficiency of A-MAC protocol. . . . . . . . . . . Comparison of analytical model with simulation results for A-MAC. . . . . Comparison of simulation results of A-MAC with IEEE 802.11ac protocol. Collision probability and network throughput in presence of hidden node. . Average queue length before the start of TXOP in non-uniform load condition (N = 24). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.13 Saturation point metrics of the network (Equal number of high and low priority packets). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4.14 Mass probability functions of primary RTS, secondary RTS and MU-TXOP sharing (Nsum = 24,  = 40 packets/sec). . . . . . . . . . . . . . . . . . . 4.15 Trigger enabled Multi-STA transmission in coexistant network . . . . . . . 5.1 5.2 5.3 5.4 5.5 6.1 6.2 6.3 6.4 6.5 6.6 6.7 6.8 6.9 6.10 6.11 6.12 6.13 6.14 EDCA channel access technique. . . . . . . . . . . . . BSS and hidden node. . . . . . . . . . . . . . . . . . . Simulation result of uplink throughput. . . . . . . . . . 3GPP indoor femto pathloss model. . . . . . . . . . . . Impact of CSTH and packet size on collision probability. Restricted Access Window (adopted from [9]). Differentiated QoS access (adopted from [11]). Discrete Time Markov Chain of RAW scheme. State transition of delay block. . . . . . . . . . Timing diagram for queuing model. . . . . . . Backoff Time. . . . . . . . . . . . . . . . . . Probability of a node being idle. . . . . . . . . Queue size before start of TXOP. . . . . . . . Collision probability of PS-Poll. . . . . . . . . Packet retransmission probability. . . . . . . . Successful transmission probability. . . . . . . Stability criteria of a node. . . . . . . . . . . . Per STA throughput. . . . . . . . . . . . . . . Network Throughput. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

160 161 162 164 165 166 167 168 169 172 179 181 187 188 188 193 197 201 202 208 217 219 220 221 222 222 223 224 224

xviii

Chapter 1 Introduction
IEEE 802.11 is an amazingly successful, cost effective and most widely deployed networking technology. Since its inception in 1997, the protocol has gone through periodic amendments. The successive amendments focus on increasing data rates while keeping backward compatibility. In pursuit of Gigabit Wireless Communication, the consortium of industry leaders formed Wireless Gigabit Alliance (WiGig) to define a unified architecture of communication over the bands of 2.4, 5 and 60GHz [12]. The IEEE 802.11ac task group was formed in 2008 to make standardized modifications to both PHY and MAC layer of 802.11 standard to enable: · Multi-station throughput of at least 1 Gbps, · Single link throughput of at least 500 Mbps, · Operation below 6GHz carrier frequency excluding 2.4GHz band, and · Co-existence with legacy IEEE 802.11 devices operating in unlicensed 5GHz band.

1

Chapter 1: Introduction

The Gigabit solution in the 5GHz band emerged as 802.11ac amendment and achieved final ratification at the end of 2013. The protocol is a set of physical and MAC layer enhancements keeping in mind the high throughput requirement for video under 6GHz band. Now it has become the de-facto standard for 5GHz band wireless devices like smart phones and laptops. Rapid growth of diverse and dense deployment environments in corporate office, outdoor hotspot, dense residential apartments and stadiums requires increased density of individual stations (STAs) and access points (APs). These environments are commonly characterized by hidden terminal problems, increased interference from the nearby WLANs, frequent collisions and lower channel utilization, all of which tend to degrade the performance of the existing IEEE 802.11ac protocol. As the result, the most recent efforts to address ever increasing user expectations and requirements, a task group known as TGax was formed in 2013 to define standardized modifications to PHY and MAC layers of IEEE 802.11 protocol that enable at least four times improvement in per-STA throughput over other versions of the protocol such as IEEE 802.11ac [5] while maintaining or improving the power efficiency [13][14]. Earlier versions of the IEEE 802.11 protocol, such as IEEE 802.11ac, have focused mainly on traditional indoor application scenarios. The new IEEE 802.11ax amendment emphasizes dense deployment environments where high speed traffic will suffer from increased interference and collision due to high density of APs and STAs in the vicinity. In this case, simple changes in protocol parameters that characterized some of the earlier amendments would not suffice, on account of the heterogeneous nature of network traffic which necessitates more radical changes in the protocol while trying to maintain backward compatibility and minimize the degradation of quality of service for

2

Chapter 1: Introduction

older, non-High Efficiency (HE) enabled devices. Task Group AX (TGax) aims at developing IEEE 802.11ax protocol to provide enhanced throughput and power efficiency in dense WiFi deployment environment by 2019. For the first time, the concepts of resource unit (RU) allocation and OFDMA access technique are introduced in the draft specification. The resulting shift from EDCA access to point coordination access technique aims at improving network utilization and power efficiency. The new specification addresses the spectral inefficiency in existing transmission by including schedule-based multi-user multiple-input, multiple-output (MU-MIMO) and multi-user orthogonal frequency division multiple access (MU-OFDMA) techniques to facilitate multi-user uplink transmission for HE devices. The ever increasing need for ubiquitous connectivity for virtually anything from anywhere at anytime gives rise to the Internet of Things (IoT) where the number of IoT devices are expected to reach 50 billion by 2020 [15]. Providing basic network connectivity and access layer support to such a huge number of end points is extremely challenging. From the system perspective, it is obvious that existing centralized architectures will no longer be able to accommodate the communications among such a huge number of entities. Due to inherent non-optimality, the existing contention based IEEE 802.11ac Medium Access Control (MAC) protocol is expected to face performance degradation in terms of throughput [16]. The delay in accessing channel in such a large network of nodes is not only impractical but also inefficient for energy constrained nodes. A great number of IoT applications require low data rate connection between low-power long distance devices or items. Enabling and optimizing wireless communications for such scenarios was the motive for developing the wireless technologies adapted for a large number of low data rate devices

3

Chapter 1: Introduction

with a much longer transmission range for both indoor and outdoor environments [17]. From these considerations, IEEE 802.11ah amendment was ratified in 2016 which made modifications to the PHY and MAC layer of the existing IEEE 802.11ac standard to operate in sub 1GHz license-exempt band and expected to be the most promising technology for IoT connectivity that supports up to 8192 nodes. In this chapter we discuss the technical aspects of IEEE 802.11ac/ax/ah protocol. The remain of the chapter is organized as follows: In Section 1.1 we discuss IEEE 802.11ac protocol, in Section 1.2 we highlight the important aspects of IEEE 802.11ax protocol followed by IEEE 802.11ah protocol in Section 1.3. Major issues and challenges of IEEE 802.11 protocol are discussed in Section 1.4 followed by motivation behind the research work in Section 1.5. The objective of this research and major contributions are discussed in Section 1.6 and Section 1.7 respectively. The organization of the thesis is discussed in Section 1.8.

1.1

IEEE 802.11ac Protocol

The very high throughput (VHT) IEEE 802.11ac amendment provides a three-fold increase in performance by [5]: (a) Increasing channel bandwidth to 80MHz contiguous and 80+80MHz non-contiguous, (b) Adding highly efficient 256-QAM and 5/6 code rate encoding technique, and (c) Introducing downlink multi-user MIMO to allow simultaneous transmission to multiple stations.

4

Chapter 1: Introduction

Most of the features in IEEE 802.11ac are enhancement of IEEE 802.11n protocol: increasing the RF bandwidth, adding the high level 256-QAM coding, and adding more spatial streams [2]. The basic idea behind the enhancement is that theoretically, by doubling the RF bandwidth or increasing the spatial streams, the aggregate throughput can be enhanced proportionally. However, a pioneering transmission technique known as Down Link Multi User Multiple Input Multiple Output (DL-MU-MIMO) is an additional feature where an access point (AP) can simultaneously transmit to multiple clients in the down-link transmission.

1.1.1

Deployment Scenario

The very high throughput measured at the service access point of MAC layer makes the technology attractive to a variety of high end data service applications like desktop storage and display, projection of TV, in-room gaming, streaming of video, intra vehicle communication, wireless networking, remote medical assistance, multi-media mesh backhaul, pointto-point backhaul, public safety mesh and manufacturing floor automation. The protocol has enormously influenced the cellular industry where the demand for on-line streaming, IPTV and video in smart phones and tablets is driving most of the internet data. The other attractive applications include transfer of large files and increasing demand for reliable wireless backhaul communication for a sustainable period of time. Although IEEE 802.11ac protocol was developed keeping in mind the consumers and indoor applications, the capability enhancement will have a positive impact on the coexistence scenario of LTE and WiFi. The cell bandwidth will increase allowing greater throughput per client for an AP or alternatively more clients can be served by a single AP

5

Chapter 1: Introduction

in a dense environment keeping the throughput same. Due to introduction of large APs with eight antennas, the MIMO and beam forming will be more prevalent than ever and will increase the reliability of the wireless connection.

1.1.2

IEEE 802.11ac Network

A typical IEEE 802.11ac wireless network is shown in Figure 1.1. The network can have one or more access points (AP) and multiple of non AP clients (STA). The AP is a part of stationary network whereas the STAs can either be stationary or mobile. It is understood that the availability of power, processing capability and number of antennas in AP will significantly be higher than that of the STAs. The communication between an AP and a STA will in general be point-to-point. However, the introduction of the revolutionary MU-MIMO technique in IEEE 802.11ac amendment has paved the way for point-to-multipoint communication. Both AP and client (STA) contend for medium access and at any instant of time either an AP or a STA can gain access to the medium. Simultaneous engagement of antennas for uplink and downlink transmission is not possible. This means the STAs are not allowed to transmit to the APs in the uplink while the AP is engaged in a downlink transmission even though some of the antennas are still idle. The standard has recommended multiple streams to single user (SU-MIMO) or multiple users (MU-MIMO). Transmission of streams to multiple users is supported only in downlink (DL-MU-MIMO). AP monitors traffic for different STAs to explore the opportunity for DL-MU-MIMO.

6

Chapter 1: Introduction

Figure 1.1: IEEE 802.11ac Network (Source:internet)

1.1.3

Physical Layer Enhancement of IEEE 802.11ac

In general IEEE 802.11ac is seen as a lateral expansion of IEEE 802.11n amendment. The enhanced features of the amendment are listed below:

Wider RF bandwidth The 40MHz band of IEEE 802.11n is extended to a mandatory 80MHz band and an optional 160MHz contiguous or non contiguous band in IEEE 802.11ac protocol. This allows a prorated increase in system throughput. The bandwidth has been split into channels of 5MHz in non-contiguous spectrum. The channelization is based on 20MHz bandwidth in order to make the protocol backward compatible with IEEE 802.11 legacy protocol. 80MHz bandwidth will be a popular choice for the enterprise customers whereas 160MHz

7

Chapter 1: Introduction

Figure 1.2: IEEE 802.11ac band [1]

Figure 1.3: IEEE 802.11ac channelization for 80MHz band [2] channel will primarily be restricted to the home environment. Figure 1.2 shows the channelization of the available bandwidth of IEEE 802.11ac protocol: Each 5MHz band is assigned a channel number such that four consecutive channels make a 20MHz channel which is the primary subchannel in the amendment. All management related frames are transmitted in the primary subchannel. It is also used for carrier sensing and backward compatibility. Only the primary sub-channel performs full clear channel assessment (CCA). A 40MHz channel comprises of two 20MHz sub-channels of which one is primary 20MHz channel and other is secondary 20MHz channel. Similarly, a 80MHz channel has one 40MHz primary sub-channel that contain the primary 20MHz channel and one 40MHz secondary sub-channel. Figure 1.3 shows the channelization in IEEE 802.11 ac protocol. The channels are further split into a number of OFDM subcarriers as shown in the Table. 1.1.

8

Chapter 1: Introduction

Table 1.1: OFDM subcarrier for different mode of operation of IEEE 802.11ac protocol Mode Total Subcarrier Usable subcarrier 20MHz HT mode 56 52 40MHz HT mode 114 108 242 234 80MHz HT mode 484 468 80+80MHz or 160MHz

More Spatial Streams IEEE 802.11ac protocol mandates one spatial stream to provide an alternative cost effective solution to increase PHY layer data rate as compared to 40MHz band with two spatial streams [18]. The performance of a client increases proportionally with the increase of spatial stream provided the multi-path diversity can be utilized constructively. The protocol supports the use of maximum 8 spatial streams. The power and processing capability of the APs will grow with the addition of antennas and the clients will attain the capability of processing multiple streams simultaneously. This divergence will create the opportunity for MU-MIMO where AP will be capable to transmitting multiple streams to a single client or multiple clients simultaneously. The maximum streams between a pair of communicating devices is limited by the number of antennas of either the transmitter or the receiver. The summary of the physical layer enhancement is shown in Table 1.2.

1.1.4

MAC Layer Enhancement

Some of the significant MAC layer enhancements are listed below:

9

Chapter 1: Introduction

Table 1.2: Physical Characteristic of IEEE 802.11ac Feature Channel width Modulation and Coding Mandatory 20, 40, 80MHz MCS 0-7 (BPSK, QPSK, 16QAM, 64-QAM, 1/2, 2/3, 3/4,5/6) 1 Long (800ns) Optional 80+80, 160MHz MCS 8-9 (QAM-256, 3/4, 5/6) 2-8 Short (400ns) Beam forming sounding upto 4 streams per client with same MCS

Spatial stream Guard Interval Feedback Multi user MIMO

MU-MIMO The most significant throughput gain in IEEE 802.11ac amendment comes from the MU-MIMO spatial diversity multiple access (SDMA). Instead of beaming multiple spatial streams between a pair of AP and client, AP is able to use spatial diversity to send frames to multiple clients at a given instant. It is assumed that AP has more power, processing capability and antennas than the client. When AP gets the access to the wireless medium and has number of packets buffered for transmission to different clients, AP is allowed to share the TXOP time to transmit frames simultaneously to different clients. The concept of beam forming feedback is introduced in the amendment for DL-MU-MIMO. MU-MIMO throughput is sensitive to the interference among signals directed to different clients and the accuracy of beamforming feedback frames. MU-MIMO utilizes OFDM technique where an AP transmits to different clients using non-overlapping subsets of OFDM sub-carriers. Some of the constrains of MU-MIMO technique are as follows: · Total number of spatial streams must not exceed the number of available antennas in AP. 10

Chapter 1: Introduction

· No more than 4 STAs can be targeted at any instance. · No client can use more than 4 streams. · All streams in DL-MU-MIMO transmission must use same MCS.

Frame Aggregation AP and clients contend for the medium for every frame to be transmitted. This results in contention, collision on the medium and backoff delay. This time could otherwise be utilized for frame transmission and thereby increase channel utilization. With MAC layer aggregation, the frames queued for transmission can be combined to a single frame of bigger size to reduce the number of contentions for the medium. This increases the chance of scheduling a large number of packets at each transmission, hence improving the system throughput at the cost of a higher delay [19]. Two mechanisms for the aggregation are: · Aggregated MSDU: where frames from higher layer are combined and processed by the MAC layer as a single entity. The A-MSDU has a smaller header overhead than the case without aggregation. The original frames become the subframes of AMSDU. The technique is applicable for the frames destined to the same destination. · Aggregated MPDU: where the frames from higher layer are concatenated into an aggregated MAC frame. A-MPDU must be used with block acknowledgement function. It is possible to combine MPDUs and A-MSDUs in an aggregated A-MPDU thereby enhancing performance further.

11

Chapter 1: Introduction

Figure 1.4: IEEE 802.11ac PPDU frame format [3] Power-save enhancement Considering that many of the 802.11ac devices will rely on battery power, a power saving mode known as VHT TXOP power save has been introduced in the amendment. TXOP scheduling is done by AP at the beginning of TXOP period. A new field called partial association ID (partial AID) or Group ID for MU -MIMO is added to the preamble. If a particular client comes to know from the ID that the transmit opportunity is not intended for the client, it can switch-off its radio circuit for the rest of the TXOP period.

Coexistence Since IEEE 802.11ac protocol operates at 5GHz band, only 802.11a and 802.11n amendments are compatible for coexistence. The most important feature for compatibility is the addition of multipart RF header that uses 802.11a and 802.11n modulation. Non 802.11ac devices can read this preamble and identify that the channel will be occupied for the specified period of time and thus avoid simultaneous transmission with VHT device. In IEEE 802.11ac amendment, RTS/CTS handshake mechanism is modified to support static or dynamic bandwidth reservation [1]. Upon clear channel assessment (CCA), RTS and CTS frames are transmitted using non-HT duplicate PPDU [18]. IEEE 802.11ac PPDU frame format is shown in the Figure 1.4. The legacy preamble contains legacy short training field, 12

Chapter 1: Introduction

long training field and signal field. The legacy fields are transmitted in each underlying 20MHz channels simultaneously at the same time slot using OFDM carriers. The L-STF and L-LTF allow detection of signal by receiver, perform frequency offset estimation and timing synchronization. SIG carries frame length information to set network allocation vector (NAV) of the receiver. VHT preamble consists of STF, LTF and SIG sequences modulated in the particular channel being used by the AP. VHT-SIG-A field consists of two OFDM symbols: first symbol is modulated using BPSK to allow 802.11n devices and the second symbol is modulated with 90 degree rotated BPSK to allow the 802.11ac devices to listen to the channel. The information contained in the bits of the symbols are channel bandwidth, number of spatial streams, MCS information etc. VHT-SIG-A field is replicated in each underlying 20-MHz channels. Legacy preamble and VHT-SIG-A is always for single stream and transmitted omnidirectionally while the rest of the VHT preamble is for multi-stream and precoded for DL-MU-MIMO [20]. VHT-STF field is used primarily for MIMO data power computation to reset automatic gain control (AGC) due to the variation of power between the single stream and multi stream portion of the packet. One VHT-LTF field per spatial stream allows the receiver to calculate V matrix of the channel for MIMO algorithm. The second VHT -SIG-B includes frame length other information about the distribution of spatial streams if MU-MIMO is to be used. Table 1.3 shows the summary of MAC enhancements in IEEE 802.11ac amendment. Previous IEEE 802.11 amendments were focused to increase per-link data rate and supported only one-to-one communication between a pair of STAs. Therefore, network throughput was limited by per-link data rate. Since the physical layer measures are reaching

13

Chapter 1: Introduction

Table 1.3: Summary of MAC enhancements in IEEE 802.11ac Plane Enhancement Management VHT capability management Enhanced protection control TXOP power save Compressed V matrix feedback Down-link MU-MIMO Data Enhanced Aggregate MSDU Enhanced Aggregate MPDU

the theoretical limit, IEEE 802.11ac adopted down link multi-user multiple-input-multipleoutput (DL-MU-MIMO) to increase the network throughput. DL-MU-MIMO allows AP to transmit multiple frames to different destinations using multiple spatial streams. Figure 1.5 shows a typical operation of DL-MU-MIMO where AP transmits to three destinations simultaneously in the downlink and receives block acknowledge (BA) sequentially in the uplink.

1.1.5

The concept of transmit opportunity (TXOP)

TXOP provides contention free access to the medium for a specific access category (AC) for a period of time bounded by TXOP limit. The use of TXOP provides voice and video frames an uninterrupted access to the medium. During TXOP period only one background (BK) or best effort (BE) packet is allowed to be transmitted while multiple frames can be transmitted for voice (VO) and video (VI) traffic preventing the low priority STAs from occupying the channel for an unnecessary long period of time [21]. In IEEE 802.11ac amendment, each EDCA Function (EDCAF) of an AP contends for EDCA TXOP and once wining, the EDCAF becomes the owner of that TXOP. The access category (AC) corresponding to that EDCAF is known as primary AC and other ACs become the secondary 14

Chapter 1: Introduction

Figure 1.5: The DL transmission of MU-MIMO [4] ACs . When the primary AC takes the decision to share the TXOP with secondary ACs, the TXOP is known as MU-TXOP. Destinations are classified into two categories: primary destinations targeted by the primary AC and secondary destinations targeted by secondary ACs. IEEE 802.11ac has three modes of EDCA TXOP [4]: · Initiation of TXOP - when EDCA rule permits access to the medium, · Sharing of TXOP - when primary AC decides to share the TXOP with the secondary ACs and frames from secondary AC queues may be transmitted even if the backoff counters for the secondary ACs are not zero, and

15

Chapter 1: Introduction

Figure 1.6: TXOP sharing and PPDU construction [5] · Multiple frame transmission within TXOP - when EDCAF retains the right to access the medium. In many cases, the internal competition for TXOP can be resolved by sharing the TXOP with the secondary ACs. MU-TXOP is illustrated in Figure 1.6.

1.1.6

Rules for TXOP sharing

The rules for TXOP sharing are summarized below [5]: · Primary AC decides which secondary ACs to share the TXOP with. · If the primary AC has enough data to send to multiple destinations, it should use TXOP to send its own data first before sharing the TXOP with the secondary ACs. 16

Chapter 1: Introduction

· The selection of secondary ACs and destinations is implementation specific. · Transmitting data frames from different ACs of an AP to the same STA is not allowed. · The duration of TXOP time is determined by the TXOP limit of primary AC. · MU-TXOP is released as soon as the primary AC finishes its transmission even though there are frames in the queues of secondary ACs.

1.1.7

Transmission acknowledgements

Since uplink MU-MIMO is not available in IEEE 802.11ac, receiving STAs need to arrange the transmission of ACK or BA in a way that avoids collision. Two techniques are used for sending ACK: · Schedule-based technique where the ACK transmission time is pre-scheduled by AP and sent to the receiver in the DL frame, and · Poll-based technique where AP polls ACK from the receiver by sending block acknowledgement request (BAR) one by one. IEEE 802.11ac has chosen poll based approach as the default acknowledge approach for DL-MU-MIMO transmission.

1.2

Important Aspects of IEEE 802.11ax Protocol

Some of the most important aspects in which the draft IEEE 802.11ax HE specification differs from the IEEE 802.11ac specification [5] are listed below. 17

Chapter 1: Introduction

Figure 1.7: RU and leftover tone allocation for 80MHz (Adopted from [6])

1.2.1

HE PHY layer

IEEE 802.11ax uses the same 160MHz bandwidth as does IEEE 802.11ac. However, the 52 OFDM subcarriers in each 20MHz sub-band prescribed by IEEE 802.11ac are replaced by 256 tones in the HE specification. A total of 242 tones are actually used; the remaining ones, referred to as leftover tones, serve to reduce leakage from adjacent RUs and decrease interference. In order to avoid the frequency selective interference for full bandwidth operation as well as to allow finer granularity in bandwidth allocation, the tones are grouped in smaller RUs such that a given STA can be allocated a bandwidth as low as 2.5MHz through judicious RU allocation. This smaller granularity of RUs mandates OFDMA operation in both uplink and downlink for HE devices. The permissible RU allocations include 26, 52, 106, 242, 484, 2*484, 996 or 2*996 tones. A possible allocation of RUs and leftover tones within an 80MHz band is shown in Fig. 1.7. The protocol allows multiple RU allocation for one STA and supports MU-MIMO only when allocation size is at least 106 tones. The support of DL MU-MIMO is mandatory when AP supports at least four spatial streams [22]. The data symbol duration is extended from 3.2 µs to 12.8 µs to improve robustness in outdoor transmission and to reduce inter-symbol interference. The maximum number of users spatially multiplexed in uplink or downlink MU-MIMO transmission is limited to eight and the maximum number of spatial streams for each user in a MU-MIMO RU is less than or equal to four. 18

Chapter 1: Introduction

Figure 1.8: Trigger frame format (Adopted from [7]) In addition to the existing modulation and coding schemes (MCS) 0-9, optional MCS 10 (1024-QAM with 3/4 coding) and MCS 11 (1024-QAM with 5/6 coding) boost the number of bits per symbol. The support of MCS 0 to 7 is mandatory for all uplink and downlink transmissions whereas MCS 8 to 11 is optional.

1.2.2

Trigger frame

Uplink transmission in the draft specification will be controlled by AP. The amendment defines a new control frame format that carries information to identify the STAs that will transmit uplink multi-user PHY layer protocol data units (PPDU) and allocate resources for STAs. This frame is known as Trigger frame and its format is given in Fig. 1.8. Common information field in the trigger carries information like trigger type, Legacy signal (L-SIG) length of UL MU PPDU, Tx power of AP and spatial reuse field which are common to all STAs. Per User Info field includes MCS, coding type, RU allocation information, spatial stream (SS) allocation, dual carrier modulation (DCM) and user identifier field. Multi-user block acknowledgement request (MU-BAR) and multi-user request-to-send (MU-RTS) are the variants of trigger frame and are differentiated by trigger type subfield.

1.2.3

HE Frame format

The legacy preamble containing legacy short and long training field (L-STF, L-LTF) and L-SIG is preceded by HE preamble and is duplicated in each 20MHz band to ensure 19

Chapter 1: Introduction

Figure 1.9: PPDU format in IEEE 802.11ax (Adopted from [8]) backward compatibility. Three preamble formats are defined in 802.11ax [23] [8]: SU format / UL trigger based format, MU format and Extended range SU format. HE preamble contains HE-SIG-A and HE-SIG-B as shown in Fig.1.9. HE-SIG-A is duplicated on each 20MHz after the legacy preamble to indicate common control information. A compression bit is carried in the HE-SIG-A MU format to differentiate full BW MU-MIMO from OFDMA MU PPDU. HE-SIG-B symbols, present only in MU packets, has a common field followed by a user specific field, where the common field contains Resource Unit (RU) allocation for all of the designated STAs to receive the PPDU in corresponding bandwidth. The user specific field consists of multiple sub-fields where one or multiple of those sub-fields are for each designated receiving STA [24]. The user specific subfields of HE-SIG-B include: i) STAID, ii) number of SS, Tx beamforming, MCS and DCM for SU allocation, and iii) spatial Configuration Fields, MCS and DCM for MU resource allocation.

20

Chapter 1: Introduction

1.2.4

Channel Sounding

Periodic channel sounding is required by AP in the downlink to allocate RUs for OFDMA and MU-MIMO operation. Channel sounding is explicit for DL transmission but for uplink transmission the sounding is rather implicit and assumes a reciprocal channel condition. The amendment defines a mechanism to enable multiplexing of CSI feedback frames from multiple stations using UL MU mode [25]. Channel sounding initiated by an HE AP includes a trigger frame after the NDP frame in order to allocate resources for UL MU mode of CSI feedback frame.

1.2.5

Coexistence

HE WLAN will be deployed in a dense environment where overlapping of BSS will introduce inter-BSS interference. Each HE AP supports a number of virtual BSS and each HE STA supports multiple BSSID. IEEE 802.11ax specification adds some features to improve the network performance in overlapping BSS. When a frame is detected in a STA, the STA determines whether the frame is an inter-BSS frame or an intra-BSS frame either by looking at the BSS color code or MAC address at frame header. The power detection level of inter-BSS frame is set higher than the minimum threshold power required for intraBSS frame. Each STA maintains two NAVs, one for intra-BSS frame and another for inter-BSS frame [26].

1.2.6

Multi-User Transmission

MU features in IEEE 802.11ax include MU-OFDMA and MU-MIMO in both uplink and downlink transmission. The specification defines a cascading TXOP structure allowing 21

Chapter 1: Introduction

alternating DL and UL MU PPDUs. DL/UL OFDMA can multiplex unicast data, control and management frames in frequency domain and DL/UL MU-MIMO can multiplex unicast frames in spatial domain [27]. In the following subsections we separately discuss the uplink and downlink transmissions.

MU DL Transmission In addition to the existing DL MU-MIMO in IEEE 802.11ac protocol, 802.11ax has incorporated DL MU-OFDMA which reuse the RUs through spatial multiplexing. The transmission of PPDU for all the STAs in a DL MU transmission (MIMO, OFDMA) is synchronous and ends at the same time. The payload within a DL MU PPDU may contain a trigger frame that carries ACK or BA request from the recipient STAs. A DL MU transmission is successful if the AP receives the response frame correctly from at least one STA indicated by the trigger information in the DL MU transmission. The specification allows multiplexing different types of traffic data (TID) in a single PHY layer service data unit (PSDU) for both UL and DL transmission.

MU UL Transmission An UL MU transmission is initiated as an immediate response to a trigger frame sent by the AP. Trigger frame allocates resources for the intending STAs. In response to the trigger frame, when the AP receives MPDU correctly from at least one STA, the frame exchange initiated by the trigger frame is considered successful. The amendment defines a mechanism for multiplexing DL acknowledgments sent in response to UL MU transmission. Before responding to the trigger frame a STA performs physical (ED) as well as virtual

22

Chapter 1: Introduction

(NAV) carrier sensing if trigger frame indicates to do so before UL MU transmission [28].

1.2.7

UL OFDMA Random Access

In addition to the existing EDCA based access technique, the protocol defines UL OFDMA random access procedure where a trigger frame initiates and allocates resources for UL OFDMA random access. A STA chooses a random OFDMA backoff (OBO) value in the range from zero to OFDMA Contention window and decreases its OBO by the number of RUs assigned in trigger frame. When OBO of any STA becomes zero, it randomly selects any one of the assigned RUs and transmits its frame [29]. The Beacon frame indicates the target transmission time of trigger frame.

1.3

Features of IEEE 802.11ah

IEEE 802.11ah is also building on a network topology that comprises of Access Points (APs) and stations (STAs). The capacity requirements for the new amendment are strict and an AP is expected to support up to 8191 stations for certain use cases. An AP and its respective associated STA(s) form a Basic Service Set (BSS). Different BSSs can be set up around same or different carrier frequencies which are determined by the regulations in the region of operation. Additionally, these BSSs will operate on channel bandwidths that range from 1MHz to 16MHz depending on the channelization policy of the respective country. The APs primarily broadcast management frames (e.g. beacon frames) which help the STAs to operate and remain synchronized within the BSS. APs are also in charge of setting up associations with the STAs entering the BSS, as well as serve data traffic to STAs on

23

Chapter 1: Introduction

the downlink and respond with ACKs for incoming uplink traffic. Consequently, because of their key role in the BSS, the APs will generally need to transmit more frequently than an individual STA [30].

1.3.1

PHY layer

IEEE 802.11ah technology is characterized by longer transmission range, extended power saving features and support of increased number of stations (STA) that can be associated with one Access Point (AP). The Orthogonal Frequency Division Multiplexing (OFDM) Physical layer (PHY) operates in license-exempt bands below 1GHz. The IEEE 802.11ah standard provides support for transmission range of up to one kilo-meter, as well as data rates greater than 100 Kbps. The PHY layer is the down-clocked version of IEEE 802.11ac protocol which supports 1MHz, 2MHz, 4MHz, 8MHz and 16MHz channel bandwidths. The narrower bandwidths, 1MHz and 2MHz, are intended primarily for IoT use cases requiring lower data volumes. In addition to the existing Modulation and Coding Schemes (MCS), MCS 10 is defined to enable the protocol to extend the transmission range.

1.3.2

MAC Layer

IEEE 802.11ah standard proposes several MAC enhancements to the legacy standards. Among other enhancements to the legacy standards, the amendment has introduced short headers, short beacons and Null Data Packet (NDP) frames in the standard to reduce the control overhead. The length of the Traffic Indication Map (TIM) bitmap is increased from 2008 bits to 8192 bits and a new hierarchical structure for association ID (AID) assignment 24

Chapter 1: Introduction

Figure 1.10: Restricted Access Window (adopted from [9]). is developed as well. One of the new MAC features introduced by TGah is the Subchannel Selective Transmission (SST) mechanism, allowing devices to rapidly select and then switch to the most favorable channel amongst a larger set of channels on which they can operate. Another important feature of particular interest regarding dense network operation is referred to as the Restricted Access Windows (RAW) mechanism. Using RAW mechanism the AP can allocate specific access intervals to a subset of stations in the network during which they can contend for channel access. As the stations cannot contend for channel access outside their allocated access interval, the overall contention in the network is greatly reduced making it possible for the AP to support an increased number of devices. Furthermore, to enable low-power usage the TGah introduces another feature referred to as the Target Wake Time (TWT) which is designed to specifically coordinate power save and sleep modes across battery operated sensor devices. Many other novel MAC features have also been introduced in the new standard.

1.3.3

RAW Scheme of IEEE 802.11ah MAC

The protocol defines three types of access techniques for three different categories of STAs: · Traffic Indication Map (TIM) STAs are required to listen to the beacon and are only 25

Chapter 1: Introduction

allowed to contend for the medium during the designated RAW slot. · Non-TIM STAs are not required to listen to the beacon and during association with AP, STAs negotiate a periodic RAW (PRAW) for transmission of data packets. · Unscheduled STAs sporadically join the network and are allowed to transmit PSPoll at any time. The response frame indicates an interval during which unscheduled stations can access the channel. In RAW scheme, the beacon interval is divided into RAW slots to restrict the uplink channel access to a small number of STAs and spreading their uplink access attempts over a period of time to improve access efficiency by reducing collisions. AP allocates a RAW slot for a group of STAs and broadcast the allocation using S1G beacon frame. The RAW slots are indexed from 0 to (NRAW - 1) and STA will determine the index of the RAW slot, islot , in which the STA is allowed to start contending for the medium based on the following mapping function:

islot = (x + Nof f set )modNRAW

(1.1)

where, x is the position index of the AID of the STA, Nof f set represents the offset value in the mapping function and NRAW is the value of the Number of RAW slots within beacon interval. Each RAW slot is further divided into mini slots which we define as time slots. The slot duration count subfield of the RAW slot defines the duration of a RAW slot. At the end of the RAW slot, STAs belonging to a RAW slot, go to doze mode and wake up at the start of the next beacon transmission time to save energy. During EDCA backoff process, a STA maintains two backoff counters: first backoff 26

Chapter 1: Introduction

counter is used outside RAW and second backoff is used inside RAW. At the start of the RAW, each STA suspends the first backoff operation and stores the value of the backoff counter. The stored first backoff counter is restored at the end of the RAW and the EDCA function (EDCAF) is resumed. At the beginning of the allocated RAW slot, the STA sets the contention window CW of the secondary backoff procedure to CWmin . Two types of beacon are generated by AP as shown in Fig.1.10. DTIM is transmitted at the beginning of beacon interval and TIM is transmitted at the beginning of RAW slots. Between two consecutive DTIM beacons, there are as many TIM beacons as the number of groups defined. The bitmap of DTIM beacon includes the TIM group to which the STA belongs and TIM carries the bitmap of STAs within the group that has buffered packet in AP. At the beginning of the Each TIM beacon, the STAs belonging to the RAW slot wake up to start contention. At the expiry of the backoff counter, the STA sends a PS-Poll to obtain the buffered data in AP. During uplink transmission, contention is performed as in the downlink transmission. Within RAW slot, the uplink or downlink transmission is initiated by transmitting PS-Poll from STA. After receiving PS-Poll, AP sends PS-Poll-ACK to STA and STA is allowed to transmit packets in the uplink direction. STA may initiate frame transmission only if the remaining time to the end of the assigned RAW slot duration is greater than or equal to the transmission time and reception of any immediate response expected from the peer MAC entity prior to the end of the allocated RAW slot boundary. Otherwise, STA will not initiate transmission of a frame even though the remaining RAW slot duration is nonzero.

27

Chapter 1: Introduction

1.4

Major Issues and Challenges of IEEE 802.11 Protocol

IEEE 802.11 family of protocols by far the most successful protocols for wireless networking. Due to operation in license exempt ISM band, numerous applications are targeting the band as the cost effective networking solution and the band is getting crowded gradually. In this section we discuss some of the issues and challenges faced by the protocol. · Performance metrics: In order to predict the performance of the protocol it is essential to learn the network parameters that play the most important role in shaping the performance. Unfortunately, most of the existing performance evaluation methods are based on simulations that do not explicitly discuss the parameters that influence the performance of the network. The few existing analytical models are incomplete, over-simplified and deal only particular saturated operating condition. Therefore, we feel the necessity of a comprehensive analytical model that considers wide number of parameters that influence the performance of the network. · UL-MU-MIMO: IEEE 802.11ac amendment allows AP to use maximum eight antennas to transmit simultaneously to four directions using MU-MIMO technique in downlink transmission. However, in the uplink transmission, the protocol allows only single user communication and network resources like bandwidth and antennas in AP remain extremely under-utilized. The existing MU-uplink schemes suffer performance degradation due to collision and excess overhead. Therefore, a robust MU uplink transmission protocol is required to increase the efficiency of the network and provide service to the applications that require high data rate in uplink direction.

28

Chapter 1: Introduction

· Channel sounding: To make UL-MU-MIMO successful, precise channel sounding is essential to learn about the transmission condition of the channel. IEEE 802.11ac protocol uses explicit channel sounding technique where compressed CSI matrix is transmitted by the nodes sequentially. In a dense network, sequential transmission of CSI matrix reduce effective data transmission time and degrades network throughput. Therefore, an efficient channel sounding scheme with simultaneous feedback transmission is essential to improve network performance. · Data overhead: Data overhead is a major concern for existing uplink MU transmission schemes. In some schemes the overhead is as high as 65% and therefore, minimizing overhead cost is vital in improving performance and efficiency of the network. · Dense deployment: The demand for deploying WLAN in dense environment is gaining momentum. However, the major challenge of dense deployment is collision due to hidden terminal problem. Although RTS/CTS mechanism in IEEE 802.11ac protocol mitigate hidden terminal problem to some extent, the nodes at the periphery of the BSS suffers collision. This problem even becomes worse in dense deployment of network. Therefore, a more effective hidden node problem mitigation technique needs to be developed. · QoS in IoT: Newly introduced Sub-1GHz amendment of IEEE 802.11 protocol aims at providing network connectivity service to the emerging IoT network. A number of works have reported the performance of IEEE 802.11ah protocol for non-QoS traffic. Although, the protocol supports QoS traffic, no study has so far been done to

29

Chapter 1: Introduction

evaluate the feasibility and performance of QoS traffic in IoT network. Therefore, a comprehensive performance evaluation of IEEE 802.11ah MAC layer and a comparison of performance of non-QoS and QoS traffic is important before any practical implementation in network level.

1.5

Motivation

Communication protocols from the IEEE 802.11 family of standards are the most widely used wireless local area network (WLAN) technology as of today. The exponential growth of a variety of applications such as high definition (HD) video, cloud access and content uploading continuously demands improved performance, most often expressed in terms of increased per-station throughput and reduced power consumption. Due to larger bandwidth, license exempt band operation, low cost and ease of implementation, the number of WiFi compatible devices are increasing exponentially. As more and more devices are coming into existence in the same band, there is a possibility of degradation of performance if the network is deployed without a detail performance analysis. However, to evaluate performance of the network a comprehensive analytical tool is essential to determine the impact of large number of nodes, high packet arrival rate and co-existence of heterogeneous traffic. From this consideration we are motivated to develop a Markov chain based analytical model that works as a tool and can be replicated to evaluate the performance of wide range of protocol variants with minimum modifications. The pioneering DL-MU-MIMO technique in IEEE 802.11ac enhances the throughput of downlink transmission by many folds. However, the VHT amendment relies on single user point-to-point communication in the uplink and fails to utilize resources efficiently. 30

Chapter 1: Introduction

The well known techniques such as exponential backoff, inter-frame spacing, and RTS/CTS reservation mechanism, originally introduced to reduce collisions but not quite successful, tend to reduce spectrum efficiency of EDCA. In quest of increasing network efficiency and reduce power consumption, TGax is working towards developing high efficiency (HE) protocol for dense deployment. However, complete adoption of HE protocol is likely to take place over a period of time to offset the deployment cost. To ensure the coexistence of nonHE devices during the transition period, EDCA based single user transmission will remain the basic access technique and a focal point of spectral inefficiency for non-HE devices in the uplink direction. To meet the growing demand of user capability, cost reduction, energy consumption and network efficiency, our research is driven towards developing a robust uplink MU-MIMO protocol in cooperation with OFDMA technique that will enhance network throughput, resist performance degradation and improve spectral efficiency in coexistent WLAN network. The number of IoT devices is expected to reach 20-30 billion by 2020. From the system perspective, it is obvious that existing centralized architectures will no longer be able to accommodate the communications among such a huge number of entities. Despite the efforts all over the world to build an internationally agreed upon IoT standards and architectures, there are still many challenges to consider. These include a novel architectural framework, an efficient protocol stack, and security and privacy solutions tailored to the characteristics of IoT networks. Classical IP protocol stacks cause more overhead on the network and justifies the development of new protocol stack for IoT environments. The major components of the stack are application, discovery, network and physical layers. Physical and network layers communication standards vary in their characteristics depending on the technology

31

Chapter 1: Introduction

behind them. Among those technologies are the Low-rate wireless personal area networks (LR-WPAN) and IPv6 Low-power Wireless Personal Area Networks (6LoWPAN). Newly adapted IEEE 802.11ah protocol is going to be a promising solution for network layer IoT technology. In order to realize our long term objective of developing a novel architectural framework, we are motivated to investigate the performance of IEEE 802.11ah RAW mechanism as a MAC layer solution to accommodate QoS heterogeneous traffic in IOT network.

1.6

Objectives

Driven by our motivations, we have set the following objectives in this thesis: · Developing tools: In this thesis we first develop a Markov chain based model to accurately evaluate the backoff procedure of four different traffic categories. The impact of differentiated AIFSN values and CW sizes for different priority traffic categories are given specific importance in developing Markov chain model. Then we develop queuing model to determine the state of the queue before start of TXOP, after every departure and at the end of TXOP period. This queuing model is essential to evaluate performance of the network in non-saturate load condition. The impact of non-ideal channel and collision probabilities are taken into consideration while developing both the models. · Performance evaluation of existing DL-MU-MIMO in IEEE 802.11ac: Using the developed tools we evaluate performance metrics of downlink multi-user transmission. We evaluate backoff time, successful transmission probability, size of queue before 32

Chapter 1: Introduction

start of transmission, normalized payload throughput, collision probability average waiting time in the queue and many other performance indicators for each traffic category. · Evaluation of TXOP sharing probability in IEEE 802.11ac: We evaluate TXOP sharing probabilities for different traffic categories to observe how TXOP sharing affect the throughput and fairness of the network specifically for low priority traffic categories. We determine network stability criteria in heterogeneous traffic condition. · Proposing UL-MU-MIMO in IEEE 802.11ac for coexisting network: We propose uplink MU transmission protocol to address the inefficiency in uplink transmission. We use OFDMA access technique to transmit control signals and to perform channel sounding simultaneously to avoid collision and delay. · Performance evaluation of proposed protocol: Using the developed analytical tools, we evaluate performance of the proposed protocol. We develop an event driven MAC layer simulation to validate the performance metrics obtained from analytical model. · Impact of hidden node in IEEE 802.11ax deployment: We assess the impact of hidden nodes on the proposed uplink protocol in coexisting network deployment scenario and propose hidden node problem mitigation technique. · Evaluating performance of IEEE 802.11ah RAW as IoT MAC layer solution: In quest of finding a protocol architecture for IoT network we evaluate performance of IEEE 802.11ah RAW scheme for non-QoS network. We accurately model the RAW mechanism by replicating and modifying the tools developed using Markov chain and queuing model. 33

Chapter 1: Introduction

· Evaluating feasibility of using RAW scheme for differentiated QoS heterogeneous network: We evaluate the performance of RAW scheme for heterogeneous IoT network and evaluate the impact of QoS traffic on the stability of IoT network.

1.7

Major Contributions

In attempting the performance evaluation of IEEE 802.11ac MAC protocol, the existing solutions are limited in both scope and methodology. All the existing solutions as discussed in Chapter 2 fail to accurately model the backoff process during DL-MU-TXOP sharing and consider only non-QoS traffic. The existing evaluation attempts are over simplified by considering saturated working condition and ideal transmission channel. However, the research presented in this thesis propose a Markov chain based analytical model that comprehensively evaluates the performance metrics of IEEE 802.11ac protocol for QoS traffic in non-saturated load and non-ideal channel condition. Table 1.4 highlights major contributions presented in the thesis. We have developed a detail analytical model of DL-MU-MIMO in IEEE 802.11ac protocol and evaluate the impact of MU-TXOP sharing on the performance of the individual traffic category. Our solution is based on discrete Markov chain model and E-limited M/G/1 queuing model. The results are produced by solving the numerical calculations of the analytical models in Maple [31] through iterative approach. Network performance metrics like normalized throughput, average queue, delay in the queue, medium access probability of a particular traffic category, successful transmission probability, packet drop etc. can easily be obtained from the proposed model. The queuing model combined with Markov chain model provide an attractive analytical solution that can be used to calculate important 34

Chapter 1: Introduction

Table 1.4: The illustration of main contributions in this thesis. Chapter Challenges Contributions Chapter 3: Per- Finding the distribu- Proposing Markov chain and queuing theformance analy- tion of backoff time for ory based analytical model that accusis of MU- TXOP a heterogeneous QoS rately evaluate backoff time and evalusharing in IEEE network. ates major performance metrics for QoS 802.11ac traffic nodes. Evaluating the impact of MU-TXOP sharing probability on performance of all traffic categories. Evaluating stable operating criteria of IEEE 802.11ac network. Chapter 4: Up- Modeling TXOP shar- Proposing the first uplink protocol using link Access ing probability for MU MU-MIMO and OFDMA techniques that Protocol in IEEE uplink transmission. takes into consideration different prior802.11ac Avoiding collision of ity traffic categories. Introducing explicit RTSs from multiple channel sounding technique by using dedSTAs simultaneously. icated subcarrier blocks. Developing an analytical model using queuing model and Markov chain model to evaluate the performance of the proposed A-MAC for both uniformly and non-uniformly varying packet arrival rates for different priority categories. Developing stable operating criterion for the network in varying traffic conditions. Chapter 5: Im- Creating hidden node Proposing modification in carrier senspact of hidden during simulation. ing threshold during formation of BSS nodes on uplink to overcome hidden node problem in transmission in densely deployed IEEE 802.11ax netIEEE 802.11ax work. heterogeneous network Chapter 6: Dif- Determining the Evaluating performance of RAW scheme ferentiated QoS boundary of RAW slot in presence of heterogeneous traffic in to Heterogeneous to stop the backoff non-saturated load and non-ideal channel IoT Nodes in process and resuming condition. Accurately modeling EDCA IEEE 802.11ah backoff process at the technique during backoff process in RAW RAW Mechanism start of RAW slot after mechanism. next beacon signal.

35

Chapter 1: Introduction

performance metrics in a practical network. We have proposed uplink MU-MIMO protocol for coexisting environment. For the first time we have developed an accurate analytical model of MU-TXOP working in nonsaturated condition. We have assumed a noisy channel characterized by BER whereas all previous models assumed an ideal channel condition. A detail analytical procedure is developed for estimating backoff duration for each access category whereas the previous models have assumed a fixed average backoff time for all access categories. We have introduced the stability condition of IEEE 802.11ac network that has not been addressed by any other literature. To validate our analytical model, we have developed an event driven simulator in Matlab environment and performed extensive simulation in different network scenario. We have evaluated the impact of hidden node on our proposed model in dense network scenario and propose the mitigation technique of performance degradation. To the best of our knowledge we are the first to accurately model RAW mechanism of IEEE 802.11ah protocol and have evaluated network metrics for heterogeneous IoT network.

1.8

Thesis Organization

The rest of the thesis is structured as follows: · Chapter 2 discusses the research works in evaluating performance metrics and uplink access techniques of IEEE 802.11 family of protocols. · In Chapter 3 we have proposed a Markov chain based analytical model that is used as a tool to evaluate network performance metrics of IEEE 82.11ac downlink MUMIMO transmission in non-saturated load and non-ideal channel condition for dif36

Chapter 1: Introduction

ferent priority traffic categories. · In Chapter 4 we have proposed access point controlled uplink MU-MIMO transmission protocol (A-MAC) in IEEE 802.11ac for simultaneous uplink transmission to multiple destinations. We have used analytical model to evaluate the performance of the proposed protocol and validate the results through extensive simulation. We have also evaluated the impact of hidden nodes on the proposed protocol. · Chapter 5 discusses our proposal to eliminate hidden terminal problem of IEEE 802.11ax protocol in dense deployment environment. · In Chapter 6 we have evaluated performance of IEEE 802.11ah RAW scheme and investigate the feasibility of using RAW scheme for differentiated QoS heterogeneous nodes in IoT. · Chapter 7 concludes the thesis with future direction of research.

37

Chapter 2 Related Work

2.1

Performance modeling of downlink MU transmission

Due to increased demand for high bandwidth applications and possibility of coexistance with other networking technologies, IEEE 802.11ac protocol has gotten much attention in research industry. A number of works has already been reported to study the effect of different network parameters on the performance of IEEE 802.11ac protocol. A simulation based analysis of the MAC performance of IEEE 802.11ac protocol is given in [18] where MAC performance in terms of throughput and efficiency is compared for different frame aggregation techniques. A simplified numerical analysis of the effect of different aggregation techniques on the performance of IEEE 802.11ac is provided as a benchmark to validate the simulation result. The analysis is based on transmitting frames in a saturated load condition over a point to point ideal channel. The study focuses on the effect of overheads on different frame aggregation mechanisms. The maximum throughput (MTP) with RTS/CTS protection for A-MSDU, A-MPDU and hybrid A-MSDU/A-MPDU are derived by the au-

38

Chapter 2: Related Work

thors to analyze the performance comparison between 802.11ac and 802.11n. However, model [18] is over simplified and does not take into account the EDCA MU-TXOP sharing effect. The different categories of the traffic are not taken into considertaion in estimating the average backoff time. This model overestimates the throughput calculation by transmitting highest possible number of packets during each transmission in an ideal channel condition and saturated load condition. Another simulation based performance evaluation of multi-user MIMO in IEEE 802.11ac protocol was done in [20] where the authors examined bit error rate and packet error rate for different precoding techniques paired with MIMO detection techniques. However the most important network metrics like throughput, delay, transmission probability etc. are absent in the papper. The improvement of performance of IEEE 802.11ac MU-MIMO due to spatial multiplexing together with the aggregation of packets is reported in [19]. The paper proposes a joint spatial multiplexing and packet aggregation scheme. Performance is evaluated in terms of the amount of packet loss and delay for different traffic loads. The simulation result is very close to the space-time batch service queuing model presented in [32]. Results show that in non-saturation conditions, an increase in queue size increases the possibility of scheduling a large number of packets at each MU-MIMO transmission and hence improve the system throughput at the cost of a higher delay for low priority traffic. However, the queuing model presented in [32] considers a constant average backoff period and does not take into account multiple traffic categories. The scheduling technique utilizes the spatial streams depending on the number of available packets in the queue before the start of the transmission but does not consider the direction of transmission of packets. In fact the

39

Chapter 2: Related Work

queuing model presented in [32] is valid for packets directed to only one destination with MIMO capability rather than multiple STAs with single/multiple antennas. IEEE 802.11ac amendment allows only non-fragmented MPDUs within an A-MPDU, except for a VHT single MPDU. This results in filling out the A-MPDU boundary with meaningless A-MPDU pads and thereby wasting the resource of the medium. In [33], the author proposes an A-MPDU using fragmented MPDUs with VHT Compressed Block ACK mechanism to improve the MAC efficiency in EDCA TXOP sharing mode. The simulation results show that at low data rate (MCS0 @20MHz, 26Mbps), the improvement in multi-user throughput is above 28%, while under a high data rate condition (MCS9 @80MHz, 1.56Gbps), the improvement is about 3%. A discrete time Markov chain based analytical model for MU-TXOP sharing in IEEE 802.11ac protocol is proposed in [34]. The output of the Markov chain of the proposed model is used to derive a mathematical model to estimate the achievable throughput of a given traffic category. The model is an extension of well-known Bianchi's model [35] with the integration of TXOP sharing mode. The proposed model has noted deficiencies as the model assumes a saturated operating condition of the queues of ACs such that there is always at least one packet for transmission in the queue. However, in reality, every system operates in a non-saturated condition and therefore, model presented in [34] is not applicable in a practical system. The model also assumes an ideal channel condition and does not take into account any transmission error. IEEE 802.11ac protocol states that during TXOP sharing the secondary ACs may get free transmission of the queued frames based on the availability of resources and the backoff process of secondary AC must not be penalized for this opportunity. During the TXOP sharing the secondary ACs must freeze the backoff

40

Chapter 2: Related Work

counters and resume the countdown of the backoff counters immediately after the sharing the MU-TXOP with the primary AC. However, this important aspect of the protocol is overlooked in [34] where the secondary AC goes to the zero-th backoff as well with the primary AC at the end of the TXOP sharing. The model in [34] also assumes that the secondary ACs can transmit the packets for the whole duration of the TXOP period. This is contrary to the IEEE 802.11ac standard since the standard requires that the secondary ACs can get free transmission as long as the primary AC has packet for transmission. As soon as the primary AC queue becomes empty or the TXOP time reaches its limit, the secondary AC must stop transmission and the medium is free for contention by all ACs. In addition, the proactive zero-th backoff is absent in this Markov chain model. In order to address the deficiencies in [34] , Hu et. al. [36] proposed a discrete Markov chain based analytical model under non-saturated traffic condition. However, model [36] has flaws in setting the conditions for changing the state of the Markov chain. Model in [36] assumes that at any state of Markov chain, an AC can transmit if there is a possibility of MU-TXOP sharing which is related to the availability of free antennas. In fact, this state change is only possible on the condition that the medium is occupied by transmission from another AC and the availability of the antenna in AP. Model [36] is developed on the assumption that the maximum queue length is one which is unrealistic. This eleminates the possibility of space-time multiplexing which is the most prominent feature of IEEE 802.11ac protocol. In Hu et. al.'s model when the primary AC gains access to the medium, the primary AC must share the TXOP period with secondary ACs. In other words, if there is no TXOP sharing, the medium is considered to be idle and the ACs decrement the backoff counters. This condition in turn makes the TXOP sharing obligatory such that

41

Chapter 2: Related Work

either the medium is busy and there is TXOP sharing or the medium is idle. However, there can be instances when the medium is busy due to transmission of a particular AC but TXOP sharing is not possible for the secondary ACs due to non-availability of antennas. In this case secondary ACs need to freeze the backoff counter until the medium is idle. This important TXOP sharing rule is completely ignored in [36].The model also assumes only a perfect channel condition which is not practical. All the works reported in [18], [20], [19], [33], [34] and [36] use fixed length MPDUs. A simulation model of the saturation throughput of MU-TXOP sharing based on variable length MPDU is reported in [37]. However, this saturation condition over-estimates the network throughput and is not applicable for a practical network. The performance evaluation in [37] is based on only one metric: normalized throughput. No other important performance metrics like waiting time in the queue, average queue length, packet error, stability condition etc. are readily available in the model. Model [37] also assumes an ideal channel condition and constant backoff period which do not comply with the standard. We observe that most of the above research works for performance evaluation are based on considering fixed backoff time, saturated traffic condition, ideal transmission channel and non-QoS traffic cases. The shortcomings highlighted in the discussion strongly necessitates a unified model for performance evaluation of IEEE 802.11ac protocol. We have proposed a robust analytical model in Chapter 3 that addresses all the issues presented in the above discussion.

42

Chapter 2: Related Work

2.2

Evaluation of TXOP sharing probabilities

A simulation based performance evaluation of multi-user MIMO in IEEE 802.11ac protocol was done in [20]. In this paper the authors studied the performance of the protocol for different combinations of pre-coding techniques paired with MIMO detection techniques. The improvement of performance of IEEE 802.11ac MU-MIMO due to spatial multiplexing together with the aggregation of packets is reported in [19]. The paper proposes a joint spatial multiplexing and packet aggregation scheme. Performance is evaluated in terms of the amount of packet losses (blocking probability) and delay for different traffic loads, different number of active STAs and several number of antennas and buffer sizes at the AP. Results show that in non-saturation conditions, increased queue size increases the possibility of scheduling a large number of packets at each transmission of MU-MIMO and hence improve the system throughput at the cost of a higher delay. A 2-D discrete time Markov chain based analytical model for TXOP sharing in IEEE 802.11ac protocol is proposed in [34]. The output of the Markov chain of the proposed model is used to derive a mathematical model to estimate the achievable throughput of a given AC. The model is an extension of well-known Bianchi's model [35] that integrates the TXOP sharing mode. However, the proposed model is not complete because: · The model assumes a saturated operating condition of the queues of ACs such that there is always at least one packet for transmission in the queue. · The model assumes an idle channel condition and does not take into account any transmission error. · The new backoff process as mandated by IEEE 802.11ac protocol for the secondary 43

Chapter 2: Related Work

AC during TXOP sharing is not followed. · Network throughput is considered only for downlink communication. The above works have attempted to evaluate quite few performance metrics of MUTXOP sharing properties in DL transmission. However, none of the works have evaluated TXOP sharing probabilitiy for any traffic category and whether this TXOP sharing probability impact the throughput of high priority traffic category and low priority traffic category. In Chapter 3 we have also evaluated TXOP sharing propability for each traffic category and its impact on throughput of different traffic classes.

2.3

MU uplink access techniques

The concept of multipacket reception in WLAN was first introduced in [38] and central coordinator scheduled MPR protocols were proposed in [39] and [40]. The first DCF based MPR protocol proposed in [41] assumes the transmission of multiple RTSs at the beginning of transmission. However, due to random access nature in EDCA channel access technique, it is unlikely that multiple STAs pick the same backoff counter value and send RTS at the same time. In this case most of the time the channel is unavoidably under-utilized and the performance of the protocol in this scenario will be poor. On the other hand, in a densely concentrated network, we may expect larger number of contending STAs transmit RTSs simultaneously than the number of antennas in the AP. Since the protocol does not have any control on the number of RTSs, there is higher chance of collision in high load condition. The proposed MAC protocol in [42] requires a major change in the IEEE 802.11 pro44

Chapter 2: Related Work

tocol. The inclusion of multiple RTS/CTS during random access period increases the overhead burden to the protocol and therefore, reduces the throughput and efficiency of the network. The protocol also assumes single transmission opportunity (TXOP) duration for all traffic categories which either benefits low priority traffic category or penalizes the high priority traffic category. A spatial multiple access (SAM) protocol proposed in [43] for uplink asynchronous data transmission requires the stations to be able to detect precisely the number of ongoing transmissions in the network which is difficult to achieve in wireless environment. To ensure the proper operation of the protocol the STAs also require to transmit the data such that the preambles of the multiple packets do not overlap. Therefore, the asynchronous transmission protocol is complex and is not compatible with IEEE 802.11ac protocol. An uplink MMSE detection based MU-MIMO protocol is proposed in [44] for the IEEE 802.11 WLAN. In this protocol STAs use OFDMA technique to transmit access request to AP and TDMA technique to transmit pilot signals. However, in IEEE 802.11ac amendment, the training frames are explicitly included in the preamble of the data to determine channel state information which eliminates the need for separate pilot signal transmission during contention period. Markov chain based analytical models for asynchronous MPR techniques are proposed in [45][46][47]. However, the underline MAC protocols are not discussed in any of the papers [45][46][47]. Rather, the development of a theoretical analysis to identify the relevant parameters and the achievable performance are the main focuses of these proposals. H. Li et. al. proposed a multi-user MAC (MU-MAC) that incorporates both multipacket reception (MPR) and multi-packet transmission by an IEEE 802.11n AP using or-

45

Chapter 2: Related Work

thogonal frequency-division multiplexing (OFDM) [48]. However, the protocol does not have any control over the number of RTSs in the uplink. If the number of RTSs exceeds the maximum number of antennas, all packets are lost due to collision and all the STAs involved in collision double the backoff window. Consequently, the protocol may negatively impact the performance of the network. Therefore, this protocol is not suitable for a network with large number of nodes. A multi-round contention based random access MAC protocol for MPR is proposed in [49]. However, the additional contention round leads to higher channel-contention overhead and therefore, there is always a trade-off between channel utilization and contention overhead. In [50] the authors proposed an unified down/up-link MU-MIMO MAC (Uni-MUMAC) protocol to enhance the performance of IEEE 802.11ac by exploiting multiple spatial streams. The proposed Uni-MUMAC extends the traditional one round channel access contention to two round contention for uplink MU-MIMO. A new contention window for the second contention is defined to elastically accommodate the traffic from different STAs to the AP in the uplink. In the first round of the contention for the medium, a STA gain access to the medium and sends RTS to the AP. AP sends ant-CTS broadcast to all the nearby STAs informing them of the number of available antennas and the duration of the second contention window. If STAs have data to transfer to AP, they send RTS to AP one by one within the second contention period. At the end of the contention period, the AP sends group CTS (G-CTS) to the STAs that successfully sent RTS to AP. STAs receiving G-CTS synchronize themselves to send data frame to AP. Finally AP acknowledges the data by sending group ACK (G-ACK). The authors have done extensive simulation of the protocol and have developed an analytical model to support the result of the simulation. The result exhibits that Uni-MUMAC not only performs

46

Chapter 2: Related Work

well in downlink scenario but also able to balance the uplink and downlink throughput in the uplink bandwith-hungry applications. Uplink MU transmission protocols proposed in the above works either suffer collision or add excessive overhead for the packets. Exchange of excessive control messages during TXOP period produces delay for other nodes and reduces number of packet transmission during TXOP period. Some of the research works are not compatible with the protocol. In Chapter 4 we have proposed an uplink MU-MIMO transmission technique that uses OFDMA technique to transmit multiple control signals simultaneously and MIMO technique to transmit multiple data packets.

2.4

Hidden Node problem

The existence of hidden nodes has always been a concern and a major factor for degraded network throughput and spectrum inefficiency. Although the RTS/CTS controlled transmission is successful in avoiding hidden terminal problem for downlink transmission, it cannot completely eliminate the problem in uplink direction. The impact of hidden node on goodput analysis of IEEE 802.11ac was first studied in a single cell WLAN environment in [51]. Another analysis of the impact of hidden node based on simple mathematical model was proposed for multi-hop wireless network in [52]. [53]revealed a serious problem of unfairness, referred to as asymmetric hidden node problem, arising when legacy devices that have smaller CSTH coexist and compete for channel access with new devices that have larger CSTH. [54] exposed several problems in managing hidden terminals for uplink traffic in rate-controlled environments and presented channel estimation approach (CEA) to mitigate the problem. However, the channel estimation process puts extra burden 47

Chapter 2: Related Work

on access point and can not be used in dense deployment. Hidden node problem becomes the most important factor for performance degradation in dense deployment as recommended in the draft amendment of IEEE 802.11ax protocol. In Chapter 5 we have proposed some modifications in the draft amendment to mitigate the hidden node problem in upcoming IEEE 802.11ax protocol.

2.5

Performance evaluation of IEEE 802.11ah

Performance evaluation of IEEE 802.11ah amendment have been a topic of interest for different research groups and a number of works have been reported that attempted to evaluate the performance of RAW transmission in IEEE 802.11ah network. Raeesi et al. in [55] performed packet-based network simulations of 802.11ah to evaluate the performance of RAW access technique. However, they considered only the saturated network state and did not evaluate the separate influence of different parameters on RAW performance. Another simulation based performance evaluation was reported in [56] which was not supported by any analytical model of the protocol. A Markov chain based analytical model of RAW access scheme was discussed in [16]. However, the evaluation was based on Bianchi's model [35] which has noted flaws and the change of state during backoff process did not comply with EDCA technique. The performance evaluation in [16][55][56] consider only non-QoS traffic in ideal channel and saturated traffic conditions. Simulation based studies are presented in [57][58] where the authors have implemented the visualization on top of the simulation to study the performance of differentiated QoS traffic in IEEE 802.11ah network. The above works have attempted to evaluate performance of RAW mechanism of IEEE 48

Chapter 2: Related Work

802.11ah protocol. However, none of the above works have reflected the recommended backoff process for RAW scheme. In contrary to the above research works, in Chapter 6 we have developed a model for performance evaluation of IEEE 802.11ah protocol that strictly reflects recommendation. We have performed analytical modeling of differentiated QoS traffic in heterogeneous network in noisy channel and non-saturated operating condition.

2.6

Chapter Summary

In this chapter we have highlighted the shortcoming of existing solutions of performance evaluation techniques for DL-MU-MIMO transmission in IEEE 802.11ac protocol. The flaws of the proposed analytical and simulation models are identified and a comprehensive analytical model is proposed in Chapter 3. The analytical model is used as a tool to evaluate broad range of performance metrics and TXOP sharing probabilities. Flaws, non-compatibility, inefficiency and performance degradation of existing uplink MU transmission protocols are identified in Section 2.3. In Chapter 4 we have proposed access point controlled MAC protocol that addresses known flaws and improves network performance in uplink MU-MIMO transmission. Mitigation techniques of hidden nodes in wireless network are studied in this chapter but none of the works effectively mitigate the problem in dense deployment. We have proposed a performance improvement technique in presence of hidden nodes in IEEE 802.11ax protocol in Chapter 5. A number of research attempts have been made to evaluate the performance of RAW scheme in IEEE 802.11ah protocol. However, none of the research works have studied the feasibility of using RAW mechanism for differentiated QoS heterogeneous IoT nodes. In Chapter 6 we have evaluate the performance of RAW mechanism to support QoS traffic. 49

Chapter 3 Performance analysis of MU- TXOP sharing in IEEE 802.11ac
The successive amendments of IEEE 802.11 protocol aim at enhancing the capability and performance while keeping the backward compatibility. The standardized modifications to both PHY and MAC layer of IEEE 802.11 standard enable a multi-station throughput of at least 1 Gbps and a single link throughput of at least 500 Mbps. The extended 80MHz band, highly efficient 256-QAM encoding technique, frame aggregation and down-link multi user MIMO technique provides a multi-facet increase in performance of the network. The pioneering DL-MU-MIMO transmission technique allows simultaneous transmission to multiple clients using non-overlapping OFDM sub-carriers. Different QoS based categories of traffic contend for medium access using EDCA and gain contention free access to the medium for a period of time bounded by TXOP limit. The owner of TXOP may share the TXOP period with secondary ACs and thereby increase the throughput of the network. In this chapter we have proposed an analytical model of IEEE 802.11ac

50

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

protocol based on discrete Markov chain model and E-limited M/G/1 queuing model. A good number of performance metrics like backoff time, throughput, successful transmission probability, medium access probability, delay, packet error etc. are easily available from the model. Careful estimation of backoff time is vital in ensuring fairness among different traffic categories in accessing the medium. In the proposed model, emphasis is given in deriving the backoff time for different traffic categories. The impact of MU-TXOP sharing on network throughput and bandwidth utilization is studied in detail in the proposed model. The queuing model combined with Markov chain model provide an attractive analytical solution that can be used to calculate important performance metrics in a practical network.

3.1

Introduction

The widespread deployment and continuous evolution of IEEE 802.11 protocol while keeping the backward compatibility has made it an amazingly successful technology. The IEEE 802.11ac amendment increases the channel bandwidth and introduces downlink multiuser MIMO technique with multiple antennas at both sender and receiver end [5]. The DL-MU-MIMO technique allows an access point (AP) to simultaneously transmit to multiple clients in the down-link transmission. Spatial diversity provided by multiple antennas can enhance the performance proportionally with the increase of the number of spatial streams, and thus makes IEEE 802.11ac an attractive choice for a variety of high end data service applications like on-line streaming, IPTV and video in smart phones and tablets [2]. The protocol supports the use of maximum eight spatial streams in any station (STA), but a single spatial stream at 80MHz can be used to provide a cost-effective alternative to 51

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

using two spatial streams at 40MHz band [18]. At any instant no more than 4 STAs can be targeted by an AP for DL-MU-MIMO and a maximum of four streams can be projected to a targeted client. TXOP provides contention free access to the medium for voice and video frames for a period of time bounded by TXOP limit. Uninterrupted access to the medium for voice and video frames allows multiple frame transmission which prevents low priority traffic from occupying the channel for an unnecessary long period of time [21]. Each EDCAF of an access point (AP) contends for EDCA TXOP; once it wins the competition, this EDCAF becomes the owner of that TXOP. The traffic category that gains access to the medium is known as primary AC and other ACs become the secondary ACs. The internal competition for TXOP can be resolved by sharing the TXOP with the secondary ACs. If the primary AC transmits multiple packets towards one direction over the period of TXOP duration, this TXOP is known as EDCA TXOP. The introduction of DL-MU-MIMO in IEEE 802.11ac protocol enables the transmission of multiple packets from primary AC to multiple directions or multiple packets from both the primary AC and the secondary ACs to multiple directions using different antennas simultaneously. This TXOP is known as MU-TXOP. Point to multipoint communication is achieved through MU-TXOP sharing. The protocol defines the following conditions for sharing TXOP by the primary AC. TXOP sharing is possible only when sufficient resources are available in the AP and there are packets waiting for transmission in the queue of the AP. The primary AC decides which secondary ACs to share the TXOP with. When the primary AC has enough data to send to multiple destinations, it should send its own data before sharing the TXOP with the secondary ACs. If two or more secondary ACs compete for the same destination during

52

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

TXOP sharing, the higher priority AC gets the opportunity and the lower priority AC needs to backoff. The duration of TXOP time is determined by the TXOP limit of the primary AC and it cannot be affected by the frame sizes of secondary ACs. Finally, MU-TXOP is released as soon as the primary AC finishes its transmission even though there are frames in the queues of secondary ACs. Since MU-MIMO is not available in the uplink direction, the AP uses poll-based technique to receive ACK or BA by sending block acknowledgement request (BAR) sequentially in order to avoid collision. Contention that occurs when two or more STAs try to gain access to the channel is resolved through a backoff process invoked by an EDCAF [59]. Duration of the backoff process determines the extent of priority differentiation among traffic classes, as a secondary AC freezes its backoff countdown timer when it starts to share the TXOP with primary AC and resumes the countdown when the channel becomes idle after the end of the TXOP. This effectively shortens the duration of backoff for lower traffic classes and alleviates priority differentiation [5]. In this chapter we evaluate the impact of DL-MU-TXOP sharing on the performance of all traffic categories under uniform spatial distribution of STAs. To the best of our knowledge, this is the first work that evaluates MU-TXOP sharing probabilities for different traffic categories under varying load conditions (packet arrival rate, k ). Due to MU-TXOP sharing, the backoff process of a traffic category is quite different from the previous amendments. Our analysis provides an accurate estimation of backoff duration for different traffic categories. To this end, we have developed a detailed analytical model of IEEE 802.11ac protocol based on discrete Markov chain model and E-limited M/G/1 queuing model. The

53

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

model allows accurate evaluation of the throughput enhancement obtained through TXOP sharing; it allows performance evaluation under non-saturated load and in non-ideal channel condition; it allows estimation of backoff duration for each access category separately whereas earlier models have assumed a fixed average backoff time for all access categories; and it allows the definition of the stability condition of IEEE 802.11ac networks that has not been addressed in existing literature. The rest of the chapter is organized as follows: Modeling of backoff process is discussed in Section 3.3. The queuing model and the Markov chain model is discussed in Sections 3.4 and 3.5, respectively. The results are discussed in Section 3.6. Finally, we summarize the chapter in Section 3.7.

3.2

Modeling of MU-TXOP

In this chapter we are focusing on modeling downlink multi-user TXOP sharing with uniform spatial distribution of STAs. We use queuing model of each node and Markov chain model to model the backoff process. A probabilistic model is used to address assembling the TXOP and activities on the medium. We model a single AP which has four different priority traffic classes, conveniently labeled Background, Best Effort, Video, and Voice, which we denote as ACk where, {k = 0, 1, 2, 3} respectively. We assume that the primary AC can share the TXOP time with the secondary AC s depending on the availability of resources at the AP, even though the backoff counters of secondary AC s are not zero. ACk transmits as secondary AC only if another ACh=k becomes primary AC for current TXOP transmission. Let f sk denote the probability that ACk gets an opportunity to 54

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

transmit packets due to MU-TXOP sharing; we will find its value in Section 3.5.2 using a queuing model. During MU-TXOP, a burst of maximum four frames can be sent to four different destinations at a time. The number of bursts to be transmitted during the MUTXOP period is determined by the TXOP duration limit of the primary AC ; we map this parameter to a maximum Mk bursts that can be transmitted during the MU-TXOP sharing. RTSs are sent to the intended destinations at the beginning of the TXOP and scheduling of the packet transmission is done upon successful reception of CTSs. Packet arrival of traffic class k to the AP follows Poisson process with arrival rate k . We assume a time slot of  = 9µs and an MPDU duration of ld slots including MAC and PHY header. Durations of RTS, CTS, BA and BAR are expressed in number of slots and are denoted by [rts, cts, ba, bar] respectively. Duration of AIF Sk and SIFS periods are denoted by aif sk and sif s respectively. Duration of EIFS is expressed as sif sk + ack + 1 in slots. Channel error is expressed by Bit Error Rate (BER) and denoted as ber. Probability that there will be no RTS error due to noise in the channel is given as

r = (1 - ber)rtsb

(3.1)

and the probability that there will be no CTS error due to noise in the channel is given as

c = (1 - ber)ctsb

(3.2)

where, rtsb and ctsb are number of bits in RTS and CTS respectively. The probability that

55

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Figure 3.1: EDCA channel prioritized access (adopted from [10]) RTS or CTS will not be corrupt due to channel noise is given as

 = (1 - ber)rtsb +ctsb

(3.3)

and the probability that data or BA will not experience any corruption due to channel noise is given as

 = (1 - ber)ldb +bab .

(3.4)

The behaviour of different ACs during backoff period is shown in Figure 3.1. In this model we have used notations from [10] where the backoff process is divided into two phases: the freezing countdown and backoff countdown. Before ACk can start backoff countdown, the medium must be idle for a period of AIF Sk without interruption. AIF Sk

56

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

can be expressed as

AIF Sk = SIF S + AIF SNk 

where, AIF SNk is arbitration inter frame spacing number for traffic category k as shown in Fig.3.1. A freezing counter counts down the AIF Sk period for ACk . If the medium gets busy due to transmission of a higher priority AC which we denote as primary AC, the secondary ACs can be considered for sharing the TXOP even though the secondary ACs are either in freezing countdown or in backoff countdown state. However, for the simplicity of our analysis, we assume that the secondary ACs can only be considered for MU-TXOP sharing when they are in backoff countdown process. This means: 1) if the medium gets busy during freezing countdown process, freezing counter is restarted, 2) if medium gets busy during backoff countdown process and the AC is not considered for MUTXOP sharing, freezing counter is restarted before the backoff counter resumes , and 3) If the medium gets busy during backoff process and the AC is considered for TXOP sharing, the backoff counter is kept frozen and resumes the countdown as soon as the medium becomes free. We begin our analysis from the point immediately after finishing a TXOP period. We assume that the queues of all ACs are non-empty and none of the ACs are in either freezing or backoff state. As soon as the previous transmission ends, all ACs will compete for access to the medium. According to Fig. 3.1, no transmission is possible during the period AIF S3 . The initial values of the freezing counters are set to be

57

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Bk = AIF SNk - AIF SN3

k = 0 ...3

Duration of period where traffic class k and higher can access the medium is denoted as Ak and their maximum durations are    AIF SNk-1 - AIF SNk , k = 1 . . 3   W0,max , k=0

Ak,max =

(3.5)

where, W0,max is the maximum number of backoff states for AC0 . It is important to note that after the end of MU-TXOP time, if the queue of either the primary AC or the secondary AC becomes empty, the AC starts proactive zeroth backoff. If the queue of the primary AC is not empty at the end of MU-TXOP time, it starts regular backoff and if the queue of the secondary AC is not empty after TXOP sharing, it resumes the backoff countdown from the state where it was considered for TXOP sharing. At the end of the proactive zeroth backoff if the queue is empty, ACk goes to idle state. As soon as a packet arrives, ACk exits the idle state and senses the medium for a period of AIF Sk . If the medium is idle for a period of AIF Sk , ACk can start transmission without going for further backoff countdown. However, if the medium becomes busy during AIF Sk period or buffer is not empty at the end of previous transmission, ACk enters regular backoff procedure. At the end of the proactive zeroth backoff if the queue is not empty, the following events take place: 1) transmission is successful and buffer becomes empty; in this case ACk starts proactive backoff again, 2) transmission is successful and the buffer is not empty; in this case ACk starts regular backoff, and 3) transmission is not successful in which case ACk 58

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

goes to backoff phase 1 with increased contention window. Backoff counter value is uniformly distributed over the interval [0, CWk,i ], where CWk,i is the contention window for ACk during backoff phase i. During the backoff process the backoff counter is decremented if the medium is idle at the end of the time slot. When the backoff counter value goes to zero, ACk gets the right to transmit data. If the transmission fails due to collision, ACk goes to the next backoff phase with increased contention window size until maximum contention window size CWk,max is reached. There are mk +1 (0 . . . mk ) number of backoff phases with different contention windows. Let R be the maximum retry limit such that R - (mk + 1) backoff phases will have same backoff window size of CWmax . Since the backoff counter can take any value within the range [0, CWk,i ], the maximum number of backoff states in backoff phase i can be Wk,i = CWk,i + 1. For backoff phase 0, the value of the backoff counter Wk,0 is set to be

Wk,0 = CWk,min + 1.

We can express Wk,i in terms of Wk,0 as follows:    2i Wk,0

Wk,i =

0  i  mk

(3.6)

  2mk Wk,0 = Wk,max mk < i  R The probability fk that a timeslot will be idle during the interval Ak,max can be related to the channel access probability k as :

59

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

f3 = Probability of no AC3 transmission during a slot of A3,max = 1 - 3 .

Similarly,

f2 = Probability of no AC3 transmission during a slot of A2,max and no AC2 transmission during a slot of A2,max = (1 - 3 )(1 - 2 ).

In general, the idle probability of each slot during Ak,max period can be expressed as
3

fk =
l =k

(1 - l )

(3.7)

For AC0 , the decrement of backoff counter takes place only during A0,max if the time slot during this period is idle, so the corresponding backoff counter decrement probability is
f0 . 1-0

The denominator takes into account the fact that, when AC0 is in backoff state,

other ACs are not transmitting. AC1 can decrement the backoff counter during the periods A0,max and A1,max if the medium is idle during those periods. Since AC1 is in backoff state, the probability that a time slot during the period A1,max will be idle is probability that a time slot during the period A0,max will be idle is
f0 . 1-1 f1 , 1-1

while the

The normalized

probability that the backoff counter of AC1 is decreased during these two periods is obtained by combining the two probabilities with the total probability of period A1,max being

60

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

idle. Similarly we can derive the probability of decrementing the backoff counter for all ACs as f0 , 1 - 0

g0 =

f0 f1 + f1 A1,max , 1 - 1 1 - 1 f2 f1 f0 g2 = (1 - f2 A2,max ) + f2 A2,max (1 - f1 A1,max ) + f1 A1,max , 1 - 2 1 - 2 1 - 2 f3 f2 + f3 A3,max (1 - f2 A2,max ) g3 = (1 - f3 A3,max ) 1 - 3 1 - 3 f1 f0 +f2 A2,max (1 - f1 A1,max ) + f1 A1,max . (3.8) 1 - 3 1 - 3 g1 = (1 - f1 A1,max ) gk is also the probabilty that only one ACk (primary) gains access to the medium during a slot. So, the probability k that a transmission of ACk does not collide is give as

k = gk .

3.3

Modeling the backoff process

The backoff process is modeled by using a Discrete Time Markov Chain (DTMC) where each state of the chain for an AC in a particular backoff phase is represented by two counters: the freezing counter, Bk , and the backoff counter, j . Fig. 3.2 shows the basic building block of the Markov chain model showing the behaviour of freezing countdown process of an AC during backoff phase i with backoff counter value j . In IEEE 802.11ac amendment the value of AIF SNk is kept same as in IEEE 802.11e so that the number of states in the freezing counter is not changed in the amendment. However, the condition for

61

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

changing the state is now different. In IEEE 802.11ac amendment, the secondary AC can participate in packet transmission even during backoff countdown process. Each block has two external inputs: P ink,i [1], which is the vertical input coming from the previous backoff phase i - 1 , and P ink,i [2] which is the lateral input coming from the previous backoff state j - 1 within the same backoff phase i. For backoff counter value of j = Wk,i - 1, lateral input probability P ink,i [2] is zero. A freezing counter counts down the AIF Sk period for ACk . For simplicity, we assume that the secondary ACs can only be considered for MU-TXOP sharing when they are in the backoff countdown process. As a result, if the medium gets busy during the freezing countdown process, freezing counter is restarted. For non-zero backoff counter (j = 0), if the freezing counter becomes zero and the medium is sensed idle, the backoff counter is decremented and the state of the Markov chain is moved to next basic block with probability gk as shown in Figure 3.2. If the medium is not idle after freezing counter reaches zero (Bk = 0; j = 0), any of the following three events can take place: · If ACk is not considered for MU-TXOP sharing by the primary AC, the freezing counter is restarted with probability (1 - gk )(1 - f sk ), · if ACk is considered for MU-TXOP sharing and queue does not become empty due to transmission as secondary AC, the freezing counter will not be restarted and the backoff counter remains at the same state with probability f sk (1 - gk )(1 - k,0 ) where, k,0 denotes the probability that the queue of ACk is empty after transmission, and · If ACk is considered for MU-TXOP sharing and queue becomes empty, ACk starts proactive zeroth backoff with probability f sk (1 - gk )k,0 . ACk , which acts as sec62

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

ondary AC, resumes backoff countdown at the end of transmission if the queue is not empty after transmission. When the backoff counter reaches zero (j = 0), we assume that ACk can not be considered for MU-TXOP sharing any more and there will be no loop back from bottom to the top of the basic block.

3.3.1

Sum of the probabilities of the freezing block states:

Now let us derive the sum of the state probabilities in the freezing block for any non zero value of backoff counter.

AC3 : For AC3 the basic block reduces to only one state because there is no freezing counter (B3 = 0) for AC3 . We can write the state transition equation:

b3,i,j,0 = P ink,i [1] + P ink,i [2] + b3,i,j,0 (1 - g3 )(1 - f sk ) + b3,i,j,0 (1 - g3 )f sk (1 - 3,0 ) (3.9)

which after rearranging we get, P ink,i [1] + P ink,i [2] 1 - (1 - g3 )(1 - f sk 3,0 )

b3,i,j,0 =

j=0

(3.10)

Here, k,0 is the probability that queue of the ACk is empty after the departure of an MPDU. Let us now define a parameter Fnl[3] =
1 . 1-(1-g3 )(1-3,0 )

For j = 0, there will be no loopback

63

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Figure 3.2: Basic block of the Markov chain model

64

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

for the bottom state and the state probability is given as

b3,i,0,0 = P ink,i [1] + P ink,i [2]

j=0

and Fl[3] = 1 .

AC2 : For AC2 , the maximum value of freezing counter is A3,max = B2 . We can write the state transition equation as
A3,max

b2,i,j,B2 =
n=1

b2,i,j,n (1 - f3 ) + b2,i,j,0 (1 - g2 )(1 - f sk ) + P ink,i [1]

We can express other freezing block states as

b2,i,j,B2 -1 = f3 b2,i,j,B2 b2,i,j,B2 -2 = f3 b2,i,j,B2 -1
2 b2,i,j,B2 = f3

. . . b2,i,j,1 = f3 3,max b2,i,j,B2 b2,i,j,0 = f3 b2,i,j,1 + (1 - g2 )f sk (1 - 2,0 )b2,i,j,0 + P ink,i [2] (3.11)
A -1

65

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

which after re-arranging and substituting we get, (f3 )A3,max b2,i,j,B2 + P ink,i [2] 1 - f sk (1 - g2 )(1 - 2,0 ) P ink,i [2] (f3 )A3,max = + b2,i,j,B2 1 - f sk (1 - g2 )(1 - 2,0 ) 1 - f sk (1 - g2 )(1 - 2,0 )

b2,i,j,0 =

(3.12)

Substituting equation (3.12) in equation (3.11) and simplifying we get P ink,i [1] + r2 P ink,i [2] A3 ,max [1 - r2 ] f3

b2,i,j,B2 =

(3.13)

where, (1 - g2 )(1 - f sk ) 1 - f sk (1 - g2 )(1 - 2,0 )

r2 =

(3.14)

Now substituting (3.13) in (3.12) we get the value of state b2,i,j,0 in terms of P ink,i [1] and P ink,i [2] as P ink,i [2] 1 - f sk (1 - g2 )(1 - 2,0 ) (f3 )A3,max P ink,i [1] + r2 P ink,i [2] + A3 ,max 1 - f sk (1 - g2 )(1 - 2,0 ) [1 - r2 ] f3 P ink,i [1] + P ink,i [2] = {1 - f sk (1 - g2 )(1 - 2,0 )} (1 - r2 )

b2,i,j,0 =

(3.15)

Eqn. (3.15) is also the general form of bk,i,j,0 . The sum of the state probabilities of the freezing block for j = 0 is given as

66

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

A3,max

b2,i,j,n = b2,i,j,0 + b2,i,j,1 + . . . + b2,i,j,B2
n=0

P ink,i [2] 1 - f sk (1 - g2 )(1 - 2,0 ) P ink,i [1] + r2 P ink,i [2] (f3 )A3,max + A3 ,max 1 - f sk (1 - g2 )(1 - 2,0 ) [1 - r2 ] f3 =
2 + . . . + f3 3,max + b2,i,j,B2 1 + f3 + f3 A -1

(3.16)

which, after simplification can be expressed as
A3,max

b2,i,j,n =
n=0

P ink,i [2] + [P ink,i [1] + r2 P ink,i [2]] F l[2] 1 - f sk (1 - g2 )(1 - 2,0 )

(3.17)

where,
3,max n 1 f3 n=0 + . A3,max (1 - r2 ) [1 - f sk (1 - g2 )(1 - 2,0 )] (1 - r2 )f3

A

-1

F l[2] =

(3.18)

A3,max b2,i,j,n n=0

is the probability that the freezing counter has a duration of n timeslots

for AC2 for non zero value of backoff counter (j = 0). Now we derive the probability for the duration of freezing countdown for backoff counter value j = 0. In this case there will be no loopback from bottom (b2,i,0,0 ) to the top (b2,i,0,B2 ) of the freezing countdown block. We can write the state transition equations

67

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

as follows:
A3,max

b2,i,0,B2 = P ink,i [1] + (1 - f3 )
n=1

b2,i,0,n

b2,i,0,B2 -1 = f3 b2,i,0,B2 b2,i,0,B2 -2 = f3 b2,i,0,B2 -1
2 b2,i,0,B2 = f3

. . . b2,i,0,1 = f3 3,max b2,i,0,B2 b2,i,0,0 = f3 b2,i,0,1 + P ink,i [2] = (f3 )A3,max b2,i,0,B2 + P ink,i [2] (3.19)
A -1

b2,i,0,B2 can be re-written using (3.19) as

b2,i,0,B2 = P ink,i [1] + (1 - f3 ) b2,i,0,B2 + b2,i,0,B2 -1 + . . . + b2,i,0,1 = P ink,i [1] f3 3,max
A

(3.20)

Substituting equation (3.20) in equation (3.19) we get,

b2,i,0,0 = P ink,i [1] + P ink,i [2]

(3.21)

Eqn. (3.21) is also the general form of bk,i,0,0 . The sum of the state probabilities for the

68

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

freezing block for j = 0 is given by:

A3,max -1

b2,i,0,n = P ink,i [1] + P ink,i [2] + b2,i,0,B2 + b2,i,0,B2 -1 + . . . + b2,i,0,1
n=0

= P ink,i [2] + P ink,i [1]F nl[2]

(3.22)

where,F nl[2] is given by,
A3,max -1 n=0 A f3 3,max n f3

F nl[2] = 1 +

(3.23)

Similarly we can derive the sum of the probabilities of freezing block for AC1 and AC0 . In general the sum of the state probabilities in the freezing block for ACk<3 when there is loopback from the bottom state is given as
Bk

bk,i,j,n =
n=0

P ink,i [2] + P ink,i [1] + rk P ink,i [2] F l[k] 1 - f sk (1 - gk )(1 - k,0 )

k<3 (3.24)

where,
3 Ai,max -1 3

F l [k ] =

1 1 - f sk (1 - gk )(1 - k,0 )

fin +
i=k+1 n=0 3 l=i+1

fl

Al,max

(3.25)

(1 - rk )
i=k+1

A fi i,max

The sum of the state probabilities in the freezing block for ACk<3 when there is no

69

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

loopback from the bottom state is given as
Bk

bk,i,j,n = P ink,i [2] + P ink,i [1]F nl[k] ,
n=0

k<3

(3.26)

where,
3 Ai,max -1 3

fin F nl[k] = 1 +
i=k+1 n=0 3 A fi i,max i=k+1 l=i+1

fl

Al,max

.

(3.27)

3.3.2

PGF for the duration of TXOP allocation

We denote the MPDU of primary AC as priority MPDU and MPDUs of secondary ACs as non priority MPDUs. The MPDU burst transmitted in a single TXOP allocation must contain at least one priority MPDU. The rest could be either priority MPDUs or non priority MPDUs. For our analysis we consider four queues each associated with one antenna covering 90 degree surface angle. Each queue contains both the priority and non priority MPDUs. The priority MPDUs are transmitted first and if there is no priority MPDU in a particular queue, non-priority MPDU is considered for transmission. The number of bursts transmitted during MU-TXOP depends on TXOP duration. To obtain the PGF for TXOP duration, we first need to derive the PGF for the number of MPDUs in each burst and then we derive the PGF for the number of bursts during TXOP duration. We assume equal packet arrival probability in all our directional queues. Let us define k,0 be the probability that the queue of ACk is empty after the departure of an MPDU and k,0,d be the probability that there is no MPDU of ACk in the direction of d ={1,2,3,4}. We define

70

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Table 3.1: Transmission matrix for packets in two directions Direction 1 Direction 2 Direction 3 Direction 4 P P E E P S E E S P E E P E P E P E S E S E P E P E E P P E E S S E E P E P P E E P S E E S P E E P E P E P E S E S E P E E P P E E P S E E S P

k,d to be the probability that the burst contains MPDU for d directions. Note that the burst contains MPDU in only one direction when there is no TXOP sharing. We also assume that if primary AC has MPDUs for all directions, these MPDUs get priority over the MPDUs from secondary ACs. We can write the probability k,1 as

k,1 = (1 - f sk ) (1 - k,0,1 ) + (1 - k,0,2 ) + (1 - k,0,3 ) + (1 - k,0,4 )

(3.28)

where k,0,d is the probability that there is no priority MPDU in the queue for the direction d. The transmission matrix for MPDUs in two directions is shown in Table: 3.1 where, P, S and E denote primary, secondary and empty respectively. From Table: 3.1 we can derive 71

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

the probability considering the fact that packet transmission in two different directions take place only during MU-TXOP sharing.

k,2 = f sk [k,0,3 k,0,4 (1 - k,0,1 )(1 - k,0,2 ) + k,0,3 k,0,4 (1 - k,0,1 ) k,0,2
h=k

(1 - h,0,2 ) + k,0,3 k,0,4 (1 - k,0,2 )k,0,1
h=k

(1 - h,0,1 ) (1 - h,0,3 )
h=k

+k,0,2 k,0,4 (1 - k,0,1 )(1 - k,0,3 ) + k,0,2 k,0,4 (1 - k,0,1 )k,0,3 +k,0,2 k,0,4 (1 - k,0,3 )k,0,1
h=k

(1 - h,0,1 ) + k,0,2 k,0,3 (1 - k,0,1 )(1 - k,0,4 ) (1 - h,0,4 ) + k,0,2 k,0,3 (1 - k,0,4 )
h=k

+k,0,2 k,0,3 (1 - k,0,1 )k,0,4 k,0,1
h=k

(1 - h,0,1 ) + k,0,1 k,0,4 (1 - k,0,2 )(1 - k,0,3 ) + k,0,1 k,0,4 (1 - k,0,2 ) (1 - h,0,3 ) + k,0,1 k,0,4 (1 - k,0,3 )k,0,2
h=k h=k

k,0,3

(1 - h,0,2 ) (1 - h,0,4 )
h=k

+k,0,1 k,0,3 (1 - k,0,2 )(1 - k,0,4 ) + k,0,1 k,0,3 (1 - k,0,2 )k,0,4 +k,0,1 k,0,3 (1 - k,0,4 )k,0,2
h=k

(1 - h,0,2 ) + k,0,1 k,0,2 (1 - k,0,3 )(1 - k,0,4 ) (1 - h,0,4 ) + k,0,1 k,0,2 (1 - k,0,4 )
h=k

+k,0,1 k,0,2 (1 - k,0,3 )k,0,4 (1 - h,0,3 ) .
h=k

k,0,3

(3.29)

where, h = {0, 1, 2, 3}. If we assume identical Poisson arrival process for queues in all

72

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

four directions, we can write k,0,1 = k,0,2 = k,0,3 = k,0,4 = k,0 /4. The probability that queue of any direction is not empty, is given by (1 - k,0 )/4. Then equations ( 3.28) and (3.29) reduce to 1 - k,0 4

k,1 = 4(1 - f sk )

and 1 - h,0 1 2 2 3 f sk k, 0 (1 - k,0 ) + 2k,0 (1 - k,0 ) 4 4 4 h=k

k,2 = 6

respectively. Similarly we get, 1 - h,0 1 2 2 f sk k,0 (1 - k,0 )3 + 3k, 0 (1 - k,0 ) 4 4 4 h=k - k,0 )
h=k

k,3 = 4

+

3 3k, 0 (1

1 - h,0 4

2

and 1 1 - h,0 4 3 f s (1 -  ) + 4  (1 -  ) k k, 0 k, 0 k, 0 44 4 h=k
2 6k, 0 (1

k,4 =

+

- k,0 )

2 h=k

1 - h,0 4
3

2

+

3 4k, 0 (1

- k,0 )
h=k

1 - h,0 4

73

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

In general d can be expressed as   1-k,0   , (1 - f sk ) d!(44!  -d!) 4           f sk    44       
4 d d d j =1 j 1-h,0 4

d=1

k,d =

(1 - k,0 )j (k,0 )4-j
d-j

h=k

.

d>1

The PGF for the number of packets in the burst k (z ) is given by,
4

k (z ) =
d=1

k,d z d

(3.30)

and the average number of packets in a burst is given by M bk = k (1). Let Mk be the maximum number of bursts that can be transmitted during TXOP period and k,µ be the probability that µ number of bursts are transmitted during TXOP period. (z ), the PGF for the number of packets transmitted during TXOP period is given by,
Mk

k ( z ) =
µ=1

k,µ k (z )µ

(3.31)

PGF for the duration of a single burst Sbk (z )is given by,
4

Sbk (z ) =
d=1

k,d z {ld +d(ba+sif s)} (3.32)

= z {ld +M bk (ba+sif s)}

where ld and ba are length of data and block acknowledgement respectively. The PGF for

74

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

total TXOP duration is given by,
Mk

Stk (z ) = z

rts+M bk (sif s+cts) µ=1

k,µ Sbk (z )µ

(3.33)

3.3.3

PGF for the duration of access to the medium

The medium becomes busy either by unsuccessful reservation of bandwidth or by successful transmission of packets from ACk . We will derive the PGF for both the durations separately.

3.3.4

PGF for the duration of unsuccessful bandwidth reservation

During bandwidth reservation RTS can collide due to multiple transmissions or RTS can be corrupt due to error in the channel. Since there is no collision for CTS, the only source of error for CTS is the channel error. The PGF for the duration for which the medium is busy due to collision or corruption of RTS is given as z rts+M bk (sif s+cts) . For error in CTS, other ACs hear the NAV and update accordingly. The PGF for the duration for which the medium is busy due to error in CTS is given as z rts+M bk (sif s+cts)+ld +M bk (sif s+ba) . We combine the two PGFs by the probability of no RTS collision k and obtain the PGF for unsuccessful bandwidth reservation Ctk (z ) as

Ctk (z ) = k r (1 - c )z rts+M bk (sif s+cts)+ld +M bk (sif s+ba) + [1 - k r (1 - c )] z rts+M bk (sif s+cts) (3.34)

75

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

3.3.5

PGF for the duration of successful access to the medium during Ar period

During A3,max period, only AC3 can access the medium with probability 3 . The PGF for the duration of access for AC3 is given by

Sw3 (z ) =

3 St3 (z ) 3

(3.35)

Here 3 in the denominator is the normalization factor for A3,max period. During A2,max period both AC3 and AC2 can access the medium. So, we can write the PGF for the duration of successful access to the medium by all possible ACs during A2,max is given as 3 St3 (z ) + 2 St2 (z ) 3 + 2

Sw2 (z ) =

(3.36)

In general, the PGF for the duration of successful access to the medium by all ACs during Ar , {r = 0 . . . 3} period can be written as
3 i=r i Sti (z ) 3 i=r i

Swr (z ) =

(3.37)

3.3.6

PGF for time spent in the freezing countdown process of ACk in no loop condition

Time spent in the freezing countdown process to traverse AIF Sk , is the basic component of the total time required in the backoff process of any ACk . When AC3 gains the

76

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

access to the medium during A3,max period, the freezing counter values of ACk k={0,1,2} are reset to AIF Sk , k={0,1,2} values respectively and kept frozen until the medium becomes idle. During this period the probability that a successful transmission takes place is given by 3 . This is the probability P f a3 that the freezing counters of ACk k={0,1,2} restart due to a successful transmission during A3,max period. We can write,

P f a3 = 3

(3.38)

During A2,max period, either AC2 gains access to the medium and AC3 is idle or AC3 gains the access to the medium and AC2 is idle. The freezing counters of AC1 and AC0 are reset and kept frozen until the medium becomes idle again. The probability that the medium becomes busy due to successful transmission during period A2,max is given by 2 (1 - 3 ) + 3 (1 - 2 ) and the probability P f a2 that the freezing counters of AC1 and AC0 will be restarted is given by

P f a2 = 2 (1 - 3 ) + 3 (1 - 2 )

(3.39)

In general, the probability P f al that the freezing counters of ACk<l will be restarted due to a successful transmission during Al , l = {0, 1, 2, 3} period is given by
3

P f al =
i=l

i

3 j =l (1

- j )

1 - i

(3.40)

Since fl is the probability that the medium is idle during the period Al , 1 - fl is the probability that the medium is busy due to successful transmission or a collision. The probability

77

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

P f cl that the freezing counter is restarted for ACk<l due to a collision during Al is given by:

P f cl = 1 - fl - P f al

(3.41)

For AC3 there will be no restart of the freezing counter and AC3 needs to traverse AIF SN3 slots before it can start transmission. If we consider no loopback from bottom to the top of freezing countdown block as shown in Figure 3.2, we can write the PGF for time spent in freezing countdown of AC3 as

Bf nl3 (z ) = z AIF SN3

(3.42)

Let Bf nl2 (z ) be the PGF for the time spent in the freezing countdown of AC2 for every slot boundary within the period of B2 . When B2 has a duration of 1 slot two events can take place at the slot boundary : 1) 1 - f3 is the probability that the medium becomes busy due to transmission from higher priority AC. In this case the freezing counter of AC2 is kept frozen for the duration the medium remains busy and the freezing counter is reset to the value of AIF SN2 , 2) f3 is the probability that the medium is idle and the freezing countdown ends. In this case Bf nl2 (z ) has a value of 1 timeslot. We can write Bf nl2 (z ) for the case when B2 has a duration of 1 timeslot as

Bf nl2 (z ) = (1 - f3 )zBf nl2 (z )

P f a3 Sw3 (z ) + P f c3 Ct(z ) + f3 z 1 - f3

(3.43)

78

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

The first part of the right hand side of the equation (3.43) has 3 factors: (1 - f3 )z is for the slot required to determine that the medium is busy with probability 1-f3 , Bf nl2 (z ) is the time required to countdown the value of AIF SN2 again and
P f a3 Sw3 (z )+P f c3 Ct(z ) 1-f3

is

the time for which the freezing countdown is kept frozen. When B2 has a duration of 2 timeslots, from similar argument, we can write the PGF as P f a3 Sw3 (z ) + P f c3 Ct(z ) 1 - f3 P f a3 Sw3 (z ) + P f c3 Ct(z ) + f3 z (1 - f3 )zBf nl2 (z ) + (f3 z )(f3 z ) 1 - f3

Bf nl2 (z ) = (1 - f3 )zBf nl2 (z )

For B2 = A3,max we can write,

P f a3 Sw3 (z ) + P f c3 Ct(z ) (1 - f3 )z Bf nl2 (z ) = Bf nl2 (z ) 1 - f3

A3,max -1

(f3 z )l + (f3 z )A3,max
l=0

(3.44) which after simplification we get,

Bf nl2 (z ) =

(f3 z )A3,max 1-
P f a3 Sw3 (z )+P f c3 Ct(z ) (1 1-f3

- f3 )z

A3,max -1 (f3 z )l l=0

(3.45)

Similarly we can drive Bf nl1 (z ) and Bf nl0 (z ). Equations (3.42) and (3.45) are the PGFs for time required for the freezing countdown process. The generalized form of the PGF for freezing countdown time for ACk k={0, 1, 2} can be expressed as

79

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Bf nlk (z ) =

z AIF SNk 1-
3 P f ai Swi (z )+P f ci Ct(z ) i=k+1 1-fi

3 Ai,max i=k+1 (fi z ) Ai,max -1 (zfi )n (1 - n=0

fi )z

3 Al,max l=i+1 (zfl )

3.3.7

Backoff counter suppression probability of ACk due to medium busy

The decrement of the backoff counter starts when the freezing counter reaches zero and the medium is idle. ACk can be in backoff state in the areas Alk . Backoff suppression probability P bs3,3 for AC3 in area A3 is zero since only AC3 is in backoff state and no transmission by any other AC is possible. Backoff suppression probability P bs3,2 for AC3 in area A2 is 2 since AC3 is in backoff state and only AC2 can transmit during A2 period. Similarly, during A1 period either AC1 transmits and AC2 is idle or AC2 transmits and AC1 is idle . We obtain P bs3,1 as 1 (1 - 2 ) + 2 (1 - 1 ). We can express the backoff counter suppression probability as
3

P bsk,l =
i= l

i 3 k j =l (1 - j ) - (1 - k )(1 - i ) (1 - k )2

3

(1 - j )
j =l

for l  k

(3.46)

The probability that the backoff counter will be suppressed due to collision on the medium is given by fl - P bsk,l 1 - k

P bck,l = 1 -

lk

(3.47)

80

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac
fl 1-k

where,

is the probability that the channel is idle during the period Al .

The time required to conduct a single decrement of a backoff counter is classified into two groups as done by Misic et. al in [10]. The first group known as vertical transfer PGF is the time required to traverse the freezing counter either when the counter enters the backoff phase i from backoff phase i-1 due to unsuccessful transmission or undergoing proactive zeroth backoff after a successful transmission. The second group known as the lateral transfer PGF is the time required to decrement the backoff counter within the same backoff phase i. We can derive the vertical transfer PGF Bf lk (z ) for non-zero value of backoff counter by using equation (3.46) and Figure 3.2. Bf lk (z ) is the PGF for time required within the basic block and the time accounts for both the freezing countdown time and the loopback time. Bf nlk (z ) is the PGF for time required to traverse freezing counter value to zero during no loop condition. In the next slot if the medium is idle, backoff counter is decremented and the counter enters the next basic block which has a transfer PGF of Bf lk (z ) again. However, if the medium becomes busy due to transmission from another AC, two events can take place: 1) if there is no TXOP sharing at this point, the loop back from the bottom to the top of the basic block starts, and 2) if the packet is considered for transmission due to MU-TXOP, there will be no loop back to the top. With this argument, we can write the vertical PGF as Bf lk (z )

gk + f sk (1 - gk )(1 - k,0 ) P bsk,k Swk (z ) + P bck,k Ct(z ) =

zBf nlk (z ) (3.48)

1 - z (1 - f sk )(1 - gk ) P bsk,k Swk (z ) + P bck,k Ct(z ) To develop the lateral PGF Bf sk , we consider the time required to decrement the back81

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

off counter value. For traffic category k, the backoff counter decrement can occur anywhere in the periods Al,lk . Therefore, since for traffic class k, the backoff countdown may be suspended due to transmission in the periods Alk , we need to average the durations of medium occupancy over periods where traffic class k can transmit. In our model, as soon as the backoff counter is decremented by one, the state in the Markov chain moves to the next basic block. During this backoff counter decrement period if the medium become busy due to transmission from other AC, the backoff counter decrement of ACk is suspended for the duration the medium remains busy. From this argument we can derive lateral PGF that connects backoff and freezing blocks as follows: f0 P bs0,0 Sw0 (z ) + P bc0,0 Ct(z ) ) zBf l0 (z ) f0 1 - 0 1 - 1- 
0

Bf s0 (z ) = g0 z + (1 -

Bf s1 (z ) = g1 z + (1 - f1 1,max )(1 - + f1 1,max (1 -
A

A

f1 P bs1,1 Sw1 (z ) + P bc1,1 Ct(z ) ) f1 1 - 1 1 - 1- 
1

f0 P bs1,0 Sw0 (z ) + P bc1,0 Ct(z ) zBf l1 (z ) ) f0 1 - 1 1 - 1- 
1

Bf s2 (z ) = g2 z + (1 - f2 2,max ){P bs2,2 Sw2 (z ) + P bc2,2 Ct(z )} + f2 2,max (1 - f1 1,max ){P bs2,1 Sw1 (z ) + P bc2,1 Ct(z )} Bf s3 (z ) = g3 z + (1 - f3 3,max )(P bs3,3 Sw3 (z ) + P bc3,3 Ct(z )) + f3 3,max (1 - f2 2,max )(P bs3,2 Sw2 (z ) + P bc3,2 Ct(z )) + f2 2,max (1 - f1 1,max )(P bs3,1 Sw1 (z ) + P bc3,1 Ct(z )) + f1 1,max (P bs3,0 Sw0 (z ) + P bc3,0 Ct(z ))
A A A A A A A A

A

zBf l2 (z )

zBf l2 (z )

(3.49)

82

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

In the above equation (3.49), the full derivation for Bf s0 (z ) and Bf s1 (z ), and final form of Bf s2 (z ) and Bf s3 (z ) are shown. Now we are able to write the PGF for the duration of backoff phase i = 0 . . . mk for traffic class k = 0 . . . 3 as Bf nlk (z ) Bf lk (z ) Bk,i (z ) = + Wk,i Wk,i
Wk,i -1

{Bf sk (z )}l
l=1

(3.50)

The first part of the equation (3.50) takes into account the basic block with backoff counter value is zero whereas the second part takes into consideration all other basic blocks of Markov chain with non-zero backoff counter. We will gradually develop the PGF for total backoff time Bofk (z ) using long retry limit R > mk . For only 1 backoff phase i = 0, the total time required for backoff is Bk,i=0 times the probability that a successful transmission takes place at the end of 0-th backoff phase. We can express the PGF as

Bofk,i=0 (z ) = Bk,0 (z )k

When we write the PGF for the total backoff time for i = 1, we consider the time required for phase i = 0, time for an unsuccessful transmission at the end of phase i = 0 and time required for phase i = 1 followed by a successful transmission.

Bofk,i=1 (z ) = Bk,0 (z )(1 - k )Ct(z )Bk,1 (z )k = Bk,0 (z )Bk,1 (z )(1 - k )Ct(z )k

83

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Similarly, for i = 2 we get,

Bofk,i=2 (z ) = Bk,0 (z )Bk,1 (z )Bk,2 (z )(1 - k )2 Ct(z )2 k

In general the PGF for total backoff time for i = 0 . . . mk can be expressed as

mk

i

Bofk,i=0...mk (z ) =
i=0 j =0

Bk,j (z )(1 - k )i Ct(z )i k

If we consider retry limit R > mk then after mk retries, the backoff window is not changed and hence the backoff time required for each phase after mk retries is same. Therefore, backoff time from mk + 1 to R phases can be written as

R

mk

Bofk,i=mk +1...R (z ) =
i=mk +1 j =0

Bk,j (z )Bk,mk (z )(i-mk ) (1 - k )i Ct(z )i k

At the end of R-th retry if the transmission fails, the traffic class starts the backoff process from phase zero. Time required to start the backoff process from phase zero is given by:

mk

Bofk,i=R+1 (z ) =
j =0

Bk,j (z )Bk,mk (z )(R-mk ) (1 - k )(R+1) Ct(z )(R+1)

Therefore, the PGF for the total backoff time for traffic category k can be written as

84

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Bofk (z ) =Bofk,i=0...mk (z ) + Bofk,i=mk +1...R (z ) + Bofk,i=R+1 (z )
mk i

=
i=0 j =0 R

Bk,j (z )(1 - k )i Ct(z )i k
mk

+
i=mk +1 j =0 mk

Bk,j (z )Bk,mk (z )(i-mk ) (1 - k )i Ct(z )i k Bk,j (z )Bk,mk (z )(R-mk ) (1 - k )(R+1) Ct(z )(R+1)
j =0

+

(3.51)

The first two moments of this probability distribution can be found as Bofk =Bofk (1) and Bofk = Bofk (1) + Bofk (1). If there is a frame arrival during zeroth backoff phase for which bandwidth reservation is not successful, the PGF for total backoff time Bzofk (z ) includes all backoff phases except the zeroth phase and the PGF can be written as
(2)

mk

i

Bzofk (z ) =k +
i=1 j =0 R mk

Bk,j (z )(1 - k )i Ct(z )i k Bk,j (z )Bk,mk (z )(i-mk ) (1 - k )i Ct(z )i k

+
i=mk +1 j =0 mk

+
j =0

Bk,j (z )Bk,mk (z )(R-mk ) (1 - k )(R+1) Ct(z )(R+1)

(3.52)

The first two moments of this probability distribution can be found as Bzofk =Bzofk (1) and Bzofk = Bzofk (1) + Bzofk (1).
(2)

85

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

3.4

Queuing model of traffic category k

For any traffic class k, the possible outcomes during backoff process, after the backoff process, after the end of TXOP duration and at the end of idle state is represented by the Markov chain and a timing diagram as shown in Figs. 3.3 and 3.4, respectively. In Figure 3.4, all the downward arrows denote the arrival of packets and the rectangles denote the transmission of packets. According to IEEE 802.11ac protocol, the transmission of packet can take place even during backoff period V0 , V1 and V2 when ACk acts as a secondary AC. During backoff process of ACk if the packet is considered for MU-TXOP sharing by other higher priority ACs, then there is a probability that the queue of the ACk can be empty due to transmission during MU-TXOP. During the TXOP period, a maximum of Mk packets can be transmitted by the primary AC and if the primary AC shares the TXOP duration with the secondary ACs, we can assume that Mk bursts of packets are transmitted during TXOP period. Each burst can contain at best four packets in four directions. If any data frame of the primary AC is not acknowledged, retransmission is initiated within the TXOP period if enough time is left or after another backoff attempt. We have defined the following time periods between two successive transmissions: (a) ACk goes to proactive zeroth backoff at the end of TXOP period. We denote this proactive zeroth backoff period as V0 . The PGF for this time period Bk,0 (z ) is given in equation (3.50). The Laplace-Stieltjes Transformation (LST) of this time is given
 -s as Bk, 0 (s) = Bk,0 (e ). The mass probability for i frames arrival during this period 0 is denoted as vk,i and the PGF for the number of frame arrival during this period is  Fk,0 (z ) = Bk, 0 (k - zk ) =  i=0 0 i vk,i z.

During the backoff process, secondary AC gets free transmission opportunity if re86

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Pidle

Wk,0 ­ 1 gk
(1­gk)fs

1 Wk,0

k,0

1 ­ f0
1 ­ f0

­1, Bk f0

(1 ­ vk,0)

0

0(1

­

*) k,0

0 vk,0

0
0) * 0 k,0

1 Wk,0

(1 ­ vk,00 )(1 ­
0 (1 ­ vk,0)

­1, 1 f0 1­ 0 ­1, 0 * ) 0(1 ­ k,0

Pin =

k

k * k,0

* k k,0

1 Wk,0 Wk,0 ­ 1 gk
(1­gk)fs
k,0

1 Wk,0 Wk,0 ­ 2
gk

1 Wk,0

1 Wk,0

1
gk
k,0

0
* k k,0 * k,0)

(1­gk)fs 1 Wk,1 Wk,1 ­ 1 gk
(1­gk)fs 1 Wk,i Wk,i ­ 1
k,0

1­
(1­gk)fs
k,0

k

k(1 ­

1 Wk,1 Wk,1 ­ 2 gk (1­gk)fs
1 Wk,i Wk,i ­ 2

1 Wk,1 1 gk
k,0

1 Wk,1 0
k * k,0
k k(1

1­ (1­gk)fs 1 Wk,i
k,0

­

* ) k,0

1 Wk,i

1 gk
k,0

0
k * k,0 k,0

gk (1­gk)fs

k,0

gk (1­gk)fs

(1­gk)fs

k(1 ­

* ) k,0

Figure 3.3: Markov Chain for ACk

87

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

source is available. The backoff count down of secondary ACs are suspended during this TXOP sharing. For ACk , the transmission can take place either at the end of V0 or during the period V0 . In our model we assume that if the queue of ACk becomes empty due to MU-TXOP sharing during the backoff process, ACk starts proactive zeroth backoff. Otherwise, ACk resumes the decrement of the backoff counter when the medium becomes idle. We denote the remaining backoff time during V0 period as
+ V0+ and the number of packet arrival during the remaining backoff period as Fk, 0 (z ). + The LST of the elapsed / remaining backoff time during V0 is given by Bk, 0 (s) =
 (s) 1-Bk, 0

sB k,0

 where B k,0 is the mean value of Bk, 0 (s). The PGF for the number of packet

+ + arrival during the residual backoff period is Fk, 0 (z ) = Bk,0 (k - zk ).

(b) When a frame arrives during zeroth backoff phase and the bandwidth reservation is not successful, ACk goes to the next backoff phase i = 1. So, the rest of the backoff period after zeroth backoff is denoted by V1 and has a PGF of Bzofk (z ). The LST of
 -s this PGF is give by Bk, 1 (s) = Bzofk (e ). The mass probability that i frames arrive 1 during V1 period is denoted as vk,i . PGF for the number of frame arrival during this  time is Fk,1 (z ) = Bk, 1 (k - zk ) =  i=0 1 i z. vk,i

+ The LST of the elapsed/remaining backoff time during V1 is given by Bk, 1 (s) =
 (s) 1-Bk, 1

sB k,1

 where B k,1 is the mean value of Bk, 1 (s) and the PGF for the number of

+ + packet arrival during the residual backoff period is Fk, 1 (z ) = Bk,1 (k - zk ).

(c) At the end of TXOP sharing if the buffer is not empty, ACk goes through the full backoff process. Duration for full backoff process is denoted by V2 and the PGF
 -s and LST of this time period are given by Bofk (z ) and Bk, 2 (s) = Bofk (e ). The

88

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac
2 . PGF for the mass probability that i frames arrive during V2 period is denoted as vk,i  number of frame arrival during this time is Fk,2 (z ) = Bk, 2 (k - zk ) =  i=0 2 i vk,i z.

+ The LST of the elapsed/remaining backoff time during V2 is given by Bk, 2 (s) =
 (s) 1-Bk, 2

sB k,2

 where B k,2 is the mean value of Bk, 2 (s). The PGF for the number of packet

+ + arrival during the residual backoff period is Fk, 2 (z ) = Bk,2 (k - zk ).

(d) ACk enters idle state if during zeroth backoff there is no packet arrival. As soon as the first packer arrives, ACk exits the idle state and traverse AIF Sk slots. (e) V3 is the time period taken by ACk to traverse AIF SNk . If the medium is idle for AIF SNk period, transmission can take place immediately after AIF Sk period. Otherwise, a full backoff procedure is initiated. The PGF for V3 period is given by V3 (z ) =
AIF SNk -1 (zf0 )i (1 i=0  - f0 )z + z AIF SNk . LST has a form Bk, 3 (s) =

AIF SNk -1 -s(i+1) i e f0 (1 i=0

- f0 )e-s + e-sAIF SNk . The mass probability of i frames

3 arrival during this period is denoted by vk,i and the PGF for the number of arrival is  Fk,3 (z ) = Bk, 3 (k - zk ) =  i=0 3 i vk,i z . Since V3 is the freezing countdown period,

there will be no TXOP sharing during this period. The state of the queue of ACk is modeled at the beginning of TXOP and at the departure of each packet during the TXOP period. The mass probability of having i frames in the
+ buffer of ACk at the beginning of TXOP is denoted by qk,i (k = 0..3, i > 0) and the mass

probability of having i frames in the buffer after the departure of µ-th frame is denoted by k,i (µ = 1..Mk ). For simplicity of our queuing model we assume that during MU-TXOP sharing the burst contains a maximum of four frames, one from each traffic category. Based on timing
(µ)

89

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Figure 3.4: Timing diagram of queuing model diagram in Figure 3.4 and Markov chain model in Figure 3.3 the equation for state of ACk buffer at the beginning of the TXOP period can be written as

Mk + qk,i

Mk (µ) 3 k,0 vk,i -1

i- 1 (µ) k,0 3 2 vk,j vk,i -j j =1

=

aif sk 0 f0 vk,0 µ=1

+ (1 -
i- 1 (µ) k,0

aif sk f0 )(1

-

0 f sk )vk, 0 µ=1 Mk

Mk

+ f sk (1 -

aif sk 0 f0 )vk,0 µ=1 Mk i

2+ 3 vk,j vk,i -j j =1

+ k 
µ=1

0+ 0 k,0 vk,i (1 - f sk ) + f sk vk,i

(µ)

+ (1 - k  )
µ=1 i (M ) k,j k j =1

k,0

(µ) l=1

0 1 0 1+ vk,l vk,i-l (1 - f sk ) + f sk vk,l vk,i-l Mh =k i 0+ k,j vk,i -j µ=1 j =1 (µ)

+

2 vk,i -j (1 Mh =k

- f sk ) +
i (µ)

2+ f sk vk,i -j

+ f sk k 

i-j

+ f sk (1 - k  )
µ=1 j =1 Mh =k i (µ) 1+ k,j vi -j µ=1 j =1

k,j

0+ 1+ 1 (1 - f sk )vi vk,l -j -l + f sk vi-j -l l=0 Mh = k i 2+ k,j vi -j µ=1 j =1 (µ)

+ f sk

+ f sk

(3.53)

The first component of the right hand side of Equation (3.53 ) corresponds to the case when the ACk enters into idle state after the zeroth backoff without any packet arrival. As 90

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

soon as one packet arrives, ACk exits the idle state and enters into backoff period V3 . During this period ACk traverse through AIF Sk counter. The queue of ACk is incremented by the number of packets arrive during the count down of AIF Sk counter. Packet transmission takes place at the end of V3 period when the counter value reaches zero. The second component of the Equation (3.53 ) represents the case when the medium becomes busy due to transmission from ACh=k . We assume that no MU-TXOP takes place during the decrement of AIF Sk counter. In this situation, ACk enters full backoff phase for a duration of V2 . ACk starts transmission at the end of V2 period if there is no TXOP sharing by other ACs within the backoff period V2 or transmission can take place within V2 period if other ACs share MU-TXOP. The third component of the Equation (3.53 ) represents the case when the medium becomes busy during V2 period due to transmission from ACh=k and MU-TXOP sharing takes place during V2 period. The fourth term represents the case when there is packet arrival during zeroth backoff process and transmission is successful at the end of the backoff time V0 or during zeroth backoff phase if MU-TXOP sharing by other ACh=k is possible. The fifth term corresponds to the case when the transmission at the end of zeroth backoff is not successful. In this scenario ACk starts the next backoff phase (i = 1) for a period of V1 . During V1 period if other ACh=k gets transmission opportunity and MU-TXOP sharing is possible, ACk can start transmission. If no TXOP sharing is possible or medium is idle for V1 period, ACk starts transmission at the end of backoff period V1 The sixth component of the equation corresponds to the case when the buffer is not empty at the end of previous TXOP period and ACk executes full backoff process for the duration of V2 . Transmission can take place either at the end of the backoff duration V2 or

91

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

during V2 . The last four components of the equation represents the cases when MU-TXOP sharing has taken place during backoff period and the queue of ACk is not empty at the end of TXOP sharing. For simplicity of our calculation we assume that an average number of Msh frames are transmitted by the secondary ACs during TXOP sharing. The value of Msh is defined as
3 h=k h Mh h=k h

Msh = (1/4)
k=0

(3.54)

where, h = {0, 1, 2, 3}. We can derive the generating function Q+ k (z ) for the number of packets in the buffer of ACk immediately before the start of TXOP and the generating function k,µ (z ) for number of packets in the queue after the transmission of each packet. We define the PGFs as


Q+ k (z ) =
i=1 

+ i qk,i z

k,µ (z ) =
i=0

k,i z i

(µ)

µ = 1..Mk .

92

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac The value of Q+ k (z ) can be obtained as
 Mk aif sk 0 vk,0 z i f0 i=1  µ=1 Mk i- 1 (µ) k,0 µ=1 Mk aif sk 0 )vk,0 z i f sk (1 - f0 i=1  Mk µ=1 i-1 j =1 2+ 3 vk,j vk,i -j j =1 3 2 vk,j vk,i -j 3 k,0 vk,i -1 (µ)

Q+ k (z )

=

+
i=1 

z (1 -

i

aif sk )(1 f0

-

0 f sk )vk, 0

+

k,0

(µ)

+
i=1 

z i k 
µ=1 i

0+ 0 k,0 vk,i (1 - f sk ) + f sk vk,i Mk i (µ) k,0 µ=1 l=1 0 1 0 1+ vk,l vk,i-l (1 - f sk ) + f sk vk,l vk,i-l

(µ)

+
i=1 

z (1 - k  )
i

+
i=1 

zi
j =1

2+ 2 k,j k vk,i -j (1 - f sk ) + f sk vk,i-j Mh =k i 0+ k,j vk,i -j µ=1 j =1 Mh =k i i-j (µ)

(M )

+
i=1 

z f sk k  z i f sk (1 - k  )
i=1 

i

+

k,j
µ=1 j =1 Mh =k i

(µ) l=0

0+ 1 vk,l (1 - f sk )vi -j -l

1+ +f sk vi -j -l + i=1  Mh =k

z i f sk
µ=1 j =1 i 2+ k,j vi -j . (µ)

1+ k,j vi -j

(µ)

+
i=1

z i f sk
µ=1 j =1

(3.55)

We assume that during AIF Sk countdown, the secondary ACs are not eligible for TXOP sharing. For a low load condition, we also assume that the queue of the secondary ACs will be empty after MU-TXOP sharing and secondary ACs go to proactive zeroth

93

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

backoff process after MU-TXOP sharing. After summation, changing of summation order and simplification Equation (3.55) becomes,

Mk

Q+ k (z )

=

aif sk 0 vk,0 Fk,3 (z ) zf0 µ=1

k,0

(µ)

Mk

+ z (1 -

aif sk )(1 f0

-

0 f sk )vk, 0 Fk,2 (z )Fk,3 (z ) µ=1 Mk

k,0

(µ)

aif sk + 0 + z (1 - f0 )f sk vk, 0 Fk,2 (z )Fk,3 (z ) µ=1 Mk

k,0 +

(µ)

Mk (µ) k,0 + k f sk Fk, 0 (z ) Mk

+ k  (1 - f sk ) Fk,0 (z ) -

0 vk, 0 µ=1

-

0 vk, 0 µ=1

k,0

(µ)

+ (1 - f sk )(1 - k  )Fk,1 (z ) Fk,0 (z ) -
+ 0 + f sk (1 - k  )Fk, 1 (z ) Fk,0 (z ) - vk,0

0 vk, 0 µ=1

k,0
(µ)

(µ)

Mk

k,0
µ=1

+ (1 - f sk )Fk,2 Mk (z ) - k,0 k

(M )

+ k + f sk Fk, 2 Mk (z ) - k,0

(M )

(3.56)

We can develop the equations for the number of frames left in the queue after the departure of µ-th frame. The Laplace-Stieltjes Transform (LST) of the service time of a single
-s{ld +M bk (sif s+ba)} burst can be obtained by replacing z by e-s in equation (3.32). Sb . k (s) = e

Let us define the PGF for the number of frames arrive in the queue during the service of a

94

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac single burst as Ak (z ) and can be obtained by replacing s by k - k z in Sb k (s).

Ak (z ) = e(k (z-1))(ld +M bk (sif s+ba))


=
i=0

ak,i z i

(3.57)

where, ak,i denotes the mass probability of i frames arrival during a frame service time. We can write the equations for the number of frames in the buffer after the departure of first frame during the MU-TXOP service period as

+ k,0 = qk, 1 ak,0 + + + k,1 =  qk, 2 ak,0 + qk,1 ak,1 + (1 -  )qk,1 ak,0 (1)

(1)

. . .
i+1 (1) k,i i + qk,j ak,i-j +1 j =1

=

+
j =1

+ qk,j (1 -  )ak,i-j

i>0 (3.58)

In the above equation (3.58), we have considered a noisy channel condition. For i > 0, the first term in the right hand side accounts for the case when the frame transmission is successful and the frame leaves the queue at the end of service time. The second term models the case when the transmission is not successful and the frame is still in the queue. The generating function for the number of frames in the queue after the departure of first

95

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

frame can be obtained as
 i+1  + qk,j ak,i-j +1 j =1 i

k,1 (z ) =
i=0

z

i

+
i=1

z

i j =1

+ qk,j (1 -  )ak,i-j

Ak (z ) + Qk (z ) + (1 -  )Ak (z )Q+ k (z ) z Ak (z )( + (1 -  )z ) = Q+ k (z ) z =

(3.59)

We introduce k (z ), the PGF for the number of frame increase in the queue in a noisy channel condition during the service time of a frame as k (z ) =
Ak (z )( +(1- )z ) . z

Equation

(3.59) then reduces to k,1 (z ) = Q+ k (z )k (z ). We can develop the equations for the number of frames in the queue after the departure of second frame during TXOP service period as

k,0 = k,1 ak,0 . . . k,0 = k,1
(2) (µ) (µ-1)

(2)

(1)

ak,0
(1) (1)

µ = 2 . . . Mk

k,1 =  k,2 ak,0 + k,1 ak,1 + (1 -  ) k,1 ak,0 . . .
i+1 (µ) k,i i (µ-1) k,j ak,i-j +1 j =1

(1)

=

+
j =1

k,j

(µ-1)

(1 -  )ak,i-j

i > 0, µ = 2 . . . Mk (3.60)

Upon sequential summation, the PGF for the number of frames in the queue after the de-

96

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

parture of  -th frame can be obtained as,

k,µ (z ) = k,µ-1 (z ) - k,0

(µ-1)

k (z )

(3.61)

We need to express all PGFs of k,µ (z ) as a function of Q+ k (z ):

k,2 (z ) = k,1 (z )k (z ) - k,0 k (z )
2 = Q+ k (z ) {k (z )} - k,0 k (z ) 3 2 k,3 (z ) = Q+ k (z ) {k (z )} - k,0 {k (z )} - k,0 k (z ) (1) (2) (1)

(1)

. . .
µ-1

k,µ (z ) =

µ Q+ k (z ) {k (z )}

-
j =1

k,0 {k (z )}µ-j
(j )

which yields,
µ

k,µ (z ) -

(µ) k,0

=

µ Q+ k (z ) {k (z )}

-
j =1

k,0 {k (z )}µ-j
(j )

(3.62)

Substituting equation (3.62) in equation (3.56) we obtain the numerator and denominator of Q+ k (z ) as

97

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Mk

numQ+ k (z )

aif sk 0 vk,0 Fk,3 (z ) =zf0 µ=1

k,0 -

(µ)

Mk

+ z (1 -

aif sk )(1 f0

0 f sk )vk, 0 Fk,2 (z )Fk,3 (z ) µ=1 Mk

k,0

(µ)

aif sk + 0 )f sk vk, + z (1 - f0 0 Fk,2 (z )Fk,3 (z ) µ=1 Mk 0 + k  (1 - f sk ) Fk,0 (z ) - vk, 0 µ=1 Mk

k,0
(µ)

(µ)

k,0
(µ)

+

+ k f sk Fk, 0 (z )

-

0 vk, 0 µ=1

k,0

Mk

+ (1 - f sk )(1 - k  )Fk,1 (z ) Fk,0 (z ) -
+ 0 + f sk (1 - k  )Fk, 1 (z ) Fk,0 (z ) - vk,0

0 vk, 0 µ=1 Mk

k,0
(µ)

(µ)

k,0
µ=1 (µ)

Mk + - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) µ=1

k,0 K (z )Mk -µ

(3.63)

Mk + denQ+ k (z ) = 1 - (1 - f sk )Fk,2 (z ) + f sk Fk,2 (z ) {K (z )}

(3.64)

After multiplying the numerator and denominator by z Mk , we get

98

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Q+ k (z )

=

aif sk 0 vk,0 Fk,3 (z ) z Mk +1 f0

Mk µ=1

k,0

(µ)

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )}

+

aif sk 0 )(1 - f sk )vk, z Mk +1 (1 - f0 0 Fk,2 (z )Fk,3 (z )

Mk µ=1

k,0

(µ)

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )} aif sk + 0 )f sk vk, z Mk +1 (1 - f0 0 Fk,2 (z )Fk,3 (z ) Mk µ=1

+

k,0

(µ)

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )} 0 z Mk k  (1 - f sk ) Fk,0 (z ) - vk, 0 Mk µ=1

+

k,0

(µ)

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )} + 0 z Mk k f sk Fk, 0 (z ) - vk,0 Mk µ=1

+

k,0

(µ)

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )} 0 z Mk (1 - f sk )(1 - k  )Fk,1 (z ) Fk,0 (z ) - vk, 0 (µ) Mk µ=1 k,0 Mk (µ)

+

+ z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )} + 0 z Mk f sk (1 - k  )Fk, 1 (z ) Fk,0 (z ) - vk,0 Mk µ=1

+ -

k,0

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )} + z Mk (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) Mk µ=1

k,0 K (z )Mk -µ

(µ)

Mk + z Mk - (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) {z K (z )}

(3.65)

We further derive the sum of the generating functions for the queue length after the departure of all frames within the TXOP service period:

99

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Mk

k,tot (z ) =
µ=1 Mk

k,µ (z )
Mk µ-1 µ Q+ k (z ) {k (z )} µ=1

=

-
µ=1 j =1

k,0 {k (z )}µ-j
(j ) Mk -1 Mk - 1

=

k (z ) Q+ (z ) 1 - k (z )Mk - 1 - k (z ) k

k,0 +
j =1 j =1

(j )

k,0 k (z )Mk -j (3.66)

(j )

Equation (3.65) and equation (3.66) couples the queuing model of the traffic category ACk and activity on the wireless medium from all other ACs. With the help of this model
µ we will set the equations related to the variable k, 0 , µ = 1 . . . Mk which is the probability

that the buffer is empty at the end of TXOP period. The function Q+ k (z ) in equation (3.65) has to be analytical in the range |z | < 1 and therefore, thenumber of zeros of the polynomials in the numerator and denominator must be equal. Obviously z = 1 is one of the Mk roots of the denominator and the remaining Mk - 1 number of roots can be obtained by using Lagrange's theorem as zk,j


=
n=1

e2jn



-1/Mk

n!

dn-1 dz n-1

n/Mk

(1 - f sk )Fk,2 (z ) +

+ f sk Fk, 2 (z )

{z K (z )}

Mk

|z=0 (3.67)

where j = 1 . . . Mk is the index of the root. After substituting the Mk - 1 solutions in the numerator of equation (3.63) we get Mk - 1 equations for the particular traffic category k as follows: 100

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Mk

0

aif sk 0 vk,0 Fk,3 (zk,j ) =zk,j f0 µ=1

k,0

(µ)

Mk

+ zk,j (1 -

aif sk )(1 f0

-

0 f sk )vk, 0 Fk,2 (zk,j )Fk,3 (zk,j ) µ=1 Mk

k,0

(µ)

aif sk + 0 )f sk vk, + zk,j (1 - f0 0 Fk,2 (zk,j )Fk,3 (zk,j ) µ=1 Mk 0 + k  (1 - f sk ) Fk,0 (zk,j ) - vk, 0 µ=1 Mk

k,0

(µ)

k,0
(µ)

(µ)

+

+ k f sk Fk, 0 (zk,j )

-

0 vk, 0 µ=1

k,0

Mk

+ (1 - f sk )(1 - k  )Fk,1 (zk,j ) Fk,0 (zk,j ) -
+ 0 + f sk (1 - k  )Fk, 1 (zk,j ) Fk,0 (zk,j ) - vk,0

0 vk, 0 µ=1

k,0
(µ)

(µ)

Mk

k,0
µ=1 (µ)

Mk + - (1 - f sk )Fk,2 (zk,j ) + f sk Fk, 2 (zk,j ) µ=1

k,0 K (zk,j )Mk -µ

(3.68)

Since Q+ k (1) = 1 and k,µ (1) = 1, they are not proper probability generating functions rather they are just generating functions that contain mass probabilities for the queue length for a particular observation point. The sum of the probabilities of the system states before the beginning of TXOP and after the transmission of each packet within TXOP period has to be equal to one and therefore,
Mk

Q+ k (1) +
µ=1

k,µ (1) = 1

(3.69)

The Mk -th equation is obtained from total probability condition in equation (3.69). In 101

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac order to find Q+ k (1) and k,tot (1) we need to apply l'Hopital's rule. For simplification of calculation we define a parameter Coffk (z ) as

+ Coffk (z ) = (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z )

(3.70)

which gives,

+ Cof fk (1) = (1 - f sk )Fk,2 (1) + f sk Fk, 2 (1)

(3.71)

Taking the derivative of the denominator of equation (3.65) and setting z = 1 yields,

denQ+ k (1) = Mk - Cof fk (1) - Mk Ak (1) + (1 -  ) = Mk - Cof fk (1) - Mk [k + (1 -  )] = Mk (1 - k ) - Cof fk (1) (3.72)

Ak (1) is the mean arrival rate during service period which is the offered load k and k = k + (1 -  ) is the scaled offered load which takes into consideration the transmission failure. Similarly, taking the derivative of the numerator of equation (3.65) and setting z = 1 yields,

102

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

aif sk 0 Mk + 1 + Fk,3 (1) numQ+ k (1) =vk,0 f0 aif sk ) Mk + 1 + Fk,3 (1) + Fk,2 (1) +(1 - f sk )(1 - f0 Mk aif sk ) f0 + Fk, 2 (1) µ=1 0 + (1 - f sk ) Mk (1 - vk, 0 ) + Fk,0 (1) 0 0 +(1 - vk, 0 )(1 - k  )Fk,1 (1) + f sk Mk (1 - vk,0 ) Mk + Fk, 0 (1) + k  )Fk, 1 (1) µ=1 Mk Mk (µ) (µ)

+f sk (1 -

Mk + 1 + Fk,3 (1) +

k,0

+Fk,0 (1) - k  Fk,0 (1) - + (1 - k )
µ=1

+ (1 -

k,0

(Mk - µ)k,0 - (Mk + Cof fk (1))
µ=1

(µ)

k,0

(µ)

(3.73)

We re-write the equation (3.66) for k,tot (z ) as

k (z ) k,tot (z ) = Q+ (z ) 1 - k (z )Mk - 1 - k (z ) k = Q+ k (z )k (z ) 1 - k (z )Mk - k ( z ) 1 - k (z )

Mk - 1 (j ) k,0 j =1

Mk -1

+
j =1

k,0 k (z )Mk -j (3.74)

(j )

Mk -1

µ=1

1 - k (z )Mk -µ (µ) k,0 1 - k (z )

In order to get k,tot (1), we apply l'Hopital's rule and substitute z = 1 in equation (3.74) and get,

Mk - 1

k,tot (1) = Mk Q+ k (1) -
µ=1

k,0 (Mk - µ)

(µ)

(3.75)

103

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Now we develop the Mk -th equation from the condition of total probability in equation (3.69) as :
Mk

1=

Q+ k (1) Q+ k (1)

+
µ=1

k,µ (1)
Mk -1

=

+

Mk Q+ k (1)

-
µ=1

k,0 (Mk - µ) k,0 (Mk - µ)
(µ)

(µ)

Mk -1

= (Mk + 1)Q+ k (1) -
µ=1

(3.76)

Combining equations (3.72), (3.73) and (3.76) we get:

aif sk aif sk 0 Mk (1 - k ) - Cof fk (1) = (Mk + 1)vk, )(Mk + 1) + f0 (Mk + 1) 0 (1 - f0 aif sk aif sk +(1 - f0 Fk,3 (1) )Fk,3 (1) + f0 Mk aif sk f0 ) + f sk Fk, 2 (1) µ=1 0 0 + (Mk + 1) Mk (1 - vk, 0 )(1 - f sk ) + f sk Mk (1 - vk,0 ) + +(1 - f sk )Fk,0 (1) + f sk Fk, 0 (1) + 0 +(1 - vk, 0 )(1 - k  ) (1 - f sk )Fk,1 (1) + f sk Fk,1 (1) Mk + -k  Fk,0 (1) - Fk, 0 (1) µ=1 Mk - 1 (µ) (µ)

+(1 -

(1 - f sk )Fk,2 (1) +

k,0

k,0

+ (1 - k ) + Cof fk (1)
µ=1

k,0 (Mk - µ)
Mk

(µ)

- Mk (Mk + 1) + (Mk + 1)Cof fk (1)
µ=1

k,0

(µ)

(3.77)

104

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

which after simplification gives,

Mk - 1

Mk (1 - k ) - Cof fk (1) = (1 - k ) + Cof fk (1)
µ=1

k,0 (Mk - µ)

(µ)

aif sk 0 ) + (Mk + 1) vk, 0 1 + Fk,3 (1) + (1 - f0 + (1 - f sk )Fk,2 (1) + f sk Fk, 2 (1) Mk

+Fk,0 (1) - Cof fk (1) - k  Fk,0 (1)
µ=1

k,0

(µ)

(3.78)

By solving Mk equations consisting of equations (3.67) and (3.78), we can solve for the values of unknown variables k,0 . The PGF for the number of bursts transmitted during TXOP service period can be calculated as 1 k,tot (1)
Mk -1 (µ) k,0 z µ µ=1 Mk -1 (µ)

k (z ) =

+z

Mk

k,tot (1) -
µ=1

k,0

(µ)

(3.79)

The average number of bursts that can be transmitted during TXOP period is obtained as 1 k,tot (1)
Mk - 1 (µ) µk,0 µ=1 Mk -1

k (1) =

+ Mk

k,tot (1) -
µ=1

k,0

(µ)

(3.80)

The average number of frames transmitted during MU-TXOP service period can be obtained as the product of the average number of bursts transmitted during TXOP service

105

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

period and average number of frames transmitted in a burst.

k (z ) = k (1)k (1)

(3.81)

The PGF for the number of slots involved during TXOP service period can be obtained by substituting z in k (z ) with the PGF for the number of slots involved during one burst transmission, z ld +M bk (sif s+ba) , L (z ) = k (z ld +M bk (sif s+ba) ) and the PGF for the number of correctly transmitted frames can be obtained by substituting z in k (z ) by the PGF of a successful frame transmission, z + (1 -  ), k (z ) = k z + (1 -  ) .
(n)

3.5

Markov chain model

The Markov chain model of an access category is shown in Fig. 3.3. Each state of the Markov chain is represented by the stationary distribution bk,i,j,n where k = 0 . . . 3 denotes traffic class, i = 0 . . . mk denotes the index of the backoff phase, j = 0 . . . Wk,i - 1 denotes the backoff counter within a backoff phase i and n = 0 . . . Bk denotes the freezing counter values. After the end of MU-TXOP time, if the queue of either the primary AC or the secondary AC becomes empty, the AC starts proactive zeroth backoff. From all basic blocks in Figure 3.3, we have added the probability of going to proactive zeroth backoff phase when the queue becomes empty after MU-TXOP sharing. If the queue of the primary AC is not empty at the end of MU-TXOP sharing, it starts regular backoff. If the queue of the secondary AC is not empty after MU-TXOP sharing, it resumes the backoff countdown from

106

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

the state where it was considered for MU-TXOP sharing. If the queue of ACk is empty at the end of the proactive zeroth backoff, ACk goes to idle state. As soon as a packet arrives, ACk exits the idle state and senses the medium for a period of AIF Sk . If the medium is idle for a period of AIF Sk , ACk can start transmission without going for further backoff countdown. However, if the medium becomes busy during AIF Sk period or buffer is not empty at the end of previous transmission, ACk enters the regular backoff procedure. At the end of the proactive zeroth backoff if the queue is not empty, transmission is attempted. If the transmission is successful and buffer becomes empty, ACk starts another proactive backoff, or a regular backoff if the buffer is not empty. If the transmission is not successful, ACk goes to backoff phase one with increased contention window. In Fig. 3.3 the duplication of zeroth backoff aims at explicitly detailing the transition to the idle state. The (µ) Mk µ=1 k,0 probability that the vertical zeroth backoff stage is entered is k k  . For brevity k,tot (1) we will use the notation k,0 = k,tot (1)
Mk µ=1 (µ)

 k, 0

(3.82)

0  The input probability to the idle state is vk, 0 k k k,0 .

In order to determine the total idle state probability first we need to find the distance between two successive accesses to the medium by ACk . The distance in the form of LST is given as (in slots):

107

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

aif sk   0 k,0 Dk (s) = Stk (exp(-s)) vk, 0 f0

k B  (s) k + s k,0

aif sk 0  )vk,0 k, + (1 - f0 0

k   Bk, 0 (s) (1 - f sk )Bk,2 (s) k + s

+ 0   + f sk Bk, 2 (s) + (1 - vk,0 )k k,0 (1 - f sk )Bk,0 (s) + 0   + f sk Bk, 0 (s) + (1 - vk,0 )(1 - k  )k,0 Bk,0 (s) +  (1 - f sk )Bk, 1 (s) + f sk Bk,1 (s) +   + (1 - k, 0 ) (1 - f sk )Bk,2 (s) + f sk Bk,2 (s)

(3.83)

   Here, Bk, 0 (s), Bk,1 (s), Bk,2 (s) are LSTs of proactive zero-th backoff time, backoff

time excluding zero-th backoff and full backoff time respectively as defined at the beginning of section (3.4). backoff times and
k k +s + + + Bk, 0 (s), Bk,1 (s), Bk,2 (s) are the LSTs of corresponding residual

is the frame inter-arrival time. The LST for the total active time

between two successive access is given by:

aif sk  0  Da k,0 Bk, 0 ( s) k (s) = Stk (exp(-s)) vk,0 f0 aif sk 0    +(1 - f0 )vk,0 k, 0 Bk,0 (s) (1 - f sk )Bk,2 (s) + 0   +f sk Bk, 2 (s) + (1 - vk,0 )k k,0 (1 - f sk )Bk,0 (s) +   0 +f sk Bk, 0 (s) + (1 - vk,0 )(1 - k  )k,0 Bk,0 (s) +  (1 - f sk )Bk, 1 (s) + f sk Bk,1 (s) +   +(1 - k, 0 ) (1 - f sk )Bk,2 (s) + f sk Bk,2 (s)

(3.84)

108

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

The probability that ACk is idle can be calculated as Dak Dk

Pk,idle = 1 -

(3.85)

We have modeled vertical zeroth backoff with states bk,i,j,n where, i = -2 and the states immediately after the idle state are denoted by b-1,n . Now we can define the access probability for traffic category k as

Wk,0 -1

k = bk,-2,0,0 + f sk (1 - gk )
j =1 R

bk,-2,j,0 + b-1,0
R Wk,i -1

+
i=0

bk,i,0,0 + f sk (1 - gk )
i=0 j =1

bk,i,j,0 (3.86)

= k,ns + k,s

where, k,ns = bk,-2,0,0 + b-1,0 +

R i=0 bk,i,0,0

is the medium access probability when ACk
R i=0 Wk,i -1 bk,i,j,0 j =1

is primary AC and k,s = f sk (1 - gk )

Wk,0 -1 bk,-2,j,0 + f sk (1 - gk ) j =1

is the medium access probability when ACk is secondary AC.

3.5.1

Sum of the probabilities of states in Markov chain

We will define the input to the proactive zeroth backoff states in the Markov chain as k k  bk,R,0,0 + Wk,0 Wk,0

P ink,-2 [1] =

109

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

State bk,-2,Wk,0 -1,0 has only vertical input P ink,-2 [1]. Therefore, we get the probability of state bk,-2,Wk,0 -1,0 by substituting P ink,-2 [2] = 0 in equation (3.15) and get, P ink,-2 [1] (1 - rk ) {1 - f sk (1 - gk )(1 - k,0 )} P ink,-2 [1] = y

bk,-2,Wk,0 -1,0 =

where, y = (1 - rk ) {1 - f sk (1 - gk )(1 - k,0 )}. From equation (3.15), we get, P ink,-2 [1] P ink,-2 [2] + y y P ink,-2 [1] 1 = + gk bk,-2,Wk,0 -1,0 y y 1 gk + = P ink,-2 [1] y y2

bk,-2,Wk,0 -2,0 =

(3.87)

Similarly we get,

bk,-2,Wk,0 -3,0 . . .

2 1 gk gk = P ink,-2 [1] + + y y2 y3

Wk,0 -1

bk,-2,1,0 = P ink,-2 [1]
j =1

j -1 gk yj

(3.88)

110

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Now from equation (3.21) we get,

bk,-2,0,0 = P ink,-2 [1] + P ink,-2 [2] = P ink,-2 [1] + gk bk,-2,1,0   Wk,0 -1 j k k  bk,R,0,0  gk  = + 1+ Wk,0 Wk,0 yj j =1

(3.89)

We get the sum of the freezing state probabilities for backoff state bk,0,Wk,0 -1,0 from equation (3.24) by substituting P ink,0 [2] = 0 as
Bk

bk,-2,Wk,0 -1,n = P ink,-2 [1]F lk
n=0 Bk

bk,-2,Wk,0 -2,n =
n=0

P ink,0 [2] + P ink,-2 [1] + rk P ink,-2 [2] F lk 1 - f sk (1 - gk )(1 - k,0 )

P ink,-2 [2] + [P ink,-2 [1] + rk P ink,-2 [2]] F lk x gk bk,0,Wk,0 -1,0 = + P ink,-2 [1] + rk gk bk,0,Wk,0 -1,0 F lk x rk P ink,-2 [1]gk gk P ink,-2 [1] + P ink,-2 [1] + F lk = xy y = . . .
Bk

bk,0,1,n
n=0

P ink,-2 [1] = x

Wk,0 -2

(
n=1

gk n ) + P ink,-2 F lk y ( gk n ) y (3.90)

Wk,0 -2

+ rk P ink,-2 [1]F lk
n=1

where, x = 1 - f sk (1 - gk )(1 - k,0 ). From equation (3.22) we get,

111

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Bk

bk,-2,0,n = P ink,-2 [1]F nlk + P ink,-2 [2]
n=0

= P ink,-2 [1]F nlk + gk bk,-2,1,0
Wk,0 -1

= P ink,-2 [1]F nlk + gk P ink,-2 [1]
j =1 Wk,0 -1

j -1 gk yj

= P ink,-2 [1]F nlk + P ink,-2 [1]
j =1

(

gk j ). y

(3.91)

The sum of the probabilities of all states in proactive zeroth backoff is denoted by Sk,-2 and can be obtained as

Wk,0 -1 Bk

Sk,-2 =
j =0 n=0

bk,-2,j,n
Wk,0 -1

= P ink,-2 [1]F nlk + P ink,-2 [1]
j =1 Wk,0 -2

(

gk j ) + P ink,-2 [1]F lk [Wk,0 - 1] y
Wk,0 -2

+ rk P ink,-2 [1]F lk
n=1

gk P ink,-2 [1] ( )n + y x

(
n=1

gk n ) y

(3.92)

Equation (3.92) is also the general form of the sum of probabilities of all states in a particular backoff phase. The sum of the probabilities in the freezing block after the idle state is denoted by Sk,-1 and given by
aif snk  0 Sk,-1 = k k k, 0 vk,0 i=0 i f0

(3.93)

112

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

The transmission probability at the end of the freezing block after the idle state is given by

aif snk  0 bk,-1,0,0 = k k k, 0 vk,0 f0

(3.94)

The input probability to the horizontal zeroth backoff phase P ink,0 [1] can be defined from the Markov chain in Figure (3.3) as f0 ) 1 - k 1 (3.95) Wk,0

P ink,0 [1] =

aif snk  0 k k k, 0 vk,0 (1 - f0

0   + k  (1 - vk, 0 )(1 - k,0 ) + k,ns (1 - k,0 ) + bk,R,0,0 (1 - k  )

Input probability to backoff stage 1 can be obtained from the Figure (3.3) as
 0 bk,0,0,0 (1 - k  ) k k k, 0 (1 - k  )(1 - vk,0 ) + Wk,1 Wk,1   Wk,0 -1  0 k k k, P ink,0 [1](1 - k  )  gk 0 (1 - k  )(1 - vk,0 ) = 1+ ( )j  + Wk,1 y Wk,1 j =1

P ink,1 [1] =

(3.96) State probability at the end of backoff countdown in backoff phase 1 is given as  bk,1,0,0 = P ink,1 [1] 1 +
j =1 Wk,1 -1

 gk j  ) y
Wk,0 -1

( 

=

P ink,0 [1](1 - k  )  1+ Wk,1
 k k k, 0 (1

 gk j   ) 1+ y
Wk,1 -1

Wk,1 -1

 gk j  ) y (3.97)

(
j =1

(
j =1

+

- k  )(1 - Wk,1

0 vk, 0)

 1 +

 ( gk j  ) y

j =1

113

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

and vertical input probability to backoff phase 2 is given as bk,1,0,0 (1 - k  ) Wk,2 P ink,0 [1](1 - k  )  1+ Wk,1 Wk,2
 k k k, 0 (1 2

P ink,2 [1] = =



Wk,0 -1

 gk j   1+ ) y
Wk,1 -1

Wk,1 -1

 ( gk j  ) y (3.98)

(
j =1

j =1

+

- k  ) (1 - Wk,1 Wk,2

2

0 vk, 0)

 1 +

 gk j  ) y

(
j =1

Similarly we can derive the input probability to the i-th backoff stage as
i i-1 l=0

P ink,i [1] =

P ink,0 [1](1 - k  ) i j =1 Wk,j
 k k k, 0 (1

 1 +

Wk,l -1

 gk j  ) y
Wk,l -1

(
j =1

+

- k  ) (1 -
i j =1

i

i- 1 0 vk, 0) l=1

 1 +

 gk j  ) y (3.99)

Wk,j

(
j =1

and state probability at the end of backoff countdown in backoff phase i is given as

 bk,i,0,0 = P ink,i [1] 1 +

Wk,i -1

 ( gk j  ) y  1 +

j =1

=

P ink,0 [1](1 - k  ) i j =1 Wk,j

i

i

Wk,l -1

 gk j  ) y
Wk,l -1

(
j =1 i

l=0

+

 i 0 k k k, 0 (1 - k  ) (1 - vk,0 ) i j =1

 1 +

 gk j  ) y (3.100)

Wk,j

(
j =1

l=1

Combining equations (3.89), (3.94), (3.100) and using equation (3.88) we can obtain the value of transmission probability k as

114

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

 k =

k k  bk,R,0,0  + 1+ Wk,0 Wk,0  R  P ink,0 [1](1 - k  )i + i  j =1 Wk,j i=0 +

Wk,0 -1

j =1 i

j gk  yj


aif snk  0 + k k k, 0 vk,0 f0

 1 +

Wk,l -1

 ( gk j  ) y  gk j  ( )  y
Wk,0 -1 j n-1 gk yn

l=0 i

j =1

 i 0 k k k, 0 (1 - k  ) (1 - vk,0 ) i j =1

 1 +

Wk,l -1

Wk,j
j

l=1

j =1

R Wk,i -1

+ f sk (1 - gk )
i=0 j =1 n=1

n-1 gk + f sk (1 - gk ) yn

j =1

n=1

(3.101)

The general form of the sum of the probabilities of all states in a backoff phase can be written as
Wk,i -1

Sk,i = P ink,i [1]F nlk + P ink,i [1]
j =1 Wk,i -2 n

(

gk j ) + P ink,i [1]F lk [Wk,i - 1] y
Wk,i -2 n

+ rk P ink,i [1]F lk
n=1

P ink,i [1] gk ( )n + y x j =1

(
n=1 j =1

gk n ) y

(3.102)

Finally, the normalized condition that the sum of the probabilities of all states including

115

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

the idle state will be 1 and can be expressed as
R R Wk,i -1

1 = Sk,-2 + Pk,idle + Sk,-1 + F nlk
i=0 R

P ink,i [1] +
i=0 R Wk,i -2 n j =1

(

gk j ) P ink,i [1] y

+
i=0

P ink,i [1]F lk [Wk,i - 1] + rk F lk
i=0 R Wk,i -2 n n=1 j =1

(

gk n ) P ink,i [1] y (3.103)

+

1 x

(
i=0 n=1 j =1

gk n ) P ink,i [1] y

3.5.2

Stability condition, throughput and waiting time

The system is stable if the number of frame arrival between two successive access to the medium by a particular traffic category is less than the number of frames served during the TXOP service period. For a practical system, equation (3.56) is a positive number such that the value of the equation (3.72) must be greater than zero. This gives the stability condition as

0 < Mk (1 - k ) - Cof fk (1)
+ < Mk (1 - k ) - (1 - f sk )Fk,2 (z ) - f sk Fk, 2 (z ) + < Mk - Mk Ak (1) + (1 -  ) - (1 - f sk )Fk,2 (z ) - f sk Fk, 2 (z ) + Mk  > (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) + Mk Ak (1) + (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z ) + Mk Ak (1) 1> Mk 

(3.104)

In calculating the normalized throughput we have assumed that during MU-TXOP sharing all the transmitted frames add up to the throughput of the primary access category and

116

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

the throughput can be obtained as k k ld  Dk

T hk =

(3.105)

Finally, we can express MU-TXOP sharing probability of access category ACk to the normalized throughput from (3.105) as T hk
3

f sk = 1 -

(3.106)

T hm
m=0

The number of frames left in the buffer after the departure of a frame is equal to the frames arrived when the frame was waiting for the service and the number of frames that
 (s) be the LST of the waiting time then we arrived during the service of the frame. If Wk

can write, k,tot (z )  = Wk (k - zk )Ak (z )( + z (1 -  )) k,tot (1) Substituting s = k - zk in equation (3.107) and after re-arranging we get,

(3.107)

 Wk ( s)

=

k,tot (1 - k,tot (1)Ak (1 -
s )( k

s ) k s )(1 k

+ (1 -

- )

(3.108)

d  In order to find the average waiting time Wk = - ds Wk (s), we take derivative of the

equation (3.74) wrt z and substitute z = 1 to obtain

117

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Mk

Mk µ-1

k,tot (1) = Mk Qk (1) - (1 - k )Qk (1)
µ=1

µ + (1 - k )
µ=2 j =1

k,0 (µ - j )

(j )

(3.109)

and,

 Wk (0) = -

1 k,tot (1) 1 + 1 -  + Ak (1) k k,tot (1) k k,tot (1) - k k,tot (1) (3.110)

Wk =

1 k

3.6

Results and Discussion

We have solved system of equations using an iterative approach in which the results from each iteration are used as the seed for the next iteration. In this section we present performance figures for MU-TXOP sharing in the downlink of an access point (AP) with four traffic categories ACk , k = 0 . . . 3. We have not considered the uplink activity in the network. We assume that each traffic category has same Poisson packet arrival rate . PHY, MAC and OFDM parameters for our analytical model are shown in Table 3.2. In this chapter we have analyzed MU-TXOP sharing in the downlink and assumed that we have only one AP in the network. We have represented four different traffic categories in an AP as four individual STAs with a single traffic category. The uplink activities of other nodes in the network are not taken into consideration. However, we can extend our analysis to a network with multiple APs and activities of the peripheral STAs. In this case, the number of STAs will be increased and all the STAs will contend for the medium using 118

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Table 3.2: Parameters for analytical model of IEEE 802.11ac protocol Parameters Numerical values Bit error rate, BER 2X 10-6 bits/s Duration of Time slot,  9 µs 40 µs Minimum PHY header 52 µs Maximum PHY header Data rate per spatial stream 390 Mbps 11426 octets MAC service data unit length, MSDU Short Inter-frame space duration, SIFS 16µs MAC header length 36 bytes Request to send, RTS 20 bytes 14 bytes Clear to send, CTS 32 bytes Block acknowledgement, BA Maximum retry limit , R 7 Number of spatial streams, A 4 Modulation and Coding scheme, MCS 9 Bandwidth 80MHz 4 µs OFDM symbol duration Number of bits in OFDM symbol 1560 Multi user TXOP sharing probability 0.75 Maximum backoff stages [5, 5, 1, 1] [7, 5, 3, 2] Arbitration inter frame space, AIFS Minimum contention window size CWmin [32, 32, 16, 8] [0, 0, 3264, 3264]µs TXOP duration limit

EDCA rule. Multiple STAs with different traffic categories can easily be accommodated with little complexity in our analysis. We can vary both the number of STAs and the packet arrival rate for each STA in our model. Our results clearly show the formation of two distinct priority traffic groups: AC0 and AC1 form low priority traffic group (LPG) and AC2 and AC3 form high priority traffic group (HPG). Fig. 3.5a shows the plot of the stability criteria of our system as a function of packet arrival rate. In Section 3.5, we have derived the stability criteria for our model and the value must be less than 1 in order for the system to be stable. From the plot we see that as the packet arrival rate increases, the value of the stability criteria for AC0 and AC1 rapidly 119

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

(a) Stability criteria for the system.

(b) Probability of TXOP sharing (f sk ).

Figure 3.5: Stability criteria and TXOP sharing probability. increases and at an arrival rate of  = 190 packets per second, AC0 drives the system to unstable region. This is due to the fact that AC0 has longest backoff period during which it has more packet arrivals than other access categories. However, at the end of the backoff period of AC0 , only one packet is transmitted. This leads to a large queue length and AC0 class enters unstable region. At this point the average queue size before the start of the transmission for AC0 and AC1 classes are 27 and 6 packets respectively. The change of the values of stability criteria for AC2 and AC3 classes are relatively small as the backoff duration of these categories are relatively small and multiple packets are served at the end of backoff period. The plot of TXOP sharing probabilities in Fig. 3.5b clearly shows that low priority traffic categories are the beneficiaries of MU-TXOP sharing. Most of the time the higher priority traffic categories gain access to the medium and have uninterrupted transmission opportunity for multiple packets for a duration of TXOP period. If the queue of the secondary traffic category is not empty and resource is available in AP, secondary AC gets opportunity to transmit packets during the TXOP period of primary AC. This implies that

120

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

(a) Probability of an AC being idle.

(b) Average backoff time in ms

Figure 3.6: Idle probability and backoff time the lower priority traffic categories are benefited most from MU-TXOP sharing. As the load increases, low priority traffic categories have less opportunity to act as primary AC. As a result, TXOP sharing probabilities of high priority traffic categories gradually decrease with the increase in load. However, since high priority categories get more transmission opportunities at higher load, the TXOP sharing probabilities of lower priority categories gradually increase. Figure 3.6a shows the probability that an access category becomes idle after finishing the service of the arrived packets. At low packet arrival rate, the system remains idle for most of the time. The probability of an AC being idle, gradually decreases as the packet arrival rate increases. Since multiple (M=4) packets are served for AC2 and AC3 during TXOP period, the idle probability decreases gradually with the increase of packet arrival rate. However, since a single packet is served for AC0 and AC1 , the idle probability decreases at a faster rate with the increase of packet arrival rate. At an arrival rate of  = 190 packets per second (pps), AC0 has zero idle time which leads the system to an unstable condition.

121

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Skewness of backoff time (ms) 0.032 0.03 0.028 0.026 0.024 0.022 0.02 20 40 60 80 100 120 lambda 140 160 180
AC2 AC3

AC1 AC0

(a) Standard deviation of backoff time

(b) Skewness of backoff time

Figure 3.7: Standard Deviation and skewness of backoff time Figure 3.6b shows the average backoff time for different traffic categories. The backoff time for higher priority traffic is low because of the use of smaller AIFS and contention window CWmin . In our model the number of backoff stages for high priority traffic class is two so that the contention window size does not grow bigger in case of transmission error or collision. This ensures the faster access to the medium for priority traffic. At low packet arrival rate, the difference between the backoff times of high priority and low priority traffic is small. As the packet arrival rate increases, AC3 and AC2 occupy the medium for longer period of time due to multiple packet transmissions. As a result, access categories AC0 and AC1 need to wait for a longer period of time to get access to the medium. For high packet arrival rate of  = 180 packets per second, most of the time the medium is occupied serving AC2 and AC3 traffic keeping other traffic categories to wait for a longer period of time to access the medium. The standard deviation and skewness of backoff time are shown in Figure 3.7a and Figure 3.7b respectively. There is no significant change of backoff time for high priority traffic with the increase in load condition. But for the low priority traffic, the backoff time varies significantly in high load condition.

122

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Waiting time in the queue (ms) 1.6 1.4 1.2 1 0.8 0.6 0.4 0.2 0 20 40 60 80 100 120 lambda 140 160 180
AC0 AC1 AC2 AC3

Medium access time (ms) 1.6 1.4 1.2 1 0.8 0.6 0.4 0.2 0 20 40 60 80 100 120 lambda 140 160 180
AC0 AC1 AC2 AC3

(a) Average waiting time in the queue in ms

(b) Average medium access time in ms

Figure 3.8: Waiting time and medium access time At low load condition, the average waiting time for each packet in the queue is very low and in the range of few hundred nano-seconds. For high priority traffic, the waiting time remains almost unchanged with the increase in packet arrival rate. However, at high load condition (k = 190 pps), low priority packets start suffering significant amount of delay due to build-up of queue size before the start of TXOP duration. Figure 3.8a shows the average waiting time for a packet in the queue in ms. The average medium access time for different ACs are shown in Figure 3.8b. This medium access time is the sum of packet waiting time and packet service time. At low packet arrival rate, the access time is in the range of 100ns and gradually increases with the increase of packet arrival rate due to the fact that with the arrival of more packets in the queue, the waiting time of a packet increases. At an arrival rate of k = 190 packets per second, the medium access time for AC3 is only 2µs whereas the medium access time for AC0 is 136µs. The probability of successful transmission of an MPDU shown in Figure 3.9b is a function of the probability that RTS and CTS will not be corrupt due to channel error k , and

123

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

1 0.95 0.9 0.85

Probability that buffer is empty after zeroth backoff
AC3 AC2

Tx success probability during service period 0.98 0.96 0.94
AC3

AC1

0.92 0.9 0.88 0.86
AC2 AC1 AC0

0.8 0.75 0.7

AC0

20

40

60

80

100 120 lambda

140

160

180

20

40

60

80

100 120 lambda

140

160

180

(a) Probability that the buffer is empty after zero-th backoff

(b) Probability that the packet transmission is successful during service period

Figure 3.9: Probability that buffer is empty after zero-th backoff probability that there will be no collision due to multiple transmissions k . At a low packet arrival rate smaller number of bits are in error resulting in a larger probability that RTS and CTS will not be corrupt due to channel noise. As the packet arrival rate increases, more bits are in error and k gradually decreases. Again, at low packet arrival rate the queues of the secondary ACs are almost empty which leads to less collision probability and higher value of k . As packet arrival rate increases, more ACs are in backoff process and has the chance of gaining access to the medium at the same time causing collision. Since both k and k decrease with the increase of the packet arrival rate, the probability that a transmission will be successful during service period decreases. k is the probability that at an instance of time only one AC, which we denote as primary AC, gains access to the transmission medium. As the packet arrival rate increases for different access categories, there is more likely that more than one ACs will be in backoff process and there is a chance that more than one AC gain access to the medium at the same time causing a collision. This will lead to a lower probability that the transmission will be successful. As a result, probability k decreases with the increase of packet arrival rate 124

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Access probability of only one AC
0.035

Medium access probability
AC3

0.99
0.03

0.98
0.025

0.97 0.96 0.95 0.94 0.93 20 40 60 80 100 120 lambda 140 160 180
20 40 60 80 100 120 lambda 140
AC3 AC2 AC1 AC0

0.02 0.015 0.01 0.005

AC2 AC1 AC0

160

180

(a) Probability that only one traffic category access the medium
Offered load 0.23 0.22 0.21 0.2 0.19 0.18 20 40 60 80 100 120 lambda

(b) Medium access probability for different traffic classes

140

160

180

200

(c) offered load

Figure 3.10: Successful transmission and medium access probability which is shown in Figure 3.10a. Figure 3.10b shows the plot of the medium access probability k for different access categories. With the increase in packet arrival rate, each AC tries to access the medium more often and thereby the medium access probability gradually increases with the increase of load. In our model we have assumed an equal packet arrival rate and packet length for all ACs. The offered load as defined in the queuing model, is linearly related to the mean packet arrival rate during service period. Therefore, the offered load linearly increases with the increase of packet arrival rate. Figure 3.10c shows the offered load for different traffic

125

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Normalized payload throughput 0.08
AC3 AC2

Normalized payload throughput 0.18 0.16 0.14 0.12
AC1 AC0

Normalized payload throughput
AC3 AC2

0.18 0.16 0.14 0.12

AC3

0.06

AC2

0.1 0.08 0.06

AC1 AC0

0.1 0.08 0.06 0.04 0.02

0.04

AC1 AC0

0.02

0.04 0.02
20 40 60 80 100 120 lambda 140 160 180 200

20

40

60

80

100 120 lambda

140

160

180

20

40

60

80

100 lambda

120

140

160

(a) Throughput for f sk = 0.

(b) Throughput for f sk = 0.75.

(c) Throughput for f sk = 1.

Figure 3.11: Throughput at different load conditions. classes of our model. Since all ACs have the same packet arrival rate and packet service time, the offered load for all ACs coincide in one straight line. The payload throughput for each individual traffic category is shown in Fig. 3.11. Our model achieves a maximum cummulative payload throughput of 53% (TXOP sharing probability=1) at an arrival rate of  = 175 pps. This is 105% higher than the throughput without MU-TXOP sharing. This high throughput comes from the spatial multiplexing of MPDUs in multiple directions. We observe that at low load, the lower priority traffic group benefits most from the MU-TXOP sharing and achieves 150% throughput gain. Because of the lack of priority packets for multiple directions, low priority packets get more transmission opportunity during MU-TXOP at low load. As the load increases, this throughput gain for low priority traffic gradually drops to 45% at saturation load due to lower transmission opportunity during MU-TXOP sharing. For high priority traffic, however, the throughput gain always remains high with the increase in load. The enhancement of throughput at different load is shown in Table 3.3. At low packet arrival rate, most of the time the system remains idle and the queue of all access categories are empty. As soon as a packet of ACk arrives, ACk starts backoff process

126

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Table 3.3: Throughput enhancement due to MU-TXOP. arrival rate throughput gain (%)  (pps) low priority group high priority group 25 147 156 70 130 155 100 114 150 130 87 141 175 45 128

Packets in buffer before start of TXOP 300 250 200 150 100 50 0 20 40 60 80 100 120 lambda 140 160 180
AC0 AC1 AC2 AC3

MPDUs transmitted without error during service period

0.8 0.6 0.4 0.2 0 20 40 60 80 100 lambda 120 140 160

(a) Average length of the queue before the start of the transmission

(b) Average number of successfully transmitted MPDUs in service period

Figure 3.12: Average queue length and transmitted MPDU in service time and the queue size of ACk is around 1 before the start of TXOP period as shown in Figure 3.12a. As the packet arrival rate increases, the buffer size for high priority traffic remains almost unchanged because of smaller backoff period and multiple packet transmission during TXOP period. However, the buffer size for the low priority traffic gradually increases and the probability of the queue becoming empty at the end of TXOP period decreases. At high packet arrival rate of 0 = 190 packets/sec, the buffer of AC0 goes very high (26 packets) and makes the system unstable. Figure 3.12b shows that error in MPDU transmission sharply increases when packet arrival rate k is above 40 packets/sec. When the size of MPDU is large, BER plays a

127

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

Probability that buffer is empty after TXOP
Packet drop Probability

0.8 0.75 0.7 0.65 0.6 0.55

AC2 AC3

.8e­08 .6e­08 .4e­08 .2e­08
AC0

AC1

1e­08 8e­09 6e­09 4e­09
AC2 AC3 AC1

AC0

0.5 20 40 60 80 100 120 lambda 140 160 180

2e­09 0 20 40 60 80 100 120 lambda 140 160

180

(a) Probability that the buffer is empty at the end of TXOP duration

(b) Packet drop probability

Figure 3.13: Probability that buffer is empty after TXOP and packet drop probability significant role. Noisy channel condition adversely affects the performance of the system. In our model the packets arrive according to Poisson process and the packet inter-arrival time is same for all traffic categories. Because of the small backoff time for high priority traffic categories and multiple MPDU transmissions during TXOP period, it is highly likely that the buffer of high priority traffic categories will be empty at the end of the TXOP duration. However, for low priority traffic a larger backoff time and a single MPDU transmission during TXOP period results in lower probability that the queue will be empty at the end of the TXOP period. Figure 3.13a shows the probability that the buffer is empty at the end of TXOP duration. Figure 3.13b shows packet drop probability for different traffic classes. Packet is dropped when the maximum transmission retry limit (R) is reached but the transmission is not successful. At high packet arrival rate packet drop increases sharply specifically for AC0 and AC1 because of the unsuccessful bandwidth reservation for the mentioned traffic classes.

128

Chapter 3: Performance analysis of MU- TXOP sharing in IEEE 802.11ac

3.7

Chapter Summary

In this chapter, we have developed analytical model of DL-MU-MIMO in IEEE 802.11ac protocol and evaluate TXOP sharing probabilities for different traffic categories. The backoff time for different priority traffic categories are evaluated in detail in non ideal channel condition. The Markov chain model is used to evaluate transmission probability and queuing model is used to determine the state of the queue of a node. A group of equations are solved using iterative approach. We have evaluated performance enhancement of IEEE 802.11ac network due to DL-MU-MIMO. Our results show 105% enhanced normalized payload throughput which is due to MU-TXOP sharing. We observe that low priority traffic categories benefit most from TXOP sharing due to sharing of TXOP period with secondary ACs.

129

Chapter 4 Uplink Access Protocol in IEEE 802.11ac
IEEE 802.11ac amendment enhances WLAN throughput by exploiting spatial diversity of antennas in MU-MIMO downlink transmission. Still, network resources remain under-utilized in uplink transmission due to single user communication. In this chapter, we propose an Access Point controlled MAC protocol (A-MAC) that enables simultaneous transmissions from multiple STAs in uplink. The protocol uses EDCA channel access technique to initiate multi-user transmission and OFDMA method to transmit multiple RTSs simultaneously. It also introduces explicit channel sounding technique by using dedicated OFDM subcarrier blocks for each user. Performance measurement shows that network throughput of the A-MAC is 150% higher than that of a single uplink transmission, thanks to the availability of concurrent multiple RTS transmissions in the uplink. The proposed protocol provides a green solution by shortening the backoff time by 50% for all traffic categories due to concurrent multiple transmissions and thus enhancing the battery life of

130

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

the nodes. We observe that although the smaller backoff window of high priority traffic category enhances network throughput, higher intensity of high priority traffic drives the network faster to saturation. Furthermore, better network stability and fairness among different traffic categories can be achieved when the dominant traffic has low priority.

4.1

Introduction

IEEE 802.11 protocol is continuously evolving to keep pace with the growing need for high speed broadband multimedia communication. IEEE 802.11ac is the latest amendment that allows point to multipoint communication in the downlink using pioneering MIMO technique. DL-MIMO increases the network throughput by allowing transmission to maximum four STAs simultaneously using spatial multiplexing. However, for uplink transmission, the protocol uses one to one communication which keeps the abundant resources in AP under-utilized. In fact, the throughput of WLANs scales linearly with the multi packet reception (MPR) capability of the channel [60]. The technical challenges of multiple concurrent uplink transmissions require the AP receiver to perform per-user channel estimation, and carrier frequency offset estimation due to RF mismatches between STAs and AP [61]. Without precise channel state information (CSI), space diversity through beamforming technique can not be utilized in uplink due to overlapping of multiple transmitting signals at AP. Fortunately, due to development of numerous Multiuser Detection (MUD) Techniques like Zero Forcing (ZF) or Minimum Mean Squared Error (MMSE) for high speed data [62] [63] and blind detection algorithms, such as Constant Modulus (CM) or Finite Alphabet (FA) for low rate data [64] [65], concurrent transmissions of multiple STAs in uplink can 131

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

successfully be decoded by the AP when CSI between STA and AP is known and the number of receiver antennas are larger than the number of transmissions. The benefits of this physical layer techniques can fully be exploited by designing a suitable MAC protocol for uplink multi-user transmission. To be able to successfully decode all transmissions, MIMO receiver must first acquire knowledge of all channels between any transmitting/receiving antenna pairs. In IEEE 802.11ac protocol channel state information is obtained by the training bits in the preamble. To determine the channel state effectively the preamble transmission must be in a clear channel state. However, during multiple uplink transmission, interference-free preamble detection cannot be guaranteed. Therefore, explicit channel sounding technique is required for uplink MU-MIMO transmission. Task Group AX (TGax) is working towards developing IEEE 802.11ax protocol by 2019 that will provide enhanced throughput and power efficiency in dense WiFi deployment environment [66] [67]. The new specification addresses the spectral inefficiency in existing protocol by including schedule based MU-MIMO and MU-OFDMA techniques to perform multi-user uplink transmission for high efficiency (HE) devices. However, the complete adoption of HE WLAN protocol is likely to take place over a period of time to offset the deployment cost. To ensure the coexistence of non-HE devices during the transition period, EDCA based single user transmission will remain the basic access technique and single point of spectral inefficiency for non-HE devices in uplink. In this chapter we discuss an EDCA based uplink transmission technique for non-HE devices that allows multi-user transmission to improve spectral efficiency in coexistent WLAN network. We propose an Access Point controlled contention based MAC protocol (A-MAC) and explicit channel sounding technique that allow multi-user concurrent uplink transmission within IEEE

132

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

802.11ac framework keeping compatibility with the downlink MU-MIMO technique. The proposed protocol is a technique towards implementing the intended throughput enhancement using concurrent multiple uplink transmissions and MIMO-OFDMA techniques. The major contributions of this chapter are: · To the best of our knowledge, this is the first uplink protocol using MU-MIMO and OFDMA techniques and takes into consideration different priority traffic categories. · We have introduced explicit channel sounding technique by using dedicated subcarrier blocks. · We have developed an analytical model using queuing model and Markov chain model to evaluate the performance of the proposed A-MAC. · We have evaluated the performance metrics of proposed A-MAC protocol for both uniformly and non-uniformly varying packet arrival rates for different priority categories. · We have developed the stable operating criterion for the network for varying traffic conditions. · The proposed protocol provides a green solution by reducing the backoff time and thereby increasing the efficiency of the network. The rest of the chapter is organized as follows: In Section 4.2 we discuss the proposed A-MAC protocol. The analytical model is discussed in Section 4.3. The numerical results are discussed in Section 4.4. In Section 4.5 we discuss the way of bridging the gap between

133

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

AP

NDPA

NDP

Poll

STA

CSI Report

STA

CSI Report

Figure 4.1: Channel Sounding by AP

Figure 4.2: Multi-STA transmission in A-MAC enabled network IEEE 802.11ac and IEEE 802.11ax protocols. The way of improving resource utilization in IEEE 802.11ax is discussed in Section 4.6 followed by conclusion in Section 4.7.

4.2

Proposed A-MAC Protocol

We assume that our network has only one AP and a number of peripheral STAs in an isolated basic service subsystem (BSS) such that there will be no interference from the

134

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

Figure 4.3: Single STA transmission nearby BSS. For simplicity of analysis we assume that each STA has only one antenna and the AP has four antennas. To maintain compatibility with the downlink MU-MIMO, we assume that AP can receive four data packets simultaneously from four different STAs. The traffic in AP or STA can be categorized in four priority categories (k = 0, 1, 2, 3) in ascending priorities and each category of traffic contend for medium using its own EDCA function. During association with AP, each STA is assigned a block of orthogonal subcarriers for a specified duration. After the expiry of the association duration, the subcarrier block is released and STA initiates reassociation process with the AP during which another block is reassigned to the STA. The size of the subcarrier block is a configuration parameter depending on the density of STAs in the network. For 160 MHz UNII-1 and UNII-2 bands we allocate 5MHz block for each STA so that the network can support a maximum of 32 STAs. In single user transmission a STA sends an RTS at the end of backoff process. Similarly in a downlink MU transmission, one group RTS is transmitted by the AP to the desired destinations as AP has the knowledge of the destination of packets in its queue. However, in MU uplink transmission AP has no knowledge of the length of the queues of sender nodes. Therefore, during design of A-MAC protocol we have introduced two rounds of 135

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

RTS transmission. In first round, only the STA that wins the access to the medium through EDCA contention, is allowed to transmit RTS. We denote this STA as the primary STA and the corresponding RTS is named as primary RTS. The primary RTS is duplicated in all 20 MHz channels to ensure backward compatibility with legacy devices. The rest of the nodes in the network are denoted as secondary STAs. The secondary STAs that are in backoff process get opportunities to transmit RTSs to send indications to AP of their intention to transmit packets. These RTSs are denoted as secondary RTSs. Secondary RTS transmission starts after DIFS period of the primary RTS when AP allows MU transmission. The purpose of 5MHz subcarrier allocation during association is to facilitate the channel sounding and transmission of multiple secondary RTSs in OFDMA fashion. The successful decoding of concurrent multiple uplink transmissions depends on CSI report from STAs. The channel sounding technique in the proposed model is shown in Fig. 4.1. AP periodically performs channel sounding by sending null data packet (NDP) and in response, STAs transmit the reports using OFDMA technique using the subcarrier blocks assigned during association. The secondary STAs transmit RTSs simultaneously in the second round using previously assigned OFDM subcarrier blocks. These STAs are defined as secondary STAs. Due to unavailability of subcarrier blocks, if the AP is unable to allocate a subcarrier block to a STA, the usual operation is not impacted but the STA can not participate in the second RTS transmission. The frame exchange sequence of the proposed protocol is shown in Fig. 4.2. As soon as the medium becomes idle, all STAs start backoff process. When STA1 wins the contention, STA1 sends RTS. Since the network does not have any hidden terminals and all STAs hear each other, the AP and STAs have the knowledge about the collision of first round

136

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

RTS. If the collision happens, the primary STA initiates next backoff phase. On hearing RTS, secondary STAs suppress the backoff counting and update the NAV according to the duration information in RTS. Receiving STAs (including AP) decode RTS signal to find the intended destination address. If the RTS is intended for AP and AP decides to allow multiuser transmission, AP defers the transmission of G-CTS up to DIFS period. If AP cannot allow multiple transmission simultaneously, it sends CTS after SIFS period as shown in Fig 4.3. If primary STA listens CTS after SIFS period, the primary STA starts data transmission after SIFS period and other STAs keep the backoff countdown suppressed until the medium is idle again. However, if no CTS is transmitted by AP to primary STA after SIFS period, other STAs are allowed to transmit concurrent RTSs using previously allocated OFDM subcarrier blocks. It is fair to assume that AP is connected to the infrastructure and has no capability constrain in monitoring each subcarrier block to retrieve all secondary RTSs. Depending on the number of STAs, it is possible that AP receives larger number of RTSs than the number of antennas Mant in AP. Based on the CSI report, AP selects a group of maximum four STAs including primary STA that are most feasible to transmit data packets simultaneously. AP sends G-CTS to selected STAs using group address. All other STAs update the NAV according to the duration of transmission advertised in G-CTS. The selection algorithm may also vary according to the performance goal such as throughput maximization or fairness consideration. STAs transmit data simultaneously over the whole spectrum for a duration controlled by TXOP duration of STA1. Secondary STAs can transmit up to the duration advertised by AP and in no way can stress the TXOP period of STA1. The STAs can transmit aggregated packets and piggyback the information about the next packet duration. AP can successfully decode

137

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

all the data using zero forcing (ZF) or minimum mean square error (MMSE) technique extensively used for MPR in WLAN. When the STAs finish transmission or TXOP period expires, AP sends G-ACK to the STAs from which AP receives data successfully. The frame format for G-CTS and G-ACK in our proposed protocol remains same as CTS and ACK in IEEE 802.11ac protocol. We assume that any combination of STAs in the network can somehow be represented by a group ID so that the destination address in CTS and ACK frames can be replaced by group ID during multiple concurrent transmissions. The duration in G-CTS is set to be the transmission duration of primary STA. The algorithm of the proposed protocol is shown in Algorithm 1.

4.3

Analytical Model

We assume that the transmission opportunity of different priority traffic categories in a STA is first resolved through internal contention using their own EDCA functions. Therefore, each STA contending for medium can be represented by a single priority traffic category. The four different priority STAs in our model are represented by STAk where k = 0, 1, 2, 3 denote priorities in ascending order for Background, Best Effort, Video, and Voice traffic respectively. In normal working environment both AP and STAs contend for the channel at the same time. When AP gains access to the medium, downlink MU-MIMO transmission is initiated and when a STA gains access to the medium, an uplink MU-MIMO transmission is initiated. We have evaluated the performance of DL-MU-MIMO in Chapter 3. In this chapter, we restrict our analysis only for the uplink traffic in order to reduce the complexity of our analytical model. However, we would expect even better network performance in the presence of both uplink and downlink traffic due to the absence of addition 138

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

Algorithm 1: A-MAC protocol 1 Initialization: Packet arrive in STAs, t = 0 2 if medium == idle then 3 if BO counter != 0 then 4 STAs decrease BO counter 5 else 6 STAk Sends RTS, t  t + waittime + BO 7 STAh=k stop BO decrement
8 9 10 11 12 13

else wait for medium

if empty (queue of STAh=k ) then AP sends CTS, t  t + SIF S STAh=k update NAV STAk transmits data, t  t + SIF S 14 else 15 AP defers G-CTS 16 STAh=k transmit RTS, t  t + DIF S AP sends G-CTS, t  t + DIF S + SIF S STAk sends data, t  t + SIF S if STAh=k in group ID then STAh=k send data, t  t + SIF S else STAh=k update NAV STAh=k wait for medium AP sends G-ACK, t  t + SIF S STAk , STAh=k receive G-ACK

17 18 19 20 21 22 23 24 25

control signals in DL-MU-MIMO transmission. Section 4.3 is divided in four sub-sections. In sub-section 4.3.1 we first find the total backoff duration for each traffic category. Subsection 4.3.6 deals with the queuing model in order to find the state of the queue before and after each transmission. In sub-section 4.3.7 we discuss the Markov chain which models states of STA. Finally, in sub-section 4.3.8 we calculate different performance metrics of the network.

139

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4.3.1

Backoff Model

This sub-section has three parts: part 4.3.2 determines the probability of transmitting multiple RTSs, part 4.3.3 calculates the transmission duration and part 4.3.4 calculates the total bandwidth reservation time for both successful and unsuccessful transmission.

4.3.2

TXOP Sharing probability

We consider a uniform Poisson packet arrival rate k packets/s for each traffic category. In our analysis the time is slotted and the activity of any node takes place at the edge of a 9µ sec time slot. The duration of A-MPDU, RTS, G-CTS and G-ACK are represented by ld , rts, cts and ack time slots respectively. The duration of AIF Sk , SIF S and DIF S periods are denoted by aif sk , sif s and dif s respectively. We assume a non-ideal channel with bit error rate ber so that there is a probability that the primary RTS and data packets can be corrupt during transmission. We assume that in our network nk STAs of class k contend for the medium. The total number of contending STAs in the network N =
3 k=0

nk . Each STA has a transmission

probability k . Let us assume that AP receives data packets from Dup (1  Dup  4) STAs simultaneously during MU transmission in uplink. When the number of secondary RTSs are larger than Dup - 1, AP chooses Dup - 1 secondary STAs based on selection criteria. In other words, all secondary STAs that send RTSs, may not get the chance to participate in the MU transmission. We first determine the probability of successful transmission of a primary RTS by a particular traffic category k . If only one STAk is to win the contention and send primary RTS, nk - 1 ST Ak s as well as all ST Ah=k must be idle. The probability that a STAk wins the contention is given by: 140

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

prts [k, 1] = k nk (1 - k )nk -1

3 h=0 (1

- h )nh (1 - k )nk

(4.1)

where, prts [k, 1] is the probability that the primary RTS is sent by k category traffic node. The total probability of transmitting only one primary RTS by all categories is the sum of probabilities of each individual category and is given as

3

prts [1] =
k=0

prts [k, 1].

(4.2)

The secondary RTSs can be transmitted by all traffic categories depending on the length of the queues of the nodes. If category k has transmitted the primary RTS, then one secondary RTS can be generated either from nk - 1 nodes or from any of the nh=k nodes. The probability of transmitting secondary RTS is conditioned on successful transmission of primary RTS. At this point, we define k,0 be the probability that the queue of STAk is empty at the end of TXOP period. The detail expression for k,0 will be derived in the subsection (4.3.6). When a ST Ak transmits primary RTS, one or more secondary RTS/RTSs can be transmitted by any other node/nodes from any other category. However, the transmission of secondary RTS is conditioned on the transmission of primary RTS prts [k, 1]. The probability prts [t] of transmitting t (2  t  N ) RTSs (one primary RTS and t-1 secondary

141

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

RTSs) t can be written as follows:
3

prts [2] =
k=0 3

prts [k, 1]

nk - 1 nh (1 - k,0 )(k,0 )nk -2 h, 0 1 hk,h=k nk - 1 nh (1 - k,0 )2 (k,0 )nk -3 h, 0 2 hk,h=k nk - 1 (1 - k,0 )(k,0 )nk -2 1

prts [3] =
k=0

prts [k, 1] 1 2
3

+

prts [k, 1]
k=0

hk,h=k

nh - 1 nl (1 - h,0 )(h,0 )nh -1 l, 0 1 lh,l=h

. . .
3

prts [N ] =
k=0

prts [k, 1]

nk - 1 nh (1 - k,0 )nk -1 (1 - h,0 )nh nk - 1 n h hk,h=k

(4.3)

where, prts [n] is the probability that a total of n RTSs (primary and secondary) will be transmitted before the start of MU-TXOP. In equation (4.2) we see that the transmission of primary RTS from a STA is related to the transmission probability of the particular STA whereas in equation (4.3), the transmission of secondary RTSs are related to the state of queues of secondary STAs. The Probability Generating Function (PGF) for the number of transmitted RTSs can be written as Frts (z ) =
N t=0

prts [t]z t where, prts [0] is the probability

that no node is in the state of transmitting RTS during a time slot. prts [0] can be expressed as

3

prts [0] =

(1 - k )nk .
k=0

(4.4)

142

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

When number of transmitted RTS is less than or equal to four, all participating STAs receive G-CTS from the AP. If the number of transmitted RTS is greater than four, only four STAs receive G-CTS. We define pcts [i] be the probability that i STAs receive G-CTS can be expressed as    prts [i],  
N t=0

pcts [i] =

i = 0 . . Dup - 1
Dup -1 t=0

(4.5)

prts [t] -

prts [t], i = Dup .

Now the probability f m[t] that a particular secondary STA will be chosen to receive G-CTS from t RTSs can be expressed by the following equation:     

f m[t] =

1 N 1 N

N t N

-1

prts [t + 1], prts [t + 1],

1  t  Dup - 1 Dup  t  N .

(4.6)

-1 1 t-1 t Dup -2 t

The mean probability of receiving G-CTS by a particular secondary STA is given by:
N

f sk =
t=1

f m[t].

(4.7)

Equation (4.7) gives the probability that STAk will be considered for MU transmission even when the STA is in backoff process. For simplicity of our analysis we assume average value of f m[t] for all STAk . EDCA channel access technique for a STA is shown in Chapter 3 Fig. 3.1. The probability fk that a time slot will be idle during the interval Ak,max can be related to the channel

143

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

¡1 ¡ 2 ¡3
Frame arrival
X X TXOP sharing

V0

V3

V2

V2

V0

V1

V2

V0

V0

V1

V0

I

Buffer empty

Attempt not successful

RTS/CTS error

RTS/CTS error

Figure 4.4: Timing diagram of queuing model access probability k as
3

fk =
i= k

(1 - i )ni .

I

(4.8)

4.3.3

TXOP Duration

During data transmission phase the number of concurrent transmissions depend on the STAs that receive G-CTS from AP. Let [i] be the probability that i data packets are transmitted concurrently in a burst during MU uplink transmission. The PGF for the number of data packets in the burst can be obtained as
Dup

(z ) =
i=1

[i]z i

(4.9)

and the average number of packets in a burst is given by M bk = k (1). If k,µ denotes the probability that µ bursts are transmitted during TXOP period of primary STA, the PGF for
Mk

the number of packets transmitted during TXOP is given by k (z ) =
µ=1

k,µ k (z )µ . The

144

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

PGF for the duration of a single burst T burstk (z ) is obtained from Fig. 4.2 as

T burstk (z ) = z ld +ack+2sif s

(4.10)

and the average duration (slots) of the burst is T burstk (1). The PGF for total TXOP duration is given by

T txopk (z ) = z 2rts+dif s+2sif s+cts+aif sk

Mk µ=1

k,µ T burstk (z )µ

(4.11)

with an average duration of T txopk (1).

4.3.4

Duration of bandwidth reservation

Successful medium access probability of primary STA during Al period, as shown in Chapter 3 Fig. 3.1, is given by
3

psl =
i= l

ni  i

3 j =l (1

- j )nj

1 - i

.

(4.12)

If secondary STAs are allowed to transmit at a probability f sk during the successful access to the medium by primary STA, the freezing counter restart probability of ST Ak (k < l) due to successful transmission is given as

psfl = psl (1 - f sk )

(4.13)

and freezing counter restart probability of STAk (k < l) due to unsuccessful reservation of bandwidth is given by pf fl = 1 - fl - psl . However, the backoff counter suppression 145

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

probability of a STA due to successful or unsuccessful bandwidth reservation during MUUL transmission remains same as derived in Chapter 3. The PGF for the duration of unsuccessful bandwidth reservation T ck (z ) due to collision of multiple primary RTSs or the corruption of G-CTS can be obtained as

T ck (z ) = k r (1 - c )z 2rts+dif s+2sif s+cts+T burstk (1) + [1 - k r (1 - c )] z 2rts+dif s+2sif s+cts (4.14)

where, k is the probability of successful packet transmission, r is the probability that there will be no RTS error due to noise in the channel and c is the probability that there will be no G-CTS error. The PGF for the duration of successful access to the medium by all ACs during Ar , {r = 0, 1, 2, 3} period can be written as
3

i ni T txopr (z ) T sr (z ) =
i= r 3

. ni  i

(4.15)

i=r

Finally, the PGFs for backoff time for STAk during i backoff phase T bik,i (z ), total backoff time T bk (z ) and proactive zeroth backoff time T b0k (z ) can be derived in a similar fashion as discussed in Chapter 3.

4.3.5

Impact of hidden nodes

In our network we assume that AP is located at the centre of the BSS and the transmission range of all the nodes are equal. From AP point of view there will be no hidden 146

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

node since all the nodes within the BSS are associated with the AP and are within the transmission range of AP. Therefore, as soon as AP transmits CTS/G-CTS, all the nodes will update the NAV accordingly so that there will be no collision for data and ACK/GACK message. However, when a node (specifically at the periphery of the BSS) transmits RTS, some nodes within the BSS which are outside the transmission range of RTS transmitting node, act as hidden nodes and create collisions. The vulnerable period during which a collision at AP can take place for single user transmission is given as Tv-su = 2.(RT S tx time + SIF S + CT S tx time). Similarly, the vulnerable period for MU transmission is given as Tv-mu = 2.(2.RT S tx time + DIF S + SIF S + CT S tx time). Let Nk,h be the number of hidden nodes of traffic category k for a transmitting node. The probability fh that a hidden node will not transmit in a time slot during vulnerable period Tv-mu can be written as
3

fh =
k=0

(1 - k )Nk,h k Nk,h

(4.16)

The probability fncoll that there will be no collision from the hidden nodes during the entire vulnerable period is given as

fncoll = fh

(1-f sk )Tv-su +f sk Tv-mu

(4.17)

where, f sk is the MU transmission probability defined in equation (4.7). Now, the successful transmission probability in presence of hidden nodes k,h can be evaluated as k,h = k fncoll where k is the successful transmission probability without hidden node as evaluated in Chapter 3.

147

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4.3.6

Queuing model

The state of the queue of STAk before the start of TXOP period and after the transmission of a packet is represented by the timing diagram shown in Fig. 4.4 and the Markov chain model shown in Chapter 3 Fig. 3.3. Now we will develop the equation for the probability for i packets in the queue of a STA. Let STAk has just finished the transmission and k,0 be the probability that queue of STAk is empty after the transmission of µ packets. STAk will go through proactive zeroth backoff process. During proactive zeroth backoff
0 0 process let vk, 0 be the probability that zero packet arrive during v period. If there is no (µ)

packet arrival at the end of proactive zeroth backoff state, STAk goes to idle state and remains idle until a packet arrives. ST Ak will sense the medium and if the medium is idle for a period of AIFSk which we denote by v 3 , STAk will start transmission at the end of v 3
aif sk period. The probability that the medium will be idle for a period of AIFSk is f0 . Now

in order to have i packets in the queue before the the start of transmission we need i - 1 packet arrival during v 3 period. When all the above conditions are met, the first term of
aif sk 0 the equation can be written as f0 vk,0 Mk µ=1 3 3 k,0 vk,i -1 . During v period STAk will not (µ)

aif sk participate in MU transmission as secondary STA. (1 - f0 ) is the probability that the

medium will be busy during v 3 period. The STAk will start full backoff process and the duration of full backoff process is denoted by v 2 . During v 2 backoff period ST Ak can participate in transmission as secondary STA or start transmission as primary STA at the end of v 2 period. The second and third terms can be written based on these conditions. Similarly we can include all the transmission scenarios and the probabilities are summed up to find the total probability of having i packets in the queue before the start of transmission. The complete equation is written as follows:

148

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

Mk + qk,i

Mk (µ) 3 k,0 vk,i -1

i- 1 (µ) k,0 3 2 vk,j vk,i -j j =0

=

aif sk 0 vk,0 f0 µ=1

+ (1 -

aif sk )(1 f0 i-1

-

0 f sk )2 vk, 0 µ=1

Mk aif sk 0 + f sk (1 - f0 )(1 - f sk )vk, 0 µ=1 Ma aif sk 0 )f sk (1 - f sk )vk, + (1 - f0 0 µ=1 Ma i- 1 (µ) k,0 µ=1 Ma j =0 Mk (µ) 0+ k,0 vk,i µ=1 Mk

k,0

(µ) j =0 i-1

2+ 3 vk,j vk,i -j

k,0

(µ) j =0

3 2 vk,j vk,i -j Mk

+ (1 - f s2 k

aif sk 0 f0 )f s2 k vk,0

2+ 3 vk,j vk,i -j

+ f sk (1 - f sk )
µ=1

0+ k,0 vk,i

(µ)

+

+ (1 - f sk )
µ=1 i (µ) k,0 µ=1 Mk j =1

0 k,0 vk,i k 

(µ)

+ (1 - f sk ) (1 - k  )
2

3

0 1 vk,i vk,i-j i

+ f sk (1 - f sk ) (1 - k  )
µ=1 Ma

(µ) k,0 j =1 i

0 1+ vk,i vk,i-j

+ f sk (1 - f sk )2 (1 - k  )
µ=1 Ma

k,0
(µ) k,0

(µ) j =1 i

0 1 vk,i vk,i-j

+

f s2 k (1

- f sk )(1 - k  )
µ=1 i

0 1+ vk,i vk,i-j j =1 i Ma 0+ k,j vk,i-j j =1

+ (1 - f sk )
j =1

Mk 2+ 2 k,j (1 - f sk )vk,i -j + f sk vk,i-j + f sk k  i i-j Ma k,j j =1 i i- j Ma k,j j =1 l=0 0+ 1+ vk,i-j -l . vk,l l=0 0+ 1 vk,l vk,i-j -l

+ f sk (1 - f sk )(1 - k  ) + f s2 k (1 - k  )

(4.18)

149

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

f sk is the probability that STAk will participate in transmission of MU uplink as secondary STA which we have defined in equation(4.7). Mk and Mak are the number of packets transmitted by STAk as primary STA and secondary STA respectively. v 0 , v 1 , v 2 and v 3 are the probabilities for the duration of zeroth backoff, full backoff without zeroth backoff, full backoff and idle period respectively as shown in Fig. 4.4. v 0+ , v 1+ and v 2+ are the probabilities of residual backoff time for the corresponding region. The terms associated with (1 - f sk ) are the state of queue when the STA participates in the transmission as primary STA and the terms associated with f sk are the state of queue when STA participate in MU transmission as secondary STA. The product k  is the probability that the transmission is successful. To find a closed form solution of the equation we assume Ma = Mk which means STAk transmits Mk packets in both primary and secondary transmissions. When STAk transmits packet as secondary STA, Ma depends on the traffic category of primary STA. So our assumption leads to a specific case when both the primary STA and the secondary STA are of same priority category. After summation and simplification we find the PGF for the queue length Q+ k (z ) =
 + i=1 qk,i

where, the numerator and denominator

150

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

are given by:
Mk +1 aif sk 0 vk,0 Fk,3 (z ) num(Q+ f0 k (z )) = z aif sk 0 )vk,0 Fk,3 (z ) +z Mk +1 (1 - f0 Mk Mk µ=1 (µ) (µ)

k,0

Mk µ=1

+ k,0 (1 - f sk )Fk,2 (z ) + f sk Fk, 2 (z )

+ [f sk + (1 - f sk )k  ] Fk,1 (z ) -(1 - f sk )2 Fk,2 (z )
µ=1 + -f sk k Fk, 0 (z )

+ Fk, 0 (z )

-

0 vk, 0 µ=1

+ 0 k,0 + (1 - f sk )2 (1 - k  ) Fk, 0 - vk,0 Mk

(µ)

Mk µ=1 Mk

(µ) k,0

+ f sk (1 - f sk )(1 - k  )

+ Fk, 0

-

0 vk, 0 Mk

+ Fk, 1 (z ) µ=1

k,0

(µ)

+ k,0 K (z )Mk -µ - f sk (1 - f sk )Fk, 2 (z ) µ=1 Mk

(µ)

k,0 K (z )Mk -µ

(µ)

+ k,0 K (z )Mk -µ - f sk (1 - f sk )(1 - k  )Fk, 0 (z )Fk,1 (z ) µ=1 Mk

(µ)

Mk µ=1

(µ) k,0 K (z )Mk -µ

-

f s2 k (1

-

+ + k  )Fk, 0 (z )Fk,1 (z ) µ=1

k,0 K (z )Mk -µ (4.19)

(µ)

and
+ + Mk den(Q+ - (1 - f sk )Fk,2 (z ) + f sk Fk, k (z )) = z 2 (z ) + f sk k Fk,0 (z ) + + + 2 Mk + f sk (1 - f sk )(1 - k  )Fk, 0 (z )Fk,1 (z ) + f sk (1 - k  )Fk,0 (z )Fk,1 (z ) (z K (z )) (4.20)

respectively. The PGF for the number of frames in the queue after the departure of  -th frame can be written as k,µ (z ) and is obtained from Chapter 3. Since function Q+ k (z ) is analytical in the range |z | < 1, the zeros of the polynomials in the numerator and denominator must be identical. Obviously z = 1 is one of the Mk roots of the denominator and the remaining Mk - 1 roots can be obtained by using Lagrange's theorem [68]. The sum of the probabilities of the system states before the beginning of

151

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

TXOP and after the transmission of each packet within TXOP period must be equal to one and therefore, the last equation is obtained from the condition of total probability as
Mk - 1

(Mk +

1)Q+ k (1)

-
µ=1

k,0 (Mk - µ) = 1

(µ)

(4.21)

which can be expanded and rearranged to read
Mk + Mk (1 - k ) - F ack (1) = (Mk + 1)num(Q+ k (1)) - den(Qk (1)) µ=1

k,0 (Mk - µ) (4.22)

(µ)

where,
+ + F ack (1) = (1 - f sk )2 Fk,2 (1) + f sk (1 - f sk )Fk, 2 (1) + f sk k Fk,0 (1) + + + 2 +f sk (1 - f sk )(1 - k  ) Fk, 0 (1) + Fk,1 (1) + f sk (1 - k  ) Fk,0 (1) + Fk,1 (1) .

The mean arrival rate during service period is the offered load k , and k = k + (1 -  ) is the scaled offered load which takes into consideration the transmission failure. Now Mk equations from (4.19), (4.20) and (4.22) can be solved to obtain the values of Mk unknown variables k,0 k .
(M )

4.3.7

Markov Chain Model

The states of Markov chain model is shown in Fig. 3.3 (Chapter 3) where each rectangle represents a basic block as shown in Fig. 3.2. The bottom three rows of Fig. 3.3 are the regular backoff phases of a STA and the remaining top portion of the figure represents the proactive zeroth backoff phase. A freezing countdown state which is not shown here due

152

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

to limitation of space, is associated with each backoff state . Each state in Markov chain is represented as bk,i,j,l where, i (0  i  R) is the backoff phase, j (0  j  Wk,i - 1) is the backoff counter value and l (0  l  Bk ) is the freezing counter value. After successful transmission of packet, STAk goes to proactive zeroth backoff state when the queue becomes empty. If no packet arrives during proactive zeroth phase, STA goes to idle state. Any packet arrival during proactive zeroth backoff phase initiates a transmission attempt at the end of proactive zeroth backoff phase. After successful transmission of packets if the queue is not empty, STA starts regular backoff process. During backoff process a STA may participate in MU transmission as secondary STA. The input probability to the vertical zeroth backoff stage of the Markov chain model is given as k k    Wk,0 k,0

P ink,-2 [1] =

(4.23)

 where, k, 0 =

1 k,tot (1)

Mk µ=1

k,0 . Equation (4.23), k has two components: the first com-

(µ)

ponent accounts for the situation when STAk transmits packet as primary STA. The second component is the impact of UL- MU transmission when STAk gets the opportunity to transmit packet as secondary STA. The sum of the probabilities of all states in the proactive zeroth backoff phase can written as
Wk,0 -1 gk j =1 y j

Sk,-2 = P ink,-2 [1]F nlk + P ink,-2 [1]

+ P ink,-2 [1]F lk [Wk,0 - 1]
Wk,0 -2 n=1 (Wk,0 Wk,0 -2 n=1 (Wk,0

+rk P ink,-2 [1]F lk +
P ink,-2 [1] x

- 1 - n) - 1 - n)

gk y gk y

n n

153

Chapter 4: Uplink Access Protocol in IEEE 802.11ac
(1-gk )(1-f sk ) , 1-f sk (1-gk )(1-k,0 )

where, rk =

x = 1 - f sk (1 - gk )(1 - k,0 ) and

y = (1 - rk ) {1 - f sk (1 - gk )(1 - k,0 )}. F lk and F nlk in equation (4.24) are the factors for loopback and no loopback respectively from the bottom state of basic block of Markov chain during freezing countdown process as defined in Chapter 3. The input probability to the idle state of the Markov chain can be defined as

0 P ink,-1 [1] = vk, 0 P ink,-2 [1]Wk,0

(4.24)

and the sum of all probabilities in the idle states of Markov chain can be obtained as
aif sk

Sk,-1 = P ink,-1 [1]
i=0

i f0 .

(4.25)

The input probability to the horizontal zero-th backoff state is given as
aif sk  0 P ink,0 [1] = P ink,-1 [1](1 - f0 ) +P ink,-2 [1](1 - vk, 0 )(1 - k,0 )Wk,0

(4.26)

+(1 - f sk )k k  (1 -

 k, 0)

1 . Wk,0

The first component of equation (4.26) accounts for the case when the medium is sensed busy by STAk during freezing countdown after exiting the idle state. The second term considers the case when STAk starts transmission at the end of proactive zeroth backoff but the queue is not empty after the TXOP period. At the end of regular backoff process, STAk starts TXOP period and if the queue of the primary STA is not empty at the end of TXOP period, Primary STA goes to full backoff process whereas the secondary STA resumes backoff countdown from the point where it was considered for UL- MU transmission. This situation is accounted for in the third term of equation (4.26). The input probability to the 154

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

i-th state of the Markov chain model is given as
P ink,0 [1] (1 i j =1 Wk,j
i j =1

P ink,i [1] = +

- k  )i

i- 1 j =0 i-1 j =1

Wk,j -1 gk l (y) l=0 Wk,j -1 gk l (y). l=0

0 ) P ink,-2 [1]Wk,0 (1-k  )i (1-vk, 0

(4.27)

Wk,j

Finally, the sum of the probabilities of all states in backoff phase i can be expressed as
Wk,i -1 gk n (y) n=1 Wk,i -2 (Wk,i n=1

Sk,i = F nlk + +(rk F lk +
1 ) x

+ (Wk,i - 1)F lk n)( gyk )n P ink,i [1].

(4.28)

-1-

Since the probabilities of all states of Markov chain are known, the transmission probability of STAk can be obtained as

k = bk,-2,0,0 + bk,-1,0,0 + +f sk (1 - gk )

R i=0 bk,i,0,0

Wk,0 -1 bk,-2,j,0 j =1

+

Wk,i -1 bk,i,j,0 j =1

(4.29)

Where, the first two terms in equation (4.29) results from the proactive zeroth backoff phase, the third term is the transmission probability when STAk transmits as primary STA at the end of regular backoff phase and the last term is the increase in transmission probability due to MU-UL transmission when STAk acts as secondary STA.

4.3.8

Throughput Calculation

Laplace-Stieltjes transform (LST) of the time between two consecutive access to the network by STAk can be obtained from the timing diagram shown in Fig.4.4 as

155

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

aif sk  k 0  k,0 k T con B  (s)Bk, k (s) = vk,0 f0 3 (s) +s k,0 aif sk k  0    )k, +vk, 0 k +s Bk,0 (s)Bk,3 (s) (1 - f sk )Bk,2 (s) 0 (1 - f0 + + 0   +f sk Bk, 2 (s) +(1 - vk,0 )k,0 f sk Bk,0 (s) + (1 - f sk ) k Bk,0 (s) +   +(1 - k  )Bk, 0 (s) (1 - f sk )Bk,1 (s) + f sk Bk,1 (s) +   +(1 - k, 0 ) (1 - f sk )Bk,2 (s) + f sk Bk,2 (s)

(4.30)

T txopk (e-s )

   where Bk, 0 (s), Bk,1 (s), and Bk,2 (s) are the LSTs of proactive zeroth backoff time, backoff + + time excluding zeroth backoff, and full backoff time, respectively. Bk, 0 (s), Bk,1 (s), and + Bk, 2 (s) are the LSTs of the corresponding residual backoff times, and k k +s

is the LST

of residual frame inter-arrival time. If there is no packet arrival during proactive zeroth backoff, STAk enters into idle state and waits for the elapsed inter arrival time
k . k +s

From

equation (4.30), we obtain active duration T actk between two consecutive access by simply taking away elapsed inter arrival time. The PGF for the number of bursts transmitted during TXOP service period can be calculated as
Mk - 1 Mk -1

k,0 z µ+Mk k (z ) =
µ=1

(µ)

k,tot (1) -
µ=1

k,0

(µ)

k,tot (1) k,µ (z ).

(4.31)

where, k,tot (z ) =

Mk µ=0

Finally, the average throughput of a STAk can be calculated as 1 M bk Ld k (z ) nk T conk 156

T hk =

(4.32)

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

where, T conk is the mean time between two successive access to the medium. The cumulative network throughput T hnet is given as
3

T hnet =
k=0

nk T hk .

(4.33)

We define capacity of the network Cnet as the traffic intensity at onset of saturation:
3

Cnet =
k=0

nk k

(4.34)

where, we have defined the onset of saturation as an aggregate packet arrival rate when the average queue size of the lowest priority traffic category becomes two before start of TXOP period. We also define network efficiency  as the ratio of network throughput and traffic intensity as T hnet 3 k=0 nk k

=

Ld

(4.35)

where, Ld is the length of data packet.

4.4

Numerical Results and Discussion

We have used MapleSoft computing software to solve equations (1-20) through iterative approach. The equations in Markov chain model is then evaluated using the obtained solution to generate seeds for next iteration. After three iterations, we obtain a stable solution for  , f ,  and  . Using these parameters, we calculate the network metrics. Since all packets are destined to AP, we assume that packet aggregation takes place before placing 157

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

(a) Backoff time of low priority traffic group

(b) Backoff time of high priority traffic group

Figure 4.5: Comparison of backoff time between A-MAC and IEEE 802.11ac in uniform traffic condition. the MSDU in the queue for scheduling so that we can associate only one queue to each STA. We assume that our VHT PPDU has one MPDU which contains an A-MSDU from LLC layer. While evaluating performance metrics for varying number of nodes and packet arrival rates, we first vary number of nodes uniformly and then keeping the number of nodes fixed, we vary packet arrival rates uniformly for all nodes. However, when we evaluate the impact of non uniform packet arrival rate for the nodes, we keep the number of nodes constant for all categories (N = 24) and then non-uniformly vary the packet arrival rates for different

priority categories. We observe that the patterns of the performance metrics are similar for AC0 and AC1 and so we have grouped them as low priority traffic group (LPG). Similarly, AC2 and AC3 are grouped as high priority traffic group (HPG). The parameters for the model are shown in Table 4.1. The analytical model is scalable for up to 32 nodes and any packet arrival rate. The limitation of the number of nodes is imposed by available 5MHz subcarrier blocks. The degree of freedom of polynomials in the model linearly increases with the increase of the 158

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

Table 4.1: Parameters used for performance evaluation of A-MAC. Parameters Numerical values Bit error rate, BER 2X 10-6 bits/s Duration of Time slot,  9 µs 40 µs Minimum PHY header 52 µs Maximum PHY header DCF Inter-frame space duration, DIFS 34µs 11454 MPDU length Short Inter-frame space duration, SIFS 16µs MAC header length 36 bytes Request to send, RTS 20 bytes 14 bytes Clear to send, G-CTS 32 bytes Acknowledgement, G-ACK Maximum retry limit , R 7 Max. number of antennas in AP, Mant 4 Number of antennas in STA 1 Bandwidth 80 MHz 4 µs OFDM symbol duration Number of bits per OFDM symbol duration 1560 Modulation and Coding scheme, MCS 9 Maximum backoff stages [5, 5, 1, 1] [7, 5, 3, 2] Arbitration inter frame space, AIFS Minimum contention window size CWmin [32, 32, 16, 8] [0, 0, 1504, 1504]µs TXOP duration limit

number of nodes. This puts extra burden on computing software and memory resources. A feasible solution of the analytical model for a given number of nodes is achieved for a range of packet arrival rates beyond which the system becomes unstable and no real solution is possible. In Figs. (4.6-4.8) the notations k0 , k1 , k2 and k3 denote traffic priority categories in ascending order, while notations H, E and L correspond to higher intensity of high priority traffic, equal intensity traffic and higher intensity of low priority traffic, respectively. The average backoff time for different priority groups under uniformly varying load conditions for A-MAC (MU) and IEEE 802.11ac (SU) protocol are shown in blue and 159

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

12 10

k0

3

4

k0

k0
3
8

2.5 2

ms
6 4 2 0 20 40

k1

ms
2

k1
ms 1.5
1

k1

k2 k3

1

k2 k3
10 20 30 40 lambda 50 60

0.5 0 20

k2 k3
40 60 80 lambda 100 120

0
60 lambda 80 100

(a) Dominant high priority traffic

(b) Equal intensity traffic

(c) Dominant low priority traffic

Figure 4.6: Backoff time of A-MAC in varying traffic conditions (N

= 24).

red, respectively, in Fig. 4.5. We observe that the average backoff times for all traffic categories are reduced by almost 50% due to concurrent transmission opportunities for STAs. We also observe that MU transmission can sustain higher packet arrival rates than the SU transmission. When number of nodes in each traffic category nk = 6, the system is at onset of saturation at packet arrival rate of k = 50 packets/s for MU transmission. For SU transmission, the system is at onset of saturation at a much lower packet arrival rate of k = 25. Fig. 4.5 shows that with the increase of the number of nodes or packet arrival rate, the backoff time of the STA increases as a STA needs to wait for a longer period to gain access to the medium. It is obvious from Fig. 4.5 that the low priority traffic group drives the system to saturation point. The average backoff time for low priority traffic group goes to ten ms at onset of saturation. On the other hand, the backoff time for high priority traffic group remains around tenths of a ms even at high load condition due to smaller AIFS times and smaller contention window size. For non-uniformly varying packet arrival, Fig. 4.6a shows that when the intensity of higher priority traffic is high, backoff time for lower priority traffic becomes very high (10 ms) at onset of saturation since the network is always busy in serving higher priority traffic and the lower priority traffic has lower opportunity to transmit packets. The backoff time 160

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

0.02

0.01
0.015

0.006

k3
0.008

k3
0.005

k3

k2

k1

k0

(a) Dominant high priority traffic

of lower priority traffic decreases to about 4ms as a balance between the higher and lower priority traffic is achieved as shown in Fig. 4.6b. The backoff time improves even further to about 2.5ms when the intensity of lower priority traffic exceeds that of the higher priority traffic, Fig. 4.6c. Fig. 4.7 shows the medium access probability k for different priority STAs. As the load increases, the STAs access the medium more frequently. As a result, the medium access probability gradually increases with the increase in packet arrival rate of the STA. When the intensity of higher priority traffic is higher than the intensity of lower priority traffic, low priority traffic has less opportunity to access the medium as shown in Fig. 4.7a. As the packet arrival rates among different priority categories become balanced, medium access probabilities uniformly increase and when the low priority traffic categories dominate in the network, all categories achieve almost same medium access probability at onset of saturation as shown in Fig. 4.7c. Therefore, to ensure fairness among traffic categories, it is desirable to have higher intensity of low priority traffic in the network. Figs. 4.8a-4.8c show the payload throughput for different traffic categories under nonuniformly varying traffic conditions. In all scenarios, the throughput of high priority traffic group increases almost linearly with the increase in traffic intensity. However, the through161

probability

probability

0.004 0.003 0.002 0.001

probability

0.01

0.006 0.004 0.002 0

k2

k2 k1 k0

0.005

k0
0 20 40

k1
60 lambda 80 100

10

20

30

40 lambda

50

60

20

40

60 80 lambda

100

120

(b) Equal intensity traffic

(c) Dominant low priority traffic

Figure 4.7: Medium access probability of a STA (k )(N

= 24).

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

25

20

k3
20
HPG

k3
18

18 16
HPG

k2 k3
HPG LPG

k2

16 14

k2

14

15

MB
10
LPG

MB 12
10 8 6
LPG

k1 k0

MB

12 10 8 6 4 2

k0 k1

5

k0
20 40

k1
60 lambda 80 100

4 2 10 20 30 40 lambda 50 60

20

40

60 80 lambda

100

120

(a) Throughput of dominant high priority traffic

(b) Throughput of equal intensity traffic
300 250

(c) Throughput of dominant low priority traffic
1

H E L

H H E L E L A-MAC

A-MAC

0.8

300 250 200 MB 150 100 50 5 10 15 nodes 20 10 50 40 30 lambda 20 60 70

200

MB
150 100
802.11ac

0.6

effi
H E L
0.4

802.11ac

50 1000 2000 3000 4000 5000 6000 7000

0.2 1000 2000 3000 4000 5000 6000 7000

offered_load

offered_load

(d) Network throughput in uniformly varying node and load condition

(e) Network throughput for nonuniformly varying load (N = 24)

(f) Network efficiency

Figure 4.8: Network throughput and efficiency of A-MAC protocol. put of low priority group starts declining at higher traffic intensity due to lower transmission opportunity. From Fig. 4.8d we observe that the network throughput increases with the increase of the number of nodes and packet arrival rates, with the latter having more pronounced impact. At uniformly varying packet arrival rates for all traffic categories, the network throughput steadily increases with the increase of traffic intensity up to the onset of saturation as shown in Fig. 4.8d. However, the throughput of low priority traffic decreases drastically at higher traffic intensity and the throughput gain of high priority group is offset by the throughput reduction of low priority traffic group. As a result, overall network throughput decreases. Fig. 4.8e shows a comparison of analytical network throughput between IEEE 802.11ac protocol and A-MAC protocol under non-uniformly varying load 162

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

conditions. We observe that A-MAC throughput is 150% higher than the corresponding IEEE 802.11ac throughput. The highest throughput, up to around 5000 packets/s at the onset of saturation, is achieved when the high priority traffic has higher intensity than the low priority one. As the intensity of the low priority traffic increases, throughput falls and we observe a 12.5% drop in throughput when the network has higher intensity of low priority traffic. However, the packet handling capacity of the network at the onset of saturation increases by 40%. Fig. 4.8f shows a comparison of network efficiency which decreases with the increase in traffic intensity due to increasing RTS collisions, retransmission and increased backoff time. Fig. 4.8f also demonstrates that during A-MAC transmission, network efficiency goes as high as 93% due to enhanced network throughput for concurrent multiple uplink transmissions. The efficiency of IEEE 802.11ac protocol is lower than A-MAC protocol and it decreases sharply with the increase of offered load. To verify the proposed analytical model, we have developed an event-based simulator in Matlab environment to simulate the MAC layer of IEEE 802.11ac protocol as well as our proposed protocol. In our simulation we have randomly placed 24 nodes with uniformly varying load intensity for all traffic categories in a 10m × 10m space, with the AP placed at the center. Each simulation is run for 20 seconds and the performance metrics are averaged over 10 runs. The comparison of simulation results of some important network metrics are shown in Fig. 4.9, with analytical results labeled as (ana) and shown with lines, and simulation results labeled as (sim) and shown with symbols. Fig. 4.9a shows the backoff time for equal traffic intensity for all priority categories. As can be seen, the match between analytical and simulation results is quite good, with slight differences due to truncation of polyno-

163

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

18
1.8

16
1.6 1.4 1.2

k3(sim) k3(ana) k0(sim) k0(ana)

k0(ana)

14 12

ms 1
0.8 0.6

MB
10

k0(sim) k3(ana) k3(sim)
10 20 30 lambda 40 50

8 6

0.4 0.2

4 2 10 20 30 lambda 40 50

(a) Backoff Time

(b) Payload throughput per traffic category
1
0.9

300 250

(sim) (ana)
efficiency

(sim)
0.85

MB
200 150

0.8

(ana)

0.75

100
0.7

1000

2000 3000 offered_load(packet)

4000

1000

2000 3000 offered_load(packet)

4000

(c) Network throughput

(d) Network efficiency

Figure 4.9: Comparison of analytical model with simulation results for A-MAC. mials in the analytical model, namely in equations (4.19), (4.20) and (4.22), which was done to conserve memory space and prevent the Maple solver from crashing due to heavy computational load. For example, at an offered load of 4200 packets/sec, the analytical model yields a network throughput of 290MB at an efficiency of 73% while the throughput obtained by simulation is about 7% higher at 310MB, with the corresponding efficiency of 75%, as shown in Fig. 4.9c and Fig. 4.9d. Performance comparison between A-MAC and IEEE 802.11ac is shown in Fig. 4.10, with A-MAC clearly outperforming IEEE 802.11ac in all cases. The analytical model of SU backoff time shown in Fig. 4.5 matches closely the SU simulation backoff time shown in Fig. 4.10a. In both cases we see that at an arrival rate of 25 packets/category/node, the

164

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4

k0(802.11ac)

300

A-MAC
250

3

ms
2

200

MB

k0(A-MAC) k3(802.11ac)

150 100

1

802.11ac

k3(A-MAC)
0 10 20 30 lambda 40 50

50 1000 2000 3000 offered_load(packet) 4000

(a) Backoff time
1 0.9 0.8

(b) Network throughput
65

802.11ac
A-MAC
60 55 50 45
0.5

%
efficiency
0.7 0.6

802.11ac

A-MAC

40
1000 2000 3000 offered_load(packet) 4000

1000

2000 3000 offered_load(packet)

4000

(c) Efficiency

(d) Comparison of MAC overhead

Figure 4.10: Comparison of simulation results of A-MAC with IEEE 802.11ac protocol. SU transmission reaches saturation condition and the backoff time for lower priority traffic reaches about 8ms. The backoff time for A-MAC remains within few milliseconds even at a higher packet arrival rate. Network throughput and efficiency of SU analytical model, shown in Figs. 4.8e and Fig. 4.8f respectively, are in complete agreement with the simulation results shown in Fig. 4.10b and Fig. 4.10c respectively. Fig. 4.10d shows the MAC overhead as the ratio of the amount of control message against the amount of data. At lower traffic intensity, overhead is high for both IEEE 802.11ac and A-MAC transmission. For SU transmission, more packets are transmitted during TXOP period of SU as the offered load increases which reduces MAC overhead; the lowest MAC overhead achieved in the network is 51%. For MU transmission, more packets are transmitted as secondary packets as the offered load increases; furthermore, multiple packets are transmitted during a TXOP 165

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

0.8
300

0.6

250

(no hidden node)

(a) Collision probability due to hidden node

period which further reduces MAC overhead to 38%. IEEE 802.11ac protocol allows only SU uplink transmission whereas A-MAC supports MU transmission in uplink direction. As packet arrival rate increases, more packets are queued for SU transmission and makes network unstable. However, for A-MAC protocol queue build-up takes place at much higher packet arrival rate. During performance evaluation, we have considered only stable operating region up to onset of saturation. Onset of saturation is defined as a point where the idle probability of a STA is zero. In Fig. 4.8e we observe that IEEE 802.11ac network goes to saturation at an arrival rate of around 2000 packets/sec. If we further increase packet arrival rate, network becomes unstable and analytical model does not render real solution. This saturation point is also verified by simulation as shown in Fig. 4.10b where the simulator can handle around 2000 packets/sec for IEEE 802.11ac protocol at onset of saturation. Collision probability due to hidden node is shown in Fig.4.11a. At low packet arrival rate the collision probability is very low because of longer packet interarrival time and single packet transmission. The vulnerable time for collision probability due to hidden node is shorter for SU transmission and packet interarrival time is long enough to complete the 166

probability

MB
0.4
200 150

(hidden node)

0.2
100

0 1000 2000 3000 offered_load(packet) 4000
1500 2000 2500 3000 3500 offered_load(packet) 4000 4500

(b) Impact of hidden node on network throughput

Figure 4.11: Collision probability and network throughput in presence of hidden node.

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4.5
2.4

4 3.5

1.8
2.2
k0

1.6 3 2.5 2 1.2 1.5
k2 k3 k2 k0 k1

2 1.8

k0

1.4

k1

1.6 1.4 1.2 1 20 40
k2 & k3 k1

1 20 40 60 lambda 80 100

1 10 20 30 40 lambda 50

k3

60

60 80 total lambda

100

120

(a) Dominant high priority traffic

(b) Equal intensity traffic

(c) Dominant low priority traffic

Figure 4.12: Average queue length before the start of TXOP in non-uniform load condition (N = 24). transmission of RTS/CTS signaling. As the packet arrival rate increases, the packet interarrival time decreases and more MU transmissions are initiated. If a MU RTS/CTS collides with a transmission from a hidden node, multiple packets are affected and retransmission of all the affected packets are initiated which generates further collisions. Even at higher packet arrival rate, the hidden nodes form separate MU transmission group that generates collision with another MU transmission and, consequently, the collision probability becomes very high. Fig. 4.11b shows the impact of hidden nodes on network throughput, obtained through simulation; as can be seen, hidden nodes affect the network throughput rather severely at very high packet arrival rate. Fig. 4.12 shows the average queue size of a STA before the start of TXOP period. When the system operates in non-saturated condition, the average queue size before the start of TXOP is around one packet since as soon as a packet arrives, the STA starts the backoff process. When a high priority STA is the owner of TXOP, it is allowed to transmit multiple packets during TXOP period whereas, a low priority STA is allowed to transmit only one packet. During the TXOP period of high priority STA, low priority STAs also get the opportunity to transmit packets due to multi-user transmission in the uplink. As a result, the

167

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

400

7000
1200

380

1000

6500

360
MB

800
Lambda

6000

340

600

5500

400

320
200

5000
Packet

5

10

15 nodes

20

25

30

5

10

15 nodes

20

25

30

5

10

15 nodes

20

25

30

(a) Network throughput at onset of saturation

(b) Saturation packet arrival rate per STA

(c) Network capacity at onset of saturation

Figure 4.13: Saturation point metrics of the network (Equal number of high and low priority packets). queue of all STAs are more likely to be empty after the TXOP period at low load condition. This prevents the building up of queues even for the lower priority STAs. Fig.4.12a shows that when the high priority traffic is dominant, the queues of low priority traffic categories gradually build up at a faster rate than the queues of high priority traffic categories since high priority STAs occupy medium more frequently than the low priority STAs. At onset of saturation, the low priority traffic queue length becomes very high compared to the high priority queue length and the network becomes unstable. As the intensity of lower priority traffic increases, the queue length of all priority categories remain around one even at higher packet arrival rates and network demonstrates more stability as shown in Figs. 4.12b and 4.12c. Figs. 4.13a and 4.13b show the variation of throughput at onset of saturation and corresponding packet arrival rate per STA for varying number of nodes and uniformly varying packet arrival rates across all traffic classes. We observe that the highest network throughput is achieved when the network has minimum number of contending nodes and throughput drops gradually as the number of nodes increases. Fig 4.13c shows that the network capacity remains nearly constant for any number of nodes and sets the upper limit of net168

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

Probability of the number of RTSs
Probability of the number of secondary RTSs TXOP sharing Probability of a secondary STA 0.0007 0.0006

0.8 0.6 0.4

0.0008

0.0006

0.0005 0.0004

0.0004

0.0003 0.0002

0.2
0.0002

0.0001

0 0 2 4 6 RTS 8 10
2 4 6 Second_RTS 8 10 2 4 RTS 6 8 10

(a) Probability of RTS transmission

(b) Probability of second RTS transmission

(c) Probability of MU-TXOP sharing of a secondary STA

Figure 4.14: Mass probability functions of primary RTS, secondary RTS and MU-TXOP sharing (Nsum = 24,  = 40 packets/sec). work capacity for stable operating condition of the network under uniform packet arrival rate across all traffic classes. Fig. 4.14 shows the probabilities of the number of total RTSs, number of secondary RTSs and MU-TXOP sharing probability of a STA at a packet arrival rate of k = 40 packets/sec and number of nodes Nsum = 40. Since most of the time the queues of STAs are empty after the transmission of packets, the probability of transmitting RTSs is very low as shown in Fig. 4.14a. The mass probability function (mpf) for the number of secondary RTSs in Fig 4.14b shows the highest probability for 5 secondary RTSs for the particular load condition. The mpf for MU-TXOP sharing in Fig. 4.14c depends on the probability of the number of RTSs and follows the pattern of Fig. 4.14b until RTS is equal to the maximum number of allowed STAs (four) in uplink transmission. When the number of RTSs are larger than four, 3 STAs are chosen from the number of secondary STAs. Therefore, the right hand side of the bell-curve of Fig. 4.14c sharply decreases with the increase of the number of secondary RTSs.

169

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4.5

Bridging the gap between IEEE 802.11ac and IEEE 802.11ax

The new amendment has increased focus on coexistence of non-HE with HE devices. Although the dominance of HE devices in the network will increase per STA throughput by many folds, there will be a chance of degradation of performance of legacy devices. Again, excessive focus on legacy devices will stand against harvesting the benefits of the new standard. To ensure access fairness and backward compatibility, it is presumed that the new standard will rely on EDCA channel access technique on top of which OFMDA will be implemented. This means, both AP and STAs will compete for channel through EDCA channel access technique and once AP gains access, it will work as a central controller for soliciting CSI report, buffer state information from peripheral STAs, allocating resources for MU transmission in both uplink and downlink, and initiating OFDMA random access procedure for STAs. However, when a STA wins the contention, a single user transmission will take place. Clearly in this operating condition we have a number of major implications: · The protocol is drifting towards point coordination function where AP needs to be highly functional central coordinator for the network. · Single user transmission in the UL direction will add inefficiency in the HE WLAN. · To ensure access fairness in a dense deployment, the EDCA parameters like contention window size (CW), AIFSN and TXOP duration for AP needs to be redefined to ensure privileged access to the medium. · Excessive access priority for the AP will degrade the QoS requirements for legacy 170

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

devices. The protocol introduces MU-MIMO and MU-OFDMA for both downlink and uplink transmission. Co-ordination, resource unit allocation and implementation of DL MU transmission is comparatively easier for AP. However, UL MU transmission is more challenging. Some of the challenges are: · Uplink MU access technique, · Dynamic resource unit allocation for uplink transmission, and · Explicit channel sounding technique for non-reciprocal channel condition. The trigger based uplink transmission requires AP to have the buffer state information for the STAs that are willing to transmit packets in uplink. AP can either solicit buffer state information by transmitting a trigger frame or STAs can inform AP of their buffer states. The specification does not clearly define how STAs will inform AP about the packets that are waiting in the buffer for transmission. Even if the STA wishes to transmit buffer state information to AP, we assume that STA must access the medium through EDCA procedure. Since AP will periodically perform channel sounding, one possible option can be piggybacking the buffer state information in CSI report. Another option could be piggybacking the buffer state information in the ACK frame transmitted by STAs as a response to DL MU transmission. It is obvious that OFDMA will be suitable for smaller packet transmission. However, for larger data transmission and high per STA throughput, full bandwidth SU transmission or MU-MIMO transmission will be desirable.

171

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

Figure 4.15: Trigger enabled Multi-STA transmission in coexistant network Since AP acts as a central coordinator for resource allocation and data transmission for HE devices, the question arises whether the HE devices need to perform EDCA channel access procedure anymore in HE WLAN. If an HE STA performs EDCA procedure to access channel, it will initiate single user transmission in uplink. Similarly, the legacy STAs will also perform EDCA procedure and initiate single user transmission in uplink. In both cases, SU transmission reduces the resource utilization and efficiency of the network as · BW is under-utilized when STA transmits smaller packet, · Antennas remain underutilized in AP, and · Increases the backoff time of other STAs.

172

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4.6

Improving resource utilization

In our A-MAC model, resource unit allocation is not demand based as we allocated a resource block for each STA associated with the AP throughout the association period. Since the resource block allocation is only for transmitting the control signals (MU-RTS) and not for the data packets, this static allocation is reasonable. However, in IEEE 802.11ax specification, resource unit is allocated to STAs for data as well as control signal transmission in both MIMO and OFDMA fashion. The allocation of the resource units must be dynamic and demand based. Dynamic resource allocation by AP requires the knowledge of buffer states of STAs that are willing to transmit data packets in uplink. In order to eliminate the transmission inefficiency due to single user uplink transmission, we can modify our A-MAC model to enable AP to dynamically allocate resource units for HE nodes to initiate MU uplink transmission. We make the modification in accordance with the specification framework by using the trigger frame as discussed in [14]. The modified MU uplink transmission protocol in IEEE 802.11ax network is shown in Fig. 4.15. When a STA (primary) gains access to the medium, it sends an RTS in the uplink. When AP receives RTS, it transmits the trigger frame which allocates resource units for the primary STA as well as a pool of resource units for random OFDMA access by other STAs (secondary) that have packets in the buffer. We assume that a single trigger frame can allocate resources to an individual STA and a pool of resources for other STAs simultaneously. In order to support this operation, the trigger type subfield in the trigger frame can be modified to define another variant of the trigger frame. The optional type specific per user information can be used to send CTS response to the primary STA within the trigger frame. A STA is allowed to transmit when its random OFDMA backoff time (OBO) value 173

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

becomes zero. However in our proposal, we suggest that instead of going through OBO process, the secondary STAs immediately choose RUs randomly from the resource pool. This can reduce the inefficiency due to OBO process. The beauty of the proposed scheme is that it does not require to define any control signal. The existing legacy RTS and the newly defined trigger signal are used to implement the protocol. The protocol reduces the aggressive medium access requirement for AP in the following manner: In the proposed specification, AP needs to contend for the medium to send trigger frames for OFDMA random access in uplink. Instead of contending for the medium to transmit trigger frame, AP can utilize the access time of non-HE STA to transmit trigger when it receives RTS from a non-HE STA. The implication of this immediate random access in the uplink is that it can induce collision for the secondary STAs if two STAs pick the same resource units at the same time. However, this collision takes place for data transmission of the secondary STAs and does not affect the data of the primary STA. The only provision that needs to be made in the trigger frame is to enable trigger to carry CTS, a single user resource allocation for primary STA and a pool of RUs for random OFDMA access within the same trigger frame. The collision probability can be mitigated by providing larger number of RUs for random access and reducing the service area of BSS. The additional delay introduced to the regular EDCA process is the length of trigger time which will be in the range of few µs and the QoS requirement of non-HE STA will not affect significantly.

174

Chapter 4: Uplink Access Protocol in IEEE 802.11ac

4.7

Chapter Summary

In this chapter we have proposed A-MAC protocol that allows multi-user communication in UL and we have developed a detail analytical model of the proposed A-MAC protocol using M/G/1 queuing model and Markov chain model. The protocol achieves a network throughput which is 150% higher than the throughput of conventional IEEE 802.11ac transmission for the same PHY layer capabilities. Although we have achieved enhanced network throughput by increasing the intensity of higher priority traffic, we have observed that network becomes unstable very quickly as the low priority traffic gets less opportunity to transmit. The proper selection of contention window and AIFS number (AIFSN) can ensure better network stability and fairness among all traffic categories. The proposed concurrent RTS transmission and channel sounding technique using dedicated OFDM subcarrier blocks and multiple UL transmission using MU-MIMO technique can be an important contribution for future amendment of IEEE 802.11 protocol towards 5G. Our results also show that the network metrics for all four traffic categories could effectively be represented by two distinct priority groups which advocates in favour of the prioritization of network traffic in only two categories in the future amendment.

175

Chapter 5 Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network
Performance improvement has been the centre of focus in all previous amendments of IEEE 802.11 protocol. In addition, the draft high efficiency (HE) amendment IEEE 802.11ax, proposed by TGax, aims at increasing spectral and power efficiency of the network. However, the performance degradation due to hidden terminal problem had always been a concern especially in uplink transmission. Although the trigger based uplink transmission in IEEE 802.11ax is successful to some extent, the hidden node problem still persists in coexisting network. Through extensive simulation we see that uplink throughput drastically reduces with the increase of packet arrival rate in presence of hidden node. The simulation result also shows that by increasing carrier sensing threshold (CSTH) of STAs during association with HE access point (AP), collision probability in uplink transmission 176

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network can be reduced significantly.

5.1

Introduction

The successive amendments of IEEE 802.11 protocol aim at enhancing network throughput by enhancing the capabilities of physical (PHY) and medium access control (MAC) layers. However, the existence of hidden nodes has always been a concern and a major factor for degraded network throughput and spectrum inefficiency [54]. Although the RTS/CTS controlled transmission is successful in avoiding hidden terminal problem for downlink transmission, it cannot completely eliminate the problem in uplink direction. Hidden node produces collision at AP during uplink transmission of a station (STA). Each collision further initiates retransmission or even the packet is dropped which degrades the throughput of the network. In order to address the spectral inefficiency, Task Group AX (TGax) is working towards developing IEEE 802.11ax protocol that will provide enhanced spectral and power efficiency in dense WiFi deployment environment [13] [69]. The development of the IEEE 802.11ax amendment is guided by the following observations. First, well known techniques such as exponential backoff, inter-frame spacing, and RTS/CTS reservation mechanism, originally introduced to reduce collisions but not quite successful, tend to reduce spectrum efficiency of EDCA. Second, the use of pioneering multi-user multipleinput multiple-output (MU-MIMO) technology should be extended to both downlink and uplink directions. The new amendment has increased focus on coexistence of non-HE with HE devices. The complete adoption of HE WLAN protocol is likely to take place over a period of time to offset the deployment cost. Although the dominance of HE devices in the network will increase per STA throughput by many folds, there will be a chance of degrada177

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

tion of performance of legacy devices. Again, excessive focus on legacy devices will stand against harvesting the benefits of the new standard. To ensure access fairness and backward compatibility, it is presumed that the new standard will rely on EDCA channel access technique on top of which OFMDA will be implemented. This means, both AP and STAs will compete for channel through EDCA channel access technique and once AP gains access, it will work as a central controller for soliciting CSI report, buffer state information from peripheral STAs, allocating resources for MU transmission in both uplink and downlink, and initiating OFDMA random access procedure for STAs. However, when a STA wins the contention, a single user transmission will take place. To eliminate hidden terminal problem in uplink MU-MIMO transmission, the draft protocol introduces trigger based uplink transmission[70]. However, the impact of hidden terminals in SU uplink transmission from legacy devices remains a major concern for network performance. In this chapter we discuss the impact of hidden node on uplink throughput of a heterogeneous network.

5.2

Uplink transmission in IEEE 802.11ax protocol

Multi user uplink transmission in IEEE 802.11ax will be controlled by AP. The amendment defines a new control frame format that carries information to identify the STAs that will transmit uplink multi-user PHY layer protocol data units (PPDU). This frame is known as Trigger frame. The trigger based uplink transmission requires AP to have the buffer state information for the STAs that are willing to transmit packets in uplink. AP can either solicit buffer state information by transmitting a trigger frame or STAs can inform AP of their buffer states. The specification does not clearly define how STAs will inform AP about the packets that are waiting in the buffer for transmission. Even if the STA wishes to trans178

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

(a) Trigger based UL MU transmission (adopted from [71]).

Figure 5.1: EDCA channel access technique. mit buffer state information to AP, we assume that STA must access the medium through EDCA procedure. An UL MU transmission is initiated as an immediate response to a DL trigger frame sent by the AP as shown in Fig. 5.1a. The trigger frame allocates resources for the intending STAs. In response to the trigger frame, when the AP receives UL MU data correctly from at least one STA, the frame exchange initiated by the trigger frame is considered successful. AP acknowledges the successful receipt of all MPDUs by sending Multi block acknowledgement (M-BA). The amendment defines a mechanism for multiplexing DL acknowledgments sent in response to UL MU transmission. Before responding to the trigger frame a STA performs physical (ED) as well as virtual (NAV) carrier sensing if trigger frame indicates to do so before UL MU transmission [28].

5.3

Impact of hidden nodes

EDCA is the basic access technique for IEEE 802.11 protocol and medium access relies on carrier sense multiple access collision avoidance (CSMA/CA) scheme. Every time a node encounters a collision, it increases the contention window by two folds until the max179

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

imum limit of the window size is reached. The aim of this exponential backoff technique is to reduce collision probability during retransmission attempt. However, the exponential backoff introduces delay in network and consequently network performance degrades. In our discussion we assume a heterogeneous network consisting of only one HE AP and a number of HE STAs and legacy STAs in an isolated basic service subsystem (BSS) as shown in Fig.5.2a. We assume that there will be no interference from the nearby BSS. The rational behind this assumption is that two nearby BSSs will operate in different primary channels. Since all the nodes are associated with AP, we can safely assume that all the nodes are within the transmission range of AP which implies that from AP point of view there will be no hidden terminal problem. However, in AP initiated uplink multi-user communication, the transmission time of trigger frame itself is vulnerable to collision due to concurrent transmission from other STAs. In other words, except trigger frame, no transmission initiated by AP suffers collision due to hidden terminal problem. As soon as the STAs receive trigger frame or MU-RTS, they will update the NAV accordingly so that there will be no collision for data or CTS or ACK/G-ACK messages transmitted in the uplink direction. However, due to coexistence of legacy devices, uplink SU transmission from legacy devices cannot avoid hidden terminal problem. In Fig. 5.2b, when node A initiates RTS in the uplink, node B and node C act as hidden terminals for node A if we assume that AP and all nodes have same transmission range. Therefore, any ongoing RTS transmission between node A and AP is not noticed by node B or node C. If node C initiates any new transmission during ongoing RTS transmission between node A and AP or within SIFS period before CTS transmission by AP, the packets will be treated as collisions at AP. Consequently, both node A and node C will not receive CTS from AP which results in

180

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

Node B
Node B

AP Node A

Node C

Node A
AP

Node C

Tx range of Node A

Tx range of AP

Tx range of Node C

Tx range of AP

(a) Basic Service Subset

(b) Hidden Node problem

Figure 5.2: BSS and hidden node. increasing contention window and initiating retransmissions for both node A and node C.

5.4

Modeling Hidden Nodes

The traffic in STA can be categorized in four priority categories (k = 0, 1, 2, 3) in ascending priorities and each category of traffic contends for medium using its own EDCA function. Packet arrival of traffic class k follows the Poisson process with the arrival rate of k . Duration of MPDU, RTS, CTS, BA and Trigger, denoted by ld , rts, cts, ba, and trig , respectively, are expressed as integer multiples of slots (we assume a time slot of  = 9µs). Durations of AIF Sk , k = 0. .3, and SIFS periods are denoted by aif sk and sif s, respectively (in slots). Channel is modeled through bit error rate ber, so that the probability that RTS or CTS will not be corrupt due to channel noise is  = (1 - ber)rtsb +ctsb , while the probability that data or BA will not experience any corruption due to channel noise is  = (1 - ber)ldb +bab . Here rtsb , ctsb , bab and ldb are the number of bits in RTS, CTS, BA and MPDU respectively

181

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

The behaviour of different ACs during backoff period is shown in Chapter 3 Fig. 3.1. Before ACk can begin backoff countdown, the medium must be idle for a period of AIF Sk without interruption. AIF Sk can be expressed as AIF Sk = SIF S + AIF SNk  where AIFSN is arbitration inter frame spacing number for traffic category k as shown in Chapter 3 Fig. 3.1. Clearly, no transmission is possible during the period AIF S3 . The initial values of the freezing counters are set to be Bk = AIF SNk - AIF SN3 , k = 0 . . 3. Duration of periods where traffic class k and higher can access the medium is denoted as Ak and their maximum durations are    (AIF SNk-1 - AIF SNk ), k = 1 . . 3   W0,max , k=0

Ak,max =

(5.1)

where, W0,max is the maximum number of backoff states for AC0 . Backoff counter value is uniformly distributed over the interval 0 . .CWk,i , where CWk,i is the contention window for ACk during backoff phase i. The maximum number of backoff states in backoff phase i is Wk,i = CWk,i + 1. For backoff phase 0, the number of backoff states Wk,0 is set to Wk,0 = CWk,min + 1. We can express Wk,i in terms of Wk,0 as    2i Wk,0

Wk,i =

0  i  mk

(5.2)

  2mk Wk,0 = Wk,max mk < i  R If Nk,t be the number of nodes within the transmission range of a STA then, the probability fk that a time slot will be idle during the interval Ak,max can be related to the channel

182

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

access probability k as
3

fk =
l =k

(1 - l )Nk,t

(5.3)

The successful transmission probability of a node without considering the impact of hidden node can be express as: f0 1 - 0

0 =

f1 f0 + f1 A1,max 1 - 1 1 - 1 f2 2 = (1 - f2 A2,max ) 1 - 2 f0 f1 + f1 A1,max + f2 A2,max (1 - f1 A1,max ) 1 - 2 1 - 2 f3 f2 3 = (1 - f3 A3,max ) + f3 A3,max (1 - f2 A2,max ) 1 - 3 1 - 3 f0 f1 +f2 A2,max (1 - f1 A1,max ) + f1 A1,max 1 - 3 1 - 3 1 = (1 - f1 A1,max )

(5.4)

The vulnerable period during which a collision at AP can take place for single user uplink transmission is given as Tv-su = 2(rts + sif s + cts). Similarly, the vulnerable period for UL MU transmission is given as:Tv-mu = 2trig . Let Nk,h be the number of hidden nodes of traffic category k for a transmitting node. The probability fh that a hidden node will not transmit in a time slot during vulnerable period can be written as:
3

fh =
k=0

(1 - k )Nk,h k Nk,h

(5.5)

where, k is the transmission probability of traffic category k . The probability fk,ncoll that

183

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

there will be no collision from the hidden nodes during the entire vulnerable period is given as:

fk,ncoll = fh

(1-f sk )Tv-su +f sk Tv-mu

(5.6)

where, f sk is the trigger transmission probability of AP to initiate multi-user uplink transmission. This probability is same as downlink MU TXOP sharing probability given by: T hk T hm

f sk = 1 -

3 m=0

(5.7)

as discussed in Chapter 4. Now, the successful transmission probability in presence of hidden nodes k,h can be evaluated as k,h = k fk,ncoll where k is the successful transmission probability without hidden node.

5.5

Possible approach to eliminate hidden node problem

Rapid growth of diverse and dense deployment environments in corporate office, outdoor hotspot, dense residential apartments and stadiums require IEEE 802.11ax to have increased density of individual stations (STAs) and access points (APs). These environments are commonly characterized by hidden terminal problems, increased interference from the nearby WLAN, frequent collisions and lower channel utilization, all of which tend to degrade the performance of the protocol. In the IEEE 802.11ax task group, there is a growing consensus on increasing carrier sensing threshold (CSTH) to improve spatial reuse. The increase of CSTH allow multiple STAs and/or APs to transmit frames simultaneously, contributing to the increase of areal throughput. However, it may lead to asymmetric hidden 184

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

node problem where legacy STAs are severely deprived of the chances of channel access and HE STAs mostly occupy the shared wireless channel in a coexisting deployment [72]. However, we argue that the hidden terminal problem can be solved by increasing the carrier sensing threshold (CSTH) of all STAs during association with HE AP which reduces transmission range of AP so that the concentration of AP becomes high at the deployment environment. In other words, the STAs that are closer to AP can associate with AP. However, during usual transmission process, the carrier sensing threshold will remain same as recommended in standard for all STAs. In this way we can ensure that all STAs within the BSS are also within each others transmission range. We point out two advantages in this technique: i) the hidden node problem in the uplink transmission can be solved, and ii) the transmit power of AP can be reduced to make AP more energy efficient. However, this approach may lead to inter BSS interference issue. If STA has a larger transmission range, it will create interference to the STA of the nearby BSS and try to set the NAV of the STAs belonging to other BSS. This interference can easily be eliminated if we make the adjacent BSSs to operate in different primary channels and restrict the transmission from a foreign BSS in setting the NAV of a STA. In light of the discussion to eliminate hidden node problem in IEEE 802.11ax, we propose the following modifications in the draft specification: · The CSTH of all STAs during association with HE AP will be increased while CSTH of all STAs during normal transmission process will remain same as legacy STAs. · Two adjacent BSSs will operate in different primary channels. · The NAV of a STA will be set only by the transmission of another STA within the

185

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

same BSS. If a STA receives transmission from another STA which does not belong to same BSS as the receiving STA, NAV will not be updated.

5.6

Simulation Result and Discussion

We have developed an event-driven simulator in Matlab environment to simulate the MAC layer of IEEE 802.11ax protocol. We assume an indoor environment with one AP and a number of STAs placed randomly on a large single floor. We have used 3GPP indoor femto pathloss (PL) model which is also recommended for IEEE 802.11ax standard. The pathloss model is shown in Fig. 5.4a where pathloss exponent is 2, a linear attenuation of 0.5 dB/m is introduced for walls and 4 dB for shadowing effect in indoor environment. We assume a transmit power level of 23 dBm (200 mW) and initial carrier sensing threshold of -82 dBm. The concentration of the nodes is controlled in such a way that AP has always 24 nodes associated with it. For each simulation setup when we increase the carrier sensing threshold of STAs during association process, the transmission range of AP actually gets reduced. Therefore, we increase the concentration of STA to ensure that we have same number of STAs associated with AP. We further assume that the CSTH of all STAs during usual transmission process remains -82 dBm. The simulation is run for 24 nodes with uniformly varying load intensity for all traffic categories. Each simulation is run for 1 second and the performance metrics are averaged over 10 runs. We assume that our VHT PPDU has one MPDU which contains an A-MSDU from LLC layer. The size of the A-MSDU is limited by the maximum size of MPDU which is 11454 octets. Therefore, throughout the evaluation we treat an MPDU as a packet and arrival of packet means arrival of an MPDU in the queue. Our network has a bandwidth of 80 MHz having 234 usable subcarriers. 186

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

(a) Collision probability due to hidden nodes

(b) Network throughput from simulation

Figure 5.3: Simulation result of uplink throughput. A 256 QAM modulation with 5/6 coding scheme allows 1560 bits to be transmitted per OFDM symbol duration of 4 µs with long guard interval. The collision probability due to hidden node for existing CSTH is shown in Fig.5.3a. At low packet arrival rate the collision probability is very low due to because of longer inter packet arrival time and SU packet transmission. Due to longer inter packet arrival time, two transmissions from nodes which are hidden to each other, rarely overlap. The vulnerable time for collision probability due to hidden node is shorter for SU transmission and inter packet arrival time is long enough to complete the transmission of RTS/CTS signaling. As the packet arrival rate increases, the inter packet arrival time decreases and more transmissions overlap causing collision in AP. If a RTS/CTS collides with a transmission from a hidden node, the affected packets initiate retransmission which generates further collisions. Even at higher packet arrival rate, the probability of simultaneous transmission from the hidden nodes group increases and consequently, the collision probability becomes very high. Fig. 5.3b shows the simulation result of the impact of hidden node on network throughput. Hidden nodes affect the network throughput severely at very high packet arrival rate. 187

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

(a) Path Loss (proposed 11ax)

(b) Transmission distance for different CSTH

Figure 5.4: 3GPP indoor femto pathloss model.

(a) Variation of collision probability

(b) Variation of collision probability

Figure 5.5: Impact of CSTH and packet size on collision probability. Fig. 5.5a shows the variation of collision probability against the carrier sensing threshold (dBm) of STAs during association with AP. We observe that as the CSTH increases, the collision probability decreases. If CSTH is set at -60dBm, the collision probability becomes almost zero and from Fig.5.4b we observe that the corresponding transmission distance of AP is around 15 meters. This phenomenon supports the argument that in a densely deployed environment, the concentration of APs need to be very high so that all nodes within the transmission range of an AP can hear each other. This simulation result also supports our proposal of increasing the CSTH of STAs during association with AP.

188

Chapter 5: Impact of hidden nodes on uplink transmission in IEEE 802.11ax heterogeneous network

Fig.5.5b shows the variation of collision probability as a function of packet size. As the packet size decreases, the transmission time required by the packet decreases. As a result, nodes get frequent transmission opportunity such that the accumulation of the queue is not significant for the hidden nodes. As a result, the collision probability decreases. However, this reduction of collision probability due to decreasing packet size is not significant because data packets do not suffer collision. As soon as AP transmits CTS, the NAV of all other STAs are updated which eliminates hidden node problem.

5.7

Chapter Summary

We have discussed the impact of hidden node problem in uplink transmission in a heterogeneous network. The simulation result shows significant throughput degradation due to the presence of hidden nodes in coexisting network. We strongly advocate in favour of increasing carrier sensing threshold of STAs during association with HE AP which not only increase network capacity but also reduce collision probability due to hidden node. We have proposed some modifications to the draft recommendation to reduce the inter BSS interference arising from asymmetrical transmission radius of AP and STAs.

189

Chapter 6 Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism
IEEE 802.11ah protocol is specifically designed to provide network connectivity to a large number of energy efficient heterogeneous QoS internet of things (IoT) devices. Restricted access window (RAW) mechanism of the protocol is an innovative feature which aims at reducing medium access contention by slotting the beacon interval and allowing limited number of nodes to contend in a specific slot. In this chapter, we evaluate important medium access control (MAC) layer performance metrics of differentiated quality of service (QoS) IoT nodes in IEEE 802.11ah RAW mechanism. Our analysis evaluates the feasibility of coexistence of priority and non-priority traffic in IoT devices without degrad190

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

ing network performance.

6.1

Introduction

The world is going to see an exponential growth of internet of things (IoT) devices in the coming years and IoT devices are expected to reach 20-30 billion by 2020. Providing basic network connectivity and access layer support to such a huge number of end points are extremely challenging. From the system perspective, it is obvious that existing centralized architectures will no longer be able to accommodate the communications among such a huge number of entities. Due to inherent non-optimality, the existing contention based IEEE 802.11 MAC protocols are expected to face performance degradation in terms of throughput [16]. The contention of large number of nodes extend the backoff time of low priority traffic nodes and deprives the lower priority traffic from accessing the medium. The delay in accessing channel in such a large network of nodes is not only impractical but also inefficient for energy constrained nodes. A great number of IoT applications require low data rate connection between low-power, long distant devices or items. Enabling and optimizing wireless communications for such scenarios was the motive for developing the wireless technologies adapted for large number of low data rate devices with a much longer transmission range for both indoor and outdoor environments [17]. IEEE 802.11ah is the Sub-1GHz (S1G) version of IEEE 802.11 family of protocols which aims at providing network connectivity to low power devices and specifically designed for IoT networks of wide application range. The IEEE 802.11ah amendment, ratified in 2016, makes modifications to the PHY and MAC layers of the existing WLAN standard to operate in sub 1 GHz license-exempt band. It is expected to be the most promising technology for IoT connec191

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

tivity as it introduces some innovative features such as fast association and authentication, restricted access window (RAW), traffic indication map (TIM) and target wake-up time (TWT) that not only provide access service to a large number IoT nodes but also provide energy efficiency and extended network coverage. In IEEE 802.11ah RAW access scheme, the contention among the huge number of nodes is eliminated by grouping the nodes based on TID or spatial location and providing a specific time slot for the nodes to contend for the medium. In RAW mechanism, the beacon interval is divided into multiple slots and each slot is known as RAW slot which is allocated to a group of nodes. In addition to the RAW slots, the beacon interval can contain common contention window (CCW) where all nodes are allowed to contend for the medium. During specified RAW slot, a node contend for the medium using EDCA access technique which provides preferential access to the medium for high priority traffic categories. In presence of large number of QoS nodes, serious performance degradation in IEEE 802.11ac protocol takes place and makes network unstable [11]. We also observe that the backoff time of non-QoS traffic in IEEE 802.11ac network becomes excessively high and makes network energy inefficient. However, the impact of QoS traffic in IEEE 802.11ah network has not been studied so far. In this chapter we present a Markov chain and M/G/1 queuing model to evaluate the performance of RAW mechanism in coexisting non-QoS and QoS IoT network. The major contributions of this chapter are as follows: · To the best of our knowledge this is the first performance evaluation of RAW scheme in presence of heterogeneous QoS traffic. · The model takes into account the non-saturated load and non-ideal channel condition. · The performance analysis accurately models the EDCA technique during backoff 192

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Figure 6.1: Restricted Access Window (adopted from [9]). process. The rest of the chapter is organized as follows: RAW scheme is discussed in Section 6.2. The analytical model is discussed in Sections 6.3 and results are discussed in Section 6.4. Finally, we summarize the chapter and discuss our future work in Section 6.5.

6.2

RAW Scheme of IEEE 802.11ah MAC

In RAW scheme, the beacon interval is divided into RAW slots to restrict the uplink channel access to a small number of STAs. AP allocates a RAW slot to a group of STAs and broadcast the allocation using S1G beacon frame. Each RAW slot is further divided into mini slots which we define as time slots. We assume that AP periodically assigns RAW to a group of STAs which are allowed to contend for the medium within the specified RAW slot using EDCA access technique. The duration of the RAW slot depends on the number of STAs in the network and expected uplink data amount. At the end of the RAW slot, STAs belonging to the RAW slot can go to doze mode and wake up at the start of the next beacon transmission time to save energy. The RAW slots in the RAW are indexed from 0 to Sraw - 1 and a STA determines the index islot of the RAW slot in which the STA is allowed to start contending for the medium based on the following mapping function: islot = (x + Nof f set )modSraw where, x is the 193

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Association ID (AID) of the STA, Nof f set is offset value in the mapping function and Sraw is the total number of RAW slots within beacon interval. During EDCA backoff process, a STA maintains two backoff counters; one backoff counter is used outside RAW and second backoff is used inside RAW. At the start of the RAW, each STA suspends the first backoff operation and starts decreasing second backoff counter. At the end of the RAW slot, second backoff counter is reset and the first backoff counter is resumed. At the beginning of the allocated RAW slot, the STA sets the contention window CW of the secondary backoff procedure to CWmin . Two types of beacon are generated by AP as shown in Fig. 6.1. DTIM is transmitted at the beginning of beacon interval and TIM is transmitted at the beginning of RAW slots. Between two consecutive DTIM beacons, there are as many TIM beacons as there are groups defined. The bitmap of DTIM beacon includes the TIM group to which the STA belongs and TIM carries the bitmap of STAs within the group that have buffered packet in AP. At the beginning of each TIM beacon, the STAs belonging to the RAW slot wake up to start contention. At the expiry of the backoff counter, the STA sends a PS-Poll to obtain the buffered data in AP. During uplink transmission, contention is performed as in the downlink transmission. Within RAW slot, the uplink or downlink transmission is initiated by transmitting PS-Poll from STA. After receiving PS-Poll, AP sends PS-Poll-ACK to STA and STA is allowed to transmit packets in the uplink direction.

6.3

Analytical Modeling of RAW Scheme

We assume that the network has one access point (AP) and each RAW slot can accommodate nraw =
3 0

nk nodes where nk (k = 0 . . 3) represent background (BK), best effort 194

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

(BE), video (VI) and voice (VO) traffic nodes respectively. The beacon interval is divided into Sraw slots. For simplicity of analysis we assume that each RAW slot has equal number of contending nodes nraw . Each RAW slot is further divided into Traw time slots of  = 52µs. The total number of nodes in the network is then N = Sraw nraw . The backoff process of STAk starts at the beginning of RAW slot if the STAk has either buffered downlink traffic in AP or pending uplink traffic in STAk . Otherwise, the STAk goes to doze mode and wakes up in the next beacon transmit time. Any downlink packet arrival within the beacon interval is queued and advertised in the next beacon. Similarly, the backoff process for any uplink packet arrival starts at the beginning of next RAW slot. We assume that the packet arrival in a node follows Poisson process with the arrival rate of k packets per minute. We model the state probabilities and state of the queue of each node by using Markov chain model and M/G/1 queuing model. Since both uplink and downlink transmissions are initiated by STAk , we assume a combined queue for both types of traffic in the queuing model. Duration of MPDU, PS-Poll, PS-Poll-ACK and BA, denoted by ld , ppoll, pack and ba, respectively, are expressed as integer multiples of time slots. Durations of AIFS and SIFS periods are denoted by aif sk and sif s, respectively. Channel is modeled through bit error rate ber, so that the probability that PS-Poll or PSPoll-ACK will not be corrupt due to channel noise is k = (1 - ber)ppoll+pack , while the probability that data or BA will not experience any corruption due to channel noise is k = (1 - ber)ldb +bab . Here, ldb and bab are the number of bits in MPDU and BA, respectively. When a STAk has a packet for either downlink or uplink transmission, the EDCA backoff process is initiated at the beginning of the RAW slot. Backoff counter value is uniformly distributed over the interval 0 upto CWk,i , where CWk,i is the contention window during

195

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

backoff phase i. During the backoff process, the backoff counter is decremented if the medium is idle at the boundary of the time slot. When the backoff counter value goes to zero, STAk gets the right to transmit PS-Poll frame. If the transmission fails due to a collision, STAk moves on to the next backoff phase with increased contention window size until maximum contention window size CWk,max is reached. Let backoff phases are indexed from 0 to mk and R be the maximum retry limit such that R - (mk + 1) backoff phases will have the same contention window size of CWk,max . Since the backoff counter can take any value within the range (0 . . CWk,i ), the maximum number of backoff states in backoff phase i is Wk,i = CWk,i + 1. For backoff phase 0, the number of backoff states Wk,0 is set to Wk,0 = CWk,min + 1. We can express Wk,i in terms of Wk,0 as    2i Wk,0

Wk,i =

0  i,  mk

(6.1)

  2mk Wk,0 = Wk,max mk < i  R The behaviour of different ACs during backoff period is shown in Fig. 6.2. The backoff process is divided into two phases: the freezing countdown and backoff countdown, as was done in Chapter 3 which deals with IEEE 802.11ac downlink multi-user transmission. Before ACk can begin backoff countdown, the medium must be idle for a period of AIF Sk without interruption. AIF Sk can be expressed as AIF Sk = SIF S + AIF SNk  where AIF SNk is arbitration inter frame spacing number for traffic category k as shown in Fig.6.2. The probability fk that a time slot will be idle during the interval Ak,max can be related

196

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Figure 6.2: Differentiated QoS access (adopted from [11]). to the channel access probability k as
3

fk =
l=k

(1 - l )nl

(6.2)

For AC0 , the decrement of backoff counter takes place only during A0,max if the time slot during this period is idle, so the corresponding backoff counter decrement probability is
f0 . 1-0

The denominator takes into account the fact that, when AC0 is in backoff state,

other ACs are not transmitting. AC1 can decrement the backoff counter during the periods A0,max and A1,max if the medium is idle during those periods. Since AC1 is in backoff state, the probability that a time slot during the period A1,max will be idle is probability that a time slot during the period A0,max will be idle is
f0 . 1-1 f1 , 1-1

while the

The normalized

probability that the backoff counter of AC1 is decreased during these two periods is obtained by combining the two probabilities with the total probability of period A1,max being idle. Similarly we can derive the probability of decrementing the backoff counter for all

197

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

ACs as f0 1 - 0

g0 =

f0 f1 + f1 A1,max 1 - 1 1 - 1 f2 g2 = (1 - f2 A2,max ) 1 - 2 f1 f0 + f2 A2,max (1 - f1 A1,max ) + f1 A1,max 1 - 2 1 - 2 f3 f2 + f3 A3,max (1 - f2 A2,max ) g3 = (1 - f3 A3,max ) 1 - 3 1 - 3 f0 f1 +f2 A2,max (1 - f1 A1,max ) + f1 A1,max 1 - 3 1 - 3 g1 = (1 - f1 A1,max )

(6.3)

gk is also the probability that only one ACk gains access to the medium during a slot. So, the probability k that a transmission does not collide is k = gk . The backoff process of RAW scheme in IEEE 802.11ah is modeled with a Discrete Time Markov Chain (DTMC) as shown in Fig. 6.3. The state probabilities of the chain for a STAk in a particular backoff phase i is represented by bk,i,j,t,l where, i = 0 . . R, ¯d . D ¯d is the average number of slots j = 0 . . Wk,i - 1, t = 0 . . . Bk and l = 0 . . D required to transmit one packet. Index t is associated to the state probability during freezing countdown block and l is associated to state probability only within the delay block. The value of these two indices are undetermined in other states and usually omitted. As soon as a packet arrives (either uplink or downlink) the STAk exits from the idle state with the probability of Pk,idle and enters the synchronization state having a probability of Pk,sync where the STAk waits for the allocation of RAW slot by AP in the beacon signal. At the commence of designated RAW slot, STAk randomly chooses a backoff counter value and

198

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

starts the backoff process. During backoff process, Plast is the probability that the STAk reaches the last time slot of the designated RAW in which case the backoff process stops, STAk resets the backoff counter and goes to the synchronization state for the next cycle of RAW slots. If the channel is idle and STAk has not reached the last time slot, the backoff counter is decremented. However, if the channel becomes busy during the backoff process, the backoff countdown is suspended until the channel becomes idle. When the backoff counter value reaches zero, STAk determines whether the remaining time in the RAW slot is sufficient to transmit all the required signals for transmission of a data packet (PS-Poll, PS-Poll-ACK, data and block ACK). If the remaining time is not sufficient for a complete packet transfer, STAk enters into delay state with a probability P dk,i , waits in the delay block until the remaining time slots expire, and then enters the synchronization state for the next cycle of RAW slots. If the remaining time is sufficient, STAk starts the transmission of PS-Poll. During TXOP period, Mk packets are allowed to transmit in the uplink or downlink transmission. At the end of a successful TXOP if the queue of STAk becomes empty, STAk enters idle state. Otherwise, STAk enters synchronization state for the next cycle of RAW slots. However, if PS-Poll encounters collision, STAk initiates backoff process with increased contention window. The state transition probabilities can

199

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

be described with the following equations:
P in[k,0,1] Wk,0

bk,0,j,Bk =

j = 0 . . . Wk,0 - 1 t = 0 . . . Bk j = 0 . . . Wk,i - 1 ¯d l = 0...D ¯d l = 0...D (6.4)

bk,i,j,t-1|k,i,j,t = fk bk,i,j -1|k,i,j = gk (1 - Plast ) bk,i,0,l|k,i,0 =
P dk,i ¯d D

bk,i,0,l-1|k,i,0,l = 1

bk,i,j |k,i-1,0 = (1 - k k )(1 - P dk,i ) j = 0..Wi - 1 ¯d is the average number of slots required for the transmission of a packet and where, D P dk,i is the probability that the STAk enters delay block at the end of backoff process. We will derive the expression for P dk,i in Sub-section 6.3.3. The state transition probabilities in delay block are shown in Fig. 6.4. Each backoff state has two external inputs: P in[k, i, 1], which is the vertical input coming from the previous backoff phase i - 1 , and P in[k, i, 2] which is the lateral input coming from the previous backoff state j - 1 within the same backoff phase i. For backoff counter value of j = Wk,i - 1, lateral input probability P [k, i, 2] is zero. If the medium is sensed idle, the backoff counter is decremented with probability (1 - Plast )gk as shown in Fig. 6.3. However, if the medium is not idle the backoff counter is suppressed with probability (1 - Plast )(1 - gk ).

6.3.1

PGF for bandwidth reservation duration

The probability generating function (PGF) for the duration of a complete single packet transmission (including control signals), Dd (z ), is given as Dd (z ) = z ppoll+pack+ld +ba+2sif s 200

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

1- k Pk,Idle
¥k

Pk,sync

I[k,0,1]

(1-Pl)(1-¡k)

(1-Pdk,0)¢k,0£k¤k

(1-Pdk,0)(1¢k,0)£k¤k b(k,0,0) b(k,0,W0-2)

(1-Pl)¡k b(k,0,W0-1) I[k,0,2] Pl

Pk,0

(1-Pdk,0)(1-¦k§k)
Pk,delay

b(k,1,0)

b(k,1,W1-2)

b(k,1,W1-1)

b(k,R,0)

b(k,R,WR-2)

b(k,R,WR-1)

Figure 6.3: Discrete Time Markov Chain of RAW scheme. ¯d = ppoll + pack + ld + ba + 2sif s. The PGF for a data packet with mean value D transmission including block acknowledgement is given by F tk (z ) = z ld +ba+2sif s) with a mean value of F tavk = ld + ba + 2sif s and the PGF for total TXOP duration is given by
Mk

Stk (z ) = z

ppoll+sif s+pack µ=1

k,µ F tk (z )µ

(6.5)

where k,µ is the probability that µ number of packets are transmitted during TXOP period. The medium becomes busy either by unsuccessful reservation of bandwidth or by successful transmission of packets. We will derive the PGF for both the durations separately. During bandwidth reservation PS-Poll can collide due to multiple transmissions or PS-Poll

201

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

1

Pd(k,i)
b(k,i,0,0)

Pd(k,i)/Dd 1
b(k,i,0,1)

1
b(k,i,0,Dd-2)

1
b(k,i,0,Dd-1)

Figure 6.4: State transition of delay block. can be corrupt due to error in the channel. Since there is no collision for PS-Poll-ACK, the only source of error for PS-Poll-ACK is the channel error. The PGF for the duration for which the medium is busy due to collision or corruption of PS-Poll is given as z ppoll+sif s+pack . For error in PS-Poll-ACK , other STAs hear the NAV and update accord-

202

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

ingly. The PGF for the duration for which the medium is busy due to error in PS-Poll-ACK is given as z ppoll+pack+ld+ba+3sif s . We combine the two PGFs by the probability of no PSPoll collision probability k and obtain the PGF for unsuccessful bandwidth reservation Ctk (z ) as

Ctk (z ) = k r (1 - c )z ppoll+pack+ld+ba+3sif s + [1 - k r (1 - c )] z ppoll+sif s+pack

(6.6)

where r and c are the probabilities that PS-Poll and PS-Poll-ACK will not be corrupt due to channel.

6.3.2

PGF for backoff duration

The sum of the state probabilities in the freezing block for any non-zero value of backoff counter (j = 0) for AC3 is given by P f l3 = P in[k, i, 1] + P in[k, i, 2] F l3 , where F l3 =
1 . 1-(1-g3 )(1-Plast )

For j = 0, the sum of the state probabilities is given by

P f nl3 = P in[k, i, 1] + P in[k, i, 2] F nl3 where F nl3 = 1. The sum of the probabilities of the freezing block states associated with each backoff state of traffic category k < 3 with non-zero value of backoff counter (j = 0) can be obtained in a similar fashion as discussed in 3 and can be given as

P f lk = P in[k, i, 2] + P in[k, i, 1] + P in[k, i, 2](1 - gk )(1 - Plast ) F lk

(6.7)

where, factor F lk can be expressed as

203

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

3

Ai,max -1

3

F lk =

1 + 1 - (1 - gk )(1 - Plast )

fin
i=k+1 n=0 l=i+1

fl

Al,max

3

.
A fi i,max

(6.8)

1 - (1 - gk )(1 - Plast )
i=k+1

Similarly, the sum of the state probabilities of freezing countdown block for j = 0 can be written as

P f nlk = P in[k, i, 2] + P in[k, i, 1]F nlk

(6.9)

where, F nlk can be expressed as
3 Ai,max -1 3

fin F nlk = 1 +
i=k+1 n=0 3 l=i+1

fl

Al,max

.

(6.10)

fi
i=k+1

Ai,max

The relation between F lk and F nlk can be expressed as

F nlk = [1 - (1 - gk )(1 - Plast )] F lk

k = 0 .. 3

(6.11)

Now we define Bf nlk (z ) as the PGF for time spent in a state where the backoff countdown of STAk is not suppressed by the bandwidth reservation of another STA, P bsk as the successful bandwidth reservation probability and P bck as probability that the backoff counter will be suppressed due to a collision. The values of Bf nlk , P bsk and P bck can be derived as discussed in 3. The PGF for time required for the transition from one backoff 204

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

state to the next backoff state, Bf sk (z ) can be given as

Bf sk (z ) =

zgk (1 - Plast )Bf nlk (z ) 1 - z (1 - gk )(1 - Plast ) P bsk Stk (z ) + P bck Ctk (z )

.

(6.12)

Now we are able to write the PGF for the duration of backoff phase i = 0 . . . mk as: Bf nlk (z ) Bf lk Bk,i (z ) = + Wk,i Wk,i
Wk,i -1

{Bf sk (z )}l
l=1

(6.13)

The PGF for the total backoff time for a STAk can be written as:

mk

i

Bof fk (z ) =
i=0 j =0 R

Bk,j (z )(1 - P dk,j )i (1 - k k )i Ctk (z )i k k
m

+
i=mk +1 j =0 mk

Bk,j (z )Bk,m (z )(i-mk ) (1 - P dk,j )i (1 - k k )i Ct(z )i k k Bk,j (z )Bk,m (z )(R-mk ) (1 - P dk,j )(R+1) (1 - k k )(R+1) Ctk (z )(R+1)
j =0

+

(6.14)

The first two moments of this probability distribution can be found as Bof fk =Bof fk (1) and Bof fk = Bof fk (1) + Bof fk (1).
(2)

6.3.3

Probability of entering into delay block

The duration of total backoff time Btotk,0(z) for backoff phase zero is given as Btotk,0 (z ) = Bk,0 (z ) and can be expanded in a polynomial series of z with largest exponent of the z be 205

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Tk,0 . The mass probability that backoff phase zero (i = 0) spans t backoff slots can be obtained as 1 dt Btotk,0 (z ) t! dz t
Tk,0 t=0

yk,0,t =

(6.15)
z =0

and Btotk,0 (z ) can be re-written as Btotk,0 =

yk,0,t z t . The probability that packet

arrived during RAW slot will defer transmission after the zero-th backoff if the remaining number of slots in the RAW window is less than Dd . Probability P dk,0 that STAk enters the delay block can be obtained as the sum of the probabilities that packet arrival takes place at the last Dd slots of RAW interval.
Traw

P dk,0 =
l=0

1 Traw

min(l,Tk,0 )

yk,0,t
t=max(0,l-Dd +1)

(6.16)

where,

1 Traw

is the packet arrival probability at any timeslot within RAW interval. Once

P dk,0 is obtained, the total backoff time for two consecutive backoff phase Btotk,1 (z ) can be obtained as

Btotk,1 (z ) = Bk,0 (z )Bk,1 (z )(1 - P dk,0 )(1 - k k )Ctk (z )

(6.17)

where, factor (1 - k k ) is collision probability at the end of backoff phase zero and Ctk (z ) is the PGF for the duration of channel occupancy due to collision. Btotk,1 (z ) can be expanded into polynomials of z with largest exponent of the z be Tk,1 and calculation of corresponding mass probability yk,1,t is done in a similar fashion as shown in eqn. (6.15).

206

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

In general, the total duration of i-th (i > 0) backoff phase can be expressed as
i i- 1

Btotk,i (z ) =
l=0

Bk,l (z )
r=0

(1 - P dk,r ) (1 - k k )i Ctk (z )i

(6.18)

and the corresponding P dk,i can be obtained as shown in eqn.(6.16).

6.3.4

Queuing model

Queuing model represents the state of the queue of STAk before the start of TXOP period and after the transmission of a packet. Before developing the queuing model we define four vacation times: (a) Vk,1 is the time spent by a packet in synchronization states and the PFG can be written as of Vk,1 (z ) =
1 BI BI -1 i=0

z i where, BI is the number of time slots within beacon

 -s interval. The LST of the PGF is is given as Bk, 1 (s) = Vk,1 (e ). The mass probability 1 for i frame arrivals during this period is denoted as vk,i and the PGF for the number   of frame arrivals during this period is Fk,1 (z ) = Bk, 1 (k - zk ) = i=0 1 i vk,i z.

(b) Vk,2 is the time spent by a packet in backoff states and the PGF can be written as of
 -s Vk,2 (z ) = Bof fk (z ) . The LST of the PGF is is given as Bk, 2 (s) = Vk,2 (e ). The 2 mass probability for i frame arrivals during this period is denoted as vk,i and the PGF  for the number of frame arrivals during this period is Fk,2 (z ) = Bk, 2 (k - zk ) =  2 i vk,i z. i=0

(c) Vk,3 is the time spent by a packet in delay states and the PGF can be written as of Vk,3 (z ) =
1 ¯d D ¯d -1 D i=0

¯d is the number of time slots within delay states. z i where, D

 -s The LST of the PGF is given as Bk, 3 (s) = Vk,3 (e ). The mass probability for i

207

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Tx
Arrival

¡k,0

Ik

Vk,1

Vk,2

1-¢k,0

Vk,1

Vk,2 Pdk

Vk,3

Vk,1

Vk,2

Figure 6.5: Timing diagram for queuing model.
3 frame arrivals during this period is denoted as vk,i and the PGF for the number of 

frame arrivals during this period is Fk,3 (z ) =

 Bk, 3 (k

- zk ) =
i=0

3 i vk,i z.

(d) Ik is the time spent by STAk in idle state. This is in fact, the packet inter arrival time which has an exponential distribution and the corresponding LST can be written as I  (s) =
k k +s

The timing diagram for queuing model is shown in Fig. 6.5. We start our analysis from a point where k,0 is the probability that the queue of STAk is zero at the end of a TXOP period and STAk goes to idle mode. As soon as a packet arrives, STAk exits idle mode and enters synchronization mode. Vk,1 is the time spent in the synchronization mode before the start of the backoff process in the designated RAW slot. Vk,2 is the time spent by STAk in backoff process after which STAk starts transmission if remaining time in RAW slot is long enough to complete the transmission of packet and the control messages. Otherwise, STAk enters delay mode where, STAk waits Vk,3 period before entering synchronization mode. The mass probability of having i > 0 frames in the buffer at the beginning of TXOP is
+ denoted by qk,i and the mass probability of having i frames in the buffer after the departure

of µk -th frame is denoted by k,i , µ = 0 . . Mk . 208

(µ)

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Mk + qk,i

i-1 (µ) k,0 2 1 vk,i vk,j -j -1 j =0 i-j (M ) 1 2 vk,l vk,i-j -l

= (1 - Pk,d )k k
µ=1 i

+(1 - Pk,d )k k

k,j k

(6.19)

j =1 l=0 i-j k,i-j -t i (0) 3 1 2 +Pk,d k,j vk,t vk,l vk,i-j -t t=0 l=0 j =1

where, Pk,d =

R i=0

P dk,i R

is the mean probability of entering delay blocks. The first com-

ponent of the right hand side of eq. (6.19) corresponds to the case when STAk enters into idle state after the TXOP period. As soon as one packet arrives, STAk exits the idle state and enters into Synchronization sate Vk,1 . At the end of the synchronization state, STAk enters the backoff process during the designated RAW slot. The second component represents the case when the queue is not empty after the TXOP period. The third component represents the case when the STAk enters delay state at the end of backoff process. We can derive the generating function Q+ k (z ) for the number of packets in the buffer immediately before the start of TXOP and the generating function k,µ (z ) for number of packets in the


queue after the transmission of each packet. We define the PGFs as


Q+ k (z )

=
i=1

+ i qk,i z and

k,µ (z ) =
i=0

k,i z i , µ = 0 . . Mk . After summation and changing of summation order we

(µ)

obtain Q+ k (z ) as
Mk

Q+ k (z )

= (1 - Pk,d )k k zFk,1 (z )Fk,2 (z )
µ=1

k,0

(µ)

Mk +(1 - Pk,d )k k zFk,1 (z )Fk,2 (z ) Mk (z ) - k, 0

(6.20)

+Pk,d Fk,1 (z )Fk,2 (z )Fk,3 (z )k,0 (z ) Then, we can obtain the number of frames left in the queue after the departure of µ-th frame. 209

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

The Laplace-Stieltjes Transform (LST) of the service time of a packet can be obtained from F tk (z ) by replacing z by e-s . The number of frames that arrive in the queue during the service of a single packet Ak (z ) is given as


Ak (z ) = e(k (z-1))(ld +sif s+ba) =
i=0

ak,i z i

(6.21)

where, ak,i denotes the mass probability of i frames arrival during a frame service time ¯k . When a STAk enters delay states at the end of and the offered load is defined as  = A backoff process, we consider zero packet transmission and PGF for the number of frames in the queue after the departure of zero frame is given by k,0 (z ) = Q+ k (z ). Similarly, PGF for the number of frames in the queue after the departure of µ-th frame can be obtained as
µ

k,µ (z ) =

µ Q+ k (z )k (z )

-
j =1

k,0 k (z )µ-j

(j )

(6.22)

The sum of the generating functions for the queue size for the departure of Mk packets during TXOP period can be obtained as k (z ) Q+ (z ) 1 - k (z )Mk - 1 - k (z ) k
Mk - 1 Mk -1

k,tot (z ) =

k,0 +
j =1 j =1

(j )

k,0 k (z )Mk -j (6.23)

(j )

where k (z ) =

Ak (z )( + k + (1 - k )z ) . z Substituting eq. (6.22) in eq. (6.20) and multiplying the numerator and denominator by

210

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism z Mk , we obtain num(Q+ k (z )) + den(Qk (z ))

Q+ k (z ) =

(6.24)

where numerator and denominator are given by
Mk µ=0 (µ)

Mk +1 num(Q+ (1 - Pk,d )Fk,1 (z )Fk,2 (z )k k k (z )) = z Mk

k,0

-z Mk (1 - Pk,d )Fk,1 (z )Fk,2 (z )Fk,3 (z )k k
µ=0

k,0 k (z )Mk -µ

(µ)

and
Mk +1 den(Q+ - (1 - Pk,d )Fk,1 (z )Fk,2 (z )(z k )Mk k (z )) = z

+Pk,d z Mk Fk,1 (z )Fk,2 (z )Fk,3 (z ) , respectively. The function Q+ k (z ) in eq. (6.24) has to be analytical in the range |z | < 1 and therefore, the number of zeros of the polynomials in the numerator and denominator must be equal. Obviously z = 1 is one of the Mk + 1 roots of the denominator and the remaining Mk number of roots can be obtained by using Lagrange's theorem [68]. Since Q+ k (1) = 1 and k,µ (1) = 1, they are not proper probability generating functions; rather they are just generating functions that contain mass probabilities for the queue length for a particular observation point. The sum of the probabilities of the system states before the beginning of TXOP and after the transmission of each packet within TXOP period must be equal to one; therefore,
Mk

Q+ k (1)

+
µ=0

k,µ (1) = 1.

(6.25)

211

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

The Mk + 1-th equation is obtained from the condition of total probability in (6.25) as
Mk - 1

(Mk + 1)Q+ k (1) -
µ=0

k,0 (Mk - µ) = 1

(µ)

(6.26)

The Mk equations from (6.24) and Mk + 1-th equation from (6.26) can be solved to obtain
µ the values of Mk + 1 unknown variables k, 0.

The PGF for the number of packets transmitted during TXOP service period can be calculated as
Mk (µ) k,0 z µ Mk

+ Mk

k,tot (1) -
µ=0

k,0

(µ)

k (z ) =

µ=0

k,tot (1)

(6.27)

6.3.5

Markov chain model for an access category

From the Markov chain model we define transmission probability k as, k = (1 - Pk,d )
R i=0 bk,i,0  and the idle state probability k, 0 = 1 k,tot (1) Mk µ=0

k,0 . Input probability

(µ)

to the synchronization state can be written as k k k k + Pk,d 1 - Pk,d 1 - Pk,d

  Pk,sync = k, 0 k + (1 - Pk,d )(1 - k,0 )

(6.28)

which is also the input probability to the zero-th backoff phase P in[k, 0, 1]. The LST of the distance between two successive access to the medium by STAk is given as (in slots)
 k, 0 k  (s)B  (s)  (1-Pk,d )Bk, k k 1 k,2 k +s  (s)B  (s)B  (s) 1-Pk,d Bk, 1 k,2 k,3  )(1-P   (1-k, k,d )Bk,1 (s)Bk,2 (s)k k 0  (s)B  (s)B  (s) 1-Pk,d Bk, 1 k,2 k,3

 Dk (s) = Stk (e-s )

+

(6.29)

212

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism
   where, Bk, 1 (s), Bk,2 (s), and Bk,3 (s) are defined at the beginning of Section (6.3.4) and k k + s

is the LST of frame inter-arrival time when STAk is in idle state.

The LST for the total active time between two successive accesses is given by

-s Da k (s) = St(e )

 (1-P   k, k,d )Bk,1 (s)Bk,2 (s) 0    (s) 1-Pk,d B1 (s)B2 (s)Bk, 3

+

 )(1-P   (1-k, k,d )Bk,1 (s)Bk,2 (s)k k 0    (s) 1-Pk,d Bk,1 (s)Bk,2 (s)Bk, 3

(6.30)

The probability that STAk is idle can be calculated as Pk,idle = 1 -

Dak Dk

where, Dk is the

average distance between two successive access to the medium by a STAk and Dak is the average active time between two successive access.

6.3.6

Sum of the probabilities of states in Markov chain

Newly arrived downlink packets have to be announced in the beacon. Similarly, newly arrived packets in uplink direction needs to wait in the synchronization state for the next cycle of RAW slots. According to renewal theory the probability distribution of the time between packet arrival and beacon transmission has PGF of T1 (z ) = ¯1 . mean value is given as T The sum of the probabilities of all states in sync stage is denoted by S1 and can be obtained as
R R 1 BI BI -1 i=0

z i and the

Sk,1 =

 k, 0 k

+ Pk,d
i=0

bk,i,0 + (1 - Pk,d )(1 -

 k, 0 )k k i=0

¯1 bk,i,0 T (6.31)

Pk,d k   ¯ = k, + (1 - k, 0 k + 0 )k k k T1 1 - Pk,d

213

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

The sum of the state probabilities in the delay block is denoted by S3 and given by:
¯d -1 R D

Sk,3 =
i=0 l=0

bk,i,0,l =

Pk,d k 1 - Pk,d

(6.32)

The input probability to the zeroth backoff phase is given as:
k   k, 0 k + (1 - Pk,d )(1 - k,0 ) 1-Pk,d k k
k Pk,d 1-P k,d

P in[k, 0, 1] =

Wk,0

+

Wk,0

(6.33)

Since P in[k, 0, 2] = 0 for backoff state bk,0,Wk,0 -1 , we can write the state probability of bk,0,Wk,0 -1 from eqn. (6.10) as
P in[k,0,1] y

where, y = 1 - (1 - gk )(1 - Plast ). P in[k, 0, 2] for

state bk,0,Wk,0 -2 is given as xbk,0,Wk,0 -1 where, x = gk (1 - Plast ). Now from Markov chain we find the vertical input probabilities P in[k, i, 1] for backoff phases (i = 1 . . . R), state probabilities bk,i,0 where the transmission takes place and sum of the state probabilities for each backoff phase Spart [k, i] as
i- 1 l=0 Wk,l -1 x n (y) n=0 i j =1

P in[k, i, 1] = P in[k, 0, 1](1 - k k ) (1 - Pk,d )

i

i

Wk,j

(6.34)

Wk,i -1

bk,i,0 = P in[k, 0, 1]
n=0

x ( )n y

(6.35)

214

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Wk,i -1

Spart [k, i] = P in[k, i, 1] F nlk +
n=1 Wk,i -2

x ( )n + (Wk,i - 1)F lk y
Wk,i -2

+
n=1

x (Wk,i - 1 - n)( )n + (1 - y )F lk y

n=1

x (Wk,i - 1 - n)( )n y

(6.36)

Now, the sum of the probabilities of all backoff states can be obtained as Sk,2 =
R i=0

Spart [k, i].

Finally, the normalization condition states that the sum of the probabilities of all states, including the idle state, must be one:

Pk,idle + Sk,1 + Sk,2 + Sk,3 = 1

(6.37)

The normalized throughput can be obtained as k ld k Dk

T hk =

(6.38)

and the mean waiting time can be obtained as 1 k k,tot (1) - k k,tot (1)

Wk =

(6.39)

6.4

Results and Discussion

We have used MapleSoft computing software to solve equations (6.1-6.26) through iterative approach in which the equations in the Markov model are successively evaluated

215

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Table 6.1: Parameters for analytical model of IEEE 802.11ah protocol Parameters Numerical values Duration of Time slot,  52 µs Bit error rate, BER 2X 10-6 bits/s 6 µs Minimum PHY header Arbitration inter frame space, AIFSN [2, 3, 5, 7] Data rate 650 Kbps MAC service data unit length, MSDU 256 octets Short Inter-frame space duration, SIFS 160µs 14 bytes MAC header length PS-Poll 6 µs PS-Poll-ACK 6 µs 6 µs Block acknowledgement, BA Maximum retry limit , R 7 1 Max. number of antennas in AP, Aap Number of antenna in STA 1 4 MHz Bandwidth OFDM symbol duration 40 µs Number of bits in OFDM symbol 54 Modulation and Coding scheme, MCS 0 Beacon interval, BI 1s 200ms RAW slot Minimum contention window size Wmin [15, 15, 31, 31] TXOP limit [2, 2, 4, 4] packets

using the results. After a number of iterations, we obtain a stable solution for k , fk , k and k . Using these parameters, we calculate the network metrices. We assume that all STAs and AP in our network are IEEE 802.11ah devices. Our network has a bandwidth of 4 MHz having 108 usable subcarriers. A BPSK modulation with 1/2 coding scheme allows 54 bits to be transmitted per OFDM symbol duration of 40 µs with long guard interval. While evaluating performance metrics for varying number of nodes and packet arrival rates, we first vary number of nodes uniformly and then keeping the number of nodes fixed, we vary packet arrival rates uniformly for all nodes. We assume that each STA has same Poisson packet arrival rate k per minute. In RAW scheme since both uplink and downlink 216

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Average backoff time

Average backoff time

Average backoff time

5.2
5 4.8 ms 4.6 4.4 4.2 4 50 100 150 200 250 nodes 300 350 60 40 lambda_per_min 80 100 120

2.5 2.4 ms 2.3 2.2 2.1 2 20 40 80 100 20 40 80 60 40 lambda_per_min 100

5 4.8 ms 4.6 4.4 4.2 4 60 nodes 60 40 lambda_per_min

400 20

80

100 20

60 nodes

80

100 20

(a) Backoff Time of a node in nonQoS network

(b) Backoff Time of heterogeneous non-QoS node

(c) Backoff Time of heterogeneous QoS node

Figure 6.6: Backoff Time. transmissions are initiated by sending PS-Poll from STA, we consider one queue for both uplink and downlink transmission. The parameters for the model are shown in Table 6.1. In our model we assume that the beacon interval is divided into only RAW slots and there is no common contention window within the beacon interval. We also assume that non-QoS network has non-QoS nodes with only background (BK) traffic and heterogeneous network has both QoS and non-QoS nodes. The variation of backoff time as a function of number of nodes and packet arrival rate of a node in non-QoS network is shown in Fig. 6.6a. Similarly, the backoff times of non-QoS node and QoS node for a IoT network are shown in Fig. 6.6b and Fig. 6.6c respectively. In non-QoS network, the backoff time of a node is slightly higher that the backoff time of a non-QoS node in a heterogeneous network. This happens because, all nodes in nonQoS network have larger AIFSN values whereas heterogeneous network has a mix of QoS and non-QoS nodes. QoS nodes in heterogeneous network take smaller backoff time and transmit packets more frequently than non-QoS nodes. Since QoS nodes go to doze mode after transmission, non-QoS nodes encounter less contention in a heterogeneous network than a non-QoS network for same packet arrival rate. With the increase in packet arrival

217

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

rate, more nodes contend for medium which results in increase in backoff time for all nodes. However, since transmission opportunity of a QoS node is larger than a non-QoS node in a heterogeneous network, the increase of backoff time for non-QoS node is higher than the increase of backoff time of a QoS node. Within the non-saturated operating region, backoff time is in the range of 2 to 2.5ms for QoS node and 4 to 5.2ms for non-QoS node. At low load condition, the increase in backoff time with the increase of number of nodes is not significant due to because, the packets arrive randomly for each node and the interarrival time of the packet is large enough to finish the transmission of the packet. However, as the number of packet arrival increases, the backoff time increases gradually due to increased contention. At the end of RAW slot, the backoff process of the node is suppressed and the node enters doze mode to initiate a new backoff process with minimum random contention window in the next designated RAW slot. Once a node finishes the transmission within the TXOP period, the node is not allowed to contend for the medium in the same RAW slot even though the node has pending packets to transmit. This mechanism provides fair opportunity for non-QoS nodes to contend for the medium. Contrary to IEEE 802.11ac protocol [11], we observe that the backoff times for non-QoS traffic in IEEE 802.11ah do not abruptly increase with the increase of packet arrival rate. Therefore, we conclude that RAW scheme can safely handle QoS traffic without degrading the non-QoS traffic in heterogeneous operating environment. For energy constrained IoT devices, it is desirable that the device goes to doze mode when there is no activity for uplink or downlink transmission. The probability that a node in non QoS network remain idle is shown in Fig. 6.7a. The probabilities that a QoS node and a non-QoS remain idle in a heterogeneous network are shown in Fig. 6.7b and Fig.

218

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Probability of a STA being idle

Probability of a STA being idle

Probability of a STA being idle

0.8 0.7 0.6 prob 0.5 0.4 0.3 400 350 300 250 40 20

0.8 0.7 prob 0.6 0.5 0.4 0.3 100 200 nodes150 100 60 80 60 40 20

0.8 0.7 prob 0.6 0.5 0.4 0.3 100 20

80

80 50 120 100 lambda_per_min

40 nodes

20

100

60 80 lambda_per_min

60

40 nodes

20

100

40 60 80 lambda_per_min

(a) Idle probability of a node in non-QoS network

(b) Idle probability of a non-QoS node in heterogeneous network

(c) Idle probability of a QoS node in heterogeneous network

Figure 6.7: Probability of a node being idle. 6.7c respectively. At low load condition, most of the time the nodes remain idle in both setup. As the traffic arrival increases, the idle probability of a node in non-QoS network sharply decreases below 20% at an arrival rate of 120 packets/min. However, the idle probability of a non-QoS node in a heterogeneous network is slightly higher (25%) due to smaller backoff time. From backoff point of view, the idle probability of a QoS node (30%) is higher than the idle probability of a non-QoS node in a heterogeneous network due to because, the backoff time of QoS traffic is less than the backoff time of non-QoS traffic. However, idle probability also depends on the TXOP duration of each node. In our model, QoS nodes can transmit a maximum of four packets during TXOP period whereas a nonQoS node can transmit up to two packets during TXOP period. Therefore, the transmission time for QoS node is larger than the transmission time of non-QoS node and consequently, from transmission point of view, idle probability of a QoS node decreases. The longer transmission time offsets gain in idle probability due to shorter backoff time. Therefore, in heterogeneous network, as the packet arrival increases, the non-QoS node remains active in backoff process and QoS node remains active in longer transmission process and the idle probability for both type of nodes decrease. We observe that the inclusion of QoS node in

219

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Number of packets in buffer before start of TXOP

Number of packets in buffer before start of TXOP

Number of packets in buffer before start of TXOP

7
8 packet 6 4 2 50 100 150 200 100 80 60 40 lambda_per_min 120

6 5 packet 4 3 2 20 80 60 40 lambda_per_min 100

1.4 1.35 1.3 packet 1.25 1.2 1.15 1.1

40

20

250 nodes 300 350

400 20

60 nodes

40

80

100 20

60 nodes

80

100 20

80 60 40 lambda_per_min

100

(a) Queue size of a node before start of TXOP in non-QoS network

(b) Queue size of a non-QoS node before start of TXOP in a heterogeneous network

(c) Queue of a QoS node before start of TXOP in a heterogeneous network

Figure 6.8: Queue size before start of TXOP. network does not abruptly decrease the idle probability of non-QoS node only. At low load condition, the number of packets in the queue before the start of transmission is one for both QoS and non-QoS node in both types of network. As the packet arrival rate increases, the queue size gradually increases for both types of nodes. However, since the number of packets transmitted by non-QoS node during TXOP period is less than number of packets transmitted by QoS node, the queue size for a non-QoS node increases at a faster rate. Even when the number of QoS nodes increase further, some non-QoS nodes may not get the opportunity to transmit within the RAW slot which further increases the queue size of the non-QoS node before the start of TXOP period in the next beacon interval. From Fig. 6.8a we observe that the queue size of a node in non-QoS network is higher than the queue size of a non-QoS node in heterogeneous network as shown in Fig. 6.8b due to longer backoff time and less transmission opportunity. We also observe that queue size for QoS traffic shown in Fig. 6.8c is not affected much because of larger number of packet transmission during TXOP period. As the packet arrival rate increases, more packets contend for the medium within the RAW slot. There is a possibility that multiple nodes transmit PS-Poll messages at the same

220

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Collision probability of PS-Poll

Collision probability of PS-Poll

Collision probability of PS-Poll

0.007 0.006 0.005 0.004 prob 0.003 0.002 0.001 0 50 100 150 200 250 nodes 300 350 100 80 60 40 lambda_per_min

0.006 0.005 0.004 prob 0.003 0.002 0.001 0
120

0.006 0.005 0.004 prob 0.003 0.002 0.001 0 20 40 60 nodes 80 60 40 lambda_per_min 100 20 40 60 nodes 80 60 40 lambda_per_min 100

400 20

80

100 20

80

100 20

(a) Collision probability of a node in non-QoS network

(b) Collision probability of heterogeneous non-QoS node

(c) Collision probability of heterogeneous non-QoS node

Figure 6.9: Collision probability of PS-Poll. time and create collision at access point. As a result collision probabilities increases with the increase of packet arrival rate for both types of network scenario as shown in Figs. 6.9a, 6.9b and Fig. 6.9c respectively. Since all nodes in a non-QoS network have the same AIFSN values, they start backoff process at the same time and more likely to pick the same backoff counter value. As a result, the collision probability of PS-Poll message from a node in non-QoS network is higher (0.7%) than the collision probability of non-QoS node in a heterogeneous network (0.6%). Since collisions are random and packet arrival rates increase at same rate for both non-QoS and QoS nodes in our model, the collision probability increases at the same rate for both QoS and non-QoS nodes in heterogeneous network. Retransmission probabilities shown in Figs. 6.10a to 6.10c depend on collision probabilities of PS-Poll and data error probabilities due to noisy channel. Figs. 6.11a- 6.11c show successful transmission probabilities for a node in non-QoS network, non-QoS node in a heterogeneous network and QoS node in a heterogeneous network respectively. Successful packet transmission depends on successful transmission of PS-Poll message in both uplink and downlink transmission as well as error free reception of data and ACK messages. The successful reception of data and ACK packets depend on channel condition which we have 221

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Packet retransmission probability

Packet retransmission probability

Packet retransmission probability

0.014 0.012 0.01 0.008 prob 0.006 0.004 0.002 0 50 100 150 200 250 nodes 300 350 100 80 60 40 lambda_per_min

0.012 0.01 0.008 prob 0.006 0.004 0.002 0
120

0.012 0.01 0.008 prob 0.006 0.004 0.002 0 20 40 60 nodes 80 60 40 lambda_per_min 100 20 40 60 nodes 80 60 40 lambda_per_min 100

400 20

80

100 20

80

100 20

(a) Packet retransmission probability of a node in non-QoS network.

(b) Packet retransmission probability of a non-QoS node in heterogeneous network.

(c) Packet retransmission probability of a QoS node in heterogeneous network.

Figure 6.10: Packet retransmission probability.
Success probability of a Tx

Success probability of a Tx

Success probability of a Tx

1 0.998 0.996 0.994 prob 0.992 0.99 0.988 0.986 50 100 150 200 250 nodes 300 350 100 80 60 40 lambda_per_min

1 0.998 0.996 prob 0.994 0.992 0.99 0.988
120

1 0.998 0.996 prob 0.994 0.992 0.99 0.988 20 40 80 60 40 lambda_per_min 100 20 40 80 60 40 lambda_per_min 100

400 20

60 nodes

80

100 20

60 nodes

80

100 20

(a) Successful transmission probability of a node in non-QoS network.

(b) Successful transmission probability of a non-QoS node in heterogeneous network.

(c) Successful transmission probability of a QoS node in heterogeneous network.

Figure 6.11: Successful transmission probability. modeled as bit error rate and assumed to be constant at all time. Therefore, packet error probability is impacted by the size of packets which is also constant for all traffic categories in our model. As a result, packet error rate is not a function of packet arrival rate and remains constant throughput the analysis. Therefore, successful transmission probability depends only on collision probability and as the collision probability increases, successful transmission probabilities decrease and retransmission probabilities increase. Figs. 6.12a to 6.12c show the stability criteria of a node in non-QoS network, non-QoS node in a heterogeneous network and QoS node in a heterogeneous network respectively. We observe that the stability criteria for non-QoS and QoS nodes increase almost at the

222

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Stability criterion

Stability criterion

Stability criterion

0.8 val 0.6 0.4 0.2 50 100 150 200 100 80 60 40 lambda_per_min 120

0.8 0.7 0.6 val 0.5 0.4 0.3 0.2 20 40 80 60 40 lambda_per_min 100

0.9 0.8 0.7 val 0.6 0.5 0.4 0.3 0.2 20 40 80 60 40 lambda_per_min 100

250 nodes 300 350

400 20

60 nodes

80

100 20

60 nodes

80

100 20

(a) Stability criteria of a node in non-QoS network.

(b) Stability criteria of a non-QoS node in heterogeneous network.

(c) Stability criteria of a QoS node in heterogeneous network.

Figure 6.12: Stability criteria of a node. same rate with the increase of packet arrival rate. This phenomenon clearly demonstrate that in RAW mechanism, the stability criteria of both non-QoS node and QoS node are affected almost equally. A slight increase in stability criteria shown in Fig.6.12c argues that increase of higher priority traffic plays major role in driving network to unstable operating region. Figs. 6.13a to 6.13c show throughput per node for a node in non-QoS network, nonQoS node in heterogeneous network and QoS node respectively. As the packet arrival rate increases, both categories of nodes transmit more packets and throughput per node increases. All nodes in a non-QoS network get same opportunities to transmit packets. However, in a heterogeneous network non-QoS nodes have less opportunity to transmit packets. As a result, per node throughput of a node in non-QoS network is slightly higher (8.5 Kbps) than the throughput of a non-QoS node in heterogeneous network (8 Kbps). Since QoS node has higher packet transmission probability due to longer TXOP time and shorter backoff duration, per node throughput of QoS node is higher than non-QoS node. Network throughputs shown in Fig. 6.14a and 6.14b are the aggregate of per node throughputs of IoT network.

223

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

Throughput per STA

Throughput per STA

Throughput per STA

8 7 6 Kbps 5 4 3 2 50 100 150 200 100 80 60 40 lambda_per_min 120

8 7 6 Kbps 5 4 3 2 20 40 80 100

12 10 Kbps 8 6 4 2 20 100

250 nodes 300 350

400 20

60 nodes

80

100 20

40 lambda_per_min

60

40

60 nodes

80

100 20

80 60 40 lambda_per_min

(a) Throughput of a node in nonQoS network.

(b) Throughput of a non-QoS node in heterogeneous network.

(c) Throughput of a QoS node in heterogeneous network.

Figure 6.13: Per STA throughput.
Network Throughput

Network Throughput

600 500 400 Kbps 300 200 100 0 50 100 150 200 250 nodes 300 350 60 40 lambda_per_min 80 100 120

800 600 Kbps 400 200 0 50 100 150 200 250 nodes 300 350 80 60 40 lambda_per_min 100

400 20

400 20

(a) Network Throughput of non-QoS network.

(b) Network Throughput of QoS network.

Figure 6.14: Network Throughput.

6.5

Chapter Summary

In this chapter we have developed the analytical model of RAW scheme of IEEE 802.11ah protocol with differentiated QoS traffic under non-saturated load and non-ideal channel condition. We observe that the RAW scheme is suitable for low load IoT network and supports the coexistence of heterogeneous traffic. Due to slotted access window, the backoff time of non-QoS traffic is not impacted severely as in IEEE 802.11ac protocol. We also observe that RAW mechanism supports larger number of QoS and non-QoS nodes in non saturated operation condition. However, as the number of nodes and packet arrival

224

Chapter 6: Performance Evaluation of Heterogeneous IoT Nodes with Differentiated QoS in IEEE 802.11ah RAW Mechanism

rate increase, some of the non-QoS nodes are unable to transmit all packets within the RAW slot. Consequently the size of the queue of non-QoS gradually increase which is a major concern for network stability. Unlike IEEE 802.11ac protocol, stability criteria of IEEE 802.11ah RAW mechanism behave in the same manner for non-QoS and QoS nodes. Therefore, we argue that RAW mechanism can safely support QoS traffic at low load condition. Clearly, if the network has only TIM STAs and the whole beacon interval is divided into RAW slots, some of the STAs may need to wait for an excessive long time to transmit the packets if STA fails to transmit within the designated RAW slot. This situation leads to excess contention in the next RAW cycle and reduces the performance of the network. To avoid this situation we suggest an important implementation criteria that a portion of the beacon interval is kept open for the contention of all STAs so that the STA that was unable to transmit at its designated RAW slot, may have the opportunity to transmit in the common contention period and thus avoid long waiting time.

225

Chapter 7 Conclusion
In this thesis, we have developed analytical model of DL-MU-TXOP sharing in IEEE 802.11ac protocol and evaluated TXOP sharing probability for different traffic categories. Our results show 105% enhanced normalized payload throughput which is due to MUTXOP sharing. We observe that low priority traffic categories benefit most from TXOP sharing due to sharing of TXOP period with secondary ACs. In this thesis we have also proposed A-MAC protocol that allows multi-user communication in UL and we have developed a detail analytical model of the proposed A-MAC protocol using M/G/1 queuing model and Markov chain model. The protocol achieves a network throughput which is 150% higher than the throughput of conventional 802.11ac transmission for the same PHY layer capabilities. Although we have achieved enhanced network throughput by increasing the intensity of higher priority traffic, we observe that network becomes unstable very quickly as the low priority traffic gets less opportunity to transmit. The proper selection of contention window and AIFS number (AIFSN) can ensure better network stability and fairness among all traffic categories. The proposed concur-

226

Chapter 7: Conclusion

rent RTS transmission and channel sounding technique using dedicated OFDM subcarrier blocks and multiple UL transmission using MU-MIMO technique can be an important contribution for future amendment of IEEE 802.11 protocol towards 5G. Our results also show that the network metrics for all four traffic categories can effectively be represented by two distinct priority groups which advocates in favour of the prioritization of network traffic in only two categories in the future amendment. We have discussed the impact of hidden node problem in uplink transmission in a heterogeneous network. The simulation results show significant throughput degradation due to the presence of hidden nodes in coexisting network. We strongly advocate in favour of increasing carrier sensing threshold of STAs during association with HE AP which not only increase network capacity but also reduce collision probability due to hidden nodes. We propose some modifications to the draft recommendation to reduce the inter BSS interference arising from asymmetrical transmission radius of AP and STAs. We have developed the analytical model of RAW scheme of IEEE 802.11ah protocol with differentiated QoS traffic under non-saturated load and non-ideal channel condition. We observe that the RAW scheme is suitable for low load IoT network and supports the coexistence of heterogeneous traffic. Due to slotted access window, the backoff time of non-QoS traffic was not impacted severely as in IEEE 802.11ac protocol. We also observe that RAW mechanism supports larger number of QoS and non-QoS nodes in non saturated operation condition. However, as the number of nodes and packet arrival rate increase, some of the non-QoS nodes were unable to transmit all packets within the RAW slot. Consequently the size of the queue of non-QoS gradually increase which is a major concern for network stability. Unlike IEEE 802.11ac protocol, stability criteria of IEEE 802.11ah RAW

227

Chapter 7: Conclusion

mechanism varies same way for non-QoS and QoS nodes. Therefore, we argue that RAW mechanism can safely support QoS traffic at low load condition. Clearly, if the network has only TIM STAs and the whole beacon interval is divided into RAW slots, some of the STAs may need to wait for an excessive long time to transmit the packets if STA fails to transmit within the designated RAW slot. This situation leads to excess contention in the next RAW cycle and reduces the performance of the network. To avoid this situation we suggest an important implementation criteria that a portion of the beacon interval is kept open for the contention of all STAs so that the STA that was unable to transmit at its designated RAW slot, may have the opportunity to transmit in the common contention period and thus avoid long waiting time. In our future work, we will investigate the possibility of simultaneous uplink and downlink transmissions in IEEE 802.11 protocol to increase effective utilization of bandwidth. The impact of a mixed RAW scheme and common contention window in IEEE 802.11ah network will be studied in detail in our future work. Designing IoT architectures should take many issues and challenges into considerations such as scalability, interoperability, business model, security, energy consumption, and mobility. These challenges have motivated us to start thinking of designing a new IoT architecture that effectively handles scalability, mobility, security and performance while keeping simplicity of the network. In our future work we will establish a reference model for IoT protocol architecture.

228

Appendix A Abbreviations and Symbols

A.1

Abbreviations
AC ACK AC AID AIFS AIFSN A-MPDU A-MSDU AP BA BAR Access Category Acknowledgement Access Category Association ID Arbitration Interframe Space Arbitration Interframe Space Number Aggregate MPDU Aggregate MSDU Access Point Block Acknowledgement Block Acknowledgement Request 229

Appendix A: Abbreviations and Symbols

BI BO BSS CCA CSI CSMA/CA CSTH CTS CW DCF DCM DIFS DL DL-MIMO DTIM ED EDCA EDCAF EIFS G-ACK G-CTS

Beacon Interval Backoff Basic Service Set Clear Channel Assessment Channel State Information Carrier Sense Multiple Access/ Collision Avoidance Carrier Sensing Threshold Clear to Send Contention Window Distributed Coordination Function Dual Carrier Modulation DCF Inter-frame Spacing Downlink Downlink MIMO Delivery Traffic Indication Map Energy Detection Enhanced Distributed Channel Access EDCA Function Extended Interframe Space Group ACK Group CTS

230

Appendix A: Abbreviations and Symbols

HPG IoT LPG LST L-LTF L-STF LTE MAC MCS MIMO MPDU MPR MSDU MU NAV NDP NDPA OFDM pdf PDF PGF

High Priority Group Internet of Things Low Priority Group Laplace-Stieltjes Transform Legacy Long Training Frame Legacy Short Training Frame Long Term Evolution Medium Access Control Modulation and Coding Scheme Multiple Input Multiple Output MAC Protocol Data Unit Multi Packet Reception MAC Service Data Unit Multi-User Network Allocation Vector Null Data Packet Null Data Packet Announcement Orthogonal Ferquency Division Multiplexing Probability Density Function Probability Distribution Function Probability Generating Function

231

Appendix A: Abbreviations and Symbols

PHY PPDU PRAW QoS QAM RAW RTS RU SIFS SNR SU TID TIM TXOP TWT UL VHT WLAN

Physical Layer Physical Protocol Data Unit Periodic RAW Quality of Service Quardrature Amplitude Modulation Restricted Access Window Ready to Send Resource Unit Short Inter-frame Spacing Signal to Noise Ratio Single User Terminal ID Traffic Indication Map Transmission Opportunity Target Wake Time Uplink Very High Throughput Wireless Local Area Network

A.2

Symbols and Corresponding Descriptions

232

Appendix A: Abbreviations and Symbols

Ak (z ) Ak,max Bk Bk,i (z )
 (z ) Bk,m

PGF for packet arrival during a packet service time Time in slots where traffic category k can access medium Freezing Counter Value PGF for time spent in backoff phase i LST of vacation time State probability of a STA of category k , backoff phase i, backoff counter value n and freezing counter value l

bk,i,n,l

ber Bf nlk (z ) Bf lk (z ) Bf sk (z ) Bofk (z ) Ctk (z )
 Dk (s)

Bit Error Rate PGF for time spent in no loop back freezing counter PGF for time spent in loop back freezing counter PGF for time required to decrement backoff counter PGF for total backoff time PGF for the duration of unsuccessful bandwidth reservation LST of time required between two successive transmissions LST of active time between two successive transmissions PGF for packet arrival during vacation Vm
+ PGF for packet arrival during residual vacation Vm

Da k (s) Fk,m (z )
+ Fk,m (z )

fk f sk gk k

Channel idle probability during freezing countdown TXOP sharing probability Backoff counter decrement probability Index of traffic category

233

Appendix A: Abbreviations and Symbols

Mk M bk P ink,i [1] P ink,i [2]

Maximum number of bursts transmitted during TXOP period Mean number of packets in a burst Input probability to a backoff state from previous backoff phase Input probability to a backoff state from previous backoff state within same backoff phase[0.5ex]

P bck P bsk

Backoff counter suppression probability due to collision Backoff counter suppression probability due to successful transmission

qk,i Q+ k (z ) Sbk (z ) Stk (z ) Swk (z ) Sk,i T hk Vk Vk+ vk,i Wk,i c r

Mass probability of i packets in the queue PGF for number of packets in queue befor start of TXOP PGF for the duration of a single burst PGF for the duration of TXOP period PGF for medium access duration Sum of state probabilities Normalized payload throughput Vacation period Residual vacation time Mass probability of i packet arrival during vacation Contention Window size of traffic class k during ith backoff phase Probability of no CTS error Probability of no RTS error

234

Appendix A: Abbreviations and Symbols

  k
µ k,m

probability of no data error Timeslot Transmission probability Probability that queue has m packets after departure of µ packets Probability that MPDU contains packet for d directions PGF for the number of packets in the burst Probability of µ bursts transmitted during TXOP period PGF for number of packets in queue after departure of µ packets Offered load Effective offered load during channel error

k,d k (z ) k,µ k,µ (z ) k k

235

Bibliography
[1] O. Bejarano, E.W. Knightly, and Minyoung Park. IEEE 802.11ac: from channelization to multi-user MIMO. Communications Magazine, IEEE, 51(10):84­90, October 2013. [2] 802.11ac in-depth. White paper, Aruba Networks, Sunnyvale, CA, 2014. [3] 802.11ac technology introduction. White paper, Rohde & Schwarz, Munich, Germany, 2012. [4] Chunhui Zhu, Youngsoo Kim, O. Aboul-Magd, and Chiu Ngo. Multi-user support in next generation wireless LAN. In Consumer Communications and Networking Conference (CCNC), 2011 IEEE, pages 1120­1121, Jan 2011. [5] Wireless LAN Medium Access Control MAC and Physical Layer PHY specifications: Enhancements for Very High Throughput for Operation in Bands below 6 GHz. IEEE standard 802.11ac, The IEEE 802.11 Working Group of the 802 Committee, New York, NY, December 2012. [6] Bin Tian. OFDMA tone plan, leftover tones and pilot structure.

236

Bibliography

URL:https://mentor.ieee.org/802.11/dcn/15/11-15-0819-01-00ax-11ax-ofdmatone-plan-leftover-tones-and-pilot-structure.pptx. 2015. [7] Simone Merlin. Trigger frame format . URL:https://mentor.ieee.org/802.11/dcn/15/1115-0877-00-00ax-trigger-frame-format.pptx. 2015. [8] Ron Porat. Preamble formats, URL:https://mentor.ieee.org/802.11/dcn/15/11-15-

1353-01-00ax-preamble-formats.pptx. 2015. [9] Wireless LAN Medium Access Control (MAC) and Physical Layer (PHY) Specifications Amendment 2: Sub 1 GHz License Exempt Operation. IEEE standard 802.11ah, The IEEE 802.11 Working Group of the 802 Committee, New York, NY, 2016. [10] J. Misic, S. Rashwand, and V. B. Misic. Analysis of Impact of TXOP Allocation on IEEE 802.11e EDCA under Variable Network Load. IEEE Transactions on Parallel and Distributed Systems, 23(5):785­799, May 2012. [11] M. Z. Ali, J. Misic, and V. B. Misic. Performance analysis of downlink MU-TXOP sharing in IEEE 802.11ac. IEEE Transactions on Vehicular Technology, PP(99):1­1, 2017. [12] Defining the future of multi-gigabit wireless communications. White paper, Wireless Gigabit Alliance, 2010. [13] E. Khorov, A. Kiryanov, and A. Lyakhov. IEEE 802.11ax: How to Build High Efficiency WLANs. In 2015 International Conference on Engineering and Telecommunication (EnT), pages 14­19, Nov 2015.

237

Bibliography

[14] Robert Stacey. Spec framework proposal, URL:https://mentor.ieee.org/802.11/dcn/14/1114-1453-02-00ax-spec-framework-proposal.docx. November 2014. [15] D. Evans. The Internet of Things, How the Next Evolution of the Internet is Changing Everything. White paper, Cisco Internet Business Solutions Group (IBSG), 2011. [16] N. Nawaz, M. Hafeez, S. A. R. Zaidi, D. C. McLernon, and M. Ghogho. Throughput enhancement of restricted access window for uniform grouping scheme in ieee 802.11ah. In 2017 IEEE International Conference on Communications (ICC), pages 1­7, May 2017. [17] B. Domazetovic, E. Koan, and A. Mihovska. Performance evaluation of IEEE

802.11ah systems. In 2016 24th Telecommunications Forum (TELFOR), pages 1­ 4, Nov 2016. [18] Eng Hwee Ong, J. Kneckt, O. Alanen, Zheng Chang, T. Huovinen, and T. Nihtila. IEEE 802.11ac: Enhancements for very high throughput WLANs. In Personal Indoor and Mobile Radio Communications (PIMRC), 2011 IEEE 22nd International Symposium on, pages 849­853, Sept 2011. [19] B. Bellalta, J. Barcelo, D. Staehle, A. Vinel, and M. Oliver. On the Performance of Packet Aggregation in IEEE 802.11ac MU-MIMO WLANs. Communications Letters, IEEE, 16(10):1588­1591, October 2012. [20] D. Nojima, L. Lanante, Y. Nagao, M. Kurosaki, and H. Ochi. Performance evaluation for multi-user MIMO IEEE 802.11ac wireless LAN system. In Advanced Communi-

238

Bibliography

cation Technology (ICACT), 2012 14th International Conference on, pages 804­808, Feb 2012. [21] Chunhui Zhu, A. Bhatt, Youngsoo Kim, O. Aboul-magd, and Chiu Ngo. MAC enhancements for downlink multi-user MIMO transmission in next generation WLAN. In Consumer Communications and Networking Conference (CCNC), 2012 IEEE, pages 832­837, Jan 2012. [22] Sameer Vermani. Mandatory/optional support issues for 802.11ax,

URL:https://mentor.ieee.org/802.11/dcn/16/11-16-0612-00-00ax-mandatoryoptional-support-issues-for-802-11ax.pptx. May 2016. [23] Jiayin Zhang. Preamble structure for 11ax system,

URL:https://mentor.ieee.org/802.11/dcn/15/11-15-0101-01-00ax-preamblestructure-for-11ax- system.pptx. 2015. [24] Joonsuk Kim. HE SIG-B structure. URL:https://mentor.ieee.org/802.11/dcn/15/1115-0821-00-00ax-he-sig-b-structure.pptx. 2015. [25] Young Hoon Kwon. HE NDP frame for sounding.

URL:https://mentor.ieee.org/802.11/dcn/15/11-15-1051-00-00ax-he-ndp-framefor-sounding.pptx. 2015. [26] Po-Kai Huang. NAV consideration for UL MU response follow up.

URL:https://mentor.ieee.org/802.11/dcn/15/11-15-1326-02-00ax-nav-considerationfor-ul-mu-response-follow-up.pptx. 2015. [27] Andrew Blanksby. Packet 239 extension follow up .

Bibliography

URL:https://mentor.ieee.org/802.11/dcn/16/11-16-0071-00-00ax-packet-extensionfollow-up.pptx. 2016. [28] Kiseon Ryu. Indication for UL MU carrier sensing.

URL:https://mentor.ieee.org/802.11/dcn/16/11-16-0057-00-00ax-indication-forul-mu-carrier-sensing.pptx. 2016. [29] Chittabrata Ghosh. UL OFDMA-based random access procedure.

URL:https://mentor.ieee.org/802.11/dcn/15/11-15-1105-00-00ax-ul-ofdma-basedrandom-access-procedure.pptx. 2016. [30] M. Qutab ud din, A. Hazmi, L. F. Del Carpio, A. Goekceoglu, B. Badihi, P. Amin, A. Larmo, and M. Valkama. Duty Cycle Challenges of IEEE 802.11ah Networks in M2M and IoT Applications. In European Wireless 2016; 22th European Wireless Conference, pages 1­7, May 2016. [31] Inc. Maplesoft. Maple 16. 2013. [32] Boris Bellalta and Miquel Oliver. A Space-time Batch-service Queueing Model for Multi-user MIMO Communication Systems. In Proceedings of the 12th ACM International Conference on Modeling, Analysis and Simulation of Wireless and Mobile Systems, MSWiM '09, pages 357­364, New York, NY, USA, 2009. ACM. [33] Chulho Chung, Taewook Chung, Byungcheol Kang, and Jaeseok Kim. A-MPDU using fragmented MPDUs for IEEE 802.11ac MU-MIMO WLANs. In TENCON 2013 - 2013 IEEE Region 10 Conference (31194), pages 1­4, Oct 2013. [34] M. Yazid, A. Ksentini, L. Bouallouche-Medjkoune, and D. Aissani. Performance 240

Bibliography

Analysis of the TXOP Sharing Mechanism in the VHT IEEE 802.11ac WLANs. Communications Letters, IEEE, 18(9):1599­1602, Sept 2014. [35] G. Bianchi. Performance analysis of the IEEE 802.11 distributed coordination function. Selected Areas in Communications, IEEE Journal on, 18(3):535­547, March 2000. [36] Zhiqun Hu, Xiangming Wen, Zhaoxing Li, Zhaoming Lu, and Wenpeng Jing. Modeling the TXOP Sharing Mechanism of IEEE 802.11ac Enhanced Distributed Channel Access in Non-Saturated Conditions. Communications Letters, IEEE, 19(9):1576­ 1579, Sept 2015. [37] C. Chung, Y. Jung, and J. Kim. Saturation throughput analysis of IEEE 802.11ac TXOP sharing mode. Electronics Letters, 51(25):2164­2166, 2015. [38] S. Ghez, S. Verdu, and S.C. Schwartz. Stability properties of slotted Aloha with multipacket reception capability. IEEE Transactions on Automatic Control, 33(7):640­649, July 1988. [39] L. Tong, Q. Zhao, and G. Mergen. Multipacket reception in random access wireless networks: From signal processing to optimal medium access control. IEEE Commun. Mag., 39(11):108­112, Nov. 2001. [40] Q. Zhao and L. Tong. A dynamic queue protocol for multi-access wireless networks with multipacket reception. Wireless Comm. ,IEEE Trans. on., 3(6):2221­2231, Nov. 2004. [41] P. X. Zheng, Y. J. Zhang, and S. C. Liew. Multipacket Reception in Wireless Local 241

Bibliography

Area Networks. In 2006 IEEE International Conference on Communications, volume 8, pages 3670­3675, June 2006. [42] S. Zhou and Z. Niu. An Uplink Medium Access Protocol with SDMA Support for Multiple-Antenna WLANs. In 2008 IEEE Wireless Communications and Networking Conference, pages 1809­1814, March 2008. [43] Kun Tan, He Liu, Ji Fang, Wei Wang, Jiansong Zhang, Mi Chen, and Geoffrey M. Voelker. SAM: Enabling Practical Spatial Multiple Access in Wireless LAN. In Proceedings of the 15th Annual International Conference on Mobile Computing and Networking, MobiCom '09, pages 49­60, New York, NY, USA, 2009. ACM. [44] T. Tandai, H. Mori, K. Toshimitsu, and T. Kobayashi. An efficient uplink multiuser MIMO protocol in IEEE 802.11 WLANs. In 2009 IEEE 20th International Symposium on Personal, Indoor and Mobile Radio Communications, pages 1153­1157, Sept 2009. [45] F. Babich and M. Comisso. Theoretical analysis of asynchronous multi-packet reception in 802.11 networks. IEEE Transactions on Communications, 58(6):1782­1794, June 2010. [46] D. Jung, R. Kim, and H. Lim. Asynchronous Medium Access Protocol for MultiUser MIMO Based Uplink WLANs. 60(12):3745­3754, December 2012. [47] C. Chen, S. Hou, and S. Wu. A Novel Analytical Model for Asynchronous MultiPacket Reception MAC Protocol. IEEE Communications Letters, PP(99):1­1, 2017. IEEE Transactions on Communications,

242

Bibliography

[48] H. Li, A. Attar, and V. C. M. Leung. Multi-User Medium Access Control in Wireless Local Area Network. In 2010 IEEE Wireless Communication and Networking Conference, pages 1­6, April 2010. [49] Y. J. Zhang. Multi-round contention in wireless LANs with multipacket reception. IEEE Transactions on Wireless Communications, 9(4):1503­1513, April 2010. [50] Ruizhi Lio, Boris Bellalta, Trang Cao Minh, Jaume Barcelo, and Miquel Oliver. UniMUMAC: A Unified Down / Up-link MU-MIMO MAC Protocol for IEEE 802.11ac WLANS. Wireless Network, 21(5):1457­1472, November 2014. [51] J. W. Yang, J. K. Kwon, H. Y. Hwang, and D. K. Sung. Goodput analysis of a WLAN with hidden nodes under a non-saturated condition. IEEE Transactions on Wireless Communications, 8(5):2259­2264, May 2009. [52] Jangkeun Jeong, Hyuntai Kim, Sangtae Lee, and Jitae Shin. An analysis of hidden node problem in IEEE 802.11 multihop networks. In The 6th International Conference on Networked Computing and Advanced Information Management, pages 282­ 285, Aug 2010. [53] J. Mvulla, E. C. Park, M. Adnan, and J. H. Son. Analysis of asymmetric hidden node problem in IEEE 802.11ax heterogeneous WLANs. In 2015 International Conference on Information and Communication Technology Convergence (ICTC), pages 539­ 544, Oct 2015. [54] M. Al-Bado, C. Sengul, C. J. Sreenan, and K. N. Brown. Hidden terminal manage-

243

Bibliography

ment for uplink traffic in rate-controlled WiFi networks. In 2016 IEEE Symposium on Computers and Communication (ISCC), pages 1066­1071, June 2016. [55] O. Raeesi, J. Pirskanen, A. Hazmi, T. Levanen, and M. Valkama. Performance evaluation of IEEE 802.11ah and its restricted access window mechanism. In 2014 IEEE International Conference on Communications Workshops (ICC), pages 460­466, June 2014. [56] L. Tian, J. Famaey, and S. Latr. Evaluation of the IEEE 802.11ah Restricted Access Window mechanism for dense IoT networks. In 2016 IEEE 17th International Symposium on A World of Wireless, Mobile and Multimedia Networks (WoWMoM), pages 1­9, June 2016. [57] Le Tian, S´ ebastien Deronne, Steven Latr´ e, and Jeroen Famaey. Implementation and Validation of an IEEE 802.11Ah Module for Ns-3. In Proceedings of the Workshop on Ns-3, WNS3 '16, pages 49­56, New York, NY, USA, 2016. ACM.  [58] Serena Santi, Amina Sljivo, Le Tian, Eli De Poorter, Jeroen Hoebeke, and Jeroen Famaey. Supporting Heterogeneous IoT Traffic Using the IEEE 802.11Ah Restricted Access Window. In Proceedings of the 15th ACM Conference on Embedded Network Sensor Systems, SenSys '17, pages 32:1­32:2, New York, NY, USA, 2017. ACM. [59] Chunhui Zhu, Chiu Ngo, A. Bhatt, and Youngsoo Kim. Enhancing WLAN backoff procedures for downlink MU-MIMO support. In Wireless Communications and Networking Conference (WCNC), 2013 IEEE, pages 368­373, April 2013. [60] Y. J. Zhang, P. X. Zheng, and S. C. Liew. How Does Multiple-Packet Reception Ca-

244

Bibliography

pability Scale the Performance of Wireless Local Area Networks? IEEE Transactions on Mobile Computing, 8(7):923­935, July 2009. [61] O. Bejarano, S. Quadri, O. Gurewitz, and E. W. Knightly. Scaling multi-user MIMO WLANs: The case for concurrent uplink control messages. In 2015 12th Annual IEEE International Conference on Sensing, Communication, and Networking (SECON), pages 238­246, June 2015. [62] A. Sibille, C. Oestges, and A. Zanella. MIMO: from theory to implementation. Elsevier, 2010. [63] T. Brown, P. Kyritsi, and E. De Carvalho. Practical Guide to MIMO Radio Channel. Wiley, 2012. [64] C. B. Papadias and A. J. Paulraj. A constant modulus algorithm for multiuser signal separation in presence of delay spread using antenna arrays. IEEE Signal Processing Letters, 4(6):178­181, June 1997. [65] S. Talwar, M. Viberg, and A. Paulraj. Blind separation of synchronous co-channel digital signals using an antenna array. I. Algorithms. IEEE Transactions on Signal Processing, 44(5):1184­1197, May 1996. [66] J. Qiu, G. Ding, Q. Wu, Z. Qian, T. A. Tsiftsis, Z. Du, and Y. Sun. Hierarchical Resource Allocation Framework for Hyper-Dense Small Cell Networks. IEEE Access, 4:8657­8669, 2016. [67] Junfei Qiu, Qihui Wu, Yuhua Xu, Sun Youming, and Wu Ducheng. Demand-aware resource allocation for ultra-dense small cell networks: an interference-separation 245

Bibliography

clustering-based solution. Transactions on Emerging Telecommunications Technologies, vol.27, 2016. [68] Hideaki Takagi. Queueing Analysis, volume 3: Discrete-Time Systems. NorthHolland, Amsterdam, The Netherlands, 1993. [69] A. k. Ajami and H. Artail. On The Modeling and Analysis of Uplink and Downlink IEEE 802.11ax Wi-Fi With LTE in Unlicensed Spectrum. IEEE Transactions on Wireless Communications, 16(9):5779­5795, Sept 2017. [70] S. I. Sou and Y. Lee. Trigger-based approach with hidden node problem for uplink multi-user transmission in 802.11ax. In 2017 IEEE 18th International Workshop on Signal Processing Advances in Wireless Communications (SPAWC), pages 1­5, July 2017. [71] Wireless LANs: Proposed TGax draft specification. IEEE standard 802.11ax, The IEEE 802.11 Working Group of the 802 Committee, USA, March 2016. [72] J. Mvulla, E. C. Park, M. Adnan, and J. H. Son. Analysis of asymmetric hidden node problem in IEEE 802.11ax heterogeneous WLANs. In 2015 International Conference on Information and Communication Technology Convergence (ICTC), pages 539­ 544, Oct 2015.

246

