Ryerson University

Digital Commons @ Ryerson
Theses and dissertations

1-1-2003

A low-voltage CMOS current-mode differential front-end for optical communications
Bendong Sun
Ryerson University

Follow this and additional works at: http://digitalcommons.ryerson.ca/dissertations Part of the Electrical and Computer Engineering Commons Recommended Citation
Sun, Bendong, "A low-voltage CMOS current-mode differential front-end for optical communications" (2003). Theses and dissertations. Paper 204.

This Thesis is brought to you for free and open access by Digital Commons @ Ryerson. It has been accepted for inclusion in Theses and dissertations by an authorized administrator of Digital Commons @ Ryerson. For more information, please contact bcameron@ryerson.ca.

A Low-Voltage CMOS CurrentMode Differential Front-End for Optical Communications
by

Bendong Sun (B.Eng, Shanghai Jiaotong University, 1992)

A thesis presented to Ryerson University in partial fulfillment of the requirement for the degree of Master of Applied Science in the Program of Electrical and Computer Engineering.

Toronto, Ontario, Canada, 2003

©

Bendong Sun, 2003

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

UMI Number: EC52900

INFORMATION TO USERS

The quality of this reproduction is dependent upon the quality of the copy submitted. Broken or indistinct print, colored or poor quality illustrations and photographs, print bleed-through, substandard margins, and improper alignment can adversely affect reproduction. In the unlikely event that the author did not send a complete manuscript and there are missing pages, these will be noted. Also, if unauthorized copyright material had to be removed, a note will indicate the deletion.

®

UMI
UMI Microform EC52900 Copyright 2008 by ProQuest LLC. All rights reserved. This microform edition is protected against unauthorized copying under Title 17, United States Code. ProQuest LLC 789 E. Eisenhower Parkway PO Box 1346 Ann Arbor, MI 48106-1346

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Instructions on Borrowers
Ryerson University requires the signatures of all persons using or photocopying this thesis. Please sign below, and give address and date.

III

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

"A Low-Voltage CMOS Current-Mode Differential Front-End for Optical Communications" Master of Applied Science, 2003 Bendong Sun Department of Electrical and Computer Engineering Ryerson University

Abstract
This thesis deals with the design of a low-voltage fully-differential CMOS currentmode preamplifier for optical communications. An in-depth comparative analysis of the building blocks of low-voltage CMOS current-mode circuits is carried out. Two new bandwidth enhancement techniques, namely inductor series-peaking and current feedback, are introduced and implemented in the design. The feedback also reduces the value of the series-peaking inductor. The minimum supply voltage of the amplifier is only one threshold voltage plus one pinch-off voltage. The preamplifier has a balanced differential topology such that the effect of bias-dependent mismatches is minimized and the amplifier is insensitive to the switching noise caused by the digital circuitry. Negative differential current feedbacks are implemented to boost the bandwidth and increase the dynamic range. The design is based on 0.18 pm CMOS technology. It has the bandwidth of 3.5 GHz and provides 66 dB differential transimpedance gain with standard 50

n loads.

IV

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Acknowledgments
I am deeply indebted to Professor Fei Yuan for his enthusiastic support, constant guidance and inspiration throughout the course of this research. His intuition, rigorism and patience have made the journey of my graduate study full of enjoyment. My heartfelt gratitude goes to Professor Khoman Phang from the Department of Electrical and Computer Engineering, University of Toronto, Professor Xavier Fernando and Professor Gul N. Khan from
th~

Department of Electrical and Computer Engineer-

ing, Ryerson University, for their participation in my defense. I am grateful to the School of Graduate Studies and the Department of Electrical and Computer Engineering of Ryerson University for providing me with the graduate scholarships and the research stipends during my study. Finally, my deepest thanks to my wife, Yi, for her love, patience, and understanding. This work could not have been completed without her support and encouragement.

v

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Contents

1 Introduction
1.1 1.2 1.3 Overview. Original Contributions Thesis Organization.

1
1

3
4 7
7 9 12 12

2 Background
2.1 2.2 2.3 Generic Optical Communication Systems Photo detectors ...

Optical Preamplifiers 2.3.1 2.3.2 2.3.3 Preamplifier Performance Parameters Conventional Preamplifier Structures Current-Mode Approach . . . . . . .

14
18

3 Comparative Study of Low-Voltage CMOS Current-Mode Circuits
3.1 3.2 3.3 3.4 3.5 Input Impedance Bandwidth. .. Dynamic Range Noise .. Summary

22
22

28
31 32

33

4

New Bandwidth Enhancement Techniques for CMOS Current-Mode Circuits
34

VI

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.1 4.2

Inductive Shunt-Peaking and Resistive Compensation Inductor Series-Peaking. . . . . .

35 38 38 42 44 47 50
53

4.2.1 4.2.2 4.3 4.4 4.5
5

Current-Mirror Amplifiers Optical Preamplifiers

Negative Current Feedback. Inductor Series-Peaking with Current Feedback Summary . . . . . . . . . . . . . . . . . . . . .

Topologies and Strategies of' Current-Mode Amplifiers

5.1 5.2 5.3 5.4 5.5 5.6

Gain and Bandwidth Noise . . . . Mismatches Power Consumption and Output Impedance Differential Configuration

53 56 57 60 61 63 67 68

..

Differential Current Feedback

5.7 Common-Mode Feedback. 5.8
6 Summary . . . . . . . . .

New Low-Voltage Differential CMOS Current-Mode Optical Preamplifier

69

6.1 6.2

Circuit Schematic and Parameters . Circuit layout

69 75 75 75 77 77 79

6.2.1 6.2.2 6.2.3 6.2.4 6.3

Transistors. Inductors Routings. Pads and Power supply .

Simulation Results

..

vn

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

7 Conclusions
7.1 Summary and Conclusions

82

82
83
85

7.2

Future \Vork . . . . . . . .

A Brief SONET Specifications

Vlll

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

List of Figures
2.1 2.2 2.3 2.4 2.5 2.6 2.7 2.8 3.1 Simple optical communication system Attenuation in optical fibers . . Responsivity of photodetectors . Small signal equivalent circuit of PIN photodiodes . Low impedance and high impedance amplifiers. Transimpedance amplifier and its noise sources. CMOS transimpedance amplifiers . . . . . Current-mode approach of optical fron-end (a) Basic current mirror (BASIC); (b) Low input-impedance current mirror (LI-IMP) 3.2 3.3 ...................... 23 23

8

9
10
11

15
16 18 19

Current mirrors with common-gate feedback (CGFB) (a) Mirror with active feedback (ACTIVE). (b) Bootstrapped current mirror (BSTRP) . . . . . . . . . . . . . . . . . . . . . . . . . . ..

24

3.4

(a) Auxiliary differential-input single-output Opamp. (b) High bandwidth current mirror (HB\V) .. . . . . . . . . . . . . . . . . . . . . . . . . .. 24

3.5

(a) Current mirror with current feedback (CCFB). (b) Current mirror with resistor (RES) 26 27 30 31

3.6 3.7 3.8

Input impedance Output current Dynamic range

IX

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.1 4.2 4.3 4.4

Inductive shunt-peaking technique . Resistive compensation technique . Current-mirror amplifier with series-peaking inductor The effect of the peaking inductor on the bandwidth of current-mirror amplifier . . . . . . . . . . . . . . . . . . . . . . .

36 37 38

41 42 45 46 47

4.5 4.6 4.7 4.8 4.9

Optical preamplifier with series-peaking inductor Current-mirror amplifier with current feedback. Phase respOllse of current-mirror amplifier . . . Current-mirror amplifier with series-peaking and current feedback The effect of peaking inductor on the band"'idth of current-mirror amplifier with current feedback ....................

48 50 51 52 54 55 59 60 62

4.10 Optical preamplifier with series-peaking and current feedback 4.11 Frequency response of current-mirror amplifier . . . . . . . . 4.12 Frequency response of optical preamplifier with CT = 0.5 pF 5.1 5.2 5.3 5.4 5.5 5.6 Current amplifiers (a)Single-stage; (b ) Two-stage . . . . . . . Frequency response of single- and two-stage current amplifiers Fully balanced two-stage current current amplifier . Two-stage current amplifier with current-branching Differential current amplifier . . . . . . . . . . . . . Output current of non-differential and differential amplifiers with a noisy supply voltage. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ., 5.7 5.8 5.9 Current amplifiers with current feedback (a) Single-stage; (b )Two-Stage Differential current amplifier with negative differential current feedback Frequency response of differential current amplifier with and without feedback . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .. 5.10 Dynamic range of differential current amplifier with and without feedback 5.11 Common-mode feedback . . . . . . . . . . . . . . . . . . . . . . . . . ..

62 63 64

65 66 67

x

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

6.1 6.2 6.3 6.4 6.5
6.6

Differential optical front-end with differential transimpedance amplifier Differential current-mode amplifier ......

70 71 73 74 76 77 78 79 79 80 81

Simulation with L at the 1st-stage input node Simulation with L at the 2nd-stage input node. Lumped model of on-chip inductors Layout of on-chip planar inductor . Layout of the differential current-mode preamplifier Layout of the core cirtuits . . . . . . . . . . . . . Frequency response of the differential preamplifier

6.7 6.8 6.9

6.10 Output noise voltage power . . . . . . . . . . . . 6.11 Transient response of the differential preamplifier

Xl

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

List of Tables
2.1 2.2 Commonly used SONET and SDH transmission rates . . . . . . . . . .. Minimum and maximum input power and their respective photocurrent of OC-48 receivers 2.3 3.1 3.2 3.3 4.1 4.2 5.1 5.2 5.3 6.1 6.2 ............ 12 14 25 27 32 40 50 55 64 65 71 81 85 85 8

The relationship between BER and SNR Input and output impedances at low frequencies Channel width (jJm) of devices Input-referred noise generators. Damping characteristics . . . . Circuit parameters and bandwidth Circuit parameters of single- and two-stage amplifiers Circuit parameters of differential amplifier . . . . . . Key performance parameters of differential amplifier. Transistor sizes of the optical preamplifier . . Comparative performance of the preamplifiers

A.1 Three broad application categories in SONET physical layers A.2 Maximum and minimum power requirement at different speeds.

xu

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Chapter 1 Introduction
1.1
Overview

Optical fiber communication systems have been greatly developed with the blossom of Internet and Intranet networks. Optical communication systems are to carry a large vol ume of data across the networks. The primary application of such systems is in long distance telecommunication networks. For example, the telephone systems in Europe are connected to those in the North America through a fiber system installed across the Atlantic Ocean. Multimedia applications such as advanced graphics, audio, video conferences are driving the adoption of optical data links for short haul optical communications as well. The exchange of data using optical fiber communications gives a number of advantages over metal-wired cable systems. These are higher bandwidth, lower attenuation, smaller bit error rates (BERs), and less electromagnetic signal interface [1]. The cost of manufacturing and installing optical fiber cables is now less than that of metal cables for applications over 100 Mbps. A transmitter and a receiver, connected by the fiber cable, constitute a generic optical communication system. The transmitter consists of a current drive circuit and an optical emitter, while the receiver consists of an optical detector and an amplifier circuit. The fiber cable is the transmission medium. The light experiences attenuation

1

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

as it travels through long distance or low cost fibers. Thus, the receiver must exhibit wide bandwidth, high sensitivity and low noise. Our research is focused on the design of the front-end preamplifier which is the most challenging part in optical communication systems. Currently, most high-speed optical receiver designs are using bipolar or GaAs 1fESFET transistors [2], which give wider bandwidth. However, standard ClvfOS technology provides advantages such as low power and low cost. It also gives high degree of integration, which makes it possible to integrate the front-end preaniplifier and the clock and data recovery circuits into a single chip. The

iT

of 1\fOS devices has also been

improved significantly such that it is feasible to use CMOS for the optical front-end. The cost of an optical receiver built by GaAs is about 10 times that of a CMOS receiver. The rapid expansion of optical communication networks, especially the trend of "fiber-to-user" and "fiber-to-home", has brought more research interests on the design of low-cost, high-speed and 100'\'-noise optical receivers using standard CMOS technologies. In this thesis, a low-voltage current-mode CMOS preamplifier is designed using TSMC (Taiwan Semiconductor Manufacture Company) 0.18 /lm mixed-signal CMOS technology. Transimpedance, high-impedance and 100v-impedance are three conventional configurations of preamplifiers of optical receivers. They convert the current from the photo detectors to a voltage signal. Intrinsically, all of the above configurations are based on voltage-mode operation. Recent advance in CMOS technology, mainly driven by low-power applications, has significantly lowered the supply voltage. The reduction in threshold voltages, however, is rather moderate in order to sustain needed noise margins. As a result, the performance of voltage-mode circuits is affected greatly. CMOS currentmode circuits offer many attractive advantages over their voltage-mode counterparts.

f

I
(

I l

~

2

---

- -----

---

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

The key performance feature of current-mode circuits is their inherent wide bandwidth. Transistor are used almost up to

iT in a current amplifier [3].

Other advantages include

low supply voltage requirement, large dynamic range, and tunable input impedance [4]. These characteristics make the current-mode circuits particularly attractive for highspeed computer l/Os [5], and low-cost fiber communications [6]. The objective of this research is to design and build a current-mode front-end amplifier for optical receivers using standard CMOS technology. The aimed data rate is 5Gbps, which matches the rate of OC-96. The transimpednace gain is expected to reach 66dBD (2KD) to sustain a large noise margin. The amplifier is intended to work with the minimum supply voltage requirement, and a differential configuration is adopted to minimize the switching noise caused by the clock and data recovery circuitry. The dynamic range of the amplifier must be large enough to accomodate different link distances. Other design objectives include minimum mismatch effects, and low power consumption. TSMC 6-metal, 0.18 j1m, 1.8 V mixed-signal CMOS technology is used for the design. Spectre from Cadence Design Systems with BSIM3V3 device models [7] is the CAD tool used for analysis. The designed chip is currently being fabricated by TSMC via CMC (Canadian Microelectronics Corporation).

1.2

Original Contributions

This thesis designs a- new low-voltage, wide-band, high gain, large dynamic range, and fully differential CMOS current-mode preamplifier for optical communications. Leading by a comprehensive analysis of the characteristics of current-mode circuits, several new topologies and design strategies are introduced to support the final circuit design.

The major contributions of the thesis are summarized as follows:

3

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

· An in-depth comparative analysis of the characteristics of various low-voltage CMOS current-mode configurations is conducted, and many useful insights are obtained. · A new inductor series-peaking technique to boost the bandwidth of current amplifiers is developed and implemented in the design of the preamplifier. · A new c:urrent feedback technique to lower the input impedance, boost the bandwidth, and reduc:e the value· of the series-peaking inductanc:e is dewloped and implemented in the design of the preamplifier. · A two-stage fully balanced current amplifier to achieve a larger bandwidth with the same gain, and to minimize the mismatch effec:ts of c:urrent mirrors is proposed. A current-branching mec:hanism to reduce the power dissipation and increase the output impedance of current amplifiers is introduced. · A differential current-mode configuration to minimize the effect of switching noise caused by the digital circuitry is proposed. A new negative differential current feedback to boost the bandwidth, and increase the dynamic range of the differential amplifier is implemented. These original c:ontributions have been published in one journal paper [8] and several conference proceedings [9] [10] [11] [12] [13].

1.3

Thesis Organization

The thesis consists of 7 chapters and is organized as follows: In chapter 2, we give a brief review of optical communication systems. The characteristic:s of photodetec:tors are depicted. The performance requirements and design
4

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

challenges of optical receivers are described. Conventional structures of optical receivers are reviewed and analyzed. A primitive current-mode approach for optical front-end preamplifiers is proposed. In chapter 3, we give a in-depth comparative study of the characteristics of various low-voltage current-mode circuits. Design issues, such as input impedance, bandwidth, dynamic range, and noise performance are examined both analytically and quantitatively. It reveals that most configurations fail to function properly at high frequencies. The current-mirror amplifier with current feedback offers the best performance. Chapter 4 introduces two new bandwidth enhancement techniques for current-mode circuits. The inductor series-peaking technique boosts the bandwidth by utilizing the resonance characteristics of LC network formed by placing an inductor in series with the capacitor constituting the dominant pole. The technique is demonstrated in both of the current-mirror amplifier configuration and the optical preamplifier configuration. The current feedback increases the bandwidth by taking the advantage of negative feedback theory. A new sampling mechanism is introduced to acquire the feedback current. It shows that the employment of both the inductive peaking and current feedback further increases the bandwidth, and the current feedback can significantly reduces the value of the peaking inductor. Both the inductor series-peaking and the current feedback techniques do not affect the supply voltage and the DC biasing conditions. Chapter 5 introduces several topologies and design strategies to improve the performance of current-mode circuits. It shows that a two-stage amplifier configuration has a higher bandwidth than that of a single-stage one. The accuracy of current-mode circuits is severely affected by the errors caused by the mismatches of current mirrors. Analysis shows that a fully balanced configuration can minimize the DC bias-induced mismatch error, which is the dominant portion of the output offset current. A current-branching

5

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

configuration is introduced to reduce the power consumption of the circuit, and to increase the output impedance. To minimize the effect of power and ground fluctuations caused by the switching of the digital portion of the receivers, we propose a fully dif· ferential current-mode configuration. Negative differential current feedback is employed to boost the bandwidth and improve the dynamic range of the differential amplifiers. A common-mode feedback configuration is proposed to increase C11RR and to stabilize the DC biasing condition. Chapter 6 presents a new low-voftage fully differential Cl\10S current-mode preamplifier with the preceding circuit techniques implemented. It examines the design techniques, selection of circuit parameters, and the layout strategies. Simulation results are shown to demonstrate the performance of the preamplifier. In chapter 7, the thesis is summarized and the directions of future research are discussed.

\

i

6

l ( ( ,

i

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Chapter 2 Background
This chapter gives an overview of the structure of optical communication systems, the characteristics of photodetectors, and the configuration of front-end amplifiers. It discusses the receiver design requirements, and reviews the principal structures of the preamplifiers. Followed by discussion on the challenges of the front-end design, we

propose a current-mode approach.

2.1

Generic Optical Communication Systems
On the

Fig. 2.1 shows the basic elements of optical fiber communication systems.

transmitter side, a drive circuitry accepts the modulated data and delivers large electrical current to the laser diode or light emitting diode (LED). Laser diodes or LEDs then convert the electrical signals into optical signals, and launch them into an optical fiber. The fiber, made from pure glass, is the high-speed propagating medium for optical signals. The device responsible for converting the optical signal back to an electrical signal is an optical receiver. A typical fiber optical receiver consists of an optical detector, a low-noise amplifier, and other circuitry used to recover the clock and data. There are two widely adopted standards for synchronous fiber-optic transport systems. SONET (Synchronous Optical NETwork) is the North America standard, and

7

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

LED or Laser Diode

Fiber
~ (~)----------~)

Photodiode

1D
Transmitter

l!:
Receiver

Figure 2.1: Simple optieal eOllul1unieatioll system

SDH (Synchronous Digital Hierarchy) is a similar standard used by the rest of the world [1]. Table 2.1 shows the data rates of SONET and SDH. Although the bandwidth of the fiber is capable of 10 6 Gbps with 1 Km communication distance, due to the speed limitation of the electrical devices, 2.5Gbps (OC-48) optical system was the state of the art design in the past few years and 10Gbps (OC-192) is emerging.

Table 2.1: Commonly used SONET and SDH transmission rates

I SONET Level I SDH equivalent I Line rate (Mb/s) I
OC-1 OC-3 OC-12 OC-24 OC-48 OC-96 OC-192
-

STM-1 STM-4 STM-8 STM-16
ST~1-32

51.84 155.52 622.08 1244.16 2488.32 4976.64
9953.28

STM-64

There are three popular wavelengthes used in fiber communications. generation links operated at around 850 nm.
8

The first-

1310 nm and 1550 nm wavelengthes

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

were adopted with the development of optical sources and photo detectors because of their low attenuation in optical fibers as shown in Fig. 2.2 [2]. The launched optical signals will be progressively attenuated and distorted with increasing distance because of scattering, absorption, and dispersion in the glass material [2]. The attenuated and distorted signals have made the design of the front-end optical receivers to be the most challenging part of an optical communication system.
Optical fibers

]0

850nm

13JOnl11

J550nm

700

900

1100

1300

1500

1700

Figure 2.2: Attenuation in optical fibers

2.2

Photodetectors

A photodetector is a transducer that converts the incident optical power into an electrical current. Semiconductor photodiodes are ideal for high-speed optical communications because of their superior frequency response, low dark currents and high quantum efficiency [14]. The principal photodiodes used in fiber optical systems include semiconductor p~sitive-intrinsic-negative (PIN) photodiodes and avalanche photodiodes (APDs). A PIN photodiode is a semiconductor positive-negative (p-n) structure with an intrinsic region sandwiched between the other two regions. It is normally operated by applying a reverse-bias voltage. The magnitude of the reverse-bias voltage depends on the photodi-

9

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

ode application, but typically is less than a few volts. An avalanche photo diode (APD) is a photodiode that internally amplifies the photo current by an avalanche process. The sensitivity of APD detectors is usually higher than that of PIN detectors. However, a large reverse-bias voltage is needed to apply across the APD's active region.

1.0

Photo detectors

700

900

1100

1300

1500

1700

Figure 2.3: Responsivity of photodetectors

The small-signal equivalent circuit of an PIN photodiode is shown in Fig. 2.4. The photodiode capacitance Cd consists mainly of the junction capacitance and parasitic capacitance of packaging. The series resistance Rs is very small comparing with the load resistance. Small Cd is needed to achieve high-speed response. A thick active area can lower the photo diode capacitance. However, a thick active region increases the transit time and decreases the responsivity of the photodiode. Practically, the photodiode

capacitance is quite large (in the range of 100 to 500 fF) [15]. In general, the photodiode capacitance is the dominant factor of the frequency response of an optical receiver. The photocurrent is, is generated through the creation of electron-hole pairs when
photons from the incident light penetrate the diode. The relationship of the photocurrent

and the incident optical power is given by

[A]
10

(2.1)

I

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Rs

Figure 2.4: Small signal equivalent circuit of PIN photodiodes

where P is the average optical power incident on the photodiode and Rr is the responsivity of the photodiode and is given by

R - ryq
r -

lw

[Aj\\']

(2.2)

where ry is the quantum efficiency (usually in the range of 0.6 to 0.9), q is the electron charge (1.69x10- 19 C), and hv is the photon energy. The responsivity is a function of wavelength. As shovm in Fig. 2.3 [2], the material of the photodiode must match the light wavelength to maximize the power efficiency. At a given wavelength (a given value of hv), the responsivity is constant, so the photocurrent is is proportional to the optical power P. The typical value of Rr is around 0.85 A/\\' for InGaAs detectors at 1310 nm .. Table 2.2 shows the maximum and minimum input optical power and their respective photocurrent for SONET OC-48 receivers. The definition oflong-distance (LR), intermediate-distance (IR) and short-distance (SR) optical links is given in Appendix A. It is seen that, in all the three type links, the photocurrent generated by the minimum input power is quite weak. The photo diode also generates un-negligible noise pmver I~ into the downstream preamplifier. This noise consists of thermal noise, dark current noise, and quantum
11

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 2.2: Minimum and maximum input power and their respective photo current of OC-48

receivers

I
Pmax (dBm) Current (/-LA) ~nin (dBm) Current (/-LA)

(with Rr=0.85 A/VI!) Long Distance Intermediate Distance -10 0 850 85 -26 -18 13.47 2.14

I

I Short Distance I
-3 426 -18 13.47 (

noise [14]. Although low-noise photo diodes are essential for high-performance optical receivers, the noise of the preamplifier is usually the dominant contributor to the noise of the receiver.

I

(
(
r
\

I l

2.3
2.3.1

Optical Preamplifiers
Preamplifier Performance Parameters

The front-end amplifies the photo current so that it can be used by following clock and data recovery circuits. It plays a crucial role in determining the overall performance of the receiver such as gain, bandwidth, noise, and dynamic range.

I

I l
(

(i) Gain -

Since the photocurrent generated by the photodiode is small, the gain of

( (
(

the preamplifier must be large enough. Large preamplifier gain helps to overcome the noise of the subsequent stage. Therefore, the design of the subsequent stage, typically a 50-Q driver or a limiting post-amplifier, can be simplified [15]. The gain trades with bandwidth and dynamic range. The tendency of increasing data rate and decreasing power supply voltage have limited the transimpedance gain from several kilo-Ohms to a few hundred Ohms.

l

l
(
(

(
r

(

(
12

I

(
(
I

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

(ii) Bandwidth - Due to the inevitable large photodiode capacitance, the total input
capacitance of the preamplifier, Gin, consisting of the photo diode capacitance, pad capacitance, and input transistor parasitic capacitances, usually dominates the frequency response of the receiver. The bandwidth is determined by the time constant
T

= RinGin

at the input. The rising time of the step response is given by tr = 2.2Rin Gin [16]. SONET employs Non-Return-to-Zero (NRZ) as its data format. \Vith tr =
I

~Bit-Time, 2

it is given that

I
I

l I

2.2 2.2 1 = x Bit-Rate 27r x 2" Bit-Time 7r

(2.3)

!

For example, the data rate of SONET OC-96 is about 5 Gbps, the minimum bandwidth requirement of the optical receiver is 3.5 GHz.

(iii) Noise - The receiver sensitivity is the minimum amount of optical power required to achieve a specific receiver performance. For digital transmission at a given data rate, this performance is characterized by the maximum bit-error rate (BER) [2]. In analog systems, for a given modulation and bandwidth, it is described by the minimum signalto-noise ratio (SNR). The relationship between BER and SNR [15] [17] [18] is given by
1

BER= where

V2ir exp(--) 27rQ 2

Q2

(2.4)

1 Q = - x SNR 2

=- x
2

1

Signalpp Noise rms

(2.5)

SONET standard requires the BER not less than 1 x lO- lO . From Table 2.2, -18dBm incident optical power generates a 13.47 JjApp photo current (with Rr=O.85 Aj\V). Thus 13

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

to achieve a BER less than 1 x 10- 10 , the input current noise, including the input referred current noise of the preamplifier and the noise of the photodiode, must be lower than

Table 2.3: The relationship between BER and SNR 10- 7 10- 8 10- 9 10- 10 1O- 11 10- 12 10- 13 BER 14.7 13.4 14.1 8NR (A/A) 10.4 11.2 12.0 12.7

10

14

15.3

(iv) Dynamic Range -

Dynamic range of the receiver refers to the range of opti-

cal power levels over which the receiver operates within the specification. Table 2.2 shows that the power specifications vary dramatically according to the transmission distance. Receivers that have large dynamic range are essential to the flexibility of variable-distance links. Hm",,rever, Recent advance in Crv108 technology has significantly lowered the supply voltage, while the threshold voltages of 1108 devices have only been reduced moderately. As a result, the input and output signal swings are strictly limited. Low-voltage amplifiers tolerating high signal swing are crucial in up-to-date optical receiver design.

I I
l
f

I
(

2.3.2

Conventional Preamplifier Structures

Optical preamplifiers convert the current from photodiodes into a voltage signal. As depicted in Fig. 2.5 and 2.6, there are three typical preamplifier configurations, namely low-impedance, high-impedance, and transimpedance amplifiers. Low/high impedance preamplifiers have the same topology. Their transfer function is given by
AR 1 + sRGin

I
,

l
(
I,

I'

[
(2.6)

( (

where R is the termination resistance,

Gin

is the total input capacitance consisting of

(

(
14

(

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

LowR

Equalizer High R

J

I
I t (

Low-Impedance

High-Impedance

Figure 2.5: Low impedance and high impedance amplifiers

I
J

photo diode capacitance Cd and preamplifier parasitic input capacitance. The bandwidth is given by
1
= 27r RC
in

I
i

I

f -3dB

(2.7)

As depicted in Section 2.2, the photodiode capacitance Cd is usually large. As a result, the total input capacitance usually dominates the frequency response of the preamplifier. Thus, low-impedance configuration exhibits a better high-speed performance. This configuration also has a good dynamic range. The noise performance of this configuration is poor. This is because the thermal noise of the termination resistor R is directly referred to the input, and its noise current power density is given by

r

_4kT

n,R -

R

[A2jHz]

(2.8)

where k is the Boltzmann's constant (l.38 x 10- 23 J j 1<) and T is the absolute temperature degree in Kelvin. The smaller the value of R, the higher the noise current. High-

15

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

impedance amplifiers improve the noise performance at the expense of both the dynamic range and bandwidth. Usually, this configuration needs an equalizer to enlarge the bandwidth.

V n,Rf

2

Rf

Rf

-A -A
+

2 V n,out

Transimpedance

Noise sources in TIA

Figure 2.6: Transimpedance amplifier and its noise sources

Transimpedance amplifiers (TIAs) shown in Fig. 2.6 is a compromise oflow-impedance and high-impedance approaches. Rf is a shunt-shunt feedback resistor [19]' and the transfer function is given by

(2.9)
The bandwidth is given by
A ~ 2 R C.
7r

f-3dH

(2.10)

f

m

It is seen that the transimpedance gain is approximately equal to the resistance of R f , and the bandwidth is boosted by the voltage gain. From Fig. 2.6, the output noise voltage is given by

16

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

lln,out(s) =

lln,Rf

+ (sRfCd + l)l/~,A
1+

sR C
f

(2.11)

d

A

where l~L,A is the input referred noise voltage of the voltage amplifier, lln,Rf is the noise voltage of the feedback resistor. It can be shown that if Cd

= 0, then l/~,out = lln,Rf + l/~,A'

yielding the input referred noise current of the transimpedance amplifier

=R+ f
of R f is directly referred to the input.

4kT

f2 In A
R~
f

(2.12)

The input referred noise voltage of the voltage amplifier is divided by R f , but the noise

Much research has been done on Cl\10S transimpedance amplifiers. The commongate transimpedance amplifier [20J features large bandwidth, but its dynamic range is small and the input referred noise is high. Regulated cascode configuration [21] was introduced to increase the bandwidth and reduce the noise of the common-gate amplifiers, but this configuration has small gain and high power consumption. Most CMOS transimpedance amplifiers use the common-source configuration [22] as shown in Fig. 2.7(a). As depicted in Section 2.3.1, the transimpedance gain
(~Rf)

is about a few hundred

Ohms to a few kilo-Ohms. Only poly resistors and diffusion n+ /p+ resistors, whose sheet resistance is small, are suitable to be used to build such a relatively small feedback resistor. Unfortunately, CMOS passive resistors have very poor accuracy. For example, the error of the poly resistors is about ±20%, and that of the diffusion n+ /p+ resistors is about ±30% [23]. Thus, the transimpedance gain is very difficult to be accurately

I
~

specified, resulting in uncontrolled amplifying performance. It is even more challenging

17

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

RD
Vout Vout

(a)
Figure 2.7: CMOS transimpedance amplifiers

(b)

(a) Common-source amplifier, (b) Invertor amplifier in desig~ling an analog signal processing system where accuracy is strictly required. Another disadvantage of the common-source transimpedance amplifier is that the output voltage has to be restrained to ensure that the transistor is working in the saturation region. Thus, the dynamic range of this configuration is small [24]. An invertor trans impedance amplifier as shown in Fig. 2. 7(b) [25] was introduced recently. Active feedback is employed in this configuration. The feedback PMOS transistor !llf works in the linear region. The major disadvantage of this circuit is that the transistor illf working in the linear region has a large drain-to-substrate parasitic capacitance [25]. It introduces a large loading capacitance at the output node.

2.3.3

Current-Mode Approach

Voltage amplifiers are employed in the conventional preamplifiers. The gain-bandwidth product of the amplifiers limits the bandwidth of the voltage amplifiers as well as the

18

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

bandwidth of the whole preamplifier. The optimal voltage gain in the invertor transimpedance amplifier is only about 3 [25]. Thus, a small and accurate feedback resistor is critical for the high performance wide-band preamplifiers.

J

kJ

~

MI
1:k

M2

Figure 2.8: Current-mode approach of optical fron-end

The intrinsic advantages of current-mode circuits including large bandwidth, low supply voltage requirement, tunable input impedance, and large dynamic range [3] [4], make them particularly attractive for low-cost optical communications. Current-mirrors are the building blocks of current-mode circuits. Fig. 2.8 shows a primitive current-mode approach for an optical front-end. No necessary passive components are adopted. The current source may be implemented by PMOSs with a DC gate voltage. The minimum requirement of the supply voltage is about VT,n + Vmt,p, where VT is the threshold voltage and
l~at

is the pinch-off voltage. The input impedance is given by
1 1
J2J1nC~x(T1V/LhJ

~n~-=
gml

,

(2.13)

where J1n is the surface mobility of the channel of NMOS,

C~x

is the gate oxide capaci-

19

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

tance density. A desired low impedance is achievable by increasing the biasing current

J or by increasing the channel width of AIl'
The current gain at low frequencies is given by
k = (11) Lh (VGS2 - FT2) 1 + AVDS2 (lVjLh vGsl-l'Tl 1+AvDs2'
· 2

(2.14)

where A is the channel length modulation parameter, VGS and VDS are the gate-source and
NT eg1 . t1 . 1 ' k. = (lFj Lh . . 1y. : d ram-sourcc vo 1 tages, rcspectlYC ectmg le mlsmatc les, we 0 l )tam (IF/ L h.

The current gain simply equals to the size ratio between the output and input transistors. The higher the current, the larger the size of output transistors, resulting in larger parasitic capacitances. As long as the parasitic capacitances of the transistors are much smaller than that of the photo diode, the increase in the current gain has a little effect on the bandwidth. The input referred noise current power density of the current mirror amplifier is given by

-[2 _
n,in -

4kT

19m1

+

4kTI9m2

k2

= 4kT 1 9ml(1

+"k)

1

(2.15)

where I equals 2/3 for long-channel transistors and may be larger for submicron fvlOSFET [26]. If k

»

1, the noise from 1112 can be neglected.

It is seen that a low input impedance requires both a large biasing current and a

large input transistor. To achieve a high current gain, both the biasing current and the transistor size at the output branch becomes extremely large, resulting in high power dissipation and large parasitic capacitances (maybe comparable to the photo diode capacitance). The performance of current-mode circuits deteriorates due to mismatches, and their dynamic range is limited by the biasing current. In the following chapters,

20

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

we will give an in-depth analysis on CMOS current-mode circuits, and introduce several new topologies and design strategies to improve the performance of those circuits.

I
I I
'/

I
21

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

,

I
Chapter 3 Comparative Study of Low-Voltage CMOS Current-Mode Circuits
Current mirrors are the building blocks of Cl\10S current-mode circuits [4]. Due to the significantly lowered supply voltage by advance technology, the performance of many effective current-mode circuits, such as cascode [27] and class-AB current mirrors [28]: is affected severely. This chapter presents a comparative study of the characteristics oflow-voltage C110S current-mode circuits for optical communications both analytically and quantitatively. It examines design issues including input impedance, bandwidth, dynamic range, and noise performance for low-voltage CMOS current-mode circuits. A new current mirror with current feedback to lower the input impedance and increase the bandwidth is proposed (more discussions on this configuration are given in Section 4.3). The performance of these current mirrors is assessed using Cadence Spectre and the results are presented.

I

I

l

I
~
(

[

3.1

Input Impedance

Low input impedance is essential for optical preamplifiers because the parasitic capacitance of photo diodes is usually much larger than the input capacitance of preamplifiers. As a result, the dominant pole of optical preamplifiers is usually determined by the par-

22

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

(a)

(b)

Figure 3.1: (a) Basic current mirror (BASIC); (b) Low input-impedance current mirror (11IMP)
---------I

Vb

Vb

M3

1____________ 1....-------. ' _____ r
I

M4

~

I

1.

1

m

Ml

M2

Ml

M2

(a)

(b)

Figure 3.2: Current mirrors with common-gate feedback (CGFB)

asitic capacitance of photodiodes and the input resistance of preamplifiers. The basic

current mirror shown in Fig. 3.1(a) has the input impedance of
1 1

R in ==

gml

+ (l/rod

~-,

gml

(3.1)

where gm is the transconductance and r 0 is the output resistance of the MOS transistors.

23

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Vb

---i+------;

M3

M4 kJ

Vb - - + + - - - - - - - - - 1

J

M3

J

M4

kJ

1 ___ _

lin

I

M2

Ml

M2

(a)

(b)

Figure 3.3: (a) Mirror with active feedback (ACTIVE). (b) Bootstrapped current mirror (BSTRP)

Vb

M3
R

Vb

M3

J

M4 M5

kJ

V m+

i.m

i0

Ml

M2

(a)

(b)

Figure 3.4: (a) Auxiliary differential-input single-output Opamp. (b) High bandwidth current mirror (HBW)

The input impedance can be reduced by inserting a voltage amplifier between the drain and gate of Ml, as shown in Fig. 3.1(b), leading to the low input-impedance current

mirror. The input impedance of the LI-IMP mirror at low frequencies is given by

24

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

R in

= Agml + (l/ r ol) ~

1

1

Agml '

(3.2)

The voltage amplifier can be implemented using common-gate configuration to take the advantage of its immunity from Miller effect, as shown in Fig. 3.2. It can be shown that the input impedance of the CGFB mirrors at low frequencies is approximately given by

(3.3) much smaller as compared with that of the basic mirror. The amplifier can also be differentially configured as shown in Fig. 3.3(a) [29]. To achieve both a low input impedance and a high output impedance, the bootstrapped CMOS current mirror proposed in [30] and shown in Fig. 3.3(b) can be used. This configuration, however, suffers from poor stability at high frequencies. A compensation capacitor is needed as shown and the mirror becomes the basic mirror at high frequencies. The implementation of the auxiliary differential amplifier is shown in Fig. 3.4(a) with bandwidth approximately 692MHz. A drawback of the differential amplifier approach is that it requires a higher supply voltage.

Table 3.1: Input and output impedances at low frequencies (the output impedance of biasing current source is assumed to be infinite) Mirror Input Impedance Output Impedance BASIC 11gml r 02 IIr 04 CGFB 1/(r06gm5gml) r 02i1r04 HBW l/gml r 02 IIr 04 RES 11gml r02// r 04 ACTIVE 1/(Agm1 ) r 021/r04 BSTRP l/(Agmd (Agmlrod r 02 CFB 1/[gml (1 + k!3)] r0211 r 04

I

I

I

I

25

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

(a)

(b)

Figure 3.5: (a) Current mirror with current feedback (CCFB). (b) Current mirror with resistor (RES)

It is well known that current-current feedback is capable of reducing input impedance

and increasing bandwidth. To sample the output current without adding more elements between ViJD and ground, an additional branch is added in parallel with the output transistor to sample the output current. The sampled output current is then fed back to the input, as shown in Fig. 3.5(a). It can be shown that the input impedance of the CCFB mirror is given by
1

R

in

= gml(l

+ kf3)'

(3.4)

where k and f3 are the gain of the forward and feedback paths respectively. The input and output impedance of the mirrors are tabulated in Table 3.1. To quan·tify the input characteristics, these mirrors were implemented using TSMC O.18f.L CMOS technology with circuit parameters given in Table 3.2, and simulated using Spectre with BSIM3v3 device models. The amplifier in LI-IMP current mirror is implemented using an ideal VCVS with gain of 5. The results are plotted in Fig. 3.6. The impedance of the

26

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1000 900 800
BASIC LHMP I> CGFB <J HBW ~ RES \l ACTIVE 0 BSTRP CCFB
0

0

g
c
~
ell

700 600

"*

~ 500 Q.
E :J 400
Q.

C

300

Frequency [MHz]

Figure 3.6: Input impedance

Table 3.2: Channel width (11m) of devices (Lmin 0.18jLm is used for all de\"ices)

=

Mirror BASIC CGFB HB\V RES ACTIVE BSTRP CFB Opamp

I M1 I M2 I M3 I M4 I M5 I M6 I
25 25 25 25 25 25 25 2 100 100 100 100 100 100 100 2 25 25 25 25 25 25 25 2 100 100 100 100 100 100 100 2 40 20

50

50

basic mirror at low frequencies is 137ft LI-IMP mirror gives a lower and constant input impedance of 350. The input impedance of CCFB mirror is 460 and decreases with frequency. CGFB mirror provides the lowest input impedance at low frequencies only.

27

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

At high frequencies the input impedance of CGFB, HBW, active and bootstrapped mirrors is significantly high, revealing that they are not suitable for optical communications where signal frequency is in the range of GHz.

3.2

Bandwidth

The bandwidth of the basic mirror is given by

W-3dB

=

9ml

C g81

+ Cg82

.

(3.5)

It can be adjusted by changing the bias current. The bandwidth of CGFB mirror can

be obtained from its transfer function
9m29m5

(3.6)

with the poles located at

I I ,
2Cg85

r

P1,2

9m5 [ = - -1±

1- 4( C

9m1 ) Cgs2 981

+

(C

9S5

)] .

(3.7)

l

9m5

i
I

9m1C 1 ( -C 9m5) ,t h e circUlt . . 1 'd ' 1 =las two 1 entica Cgs1 + 9s2 4 985 real poles. The bandwidth is given by W-3dB = 9m5, approximately 2 times that of 2C9 85 the basic current mirror.

. seen tl lat un d er t 1 . It IS Ie con d'1tlOn

The mirror shown in Fig. 3.4(b) is derived from [31 J and is called the hi9h-bandwidth
current mirror. The source follower is employed to suppress the capacitance at the input

node. From the transfer function

28

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

(3.8)
we obtain the two poles
P12 [ = 2(C gm1 -1± ) + C gs1 gs2

,

1_4(

gm5)

Cgs5

(C

9 S1

9 S2)]. +C

(3.9)

gm1

gm5 ), two identical real poles are obtained. It is 4 Cgs5 seen that the added transistor M5 introduces a zero and does not affect the real part of

Under t.he condition C

gm1

gsl

+c /gs2

=

~(

the poles. The bandwidth is given by of the bandwidth of the basic mirror.

W-3dB

=

2

(C

gm1 gsl

+

C
gs2

) approximately, only half

To avoid using active devices at the input, which may cause ull\yanted oscillation, a resistor can be inserted between the gates of the input and output transistors, as shown in Fig. 3.5(b) [32]. \Vith the transfer function given by

R Cgs 1C gs2 ( S

2

C gs1 + C gs2 + s RC C
gs1 gs2

(3.10)

+ RCgsl Cgs2

gm1) ,

it can be shmyn that when R = _1_, the zero and one of the poles cancel out, resulting
gm1

in a first-order svstem with the pole at s = _ _1_. The bandvi'idth of the circuit

-

RCgs2

is much larger in this ease. Further analysis in Section 3.4, however, reveals that the resistor increases the output noise of the circuit significantly. To increase the bandwidth without employing noisy resistors, CCFB mirror can be used. The current gain of the CCFB mirror is given by

+ k(3) S [C9S1 + C gs2 + C 9S5 ] + l' gm1 (1 + k(3)
gm1 (1

(3.11) .

29

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

from which we obtain the bandwidth

W-3dB

=(

Cgs1

+ Cgs2 + C gs5

gml

)

(1

+ kf3).

(3.12)

70~--~~~~~r---~~~~~r---r=~~~~

60
50

BASIC LI-IMP [> CGFB <l HBW D.. RES V ACTIVE BSTRP CCFB

o

o

* "*

r
I,

I .
Frequency [MHz]

Figure 3.7: Output current

(with

lin

= lO{lA)

It is seen that the bandwidth is increased by a factor of (1

+ kf3)

approximately. The

bandwidth of the active and bootstrapped current mirrors is the same as that of the basic mirror because the bandwidth of the differential amplifier is smaller. Fig. 3.7 shows the output current of these mirrors. The basic mirror has bandwidth of 2.7 GHz. The bandwidth of the mirror with common-gate feedback provides bandwidth of 2.65 GHz. The bandwidth of HB\V-mirror is approximately 2.3 GHz. The bandwidth of the mirror with a 1kO resistor is approximately 5.43 GHz. The values of k and f3 of the

30

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

mirror with CCFB are 4 and 0.5, respectively. Simulation results show that the CCFB mirror has the bandwidth of 4.3 GHz.

3.3

Dynamic Range

_0.2'----~---'~---'------l------L------L----'-----'

o

0.05

0.1

0.15 0.2 0.25 Input current [rnA]

0.3

0.35

0.4

Figure 3.8: Dynamic range (J = 0.73 rnA, kJ = 2.9 rnA),

(the plots of CGFB and HB'V are shifted down by O.GmA for comparison) The dynamic range of the current mirrors are examined by varying the input current from 0 to 0.4 rnA (55% of J) and measuring the corresponding output current. Active current mirrors are used as the output loads. The results are plotted in Fig. 3.8. It is seen that the dynamic range of BASIC current mirror is about 27%J. CCFB current mirror provides the largest dynamic range while bootstrapped current mirror has the smallest dynamic range.

31

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3.4

Noise

Using small-signal analysis, the power of the input-referred noise voltage generator

v;

and that of the input-referred noise current generator i~ of the current mirrors are derived and tabulated in Table 3.3. It is seen that (i) if the current gain of the mirror is large, both the contribution of the noise of 1\12 and the input-referred voltage noise generator are negligible. (ii) The effect of the noise of the feedback transistor M5 in both HB\\! and CGFB mirrors is marginal. (iii)
~he

noise of the mirror with a compensation resistor is

significantly larger as compared with that of other mirrors. (iv) The input-referred noise of CCFB mirror is higher than that of the basic current mirror due to the reduction of the current gain and the noise of the feedback device.

Table 3.3: Input-referred noise generators
·2 zn2 2

BASIC CGFB HB\\! RES ACTIVE BSTRP CCFB
'in1

Y znl Y Znl Y Znl
·2 Znl

y + (9ml - )2 Zn2 9m2

9'171')
~O

+ (9mlfY Zn2
9m2
-2-

+ (9ml ) 2 y + (9ml ) 2 y Zn2 Zn5
9m2
2·2 + (9 -m·2 Zn2 + (9ml R ) ZnR

lnl

·2

If-

9m5

-

9m1

Zn2 + -2-

·2

9'171')

Zn2

·2

9m2

9;"')

Y

Zn1

y + (9ml - )2 Zn2 9m2

V2+~
n

·2

·2 2n1

+ (9 -m·2 Zn2
9m2 9:n')

If-

V2+~
n · 9m2 Zn2
·2

4 2 · 9m2 ·2

4

2

y

+ [9~1(1 2+ k,B)2]y +y Zn2 Zn5

g;"2

32

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3.5

Summary

An in-depth investigation of the small and large-signal characteristics of low-voltage CMOS current mirrors has been presented. The ideal LI-IMP current mirror effectively lowers the input impedance. Practical implementation of LI-IMP current mirror, however, suffers from large input impedances at high frequencies. CCFB and RES current mirrors provide low and monotonically decreasing input impedances. Among the current mirrors investigated, only CCFB and RES give significant improvement in bandwidth. BASIC, CGFB, and HB'" current mirrors offer low noise. RES has the highest noise, mainly due to the thermal noise of the added resistor. The noise of CCFB is higher than that of BASIC due to its reduced current gain. CCFB current mirror provides the largest dynamic range whereas bootstrapped current mirror has the lowest dynamic range.

33

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Chapter 4 New Bandwidth Enhancement Techniques for CMOS Current-Mode Circuits
This chapter introduces
t\\'0

new bandwidth enhancement techniques, namely induc-

tor series-peaking and negative current feedback, for low-voltage CMOS current-mode circuits. Although inductors are commonly associated with narrow-band RF circuits, they are useful in broad-band circuits as well. The proposed inductor series-peaking technique boosts the bandwidth by utilizing the resonance characteristics of LC network formed by placing an inductor in series \yith the capacitor constituting the dominant pole. Two configurations are investigated. In the first configuration where the dominant pole is due to the gate-source capacitance of the output branch of current-mirror amplifiers. The peaking inductor is added between the gates of the input and output transistors. In the second configuration, the current amplifier is used as a pre-amplification stage of optical receivers. In this case, the parasitic capacitance of the photo diode and that of the packaging of the chip constitute the dominant pole. The peaking inductor is placed at the input node of the amplifier. Both the bond wire inductance and on-chip spiral inductance can be used to realize this inductor.

34

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

The current feedback increases the bandwidth by taking the advantage of negative feedback theory. A new sampling mechanism is introduced to acquire the feedback

I

current. The employment of both the inductive peaking and current feedback further increases the bandwidth. Another notable advantage of the current feedback is that it significantly reduces the value of the peaking inductor, which is not only area-greedy but also has a strong interaction with the substrate. Both the inductor series-peaking and the current feedback techniques do not affect the supply voltage and DC biasing conditions. Before introducing the new techniques, we begin with a brief review of two existing bandwidth enhancement techniques. The first is inductive shunt-peaking technique for voltage-mode circuits, and the second is resistive-compensation technique for currentmode circuits.

4.1

Inductive Shunt-Peaking and Resistive Compensation

Both inductive shunt-peaking and resistive-compensation techniques enhance the bandwidth by creating a zero to compensate the dominant pole. As shown in Fig. 4.1, neglecting the parasitic capacitances, the transfer function of this simple common-source voltage amplifier (with L
9m R
1 + sRC·

= 0)

is given by

(4.1)

The bandwidth is determined by a single dominant pole, which is determined by the output load resistance R and load capacitance C. The inductive shunt-peaking technique introduces an inductor L in series with the load resistance and in parallel with the load capacitance. The transfer function is given

35

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

L

R

Figure 4.1: Inductive shunt-peaking technique

by

Fo(s)
1~n (s)

1 + sRC - s2LC'

(4.2)

The zero is solely determined by the L/ R time constant and is primarily responsible for the bandwidth enhancement. The frequency response of this shunt peaked amplifier is characterized by the ratio of the L/ Rand RC constants [33]. This technique, however, is not particularly applicable to current-mode circuits, mainly due to the existence of high-impedance biasing current sources between AC ground and the dominant pole, and it will create mismatch problems (see Section 5.3) if the inductor is placed in series with the current source. The resistive-compensation technique was introduced in [32] [34] to enhance the bandwidth of current mirrors. The basic current mirror is a single-pole system. The resistive-compensation generates an additional pole and a compensating zero by inserting

36

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

-'- C gs2

MI

M2

R

1:k

J

kJ

Figure 4.2: Resistive compensation technique

a passive resistor between the gates of the input and output transistors, as shown in Fig. 4.2. The transfer function is given by
1

10(8) (gm2) 1in(8) = Cgs2

RCgs1 8 2 + C g81 +Cg82 + gm1 RCgs1Cgs2 RCgsICgs2

8+--

(4.3)

For the compensated current mirror, the frequency response is characterized by the value of resistor R. The effectiveness of compensation is somewhat uncertain due to the inaccurate CMOS resistors. Additionally, as revealed in Section 3.4 that the thermal noise of the added resistor deteriorates the noise performance because its noise is directly referred to the input. For applications such as preamplifiers of data transceivers, noiseless elements that provides comparable bandwidth enhancement are preferred.

37

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.2
4.2.1

Inductor Series-Peaking
Current-Mirror Amplifiers

It is commonly said that the current-mode circuits possess large bandwidth [4] [3]. A

main drawback of these circuits is their low current gain. To increase the current gain, the size of the transistor in the output branch of current-mirror amplifiers can be made large, however, at the expense of bandwidth.

: C gs2

Ml

M2

L

1:k

J

kJ

Figure 4.3: Current-mirror amplifier with series-peaking inductor (J = 0.5mA, H'1 = 10Mm, H'2 = 100Mm)

Neglecting the parasitic gate-drain capacitances, the basic current-mirror amplifier shown in Fig. 4.3 (with L = 0) has the first-order transfer function

gm2) ( gm1 S G981

1

+ Gg82 + 1 '

(4.4)

gm1

with bandwidth

38

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Wo =

gml
C gs1

+ C gs2

,

(4.5)

where gm is the transconductance and Cgs is the gate-source capacitance of transistors. Because the current gain k =

~~0 ~~:

is usually large,

Cgs2»Cgsl

and dominates the

gm1 frequency response. The bandwidth is therefore given by Wo~ C . To quantify the
gs2

bandwidth, the amplifier is implemented in TSMC's O.18j.lm 1.8V CIvl0S technology and analyzed using Spectre from Cadence Design Systems with BSHvI3V3 device models. Simulation results with the circuit parameters given in Table 4.2 are shown in Fig. 4.1l. Because the dominant pole of CMOS current-mirror amplifiers is attributed to the gate-source capacitance of the output transistor, a compensation inductor L can therefore be placed between the gates of the input and output transistors and is in series with
C gs2 ,

as shown in Fig.4.3. Note that the added inductor has no effect on the DC

characteristics. The amplifier has a third-order transfer function

fo(8)
fin (8)

=

(gm2) gml

83 LCgs1 C gs2

gml

+ 82 LCgs2 +

1

8 C gs1

+

C gs2

+ 1.

(4.6)

gml

\iVith the assumption

C gs2

»

C gs1 ,

the transfer function is simplified to

(4.7)

with the poles given by

(4.8)

39

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

From the control theory, the transfer function of a stable, zeroless, second-order system can be expressed as
2
2'

I I
1

H(8)=H
where

-

Wn
8 2

+ 2~wns + Wn

(4.9)

j

iI

is the DC gain,

Wo

is the undamped natural frequency, and ~ is the damping

ratio. Three distinct cases are defined: · the under-darnped case, when 0 < ~ < 1, · the critically damped case, when · the over-damped case, when 1 <
~ = ~

1, and
00.

<

Table 4.1: Damping characteristics

L
L < G 4g~1
gS "2

Poles Two distinct negative real poles

Damping characteristics Over-damped

Response 1) Small bandwidth 2) Large rise time 3) No ringing

L = C gs 2 4g~1

Two identical negative real poles

Critically damped

1) Large bandwidth 2) Small rise time 3) No ringing

I
I

I
L> Ggs2
4g~1

Complex conjugate poles with negative real part

Under-damped

1) Large bandwidth 2) Small rise time 3) Ringing

I

I
I

I I
I.

For the current-mirror amplifier, the damping ratio

~

=

Cgs2
4gml L
2 .

It is seen that

,.

the characteristics of the current-mirror amplifier depend upon the value of the peaking

I

40

I I

--------------------------Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

L=100nH
10

8
c: ·iii
Ol

C Q)
:::l

..... .....

6

()

4

2

OL-----~--~~~~~~~-L------~--~--~~~~~

10-

1

10° Frequency [GHz]

10

1

Figure 4.4: The effect of the peaking inductor on the bandwidth of current-mirror amplifier ((3 = 0, L is varied from 0 to 100 nR with step 20 nR)

inductor, as detailed in Table 4.1. To maximize the bandwidth and avoid ringing in time-domain response, the peaking inductor is sized based on the criterion of the critical damping where

L=

4g 2 m1 L

C gs2

(4.10)

The amplifier in this case has the bandwidth of

Wo =

2g m ! C
gs2

'

(4.11)

It is nearly twice that of the basic current-mirror amplifier. Simulation results with

the circuit parameters given in Table 4.2 demonstrate that the inductor series-peaking

41

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

technique increases the bandwidth of the circuit from 1.6 GHz (L
(L = 60nH) , as shown in Fig.4.11.

=

0) to 2.7 GHz

Fig. 4.4 shows the effect of the value of the

peaking inductor on the bandwidth of the amplifier. It is seen that the critical damping occurs at
L~60nH.

4.2.2

Optical Preamplifiers

C gs1

:

: C gs2

Ml

M2 1:k

.
lin
CT - ~-

L

.
10

J

kJ

Figure 4.5: Optical preamplifier with series-peaking inductor (J = 0.5mA, H\ = lOpm, l1'2 = lOO{llll, CT = 0.5pF)

I

In the preceding analysis, the parasitic input capacitance is neglected and the gatesource capacitance of the output transistor is assumed to constitute the dominant pole. However, in the design of preamplifiers for optical communications, due to the large parasitic capacitance of the photodiode and that of bonding pads of the chip, the input parasitic capacitance is usually much larger than the capacitance of the transistors. Fig. 4.5 shows a primitive current-mode preamplifier for optical communications (L = 0), where CT equals the total parasitic capacitance of the photodiode and the packaging. The transfer function of the preamplifier is given by

I I
I

I I
I

I I

I I
[

i

I

42

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

(4.12)

with bandwidth

Wo

=

gm1 , CT + Cgs
,

(4.13)

where C gs

= Cgs1 + Cg52 .

Assuming CT»Cgs : the bandwidth is given by wo~gcm1. As
T

shown in Fig. 4.12, the bandwidth of the preamplifier with CT = 0.5 pF is only 0.45 GHz. To implement the series-peaking technique, the peaking inductor is placed at the input node of the preamplifier, as shown in Fig. 4.5. Both the bond wire inductance and oIl-chip spiral inductors can be used to realize this inductor. The preamplifier with the peaking inductor has a third-order transfer function

1o(s) (gm2) 1in(s) = gm1
\Vith the assumption CT

1

S

3

LCgsCT
gm1

+S

2LC

T+S

Cgs

gm1

+ CT + 1·

(4.14)

»

Cgs , it can be simplified to a second-order fUllction

(4.15)

with a pair of poles

-1±
P1,2 = - - - - ' - - - - - 2gm1 L

(4.16)

These equations are similar to those of the current-mirror amplifier with a series peaking inductor. In the critically damped case where

43

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

L=~,
gml

CT

(4.17)

the circuit has the bandwidth of

(4.18)

which is twice that of the basic preamplifier. Simulation results demonstrate that the inductor series-peaking technique i,ncreases the bandwidth of the preamplifier from 0.45 GHz (L = 0) to 1.0 GHz (L = 100 nH), as shown in Fig. 4.12. It should be noted that since the value of bond ''lire inductance is limited [33], a large on-chip spiral inductor is needed. On-chip inductors are very area consuming. Inductors greater than 100 nH are rarely used in practice [35].

4.3

Negative Current Feedback

It is well known that negative current-current feedback lowers the input impedance,

improves the dynamic range, and boosts the bandwidth, hmvever, at the expense of current gain. Conventionally, current-current feedback is a series-shunt feedback which means that the feedback current is acquired in series with the output current [26]. As mentioned in Section 3.2, to sample the output current without affecting both the DC biasing condition and the supply voltage, we introduce a new current feedback mechanism shown in Fig. 4.6. In the basic current-mirror amplifier, the feedback transistor 1I1! is simply a diodeconnected mirror of the input transistor 1111 · It can be shown that the transfer function is given by
j

I
I
1

I I I

I
44

I

I

-

------ - - - - - - -

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1 : f3k
Ml

1:k
M2

.
lin

Mf if

.
10

=

-~ io
~kJ

J

kJ

Figure 4.6: Current-mirror amplifier with current feedback (J = 0.5mA, H'l = lOJLm, H/2 = 100JLm, TiT! = lOJLm)

gm2 [ gm1 (1

]
S C gs1

1

+ kj3)

+ C gs2 + C gs ! + 1 ' gm1 (1 + kj3)

(4.19)

with bandwidth

Wo

=
C ys1

~

gm1 C gs2

+ C gs2 + C gs ! (1 + kj3)

gml

(1

+ kj3)
(4.20)

where Cgs2»Cgs1, C ys ! was assumed. It is seen that the feedback increases the bandwidth by the factor (1 + kj3). Two notable advantages of this configuration are (i) the feedback gain can be adjusted independent of that of the forward path, and (ii) no increase in the minimum supply voltage, which is given by VT + Vsat, where VT,n the threshold voltage and

=

/VT,p/

= VT is

Vsat

is the pinch-off voltage. Simulation results with j3 = 0.1

are shown in Fig. 4.11. It is seen that the feedback boosts the bandwidth from 1.6 GHz
45

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

to 2.8 GHz. It should be noted that the feedback also decreases the current gain by the same factor (1

+ k(3),

and the feedback has no effect on the output impedance because

it sample the output current in different branch.

-20

-40
-60

c;
~-80
Q)
(/)

a..

~100

-120

-140
-160

Frequency [MHz]

Figure 4.7: Phase response of current-mirror amplifier

(a) (L = 0, f3 = 0), (b) (L = 0, f3 = 0.1), (c) (L = 60nH, f3 = 0), (d) (L = 17nH, f3 = 0.1)
It worth noting that the proposed current feedback does not create additional poles

to the system. As shown in Eq.(4.19), the feedback moves the single pole further away
from the original point. It not only does not create stability problems but also improves
1

the phase response. Simulation results shown in Fig. 4.7 demonstrate that the circuits with feedback have a better phase response.

j

I
j

I
46

f

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

4.4

Inductor Series-Peaking with Current Feedback

L

1 : pk

1:k

Ml

M2 Mf

.
10

lin

if
J

=

-p.io pkJ kJ

Figure 4.8: Current-mirror amplifier with series-peaking and current feedback

(J

= O.5mA,

TVl

= lOj-lm,

lV2

= IOOj-lm, H'f = lOj-lm)

It is evident from the preceding analysis that the bandwidth enhancement mechanisms of the inductor series-peaking and the current feedback differ fundamentally. This suggests that both techniques can be employed simultaneously to further improve the bandwidth. This is indeed true. Consider the current amplifier of Fig. 4.8 where both techniques are employed. To simplify the analysis, by assuming a large current gain k and a small feedback factor (3, the effect of C gs1 and C gsf can be neglected. Small signal analysis gives that the voltage at the input point

l~n =

(lin

+ If) [_1_11 (SL + -:--C )].
gml S
gs2

I

(4.21)

And the voltage at the gate of 1112 and 1I1f equals

Vg2

= ~n sL + (1/ sC)
47

I/sC

(4.22)

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

L=25nH
5

4

2

1

o~----~----~~~~~~~------~--~--~~~~~

10-

1

10°
Frequency [GHz]

10

1

Figure 4.9: The effect of peaking inductor on the bandwidth of current-mirror amplifier with current feedback ((3 = 0.1, L is varied from 0 to 25 nH with step 5 nH)

Since

10

=

gm2(Vg2 -

0) and If

=

-f3Io , the transfer function of the amplifier with

feedback is given by
1 + k(3

Iin(s) ~
with poles at

10(8)

[

1 gml(1 + k(3)
gm2

LCgs2
2

8 +8gml L

1

+

1 + kf3'

( 4.23)

LCgs2

1-

4g~lL(1+kf3)1.
C gs2

(4.24)
~

The feedback changes the damping ratio of the current-mirror amplifier from

=

48

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Cg52 4 2 L to ~
gml

=

4g~1 L(l

C gs2

+ k(3) .

In the critically damped case where

L
we have the bandwidth

=

4g~1 (1

Cgs2

+ k(3)

(4.25)

Wo

~

2gm1 (1 C g82

+ k(3)

(4.26)

Observed is that the bandwidth is (1

+ k(3)

times that of the amplifier with series

inductive peaking only, twice that of the amplifier with current feedback only, and 2(1

+ k(3)

times that of the basic current-mirror amplifier. Also seen is that the value

of the peaking inductor in the critically damped case is reduced from L no feedback to L

~ C9 ;2

~

2 49m1

f+
9S2

49 m1

with

1

k(3) ·with,feedback. The reduction in the inductance using

current feedback is very attractive because only a small inductor, subsequently, a small chip area and less parasitic effects, is required to achieve large bandwidth. Simulation results demonstrate that the bandwidth of the amplifier reaches 5.3 GHz with L and f3 = 0.1, as shown in Fig. 4.11.

= 17nH

Fig. 4.9 plots the response of the amplifier for

various values of the peaking inductor. It is seen that critical damping that occurs at
L~17nH

provides the largest bandwidth.

Inductor series-peaking technique increases the bandwidth by introducing an additional pole-pair to the system. The drmvback of this technique is that it deteriorates the phase response. As discussed in Section 5.3 and depicted in Fig. 4.7, the current feedback can improve the phase response of the amplifier with series-peaking inductor. In a similar manner, one can show that for the optical preamplifier of Fig. 4.10, both inductor series-peaking technique and negative current-current feedback can be used for bandwidth enhancement. As shown in Fig. 4.12, with L

=

25 nH and f3

= 0.1,

the

49

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

1: ~k
MI

1:k M2

Mf
lin L
10

if = -~ io
:
J
~kJ

CT

kJ

Figure 4.10: Optical preamplifier with series-peaking and current feedback (J = 0.5mA, Till = lOpm, 1F2 = 100pm,rVf = lOpm, C T =0.5pF)

bandwidth of the preamplifier is boosted to 2.0 GHz. Table 4.2 gives the comparable circuit parameters and simulation results.

Table 4.2: Circuit parameters and bandwidth

(Lmin = 0.18pm is used for all transistors)
Dominant Feedback capacitor Current-mirror Cgs2 = C~x(ll' Lh {3=0 amplifier Cgs2 = C~x(ll' Lh {3=0 C gs2 = C~x (1l' L h {3 = 0.1 Cgs2 = C~x(lVLh {3 = 0.1 Optical CT = 0.5 pF {3=0 pre-amplifier CT = 0.5 pF {3=0 CT = 0.5 pF {3 = 0.1 CT = 0.5 pF {3 = 0.1 Amplifier Peaking inductor Bandwidth 1.6 GHz 2.7 GHz 2.8 GHz 5.3 GHz 0.45 GHz 1.0 GHz 0.88 GHz 2.0 GHz

L=O L = 60 nH L=O L = 17 nH L=O L = 100 nH L=O
L = 25 nH

4.5

Summary

A new inductor series-peaking technique for bandwidth enhancement of low-voltage CMOS current-mode circuits has been presented. For both current-mirror amplifiers and 50

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

10 9

8
7
'Cij

c

6

0

... ...
c
<Il
::J

5
4

0

3

2 1 0 1 10
2
3

10

10
Frequency [MHz]

10

4

Figure 4.11: Frequency response of current-mirror amplifier (a) Wo = 1.6 GHz, (L = 0, (3 = 0), (b) Wo = 2.7 GHz, (L = 60nH, (3 = 0), (c) Wo = 2.8 GHz, (L = 0, (3 = 0.1), (d) Wo = 5.3 GHz, (L = 17nH,(3 = 0.1)

optical preamplifiers, series inductive peaking boosts the bandwidth by 100% approximat ely with zero overshoot. The proposed novel current feedback technique increases the bandwidth by (1

+ k(3).

\\Then both techniques are employed simultaneously, the

Lalldwidth can be significantly improved by 2(1

+ k(3),

and the current feedback also

effectively reduces the value of the peaking inductor by (1

+ k(3).

Both inductor series-

peaking and current feedback do not affect the DC biasing conditions and the minimum supply voltage. They are particularly attractive for low-voltage design.

51

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

9

8
7
.~

(9

co

6

c5
U4
3
:::l

~

r------------------=~~----~_4~

2
1
oL---~~~~~W---~~~~~~--~--~~~~

10

1

10

2

10
Frequency [MHz]

3

10

4

Figure 4.12: Frequency response of optical preamplifier with CT

= 0.5

pF

(a) Wo = 0.45 GHz, (L = 0, f3 = 0), (b) Wo = l.0 GHz, (L = 100nH, f3 = 0), (c) Wo = 0.88 GHz, (L = 0, f3 = 0.1), (d) Wo = 2.0 GHz, (L = 25nH, f3 = 0.1)

52

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Chapter 5 Topologies and Strategies of Current-Mode Amplifiers
This chapter presents new circuit topologies and design strategies for low-voltage currentmode amplifiers. It reveals that two-stage configurations have larger bandwidth compared with single-stage configurations. Fully balanced configuration can eliminate the effect of bias-induced mismatches. The noise performance of the current-mode circuits is analyzed. A current-branching mechanism is used to reduce the power consumption and increase the output impedance. It shows that differential configurations can minimize the effect of power and ground fluctuations. A new differential negative current feedback technique is introduced to boost the bandwidth and increase the dynamic range. A common-mode feedback topologies are proposed to increase the common-mode rejection ratio (CMRR) and to stabilize the DC biasing condition.

5.1

Gain and Bandwidth

The schematic of the basic single current-mirror amplifier is shown in Fig.5.1(a). Neglecting the effect of channel length modulation and load capacitance, it can be shown that the current gain is given by

53

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

k
1 + s~nCn

(5.1)

H! L 1 gml assumed. The bandwidth is therefore obtained from

where

k

= ( / ) , R in

(TV/ Lh

~ - , Gin ~ G gSl

1

+ C gS2 =

(1

+ k)Cgsl ,

and

Cgs

»

Cgd

is

W-3dB =

---=-~-

gml

(1

+ k)CgSl

(5.2)

It can be seen that the current gain and bandwidth are conflicting design parameters.

To achieve a large gain without sacrificing the bandwidth, a two-stage current amplifier shO\\'n in Fig.5.1(b) can be used. Note that a P110S-pair is used at the first stage to achieve a better bandwidth and proper bias conditions [26].

kJ ",j,.

",j,.

J

Figure 5.1: Current amplifiers (a) Single-stage; (b)Two-stage

W

-3dB,l

= ------,---

(1

+ kl)Cgsl '
gm3

gml

(5.3)

The current gain of the two-stage amplifier is given by

(5.4)

54

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 5.1: Circuit parameters of single- and two-stage amplifiers

I

(Lmin = 0.18J1m is used for all transistors) Parameter Single-stage Two-stage Nfl 111 = 0.5J1m lV = 0.5J1m 111 = 50J1m 1V = 3.5J1111 1112 1113 1V = 1.75J1m 1V = 25J1m 1114 J 50 J1A 50J1A Bandwidth 1.3 GHz 365 rvIHz

I

I

(lY/Lh (IF/L)4 where k1 = (If,'/L) 1 , k2 = (H'/Lh' R1 ~
C 2 ~ (1

1
gml

C 1 ~ (l+k l )CgsI , R2 ~

1
gm3

, and

+ k 2 )Cgs3 · The frequencies corresponding to the two poles are

c
o

~ .....
:J

--e-- Single-stage
30
-A-- Two-stage

365MHz
25~1--~--~~~~~--~~~U-~~~~~~~~~~-W

10

10

2

10

3

10

4

Frequency [MHz]

Figure 5.2: Frequency response of single- and two-stage current amplifiers

For a given current gain k

= k1k2'

the bandwidth can be maximized if the two poles

55

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

are identical. It is known that where Kn

gml

= J2K p (TVj LhIDl and
If we let (H1jLh =

gm3 =

J2Kn(llTj L hI 03,
then

= J-LnC~x

and Kp

= J1'pC~x.
103

~(lVjLh = ~kl(lVjLh,

C9s3

= 2k1 C981 follows [36]. Since

1

= k1IDl' we arrive at

(5.5) Using this relation, if Kn
=

2Kp , for k1k2

=

100, we obtain k1

~

7. Fig.5.2 shows

the frequency response of the output current of the single-stage and two-stage amplifier that are implemented in TSMC 0.18ft, 1.8F C1IOS process. The circuit parameter is listed in Table 5.1. It is seen that the bandwidth of the t\vo-stage amplifier is 1.3GHz approximately whereas that of the single-stage is only 365MHz. Also seen is that the two-stage amplifier provides smaller current gain in DC steady state.

.

5.2

Noise

[11] reveals that the noise figure of the current-mirror amplifiers is determined by the
pO\ver of the input-referred noise current generator. For the single-stage current amplifier in Fig. 5.1{a), the input referred noise current power density is given by

J2 -[2 n,in - n,1 +
that for k

12 n,2 k2 '

(5.6)

where I~,1 and I~,2 are the power density of the channel noise of .111} and 1112 . It is seen

»

1, the noise from 1112 can be neglected.

The input referred noise current power density of the two-stage amplifier in Fig. 5.1(b) is given by

(5.7)

56

- - - -------

--

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

It is seen that the two-stage configuration increases the input referred noise. However,
the dominant noise contributor is still the input transistor 1111 if we keep a large current gain k1 at the first amplification stage.

5.3

Mismatches

The performance of the current amplifier in Fig.5.1(a) deteriorates when mismatches between the input and output branches exists. The mismatches generate an offset output current ios.

(i) (TV/L) Mismatch - Let (TV/Lh = (lV/L) and (TV/Lh = k[(TF/L) can be shown that the output current

+ L\(TV/L)] , it

= bin + k
= ki in

.

L\(TV/L) . (W/ L) (J + Zin)

(5.8)

+ k6N,1 (J + iin)
= Fr and

(ii) Fr Mismatch -

Vr mismatch is caused by process variation. Let FrN1
be shown that

FrN2 = lIT

+ L\ Fr , it can

_.. [(L\ Fr)2 _ (J i·) 2L\Fr -kzm+k (T7 1T)2 l' 17 + m ~es I r e s - 'TN

1

(5.9)

= ki in + k6N,2(J + iin)
(iii) Ves Mismatch - The mismatch of the gate voltage is mainly caused by an improper layout and the resistance of interconnection between gates of 1111 and 1112 . Let VeS1 and VeS2 = Ves

= Ves

+ L\vgs , it can be shown that

57

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

(5.10)

(iv)

VDS

Mismatch - The mismatch of VDS is caused by the different output impedances
VDSl

of MOSFETs. Let

= VDS and VDS2 = VDS

+ ~VDS,

it can be shown that

(5.11)

\i\There AN is the channel length modulation of Nl\10S transistors.

\"'hen all mismatches are encountered, the output current of the basic current amplifier is obtained from

(5.12)

The offset output current ius is given by

(5.13)

where tJN is the total mismatch coefficient of the NMOS-pair. It equals
4

tJN = LtJN,i'
i=l

(5.14)

The above equations reveal that mismatches give rise to an output offset current that has both signal-dependent and bias-dependent parts. Because for class-A current ampli-

58

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

kl : 1

,

M41k 11<2(1 +ON1(1 + Op )(H"
Mbl I: k2
Vb-++----------------+------------------+---------------~

)

I: k2

Figure 5.3: Fully balanced two-stage current current amplifier

fiers, signal is usually much smaller as compared with the biasing current, the biasingdependent part dominates. Further, because the bias-dependent part is approximately time-invariant, its effect can be eliminated by using the fully balanced configuration, shown in Fig.5.3. The circuit is fully balanced such that the bias-induced output offset current in the signal path and that on the bias path are cancelled out. In saying so we have assumed that N!vIOS-pairs have the same mismatches and the same assumption holds for PMOS-pairs. Fig.5.3 shows the current flowing in the balanced amplifier. Thus, the output current can be given by

(5.15) The output offset current ios is given by

(5.16) where 6p is the total mismatch coefficient of the PMOS-pair which can be calculated in the same manner as 6N. It is seen that the bias-dependent part is removed completely.

59

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

5.4

Power Consumption and Output Impedance

Current-mode amplifiers usually take high power consumption because the biasing current is amplified as well as the signal. As shown in Fig.5.4, the biasing current in the inputbrandl is given by J. \\lith current gain of k = klk2' the biasing current in the output branch reaches klk 2 J. The DC power dissipation is given by

(5.17)

The higher the current gain the higher the power dissipation.

1 : kI k2(kl-k3)J ~

1: k2

Figure 5.4: Two-stage current amplifier with current-branching

Another drawback of the current amplifiers is their low output impedance which is given by

(5.18)
It is seen that the output impedance is reversely proportional to the current gain. To

solve these two problems, we introduce a current-branching mechanism to the two-stage current amplifier as shown in Fig. 5.4. The branching current source k3J is placed at

60

---.-----~

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

the second amplification stage. So the DC current flowing through A13 is (k 1

-

k3)J

instead of k1J, and the output branch biasing current is k2(kl - k3)J. The DC power dissipation is given by

(5.19) And the output impedance is given by
. 1
-

Roul. = )"k 2 (k 1

k3)J

(5.20)

Because the transistors in this circuit always work at saturation region, k3 can be set closely to k 1 . Thus, both a significantly reduced power dissipation and a greatly increased output impedance are achieved. The branching current source can be implemented by a NMOS transistor with a fixed gate-voltage. It should be noted that when k3 is very close to kl' the channel length modulation effect makes the gds of the branching transistor comparable to the gm of A13 . Accountable part of the AC signal may flow through the branching transistor. Therefore, the AC current gain will be affected.

5.5

Differential Configuration

Simultaneously switching noise (SSN) is a considerable issue in mixed analog-digital circuit design. In optical receivers, the switching of clock and data recovery circuit causes power and ground fluctuations. To suppress this effect, a differential configuration shown in Fig. 5.5 is proposed. To demonstrate the effectiveness of fully differential configuration, both the nondifferential and differential amplifiers with 500 load are implemented in TSl\1C 0.18p, 1.8V CMOS process. A pulse voltage source of amplitude 150m V and frequency 200MHz

61

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

-J,- (klk2)J

-

i~

-J,-

J

-J,-

J

k2: I

I: k2

Figure 5.5: Differential current amplifier

600
/

/

" ,\
\

400 200
2E
~ .....
:::J :::J

/

~

\

0

\

\

()

::;
0

Q.

-600 -800 -1000 0
Non-differential Differential

5

10
Time [nSec]

15

20

Figure 5.6: Output current of non-differential and differential amplifiers with a noisy supply voltage

is connected in series with the supply voltage as the source of power fluctuation. \Vith a
lOOMHz sine-wave input signal, the output current is plotted in Fig. 5.6. It is seen that

62

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

the output current of the non-differential amplifier contains sparks at voltage switching point and there exists a DC offset component. whose value is proportional to the amplitude of the pulse voltage source, whereas that of the differential amplifier is insensitive to the power fluctuation.

5.6
~

Differential Current Feedback
J

-J"

J

Figure 5.7: Current amplifiers with current feedback (a) Single-stage; (b)Two-Stage

Several differential current-mode circuits have been introduced in [31] [37] [38]. To
,

our best knowledge, none of the existing differential current-mode configurations employ differential feedback. In those designs, the positive and negative input currents (i~

and ih-r) are amplified in the separate branches, and the output current is obtained by

io =

i;; -i;;.

Any changes in one branch do not affect the other one. As we know, negative

current feedback is capable of boosting the bandwidth and increasing the dynamic range. Negative differential feedback is desirable in differential current-mode approaches. As depicted in Section 4.2, the negative current feedback of the current-mirror amplifier as shown in Fig. 5. 7( a) lowers the input impedance, increases the bandwidth. It is important to note that the feedback becomes positive when it is implemented in the two-stage (or even-stage) amplifier. As shown in Fig. 5.7(b), the feedback current is given by if = +f3io. However, when this topology is employed in the differential con-

63

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

-J,

J

Diff .
· Feedback:

Diff.
Feedback.

Figure 5.8: Differential current amplifier 'with negative differential current feedback

figuration, the feedback exhibits the desired negative characteristics. As shown in Fig. 5.8, the feedback current if + negative input point.

= {3io -

at the positive input point, and if -

= /3i o+

at the

Table 5.2: Circuit parameters of differential amplifier (Lmin = 0.18p.m is used for all transistors) Parameter Value

I

1111, 1115 , Jl.1Bo 1112, 1113 , 1116, M7 1I1b2 , 1I1b3 , 1I1b6 , 1I1b7
J

HI = 0.5p, (vV/Lh = (H'/Lh = ~(ltT/Lh = ~(lV/L)6 (lV/L)b2 = (H'/Lh3 = (IF/Lh6 = (lV/L)b7
28p,A

k1 k2 {3

7 100/7 0.02

It should be noted that the added differential feedback does not affect the output

impedance of the amplifier because it acquires the feedback current in different branches. This structure remains the minimum supply voltage requirement. An advantage of this

64

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Table 5.3: Key performance parameters of differential amplifier

I Without Feedback I \iVith Feedback I
37.6
1.3

Current Gain (dB) Bandwidth (GHz) Input Impedance (Krl) Power Dissipation (m W)

9.8 11.66

28.3 3.5 3.4 13.34

configuration is that the feedback factor f3 can be adjusted independent of the forward path. f3 should be keep small in order to achieve a large current gain. The dimension of the biasing transistors !I1~ and !I1bJ in the feedback path can be carefully set so that the feedback will not affect the DC operating point of the circuit.

35

25 ............... .
-A- With-feedback

-e- Without-feedback
10
1

1.3GHz 10
3

3.5GHz. 10
4

20~--~~~~~~L---~--~~~~~L-~--~~~~

10

2

Frequency [MHz]

Figure 5.9: Frequency response of differential current amplifier with and without feedback

To illustrate the effectiveness of negative differential current feedback, we simulated

65

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

3.-------.-------~-------.-------.-------.-------.

2.5

o
:; 1.5
c:: ~

o

"5 0.. "5

1

0.5

-A-- With-feedback -B- Without-feedback

O~------~------~-------L-------L------~------~

o

10

20

30
Input Current [uA]

40

50

60

Figure 5.10: Dynamic range of differential current amplifier with and without feedback

the fully differential current amplifier with and without feedback. The circuit is implemented in TSMC 0.18/1 1.8V CMOS process, and the circuit parameters are given in Table 5.2. \Vith the open-loop gain k = 100 and the feedback factor {3 = 0.02, the loop gain is given by (k{3) = 2. As depicted in Section 4.2, the feedback is expected to boost the bandwidth by (1

+ k{3) = 3.

The simulated frequency response demonstrates the

expectation. As shown in Fig.5.9, the differential feedback enlarges the circuit bandwidth from 1.3GHz to 3.5 GHz. Other key parameters are listed in Table 5.3. It is seen that both the input impedance and the current gain are reduced approximately by the same factor of (1

+ k{3).

The feedback only slightly increases the power dissipation of the

circuit because the current flowing in the feedback are very small compared to that in

66

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

the output branches. Another notable advantage of the negative differential current feedback is that it greatly boosts the dynamic range of the amplifier. The input current range is limited by the biasing current. In the given circuit, when the input current is larger than 28
MA, the output is distorted. As shown in Fig. 5.10, the dynamic range is significantly

increased by the feedback. The input swing can be very large as long as the saturation current of the transistors is not reached.

5.7

Common-Mode Feedback

Mefl

Mef2

M7
I: k2

to lin

.+

:.J.:.~~~. ....... !:t.~~.J.

k2: I

Mbefl

Mbef2

Vb_+--------~----~~------~------_+--~_+r_--------~

.....................................................................................................................

See Fig.5.8

Figure 5.11: Common-mode feedback

Common-mode feedback (GMFB) is widely used in yoltage-mode Op-Amp to increase the common-mode rejection ratio (CMRR) and to stabilize the DC operating point. Based on the previous analysis of the current feedback, we introduce a commonmode current feedback in this differential amplifier to increase the CMRR. As shown in Fig.5.Il, the transistor AleJ and Ale! add the output current io + and io - together.

67

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

The differential-mode signal will be eliminated and only the common-mode signal will be accumulated. The added common-mode signal is amplified by a current mirror pair, and then fed back to the input nodes separately. Since the signal has been amplified by three (odd) current mirrors, the feedback comes to be a negative common-mode current feedback. The common-mode gain is reduced by the negative feedback, thus the common-mode rejection ratio is increased.

5.8

Summary

Several circuit topologies and design strategies for low-voltage current-mode amplifiers have been analyzed. It shows that the fully-balanced hvo-stage current amplifiers are able to achieve wide bandwidth and minimize the bias-dependent mismatches. Analysis tells that the current gain is critical to the input referred noise. The proposed currentbranching configuration significantly reduces the power consumption and increases the output impedance. It shows that the differential configuration is insensitive to the power and ground fluctuations. A new differential feedback has been introduced for differential current-mode circuits to boost the bandwidth and enlarge the dynamic range. A common-mode feedback topologies was proposed to improve the CMRR and to stabilize the biasing condition.

68

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Chapter 6 New Low-Voltage Differential CMOS Current~Mode Optical Preamplifier
This chapter shows the complete design of a low-voltage differential CMOS currentmode preamplifier for optical communications. The circuit design and layout are based on TSI'v1C 0.18 11m, 1.8 V, 6-metallayers, mixed-signal CMOS technology. Simulation analysis uses Spectre from Cadence Design Systems with BSIM3V3 device models. The designed chip is currently being fabricated by TSMC via CMC.

6.1

Circuit Schematic and Parameters

A differential optical front-end with a novel differential transimpedance amplifier was introduced in [24]. Fig. 6.1 shows the topology of the differential front-end. One input is connected to the photodiode, and the other one is connected to a capacitor C~ who has the same capacitance as that of the photodiode. In this thesis, \ve introduce a new differential current-mode amplifier for optical receivers. Fig. 6.2 shows the complete schematic of the preamplifier. M r1 , A1r2 , A1r3 , and
Mr4

constitute the so-called "self-biasing" circuit to provide a reference current. An .

important advantage of this self-biasing circuit is that the reference current is insensitive

69

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Cd'

Rt

+
~--------------~--~ +

+

Vout

Rt
Figure 6.1: Differential optical front-end with differential trallsimpedance amplifier to the fluctuation of the supply voltage [26]. The biasing current sources of the amplification and that of the feedback branches mirror from the reference current. Transistors

1111, 1113, lv[5, and A17 (1112, 1114 , A16 , and A18 ) constitute the two-stage amplification path
for

it

(iin)· A1bl and A1b3 (A1b2 and Ah4) provide the biasing current for the positive
A1bf1

(negative) path. Al/1 and

(.Mf2 and

Albf2 )

constitute the feedback path to generate

the differential feedback current if (in. A181 and A182 are current-branching transistors used to reduce the biasing current at the second amplification stages. The parameters of all transistors are given in Table 6.1. The inductors Ll assumed to tolerate a 0.3 pF photodiode capacitance. To simplify the description, we only analyze the positive amplification path. Because of the existence of a large photo diode capacitance, the input impedance has to be small enough to achieve large bandwidth. Therefore, a large biasing current at the input stage is needed. In our design the input biasing current mirrored from the reference is about

= L2 = 8 nR.

The circuit is

70

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

·+

'"

Diff.
Feedback'

Figure 6.2: Differential current-mode amplifier

Table 6.1: Transistor sizes of the optical preamplifier

(Lmin = 0.18t-tm is used for all transistors) Width (t-tm ) Transistor 50 .MI' A12 100 A13, M4 5 A15 , A16 200 A17 , A18 25 A1bl , Alb2 220 Alb3 , Alb4 5 Alfl, M f2 5 Albfl' A1bf2 49 M sI , Als2 25 Alrl , Alr2 50 Alr3 , Alr4

I

2.74 rnA. Under this condition and with the given transistor size, the DC voltage at the . .. b FDD mput pomt IS a out -2-' The amplification gain at the first stage is set to be kl

= ~~ ~ ~: = 2.

One reason to

select such a small gain is to restrain the input gate-source parasitic capacitance that con-

71

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

tributes to the total input capacitance. Another reason is because of the implementation of the current-branching. With the given transistor parameters, the branching transistor

1I1s1 greatly reduces the DC biasing current flowing through 1115 to 0.28 rnA. The width
of 1115 is small to reduce the size of the output transistor. Because of these, the channel length modulation causes 9ds,sl ~ An I D ,sl is comparable to 9m,5 = J2f.lnC~x(lV/ L)sID ,5.
It means that an accountable part of AC signal will flow through 1Ils1 , resulting in a

reduced signal gain. In our circuit, the simulated AC gain at the first stage is about 1, which means 9ds,sl ~ 9m,5. 'The channel length modulation effect can be reduced by using long-channel devices. The drawback is the long-channel devices have larger parasitic capacitances that will deteriorate the frequency response. The major current gain is contributed by the second-stage. The open-loop gain of the
= 40, which also approximately equals the total He L 5 open-loop gain k. To keep a certain closed-loop current gain, a small feedback factor =

second-stage is set to be k2

~H0 L~7

f3 = (1/40) is selected making the loop gain kf3

~ 1.

As depicted in Section 4.3, the

closed-loop gain is about half of the open-loop gain. The whole amplifier carries out a differential current gain of about 40. \Vith 500 load resistance, a 2 KO transimpednace gain is achieved.
It should be noted that the two-stage current amplifier has two poles. Neglecting the

gate-drain capacitances, one pole is at the input point with

81

+-9ds,b1 = - -9m,1 -'--'--Cd

+ C 9S ,1 + C 9S ,3 '

(6.1 )

where Cd is the capacitance of the photodiodes. Another pole is located at the input of the second-stage

(6.2)

72

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Although the total capacitance of the 1st pole is still larger than that of the second pole. The reduction of both the biasing current and the size of value of 9m,5. Thus, the two pole may become comparable.
.!vf5

dramatically lowers the

20~

____________________

~~-----

(!)

£ 15 co

a
b

C

...
!!:!
::J

() 10

5

o~--~--~~~~~--~--~~~~~----~~~~~~

10

1

10

2

10
Frequency [MHz]

3

10

4

Figure 6.3: Simulation with L at the 1st-stage input node

[(a) Cd=O.3 pF; (b) C d=O.5 pF] The series-peaking technique supposes the peaking inductor to be placed in series with the capacitor constituting the dominant pole. For our circuit, we do the simulation by placing "ideal" inductors (L1

= L2 =

8 nH) at the first-stage input nodes and the

second-stage input nodes, respectively. Simulation results are shown in Fig. 6.3 and Fig. 6.4. It is seen that: (i) With C d=O.3 pF: When L1 and L2 are placed at the 1st-stage input nodes, the frequency response is well-shaped, and the bandwidth f-3dB=3.99 GHz. \Vhen L1 and

L2 are placed at the 2nd-stage input nodes, the frequency response has a "drop-raise" 73

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

20r-----------------------____~

~
~

c

<3

10

5

Frequency [MHz]

Figure 6.4: Simulation with L at the 2nd-stage input node

[(a) Cd=O.3 pF; (b) Cd=O.5 pF] shape. This is because that, although the two poles are close to each other, the dominant pole is still at the 1st-stage. If the drop is tolerable, the bandwidth is about f -3dB=4.49 GHz. (ii) VVith Cd=O.5 pF: \Vhen Ll and L2 are placed at the 1st-stage input nodes, the response oscillates. \Vhen Ll and L2 are placed at the 2nd-stage input nodes, the

frequency response still has a large bandwidth

f -3dB=3.S9 GHz. So if the two poles

are close to each other, the advantage to place the inductors at the second stage is the flexibility to tolerate variable input photodiode capacitance.

74

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

6.2
6.2.1

Circuit layout
Transistors

It is seen from the schematic that the differential amplifier is fully symmetric including

the current reference circuits and the feedback circuits. For differential amplifiers, the matching requirement between the differential branches is very crucial. To overcome the mismatch problem, centroid multi-finger structures are used for all the symmetric transistors such as 11111 and 1'112 , or 1\17 and 1\18, etc. The multi-finger structure also helps to reduce the silicon area, and minimize the source-substrate and drain-substrate parasitic capacitance. To reduce the effect of the poly-resistance, the finger is restrained less than 5J.Lm. The amplifying mirrors are derived from duplication. For example, 1113 and 1114 are duplicated from 1\11 and 1112 . This approach helps reduce mismatches of mirror pairs. The

eM as

counterparts have the same number of fingers so that the

routing distance between them can be minimized. To equally provide a stable reference current, the reference transistors are placed at the core of the circuit and guarded by guard rings.

6.2.2

Inductors

The lumped model of on-chip inductors shown in Fig. 6.5 is widely adopted in circuit design and simulation. The model parameters are:

· Ls - inductance,
· Rs -

metal series resistance, overlap capacitance,

· Cs

-

· Cox - oxide capacitance,
· Rsub -

silicon substrate resistance, silicon substrate capacitance.

· C sub

-

75

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Port I

Port2

RsubI

Rsub2

Figure 6.5: Lumped model of all-chip inductors

Usually, Cox and C sub are much larger than C s . It is worth noting that for a seriespeaking inductor, the Cox and C sub in both side are in parallel with the series-peaked capacitances. The series-peaking may also be effective on the Cox and Csub . So the on-chip inductor in very suitable to be employed in inductive series-peaking technique. As shown in Fig. 6.6, the key layout parameters of the on-chip planar inductors are:

· n - turns,
· tV -

metal width,

· s - turn spacing,
· din -

inner diameter.

The inductors are implemented using the top metal layer (Metal #6) to minimize the coupling effect on the substrate. In addition, to reduce their effect on other transistors, the two inductors are placed outside the rails of VDD and GND, as shown in Fig. 6.7. The power and ground rails playa guarding role to the core transistors.

76

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Port2

Port 1

Figure 6.6: Layout of on-chip planar inductor

6.2.3

Routings

To reduce parasitic capacitances, only DC biasing routings and local interconnections use metal #1 and metal #2. The input and output signal go through metal #5. Avoiding long overlap between neighboring metal layers to reduce the coupling capacitances. Differential pair twisting is used to further reduce the signal coupling.

6.2.4

Pads and Power supply

For high-speed applications, the signal pads (for

it,

i~,

it,

and i=) are built by the top

two metal layers (metal #5, 6) only to reduce the pad-to-substrate capacitance. They are placed at the middle of the die to reduce the signal routings and to minimize the interference from the inductors. The power pads (for Vim and GND) are built by all metal layers. A balanced multi-power supply strategy is used to ensure equal voltage

77

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Figure 6.7: Layout of the differential current-mode preamplifier

supply.

Finally, dummy layers are added to satisfy the density requirement. The chip-area is about 1 mm x Imm. It is seen that the inductors arc yery chip-area consumptive as compared with transistors.

78

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Figure 6.8: Layout of the core circuits

6.3

Simulation Results

35

30 25
~~

.(ij (!J

c

E20r-------------------____ ~
:::I

() 15

10

5
OL---~~~~~~--~--~~~~~--~~~~~~

1~

1~
Frequency [MHz]

1~

1~

Figure 6.9: Frequency response of the differential preamplifier (with Cd = 0.3 pF)

79

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

10-5~------~------~-------r-------.------~

N

o

>

r:

10-20L-______-'--______- L -_ _ _ _ _ _~_ _ _ _ _ __ _ ' _ _ : _ _ - - - - - -

10°

10

2

10

4

10

6

10

8

10

10

Frequency [Hz)

Figure 6.10: Output noise voltage power

(with 50

n loads)

As shown in Fig. 6.9, to demonstrate the effectiveness of the bandwidth enhancement techniques, we did the simulation in steps with the layout progress: (a) The bandwidth of the basic amplifier without feedback and series-peaking is only about 0.87 GHz. (b) The differential feedback boosts the bandwidth of the layout circuit to 1.9 GHz. (c) \\Then series-peaking inductors are built and implemented in the whole layout circuit, we get the "drop-raise" frequency response as depicted in Section 6.1. The bandwidth
f-3dB=3.5 GHz.

Fig. 6.10 shows the output noise voltage power with 50

n loads.

The output noise

voltage density is 0.14 j1V/vHz, and the input-referred noise current density is about
70 pA/VHz. Fig. 6.11 shows the transient response of as Gbps data rate input (±0.1

rnA current pulse). Table 6.2 shows the key performance parameters of the designed

80

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

chip comparing with two recently published designs.

Table 6.2: Comparative performance of the preamplifiers Design Our design [40] [39] Topology Inverter Common-source CurrentTransim pedance Transim pedance mode Technology 0.18 JLm 0.18 JLm 0.18 JLm Supply voltage 2.0 V 1.8 V 1.8 V Bandwidth 1.5 GHz 2.6 GHz 3.5 GHz Transimpedance gain 47.9 dBn 58.7 dBn 66 dBn (with 50 n loads) Input noise current density 13 pAI.,fJlZ 9 pAj-JHz 70 pAIJHz Photodiode capacitance 0.2 pF 0.3 pF 0.275 pF Power dissipation 76 mH1 47mlF 85 mH' Maximum signal current 0.8 mA Chip area Imm x Imm

30r-----~----~------~----~------._----_.

20

«

~

10

....
c::i x

E

0

I
Output
-30~----~----~------~----~------~----~

o

0.5

1.5 Time [ns]

2

2.5

3

Figure 6.11: Transient response of the differential preamplifier (Date rate = 5 Gbps, Cd = 0.3 pF)

81

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Chapter 7
Conclusions
7.1 Summary and Conclusions

\Ve have discussed a GMOS current-mode approach for the optical front-end design. A new low-voltage fully-differential current-mode preamplifier for optical receivers has been designed and built using TSMC 0.18 /-lm 1.8 V mixed-signal C!",fOS technology. An in-depth comparative analysis of the characteristics of various low-voltage CMOS current-mode circuits has been conducted. It is revealed that most configurations fail to function properly at high frequencies, and the current-mirror amplifier with current feedback offers the best performance. Two new bandwidth enhancement techniques have been developed and implemented in the design. The inductor series-peaking technique boosts the bandwidth by utilizing the resonance characteristics of LC network formed by placing an inductor in series with the capacitor constituting the dominant pole. It is demonstrated that, in both of the current-mirror amplifier configuration and the optical preamplifier configuration, this technique boosts the bandwidth by about 100%. The current feedback technique increases the bandwidth by taking the advantage of negative feedback theory. A new sampling mechanism has been introduced to acquire the feedback current. It is shown that the feedback boosts the bandwidth by a factor of (1

+ k(3). \Vhen both techniques

82

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

are employed, the bandwidth is significantly increased by 2(1

+ kfJ).

In addition, the

current feedback greatly reduces the value of the peaking inductor. Both the inductor series-peaking and the current feedback techniques do not affect the supply voltage and DC biasing conditions. In the design, several topologies and design strategies to improve the performance of current-mode circuits have been presented and implemented. It is shown that a twostage amplifier configuration has a higher bandwidth than that of a single-stage one. The accuracy of current-mode circuits is severely affected by the errors caused by the mismatches of current mirrors. Analysis has shown that a fully balanced configuration can minimize the output offset current by cancelling out bias-dependent output offset current. A current branching mechanism has been adopted to reduce the power consumption of the circuit and increase the output impedance. The proposed preamplifier has a fully differential configuration to minimize the effect of power and ground fluctuations caused by the switching of digital portion of mixed signal circuits. A new negative differential current feedback has been employed to boost the bandwidth and improve the dynamic range of the amplifier. Simulation results have demonstrated that the designed preamplifier achieves 66dBO differential transimpedance gain with standard 50

n loads.

It operates at the bandwidth

up to 3.5 GHz, which matches SONET OC-96 data rate (5Gbps). The designed chip has been granted for fabrication by CMC and is being fabricated by TSMC currently.

7.2

Future Work

Followings are some directions for the future research on optical front-end designs using CMOS current-mode approaches . · Current-mode circuits usually suffer from high power consumption. Advanced low-

83

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

power current-mode techniques are greatly in demand for low-power applications. · A high output impedance amplifier will significantly improve accuracy. The currentbranching mechanism increases the output impedance with the drawback of creating channel length modulation problems. New configurations that have a high output impedance and in the mean time require a low supply voltage requirement are urgently needed. · Current feedback improves ·the bandwidth and lowers the input impedance. It, however, also deteriorates noise performance. Low-noise wide-band current-Illode circuits are desirable.
· It is seen that the on-chip passive inductors occupy a large chip area and have

a strong interference ,yith the substrate. Recently introduced active inductors provide a possible solution to this problem.

84

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Appendix A Brief SONET Specifications

Table A.I: Three broad application categories in SONET physical layers

I

Type Long Distance (LR) Intermediate Distance (IR) Short Distance (SR)

I System Loss Budget I
0

10 dB - 20 dB o dB - 12 dB o dB - 7 dB

Distance > 40 km > 15 km > 2 km

I

I- I
LR

Table A.2: Maximum and minimum power requirement at different speeds

IR
SR

OC-l OC-3 OC-12 OC-24 OC-48 0/-10 0/-10 +2/-8 0/-10 PTmax / PRmax 0/-10 -5 / -26 -5 / -26 -5 / -34 -3 / -28 PTmin / PRmin -5 / -34 -8/-8 -8/-8 PTmax / P Rmax -8/-8 0/0 0/0 -5 / -18 PTmin / PRmin -15 / -28 -15 / -28 -15 / -28 -5 / -18 -8/-8 -5/-5 -3/-3 PTmax / P Rmax -14 / -14 -8/-8 PTmin / PRmin -23 / -31 -15 / -23 -15 / -23 -12 / -20 -10 / -18 (PTrnax / PRrnax : MaxImum power for transmItters / receIvers) (PTmin / PRmin : Minimum power for transmitters / receivers) (The unit of power level is dBm)

"

I

I

I

I

85

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

Bibliography
[1] \Y. Goralski. SONET. l\IcGraw-Hill. 2000. [2] G. Keiser, Optical Fiber- Communications, l\lcGraw-Hill Higher Education. 2000. [3] C. Toumazou, F. J. Lidgey, aud D. G. Haigh, Analogue IC Design: the current-mode
approach, Peter Peregrillus Ltd., 1990.

[4] G. Palmisano, G. Palumbo, and S. Pennisi, CMOS CurTent Amplifier'S, Kluwer Academic Publishers, 1999. [5] 1\1. Ishibe, Y. Toyoshima, S. Takatsuka, aud S. Shimiza, "High-speed C1\IOS I/O buffer circuits." IEEE J. Solid-State Circuits, 1992. [6] T. Vauiari and C. Toumazou. "Integratcd high frequency lmy-noise currcnt-mod(> optical transimpednace preamplifier: theory and practice,"
Circuits, vol. 30, no. 6, pp. 667-685, June 1995. IEEE J. Solid-State
Y01.

27,

1l0.

4, pp. 671-673, April

[7] Cadence Design Systems Inc., "Spectre user's guide," Tech. Rep., 1998. [8] B. Sun and F. Yuan,
"A new inductor s('ri(~s-peaking technique for bandwidth

enhancement of CMOS current-mode circuits," Int. J. of Analog Integrated Cir'cuits
and Signal Processing,
Y01.

37, to appear, 2003.

86

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

[9] B. Sun and F. Yuan, "A new differential CMOS current pre-amplifier for optical communications," Pmc. of ISCAS'03, IEEE International Syrnposiurn on CiTcuits
and Systerns, yol. 1, pp. 341-344, May 2003, Bankok.

[10] B. Sun and F. Yuan, "A new low-voltage wide-band fully differential current amplifier," Pmc. of MWSCAS'02, IEEE Mid- West Syrnposiurn on CiTcuits and Systerns, yol. 2, pp. 57--60, Oklahoma, Aug. 2002.

[11] F. Yuan alld B. Sun, "A cOlllparati,"e study of low-yoltage C?\IOS current-lllode
circuits for optical comlIlllnications," Pmc. of MWSCAS'02, IEEE Mid- West Syrnposium on CiTcuits and Systerns, vol. 1, pp. 315-319, Oklahoma, Aug. 2002.

[12] B. Sun and F. Yuan, "A Hew series-peaking technique for bandwidth enhancement of Gt"IOS current-lllode circuits," Pmc. of CCECE'03, Canadian Conf. on ElectTical
and ComputeT Engineer·ing, '"01. 1, pp. 215-218, l'dontreal, I'IIay 2003.

[13] B. Sun and F. Yuan, "Low-yoltage wide-band differential current amplifiers for optical comlllunications," presented in 18th Syrnposiurn on Micmelectmnics Research
and Development in Canada, Ottawa, June 2002.

[14] S. Donati, 2000.

Photodetector8 - Devices, Cir'C1Lits, and Applications,

Prentice-HalL

[15] B. Razayi. Design of Integmted CiTcuits for Optical Comrnunications, l\fcGraw-Hill Higher Educatioll, 200l.

[IG] S. Sodof, Design and Applications of Analog Integrated Circuits, Prentice-Hall,
2001. [17] Maxim Integrated Products Inc., "Optical receiver performance eYaluation," Tech. Rep. HFAN-3.0.2, Rev 0, 2003. 87

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

[18J Maxim Integrated Products Inc., "Optical signal-fo-noise ratio and the Q-factor in fiber-optical communication system," Tech. Rep. HFAN-9.0.2, Rev 0, 2002. [19J A. Sedra and K. Smith, Microelcctmnic Circuits, Oxford, 1998. [20J S. 1\1. Park and C. Toumazou, "Giga-hertz low noise C1\IOS transil1lpedance alllplifieL" Pmc. of ISCAS'9'l, IEEE International Symposium on Cin:'llits and Systerns, vol. 1, pp. 209-212, June 1997. [21J S. 1\1. Park and C. Toumazou, ·'Low-noise currcllt-mode Cl\IOS trallsilllpccianc(' amplifier for giga-bit optical COlllll1Unications." Pmc. of ISCAS'98, IEEE Interna-

tional Symposium on Cir·cuits (md Systems, \"01. 1, pp. 293-296. l\Iay 1998.
[22J S. 1\1. Park alld C. Papa\"assilioll, "On the desigll of low-lloisc, giga-hertz bandwidth preamplifiers for optical receiver applications," Pmc. of ICECS·99, IEEE Intcrna-

tio'nal Conference on Electmnics, Circuits and Systems, \"01. 2, pp.
1999.

785~788,

Sept.

[23J F. l\Ialoberti, Analog Design for· CAtOS VLSI Systerns, Kluwer Academic Publishers, 2001. [24J K. Phallg, CMOS Optical Preamplifier Design Using Graphical Circuit A1talysis, Thesis for Ph. D. University of Toronto. 2001.
" <I

[25J M. Ingels ancll\I. S. J. SteyacrL "A 1-Gb/s, O.7-pIn C1\IOS optical recei\"cr with full rail-to-rail output swing," IEEE J. Solid-State Circuits, vol. 34, no. 7, pp. 971-977,
July 1999.

[26J B. Razavi, Design of Analog C~MOS Intcgmted Cir·cuits, McGraw-Hill, 2001.

88

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

[27] T. Serrano and B. Linares-Barranco, "The active-input regulated-cascade current

mirror," IEEE Trans. on Cir-wits and Systems I, vol. 41, no. 6, June 1994.
[28] S. Kawahito and Y. Tadokoro,

"Cl\10S class-AB currellt mirrors for precision
IEEE Trans. on Cir-cuits and

current-mode analog-signal-processing elements,"
Systems II, vol. 43, vol. 12, Dec. 1996.

[29] D. l\'airn and C. Salama, "Current-mode algorithmic analog-tn-digital conwrters,"

IEEE 1. Sol'id-State C'l:n;uits, vol. 2iJ, pp.

997~ 100 ..1,

Aug. 1990.

[30] E. SeeYinck, 1\1. Plessis, T. Joubert, and A. Theron, "Actiw-hootstrappcd gain-

enhancement technique for low-voltage circuits,"
Systems II, vol. 45, no. 9, Sept. 1998.

IEEE Tmns. on Ci1'cuits and

[31] R. Zele, D. Allstot, and T. Fiez, "Fully balanced CMOS current-mode circuits,"

IEEE J. Solid-State CiTwits, vol. 28, no. 5, Ma.r 1993.
[32] T. Voo and C. Toumazou, '·High-speed current mirror resistive compensation tech-

nique," lEE Electr-onics LetteTs, yol. 2, no. 4, 1995.
[33] S. S. Mohan, M. M. Hershenson, S. P. Boyd, and T. H. Lee, "Balldwidth extension

in Cl\10S with optimized on-chip inductors," IEEE J. of Solid-State Cir-wits, yol.
35, no. 3, 1\1ar. 2000. [34] T. Itakura and T. !ida, "A feedforward technique with frequency-dependent current

lllirrors for low-voltage wideband amplifier," IEEE.l. of Solid-State Cir-wits, vol.
31, no. 0, 1996. [35] S. S. Mohan, M. M. Hershenson, S. P. Boyd, and T. H. Lee,

"Simple accurate

expressions for planar spiral inductances," IEEE J. of Solid-State Circuits, Oct.
1999. 89

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

[3G] R. Baker, H. Li, D.Doyce, and editors, CMOS Cir·wit Design, Layout, and Sinw,-

lation, IEEE Press, 1998.
[37] G. Palmisano and S. Pennisi, "A versatile Cl\IOS fully differential current alllplifieL" Pmc. of ICECS'99, IEEE International Conference
0'1/.

Electmnics, Circuits

and Systems, vol. 2, Sept. 1999.
[38] G. SOllliotis, A. ChrisCllltllOpoulos, and I. Haritalltis. ··CUITf'llt diffC'relltial amplifiers: llO\\" circuits and applications," Int. J. of Circuit Theor·y and Applications, yol. 29, 20(H. [39] P. 1\Iitran, F. BC'allcioin, and 1\1. N. EI-Gamal, "A 2.5-Gbit/s C1\lOS optical recC'in~r frontcnd,"

Pmc. of ISCAS'02, IEEE Intemational Syrnposium on Cin:uits and

Systems, yol. 5, pp. 441--444, Arizona, 1\Iay 2002.
[40] F. Beaudoin and 1\1. N. EI-Gamal, "A 5-Gbit/s C1\IOS optical receiwT frontcud,"

Pmc. of MWSCAS'02, IEEE Afid- H'est Symposium on Circuits and Systems, yol.
3, pp. 1G8-17I, Oklahoma, Aug. 2002.

90

Reproduced with permission of the copyright owner. Further reproduction prohibited without permission.

